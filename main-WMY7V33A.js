import{a as Si}from"./chunk-FK6H3RFT.js";import{a as T,b as ce,c as U4,d as so,e as Pn,f as nR}from"./chunk-HZ6M6AS2.js";var g3=Pn((wd,f3)=>{"use strict";(function(e,t){typeof wd=="object"&&typeof f3<"u"?f3.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.Sweetalert2=t())})(wd,function(){"use strict";function e(y,E,k){if(typeof y=="function"?y===E:y.has(E))return arguments.length<3?E:k;throw new TypeError("Private element is not present on this object")}function t(y,E){if(E.has(y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(y,E){return y.get(e(y,E))}function i(y,E,k){t(y,E),E.set(y,k)}function r(y,E,k){return y.set(e(y,E),k),k}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},l=y=>new Promise(E=>{if(!y)return E();let k=window.scrollX,ne=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),E()},o),window.scrollTo(k,ne)}),c="swal2-",u=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((y,E)=>(y[E]=c+E,y),{}),p=["success","warning","info","question","error"].reduce((y,E)=>(y[E]=c+E,y),{}),f="SweetAlert2:",g=y=>y.charAt(0).toUpperCase()+y.slice(1),C=y=>{console.warn(`${f} ${typeof y=="object"?y.join(" "):y}`)},m=y=>{console.error(`${f} ${y}`)},w=[],x=y=>{w.includes(y)||(w.push(y),C(y))},D=(y,E=null)=>{x(`"${y}" is deprecated and will be removed in the next major release.${E?` Use "${E}" instead.`:""}`)},F=y=>typeof y=="function"?y():y,L=y=>y&&typeof y.toPromise=="function",V=y=>L(y)?y.toPromise():Promise.resolve(y),B=y=>y&&Promise.resolve(y)===y,P=()=>document.body.querySelector(`.${u.container}`),U=y=>{let E=P();return E?E.querySelector(y):null},A=y=>U(`.${y}`),I=()=>A(u.popup),j=()=>A(u.icon),G=()=>A(u["icon-content"]),Q=()=>A(u.title),le=()=>A(u["html-container"]),me=()=>A(u.image),ge=()=>A(u["progress-steps"]),se=()=>A(u["validation-message"]),de=()=>U(`.${u.actions} .${u.confirm}`),he=()=>U(`.${u.actions} .${u.cancel}`),M=()=>U(`.${u.actions} .${u.deny}`),ee=()=>A(u["input-label"]),te=()=>U(`.${u.loader}`),ue=()=>A(u.actions),ae=()=>A(u.footer),Ce=()=>A(u["timer-progress-bar"]),Ae=()=>A(u.close),Fe=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Me=()=>{let y=I();if(!y)return[];let E=y.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),k=Array.from(E).sort((rt,Ln)=>{let ii=parseInt(rt.getAttribute("tabindex")||"0"),Gi=parseInt(Ln.getAttribute("tabindex")||"0");return ii>Gi?1:ii<Gi?-1:0}),ne=y.querySelectorAll(Fe),Re=Array.from(ne).filter(rt=>rt.getAttribute("tabindex")!=="-1");return[...new Set(k.concat(Re))].filter(rt=>gt(rt))},Ve=()=>J(document.body,u.shown)&&!J(document.body,u["toast-shown"])&&!J(document.body,u["no-backdrop"]),Ze=()=>{let y=I();return y?J(y,u.toast):!1},et=()=>{let y=I();return y?y.hasAttribute("data-loading"):!1},ot=(y,E)=>{if(y.textContent="",E){let ne=new DOMParser().parseFromString(E,"text/html"),Re=ne.querySelector("head");Re&&Array.from(Re.childNodes).forEach(Ln=>{y.appendChild(Ln)});let rt=ne.querySelector("body");rt&&Array.from(rt.childNodes).forEach(Ln=>{Ln instanceof HTMLVideoElement||Ln instanceof HTMLAudioElement?y.appendChild(Ln.cloneNode(!0)):y.appendChild(Ln)})}},J=(y,E)=>{if(!E)return!1;let k=E.split(/\s+/);for(let ne=0;ne<k.length;ne++)if(!y.classList.contains(k[ne]))return!1;return!0},nt=(y,E)=>{Array.from(y.classList).forEach(k=>{!Object.values(u).includes(k)&&!Object.values(p).includes(k)&&!Object.values(E.showClass||{}).includes(k)&&y.classList.remove(k)})},Rt=(y,E,k)=>{if(nt(y,E),!E.customClass)return;let ne=E.customClass[k];if(ne){if(typeof ne!="string"&&!ne.forEach){C(`Invalid type of customClass.${k}! Expected string or iterable object, got "${typeof ne}"`);return}Ue(y,ne)}},vt=(y,E)=>{if(!E)return null;switch(E){case"select":case"textarea":case"file":return y.querySelector(`.${u.popup} > .${u[E]}`);case"checkbox":return y.querySelector(`.${u.popup} > .${u.checkbox} input`);case"radio":return y.querySelector(`.${u.popup} > .${u.radio} input:checked`)||y.querySelector(`.${u.popup} > .${u.radio} input:first-child`);case"range":return y.querySelector(`.${u.popup} > .${u.range} input`);default:return y.querySelector(`.${u.popup} > .${u.input}`)}},Ne=y=>{if(y.focus(),y.type!=="file"){let E=y.value;y.value="",y.value=E}},ct=(y,E,k)=>{!y||!E||(typeof E=="string"&&(E=E.split(/\s+/).filter(Boolean)),E.forEach(ne=>{Array.isArray(y)?y.forEach(Re=>{k?Re.classList.add(ne):Re.classList.remove(ne)}):k?y.classList.add(ne):y.classList.remove(ne)}))},Ue=(y,E)=>{ct(y,E,!0)},lt=(y,E)=>{ct(y,E,!1)},dt=(y,E)=>{let k=Array.from(y.children);for(let ne=0;ne<k.length;ne++){let Re=k[ne];if(Re instanceof HTMLElement&&J(Re,E))return Re}},rn=(y,E,k)=>{k===`${parseInt(`${k}`)}`&&(k=parseInt(k)),k||parseInt(`${k}`)===0?y.style.setProperty(E,typeof k=="number"?`${k}px`:k):y.style.removeProperty(E)},yt=(y,E="flex")=>{y&&(y.style.display=E)},Ct=y=>{y&&(y.style.display="none")},Cn=(y,E="block")=>{y&&new MutationObserver(()=>{st(y,y.innerHTML,E)}).observe(y,{childList:!0,subtree:!0})},bn=(y,E,k,ne)=>{let Re=y.querySelector(E);Re&&Re.style.setProperty(k,ne)},st=(y,E,k="flex")=>{E?yt(y,k):Ct(y)},gt=y=>!!(y&&(y.offsetWidth||y.offsetHeight||y.getClientRects().length)),St=()=>!gt(de())&&!gt(M())&&!gt(he()),bi=y=>y.scrollHeight>y.clientHeight,In=(y,E)=>{let k=y;for(;k&&k!==E;){if(bi(k))return!0;k=k.parentElement}return!1},ln=y=>{let E=window.getComputedStyle(y),k=parseFloat(E.getPropertyValue("animation-duration")||"0"),ne=parseFloat(E.getPropertyValue("transition-duration")||"0");return k>0||ne>0},on=(y,E=!1)=>{let k=Ce();k&&gt(k)&&(E&&(k.style.transition="none",k.style.width="100%"),setTimeout(()=>{k.style.transition=`width ${y/1e3}s linear`,k.style.width="0%"},10))},pi=()=>{let y=Ce();if(!y)return;let E=parseInt(window.getComputedStyle(y).width);y.style.removeProperty("transition"),y.style.width="100%";let k=parseInt(window.getComputedStyle(y).width),ne=E/k*100;y.style.width=`${ne}%`},Mt=()=>typeof window>"u"||typeof document>"u",ni=`
 <div aria-labelledby="${u.title}" aria-describedby="${u["html-container"]}" class="${u.popup}" tabindex="-1">
   <button type="button" class="${u.close}"></button>
   <ul class="${u["progress-steps"]}"></ul>
   <div class="${u.icon}"></div>
   <img class="${u.image}" />
   <h2 class="${u.title}" id="${u.title}"></h2>
   <div class="${u["html-container"]}" id="${u["html-container"]}"></div>
   <input class="${u.input}" id="${u.input}" />
   <input type="file" class="${u.file}" />
   <div class="${u.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${u.select}" id="${u.select}"></select>
   <div class="${u.radio}"></div>
   <label class="${u.checkbox}">
     <input type="checkbox" id="${u.checkbox}" />
     <span class="${u.label}"></span>
   </label>
   <textarea class="${u.textarea}" id="${u.textarea}"></textarea>
   <div class="${u["validation-message"]}" id="${u["validation-message"]}"></div>
   <div class="${u.actions}">
     <div class="${u.loader}"></div>
     <button type="button" class="${u.confirm}"></button>
     <button type="button" class="${u.deny}"></button>
     <button type="button" class="${u.cancel}"></button>
   </div>
   <div class="${u.footer}"></div>
   <div class="${u["timer-progress-bar-container"]}">
     <div class="${u["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Vt=()=>{let y=P();return y?(y.remove(),lt([document.documentElement,document.body],[u["no-backdrop"],u["toast-shown"],u["has-column"]]),!0):!1},Ot=()=>{s.currentInstance.resetValidationMessage()},wi=()=>{let y=I(),E=dt(y,u.input),k=dt(y,u.file),ne=y.querySelector(`.${u.range} input`),Re=y.querySelector(`.${u.range} output`),rt=dt(y,u.select),Ln=y.querySelector(`.${u.checkbox} input`),ii=dt(y,u.textarea);E.oninput=Ot,k.onchange=Ot,rt.onchange=Ot,Ln.onchange=Ot,ii.oninput=Ot,ne.oninput=()=>{Ot(),Re.value=ne.value},ne.onchange=()=>{Ot(),Re.value=ne.value}},wn=y=>typeof y=="string"?document.querySelector(y):y,Nt=y=>{let E=I();E.setAttribute("role",y.toast?"alert":"dialog"),E.setAttribute("aria-live",y.toast?"polite":"assertive"),y.toast||E.setAttribute("aria-modal","true")},Bn=y=>{window.getComputedStyle(y).direction==="rtl"&&(Ue(P(),u.rtl),s.isRTL=!0)},jl=y=>{let E=Vt();if(Mt()){m("SweetAlert2 requires document to initialize");return}let k=document.createElement("div");k.className=u.container,E&&Ue(k,u["no-transition"]),ot(k,ni),k.dataset.swal2Theme=y.theme;let ne=wn(y.target);ne.appendChild(k),y.topLayer&&(k.setAttribute("popover",""),k.showPopover()),Nt(y),Bn(ne),wi()},cr=(y,E)=>{y instanceof HTMLElement?E.appendChild(y):typeof y=="object"?Bs(y,E):y&&ot(E,y)},Bs=(y,E)=>{y.jquery?Vs(E,y):ot(E,y.toString())},Vs=(y,E)=>{if(y.textContent="",0 in E)for(let k=0;k in E;k++)y.appendChild(E[k].cloneNode(!0));else y.appendChild(E.cloneNode(!0))},kt=(y,E)=>{let k=ue(),ne=te();!k||!ne||(!E.showConfirmButton&&!E.showDenyButton&&!E.showCancelButton?Ct(k):yt(k),Rt(k,E,"actions"),Ni(k,ne,E),ot(ne,E.loaderHtml||""),Rt(ne,E,"loader"))};function Ni(y,E,k){let ne=de(),Re=M(),rt=he();!ne||!Re||!rt||(bo(ne,"confirm",k),bo(Re,"deny",k),bo(rt,"cancel",k),zr(ne,Re,rt,k),k.reverseButtons&&(k.toast?(y.insertBefore(rt,ne),y.insertBefore(Re,ne)):(y.insertBefore(rt,E),y.insertBefore(Re,E),y.insertBefore(ne,E))))}function zr(y,E,k,ne){if(!ne.buttonsStyling){lt([y,E,k],u.styled);return}Ue([y,E,k],u.styled),ne.confirmButtonColor&&y.style.setProperty("--swal2-confirm-button-background-color",ne.confirmButtonColor),ne.denyButtonColor&&E.style.setProperty("--swal2-deny-button-background-color",ne.denyButtonColor),ne.cancelButtonColor&&k.style.setProperty("--swal2-cancel-button-background-color",ne.cancelButtonColor),to(y),to(E),to(k)}function to(y){let E=window.getComputedStyle(y);if(E.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;let k=E.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");y.style.setProperty("--swal2-action-button-focus-box-shadow",E.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${k}`))}function bo(y,E,k){let ne=g(E);st(y,k[`show${ne}Button`],"inline-block"),ot(y,k[`${E}ButtonText`]||""),y.setAttribute("aria-label",k[`${E}ButtonAriaLabel`]||""),y.className=u[E],Rt(y,k,`${E}Button`)}let $i=(y,E)=>{let k=Ae();k&&(ot(k,E.closeButtonHtml||""),Rt(k,E,"closeButton"),st(k,E.showCloseButton),k.setAttribute("aria-label",E.closeButtonAriaLabel||""))},jr=(y,E)=>{let k=P();k&&(no(k,E.backdrop),Ud(k,E.position),Tc(k,E.grow),Rt(k,E,"container"))};function no(y,E){typeof E=="string"?y.style.background=E:E||Ue([document.documentElement,document.body],u["no-backdrop"])}function Ud(y,E){E&&(E in u?Ue(y,u[E]):(C('The "position" parameter is not valid, defaulting to "center"'),Ue(y,u.center)))}function Tc(y,E){E&&Ue(y,u[`grow-${E}`])}var Tn={innerParams:new WeakMap,domCache:new WeakMap};let Za=["input","file","range","select","radio","checkbox","textarea"],ga=(y,E)=>{let k=I();if(!k)return;let ne=Tn.innerParams.get(y),Re=!ne||E.input!==ne.input;Za.forEach(rt=>{let Ln=dt(k,u[rt]);Ln&&(Wd(rt,E.inputAttributes),Ln.className=u[rt],Re&&Ct(Ln))}),E.input&&(Re&&ma(E),Xa(E))},ma=y=>{if(!y.input)return;if(!Bi[y.input]){m(`Unexpected type of input! Expected ${Object.keys(Bi).join(" | ")}, got "${y.input}"`);return}let E=$d(y.input);if(!E)return;let k=Bi[y.input](E,y);yt(E),y.inputAutoFocus&&setTimeout(()=>{Ne(k)})},Gs=y=>{for(let E=0;E<y.attributes.length;E++){let k=y.attributes[E].name;["id","type","value","style"].includes(k)||y.removeAttribute(k)}},Wd=(y,E)=>{let k=I();if(!k)return;let ne=vt(k,y);if(ne){Gs(ne);for(let Re in E)ne.setAttribute(Re,E[Re])}},Xa=y=>{if(!y.input)return;let E=$d(y.input);E&&Rt(E,y,"input")},Ul=(y,E)=>{!y.placeholder&&E.inputPlaceholder&&(y.placeholder=E.inputPlaceholder)},Qa=(y,E,k)=>{if(k.inputLabel){let ne=document.createElement("label"),Re=u["input-label"];ne.setAttribute("for",y.id),ne.className=Re,typeof k.customClass=="object"&&Ue(ne,k.customClass.inputLabel),ne.innerText=k.inputLabel,E.insertAdjacentElement("beforebegin",ne)}},$d=y=>{let E=I();if(E)return dt(E,u[y]||u.input)},Wl=(y,E)=>{["string","number"].includes(typeof E)?y.value=`${E}`:B(E)||C(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof E}"`)},Bi={};Bi.text=Bi.email=Bi.password=Bi.number=Bi.tel=Bi.url=Bi.search=Bi.date=Bi["datetime-local"]=Bi.time=Bi.week=Bi.month=(y,E)=>(Wl(y,E.inputValue),Qa(y,y,E),Ul(y,E),y.type=E.input,y),Bi.file=(y,E)=>(Qa(y,y,E),Ul(y,E),y),Bi.range=(y,E)=>{let k=y.querySelector("input"),ne=y.querySelector("output");return Wl(k,E.inputValue),k.type=E.input,Wl(ne,E.inputValue),Qa(k,y,E),y},Bi.select=(y,E)=>{if(y.textContent="",E.inputPlaceholder){let k=document.createElement("option");ot(k,E.inputPlaceholder),k.value="",k.disabled=!0,k.selected=!0,y.appendChild(k)}return Qa(y,y,E),y},Bi.radio=y=>(y.textContent="",y),Bi.checkbox=(y,E)=>{let k=vt(I(),"checkbox");k.value="1",k.checked=!!E.inputValue;let ne=y.querySelector("span");return ot(ne,E.inputPlaceholder||E.inputLabel),k},Bi.textarea=(y,E)=>{Wl(y,E.inputValue),Ul(y,E),Qa(y,y,E);let k=ne=>parseInt(window.getComputedStyle(ne).marginLeft)+parseInt(window.getComputedStyle(ne).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let ne=parseInt(window.getComputedStyle(I()).width),Re=()=>{if(!document.body.contains(y))return;let rt=y.offsetWidth+k(y);rt>ne?I().style.width=`${rt}px`:rn(I(),"width",E.width)};new MutationObserver(Re).observe(y,{attributes:!0,attributeFilter:["style"]})}}),y};let xp=(y,E)=>{let k=le();k&&(Cn(k),Rt(k,E,"htmlContainer"),E.html?(cr(E.html,k),yt(k,"block")):E.text?(k.textContent=E.text,yt(k,"block")):Ct(k),ga(y,E))},Vg=(y,E)=>{let k=ae();k&&(Cn(k),st(k,!!E.footer,"block"),E.footer&&cr(E.footer,k),Rt(k,E,"footer"))},Gg=(y,E)=>{let k=Tn.innerParams.get(y),ne=j();if(!ne)return;if(k&&E.icon===k.icon){Dp(ne,E),us(ne,E);return}if(!E.icon&&!E.iconHtml){Ct(ne);return}if(E.icon&&Object.keys(p).indexOf(E.icon)===-1){m(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${E.icon}"`),Ct(ne);return}yt(ne),Dp(ne,E),us(ne,E),Ue(ne,E.showClass&&E.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Yu)},us=(y,E)=>{for(let[k,ne]of Object.entries(p))E.icon!==k&&lt(y,ne);Ue(y,E.icon&&p[E.icon]),zg(y,E),Yu(),Rt(y,E,"icon")},Yu=()=>{let y=I();if(!y)return;let E=window.getComputedStyle(y).getPropertyValue("background-color"),k=y.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ne=0;ne<k.length;ne++)k[ne].style.backgroundColor=E},Hg=y=>`
  ${y.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${y.animation?'<div class="swal2-success-fix"></div>':""}
  ${y.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Ep=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Dp=(y,E)=>{if(!E.icon&&!E.iconHtml)return;let k=y.innerHTML,ne="";E.iconHtml?ne=_p(E.iconHtml):E.icon==="success"?(ne=Hg(E),k=k.replace(/ style=".*?"/g,"")):E.icon==="error"?ne=Ep:E.icon&&(ne=_p({question:"?",warning:"!",info:"i"}[E.icon])),k.trim()!==ne.trim()&&ot(y,ne)},zg=(y,E)=>{if(E.iconColor){y.style.color=E.iconColor,y.style.borderColor=E.iconColor;for(let k of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])bn(y,k,"background-color",E.iconColor);bn(y,".swal2-success-ring","border-color",E.iconColor)}},_p=y=>`<div class="${u["icon-content"]}">${y}</div>`,Ja=(y,E)=>{let k=me();if(k){if(!E.imageUrl){Ct(k);return}yt(k,""),k.setAttribute("src",E.imageUrl),k.setAttribute("alt",E.imageAlt||""),rn(k,"width",E.imageWidth),rn(k,"height",E.imageHeight),k.className=u.image,Rt(k,E,"image")}},Pc=!1,jg=0,tr=0,Ap=0,va=0,Zu=y=>{y.addEventListener("mousedown",Fo),document.body.addEventListener("mousemove",qi),y.addEventListener("mouseup",Hs),y.addEventListener("touchstart",Fo),document.body.addEventListener("touchmove",qi),y.addEventListener("touchend",Hs)},Ug=y=>{y.removeEventListener("mousedown",Fo),document.body.removeEventListener("mousemove",qi),y.removeEventListener("mouseup",Hs),y.removeEventListener("touchstart",Fo),document.body.removeEventListener("touchmove",qi),y.removeEventListener("touchend",Hs)},Fo=y=>{let E=I();if(y.target===E||j().contains(y.target)){Pc=!0;let k=Rp(y);jg=k.clientX,tr=k.clientY,Ap=parseInt(E.style.insetInlineStart)||0,va=parseInt(E.style.insetBlockStart)||0,Ue(E,"swal2-dragging")}},qi=y=>{let E=I();if(Pc){let{clientX:k,clientY:ne}=Rp(y),Re=k-jg;E.style.insetInlineStart=`${Ap+(s.isRTL?-Re:Re)}px`,E.style.insetBlockStart=`${va+(ne-tr)}px`}},Hs=()=>{let y=I();Pc=!1,lt(y,"swal2-dragging")},Rp=y=>{let E=0,k=0;return y.type.startsWith("mouse")?(E=y.clientX,k=y.clientY):y.type.startsWith("touch")&&(E=y.touches[0].clientX,k=y.touches[0].clientY),{clientX:E,clientY:k}},W0=(y,E)=>{let k=P(),ne=I();if(!(!k||!ne)){if(E.toast){rn(k,"width",E.width),ne.style.width="100%";let Re=te();Re&&ne.insertBefore(Re,j())}else rn(ne,"width",E.width);rn(ne,"padding",E.padding),E.color&&(ne.style.color=E.color),E.background&&(ne.style.background=E.background),Ct(se()),$0(ne,E),E.draggable&&!E.toast?(Ue(ne,u.draggable),Zu(ne)):(lt(ne,u.draggable),Ug(ne))}},$0=(y,E)=>{let k=E.showClass||{};y.className=`${u.popup} ${gt(y)?k.popup:""}`,E.toast?(Ue([document.documentElement,document.body],u["toast-shown"]),Ue(y,u.toast)):Ue(y,u.modal),Rt(y,E,"popup"),typeof E.customClass=="string"&&Ue(y,E.customClass),E.icon&&Ue(y,u[`icon-${E.icon}`])},el=(y,E)=>{let k=ge();if(!k)return;let{progressSteps:ne,currentProgressStep:Re}=E;if(!ne||ne.length===0||Re===void 0){Ct(k);return}yt(k),k.textContent="",Re>=ne.length&&C("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),ne.forEach((rt,Ln)=>{let ii=Wg(rt);if(k.appendChild(ii),Ln===Re&&Ue(ii,u["active-progress-step"]),Ln!==ne.length-1){let Gi=$g(E);k.appendChild(Gi)}})},Wg=y=>{let E=document.createElement("li");return Ue(E,u["progress-step"]),ot(E,y),E},$g=y=>{let E=document.createElement("li");return Ue(E,u["progress-step-line"]),y.progressStepsDistance&&rn(E,"width",y.progressStepsDistance),E},Xu=(y,E)=>{let k=Q();k&&(Cn(k),st(k,!!(E.title||E.titleText),"block"),E.title&&cr(E.title,k),E.titleText&&(k.innerText=E.titleText),Rt(k,E,"title"))},kc=(y,E)=>{W0(y,E),jr(y,E),el(y,E),Gg(y,E),Ja(y,E),Xu(y,E),$i(y,E),xp(y,E),kt(y,E),Vg(y,E);let k=I();typeof E.didRender=="function"&&k&&E.didRender(k),s.eventEmitter.emit("didRender",k)},q0=()=>gt(I()),qg=()=>{var y;return(y=de())===null||y===void 0?void 0:y.click()},K0=()=>{var y;return(y=M())===null||y===void 0?void 0:y.click()},Fp=()=>{var y;return(y=he())===null||y===void 0?void 0:y.click()},$l=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),zs=y=>{y.keydownTarget&&y.keydownHandlerAdded&&(y.keydownTarget.removeEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!1)},Y0=(y,E,k)=>{zs(y),E.toast||(y.keydownHandler=ne=>Xt(E,ne,k),y.keydownTarget=E.keydownListenerCapture?window:I(),y.keydownListenerCapture=E.keydownListenerCapture,y.keydownTarget.addEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!0)},ql=(y,E)=>{var k;let ne=Me();if(ne.length){y=y+E,y===-2&&(y=ne.length-1),y===ne.length?y=0:y===-1&&(y=ne.length-1),ne[y].focus();return}(k=I())===null||k===void 0||k.focus()},Qu=["ArrowRight","ArrowDown"],Z0=["ArrowLeft","ArrowUp"],Xt=(y,E,k)=>{y&&(E.isComposing||E.keyCode===229||(y.stopKeydownPropagation&&E.stopPropagation(),E.key==="Enter"?X0(E,y):E.key==="Tab"?Q0(E):[...Qu,...Z0].includes(E.key)?J0(E.key):E.key==="Escape"&&Kl(E,y,k)))},X0=(y,E)=>{if(!F(E.allowEnterKey))return;let k=vt(I(),E.input);if(y.target&&k&&y.target instanceof HTMLElement&&y.target.outerHTML===k.outerHTML){if(["textarea","file"].includes(E.input))return;qg(),y.preventDefault()}},Q0=y=>{let E=y.target,k=Me(),ne=-1;for(let Re=0;Re<k.length;Re++)if(E===k[Re]){ne=Re;break}y.shiftKey?ql(ne,-1):ql(ne,1),y.stopPropagation(),y.preventDefault()},J0=y=>{let E=ue(),k=de(),ne=M(),Re=he();if(!E||!k||!ne||!Re)return;let rt=[k,ne,Re];if(document.activeElement instanceof HTMLElement&&!rt.includes(document.activeElement))return;let Ln=Qu.includes(y)?"nextElementSibling":"previousElementSibling",ii=document.activeElement;if(ii){for(let Gi=0;Gi<E.children.length;Gi++){if(ii=ii[Ln],!ii)return;if(ii instanceof HTMLButtonElement&&gt(ii))break}ii instanceof HTMLButtonElement&&ii.focus()}},Kl=(y,E,k)=>{y.preventDefault(),F(E.allowEscapeKey)&&k($l.esc)};var Wo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let eC=()=>{let y=P();Array.from(document.body.children).forEach(k=>{k.contains(y)||(k.hasAttribute("aria-hidden")&&k.setAttribute("data-previous-aria-hidden",k.getAttribute("aria-hidden")||""),k.setAttribute("aria-hidden","true"))})},Kg=()=>{Array.from(document.body.children).forEach(E=>{E.hasAttribute("data-previous-aria-hidden")?(E.setAttribute("aria-hidden",E.getAttribute("data-previous-aria-hidden")||""),E.removeAttribute("data-previous-aria-hidden")):E.removeAttribute("aria-hidden")})},qd=typeof window<"u"&&!!window.GestureEvent,Mp=()=>{if(qd&&!J(document.body,u.iosfix)){let y=document.body.scrollTop;document.body.style.top=`${y*-1}px`,Ue(document.body,u.iosfix),Kd()}},Kd=()=>{let y=P();if(!y)return;let E;y.ontouchstart=k=>{E=tC(k)},y.ontouchmove=k=>{E&&(k.preventDefault(),k.stopPropagation())}},tC=y=>{let E=y.target,k=P(),ne=le();return!k||!ne||Yl(y)||nC(y)?!1:E===k||!bi(k)&&E instanceof HTMLElement&&!In(E,ne)&&E.tagName!=="INPUT"&&E.tagName!=="TEXTAREA"&&!(bi(ne)&&ne.contains(E))},Yl=y=>y.touches&&y.touches.length&&y.touches[0].touchType==="stylus",nC=y=>y.touches&&y.touches.length>1,Ip=()=>{if(J(document.body,u.iosfix)){let y=parseInt(document.body.style.top,10);lt(document.body,u.iosfix),document.body.style.top="",document.body.scrollTop=y*-1}},Tp=()=>{let y=document.createElement("div");y.className=u["scrollbar-measure"],document.body.appendChild(y);let E=y.getBoundingClientRect().width-y.clientWidth;return document.body.removeChild(y),E},Zl=null,Xl=y=>{Zl===null&&(document.body.scrollHeight>window.innerHeight||y==="scroll")&&(Zl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Zl+Tp()}px`)},Pp=()=>{Zl!==null&&(document.body.style.paddingRight=`${Zl}px`,Zl=null)};function Yd(y,E,k,ne){Ze()?Oc(y,ne):(l(k).then(()=>Oc(y,ne)),zs(s)),qd?(E.setAttribute("style","display:none !important"),E.removeAttribute("class"),E.innerHTML=""):E.remove(),Ve()&&(Pp(),Ip(),Kg()),kp()}function kp(){lt([document.documentElement,document.body],[u.shown,u["height-auto"],u["no-backdrop"],u["toast-shown"]])}function $o(y){y=Ql(y);let E=Wo.swalPromiseResolve.get(this),k=Lp(this);this.isAwaitingPromise?y.isDismissed||(Lc(this),E(y)):k&&E(y)}let Lp=y=>{let E=I();if(!E)return!1;let k=Tn.innerParams.get(y);if(!k||J(E,k.hideClass.popup))return!1;lt(E,k.showClass.popup),Ue(E,k.hideClass.popup);let ne=P();return lt(ne,k.showClass.backdrop),Ue(ne,k.hideClass.backdrop),Jl(y,E,k),!0};function Op(y){let E=Wo.swalPromiseReject.get(this);Lc(this),E&&E(y)}let Lc=y=>{y.isAwaitingPromise&&(delete y.isAwaitingPromise,Tn.innerParams.get(y)||y._destroy())},Ql=y=>typeof y>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},y),Jl=(y,E,k)=>{var ne;let Re=P(),rt=ln(E);typeof k.willClose=="function"&&k.willClose(E),(ne=s.eventEmitter)===null||ne===void 0||ne.emit("willClose",E),rt?Yg(y,E,Re,k.returnFocus,k.didClose):Yd(y,Re,k.returnFocus,k.didClose)},Yg=(y,E,k,ne,Re)=>{s.swalCloseEventFinishedCallback=Yd.bind(null,y,k,ne,Re);let rt=function(Ln){if(Ln.target===E){var ii;(ii=s.swalCloseEventFinishedCallback)===null||ii===void 0||ii.call(s),delete s.swalCloseEventFinishedCallback,E.removeEventListener("animationend",rt),E.removeEventListener("transitionend",rt)}};E.addEventListener("animationend",rt),E.addEventListener("transitionend",rt)},Oc=(y,E)=>{setTimeout(()=>{var k;typeof E=="function"&&E.bind(y.params)(),(k=s.eventEmitter)===null||k===void 0||k.emit("didClose"),y._destroy&&y._destroy()})},ec=y=>{let E=I();if(E||new nm,E=I(),!E)return;let k=te();Ze()?Ct(j()):S(E,y),yt(k),E.setAttribute("data-loading","true"),E.setAttribute("aria-busy","true"),E.focus()},S=(y,E)=>{let k=ue(),ne=te();!k||!ne||(!E&&gt(de())&&(E=de()),yt(k),E&&(Ct(E),ne.setAttribute("data-button-to-replace",E.className),k.insertBefore(ne,E)),Ue([y,k],u.loading))},O=(y,E)=>{E.input==="select"||E.input==="radio"?He(y,E):["text","email","number","tel","textarea"].some(k=>k===E.input)&&(L(E.inputValue)||B(E.inputValue))&&(ec(de()),ht(y,E))},ie=(y,E)=>{let k=y.getInput();if(!k)return null;switch(E.input){case"checkbox":return fe(k);case"radio":return we(k);case"file":return ke(k);default:return E.inputAutoTrim?k.value.trim():k.value}},fe=y=>y.checked?1:0,we=y=>y.checked?y.value:null,ke=y=>y.files&&y.files.length?y.getAttribute("multiple")!==null?y.files:y.files[0]:null,He=(y,E)=>{let k=I();if(!k)return;let ne=Re=>{E.input==="select"?xt(k,Qt(Re),E):E.input==="radio"&&Yt(k,Qt(Re),E)};L(E.inputOptions)||B(E.inputOptions)?(ec(de()),V(E.inputOptions).then(Re=>{y.hideLoading(),ne(Re)})):typeof E.inputOptions=="object"?ne(E.inputOptions):m(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof E.inputOptions}`)},ht=(y,E)=>{let k=y.getInput();k&&(Ct(k),V(E.inputValue).then(ne=>{k.value=E.input==="number"?`${parseFloat(ne)||0}`:`${ne}`,yt(k),k.focus(),y.hideLoading()}).catch(ne=>{m(`Error in inputValue promise: ${ne}`),k.value="",yt(k),k.focus(),y.hideLoading()}))};function xt(y,E,k){let ne=dt(y,u.select);if(!ne)return;let Re=(rt,Ln,ii)=>{let Gi=document.createElement("option");Gi.value=ii,ot(Gi,Ln),Gi.selected=On(ii,k.inputValue),rt.appendChild(Gi)};E.forEach(rt=>{let Ln=rt[0],ii=rt[1];if(Array.isArray(ii)){let Gi=document.createElement("optgroup");Gi.label=Ln,Gi.disabled=!1,ne.appendChild(Gi),ii.forEach(ah=>Re(Gi,ah[1],ah[0]))}else Re(ne,ii,Ln)}),ne.focus()}function Yt(y,E,k){let ne=dt(y,u.radio);if(!ne)return;E.forEach(rt=>{let Ln=rt[0],ii=rt[1],Gi=document.createElement("input"),ah=document.createElement("label");Gi.type="radio",Gi.name=u.radio,Gi.value=Ln,On(Ln,k.inputValue)&&(Gi.checked=!0);let ol=document.createElement("span");ot(ol,ii),ol.className=u.label,ah.appendChild(Gi),ah.appendChild(ol),ne.appendChild(ah)});let Re=ne.querySelectorAll("input");Re.length&&Re[0].focus()}let Qt=y=>{let E=[];return y instanceof Map?y.forEach((k,ne)=>{let Re=k;typeof Re=="object"&&(Re=Qt(Re)),E.push([ne,Re])}):Object.keys(y).forEach(k=>{let ne=y[k];typeof ne=="object"&&(ne=Qt(ne)),E.push([k,ne])}),E},On=(y,E)=>!!E&&E.toString()===y.toString(),Vi=y=>{let E=Tn.innerParams.get(y);y.disableButtons(),E.input?ur(y,"confirm"):Ca(y,!0)},dr=y=>{let E=Tn.innerParams.get(y);y.disableButtons(),E.returnInputValueOnDeny?ur(y,"deny"):_r(y,!1)},yi=(y,E)=>{y.disableButtons(),E($l.cancel)},ur=(y,E)=>{let k=Tn.innerParams.get(y);if(!k.input){m(`The "input" parameter is needed to be set when using returnInputValueOn${g(E)}`);return}let ne=y.getInput(),Re=ie(y,k);k.inputValidator?hr(y,Re,E):ne&&!ne.checkValidity()?(y.enableButtons(),y.showValidationMessage(k.validationMessage||ne.validationMessage)):E==="deny"?_r(y,Re):Ca(y,Re)},hr=(y,E,k)=>{let ne=Tn.innerParams.get(y);y.disableInput(),Promise.resolve().then(()=>V(ne.inputValidator(E,ne.validationMessage))).then(rt=>{y.enableButtons(),y.enableInput(),rt?y.showValidationMessage(rt):k==="deny"?_r(y,E):Ca(y,E)})},_r=(y,E)=>{let k=Tn.innerParams.get(y||void 0);k.showLoaderOnDeny&&ec(M()),k.preDeny?(y.isAwaitingPromise=!0,Promise.resolve().then(()=>V(k.preDeny(E,k.validationMessage))).then(Re=>{Re===!1?(y.hideLoading(),Lc(y)):y.close({isDenied:!0,value:typeof Re>"u"?E:Re})}).catch(Re=>js(y||void 0,Re))):y.close({isDenied:!0,value:E})},tl=(y,E)=>{y.close({isConfirmed:!0,value:E})},js=(y,E)=>{y.rejectPromise(E)},Ca=(y,E)=>{let k=Tn.innerParams.get(y||void 0);k.showLoaderOnConfirm&&ec(),k.preConfirm?(y.resetValidationMessage(),y.isAwaitingPromise=!0,Promise.resolve().then(()=>V(k.preConfirm(E,k.validationMessage))).then(Re=>{gt(se())||Re===!1?(y.hideLoading(),Lc(y)):tl(y,typeof Re>"u"?E:Re)}).catch(Re=>js(y||void 0,Re))):tl(y,E)};function Nc(){let y=Tn.innerParams.get(this);if(!y)return;let E=Tn.domCache.get(this);Ct(E.loader),Ze()?y.icon&&yt(j()):Ju(E),lt([E.popup,E.actions],u.loading),E.popup.removeAttribute("aria-busy"),E.popup.removeAttribute("data-loading"),E.confirmButton.disabled=!1,E.denyButton.disabled=!1,E.cancelButton.disabled=!1}let Ju=y=>{let E=y.popup.getElementsByClassName(y.loader.getAttribute("data-button-to-replace"));E.length?yt(E[0],"inline-block"):St()&&Ct(y.actions)};function tc(){let y=Tn.innerParams.get(this),E=Tn.domCache.get(this);return E?vt(E.popup,y.input):null}function Bc(y,E,k){let ne=Tn.domCache.get(y);E.forEach(Re=>{ne[Re].disabled=k})}function Vc(y,E){let k=I();if(!(!k||!y))if(y.type==="radio"){let ne=k.querySelectorAll(`[name="${u.radio}"]`);for(let Re=0;Re<ne.length;Re++)ne[Re].disabled=E}else y.disabled=E}function nc(){Bc(this,["confirmButton","denyButton","cancelButton"],!1)}function Ur(){Bc(this,["confirmButton","denyButton","cancelButton"],!0)}function Gc(){Vc(this.getInput(),!1)}function Hc(){Vc(this.getInput(),!0)}function eh(y){let E=Tn.domCache.get(this),k=Tn.innerParams.get(this);ot(E.validationMessage,y),E.validationMessage.className=u["validation-message"],k.customClass&&k.customClass.validationMessage&&Ue(E.validationMessage,k.customClass.validationMessage),yt(E.validationMessage);let ne=this.getInput();ne&&(ne.setAttribute("aria-invalid","true"),ne.setAttribute("aria-describedby",u["validation-message"]),Ne(ne),Ue(ne,u.inputerror))}function th(){let y=Tn.domCache.get(this);y.validationMessage&&Ct(y.validationMessage);let E=this.getInput();E&&(E.removeAttribute("aria-invalid"),E.removeAttribute("aria-describedby"),lt(E,u.inputerror))}let pr={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},ic=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],nh={allowEnterKey:void 0},Zg=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],hs=y=>Object.prototype.hasOwnProperty.call(pr,y),zc=y=>ic.indexOf(y)!==-1,ih=y=>nh[y],Np=y=>{hs(y)||C(`Unknown parameter "${y}"`)},jc=y=>{Zg.includes(y)&&C(`The parameter "${y}" is incompatible with toasts`)},Zd=y=>{let E=ih(y);E&&D(y,E)},qo=y=>{y.backdrop===!1&&y.allowOutsideClick&&C('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),y.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(y.theme)&&C(`Invalid theme "${y.theme}"`);for(let E in y)Np(E),y.toast&&jc(E),Zd(E)};function Ko(y){let E=P(),k=I(),ne=Tn.innerParams.get(this);if(!k||J(k,ne.hideClass.popup)){C("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let Re=Uc(y),rt=Object.assign({},ne,Re);qo(rt),E.dataset.swal2Theme=rt.theme,kc(this,rt),Tn.innerParams.set(this,rt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,y),writable:!1,enumerable:!0}})}let Uc=y=>{let E={};return Object.keys(y).forEach(k=>{zc(k)?E[k]=y[k]:C(`Invalid parameter to update: ${k}`)}),E};function nl(){let y=Tn.domCache.get(this),E=Tn.innerParams.get(this);if(!E){rh(this);return}y.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof E.didDestroy=="function"&&E.didDestroy(),s.eventEmitter.emit("didDestroy"),Wc(this)}let Wc=y=>{rh(y),delete y.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},rh=y=>{y.isAwaitingPromise?($c(Tn,y),y.isAwaitingPromise=!0):($c(Wo,y),$c(Tn,y),delete y.isAwaitingPromise,delete y.disableButtons,delete y.enableButtons,delete y.getInput,delete y.disableInput,delete y.enableInput,delete y.hideLoading,delete y.disableLoading,delete y.showValidationMessage,delete y.resetValidationMessage,delete y.close,delete y.closePopup,delete y.closeModal,delete y.closeToast,delete y.rejectPromise,delete y.update,delete y._destroy)},$c=(y,E)=>{for(let k in y)y[k].delete(E)};var nr=Object.freeze({__proto__:null,_destroy:nl,close:$o,closeModal:$o,closePopup:$o,closeToast:$o,disableButtons:Ur,disableInput:Hc,disableLoading:Nc,enableButtons:nc,enableInput:Gc,getInput:tc,handleAwaitingPromise:Lc,hideLoading:Nc,rejectPromise:Op,resetValidationMessage:th,showValidationMessage:eh,update:Ko});let Xg=(y,E,k)=>{y.toast?il(y,E,k):(Bp(E),Vp(E),Gp(y,E,k))},il=(y,E,k)=>{E.popup.onclick=()=>{y&&(rl(y)||y.timer||y.input)||k($l.close)}},rl=y=>!!(y.showConfirmButton||y.showDenyButton||y.showCancelButton||y.showCloseButton),qc=!1,Bp=y=>{y.popup.onmousedown=()=>{y.container.onmouseup=function(E){y.container.onmouseup=()=>{},E.target===y.container&&(qc=!0)}}},Vp=y=>{y.container.onmousedown=E=>{E.target===y.container&&E.preventDefault(),y.popup.onmouseup=function(k){y.popup.onmouseup=()=>{},(k.target===y.popup||k.target instanceof HTMLElement&&y.popup.contains(k.target))&&(qc=!0)}}},Gp=(y,E,k)=>{E.container.onclick=ne=>{if(qc){qc=!1;return}ne.target===E.container&&F(y.allowOutsideClick)&&k($l.backdrop)}},Kc=y=>typeof y=="object"&&y.jquery,rc=y=>y instanceof Element||Kc(y),Yc=y=>{let E={};return typeof y[0]=="object"&&!rc(y[0])?Object.assign(E,y[0]):["title","html","icon"].forEach((k,ne)=>{let Re=y[ne];typeof Re=="string"||rc(Re)?E[k]=Re:Re!==void 0&&m(`Unexpected type of ${k}! Expected "string" or "Element", got ${typeof Re}`)}),E};function Xd(...y){return new this(...y)}function Zc(y){class E extends this{_main(ne,Re){return super._main(ne,Object.assign({},y,Re))}}return E}let Qd=()=>s.timeout&&s.timeout.getTimerLeft(),ps=()=>{if(s.timeout)return pi(),s.timeout.stop()},ba=()=>{if(s.timeout){let y=s.timeout.start();return on(y),y}},Kn=()=>{let y=s.timeout;return y&&(y.running?ps():ba())},fi=y=>{if(s.timeout){let E=s.timeout.increase(y);return on(E,!0),E}},ir=()=>!!(s.timeout&&s.timeout.isRunning()),fr=!1,wa={};function Hp(y="data-swal-template"){wa[y]=this,fr||(document.body.addEventListener("click",oh),fr=!0)}let oh=y=>{for(let E=y.target;E&&E!==document;E=E.parentNode)for(let k in wa){let ne=E.getAttribute(k);if(ne){wa[k].fire({template:ne});return}}};class Qg{constructor(){this.events={}}_getHandlersByEventName(E){return typeof this.events[E]>"u"&&(this.events[E]=[]),this.events[E]}on(E,k){let ne=this._getHandlersByEventName(E);ne.includes(k)||ne.push(k)}once(E,k){let ne=(...Re)=>{this.removeListener(E,ne),k.apply(this,Re)};this.on(E,ne)}emit(E,...k){this._getHandlersByEventName(E).forEach(ne=>{try{ne.apply(this,k)}catch(Re){console.error(Re)}})}removeListener(E,k){let ne=this._getHandlersByEventName(E),Re=ne.indexOf(k);Re>-1&&ne.splice(Re,1)}removeAllListeners(E){this.events[E]!==void 0&&(this.events[E].length=0)}reset(){this.events={}}}s.eventEmitter=new Qg;var r1=Object.freeze({__proto__:null,argsToParams:Yc,bindClickHandler:Hp,clickCancel:Fp,clickConfirm:qg,clickDeny:K0,enableLoading:ec,fire:Xd,getActions:ue,getCancelButton:he,getCloseButton:Ae,getConfirmButton:de,getContainer:P,getDenyButton:M,getFocusableElements:Me,getFooter:ae,getHtmlContainer:le,getIcon:j,getIconContent:G,getImage:me,getInputLabel:ee,getLoader:te,getPopup:I,getProgressSteps:ge,getTimerLeft:Qd,getTimerProgressBar:Ce,getTitle:Q,getValidationMessage:se,increaseTimer:fi,isDeprecatedParameter:ih,isLoading:et,isTimerRunning:ir,isUpdatableParameter:zc,isValidParameter:hs,isVisible:q0,mixin:Zc,off:(y,E)=>{if(!y){s.eventEmitter.reset();return}E?s.eventEmitter.removeListener(y,E):s.eventEmitter.removeAllListeners(y)},on:(y,E)=>{s.eventEmitter.on(y,E)},once:(y,E)=>{s.eventEmitter.once(y,E)},resumeTimer:ba,showLoading:ec,stopTimer:ps,toggleTimer:Kn});class o1{constructor(E,k){this.callback=E,this.remaining=k,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(E){let k=this.running;return k&&this.stop(),this.remaining+=E,k&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let iC=["swal-title","swal-html","swal-footer"],zp=y=>{let E=typeof y.template=="string"?document.querySelector(y.template):y.template;if(!E)return{};let k=E.content;return p1(k),Object.assign(s1(k),a1(k),l1(k),c1(k),d1(k),u1(k),h1(k,iC))},s1=y=>{let E={};return Array.from(y.querySelectorAll("swal-param")).forEach(ne=>{oc(ne,["name","value"]);let Re=ne.getAttribute("name"),rt=ne.getAttribute("value");!Re||!rt||(typeof pr[Re]=="boolean"?E[Re]=rt!=="false":typeof pr[Re]=="object"?E[Re]=JSON.parse(rt):E[Re]=rt)}),E},a1=y=>{let E={};return Array.from(y.querySelectorAll("swal-function-param")).forEach(ne=>{let Re=ne.getAttribute("name"),rt=ne.getAttribute("value");!Re||!rt||(E[Re]=new Function(`return ${rt}`)())}),E},l1=y=>{let E={};return Array.from(y.querySelectorAll("swal-button")).forEach(ne=>{oc(ne,["type","color","aria-label"]);let Re=ne.getAttribute("type");!Re||!["confirm","cancel","deny"].includes(Re)||(E[`${Re}ButtonText`]=ne.innerHTML,E[`show${g(Re)}Button`]=!0,ne.hasAttribute("color")&&(E[`${Re}ButtonColor`]=ne.getAttribute("color")),ne.hasAttribute("aria-label")&&(E[`${Re}ButtonAriaLabel`]=ne.getAttribute("aria-label")))}),E},c1=y=>{let E={},k=y.querySelector("swal-image");return k&&(oc(k,["src","width","height","alt"]),k.hasAttribute("src")&&(E.imageUrl=k.getAttribute("src")||void 0),k.hasAttribute("width")&&(E.imageWidth=k.getAttribute("width")||void 0),k.hasAttribute("height")&&(E.imageHeight=k.getAttribute("height")||void 0),k.hasAttribute("alt")&&(E.imageAlt=k.getAttribute("alt")||void 0)),E},d1=y=>{let E={},k=y.querySelector("swal-icon");return k&&(oc(k,["type","color"]),k.hasAttribute("type")&&(E.icon=k.getAttribute("type")),k.hasAttribute("color")&&(E.iconColor=k.getAttribute("color")),E.iconHtml=k.innerHTML),E},u1=y=>{let E={},k=y.querySelector("swal-input");k&&(oc(k,["type","label","placeholder","value"]),E.input=k.getAttribute("type")||"text",k.hasAttribute("label")&&(E.inputLabel=k.getAttribute("label")),k.hasAttribute("placeholder")&&(E.inputPlaceholder=k.getAttribute("placeholder")),k.hasAttribute("value")&&(E.inputValue=k.getAttribute("value")));let ne=Array.from(y.querySelectorAll("swal-input-option"));return ne.length&&(E.inputOptions={},ne.forEach(Re=>{oc(Re,["value"]);let rt=Re.getAttribute("value");if(!rt)return;let Ln=Re.innerHTML;E.inputOptions[rt]=Ln})),E},h1=(y,E)=>{let k={};for(let ne in E){let Re=E[ne],rt=y.querySelector(Re);rt&&(oc(rt,[]),k[Re.replace(/^swal-/,"")]=rt.innerHTML.trim())}return k},p1=y=>{let E=iC.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(y.children).forEach(k=>{let ne=k.tagName.toLowerCase();E.includes(ne)||C(`Unrecognized element <${ne}>`)})},oc=(y,E)=>{Array.from(y.attributes).forEach(k=>{E.indexOf(k.name)===-1&&C([`Unrecognized attribute "${k.name}" on <${y.tagName.toLowerCase()}>.`,`${E.length?`Allowed attributes are: ${E.join(", ")}`:"To set the value, use HTML within the element."}`])})},jp=10,fs=y=>{let E=P(),k=I();typeof y.willOpen=="function"&&y.willOpen(k),s.eventEmitter.emit("willOpen",k);let Re=window.getComputedStyle(document.body).overflowY;f1(E,k,y),setTimeout(()=>{Jg(E,k)},jp),Ve()&&(em(E,y.scrollbarPadding,Re),eC()),!Ze()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof y.didOpen=="function"&&setTimeout(()=>y.didOpen(k)),s.eventEmitter.emit("didOpen",k)},Mo=y=>{let E=I();if(y.target!==E)return;let k=P();E.removeEventListener("animationend",Mo),E.removeEventListener("transitionend",Mo),k.style.overflowY="auto",lt(k,u["no-transition"])},Jg=(y,E)=>{ln(E)?(y.style.overflowY="hidden",E.addEventListener("animationend",Mo),E.addEventListener("transitionend",Mo)):y.style.overflowY="auto"},em=(y,E,k)=>{Mp(),E&&k!=="hidden"&&Xl(k),setTimeout(()=>{y.scrollTop=0})},f1=(y,E,k)=>{Ue(y,k.showClass.backdrop),k.animation?(E.style.setProperty("opacity","0","important"),yt(E,"grid"),setTimeout(()=>{Ue(E,k.showClass.popup),E.style.removeProperty("opacity")},jp)):yt(E,"grid"),Ue([document.documentElement,document.body],u.shown),k.heightAuto&&k.backdrop&&!k.toast&&Ue([document.documentElement,document.body],u["height-auto"])};var Up={email:(y,E)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(y)?Promise.resolve():Promise.resolve(E||"Invalid email address"),url:(y,E)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(y)?Promise.resolve():Promise.resolve(E||"Invalid URL")};function tm(y){y.inputValidator||(y.input==="email"&&(y.inputValidator=Up.email),y.input==="url"&&(y.inputValidator=Up.url))}function rC(y){(!y.target||typeof y.target=="string"&&!document.querySelector(y.target)||typeof y.target!="string"&&!y.target.appendChild)&&(C('Target parameter is not valid, defaulting to "body"'),y.target="body")}function g1(y){tm(y),y.showLoaderOnConfirm&&!y.preConfirm&&C(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),rC(y),typeof y.title=="string"&&(y.title=y.title.split(`
`).join("<br />")),jl(y)}let Us;var sh=new WeakMap;class Ti{constructor(...E){if(i(this,sh,void 0),typeof window>"u")return;Us=this;let k=Object.freeze(this.constructor.argsToParams(E));this.params=k,this.isAwaitingPromise=!1,r(sh,this,this._main(Us.params))}_main(E,k={}){if(qo(Object.assign({},k,E)),s.currentInstance){let rt=Wo.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:Ln}=s.currentInstance;s.currentInstance._destroy(),Ln||rt({isDismissed:!0}),Ve()&&Kg()}s.currentInstance=Us;let ne=HA(E,k);g1(ne),Object.freeze(ne),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let Re=zA(Us);return kc(Us,ne),Tn.innerParams.set(Us,ne),oC(Us,Re,ne)}then(E){return n(sh,this).then(E)}finally(E){return n(sh,this).finally(E)}}let oC=(y,E,k)=>new Promise((ne,Re)=>{let rt=Ln=>{y.close({isDismissed:!0,dismiss:Ln,isConfirmed:!1,isDenied:!1})};Wo.swalPromiseResolve.set(y,ne),Wo.swalPromiseReject.set(y,Re),E.confirmButton.onclick=()=>{Vi(y)},E.denyButton.onclick=()=>{dr(y)},E.cancelButton.onclick=()=>{yi(y,rt)},E.closeButton.onclick=()=>{rt($l.close)},Xg(k,E,rt),Y0(s,k,rt),O(y,k),fs(k),m1(s,k,rt),jA(E,k),setTimeout(()=>{E.container.scrollTop=0})}),HA=(y,E)=>{let k=zp(y),ne=Object.assign({},pr,E,k,y);return ne.showClass=Object.assign({},pr.showClass,ne.showClass),ne.hideClass=Object.assign({},pr.hideClass,ne.hideClass),ne.animation===!1&&(ne.showClass={backdrop:"swal2-noanimation"},ne.hideClass={}),ne},zA=y=>{let E={popup:I(),container:P(),actions:ue(),confirmButton:de(),denyButton:M(),cancelButton:he(),loader:te(),closeButton:Ae(),validationMessage:se(),progressSteps:ge()};return Tn.domCache.set(y,E),E},m1=(y,E,k)=>{let ne=Ce();Ct(ne),E.timer&&(y.timeout=new o1(()=>{k("timer"),delete y.timeout},E.timer),E.timerProgressBar&&(yt(ne),Rt(ne,E,"timerProgressBar"),setTimeout(()=>{y.timeout&&y.timeout.running&&on(E.timer)})))},jA=(y,E)=>{if(!E.toast){if(!F(E.allowEnterKey)){D("allowEnterKey"),$A();return}UA(y)||WA(y,E)||ql(-1,1)}},UA=y=>{let E=Array.from(y.popup.querySelectorAll("[autofocus]"));for(let k of E)if(k instanceof HTMLElement&&gt(k))return k.focus(),!0;return!1},WA=(y,E)=>E.focusDeny&&gt(y.denyButton)?(y.denyButton.focus(),!0):E.focusCancel&&gt(y.cancelButton)?(y.cancelButton.focus(),!0):E.focusConfirm&&gt(y.confirmButton)?(y.confirmButton.focus(),!0):!1,$A=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Ti.prototype.disableButtons=Ur,Ti.prototype.enableButtons=nc,Ti.prototype.getInput=tc,Ti.prototype.disableInput=Hc,Ti.prototype.enableInput=Gc,Ti.prototype.hideLoading=Nc,Ti.prototype.disableLoading=Nc,Ti.prototype.showValidationMessage=eh,Ti.prototype.resetValidationMessage=th,Ti.prototype.close=$o,Ti.prototype.closePopup=$o,Ti.prototype.closeModal=$o,Ti.prototype.closeToast=$o,Ti.prototype.rejectPromise=Op,Ti.prototype.update=Ko,Ti.prototype._destroy=nl,Object.assign(Ti,r1),Object.keys(nr).forEach(y=>{Ti[y]=function(...E){return Us&&Us[y]?Us[y](...E):null}}),Ti.DismissReason=$l,Ti.version="11.26.10";let nm=Ti;return nm.default=nm,nm});typeof wd<"u"&&wd.Sweetalert2&&(wd.swal=wd.sweetAlert=wd.Swal=wd.SweetAlert=wd.Sweetalert2);typeof document<"u"&&(function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});var Oz=Pn(()=>{"use strict"});var Nn=Pn((ME,Nz)=>{"use strict";(function(e,t){typeof ME=="object"?Nz.exports=ME=t():typeof define=="function"&&define.amd?define([],t):e.CryptoJS=t()})(ME,function(){var e=e||(function(t,n){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof global<"u"&&global.crypto&&(i=global.crypto),!i&&typeof U4=="function")try{i=Oz()}catch{}var r=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||(function(){function m(){}return function(w){var x;return m.prototype=w,x=new m,m.prototype=null,x}})(),s={},a=s.lib={},l=a.Base=(function(){return{extend:function(m){var w=o(this);return m&&w.mixIn(m),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var w in m)m.hasOwnProperty(w)&&(this[w]=m[w]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),c=a.WordArray=l.extend({init:function(m,w){m=this.words=m||[],w!=n?this.sigBytes=w:this.sigBytes=m.length*4},toString:function(m){return(m||u).stringify(this)},concat:function(m){var w=this.words,x=m.words,D=this.sigBytes,F=m.sigBytes;if(this.clamp(),D%4)for(var L=0;L<F;L++){var V=x[L>>>2]>>>24-L%4*8&255;w[D+L>>>2]|=V<<24-(D+L)%4*8}else for(var B=0;B<F;B+=4)w[D+B>>>2]=x[B>>>2];return this.sigBytes+=F,this},clamp:function(){var m=this.words,w=this.sigBytes;m[w>>>2]&=4294967295<<32-w%4*8,m.length=t.ceil(w/4)},clone:function(){var m=l.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var w=[],x=0;x<m;x+=4)w.push(r());return new c.init(w,m)}}),d=s.enc={},u=d.Hex={stringify:function(m){for(var w=m.words,x=m.sigBytes,D=[],F=0;F<x;F++){var L=w[F>>>2]>>>24-F%4*8&255;D.push((L>>>4).toString(16)),D.push((L&15).toString(16))}return D.join("")},parse:function(m){for(var w=m.length,x=[],D=0;D<w;D+=2)x[D>>>3]|=parseInt(m.substr(D,2),16)<<24-D%8*4;return new c.init(x,w/2)}},h=d.Latin1={stringify:function(m){for(var w=m.words,x=m.sigBytes,D=[],F=0;F<x;F++){var L=w[F>>>2]>>>24-F%4*8&255;D.push(String.fromCharCode(L))}return D.join("")},parse:function(m){for(var w=m.length,x=[],D=0;D<w;D++)x[D>>>2]|=(m.charCodeAt(D)&255)<<24-D%4*8;return new c.init(x,w)}},p=d.Utf8={stringify:function(m){try{return decodeURIComponent(escape(h.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return h.parse(unescape(encodeURIComponent(m)))}},f=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=p.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var w,x=this._data,D=x.words,F=x.sigBytes,L=this.blockSize,V=L*4,B=F/V;m?B=t.ceil(B):B=t.max((B|0)-this._minBufferSize,0);var P=B*L,U=t.min(P*4,F);if(P){for(var A=0;A<P;A+=L)this._doProcessBlock(D,A);w=D.splice(0,P),x.sigBytes-=U}return new c.init(w,U)},clone:function(){var m=l.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0}),g=a.Hasher=f.extend({cfg:l.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(m){return function(w,x){return new m.init(x).finalize(w)}},_createHmacHelper:function(m){return function(w,x){return new C.HMAC.init(m,x).finalize(w)}}}),C=s.algo={};return s})(Math);return e})});var Lw=Pn((IE,Bz)=>{"use strict";(function(e,t){typeof IE=="object"?Bz.exports=IE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(IE,function(e){return(function(t){var n=e,i=n.lib,r=i.Base,o=i.WordArray,s=n.x64={},a=s.Word=r.extend({init:function(c,d){this.high=c,this.low=d}}),l=s.WordArray=r.extend({init:function(c,d){c=this.words=c||[],d!=t?this.sigBytes=d:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,d=c.length,u=[],h=0;h<d;h++){var p=c[h];u.push(p.high),u.push(p.low)}return o.create(u,this.sigBytes)},clone:function(){for(var c=r.clone.call(this),d=c.words=this.words.slice(0),u=d.length,h=0;h<u;h++)d[h]=d[h].clone();return c}})})(),e})});var Gz=Pn((TE,Vz)=>{"use strict";(function(e,t){typeof TE=="object"?Vz.exports=TE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(TE,function(e){return(function(){if(typeof ArrayBuffer=="function"){var t=e,n=t.lib,i=n.WordArray,r=i.init,o=i.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var a=s.byteLength,l=[],c=0;c<a;c++)l[c>>>2]|=s[c]<<24-c%4*8;r.call(this,l,a)}else r.apply(this,arguments)};o.prototype=i}})(),e.lib.WordArray})});var zz=Pn((PE,Hz)=>{"use strict";(function(e,t){typeof PE=="object"?Hz.exports=PE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(PE,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=t.enc,o=r.Utf16=r.Utf16BE={stringify:function(a){for(var l=a.words,c=a.sigBytes,d=[],u=0;u<c;u+=2){var h=l[u>>>2]>>>16-u%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(a){for(var l=a.length,c=[],d=0;d<l;d++)c[d>>>1]|=a.charCodeAt(d)<<16-d%2*16;return i.create(c,l*2)}};r.Utf16LE={stringify:function(a){for(var l=a.words,c=a.sigBytes,d=[],u=0;u<c;u+=2){var h=s(l[u>>>2]>>>16-u%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(a){for(var l=a.length,c=[],d=0;d<l;d++)c[d>>>1]|=s(a.charCodeAt(d)<<16-d%2*16);return i.create(c,l*2)}};function s(a){return a<<8&4278255360|a>>>8&16711935}})(),e.enc.Utf16})});var zh=Pn((kE,jz)=>{"use strict";(function(e,t){typeof kE=="object"?jz.exports=kE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(kE,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=t.enc,o=r.Base64={stringify:function(a){var l=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var u=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,f=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,C=p<<16|f<<8|g,m=0;m<4&&h+m*.75<c;m++)u.push(d.charAt(C>>>6*(3-m)&63));var w=d.charAt(64);if(w)for(;u.length%4;)u.push(w);return u.join("")},parse:function(a){var l=a.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var u=0;u<c.length;u++)d[c.charCodeAt(u)]=u}var h=c.charAt(64);if(h){var p=a.indexOf(h);p!==-1&&(l=p)}return s(a,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(a,l,c){for(var d=[],u=0,h=0;h<l;h++)if(h%4){var p=c[a.charCodeAt(h-1)]<<h%4*2,f=c[a.charCodeAt(h)]>>>6-h%4*2,g=p|f;d[u>>>2]|=g<<24-u%4*8,u++}return i.create(d,u)}})(),e.enc.Base64})});var Wz=Pn((LE,Uz)=>{"use strict";(function(e,t){typeof LE=="object"?Uz.exports=LE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(LE,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=t.enc,o=r.Base64url={stringify:function(a,l){l===void 0&&(l=!0);var c=a.words,d=a.sigBytes,u=l?this._safe_map:this._map;a.clamp();for(var h=[],p=0;p<d;p+=3)for(var f=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,C=c[p+2>>>2]>>>24-(p+2)%4*8&255,m=f<<16|g<<8|C,w=0;w<4&&p+w*.75<d;w++)h.push(u.charAt(m>>>6*(3-w)&63));var x=u.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(a,l){l===void 0&&(l=!0);var c=a.length,d=l?this._safe_map:this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var h=0;h<d.length;h++)u[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var f=a.indexOf(p);f!==-1&&(c=f)}return s(a,c,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(a,l,c){for(var d=[],u=0,h=0;h<l;h++)if(h%4){var p=c[a.charCodeAt(h-1)]<<h%4*2,f=c[a.charCodeAt(h)]>>>6-h%4*2,g=p|f;d[u>>>2]|=g<<24-u%4*8,u++}return i.create(d,u)}})(),e.enc.Base64url})});var jh=Pn((OE,$z)=>{"use strict";(function(e,t){typeof OE=="object"?$z.exports=OE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(OE,function(e){return(function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[];(function(){for(var p=0;p<64;p++)a[p]=t.abs(t.sin(p+1))*4294967296|0})();var l=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,f){for(var g=0;g<16;g++){var C=f+g,m=p[C];p[C]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var w=this._hash.words,x=p[f+0],D=p[f+1],F=p[f+2],L=p[f+3],V=p[f+4],B=p[f+5],P=p[f+6],U=p[f+7],A=p[f+8],I=p[f+9],j=p[f+10],G=p[f+11],Q=p[f+12],le=p[f+13],me=p[f+14],ge=p[f+15],se=w[0],de=w[1],he=w[2],M=w[3];se=c(se,de,he,M,x,7,a[0]),M=c(M,se,de,he,D,12,a[1]),he=c(he,M,se,de,F,17,a[2]),de=c(de,he,M,se,L,22,a[3]),se=c(se,de,he,M,V,7,a[4]),M=c(M,se,de,he,B,12,a[5]),he=c(he,M,se,de,P,17,a[6]),de=c(de,he,M,se,U,22,a[7]),se=c(se,de,he,M,A,7,a[8]),M=c(M,se,de,he,I,12,a[9]),he=c(he,M,se,de,j,17,a[10]),de=c(de,he,M,se,G,22,a[11]),se=c(se,de,he,M,Q,7,a[12]),M=c(M,se,de,he,le,12,a[13]),he=c(he,M,se,de,me,17,a[14]),de=c(de,he,M,se,ge,22,a[15]),se=d(se,de,he,M,D,5,a[16]),M=d(M,se,de,he,P,9,a[17]),he=d(he,M,se,de,G,14,a[18]),de=d(de,he,M,se,x,20,a[19]),se=d(se,de,he,M,B,5,a[20]),M=d(M,se,de,he,j,9,a[21]),he=d(he,M,se,de,ge,14,a[22]),de=d(de,he,M,se,V,20,a[23]),se=d(se,de,he,M,I,5,a[24]),M=d(M,se,de,he,me,9,a[25]),he=d(he,M,se,de,L,14,a[26]),de=d(de,he,M,se,A,20,a[27]),se=d(se,de,he,M,le,5,a[28]),M=d(M,se,de,he,F,9,a[29]),he=d(he,M,se,de,U,14,a[30]),de=d(de,he,M,se,Q,20,a[31]),se=u(se,de,he,M,B,4,a[32]),M=u(M,se,de,he,A,11,a[33]),he=u(he,M,se,de,G,16,a[34]),de=u(de,he,M,se,me,23,a[35]),se=u(se,de,he,M,D,4,a[36]),M=u(M,se,de,he,V,11,a[37]),he=u(he,M,se,de,U,16,a[38]),de=u(de,he,M,se,j,23,a[39]),se=u(se,de,he,M,le,4,a[40]),M=u(M,se,de,he,x,11,a[41]),he=u(he,M,se,de,L,16,a[42]),de=u(de,he,M,se,P,23,a[43]),se=u(se,de,he,M,I,4,a[44]),M=u(M,se,de,he,Q,11,a[45]),he=u(he,M,se,de,ge,16,a[46]),de=u(de,he,M,se,F,23,a[47]),se=h(se,de,he,M,x,6,a[48]),M=h(M,se,de,he,U,10,a[49]),he=h(he,M,se,de,me,15,a[50]),de=h(de,he,M,se,B,21,a[51]),se=h(se,de,he,M,Q,6,a[52]),M=h(M,se,de,he,L,10,a[53]),he=h(he,M,se,de,j,15,a[54]),de=h(de,he,M,se,D,21,a[55]),se=h(se,de,he,M,A,6,a[56]),M=h(M,se,de,he,ge,10,a[57]),he=h(he,M,se,de,P,15,a[58]),de=h(de,he,M,se,le,21,a[59]),se=h(se,de,he,M,V,6,a[60]),M=h(M,se,de,he,G,10,a[61]),he=h(he,M,se,de,F,15,a[62]),de=h(de,he,M,se,I,21,a[63]),w[0]=w[0]+se|0,w[1]=w[1]+de|0,w[2]=w[2]+he|0,w[3]=w[3]+M|0},_doFinalize:function(){var p=this._data,f=p.words,g=this._nDataBytes*8,C=p.sigBytes*8;f[C>>>5]|=128<<24-C%32;var m=t.floor(g/4294967296),w=g;f[(C+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,f[(C+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,p.sigBytes=(f.length+1)*4,this._process();for(var x=this._hash,D=x.words,F=0;F<4;F++){var L=D[F];D[F]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return x},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});function c(p,f,g,C,m,w,x){var D=p+(f&g|~f&C)+m+x;return(D<<w|D>>>32-w)+f}function d(p,f,g,C,m,w,x){var D=p+(f&C|g&~C)+m+x;return(D<<w|D>>>32-w)+f}function u(p,f,g,C,m,w,x){var D=p+(f^g^C)+m+x;return(D<<w|D>>>32-w)+f}function h(p,f,g,C,m,w,x){var D=p+(g^(f|~C))+m+x;return(D<<w|D>>>32-w)+f}n.MD5=o._createHelper(l),n.HmacMD5=o._createHmacHelper(l)})(Math),e.MD5})});var m3=Pn((NE,qz)=>{"use strict";(function(e,t){typeof NE=="object"?qz.exports=NE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(NE,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=n.Hasher,o=t.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,c){for(var d=this._hash.words,u=d[0],h=d[1],p=d[2],f=d[3],g=d[4],C=0;C<80;C++){if(C<16)s[C]=l[c+C]|0;else{var m=s[C-3]^s[C-8]^s[C-14]^s[C-16];s[C]=m<<1|m>>>31}var w=(u<<5|u>>>27)+g+s[C];C<20?w+=(h&p|~h&f)+1518500249:C<40?w+=(h^p^f)+1859775393:C<60?w+=(h&p|h&f|p&f)-1894007588:w+=(h^p^f)-899497514,g=f,f=p,p=h<<30|h>>>2,h=u,u=w}d[0]=d[0]+u|0,d[1]=d[1]+h|0,d[2]=d[2]+p|0,d[3]=d[3]+f|0,d[4]=d[4]+g|0},_doFinalize:function(){var l=this._data,c=l.words,d=this._nDataBytes*8,u=l.sigBytes*8;return c[u>>>5]|=128<<24-u%32,c[(u+64>>>9<<4)+14]=Math.floor(d/4294967296),c[(u+64>>>9<<4)+15]=d,l.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var l=r.clone.call(this);return l._hash=this._hash.clone(),l}});t.SHA1=r._createHelper(a),t.HmacSHA1=r._createHmacHelper(a)})(),e.SHA1})});var VE=Pn((BE,Kz)=>{"use strict";(function(e,t){typeof BE=="object"?Kz.exports=BE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(BE,function(e){return(function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],l=[];(function(){function u(g){for(var C=t.sqrt(g),m=2;m<=C;m++)if(!(g%m))return!1;return!0}function h(g){return(g-(g|0))*4294967296|0}for(var p=2,f=0;f<64;)u(p)&&(f<8&&(a[f]=h(t.pow(p,1/2))),l[f]=h(t.pow(p,1/3)),f++),p++})();var c=[],d=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(u,h){for(var p=this._hash.words,f=p[0],g=p[1],C=p[2],m=p[3],w=p[4],x=p[5],D=p[6],F=p[7],L=0;L<64;L++){if(L<16)c[L]=u[h+L]|0;else{var V=c[L-15],B=(V<<25|V>>>7)^(V<<14|V>>>18)^V>>>3,P=c[L-2],U=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;c[L]=B+c[L-7]+U+c[L-16]}var A=w&x^~w&D,I=f&g^f&C^g&C,j=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),G=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),Q=F+G+A+l[L]+c[L],le=j+I;F=D,D=x,x=w,w=m+Q|0,m=C,C=g,g=f,f=Q+le|0}p[0]=p[0]+f|0,p[1]=p[1]+g|0,p[2]=p[2]+C|0,p[3]=p[3]+m|0,p[4]=p[4]+w|0,p[5]=p[5]+x|0,p[6]=p[6]+D|0,p[7]=p[7]+F|0},_doFinalize:function(){var u=this._data,h=u.words,p=this._nDataBytes*8,f=u.sigBytes*8;return h[f>>>5]|=128<<24-f%32,h[(f+64>>>9<<4)+14]=t.floor(p/4294967296),h[(f+64>>>9<<4)+15]=p,u.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)})(Math),e.SHA256})});var Zz=Pn((GE,Yz)=>{"use strict";(function(e,t,n){typeof GE=="object"?Yz.exports=GE=t(Nn(),VE()):typeof define=="function"&&define.amd?define(["./core","./sha256"],t):t(e.CryptoJS)})(GE,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=t.algo,o=r.SHA256,s=r.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=o._doFinalize.call(this);return a.sigBytes-=4,a}});t.SHA224=o._createHelper(s),t.HmacSHA224=o._createHmacHelper(s)})(),e.SHA224})});var v3=Pn((HE,Xz)=>{"use strict";(function(e,t,n){typeof HE=="object"?Xz.exports=HE=t(Nn(),Lw()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],t):t(e.CryptoJS)})(HE,function(e){return(function(){var t=e,n=t.lib,i=n.Hasher,r=t.x64,o=r.Word,s=r.WordArray,a=t.algo;function l(){return o.create.apply(o,arguments)}var c=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],d=[];(function(){for(var h=0;h<80;h++)d[h]=l()})();var u=a.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(h,p){for(var f=this._hash.words,g=f[0],C=f[1],m=f[2],w=f[3],x=f[4],D=f[5],F=f[6],L=f[7],V=g.high,B=g.low,P=C.high,U=C.low,A=m.high,I=m.low,j=w.high,G=w.low,Q=x.high,le=x.low,me=D.high,ge=D.low,se=F.high,de=F.low,he=L.high,M=L.low,ee=V,te=B,ue=P,ae=U,Ce=A,Ae=I,Fe=j,Me=G,Ve=Q,Ze=le,et=me,ot=ge,J=se,nt=de,Rt=he,vt=M,Ne=0;Ne<80;Ne++){var ct,Ue,lt=d[Ne];if(Ne<16)Ue=lt.high=h[p+Ne*2]|0,ct=lt.low=h[p+Ne*2+1]|0;else{var dt=d[Ne-15],rn=dt.high,yt=dt.low,Ct=(rn>>>1|yt<<31)^(rn>>>8|yt<<24)^rn>>>7,Cn=(yt>>>1|rn<<31)^(yt>>>8|rn<<24)^(yt>>>7|rn<<25),bn=d[Ne-2],st=bn.high,gt=bn.low,St=(st>>>19|gt<<13)^(st<<3|gt>>>29)^st>>>6,bi=(gt>>>19|st<<13)^(gt<<3|st>>>29)^(gt>>>6|st<<26),In=d[Ne-7],ln=In.high,on=In.low,pi=d[Ne-16],Mt=pi.high,ni=pi.low;ct=Cn+on,Ue=Ct+ln+(ct>>>0<Cn>>>0?1:0),ct=ct+bi,Ue=Ue+St+(ct>>>0<bi>>>0?1:0),ct=ct+ni,Ue=Ue+Mt+(ct>>>0<ni>>>0?1:0),lt.high=Ue,lt.low=ct}var Vt=Ve&et^~Ve&J,Ot=Ze&ot^~Ze&nt,wi=ee&ue^ee&Ce^ue&Ce,wn=te&ae^te&Ae^ae&Ae,Nt=(ee>>>28|te<<4)^(ee<<30|te>>>2)^(ee<<25|te>>>7),Bn=(te>>>28|ee<<4)^(te<<30|ee>>>2)^(te<<25|ee>>>7),jl=(Ve>>>14|Ze<<18)^(Ve>>>18|Ze<<14)^(Ve<<23|Ze>>>9),cr=(Ze>>>14|Ve<<18)^(Ze>>>18|Ve<<14)^(Ze<<23|Ve>>>9),Bs=c[Ne],Vs=Bs.high,kt=Bs.low,Ni=vt+cr,zr=Rt+jl+(Ni>>>0<vt>>>0?1:0),Ni=Ni+Ot,zr=zr+Vt+(Ni>>>0<Ot>>>0?1:0),Ni=Ni+kt,zr=zr+Vs+(Ni>>>0<kt>>>0?1:0),Ni=Ni+ct,zr=zr+Ue+(Ni>>>0<ct>>>0?1:0),to=Bn+wn,bo=Nt+wi+(to>>>0<Bn>>>0?1:0);Rt=J,vt=nt,J=et,nt=ot,et=Ve,ot=Ze,Ze=Me+Ni|0,Ve=Fe+zr+(Ze>>>0<Me>>>0?1:0)|0,Fe=Ce,Me=Ae,Ce=ue,Ae=ae,ue=ee,ae=te,te=Ni+to|0,ee=zr+bo+(te>>>0<Ni>>>0?1:0)|0}B=g.low=B+te,g.high=V+ee+(B>>>0<te>>>0?1:0),U=C.low=U+ae,C.high=P+ue+(U>>>0<ae>>>0?1:0),I=m.low=I+Ae,m.high=A+Ce+(I>>>0<Ae>>>0?1:0),G=w.low=G+Me,w.high=j+Fe+(G>>>0<Me>>>0?1:0),le=x.low=le+Ze,x.high=Q+Ve+(le>>>0<Ze>>>0?1:0),ge=D.low=ge+ot,D.high=me+et+(ge>>>0<ot>>>0?1:0),de=F.low=de+nt,F.high=se+J+(de>>>0<nt>>>0?1:0),M=L.low=M+vt,L.high=he+Rt+(M>>>0<vt>>>0?1:0)},_doFinalize:function(){var h=this._data,p=h.words,f=this._nDataBytes*8,g=h.sigBytes*8;p[g>>>5]|=128<<24-g%32,p[(g+128>>>10<<5)+30]=Math.floor(f/4294967296),p[(g+128>>>10<<5)+31]=f,h.sigBytes=p.length*4,this._process();var C=this._hash.toX32();return C},clone:function(){var h=i.clone.call(this);return h._hash=this._hash.clone(),h},blockSize:1024/32});t.SHA512=i._createHelper(u),t.HmacSHA512=i._createHmacHelper(u)})(),e.SHA512})});var Jz=Pn((zE,Qz)=>{"use strict";(function(e,t,n){typeof zE=="object"?Qz.exports=zE=t(Nn(),Lw(),v3()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],t):t(e.CryptoJS)})(zE,function(e){return(function(){var t=e,n=t.x64,i=n.Word,r=n.WordArray,o=t.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var l=s._doFinalize.call(this);return l.sigBytes-=16,l}});t.SHA384=s._createHelper(a),t.HmacSHA384=s._createHmacHelper(a)})(),e.SHA384})});var tj=Pn((jE,ej)=>{"use strict";(function(e,t,n){typeof jE=="object"?ej.exports=jE=t(Nn(),Lw()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],t):t(e.CryptoJS)})(jE,function(e){return(function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.x64,a=s.Word,l=n.algo,c=[],d=[],u=[];(function(){for(var f=1,g=0,C=0;C<24;C++){c[f+5*g]=(C+1)*(C+2)/2%64;var m=g%5,w=(2*f+3*g)%5;f=m,g=w}for(var f=0;f<5;f++)for(var g=0;g<5;g++)d[f+5*g]=g+(2*f+3*g)%5*5;for(var x=1,D=0;D<24;D++){for(var F=0,L=0,V=0;V<7;V++){if(x&1){var B=(1<<V)-1;B<32?L^=1<<B:F^=1<<B-32}x&128?x=x<<1^113:x<<=1}u[D]=a.create(F,L)}})();var h=[];(function(){for(var f=0;f<25;f++)h[f]=a.create()})();var p=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var f=this._state=[],g=0;g<25;g++)f[g]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(f,g){for(var C=this._state,m=this.blockSize/2,w=0;w<m;w++){var x=f[g+2*w],D=f[g+2*w+1];x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var F=C[w];F.high^=D,F.low^=x}for(var L=0;L<24;L++){for(var V=0;V<5;V++){for(var B=0,P=0,U=0;U<5;U++){var F=C[V+5*U];B^=F.high,P^=F.low}var A=h[V];A.high=B,A.low=P}for(var V=0;V<5;V++)for(var I=h[(V+4)%5],j=h[(V+1)%5],G=j.high,Q=j.low,B=I.high^(G<<1|Q>>>31),P=I.low^(Q<<1|G>>>31),U=0;U<5;U++){var F=C[V+5*U];F.high^=B,F.low^=P}for(var le=1;le<25;le++){var B,P,F=C[le],me=F.high,ge=F.low,se=c[le];se<32?(B=me<<se|ge>>>32-se,P=ge<<se|me>>>32-se):(B=ge<<se-32|me>>>64-se,P=me<<se-32|ge>>>64-se);var de=h[d[le]];de.high=B,de.low=P}var he=h[0],M=C[0];he.high=M.high,he.low=M.low;for(var V=0;V<5;V++)for(var U=0;U<5;U++){var le=V+5*U,F=C[le],ee=h[le],te=h[(V+1)%5+5*U],ue=h[(V+2)%5+5*U];F.high=ee.high^~te.high&ue.high,F.low=ee.low^~te.low&ue.low}var F=C[0],ae=u[L];F.high^=ae.high,F.low^=ae.low}},_doFinalize:function(){var f=this._data,g=f.words,C=this._nDataBytes*8,m=f.sigBytes*8,w=this.blockSize*32;g[m>>>5]|=1<<24-m%32,g[(t.ceil((m+1)/w)*w>>>5)-1]|=128,f.sigBytes=g.length*4,this._process();for(var x=this._state,D=this.cfg.outputLength/8,F=D/8,L=[],V=0;V<F;V++){var B=x[V],P=B.high,U=B.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,L.push(U),L.push(P)}return new r.init(L,D)},clone:function(){for(var f=o.clone.call(this),g=f._state=this._state.slice(0),C=0;C<25;C++)g[C]=g[C].clone();return f}});n.SHA3=o._createHelper(p),n.HmacSHA3=o._createHmacHelper(p)})(Math),e.SHA3})});var ij=Pn((UE,nj)=>{"use strict";(function(e,t){typeof UE=="object"?nj.exports=UE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(UE,function(e){return(function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),h=r.create([1352829926,1548603684,1836072691,2053994217,0]),p=s.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,F){for(var L=0;L<16;L++){var V=F+L,B=D[V];D[V]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var P=this._hash.words,U=u.words,A=h.words,I=a.words,j=l.words,G=c.words,Q=d.words,le,me,ge,se,de,he,M,ee,te,ue;he=le=P[0],M=me=P[1],ee=ge=P[2],te=se=P[3],ue=de=P[4];for(var ae,L=0;L<80;L+=1)ae=le+D[F+I[L]]|0,L<16?ae+=f(me,ge,se)+U[0]:L<32?ae+=g(me,ge,se)+U[1]:L<48?ae+=C(me,ge,se)+U[2]:L<64?ae+=m(me,ge,se)+U[3]:ae+=w(me,ge,se)+U[4],ae=ae|0,ae=x(ae,G[L]),ae=ae+de|0,le=de,de=se,se=x(ge,10),ge=me,me=ae,ae=he+D[F+j[L]]|0,L<16?ae+=w(M,ee,te)+A[0]:L<32?ae+=m(M,ee,te)+A[1]:L<48?ae+=C(M,ee,te)+A[2]:L<64?ae+=g(M,ee,te)+A[3]:ae+=f(M,ee,te)+A[4],ae=ae|0,ae=x(ae,Q[L]),ae=ae+ue|0,he=ue,ue=te,te=x(ee,10),ee=M,M=ae;ae=P[1]+ge+te|0,P[1]=P[2]+se+ue|0,P[2]=P[3]+de+he|0,P[3]=P[4]+le+M|0,P[4]=P[0]+me+ee|0,P[0]=ae},_doFinalize:function(){var D=this._data,F=D.words,L=this._nDataBytes*8,V=D.sigBytes*8;F[V>>>5]|=128<<24-V%32,F[(V+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,D.sigBytes=(F.length+1)*4,this._process();for(var B=this._hash,P=B.words,U=0;U<5;U++){var A=P[U];P[U]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return B},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function f(D,F,L){return D^F^L}function g(D,F,L){return D&F|~D&L}function C(D,F,L){return(D|~F)^L}function m(D,F,L){return D&L|F&~L}function w(D,F,L){return D^(F|~L)}function x(D,F){return D<<F|D>>>32-F}n.RIPEMD160=o._createHelper(p),n.HmacRIPEMD160=o._createHmacHelper(p)})(Math),e.RIPEMD160})});var $E=Pn((WE,rj)=>{"use strict";(function(e,t){typeof WE=="object"?rj.exports=WE=t(Nn()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(WE,function(e){(function(){var t=e,n=t.lib,i=n.Base,r=t.enc,o=r.Utf8,s=t.algo,a=s.HMAC=i.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=o.parse(c));var d=l.blockSize,u=d*4;c.sigBytes>u&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),f=h.words,g=p.words,C=0;C<d;C++)f[C]^=1549556828,g[C]^=909522486;h.sigBytes=p.sigBytes=u,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,d=c.finalize(l);c.reset();var u=c.finalize(this._oKey.clone().concat(d));return u}})})()})});var sj=Pn((qE,oj)=>{"use strict";(function(e,t,n){typeof qE=="object"?oj.exports=qE=t(Nn(),VE(),$E()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],t):t(e.CryptoJS)})(qE,function(e){return(function(){var t=e,n=t.lib,i=n.Base,r=n.WordArray,o=t.algo,s=o.SHA256,a=o.HMAC,l=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:s,iterations:25e4}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var u=this.cfg,h=a.create(u.hasher,c),p=r.create(),f=r.create([1]),g=p.words,C=f.words,m=u.keySize,w=u.iterations;g.length<m;){var x=h.update(d).finalize(f);h.reset();for(var D=x.words,F=D.length,L=x,V=1;V<w;V++){L=h.finalize(L),h.reset();for(var B=L.words,P=0;P<F;P++)D[P]^=B[P]}p.concat(x),C[0]++}return p.sigBytes=m*4,p}});t.PBKDF2=function(c,d,u){return l.create(u).compute(c,d)}})(),e.PBKDF2})});var _u=Pn((KE,aj)=>{"use strict";(function(e,t,n){typeof KE=="object"?aj.exports=KE=t(Nn(),m3(),$E()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],t):t(e.CryptoJS)})(KE,function(e){return(function(){var t=e,n=t.lib,i=n.Base,r=n.WordArray,o=t.algo,s=o.MD5,a=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:s,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,c){for(var d,u=this.cfg,h=u.hasher.create(),p=r.create(),f=p.words,g=u.keySize,C=u.iterations;f.length<g;){d&&h.update(d),d=h.update(l).finalize(c),h.reset();for(var m=1;m<C;m++)d=h.finalize(d),h.reset();p.concat(d)}return p.sigBytes=g*4,p}});t.EvpKDF=function(l,c,d){return a.create(d).compute(l,c)}})(),e.EvpKDF})});var ho=Pn((YE,lj)=>{"use strict";(function(e,t,n){typeof YE=="object"?lj.exports=YE=t(Nn(),_u()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],t):t(e.CryptoJS)})(YE,function(e){e.lib.Cipher||(function(t){var n=e,i=n.lib,r=i.Base,o=i.WordArray,s=i.BufferedBlockAlgorithm,a=n.enc,l=a.Utf8,c=a.Base64,d=n.algo,u=d.EvpKDF,h=i.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(A,I){return this.create(this._ENC_XFORM_MODE,A,I)},createDecryptor:function(A,I){return this.create(this._DEC_XFORM_MODE,A,I)},init:function(A,I,j){this.cfg=this.cfg.extend(j),this._xformMode=A,this._key=I,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function A(I){return typeof I=="string"?U:V}return function(I){return{encrypt:function(j,G,Q){return A(G).encrypt(I,j,G,Q)},decrypt:function(j,G,Q){return A(G).decrypt(I,j,G,Q)}}}})()}),p=i.StreamCipher=h.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1}),f=n.mode={},g=i.BlockCipherMode=r.extend({createEncryptor:function(A,I){return this.Encryptor.create(A,I)},createDecryptor:function(A,I){return this.Decryptor.create(A,I)},init:function(A,I){this._cipher=A,this._iv=I}}),C=f.CBC=(function(){var A=g.extend();A.Encryptor=A.extend({processBlock:function(j,G){var Q=this._cipher,le=Q.blockSize;I.call(this,j,G,le),Q.encryptBlock(j,G),this._prevBlock=j.slice(G,G+le)}}),A.Decryptor=A.extend({processBlock:function(j,G){var Q=this._cipher,le=Q.blockSize,me=j.slice(G,G+le);Q.decryptBlock(j,G),I.call(this,j,G,le),this._prevBlock=me}});function I(j,G,Q){var le,me=this._iv;me?(le=me,this._iv=t):le=this._prevBlock;for(var ge=0;ge<Q;ge++)j[G+ge]^=le[ge]}return A})(),m=n.pad={},w=m.Pkcs7={pad:function(A,I){for(var j=I*4,G=j-A.sigBytes%j,Q=G<<24|G<<16|G<<8|G,le=[],me=0;me<G;me+=4)le.push(Q);var ge=o.create(le,G);A.concat(ge)},unpad:function(A){var I=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=I}},x=i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:C,padding:w}),reset:function(){var A;h.reset.call(this);var I=this.cfg,j=I.iv,G=I.mode;this._xformMode==this._ENC_XFORM_MODE?A=G.createEncryptor:(A=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,j&&j.words):(this._mode=A.call(G,this,j&&j.words),this._mode.__creator=A)},_doProcessBlock:function(A,I){this._mode.processBlock(A,I)},_doFinalize:function(){var A,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),I.unpad(A)),A},blockSize:128/32}),D=i.CipherParams=r.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),F=n.format={},L=F.OpenSSL={stringify:function(A){var I,j=A.ciphertext,G=A.salt;return G?I=o.create([1398893684,1701076831]).concat(G).concat(j):I=j,I.toString(c)},parse:function(A){var I,j=c.parse(A),G=j.words;return G[0]==1398893684&&G[1]==1701076831&&(I=o.create(G.slice(2,4)),G.splice(0,4),j.sigBytes-=16),D.create({ciphertext:j,salt:I})}},V=i.SerializableCipher=r.extend({cfg:r.extend({format:L}),encrypt:function(A,I,j,G){G=this.cfg.extend(G);var Q=A.createEncryptor(j,G),le=Q.finalize(I),me=Q.cfg;return D.create({ciphertext:le,key:j,iv:me.iv,algorithm:A,mode:me.mode,padding:me.padding,blockSize:A.blockSize,formatter:G.format})},decrypt:function(A,I,j,G){G=this.cfg.extend(G),I=this._parse(I,G.format);var Q=A.createDecryptor(j,G).finalize(I.ciphertext);return Q},_parse:function(A,I){return typeof A=="string"?I.parse(A,this):A}}),B=n.kdf={},P=B.OpenSSL={execute:function(A,I,j,G,Q){if(G||(G=o.random(64/8)),Q)var le=u.create({keySize:I+j,hasher:Q}).compute(A,G);else var le=u.create({keySize:I+j}).compute(A,G);var me=o.create(le.words.slice(I),j*4);return le.sigBytes=I*4,D.create({key:le,iv:me,salt:G})}},U=i.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:P}),encrypt:function(A,I,j,G){G=this.cfg.extend(G);var Q=G.kdf.execute(j,A.keySize,A.ivSize,G.salt,G.hasher);G.iv=Q.iv;var le=V.encrypt.call(this,A,I,Q.key,G);return le.mixIn(Q),le},decrypt:function(A,I,j,G){G=this.cfg.extend(G),I=this._parse(I,G.format);var Q=G.kdf.execute(j,A.keySize,A.ivSize,I.salt,G.hasher);G.iv=Q.iv;var le=V.decrypt.call(this,A,I,Q.key,G);return le}})})()})});var dj=Pn((ZE,cj)=>{"use strict";(function(e,t,n){typeof ZE=="object"?cj.exports=ZE=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(ZE,function(e){return e.mode.CFB=(function(){var t=e.lib.BlockCipherMode.extend();t.Encryptor=t.extend({processBlock:function(i,r){var o=this._cipher,s=o.blockSize;n.call(this,i,r,s,o),this._prevBlock=i.slice(r,r+s)}}),t.Decryptor=t.extend({processBlock:function(i,r){var o=this._cipher,s=o.blockSize,a=i.slice(r,r+s);n.call(this,i,r,s,o),this._prevBlock=a}});function n(i,r,o,s){var a,l=this._iv;l?(a=l.slice(0),this._iv=void 0):a=this._prevBlock,s.encryptBlock(a,0);for(var c=0;c<o;c++)i[r+c]^=a[c]}return t})(),e.mode.CFB})});var hj=Pn((XE,uj)=>{"use strict";(function(e,t,n){typeof XE=="object"?uj.exports=XE=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(XE,function(e){return e.mode.CTR=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(i,r){var o=this._cipher,s=o.blockSize,a=this._iv,l=this._counter;a&&(l=this._counter=a.slice(0),this._iv=void 0);var c=l.slice(0);o.encryptBlock(c,0),l[s-1]=l[s-1]+1|0;for(var d=0;d<s;d++)i[r+d]^=c[d]}});return t.Decryptor=n,t})(),e.mode.CTR})});var fj=Pn((QE,pj)=>{"use strict";(function(e,t,n){typeof QE=="object"?pj.exports=QE=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(QE,function(e){return e.mode.CTRGladman=(function(){var t=e.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var s=o>>16&255,a=o>>8&255,l=o&255;s===255?(s=0,a===255?(a=0,l===255?l=0:++l):++a):++s,o=0,o+=s<<16,o+=a<<8,o+=l}else o+=1<<24;return o}function i(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}var r=t.Encryptor=t.extend({processBlock:function(o,s){var a=this._cipher,l=a.blockSize,c=this._iv,d=this._counter;c&&(d=this._counter=c.slice(0),this._iv=void 0),i(d);var u=d.slice(0);a.encryptBlock(u,0);for(var h=0;h<l;h++)o[s+h]^=u[h]}});return t.Decryptor=r,t})(),e.mode.CTRGladman})});var mj=Pn((JE,gj)=>{"use strict";(function(e,t,n){typeof JE=="object"?gj.exports=JE=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(JE,function(e){return e.mode.OFB=(function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(i,r){var o=this._cipher,s=o.blockSize,a=this._iv,l=this._keystream;a&&(l=this._keystream=a.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var c=0;c<s;c++)i[r+c]^=l[c]}});return t.Decryptor=n,t})(),e.mode.OFB})});var Cj=Pn((eD,vj)=>{"use strict";(function(e,t,n){typeof eD=="object"?vj.exports=eD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(eD,function(e){return e.mode.ECB=(function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(n,i){this._cipher.encryptBlock(n,i)}}),t.Decryptor=t.extend({processBlock:function(n,i){this._cipher.decryptBlock(n,i)}}),t})(),e.mode.ECB})});var wj=Pn((tD,bj)=>{"use strict";(function(e,t,n){typeof tD=="object"?bj.exports=tD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(tD,function(e){return e.pad.AnsiX923={pad:function(t,n){var i=t.sigBytes,r=n*4,o=r-i%r,s=i+o-1;t.clamp(),t.words[s>>>2]|=o<<24-s%4*8,t.sigBytes+=o},unpad:function(t){var n=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=n}},e.pad.Ansix923})});var Sj=Pn((nD,yj)=>{"use strict";(function(e,t,n){typeof nD=="object"?yj.exports=nD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(nD,function(e){return e.pad.Iso10126={pad:function(t,n){var i=n*4,r=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(t){var n=t.words[t.sigBytes-1>>>2]&255;t.sigBytes-=n}},e.pad.Iso10126})});var Ej=Pn((iD,xj)=>{"use strict";(function(e,t,n){typeof iD=="object"?xj.exports=iD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(iD,function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})});var _j=Pn((rD,Dj)=>{"use strict";(function(e,t,n){typeof rD=="object"?Dj.exports=rD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(rD,function(e){return e.pad.ZeroPadding={pad:function(t,n){var i=n*4;t.clamp(),t.sigBytes+=i-(t.sigBytes%i||i)},unpad:function(t){for(var n=t.words,i=t.sigBytes-1,i=t.sigBytes-1;i>=0;i--)if(n[i>>>2]>>>24-i%4*8&255){t.sigBytes=i+1;break}}},e.pad.ZeroPadding})});var Rj=Pn((oD,Aj)=>{"use strict";(function(e,t,n){typeof oD=="object"?Aj.exports=oD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(oD,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})});var Mj=Pn((sD,Fj)=>{"use strict";(function(e,t,n){typeof sD=="object"?Fj.exports=sD=t(Nn(),ho()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],t):t(e.CryptoJS)})(sD,function(e){return(function(t){var n=e,i=n.lib,r=i.CipherParams,o=n.enc,s=o.Hex,a=n.format,l=a.Hex={stringify:function(c){return c.ciphertext.toString(s)},parse:function(c){var d=s.parse(c);return r.create({ciphertext:d})}}})(),e.format.Hex})});var Tj=Pn((aD,Ij)=>{"use strict";(function(e,t,n){typeof aD=="object"?Ij.exports=aD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(aD,function(e){return(function(){var t=e,n=t.lib,i=n.BlockCipher,r=t.algo,o=[],s=[],a=[],l=[],c=[],d=[],u=[],h=[],p=[],f=[];(function(){for(var m=[],w=0;w<256;w++)w<128?m[w]=w<<1:m[w]=w<<1^283;for(var x=0,D=0,w=0;w<256;w++){var F=D^D<<1^D<<2^D<<3^D<<4;F=F>>>8^F&255^99,o[x]=F,s[F]=x;var L=m[x],V=m[L],B=m[V],P=m[F]*257^F*16843008;a[x]=P<<24|P>>>8,l[x]=P<<16|P>>>16,c[x]=P<<8|P>>>24,d[x]=P;var P=B*16843009^V*65537^L*257^x*16843008;u[F]=P<<24|P>>>8,h[F]=P<<16|P>>>16,p[F]=P<<8|P>>>24,f[F]=P,x?(x=L^m[m[m[B^L]]],D^=m[m[D]]):x=D=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],C=r.AES=i.extend({_doReset:function(){var m;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,x=w.words,D=w.sigBytes/4,F=this._nRounds=D+6,L=(F+1)*4,V=this._keySchedule=[],B=0;B<L;B++)B<D?V[B]=x[B]:(m=V[B-1],B%D?D>6&&B%D==4&&(m=o[m>>>24]<<24|o[m>>>16&255]<<16|o[m>>>8&255]<<8|o[m&255]):(m=m<<8|m>>>24,m=o[m>>>24]<<24|o[m>>>16&255]<<16|o[m>>>8&255]<<8|o[m&255],m^=g[B/D|0]<<24),V[B]=V[B-D]^m);for(var P=this._invKeySchedule=[],U=0;U<L;U++){var B=L-U;if(U%4)var m=V[B];else var m=V[B-4];U<4||B<=4?P[U]=m:P[U]=u[o[m>>>24]]^h[o[m>>>16&255]]^p[o[m>>>8&255]]^f[o[m&255]]}}},encryptBlock:function(m,w){this._doCryptBlock(m,w,this._keySchedule,a,l,c,d,o)},decryptBlock:function(m,w){var x=m[w+1];m[w+1]=m[w+3],m[w+3]=x,this._doCryptBlock(m,w,this._invKeySchedule,u,h,p,f,s);var x=m[w+1];m[w+1]=m[w+3],m[w+3]=x},_doCryptBlock:function(m,w,x,D,F,L,V,B){for(var P=this._nRounds,U=m[w]^x[0],A=m[w+1]^x[1],I=m[w+2]^x[2],j=m[w+3]^x[3],G=4,Q=1;Q<P;Q++){var le=D[U>>>24]^F[A>>>16&255]^L[I>>>8&255]^V[j&255]^x[G++],me=D[A>>>24]^F[I>>>16&255]^L[j>>>8&255]^V[U&255]^x[G++],ge=D[I>>>24]^F[j>>>16&255]^L[U>>>8&255]^V[A&255]^x[G++],se=D[j>>>24]^F[U>>>16&255]^L[A>>>8&255]^V[I&255]^x[G++];U=le,A=me,I=ge,j=se}var le=(B[U>>>24]<<24|B[A>>>16&255]<<16|B[I>>>8&255]<<8|B[j&255])^x[G++],me=(B[A>>>24]<<24|B[I>>>16&255]<<16|B[j>>>8&255]<<8|B[U&255])^x[G++],ge=(B[I>>>24]<<24|B[j>>>16&255]<<16|B[U>>>8&255]<<8|B[A&255])^x[G++],se=(B[j>>>24]<<24|B[U>>>16&255]<<16|B[A>>>8&255]<<8|B[I&255])^x[G++];m[w]=le,m[w+1]=me,m[w+2]=ge,m[w+3]=se},keySize:256/32});t.AES=i._createHelper(C)})(),e.AES})});var kj=Pn((lD,Pj)=>{"use strict";(function(e,t,n){typeof lD=="object"?Pj.exports=lD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(lD,function(e){return(function(){var t=e,n=t.lib,i=n.WordArray,r=n.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=o.DES=r.extend({_doReset:function(){for(var g=this._key,C=g.words,m=[],w=0;w<56;w++){var x=s[w]-1;m[w]=C[x>>>5]>>>31-x%32&1}for(var D=this._subKeys=[],F=0;F<16;F++){for(var L=D[F]=[],V=l[F],w=0;w<24;w++)L[w/6|0]|=m[(a[w]-1+V)%28]<<31-w%6,L[4+(w/6|0)]|=m[28+(a[w+24]-1+V)%28]<<31-w%6;L[0]=L[0]<<1|L[0]>>>31;for(var w=1;w<7;w++)L[w]=L[w]>>>(w-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var B=this._invSubKeys=[],w=0;w<16;w++)B[w]=D[15-w]},encryptBlock:function(g,C){this._doCryptBlock(g,C,this._subKeys)},decryptBlock:function(g,C){this._doCryptBlock(g,C,this._invSubKeys)},_doCryptBlock:function(g,C,m){this._lBlock=g[C],this._rBlock=g[C+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var w=0;w<16;w++){for(var x=m[w],D=this._lBlock,F=this._rBlock,L=0,V=0;V<8;V++)L|=c[V][((F^x[V])&d[V])>>>0];this._lBlock=F,this._rBlock=D^L}var B=this._lBlock;this._lBlock=this._rBlock,this._rBlock=B,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),g[C]=this._lBlock,g[C+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function h(g,C){var m=(this._lBlock>>>g^this._rBlock)&C;this._rBlock^=m,this._lBlock^=m<<g}function p(g,C){var m=(this._rBlock>>>g^this._lBlock)&C;this._lBlock^=m,this._rBlock^=m<<g}t.DES=r._createHelper(u);var f=o.TripleDES=r.extend({_doReset:function(){var g=this._key,C=g.words;if(C.length!==2&&C.length!==4&&C.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var m=C.slice(0,2),w=C.length<4?C.slice(0,2):C.slice(2,4),x=C.length<6?C.slice(0,2):C.slice(4,6);this._des1=u.createEncryptor(i.create(m)),this._des2=u.createEncryptor(i.create(w)),this._des3=u.createEncryptor(i.create(x))},encryptBlock:function(g,C){this._des1.encryptBlock(g,C),this._des2.decryptBlock(g,C),this._des3.encryptBlock(g,C)},decryptBlock:function(g,C){this._des3.decryptBlock(g,C),this._des2.encryptBlock(g,C),this._des1.decryptBlock(g,C)},keySize:192/32,ivSize:64/32,blockSize:64/32});t.TripleDES=r._createHelper(f)})(),e.TripleDES})});var Oj=Pn((cD,Lj)=>{"use strict";(function(e,t,n){typeof cD=="object"?Lj.exports=cD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(cD,function(e){return(function(){var t=e,n=t.lib,i=n.StreamCipher,r=t.algo,o=r.RC4=i.extend({_doReset:function(){for(var l=this._key,c=l.words,d=l.sigBytes,u=this._S=[],h=0;h<256;h++)u[h]=h;for(var h=0,p=0;h<256;h++){var f=h%d,g=c[f>>>2]>>>24-f%4*8&255;p=(p+u[h]+g)%256;var C=u[h];u[h]=u[p],u[p]=C}this._i=this._j=0},_doProcessBlock:function(l,c){l[c]^=s.call(this)},keySize:256/32,ivSize:0});function s(){for(var l=this._S,c=this._i,d=this._j,u=0,h=0;h<4;h++){c=(c+1)%256,d=(d+l[c])%256;var p=l[c];l[c]=l[d],l[d]=p,u|=l[(l[c]+l[d])%256]<<24-h*8}return this._i=c,this._j=d,u}t.RC4=i._createHelper(o);var a=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)s.call(this)}});t.RC4Drop=i._createHelper(a)})(),e.RC4})});var Bj=Pn((dD,Nj)=>{"use strict";(function(e,t,n){typeof dD=="object"?Nj.exports=dD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(dD,function(e){return(function(){var t=e,n=t.lib,i=n.StreamCipher,r=t.algo,o=[],s=[],a=[],l=r.Rabbit=i.extend({_doReset:function(){for(var d=this._key.words,u=this.cfg.iv,h=0;h<4;h++)d[h]=(d[h]<<8|d[h]>>>24)&16711935|(d[h]<<24|d[h]>>>8)&4278255360;var p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],f=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var h=0;h<4;h++)c.call(this);for(var h=0;h<8;h++)f[h]^=p[h+4&7];if(u){var g=u.words,C=g[0],m=g[1],w=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,x=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,D=w>>>16|x&4294901760,F=x<<16|w&65535;f[0]^=w,f[1]^=D,f[2]^=x,f[3]^=F,f[4]^=w,f[5]^=D,f[6]^=x,f[7]^=F;for(var h=0;h<4;h++)c.call(this)}},_doProcessBlock:function(d,u){var h=this._X;c.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var p=0;p<4;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360,d[u+p]^=o[p]},blockSize:128/32,ivSize:64/32});function c(){for(var d=this._X,u=this._C,h=0;h<8;h++)s[h]=u[h];u[0]=u[0]+1295307597+this._b|0,u[1]=u[1]+3545052371+(u[0]>>>0<s[0]>>>0?1:0)|0,u[2]=u[2]+886263092+(u[1]>>>0<s[1]>>>0?1:0)|0,u[3]=u[3]+1295307597+(u[2]>>>0<s[2]>>>0?1:0)|0,u[4]=u[4]+3545052371+(u[3]>>>0<s[3]>>>0?1:0)|0,u[5]=u[5]+886263092+(u[4]>>>0<s[4]>>>0?1:0)|0,u[6]=u[6]+1295307597+(u[5]>>>0<s[5]>>>0?1:0)|0,u[7]=u[7]+3545052371+(u[6]>>>0<s[6]>>>0?1:0)|0,this._b=u[7]>>>0<s[7]>>>0?1:0;for(var h=0;h<8;h++){var p=d[h]+u[h],f=p&65535,g=p>>>16,C=((f*f>>>17)+f*g>>>15)+g*g,m=((p&4294901760)*p|0)+((p&65535)*p|0);a[h]=C^m}d[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,d[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,d[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,d[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,d[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,d[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,d[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,d[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=i._createHelper(l)})(),e.Rabbit})});var Gj=Pn((uD,Vj)=>{"use strict";(function(e,t,n){typeof uD=="object"?Vj.exports=uD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(uD,function(e){return(function(){var t=e,n=t.lib,i=n.StreamCipher,r=t.algo,o=[],s=[],a=[],l=r.RabbitLegacy=i.extend({_doReset:function(){var d=this._key.words,u=this.cfg.iv,h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],p=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var f=0;f<4;f++)c.call(this);for(var f=0;f<8;f++)p[f]^=h[f+4&7];if(u){var g=u.words,C=g[0],m=g[1],w=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,x=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,D=w>>>16|x&4294901760,F=x<<16|w&65535;p[0]^=w,p[1]^=D,p[2]^=x,p[3]^=F,p[4]^=w,p[5]^=D,p[6]^=x,p[7]^=F;for(var f=0;f<4;f++)c.call(this)}},_doProcessBlock:function(d,u){var h=this._X;c.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var p=0;p<4;p++)o[p]=(o[p]<<8|o[p]>>>24)&16711935|(o[p]<<24|o[p]>>>8)&4278255360,d[u+p]^=o[p]},blockSize:128/32,ivSize:64/32});function c(){for(var d=this._X,u=this._C,h=0;h<8;h++)s[h]=u[h];u[0]=u[0]+1295307597+this._b|0,u[1]=u[1]+3545052371+(u[0]>>>0<s[0]>>>0?1:0)|0,u[2]=u[2]+886263092+(u[1]>>>0<s[1]>>>0?1:0)|0,u[3]=u[3]+1295307597+(u[2]>>>0<s[2]>>>0?1:0)|0,u[4]=u[4]+3545052371+(u[3]>>>0<s[3]>>>0?1:0)|0,u[5]=u[5]+886263092+(u[4]>>>0<s[4]>>>0?1:0)|0,u[6]=u[6]+1295307597+(u[5]>>>0<s[5]>>>0?1:0)|0,u[7]=u[7]+3545052371+(u[6]>>>0<s[6]>>>0?1:0)|0,this._b=u[7]>>>0<s[7]>>>0?1:0;for(var h=0;h<8;h++){var p=d[h]+u[h],f=p&65535,g=p>>>16,C=((f*f>>>17)+f*g>>>15)+g*g,m=((p&4294901760)*p|0)+((p&65535)*p|0);a[h]=C^m}d[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,d[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,d[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,d[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,d[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,d[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,d[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,d[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=i._createHelper(l)})(),e.RabbitLegacy})});var zj=Pn((hD,Hj)=>{"use strict";(function(e,t,n){typeof hD=="object"?Hj.exports=hD=t(Nn(),zh(),jh(),_u(),ho()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(hD,function(e){return(function(){var t=e,n=t.lib,i=n.BlockCipher,r=t.algo;let o=16,s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function c(f,g){let C=g>>24&255,m=g>>16&255,w=g>>8&255,x=g&255,D=f.sbox[0][C]+f.sbox[1][m];return D=D^f.sbox[2][w],D=D+f.sbox[3][x],D}function d(f,g,C){let m=g,w=C,x;for(let D=0;D<o;++D)m=m^f.pbox[D],w=c(f,m)^w,x=m,m=w,w=x;return x=m,m=w,w=x,w=w^f.pbox[o],m=m^f.pbox[o+1],{left:m,right:w}}function u(f,g,C){let m=g,w=C,x;for(let D=o+1;D>1;--D)m=m^f.pbox[D],w=c(f,m)^w,x=m,m=w,w=x;return x=m,m=w,w=x,w=w^f.pbox[1],m=m^f.pbox[0],{left:m,right:w}}function h(f,g,C){for(let F=0;F<4;F++){f.sbox[F]=[];for(let L=0;L<256;L++)f.sbox[F][L]=a[F][L]}let m=0;for(let F=0;F<o+2;F++)f.pbox[F]=s[F]^g[m],m++,m>=C&&(m=0);let w=0,x=0,D=0;for(let F=0;F<o+2;F+=2)D=d(f,w,x),w=D.left,x=D.right,f.pbox[F]=w,f.pbox[F+1]=x;for(let F=0;F<4;F++)for(let L=0;L<256;L+=2)D=d(f,w,x),w=D.left,x=D.right,f.sbox[F][L]=w,f.sbox[F][L+1]=x;return!0}var p=r.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var f=this._keyPriorReset=this._key,g=f.words,C=f.sigBytes/4;h(l,g,C)}},encryptBlock:function(f,g){var C=d(l,f[g],f[g+1]);f[g]=C.left,f[g+1]=C.right},decryptBlock:function(f,g){var C=u(l,f[g],f[g+1]);f[g]=C.left,f[g+1]=C.right},blockSize:64/32,keySize:128/32,ivSize:64/32});t.Blowfish=i._createHelper(p)})(),e.Blowfish})});var Uj=Pn((pD,jj)=>{"use strict";(function(e,t,n){typeof pD=="object"?jj.exports=pD=t(Nn(),Lw(),Gz(),zz(),zh(),Wz(),jh(),m3(),VE(),Zz(),v3(),Jz(),tj(),ij(),$E(),sj(),_u(),ho(),dj(),hj(),fj(),mj(),Cj(),wj(),Sj(),Ej(),_j(),Rj(),Mj(),Tj(),kj(),Oj(),Bj(),Gj(),zj()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],t):e.CryptoJS=t(e.CryptoJS)})(pD,function(e){return e})});var Zo=null,A1=!1,sR=1,DQ=null,wo=Symbol("SIGNAL");function Ht(e){let t=Zo;return Zo=e,t}function F1(){return Zo}var rm={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function om(e){if(A1)throw new Error("");if(Zo===null)return;Zo.consumerOnSignalRead(e);let t=Zo.producersTail;if(t!==void 0&&t.producer===e)return;let n,i=Zo.recomputing;if(i&&(n=t!==void 0?t.nextProducer:Zo.producers,n!==void 0&&n.producer===e)){Zo.producersTail=n,n.lastReadVersion=e.version;return}let r=e.consumersTail;if(r!==void 0&&r.consumer===Zo&&(!i||AQ(r,Zo)))return;let o=lm(Zo),s={producer:e,consumer:Zo,nextProducer:n,prevConsumer:r,lastReadVersion:e.version,nextConsumer:void 0};Zo.producersTail=s,t!==void 0?t.nextProducer=s:Zo.producers=s,o&&K4(e,s)}function W4(){sR++}function aR(e){if(!(lm(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===sR)){if(!e.producerMustRecompute(e)&&!am(e)){oR(e);return}e.producerRecomputeValue(e),oR(e)}}function lR(e){if(e.consumers===void 0)return;let t=A1;A1=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let i=n.consumer;i.dirty||_Q(i)}}finally{A1=t}}function cR(){return Zo?.consumerAllowSignalWrites!==!1}function _Q(e){e.dirty=!0,lR(e),e.consumerMarkedDirty?.(e)}function oR(e){e.dirty=!1,e.lastCleanEpoch=sR}function $p(e){return e&&$4(e),Ht(e)}function $4(e){e.producersTail=void 0,e.recomputing=!0}function sm(e,t){Ht(t),e&&q4(e)}function q4(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(lm(e))do n=dR(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function am(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,i=t.lastReadVersion;if(i!==n.version||(aR(n),i!==n.version))return!0}return!1}function ph(e){if(lm(e)){let t=e.producers;for(;t!==void 0;)t=dR(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function K4(e,t){let n=e.consumersTail,i=lm(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!i)for(let r=e.producers;r!==void 0;r=r.nextProducer)K4(r.producer,r)}function dR(e){let t=e.producer,n=e.nextProducer,i=e.nextConsumer,r=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!lm(t)){let o=t.producers;for(;o!==void 0;)o=dR(o)}return n}function lm(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function uR(e){DQ?.(e)}function AQ(e,t){let n=t.producersTail;if(n!==void 0){let i=t.producers;do{if(i===e)return!0;if(i===n)break;i=i.nextProducer}while(i!==void 0)}return!1}function hR(e,t){return Object.is(e,t)}function dC(e,t){let n=Object.create(RQ);n.computation=e,t!==void 0&&(n.equal=t);let i=()=>{if(aR(n),om(n),n.value===R1)throw n.error;return n.value};return i[wo]=n,uR(n),i}var iR=Symbol("UNSET"),rR=Symbol("COMPUTING"),R1=Symbol("ERRORED"),RQ=ce(T({},rm),{value:iR,dirty:!0,error:null,equal:hR,kind:"computed",producerMustRecompute(e){return e.value===iR||e.value===rR},producerRecomputeValue(e){if(e.value===rR)throw new Error("");let t=e.value;e.value=rR;let n=$p(e),i,r=!1;try{i=e.computation(),Ht(null),r=t!==iR&&t!==R1&&i!==R1&&e.equal(t,i)}catch(o){i=R1,e.error=o}finally{sm(e,n)}if(r){e.value=t;return}e.value=i,e.version++}});function FQ(){throw new Error}var Y4=FQ;function Z4(e){Y4(e)}function pR(e){Y4=e}var MQ=null;function fR(e,t){let n=Object.create(hC);n.value=e,t!==void 0&&(n.equal=t);let i=()=>X4(n);return i[wo]=n,uR(n),[i,s=>uC(n,s),s=>Q4(n,s)]}function X4(e){return om(e),e.value}function uC(e,t){cR()||Z4(e),e.equal(e.value,t)||(e.value=t,IQ(e))}function Q4(e,t){cR()||Z4(e),uC(e,t(e.value))}var hC=ce(T({},rm),{equal:hR,value:void 0,kind:"signal"});function IQ(e){e.version++,W4(),lR(e),MQ?.(e)}function gR(e){let t=Ht(null);try{return e()}finally{Ht(t)}}var mR=ce(T({},rm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function vR(e){if(e.dirty=!1,e.version>0&&!am(e))return;e.version++;let t=$p(e);try{e.cleanup(),e.fn()}finally{sm(e,t)}}function pn(e){return typeof e=="function"}function cm(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var M1=cm(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qp(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var li=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(pn(i))try{i()}catch(o){t=o instanceof M1?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{J4(o)}catch(s){t=t??[],s instanceof M1?t=[...t,...s.errors]:t.push(s)}}if(t)throw new M1(t)}}add(t){var n;if(t&&t!==this)if(this.closed)J4(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&qp(n,t)}remove(t){let{_finalizers:n}=this;n&&qp(n,t),t instanceof e&&t._removeParent(this)}};li.EMPTY=(()=>{let e=new li;return e.closed=!0,e})();var CR=li.EMPTY;function I1(e){return e instanceof li||e&&"closed"in e&&pn(e.remove)&&pn(e.add)&&pn(e.unsubscribe)}function J4(e){pn(e)?e():e.unsubscribe()}var cc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var dm={setTimeout(e,t,...n){let{delegate:i}=dm;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=dm;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function T1(e){dm.setTimeout(()=>{let{onUnhandledError:t}=cc;if(t)t(e);else throw e})}function pC(){}var eO=bR("C",void 0,void 0);function tO(e){return bR("E",void 0,e)}function nO(e){return bR("N",e,void 0)}function bR(e,t,n){return{kind:e,value:t,error:n}}var Kp=null;function um(e){if(cc.useDeprecatedSynchronousErrorHandling){let t=!Kp;if(t&&(Kp={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=Kp;if(Kp=null,n)throw i}}else e()}function iO(e){cc.useDeprecatedSynchronousErrorHandling&&Kp&&(Kp.errorThrown=!0,Kp.error=e)}var Yp=class extends li{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,I1(t)&&t.add(this)):this.destination=kQ}static create(t,n,i){return new nu(t,n,i)}next(t){this.isStopped?yR(nO(t),this):this._next(t)}error(t){this.isStopped?yR(tO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?yR(eO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TQ=Function.prototype.bind;function wR(e,t){return TQ.call(e,t)}var SR=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){P1(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){P1(i)}else P1(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){P1(n)}}},nu=class extends Yp{constructor(t,n,i){super();let r;if(pn(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&cc.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&wR(t.next,o),error:t.error&&wR(t.error,o),complete:t.complete&&wR(t.complete,o)}):r=t}this.destination=new SR(r)}};function P1(e){cc.useDeprecatedSynchronousErrorHandling?iO(e):T1(e)}function PQ(e){throw e}function yR(e,t){let{onStoppedNotification:n}=cc;n&&dm.setTimeout(()=>n(e,t))}var kQ={closed:!0,next:pC,error:PQ,complete:pC};var hm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _a(e){return e}function xR(...e){return ER(e)}function ER(e){return e.length===0?_a:e.length===1?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}var fn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=OQ(n)?n:new nu(n,i,r);return um(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=rO(i),new i((r,o)=>{let s=new nu({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[hm](){return this}pipe(...n){return ER(n)(this)}toPromise(n){return n=rO(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function rO(e){var t;return(t=e??cc.Promise)!==null&&t!==void 0?t:Promise}function LQ(e){return e&&pn(e.next)&&pn(e.error)&&pn(e.complete)}function OQ(e){return e&&e instanceof Yp||LQ(e)&&I1(e)}function NQ(e){return pn(e?.lift)}function Dn(e){return t=>{if(NQ(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function An(e,t,n,i,r){return new DR(e,t,n,i,r)}var DR=class extends Yp{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var oO=cm(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class e extends fn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new k1(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new oO}next(n){um(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){um(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){um(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?CR:(this.currentObservers=null,o.push(n),new li(()=>{this.currentObservers=null,qp(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new fn;return n.source=this,n}}return e.create=(t,n)=>new k1(t,n),e})(),k1=class extends At{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:CR}};var ao=class extends At{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var fC={now(){return(fC.delegate||Date).now()},delegate:void 0};var L1=class extends At{constructor(t=1/0,n=1/0,i=fC){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var O1=class extends li{constructor(t,n){super()}schedule(t,n=0){return this}};var gC={setInterval(e,t,...n){let{delegate:i}=gC;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=gC;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var N1=class extends O1{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return gC.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&gC.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qp(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var pm=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};pm.now=fC.now;var B1=class extends pm{constructor(t,n=pm.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var mC=new B1(N1),sO=mC;var Xo=new fn(e=>e.complete());function V1(e){return e&&pn(e.schedule)}function _R(e){return e[e.length-1]}function G1(e){return pn(_R(e))?e.pop():void 0}function Xc(e){return V1(_R(e))?e.pop():void 0}function aO(e,t){return typeof _R(e)=="number"?e.pop():t}function cO(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function lO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zp(e){return this instanceof Zp?(this.v=e,this):new Zp(e)}function dO(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(p){return function(f){return Promise.resolve(f).then(p,u)}}function a(p,f){i[p]&&(r[p]=function(g){return new Promise(function(C,m){o.push([p,g,C,m])>1||l(p,g)})},f&&(r[p]=f(r[p])))}function l(p,f){try{c(i[p](f))}catch(g){h(o[0][3],g)}}function c(p){p.value instanceof Zp?Promise.resolve(p.value.v).then(d,u):h(o[0][2],p)}function d(p){l("next",p)}function u(p){l("throw",p)}function h(p,f){p(f),o.shift(),o.length&&l(o[0][0],o[0][1])}}function uO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lO=="function"?lO(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var H1=e=>e&&typeof e.length=="number"&&typeof e!="function";function z1(e){return pn(e?.then)}function j1(e){return pn(e[hm])}function U1(e){return Symbol.asyncIterator&&pn(e?.[Symbol.asyncIterator])}function W1(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $1=BQ();function q1(e){return pn(e?.[$1])}function K1(e){return dO(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:r}=yield Zp(n.read());if(r)return yield Zp(void 0);yield yield Zp(i)}}finally{n.releaseLock()}})}function Y1(e){return pn(e?.getReader)}function _i(e){if(e instanceof fn)return e;if(e!=null){if(j1(e))return VQ(e);if(H1(e))return GQ(e);if(z1(e))return HQ(e);if(U1(e))return hO(e);if(q1(e))return zQ(e);if(Y1(e))return jQ(e)}throw W1(e)}function VQ(e){return new fn(t=>{let n=e[hm]();if(pn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GQ(e){return new fn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function HQ(e){return new fn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,T1)})}function zQ(e){return new fn(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function hO(e){return new fn(t=>{UQ(e,t).catch(n=>t.error(n))})}function jQ(e){return hO(K1(e))}function UQ(e,t){var n,i,r,o;return cO(this,void 0,void 0,function*(){try{for(n=uO(e);i=yield n.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})}function qs(e,t,n,i=0,r=!1){let o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Z1(e,t=0){return Dn((n,i)=>{n.subscribe(An(i,r=>qs(i,e,()=>i.next(r),t),()=>qs(i,e,()=>i.complete(),t),r=>qs(i,e,()=>i.error(r),t)))})}function X1(e,t=0){return Dn((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function pO(e,t){return _i(e).pipe(X1(t),Z1(t))}function fO(e,t){return _i(e).pipe(X1(t),Z1(t))}function gO(e,t){return new fn(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function mO(e,t){return new fn(n=>{let i;return qs(n,t,()=>{i=e[$1](),qs(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>pn(i?.return)&&i.return()})}function Q1(e,t){if(!e)throw new Error("Iterable cannot be null");return new fn(n=>{qs(n,t,()=>{let i=e[Symbol.asyncIterator]();qs(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function vO(e,t){return Q1(K1(e),t)}function CO(e,t){if(e!=null){if(j1(e))return pO(e,t);if(H1(e))return gO(e,t);if(z1(e))return fO(e,t);if(U1(e))return Q1(e,t);if(q1(e))return mO(e,t);if(Y1(e))return vO(e,t)}throw W1(e)}function vr(e,t){return t?CO(e,t):_i(e)}function Zt(...e){let t=Xc(e);return vr(e,t)}function AR(e,t){let n=pn(e)?e:()=>e,i=r=>r.error(n());return new fn(t?r=>t.schedule(i,0,r):i)}function vC(e){return!!e&&(e instanceof fn||pn(e.lift)&&pn(e.subscribe))}var Xp=cm(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function bO(e){return e instanceof Date&&!isNaN(e)}function yn(e,t){return Dn((n,i)=>{let r=0;n.subscribe(An(i,o=>{i.next(e.call(t,o,r++))}))})}var{isArray:WQ}=Array;function $Q(e,t){return WQ(t)?e(...t):e(t)}function J1(e){return yn(t=>$Q(e,t))}var{isArray:qQ}=Array,{getPrototypeOf:KQ,prototype:YQ,keys:ZQ}=Object;function eS(e){if(e.length===1){let t=e[0];if(qQ(t))return{args:t,keys:null};if(XQ(t)){let n=ZQ(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function XQ(e){return e&&typeof e=="object"&&KQ(e)===YQ}function tS(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function CC(...e){let t=Xc(e),n=G1(e),{args:i,keys:r}=eS(e);if(i.length===0)return vr([],t);let o=new fn(QQ(i,t,r?s=>tS(r,s):_a));return n?o.pipe(J1(n)):o}function QQ(e,t,n=_a){return i=>{wO(t,()=>{let{length:r}=e,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)wO(t,()=>{let c=vr(e[l],t),d=!1;c.subscribe(An(i,u=>{o[l]=u,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function wO(e,t,n){e?qs(n,e,t):t()}function yO(e,t,n,i,r,o,s,a){let l=[],c=0,d=0,u=!1,h=()=>{u&&!l.length&&!c&&t.complete()},p=g=>c<i?f(g):l.push(g),f=g=>{o&&t.next(g),c++;let C=!1;_i(n(g,d++)).subscribe(An(t,m=>{r?.(m),o?p(m):t.next(m)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){let m=l.shift();s?qs(t,s,()=>f(m)):f(m)}h()}catch(m){t.error(m)}}))};return e.subscribe(An(t,p,()=>{u=!0,h()})),()=>{a?.()}}function Cs(e,t,n=1/0){return pn(t)?Cs((i,r)=>yn((o,s)=>t(i,o,r,s))(_i(e(i,r))),n):(typeof t=="number"&&(n=t),Dn((i,r)=>yO(i,r,e,n)))}function nS(e=1/0){return Cs(_a,e)}function SO(){return nS(1)}function fh(...e){return SO()(vr(e,Xc(e)))}function bC(e){return new fn(t=>{_i(e()).subscribe(t)})}function RR(...e){let t=G1(e),{args:n,keys:i}=eS(e),r=new fn(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let u=!1;_i(n[d]).subscribe(An(o,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(i?tS(i,a):a),o.complete())}))}});return t?r.pipe(J1(t)):r}function xO(e=0,t,n=sO){let i=-1;return t!=null&&(V1(t)?n=t:i=t),new fn(r=>{let o=bO(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function fm(...e){let t=Xc(e),n=aO(e,1/0),i=e;return i.length?i.length===1?_i(i[0]):nS(n)(vr(i,t)):Xo}function zi(e,t){return Dn((n,i)=>{let r=0;n.subscribe(An(i,o=>e.call(t,o,r++)&&i.next(o)))})}function EO(e){return Dn((t,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,n.next(c)}s&&n.complete()},l=()=>{o=null,s&&n.complete()};t.subscribe(An(n,c=>{i=!0,r=c,o||_i(e(c)).subscribe(o=An(n,a,l))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function iS(e,t=mC){return EO(()=>xO(e,t))}function wC(e){return Dn((t,n)=>{let i=null,r=!1,o;i=t.subscribe(An(n,void 0,void 0,s=>{o=_i(e(s,wC(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function gm(e,t){return pn(t)?Cs(e,t,1):Cs(e,1)}function FR(e,t=mC){return Dn((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+e,d=t.now();if(d<c){r=this.schedule(void 0,c-d),i.add(r);return}a()}n.subscribe(An(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,e),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function MR(e){return Dn((t,n)=>{let i=!1;t.subscribe(An(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function al(e){return e<=0?()=>Xo:Dn((t,n)=>{let i=0;t.subscribe(An(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function rS(e,t=_a){return e=e??JQ,Dn((n,i)=>{let r,o=!0;n.subscribe(An(i,s=>{let a=t(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}function JQ(e,t){return e===t}function DO(e=eJ){return Dn((t,n)=>{let i=!1;t.subscribe(An(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function eJ(){return new Xp}function yC(e){return Dn((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function iu(e,t){let n=arguments.length>=2;return i=>i.pipe(e?zi((r,o)=>e(r,o,i)):_a,al(1),n?MR(t):DO(()=>new Xp))}function oS(e){return e<=0?()=>Xo:Dn((t,n)=>{let i=[];t.subscribe(An(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function sS(){return Dn((e,t)=>{let n,i=!1;e.subscribe(An(t,r=>{let o=n;n=r,i&&t.next([o,r]),i=!0}))})}function _O(e={}){let{connector:t=()=>new At,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,c=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),s=l=void 0,d=u=!1},f=()=>{let g=s;p(),g?.unsubscribe()};return Dn((g,C)=>{c++,!u&&!d&&h();let m=l=l??t();C.add(()=>{c--,c===0&&!u&&!d&&(a=IR(f,r))}),m.subscribe(C),!s&&c>0&&(s=new nu({next:w=>m.next(w),error:w=>{u=!0,h(),a=IR(p,n,w),m.error(w)},complete:()=>{d=!0,h(),a=IR(p,i),m.complete()}}),_i(g).subscribe(s))})(o)}}function IR(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new nu({next:()=>{i.unsubscribe(),e()}});return _i(t(...n)).subscribe(i)}function aS(e,t,n){let i,r=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:n}=e:i=e??1/0,_O({connector:()=>new L1(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function SC(e){return zi((t,n)=>e<=n)}function ll(...e){let t=Xc(e);return Dn((n,i)=>{(t?fh(e,n,t):fh(e,n)).subscribe(i)})}function bs(e,t){return Dn((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(An(i,l=>{r?.unsubscribe();let c=0,d=o++;_i(e(l,d)).subscribe(r=An(i,u=>i.next(t?t(l,u,d,c++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ki(e){return Dn((t,n)=>{_i(e).subscribe(An(n,()=>n.complete(),pC)),!n.closed&&t.subscribe(n)})}function Wr(e,t,n){let i=pn(e)||t||n?{next:e,error:t,complete:n}:e;return i?Dn((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(An(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):_a}var TR;function lS(){return TR}function Qc(e){let t=TR;return TR=e,t}var AO=Symbol("NotFound");function mm(e){return e===AO||e?.name==="\u0275NotFound"}var WR="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ut=class extends Error{code;constructor(t,n){super(rf(t,n)),this.code=t}};function tJ(e){return`NG0${Math.abs(e)}`}function rf(e,t){return`${tJ(e)}${t?": "+t:""}`}function ci(e){for(let t in e)if(e[t]===ci)return t;throw Error("")}function TO(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ou(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(ou).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function gS(e,t){return e?t?`${e} ${t}`:e:t||""}var nJ=ci({__forward_ref__:ci});function Ra(e){return e.__forward_ref__=Ra,e.toString=function(){return ou(this())},e}function ko(e){return $R(e)?e():e}function $R(e){return typeof e=="function"&&e.hasOwnProperty(nJ)&&e.__forward_ref__===Ra}function Be(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Rn(e){return{providers:e.providers||[],imports:e.imports||[]}}function FC(e){return iJ(e,mS)}function qR(e){return FC(e)!==null}function iJ(e,t){return e.hasOwnProperty(t)&&e[t]||null}function rJ(e){let t=e?.[mS]??null;return t||null}function kR(e){return e&&e.hasOwnProperty(dS)?e[dS]:null}var mS=ci({\u0275prov:ci}),dS=ci({\u0275inj:ci}),Ke=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Be({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KR(e){return e&&!!e.\u0275providers}var YR=ci({\u0275cmp:ci}),ZR=ci({\u0275dir:ci}),XR=ci({\u0275pipe:ci}),QR=ci({\u0275mod:ci}),EC=ci({\u0275fac:ci}),of=ci({__NG_ELEMENT_ID__:ci}),RO=ci({__NG_ENV_ID__:ci});function Cm(e){return typeof e=="string"?e:e==null?"":String(e)}function PO(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Cm(e)}var kO=ci({ngErrorCode:ci}),oJ=ci({ngErrorMessage:ci}),sJ=ci({ngTokenPath:ci});function JR(e,t){return LO("",-200,t)}function vS(e,t){throw new ut(-201,!1)}function LO(e,t,n){let i=new ut(t,e);return i[kO]=t,i[oJ]=e,n&&(i[sJ]=n),i}function aJ(e){return e[kO]}var LR;function OO(){return LR}function Aa(e){let t=LR;return LR=e,t}function eF(e,t,n){let i=FC(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(t!==void 0)return t;vS(e,"Injector")}var lJ={},Qp=lJ,cJ="__NG_DI_FLAG__",OR=class{injector;constructor(t){this.injector=t}retrieve(t,n){let i=Jp(n)||0;try{return this.injector.get(t,i&8?null:Qp,i)}catch(r){if(mm(r))return r;throw r}}};function dJ(e,t=0){let n=lS();if(n===void 0)throw new ut(-203,!1);if(n===null)return eF(e,void 0,t);{let i=uJ(t),r=n.retrieve(e,i);if(mm(r)){if(i.optional)return null;throw r}return r}}function Tt(e,t=0){return(OO()||dJ)(ko(e),t)}function Z(e,t){return Tt(e,Jp(t))}function Jp(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function uJ(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function NR(e){let t=[];for(let n=0;n<e.length;n++){let i=ko(e[n]);if(Array.isArray(i)){if(i.length===0)throw new ut(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=hJ(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(Tt(r,o))}else t.push(Tt(i))}return t}function hJ(e){return e[cJ]}function ef(e,t){let n=e.hasOwnProperty(EC);return n?e[EC]:null}function NO(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function BO(e){return e.flat(Number.POSITIVE_INFINITY)}function CS(e,t){e.forEach(n=>Array.isArray(n)?CS(n,t):t(n))}function tF(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function MC(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function VO(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function GO(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(r===1)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;){let o=r-2;e[r]=e[o],r--}e[t]=n,e[t+1]=i}}function bS(e,t,n){let i=bm(e,t);return i>=0?e[i|1]=n:(i=~i,GO(e,i,t,n)),i}function wS(e,t){let n=bm(e,t);if(n>=0)return e[n|1]}function bm(e,t){return pJ(e,t,1)}function pJ(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}var vh={},Qo=[],sf=new Ke(""),nF=new Ke("",-1),iF=new Ke(""),DC=class{get(t,n=Qp){if(n===Qp){let r=LO("",-201);throw r.name="\u0275NotFound",r}return n}};function rF(e){return e[QR]||null}function su(e){return e[YR]||null}function oF(e){return e[ZR]||null}function HO(e){return e[XR]||null}function au(e){return{\u0275providers:e}}function zO(e){return au([{provide:sf,multi:!0,useValue:e}])}function jO(...e){return{\u0275providers:sF(!0,e),\u0275fromNgModule:!0}}function sF(e,...t){let n=[],i=new Set,r,o=s=>{n.push(s)};return CS(t,s=>{let a=s;uS(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&UO(r,o),n}function UO(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:r}=e[n];aF(r,o=>{t(o,i)})}}function uS(e,t,n,i){if(e=ko(e),!e)return!1;let r=null,o=kR(e),s=!o&&su(e);if(!o&&!s){let l=e.ngModule;if(o=kR(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=e}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)uS(c,t,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{CS(o.imports,d=>{uS(d,t,n,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&UO(c,t)}if(!a){let c=ef(r)||(()=>new r);t({provide:r,useFactory:c,deps:Qo},r),t({provide:iF,useValue:r,multi:!0},r),t({provide:sf,useValue:()=>Tt(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=e;aF(l,d=>{t(d,c)})}}else return!1;return r!==e&&e.providers!==void 0}function aF(e,t){for(let n of e)KR(n)&&(n=n.\u0275providers),Array.isArray(n)?aF(n,t):t(n)}var fJ=ci({provide:String,useValue:ci});function WO(e){return e!==null&&typeof e=="object"&&fJ in e}function gJ(e){return!!(e&&e.useExisting)}function mJ(e){return!!(e&&e.useFactory)}function tf(e){return typeof e=="function"}function $O(e){return!!e.useClass}var IC=new Ke(""),cS={},FO={},PR;function wm(){return PR===void 0&&(PR=new DC),PR}var ki=class{},nf=class extends ki{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,VR(t,s=>this.processProvider(s)),this.records.set(nF,vm(void 0,this)),r.has("environment")&&this.records.set(ki,vm(void 0,this));let o=this.records.get(IC);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(iF,Qo,{self:!0}))}retrieve(t,n){let i=Jp(n)||0;try{return this.get(t,Qp,i)}catch(r){if(mm(r))return r;throw r}}destroy(){xC(this),this._destroyed=!0;let t=Ht(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ht(t)}}onDestroy(t){return xC(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){xC(this);let n=Qc(this),i=Aa(void 0),r;try{return t()}finally{Qc(n),Aa(i)}}get(t,n=Qp,i){if(xC(this),t.hasOwnProperty(RO))return t[RO](this);let r=Jp(i),o,s=Qc(this),a=Aa(void 0);try{if(!(r&4)){let c=this.records.get(t);if(c===void 0){let d=yJ(t)&&FC(t);d&&this.injectableDefInScope(d)?c=vm(BR(t),cS):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,r)}let l=r&2?wm():this.parent;return n=r&8&&n===Qp?null:n,l.get(t,n)}catch(l){let c=aJ(l);throw c===-200||c===-201?new ut(c,null):l}finally{Aa(a),Qc(s)}}resolveInjectorInitializers(){let t=Ht(null),n=Qc(this),i=Aa(void 0),r;try{let o=this.get(sf,Qo,{self:!0});for(let s of o)s()}finally{Qc(n),Aa(i),Ht(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(ou(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ko(t);let n=tf(t)?t:ko(t&&t.provide),i=CJ(t);if(!tf(t)&&t.multi===!0){let r=this.records.get(n);r||(r=vm(void 0,cS,!0),r.factory=()=>NR(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n,i){let r=Ht(null);try{if(n.value===FO)throw JR(ou(t));return n.value===cS&&(n.value=FO,n.value=n.factory(void 0,i)),typeof n.value=="object"&&n.value&&wJ(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ht(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ko(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function BR(e){let t=FC(e),n=t!==null?t.factory:ef(e);if(n!==null)return n;if(e instanceof Ke)throw new ut(204,!1);if(e instanceof Function)return vJ(e);throw new ut(204,!1)}function vJ(e){if(e.length>0)throw new ut(204,!1);let n=rJ(e);return n!==null?()=>n.factory(e):()=>new e}function CJ(e){if(WO(e))return vm(void 0,e.useValue);{let t=lF(e);return vm(t,cS)}}function lF(e,t,n){let i;if(tf(e)){let r=ko(e);return ef(r)||BR(r)}else if(WO(e))i=()=>ko(e.useValue);else if(mJ(e))i=()=>e.useFactory(...NR(e.deps||[]));else if(gJ(e))i=(r,o)=>Tt(ko(e.useExisting),o!==void 0&&o&8?8:void 0);else{let r=ko(e&&(e.useClass||e.provide));if(bJ(e))i=()=>new r(...NR(e.deps));else return ef(r)||BR(r)}return i}function xC(e){if(e.destroyed)throw new ut(205,!1)}function vm(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function bJ(e){return!!e.deps}function wJ(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function yJ(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function VR(e,t){for(let n of e)Array.isArray(n)?VR(n,t):n&&KR(n)?VR(n.\u0275providers,t):t(n)}function Lo(e,t){let n;e instanceof nf?(xC(e),n=e):n=new OR(e);let i,r=Qc(n),o=Aa(void 0);try{return t()}finally{Qc(r),Aa(o)}}function qO(){return OO()!==void 0||lS()!=null}var dc=0,Wt=1,Jt=2,lo=3,cl=4,ws=5,af=6,ym=7,Fr=8,lu=9,cu=10,Ai=11,Sm=12,cF=13,lf=14,ys=15,Ch=16,cf=17,td=18,TC=19,dF=20,ru=21,yS=22,gh=23,Fa=24,df=25,uf=26,Mr=27,KO=1,uF=6,bh=7,PC=8,hf=9,Cr=10;function nd(e){return Array.isArray(e)&&typeof e[KO]=="object"}function uc(e){return Array.isArray(e)&&e[KO]===!0}function hF(e){return(e.flags&4)!==0}function wh(e){return e.componentOffset>-1}function kC(e){return(e.flags&1)===1}function id(e){return!!e.template}function xm(e){return(e[Jt]&512)!==0}function pf(e){return(e[Jt]&256)===256}var pF="svg",YO="math";function dl(e){for(;Array.isArray(e);)e=e[dc];return e}function fF(e,t){return dl(t[e])}function hc(e,t){return dl(t[e.index])}function LC(e,t){return e.data[t]}function ZO(e,t){return e[t]}function ul(e,t){let n=t[e];return nd(n)?n:n[dc]}function XO(e){return(e[Jt]&4)===4}function SS(e){return(e[Jt]&128)===128}function QO(e){return uc(e[lo])}function hl(e,t){return t==null?null:e[t]}function gF(e){e[cf]=0}function mF(e){e[Jt]&1024||(e[Jt]|=1024,SS(e)&&ff(e))}function JO(e,t){for(;e>0;)t=t[lf],e--;return t}function OC(e){return!!(e[Jt]&9216||e[Fa]?.dirty)}function xS(e){e[cu].changeDetectionScheduler?.notify(8),e[Jt]&64&&(e[Jt]|=1024),OC(e)&&ff(e)}function ff(e){e[cu].changeDetectionScheduler?.notify(0);let t=mh(e);for(;t!==null&&!(t[Jt]&8192||(t[Jt]|=8192,!SS(t)));)t=mh(t)}function vF(e,t){if(pf(e))throw new ut(911,!1);e[ru]===null&&(e[ru]=[]),e[ru].push(t)}function eN(e,t){if(e[ru]===null)return;let n=e[ru].indexOf(t);n!==-1&&e[ru].splice(n,1)}function mh(e){let t=e[lo];return uc(t)?t[lo]:t}function CF(e){return e[ym]??=[]}function bF(e){return e.cleanup??=[]}function tN(e,t,n,i){let r=CF(t);r.push(n),e.firstCreatePass&&bF(e).push(i,r.length-1)}var En={lFrame:pN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var GR=!1;function nN(){return En.lFrame.elementDepthCount}function iN(){En.lFrame.elementDepthCount++}function wF(){En.lFrame.elementDepthCount--}function yF(){return En.bindingsEnabled}function SF(){return En.skipHydrationRootTNode!==null}function xF(e){return En.skipHydrationRootTNode===e}function EF(){En.skipHydrationRootTNode=null}function cn(){return En.lFrame.lView}function rr(){return En.lFrame.tView}function Fn(e){return En.lFrame.contextLView=e,e[Fr]}function Mn(e){return En.lFrame.contextLView=null,e}function yo(){let e=DF();for(;e!==null&&e.type===64;)e=e.parent;return e}function DF(){return En.lFrame.currentTNode}function rN(){let e=En.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Em(e,t){let n=En.lFrame;n.currentTNode=e,n.isParent=t}function _F(){return En.lFrame.isParent}function AF(){En.lFrame.isParent=!1}function oN(){return En.lFrame.contextLView}function RF(){return GR}function _C(e){let t=GR;return GR=e,t}function sN(){return En.lFrame.bindingIndex}function aN(e){return En.lFrame.bindingIndex=e}function yh(){return En.lFrame.bindingIndex++}function ES(e){let t=En.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function lN(){return En.lFrame.inI18n}function cN(e,t){let n=En.lFrame;n.bindingIndex=n.bindingRootIndex=e,DS(t)}function dN(){return En.lFrame.currentDirectiveIndex}function DS(e){En.lFrame.currentDirectiveIndex=e}function uN(e){let t=En.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function _S(){return En.lFrame.currentQueryIndex}function NC(e){En.lFrame.currentQueryIndex=e}function SJ(e){let t=e[Wt];return t.type===2?t.declTNode:t.type===1?e[ws]:null}function FF(e,t,n){if(n&4){let r=t,o=e;for(;r=r.parent,r===null&&!(n&1);)if(r=SJ(o),r===null||(o=o[lf],r.type&10))break;if(r===null)return!1;t=r,e=o}let i=En.lFrame=hN();return i.currentTNode=t,i.lView=e,!0}function AS(e){let t=hN(),n=e[Wt];En.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hN(){let e=En.lFrame,t=e===null?null:e.child;return t===null?pN(e):t}function pN(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function fN(){let e=En.lFrame;return En.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var MF=fN;function RS(){let e=fN();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function gN(e){return(En.lFrame.contextLView=JO(e,En.lFrame.contextLView))[Fr]}function rd(){return En.lFrame.selectedIndex}function Sh(e){En.lFrame.selectedIndex=e}function BC(){let e=En.lFrame;return LC(e.tView,e.selectedIndex)}function gf(){En.lFrame.currentNamespace=pF}function VC(){xJ()}function xJ(){En.lFrame.currentNamespace=null}function mN(){return En.lFrame.currentNamespace}var vN=!0;function FS(){return vN}function MS(e){vN=e}function HR(e,t=null,n=null,i){let r=IF(e,t,n,i);return r.resolveInjectorInitializers(),r}function IF(e,t=null,n=null,i,r=new Set){let o=[n||Qo,jO(e)];return i=i||(typeof e=="object"?void 0:ou(e)),new nf(o,t||wm(),i||null,r)}var _n=class e{static THROW_IF_NOT_FOUND=Qp;static NULL=new DC;static create(t,n){if(Array.isArray(t))return HR({name:""},n,t,"");{let i=t.name??"";return HR({name:i},t.parent,t.providers,i)}}static \u0275prov=Be({token:e,providedIn:"any",factory:()=>Tt(nF)});static __NG_ELEMENT_ID__=-1},$t=new Ke(""),Ss=(()=>{class e{static __NG_ELEMENT_ID__=EJ;static __NG_ENV_ID__=n=>n}return e})(),hS=class extends Ss{_lView;constructor(t){super(),this._lView=t}get destroyed(){return pf(this._lView)}onDestroy(t){let n=this._lView;return vF(n,t),()=>eN(n,t)}};function EJ(){return new hS(cn())}var CN=!1,du=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ao(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fn(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}return e})(),zR=class extends At{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,qO()&&(this.destroyRef=Z(Ss,{optional:!0})??void 0,this.pendingTasks=Z(du,{optional:!0})??void 0)}emit(t){let n=Ht(null);try{super.next(t)}finally{Ht(n)}}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof li&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Ee=zR;function pS(...e){}function TF(e){let t,n;function i(){e=pS;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function PF(e){return queueMicrotask(()=>e()),()=>{e=pS}}var kF="isAngularZone",AC=kF+"_ID",DJ=0,It=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ee(!1);onMicrotaskEmpty=new Ee(!1);onStable=new Ee(!1);onError=new Ee(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=CN}=t;if(typeof Zone>"u")throw new ut(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,RJ(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kF)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ut(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ut(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,_J,pS,pS);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},_J={};function LF(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function AJ(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){TF(()=>{e.callbackScheduled=!1,jR(e),e.isCheckStableRunning=!0,LF(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),jR(e)}function RJ(e){let t=()=>{AJ(e)},n=DJ++;e._inner=e._inner.fork({name:"angular",properties:{[kF]:!0,[AC]:n,[AC+n]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(FJ(l))return i.invokeTask(o,s,a,l);try{return MO(e),i.invokeTask(o,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),IO(e)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return MO(e),i.invoke(o,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!MJ(l)&&t(),IO(e)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,jR(e),LF(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function jR(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function MO(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function IO(e){e._nesting--,LF(e)}var RC=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ee;onMicrotaskEmpty=new Ee;onStable=new Ee;onError=new Ee;run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}};function FJ(e){return bN(e,"__ignore_ng_zone__")}function MJ(e){return bN(e,"__scheduler_tick__")}function bN(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Jc=class{_console=console;handleError(t){this._console.error("ERROR",t)}},pc=new Ke("",{factory:()=>{let e=Z(It),t=Z(ki),n;return i=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw i}):(n??=t.get(Jc),n.handleError(i))})}}}),wN={provide:sf,useValue:()=>{let e=Z(Jc,{optional:!0})},multi:!0},IJ=new Ke("",{factory:()=>{let e=Z($t).defaultView;if(!e)return;let t=Z(pc),n=o=>{t(o.reason),o.preventDefault()},i=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},r=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),Z(Ss).onDestroy(()=>{e.removeEventListener("error",i),e.removeEventListener("unhandledrejection",n)})}});function OF(){return au([zO(()=>void Z(IJ))])}function gn(e,t){let[n,i,r]=fR(e,t?.equal),o=n,s=o[wo];return o.set=i,o.update=r,o.asReadonly=yN.bind(o),o}function yN(){let e=this[wo];if(e.readonlyFn===void 0){let t=()=>this();t[wo]=e,e.readonlyFn=t}return e.readonlyFn}var Dm=(()=>{class e{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=TJ}return e})();function TJ(){return new Dm(cn(),yo())}var ed=class{},GC=new Ke("",{factory:()=>!0});var NF=new Ke(""),IS=(()=>{class e{internalPendingTasks=Z(du);scheduler=Z(ed);errorHandler=Z(pc);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let i=this.add();n().catch(this.errorHandler).finally(i)}static \u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}return e})(),TS=(()=>{class e{static \u0275prov=Be({token:e,providedIn:"root",factory:()=>new UR})}return e})(),UR=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,i=this.queues.get(n);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,i]of this.queues)n===null?t||=this.flushQueue(i):t||=n.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}},fS=class{[wo];constructor(t){this[wo]=t}destroy(){this[wo].destroy()}};function _m(e,t){let n=t?.injector??Z(_n),i=t?.manualCleanup!==!0?n.get(Ss):null,r,o=n.get(Dm,null,{optional:!0}),s=n.get(ed);return o!==null?(r=LJ(o.view,s,e),i instanceof hS&&i._lView===o.view&&(i=null)):r=OJ(e,n.get(TS),s),r.injector=n,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new fS(r)}var SN=ce(T({},mR),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let e=_C(!1);try{vR(this)}finally{_C(e)}},cleanup(){if(!this.cleanupFns?.length)return;let e=Ht(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Ht(e)}}}),PJ=ce(T({},SN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ph(this),this.onDestroyFns!==null)for(let e of this.onDestroyFns)e();this.cleanup(),this.scheduler.remove(this)}}),kJ=ce(T({},SN),{consumerMarkedDirty(){this.view[Jt]|=8192,ff(this.view),this.notifier.notify(13)},destroy(){if(ph(this),this.onDestroyFns!==null)for(let e of this.onDestroyFns)e();this.cleanup(),this.view[gh]?.delete(this)}});function LJ(e,t,n){let i=Object.create(kJ);return i.view=e,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=xN(i,n),e[gh]??=new Set,e[gh].add(i),i.consumerMarkedDirty(i),i}function OJ(e,t,n){let i=Object.create(PJ);return i.fn=xN(i,e),i.scheduler=t,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function xN(e,t){return()=>{t(n=>(e.cleanupFns??=[]).push(n))}}function So(e){return gR(e)}function ZC(e){return{toString:e}.toString()}function jJ(e){return typeof e=="function"}function JN(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}var VS=class{previousValue;currentValue;firstChange;constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}},$r=(()=>{let e=()=>e6;return e.ngInherit=!0,e})();function e6(e){return e.type.prototype.ngOnChanges&&(e.setInput=WJ),UJ}function UJ(){let e=n6(this),t=e?.current;if(t){let n=e.previous;if(n===vh)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function WJ(e,t,n,i,r){let o=this.declaredInputs[i],s=n6(e)||$J(e,{previous:vh,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new VS(c&&c.currentValue,n,l===vh),JN(e,t,r,n)}var t6="__ngSimpleChanges__";function n6(e){return e[t6]||null}function $J(e,t){return e[t6]=t}var EN=[];var di=function(e,t=null,n){for(let i=0;i<EN.length;i++){let r=EN[i];r(e,t,n)}},Un=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(Un||{});function qJ(e,t,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=e6(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}r&&(n.preOrderHooks??=[]).push(0-e,r),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function i6(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),d!=null&&(e.destroyHooks??=[]).push(n,d)}}function kS(e,t,n){r6(e,t,3,n)}function LS(e,t,n,i){(e[Jt]&3)===n&&r6(e,t,n,i)}function BF(e,t){let n=e[Jt];(n&3)===t&&(n&=16383,n+=1,e[Jt]=n)}function r6(e,t,n,i){let r=i!==void 0?e[cf]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[cf]+=65536),(a<o||o==-1)&&(KJ(e,n,t,l),e[cf]=(e[cf]&4294901760)+l+2),l++}function DN(e,t){di(Un.LifecycleHookStart,e,t);let n=Ht(null);try{t.call(e)}finally{Ht(n),di(Un.LifecycleHookEnd,e,t)}}function KJ(e,t,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=e[s];r?e[Jt]>>14<e[cf]>>16&&(e[Jt]&3)===t&&(e[Jt]+=16384,DN(a,o)):DN(a,o)}var Rm=-1,vf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=n,this.injectImpl=i}};function YJ(e){return(e.flags&8)!==0}function ZJ(e){return(e.flags&16)!==0}function XJ(e,t,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{let o=r,s=n[++i];QJ(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function o6(e){return e===3||e===4||e===6}function QJ(e){return e.charCodeAt(0)===64}function Fm(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?_N(e,n,r,null,t[++i]):_N(e,n,r,null,null))}}return e}function _N(e,t,n,i,r){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){r!==null&&(e[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r)}function s6(e){return e!==Rm}function GS(e){return e&32767}function JJ(e){return e>>16}function HS(e,t){let n=JJ(e),i=t;for(;n>0;)i=i[lf],n--;return i}var KF=!0;function AN(e){let t=KF;return KF=e,t}var eee=256,a6=eee-1,l6=5,tee=0,od={};function nee(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(of)&&(i=n[of]),i==null&&(i=n[of]=tee++);let r=i&a6,o=1<<r;t.data[e+(r>>l6)]|=o}function zS(e,t){let n=c6(e,t);if(n!==-1)return n;let i=t[Wt];i.firstCreatePass&&(e.injectorIndex=t.length,VF(i.data,e),VF(t,null),VF(i.blueprint,null));let r=yM(e,t),o=e.injectorIndex;if(s6(r)){let s=GS(r),a=HS(r,t),l=a[Wt].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function VF(e,t){e.push(0,0,0,0,0,0,0,0,t)}function c6(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function yM(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;r!==null;){if(i=f6(r),i===null)return Rm;if(n++,r=r[lf],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Rm}function YF(e,t,n){nee(e,t,n)}function iee(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(o6(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===t)return n[r+1];r=r+2}}}return null}function d6(e,t,n){if(n&8||e!==void 0)return e;vS(t,"NodeInjector")}function u6(e,t,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=e[lu],o=Aa(void 0);try{return r?r.get(t,i,n&8):eF(t,i,n&8)}finally{Aa(o)}}return d6(i,t,n)}function h6(e,t,n,i=0,r){if(e!==null){if(t[Jt]&2048&&!(i&2)){let s=aee(e,t,n,i,od);if(s!==od)return s}let o=p6(e,t,n,i,od);if(o!==od)return o}return u6(t,n,i,r)}function p6(e,t,n,i,r){let o=oee(n);if(typeof o=="function"){if(!FF(t,e,i))return i&1?d6(r,n,i):u6(t,n,i,r);try{let s;if(s=o(i),s==null&&!(i&8))vS(n);else return s}finally{MF()}}else if(typeof o=="number"){let s=null,a=c6(e,t),l=Rm,c=i&1?t[ys][ws]:null;for((a===-1||i&4)&&(l=a===-1?yM(e,t):t[a+8],l===Rm||!FN(i,!1)?a=-1:(s=t[Wt],a=GS(l),t=HS(l,t)));a!==-1;){let d=t[Wt];if(RN(o,a,d.data)){let u=ree(a,t,n,s,i,c);if(u!==od)return u}l=t[a+8],l!==Rm&&FN(i,t[Wt].data[a+8]===c)&&RN(o,a,t)?(s=d,a=GS(l),t=HS(l,t)):a=-1}}return r}function ree(e,t,n,i,r,o){let s=t[Wt],a=s.data[e+8],l=i==null?wh(a)&&KF:i!=s&&(a.type&3)!==0,c=r&1&&o===a,d=OS(a,s,n,l,c);return d!==null?jC(t,s,d,a,r):od}function OS(e,t,n,i,r){let o=e.providerIndexes,s=t.data,a=o&1048575,l=e.directiveStart,c=e.directiveEnd,d=o>>20,u=i?a:a+d,h=r?a+d:c;for(let p=u;p<h;p++){let f=s[p];if(p<l&&n===f||p>=l&&f.type===n)return p}if(r){let p=s[l];if(p&&id(p)&&p.type===n)return l}return null}function jC(e,t,n,i,r){let o=e[n],s=t.data;if(o instanceof vf){let a=o;if(a.resolving){let p=PO(s[n]);throw JR(p)}let l=AN(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],d,u=a.injectImpl?Aa(a.injectImpl):null,h=FF(e,i,0);try{o=e[n]=a.factory(void 0,r,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&qJ(n,s[n],t)}finally{u!==null&&Aa(u),AN(l),a.resolving=!1,MF()}}return o}function oee(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(of)?e[of]:void 0;return typeof t=="number"?t>=0?t&a6:see:t}function RN(e,t,n){let i=1<<e;return!!(n[t+(e>>l6)]&i)}function FN(e,t){return!(e&2)&&!(e&1&&t)}var mf=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return h6(this._tNode,this._lView,t,Jp(i),n)}};function see(){return new mf(yo(),cn())}function xs(e){return ZC(()=>{let t=e.prototype.constructor,n=t[EC]||ZF(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let o=r[EC]||ZF(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function ZF(e){return $R(e)?()=>{let t=ZF(ko(e));return t&&t()}:ef(e)}function aee(e,t,n,i,r){let o=e,s=t;for(;o!==null&&s!==null&&s[Jt]&2048&&!xm(s);){let a=p6(o,s,n,i|2,od);if(a!==od)return a;let l=o.parent;if(!l){let c=s[dF];if(c){let d=c.get(n,od,i);if(d!==od)return d}l=f6(s),s=s[lf]}o=l}return r}function f6(e){let t=e[Wt],n=t.type;return n===2?t.declTNode:n===1?e[ws]:null}function SM(e){return iee(yo(),e)}function lee(){return Pm(yo(),cn())}function Pm(e,t){return new sn(hc(e,t))}var sn=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=lee}return e})();function g6(e){return e instanceof sn?e.nativeElement:e}function cee(){return this._results[Symbol.iterator]()}var jS=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new At}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=BO(t);(this._changesDetected=!NO(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=cee};function m6(e){return(e.flags&128)===128}var xM=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(xM||{}),v6=new Map,dee=0;function uee(){return dee++}function hee(e){v6.set(e[TC],e)}function XF(e){v6.delete(e[TC])}var MN="__ngContext__";function Mm(e,t){nd(t)?(e[MN]=t[TC],hee(t)):e[MN]=t}function C6(e){return w6(e[Sm])}function b6(e){return w6(e[cl])}function w6(e){for(;e!==null&&!uc(e);)e=e[cl];return e}var pee;function EM(e){pee=e}var Eh=new Ke("",{factory:()=>fee}),fee="ng";var ix=new Ke(""),yf=new Ke("",{providedIn:"platform",factory:()=>"unknown"}),XC=new Ke(""),km=new Ke("",{factory:()=>Z($t).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var y6="r";var S6="di";var x6=!1,E6=new Ke("",{factory:()=>x6});var gee=(e,t,n,i)=>{};function mee(e,t,n,i){gee(e,t,n,i)}function rx(e){return(e.flags&32)===32}var vee=()=>null;function D6(e,t,n=!1){return vee(e,t,n)}function _6(e,t){let n=e.contentQueries;if(n!==null){let i=Ht(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=e.data[s];NC(o),a.contentQueries(2,t[s],s)}}}finally{Ht(i)}}}function QF(e,t,n){NC(0);let i=Ht(null);try{t(e,n)}finally{Ht(i)}}function A6(e,t,n){if(hF(t)){let i=Ht(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Ht(i)}}}var mc=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(mc||{});var JF=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WR})`}};function ox(e){return e instanceof JF?e.changingThisBreaksApplicationSecurity:e}function Cee(e,t){return e.createText(t)}function bee(e,t,n){e.setValue(t,n)}function R6(e,t,n){return e.createElement(t,n)}function US(e,t,n,i,r){e.insertBefore(t,n,i,r)}function F6(e,t,n){e.appendChild(t,n)}function IN(e,t,n,i,r){i!==null?US(e,t,n,i,r):F6(e,t,n)}function M6(e,t,n,i){e.removeChild(null,t,n,i)}function wee(e,t,n){e.setAttribute(t,"style",n)}function yee(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function I6(e,t,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&XJ(e,t,i),r!==null&&yee(e,t,r),o!==null&&wee(e,t,o)}function T6(e){return e instanceof Function?e():e}function See(e,t,n){let i=e.length;for(;;){let r=e.indexOf(t,n);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}var P6="ng-template";function xee(e,t,n,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&See(t[r+1].toLowerCase(),n,0)!==-1)return!0}else if(DM(e))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function DM(e){return e.type===4&&e.value!==P6}function Eee(e,t,n){let i=e.type===4&&!n?P6:e.value;return t===i}function Dee(e,t,n){let i=4,r=e.attrs,o=r!==null?Ree(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!fc(i)&&!fc(l))return!1;if(s&&fc(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Eee(e,l,n)||l===""&&t.length===1){if(fc(i))return!1;s=!0}}else if(i&8){if(r===null||!xee(e,r,l,n)){if(fc(i))return!1;s=!0}}else{let c=t[++a],d=_ee(l,r,DM(e),n);if(d===-1){if(fc(i))return!1;s=!0;continue}if(c!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),i&2&&c!==u){if(fc(i))return!1;s=!0}}}}return fc(i)||s}function fc(e){return(e&1)===0}function _ee(e,t,n,i){if(t===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){let s=t[r];if(s===e)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Fee(t,e)}function k6(e,t,n=!1){for(let i=0;i<t.length;i++)if(Dee(e,t[i],n))return!0;return!1}function Aee(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if((n&1)===0)return t[n+1]}return null}function Ree(e){for(let t=0;t<e.length;t++){let n=e[t];if(o6(n))return t}return e.length}function Fee(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function Mee(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function TN(e,t){return e?":not("+t.trim()+")":t}function Iee(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!fc(s)&&(t+=TN(o,r),r=""),i=s,o=o||!fc(i);n++}return r!==""&&(t+=TN(o,r)),t}function Tee(e){return e.map(Iee).join(",")}function Pee(e){let t=[],n=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&t.push(o,e[++i]):r===8&&n.push(o);else{if(!fc(r))break;r=o}i++}return n.length&&t.push(1,...n),t}var Ia={};function _M(e,t,n,i,r,o,s,a,l,c,d){let u=Mr+i,h=u+r,p=kee(u,h),f=typeof c=="function"?c():c;return p[Wt]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:d}}function kee(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Ia);return n}function Lee(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=_M(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function AM(e,t,n,i,r,o,s,a,l,c,d){let u=t.blueprint.slice();return u[dc]=r,u[Jt]=i|4|128|8|64|1024,(c!==null||e&&e[Jt]&2048)&&(u[Jt]|=2048),gF(u),u[lo]=u[lf]=e,u[Fr]=n,u[cu]=s||e&&e[cu],u[Ai]=a||e&&e[Ai],u[lu]=l||e&&e[lu]||null,u[ws]=o,u[TC]=uee(),u[af]=d,u[dF]=c,u[ys]=t.type==2?e[ys]:u,u}function Oee(e,t,n){let i=hc(t,e),r=Lee(n),o=e[cu].rendererFactory,s=RM(e,AM(e,r,null,L6(n),i,t,null,o.createRenderer(i,n),null,null,null));return e[t.index]=s}function L6(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function O6(e,t,n,i){if(n===0)return-1;let r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function RM(e,t){return e[Sm]?e[cF][cl]=t:e[Sm]=t,e[cF]=t,t}function Xe(e=1){N6(rr(),cn(),rd()+e,!1)}function N6(e,t,n,i){if(!i)if((t[Jt]&3)===3){let o=e.preOrderCheckHooks;o!==null&&kS(t,o,n)}else{let o=e.preOrderHooks;o!==null&&LS(t,o,0,n)}Sh(n)}var sx=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(sx||{});function eM(e,t,n,i){let r=Ht(null);try{let[o,s,a]=e.inputs[n],l=null;(s&sx.SignalBased)!==0&&(l=t[o][wo]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),e.setInput!==null?e.setInput(t,l,i,n,o):JN(t,l,o,i)}finally{Ht(r)}}var uu=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(uu||{}),Nee;function FM(e,t){return Nee(e,t)}var Cf=new Set,ax=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(ax||{}),sd=new Ke(""),PN=new Set;function pu(e){PN.has(e)||(PN.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var lx=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}return e})(),MM=[0,1,2,3],IM=(()=>{class e{ngZone=Z(It);scheduler=Z(ed);errorHandler=Z(Jc,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Z(sd,{optional:!0})}execute(){let n=this.sequences.size>0;n&&di(Un.AfterRenderHooksStart),this.executing=!0;for(let i of MM)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&di(Un.AfterRenderHooksEnd)}register(n){let{view:i}=n;i!==void 0?((i[df]??=[]).push(n),ff(i),i[Jt]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(ax.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}return e})(),UC=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,i,r,o,s=null){this.impl=t,this.hooks=n,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[df];t&&(this.view[df]=t.filter(n=>n!==this))}};function Eo(e,t){let n=t?.injector??Z(_n);return pu("NgAfterNextRender"),Vee(e,n,t,!0)}function Bee(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function Vee(e,t,n,i){let r=t.get(lx);r.impl??=t.get(IM);let o=t.get(sd,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(Ss):null,a=t.get(Dm,null,{optional:!0}),l=new UC(r.impl,Bee(e),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var B6=new Ke("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:Z(ki)})});function V6(e,t,n){let i=e.get(B6);if(Array.isArray(t))for(let r of t)i.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(e)}function Gee(e,t){let n=e.get(B6);if(t.detachedLeaveAnimationFns){for(let i of t.detachedLeaveAnimationFns)n.queue.delete(i);t.detachedLeaveAnimationFns=void 0}}function Hee(e,t){for(let[n,i]of t)V6(e,i.animateFns)}function kN(e,t,n,i){let r=e?.[uf]?.enter;t!==null&&r&&r.has(n.index)&&Hee(i,r)}function Am(e,t,n,i,r,o,s,a){if(r!=null){let l,c=!1;uc(r)?l=r:nd(r)&&(c=!0,r=r[dc]);let d=dl(r);e===0&&i!==null?(kN(a,i,o,n),s==null?F6(t,i,d):US(t,i,d,s||null,!0)):e===1&&i!==null?(kN(a,i,o,n),US(t,i,d,s||null,!0)):e===2?LN(a,o,n,u=>{M6(t,d,c,u)}):e===3&&LN(a,o,n,()=>{t.destroyNode(d)}),l!=null&&Qee(t,e,n,l,o,i,s)}}function zee(e,t){G6(e,t),t[dc]=null,t[ws]=null}function jee(e,t,n,i,r,o){i[dc]=r,i[ws]=t,dx(e,i,n,1,r,o)}function G6(e,t){t[cu].changeDetectionScheduler?.notify(9),dx(e,t,t[Ai],2,null,null)}function Uee(e){let t=e[Sm];if(!t)return GF(e[Wt],e);for(;t;){let n=null;if(nd(t))n=t[Sm];else{let i=t[Cr];i&&(n=i)}if(!n){for(;t&&!t[cl]&&t!==e;)nd(t)&&GF(t[Wt],t),t=t[lo];t===null&&(t=e),nd(t)&&GF(t[Wt],t),n=t&&t[cl]}t=n}}function TM(e,t){let n=e[hf],i=n.indexOf(t);n.splice(i,1)}function cx(e,t){if(pf(t))return;let n=t[Ai];n.destroyNode&&dx(e,t,n,3,null,null),Uee(t)}function GF(e,t){if(pf(t))return;let n=Ht(null);try{t[Jt]&=-129,t[Jt]|=256,t[Fa]&&ph(t[Fa]),qee(e,t),$ee(e,t),t[Wt].type===1&&t[Ai].destroy();let i=t[Ch];if(i!==null&&uc(t[lo])){i!==t[lo]&&TM(i,t);let r=t[td];r!==null&&r.detachView(e)}XF(t)}finally{Ht(n)}}function LN(e,t,n,i){let r=e?.[uf];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);e&&Cf.add(e),V6(n,()=>{if(r.leave&&r.leave.has(t.index)){let s=r.leave.get(t.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:d}=c();a.push(d)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),Wee(e,i)}else e&&Cf.delete(e),i(!1)},r)}function Wee(e,t){let n=e[uf]?.running;if(n){n.then(()=>{e[uf].running=void 0,Cf.delete(e),t(!0)});return}t(!1)}function $ee(e,t){let n=e.cleanup,i=t[ym];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[n[s+1]];n[s].call(a)}i!==null&&(t[ym]=null);let r=t[ru];if(r!==null){t[ru]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=t[gh];if(o!==null){t[gh]=null;for(let s of o)s.destroy()}}function qee(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=t[n[i]];if(!(r instanceof vf)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];di(Un.LifecycleHookStart,a,l);try{l.call(a)}finally{di(Un.LifecycleHookEnd,a,l)}}else{di(Un.LifecycleHookStart,r,o);try{o.call(r)}finally{di(Un.LifecycleHookEnd,r,o)}}}}}function H6(e,t,n){return Kee(e,t.parent,n)}function Kee(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[dc];if(wh(i)){let{encapsulation:r}=e.data[i.directiveStart+i.componentOffset];if(r===mc.None||r===mc.Emulated)return null}return hc(i,n)}function z6(e,t,n){return Zee(e,t,n)}function Yee(e,t,n){return e.type&40?hc(e,n):null}var Zee=Yee,ON;function PM(e,t,n,i){let r=H6(e,i,t),o=t[Ai],s=i.parent||t[ws],a=z6(s,i,t);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)IN(o,r,n[l],a,!1);else IN(o,r,n,a,!1);ON!==void 0&&ON(o,i,t,n,r)}function HC(e,t){if(t!==null){let n=t.type;if(n&3)return hc(t,e);if(n&4)return tM(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return HC(e,i);{let r=e[t.index];return uc(r)?tM(-1,r):dl(r)}}else{if(n&128)return HC(e,t.next);if(n&32)return FM(t,e)()||dl(e[t.index]);{let i=j6(e,t);if(i!==null){if(Array.isArray(i))return i[0];let r=mh(e[ys]);return HC(r,i)}else return HC(e,t.next)}}}return null}function j6(e,t){if(t!==null){let i=e[ys][ws],r=t.projection;return i.projection[r]}return null}function tM(e,t){let n=Cr+e+1;if(n<t.length){let i=t[n],r=i[Wt].firstChild;if(r!==null)return HC(i,r)}return t[bh]}function kM(e,t,n,i,r,o,s){for(;n!=null;){let a=i[lu];if(n.type===128){n=n.next;continue}let l=i[n.index],c=n.type;if(s&&t===0&&(l&&Mm(dl(l),i),n.flags|=2),!rx(n))if(c&8)kM(e,t,n.child,i,r,o,!1),Am(t,e,a,r,l,n,o,i);else if(c&32){let d=FM(n,i),u;for(;u=d();)Am(t,e,a,r,u,n,o,i);Am(t,e,a,r,l,n,o,i)}else c&16?U6(e,t,i,n,r,o):Am(t,e,a,r,l,n,o,i);n=s?n.projectionNext:n.next}}function dx(e,t,n,i,r,o){kM(n,i,e.firstChild,t,r,o,!1)}function Xee(e,t,n){let i=t[Ai],r=H6(e,n,t),o=n.parent||t[ws],s=z6(o,n,t);U6(i,0,t,n,r,s)}function U6(e,t,n,i,r,o){let s=n[ys],l=s[ws].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];Am(t,e,n[lu],r,d,i,o,n)}else{let c=l,d=s[lo];m6(i)&&(c.flags|=128),kM(e,t,c,d,r,o,!0)}}function Qee(e,t,n,i,r,o,s){let a=i[bh],l=dl(i);a!==l&&Am(t,e,n,o,a,r,s);for(let c=Cr;c<i.length;c++){let d=i[c];dx(d[Wt],d,e,t,o,a)}}function Jee(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:uu.DashCase;r==null?e.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=uu.Important),e.setStyle(n,i,r,o))}}function W6(e,t,n,i,r){let o=rd(),s=i&2;try{Sh(-1),s&&t.length>Mr&&N6(e,t,Mr,!1);let a=s?Un.TemplateUpdateStart:Un.TemplateCreateStart;di(a,r,n),n(i,r)}finally{Sh(o);let a=s?Un.TemplateUpdateEnd:Un.TemplateCreateEnd;di(a,r,n)}}function LM(e,t,n){ote(e,t,n),(n.flags&64)===64&&ste(e,t,n)}function ux(e,t,n=hc){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(t,e):e[s];e[r++]=a}}}function ete(e,t,n,i){let o=i.get(E6,x6)||n===mc.ShadowDom||n===mc.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return tte(s),s}function tte(e){nte(e)}var nte=()=>null;function ite(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function $6(e,t,n,i,r,o){let s=t[Wt];if(OM(e,s,t,n,i)){wh(e)&&rte(t,e.index);return}e.type&3&&(n=ite(n)),q6(e,t,n,i,r,o)}function q6(e,t,n,i,r,o){if(e.type&3){let s=hc(e,t);i=o!=null?o(i,e.value||"",n):i,r.setProperty(s,n,i)}else e.type&12}function rte(e,t){let n=ul(t,e);n[Jt]&16||(n[Jt]|=64)}function ote(e,t,n){let i=n.directiveStart,r=n.directiveEnd;wh(n)&&Oee(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||zS(n,t);let o=n.initialInputs;for(let s=i;s<r;s++){let a=e.data[s],l=jC(t,e,s,n);if(Mm(l,t),o!==null&&dte(t,s-i,l,a,n,o),id(a)){let c=ul(n.index,t);c[Fr]=jC(t,e,s,n)}}}function ste(e,t,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=dN();try{Sh(o);for(let a=i;a<r;a++){let l=e.data[a],c=t[a];DS(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ate(l,c)}}finally{Sh(-1),DS(s)}}function ate(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function K6(e,t){let n=e.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];k6(t,o.selectors,!1)&&(i??=[],id(o)?i.unshift(o):i.push(o))}return i}function lte(e,t,n,i,r,o){let s=hc(e,t);cte(t[Ai],s,o,e.value,n,i,r)}function cte(e,t,n,i,r,o,s){if(o==null)e.removeAttribute(t,r,n);else{let a=s==null?Cm(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}function dte(e,t,n,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];eM(i,n,l,c)}}function Y6(e,t,n,i,r){let o=Mr+n,s=t[Wt],a=r(s,t,e,i,n);t[o]=a,Em(e,!0);let l=e.type===2;return l?(I6(t[Ai],a,e),(nN()===0||kC(e))&&Mm(a,t),iN()):Mm(a,t),FS()&&(!l||!rx(e))&&PM(s,t,a,e),e}function Z6(e){let t=e;return _F()?AF():(t=t.parent,Em(t,!1)),t}function ute(e,t){let n=e[lu];if(!n)return;let i;try{i=n.get(pc,null)}catch{i=null}i?.(t)}function OM(e,t,n,i,r){let o=e.inputs?.[i],s=e.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],u=t.data[c];eM(u,n[c],d,r),a=!0}if(o)for(let l of o){let c=n[l],d=t.data[l];eM(d,c,i,r),a=!0}return a}function hte(e,t){let n=ul(t,e),i=n[Wt];pte(i,n);let r=n[dc];r!==null&&n[af]===null&&(n[af]=D6(r,n[lu])),di(Un.ComponentStart);try{NM(i,n,n[Fr])}finally{di(Un.ComponentEnd,n[Fr])}}function pte(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function NM(e,t,n){AS(t);try{let i=e.viewQuery;i!==null&&QF(1,i,n);let r=e.template;r!==null&&W6(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[td]?.finishViewCreation(e),e.staticContentQueries&&_6(e,t),e.staticViewQueries&&QF(2,e.viewQuery,n);let o=e.components;o!==null&&fte(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Jt]&=-5,RS()}}function fte(e,t){for(let n=0;n<t.length;n++)hte(e,t[n])}function QC(e,t,n,i){let r=Ht(null);try{let o=t.tView,a=e[Jt]&4096?4096:16,l=AM(e,o,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[Ch]=c;let d=e[td];return d!==null&&(l[td]=d.createEmbeddedView(o)),NM(o,l,n),l}finally{Ht(r)}}function Im(e,t){return!t||t.firstChild===null||m6(e)}function WC(e,t,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&i.push(dl(o)),uc(o)&&X6(o,i);let s=n.type;if(s&8)WC(e,t,n.child,i);else if(s&32){let a=FM(n,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=j6(t,n);if(Array.isArray(a))i.push(...a);else{let l=mh(t[ys]);WC(l[Wt],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function X6(e,t){for(let n=Cr;n<e.length;n++){let i=e[n],r=i[Wt].firstChild;r!==null&&WC(i[Wt],i,r,t)}e[bh]!==e[dc]&&t.push(e[bh])}function Q6(e){if(e[df]!==null){for(let t of e[df])t.impl.addSequence(t);e[df].length=0}}var J6=[];function gte(e){return e[Fa]??mte(e)}function mte(e){let t=J6.pop()??Object.create(Cte);return t.lView=e,t}function vte(e){e.lView[Fa]!==e&&(e.lView=null,J6.push(e))}var Cte=ce(T({},rm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ff(e.lView)},consumerOnSignalRead(){this.lView[Fa]=this}});function bte(e){let t=e[Fa]??Object.create(wte);return t.lView=e,t}var wte=ce(T({},rm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=mh(e.lView);for(;t&&!e8(t[Wt]);)t=mh(t);t&&mF(t)},consumerOnSignalRead(){this.lView[Fa]=this}});function e8(e){return e.type!==2}function t8(e){if(e[gh]===null)return;let t=!0;for(;t;){let n=!1;for(let i of e[gh])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=n&&!!(e[Jt]&8192)}}var yte=100;function n8(e,t=0){let i=e[cu].rendererFactory,r=!1;r||i.begin?.();try{Ste(e,t)}finally{r||i.end?.()}}function Ste(e,t){let n=RF();try{_C(!0),nM(e,t);let i=0;for(;OC(e);){if(i===yte)throw new ut(103,!1);i++,nM(e,1)}}finally{_C(n)}}function xte(e,t,n,i){if(pf(t))return;let r=t[Jt],o=!1,s=!1;AS(t);let a=!0,l=null,c=null;o||(e8(e)?(c=gte(t),l=$p(c)):F1()===null?(a=!1,c=bte(t),l=$p(c)):t[Fa]&&(ph(t[Fa]),t[Fa]=null));try{gF(t),aN(e.bindingStartIndex),n!==null&&W6(e,t,n,2,i);let d=(r&3)===3;if(!o)if(d){let p=e.preOrderCheckHooks;p!==null&&kS(t,p,null)}else{let p=e.preOrderHooks;p!==null&&LS(t,p,0,null),BF(t,0)}if(s||Ete(t),t8(t),i8(t,0),e.contentQueries!==null&&_6(e,t),!o)if(d){let p=e.contentCheckHooks;p!==null&&kS(t,p)}else{let p=e.contentHooks;p!==null&&LS(t,p,1),BF(t,1)}_te(e,t);let u=e.components;u!==null&&o8(t,u,0);let h=e.viewQuery;if(h!==null&&QF(2,h,i),!o)if(d){let p=e.viewCheckHooks;p!==null&&kS(t,p)}else{let p=e.viewHooks;p!==null&&LS(t,p,2),BF(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[yS]){for(let p of t[yS])p();t[yS]=null}o||(Q6(t),t[Jt]&=-73)}catch(d){throw o||ff(t),d}finally{c!==null&&(sm(c,l),a&&vte(c)),RS()}}function i8(e,t){for(let n=C6(e);n!==null;n=b6(n))for(let i=Cr;i<n.length;i++){let r=n[i];r8(r,t)}}function Ete(e){for(let t=C6(e);t!==null;t=b6(t)){if(!(t[Jt]&2))continue;let n=t[hf];for(let i=0;i<n.length;i++){let r=n[i];mF(r)}}}function Dte(e,t,n){di(Un.ComponentStart);let i=ul(t,e);try{r8(i,n)}finally{di(Un.ComponentEnd,i[Fr])}}function r8(e,t){SS(e)&&nM(e,t)}function nM(e,t){let i=e[Wt],r=e[Jt],o=e[Fa],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&am(o)),s||=!1,o&&(o.dirty=!1),e[Jt]&=-9217,s)xte(i,e,i.template,e[Fr]);else if(r&8192){let a=Ht(null);try{t8(e),i8(e,1);let l=i.components;l!==null&&o8(e,l,1),Q6(e)}finally{Ht(a)}}}function o8(e,t,n){for(let i=0;i<t.length;i++)Dte(e,t[i],n)}function _te(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Sh(~r);else{let o=r,s=n[++i],a=n[++i];cN(s,o);let l=t[o];di(Un.HostBindingsUpdateStart,l);try{a(2,l)}finally{di(Un.HostBindingsUpdateEnd,l)}}}}finally{Sh(-1)}}function BM(e,t){let n=RF()?64:1088;for(e[cu].changeDetectionScheduler?.notify(t);e;){e[Jt]|=n;let i=mh(e);if(xm(e)&&!i)return e;e=i}return null}function s8(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function a8(e,t){let n=Cr+t;if(n<e.length)return e[n]}function JC(e,t,n,i=!0){let r=t[Wt];if(Ate(r,t,e,n),i){let s=tM(n,e),a=t[Ai],l=a.parentNode(e[bh]);l!==null&&jee(r,e[ws],a,t,l,s)}let o=t[af];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function l8(e,t){let n=$C(e,t);return n!==void 0&&cx(n[Wt],n),n}function $C(e,t){if(e.length<=Cr)return;let n=Cr+t,i=e[n];if(i){let r=i[Ch];r!==null&&r!==e&&TM(r,i),t>0&&(e[n-1][cl]=i[cl]);let o=MC(e,Cr+t);zee(i[Wt],i);let s=o[td];s!==null&&s.detachView(o[Wt]),i[lo]=null,i[cl]=null,i[Jt]&=-129}return i}function Ate(e,t,n,i){let r=Cr+i,o=n.length;i>0&&(n[r-1][cl]=t),i<o-Cr?(t[cl]=n[r],tF(n,Cr+i,t)):(n.push(t),t[cl]=null),t[lo]=n;let s=t[Ch];s!==null&&n!==s&&c8(s,t);let a=t[td];a!==null&&a.insertView(e),xS(t),t[Jt]|=128}function c8(e,t){let n=e[hf],i=t[lo];if(nd(i))e[Jt]|=2;else{let r=i[lo][ys];t[ys]!==r&&(e[Jt]|=2)}n===null?e[hf]=[t]:n.push(t)}var xh=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[Wt];return WC(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Fr]}set context(t){this._lView[Fr]=t}get destroyed(){return pf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[lo];if(uc(t)){let n=t[PC],i=n?n.indexOf(this):-1;i>-1&&($C(t,i),MC(n,i))}this._attachedToViewContainer=!1}cx(this._lView[Wt],this._lView)}onDestroy(t){vF(this._lView,t)}markForCheck(){BM(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Jt]&=-129}reattach(){xS(this._lView),this._lView[Jt]|=128}detectChanges(){this._lView[Jt]|=1024,n8(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ut(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=xm(this._lView),n=this._lView[Ch];n!==null&&!t&&TM(n,this._lView),G6(this._lView[Wt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ut(902,!1);this._appRef=t;let n=xm(this._lView),i=this._lView[Ch];i!==null&&!n&&c8(i,this._lView),xS(this._lView)}};var Ma=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Rte;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let o=QC(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new xh(o)}}return e})();function Rte(){return hx(yo(),cn())}function hx(e,t){return e.type&4?new Ma(t,e,Pm(e,t)):null}function Lm(e,t,n,i,r){let o=e.data[t];if(o===null)o=Fte(e,t,n,i,r),lN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=rN();o.injectorIndex=s===null?-1:s.injectorIndex}return Em(o,!0),o}function Fte(e,t,n,i,r){let o=DF(),s=_F(),a=s?o:o&&o.parent,l=e.data[t]=Ite(e,a,n,t,i,r);return Mte(e,l,o,s),l}function Mte(e,t,n,i){e.firstChild===null&&(e.firstChild=t),n!==null&&(i?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function Ite(e,t,n,i,r,o){let s=t?t.injectorIndex:-1,a=0;return SF()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Tte(e){let t=e[uF]??[],i=e[lo][Ai],r=[];for(let o of t)o.data[S6]!==void 0?r.push(o):Pte(o,i);e[uF]=r}function Pte(e,t){let n=0,i=e.firstChild;if(i){let r=e.data[y6];for(;n<r;){let o=i.nextSibling;M6(t,i,!1),i=o,n++}}}var kte=()=>null,Lte=()=>null;function WS(e,t){return kte(e,t)}function d8(e,t,n){return Lte(e,t,n)}var u8=class{},px=class{},iM=class{resolveComponentFactory(t){throw new ut(917,!1)}},eb=class{static NULL=new iM},xo=class{},co=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>Ote()}return e})();function Ote(){let e=cn(),t=yo(),n=ul(t.index,e);return(nd(n)?n:e)[Ai]}var h8=(()=>{class e{static \u0275prov=Be({token:e,providedIn:"root",factory:()=>null})}return e})();var NS={},rM=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){let r=this.injector.get(t,NS,i);return r!==NS||n===NS?r:this.parentInjector.get(t,n,i)}};function $S(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=gS(r,a);else if(o==2){let l=a,c=t[++s];i=gS(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Pt(e,t=0){let n=cn();if(n===null)return Tt(e,t);let i=yo();return h6(i,n,ko(e),t)}function VM(){let e="invalid";throw new Error(e)}function p8(e,t,n,i,r){let o=i===null?null:{"":-1},s=r(e,n);if(s!==null){let a=s,l=null,c=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,l,c]=d.resolveHostDirectives(s);break}Vte(e,t,n,a,o,l,c)}o!==null&&i!==null&&Nte(n,i,o)}function Nte(e,t,n){let i=e.localNames=[];for(let r=0;r<t.length;r+=2){let o=n[t[r+1]];if(o==null)throw new ut(-301,!1);i.push(t[r],o)}}function Bte(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Vte(e,t,n,i,r,o,s){let a=i.length,l=null;for(let h=0;h<a;h++){let p=i[h];l===null&&id(p)&&(l=p,Bte(e,n,h)),YF(zS(n,t),e,p.type)}Wte(n,e.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let h=0;h<a;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let c=!1,d=!1,u=O6(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=i[h];if(n.mergedAttrs=Fm(n.mergedAttrs,p.hostAttrs),Hte(e,n,t,u,p),Ute(u,p,r),s!==null&&s.has(p)){let[g,C]=s.get(p);n.directiveToIndex.set(p.type,[u,g+n.directiveStart,C+n.directiveStart])}else(o===null||!o.has(p))&&n.directiveToIndex.set(p.type,u);p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let f=p.type.prototype;!c&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),c=!0),!d&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),d=!0),u++}Gte(e,n,o)}function Gte(e,t,n){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=e.data[i];if(n===null||!n.has(r))NN(0,t,r,i),NN(1,t,r,i),VN(t,i,!1);else{let o=n.get(r);BN(0,t,o,i),BN(1,t,o,i),VN(t,i,!0)}}}function NN(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(i),f8(t,o)}}function BN(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),f8(t,s)}}function f8(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function VN(e,t,n){let{attrs:i,inputs:r,hostDirectiveInputs:o}=e;if(i===null||!n&&r===null||n&&o===null||DM(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&r.hasOwnProperty(l)){let c=r[l];for(let d of c)if(d===t){s??=[],s.push(l,i[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===t){s??=[],s.push(c[d+1],i[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function Hte(e,t,n,i,r){e.data[i]=r;let o=r.factory||(r.factory=ef(r.type,!0)),s=new vf(o,id(r),Pt,null);e.blueprint[i]=s,n[i]=s,zte(e,t,i,O6(e,n,r.hostVars,Ia),r)}function zte(e,t,n,i,r){let o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;jte(s)!=a&&s.push(a),s.push(n,i,o)}}function jte(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Ute(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;id(t)&&(n[""]=e)}}function Wte(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function g8(e,t,n,i,r,o,s,a){let l=t[Wt],c=l.consts,d=hl(c,s),u=Lm(l,e,n,i,d);return o&&p8(l,t,u,hl(c,a),r),u.mergedAttrs=Fm(u.mergedAttrs,u.attrs),u.attrs!==null&&$S(u,u.attrs,!1),u.mergedAttrs!==null&&$S(u,u.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,u),u}function m8(e,t){i6(e,t),hF(t)&&e.queries.elementEnd(t)}function $te(e,t,n,i,r,o){let s=t.consts,a=hl(s,r),l=Lm(t,e,n,i,a);if(l.mergedAttrs=Fm(l.mergedAttrs,l.attrs),o!=null){let c=hl(s,o);l.localNames=[];for(let d=0;d<c.length;d+=2)l.localNames.push(c[d],-1)}return l.attrs!==null&&$S(l,l.attrs,!1),l.mergedAttrs!==null&&$S(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function GM(e){return C8(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function v8(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function C8(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function vc(e,t,n){if(n===Ia)return!1;let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function qte(e,t,n,i){let r=vc(e,t,n);return vc(e,t+1,i)||r}function BS(e,t,n){return function i(r){let o=wh(e)?ul(e.index,t):t;BM(o,5);let s=t[Fr],a=GN(t,s,n,r),l=i.__ngNextListenerFn__;for(;l;)a=GN(t,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function GN(e,t,n,i){let r=Ht(null);try{return di(Un.OutputStart,t,n),n(i)!==!1}catch(o){return ute(e,o),!1}finally{di(Un.OutputEnd,t,n),Ht(r)}}function b8(e,t,n,i,r,o,s,a){let l=kC(e),c=!1,d=null;if(!i&&l&&(d=Yte(t,n,o,e.index)),d!==null){let u=d.__ngLastListenerFn__||d;u.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,c=!0}else{let u=hc(e,n),h=i?i(u):u;mee(n,h,o,a);let p=r.listen(h,o,a);if(!Kte(o)){let f=i?g=>i(dl(g[e.index])):e.index;w8(f,t,n,o,a,p,!1)}}return c}function Kte(e){return e.startsWith("animation")||e.startsWith("transition")}function Yte(e,t,n,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=t[ym],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function w8(e,t,n,i,r,o,s){let a=t.firstCreatePass?bF(t):null,l=CF(n),c=l.length;l.push(r,o),a&&a.push(i,e,c,(c+1)*(s?-1:1))}function HN(e,t,n,i,r,o){let s=t[n],a=t[Wt],c=a.data[n].outputs[i],u=s[c].subscribe(o);w8(e.index,a,t,r,o,u,!0)}var oM=Symbol("BINDING");var qS=class extends eb{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=su(t);return new bf(n,this.ngModule)}};function Zte(e){return Object.keys(e).map(t=>{let[n,i,r]=e[t],o={propName:n,templateName:t,isSignal:(i&sx.SignalBased)!==0};return r&&(o.transform=r),o})}function Xte(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Qte(e,t,n){let i=t instanceof ki?t:t?.injector;return i&&e.getStandaloneInjector!==null&&(i=e.getStandaloneInjector(i)||i),i?new rM(n,i):n}function Jte(e){let t=e.get(xo,null);if(t===null)throw new ut(407,!1);let n=e.get(h8,null),i=e.get(ed,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function ene(e,t){let n=y8(e);return R6(t,n,n==="svg"?pF:n==="math"?YO:null)}function y8(e){return(e.selectors[0][0]||"div").toLowerCase()}var bf=class extends px{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Zte(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Xte(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Tee(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,i,r,o,s){di(Un.DynamicComponentStart);let a=Ht(null);try{let l=this.componentDef,c=tne(i,l,s,o),d=Qte(l,r||this.ngModule,t),u=Jte(d),h=u.rendererFactory.createRenderer(null,l),p=i?ete(h,i,l.encapsulation,d):ene(l,h),f=s?.some(zN)||o?.some(m=>typeof m!="function"&&m.bindings.some(zN)),g=AM(null,c,null,512|L6(l),null,null,u,h,d,null,D6(p,d,!0));g[Mr]=p,AS(g);let C=null;try{let m=g8(Mr,g,2,"#host",()=>c.directiveRegistry,!0,0);I6(h,p,m),Mm(p,g),LM(c,g,m),A6(c,m,g),m8(c,m),n!==void 0&&ine(m,this.ngContentSelectors,n),C=ul(m.index,g),g[Fr]=C[Fr],NM(c,g,null)}catch(m){throw C!==null&&XF(C),XF(g),m}finally{di(Un.DynamicComponentEnd),RS()}return new KS(this.componentType,g,!!f)}finally{Ht(a)}}};function tne(e,t,n,i){let r=e?["ng-version","21.0.3"]:Pee(t.selectors[0]),o=null,s=null,a=0;if(n)for(let d of n)a+=d[oM].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(i)for(let d=0;d<i.length;d++){let u=i[d];if(typeof u!="function")for(let h of u.bindings){a+=h[oM].requiredVars;let p=d+1;h.create&&(h.targetIdx=p,(o??=[]).push(h)),h.update&&(h.targetIdx=p,(s??=[]).push(h))}}let l=[t];if(i)for(let d of i){let u=typeof d=="function"?d:d.type,h=oF(u);l.push(h)}return _M(0,null,nne(o,s),1,a,l,null,null,null,[r],null)}function nne(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let i of e)i.create();if(n&2&&t)for(let i of t)i.update()}}function zN(e){let t=e[oM].kind;return t==="input"||t==="twoWay"}var KS=class extends u8{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=LC(n[Wt],Mr),this.location=Pm(this._tNode,n),this.instance=ul(this._tNode.index,n)[Fr],this.hostView=this.changeDetectorRef=new xh(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView,o=OM(i,r[Wt],r,t,n);this.previousInputValues.set(t,n);let s=ul(i.index,r);BM(s,1)}get injector(){return new mf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function ine(e,t,n){let i=e.projection=[];for(let r=0;r<t.length;r++){let o=n[r];i.push(o!=null&&o.length?Array.from(o):null)}}var qr=(()=>{class e{static __NG_ELEMENT_ID__=rne}return e})();function rne(){let e=yo();return x8(e,cn())}var one=qr,S8=class extends one{_lContainer;_hostTNode;_hostLView;constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Pm(this._hostTNode,this._hostLView)}get injector(){return new mf(this._hostTNode,this._hostLView)}get parentInjector(){let t=yM(this._hostTNode,this._hostLView);if(s6(t)){let n=HS(t,this._hostLView),i=GS(t),r=n[Wt].data[i+8];return new mf(r,n)}else return new mf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=jN(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Cr}createEmbeddedView(t,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=WS(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,Im(this._hostTNode,s)),a}createComponent(t,n,i,r,o,s,a){let l=t&&!jJ(t),c;if(l)c=n;else{let C=n||{};c=C.index,i=C.injector,r=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef,s=C.directives,a=C.bindings}let d=l?t:new bf(su(t)),u=i||this.parentInjector;if(!o&&d.ngModule==null){let m=(l?u:this.parentInjector).get(ki,null);m&&(o=m)}let h=su(d.componentType??{}),p=WS(this._lContainer,h?.id??null),f=p?.firstChild??null,g=d.create(u,r,f,o,s,a);return this.insertImpl(g.hostView,c,Im(this._hostTNode,p)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let r=t._lView;if(QO(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[lo],c=new S8(l,l[ws],l[lo]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return JC(s,r,o,i),t.attachToViewContainerRef(),tF(HF(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=jN(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=$C(this._lContainer,n);i&&(MC(HF(this._lContainer),n),cx(i[Wt],i))}detach(t){let n=this._adjustIndex(t,-1),i=$C(this._lContainer,n);return i&&MC(HF(this._lContainer),n)!=null?new xh(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function jN(e){return e[PC]}function HF(e){return e[PC]||(e[PC]=[])}function x8(e,t){let n,i=t[e.index];return uc(i)?n=i:(n=s8(i,t,null,e),t[e.index]=n,RM(t,n)),ane(n,t,e,i),new S8(n,e,t)}function sne(e,t){let n=e[Ai],i=n.createComment(""),r=hc(t,e),o=n.parentNode(r);return US(n,o,i,n.nextSibling(r),!1),i}var ane=dne,lne=()=>!1;function cne(e,t,n){return lne(e,t,n)}function dne(e,t,n,i){if(e[bh])return;let r;n.type&8?r=dl(i):r=sne(t,n),e[bh]=r}var sM=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},aM=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)zM(t,n).matches!==null&&this.queries[n].setDirty()}},YS=class{flags;read;predicate;constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=gne(t):this.predicate=t}},lM=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},cM=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,n,une(n,o)),this.matchTNodeWithReadOption(t,n,OS(n,t,o,!1,!1))}else i===Ma?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,OS(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===sn||r===qr||r===Ma&&n.type&4)this.addMatch(n.index,-2);else{let o=OS(n,t,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function une(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function hne(e,t){return e.type&11?Pm(e,t):e.type&4?hx(e,t):null}function pne(e,t,n,i){return n===-1?hne(t,e):n===-2?fne(e,t,i):jC(e,e[Wt],n,t)}function fne(e,t,n){if(n===sn)return Pm(t,e);if(n===Ma)return hx(t,e);if(n===qr)return x8(t,e)}function E8(e,t,n,i){let r=t[td].queries[i];if(r.matches===null){let o=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(pne(t,d,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function dM(e,t,n,i){let r=e.queries.getByIndex(n),o=r.matches;if(o!==null){let s=E8(e,t,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],d=t[-l];for(let u=Cr;u<d.length;u++){let h=d[u];h[Ch]===h[lo]&&dM(h[Wt],h,c,i)}if(d[hf]!==null){let u=d[hf];for(let h=0;h<u.length;h++){let p=u[h];dM(p[Wt],p,c,i)}}}}}return i}function HM(e,t){return e[td].queries[t].queryList}function D8(e,t,n){let i=new jS((n&4)===4);return tN(e,t,i,i.destroy),(t[td]??=new aM).queries.push(new sM(i))-1}function _8(e,t,n){let i=rr();return i.firstCreatePass&&(R8(i,new YS(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),D8(i,cn(),t)}function A8(e,t,n,i){let r=rr();if(r.firstCreatePass){let o=yo();R8(r,new YS(t,n,i),o.index),mne(r,e),(n&2)===2&&(r.staticContentQueries=!0)}return D8(r,cn(),n)}function gne(e){return e.split(",").map(t=>t.trim())}function R8(e,t,n){e.queries===null&&(e.queries=new lM),e.queries.track(new cM(t,n))}function mne(e,t){let n=e.contentQueries||(e.contentQueries=[]),i=n.length?n[n.length-1]:-1;t!==i&&n.push(e.queries.length-1,t)}function zM(e,t){return e.queries.getByIndex(t)}function F8(e,t){let n=e[Wt],i=zM(n,t);return i.crossesNgTemplate?dM(n,e,t,[]):E8(n,e,i,t)}function M8(e,t,n){let i,r=dC(()=>{i._dirtyCounter();let o=vne(i,e);if(t&&o===void 0)throw new ut(-951,!1);return o});return i=r[wo],i._dirtyCounter=gn(0),i._flatValue=void 0,r}function jM(e){return M8(!0,!1,e)}function UM(e){return M8(!0,!0,e)}function I8(e,t){let n=e[wo];n._lView=cn(),n._queryIndex=t,n._queryList=HM(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function vne(e,t){let n=e._lView,i=e._queryIndex;if(n===void 0||i===void 0||n[Jt]&4)return t?void 0:Qo;let r=HM(n,i),o=F8(n,i);return r.reset(o,g6),t?r.first:r._changesDetected||e._flatValue===void 0?e._flatValue=r.toArray():e._flatValue}var hu=class{},fx=class{};var ZS=class extends hu{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new qS(this);constructor(t,n,i,r=!0){super(),this.ngModuleType=t,this._parent=n;let o=rF(t);this._bootstrapComponents=T6(o.bootstrap),this._r3Injector=IF(t,n,[{provide:hu,useValue:this},{provide:eb,useValue:this.componentFactoryResolver},...i],ou(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},XS=class extends fx{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new ZS(this.moduleType,t,[])}};var qC=class extends hu{injector;componentFactoryResolver=new qS(this);instance=null;constructor(t){super();let n=new nf([...t.providers,{provide:hu,useValue:this},{provide:eb,useValue:this.componentFactoryResolver}],t.parent||wm(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function tb(e,t,n=null){return new qC({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Cne=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=sF(!1,n.type),r=i.length>0?tb([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Be({token:e,providedIn:"environment",factory:()=>new e(Tt(ki))})}return e})();function Kt(e){return ZC(()=>{let t=T8(e),n=ce(T({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===xM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(Cne).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||mc.Emulated,styles:e.styles||Qo,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&pu("NgStandalone"),P8(n);let i=e.dependencies;return n.directiveDefs=UN(i,bne),n.pipeDefs=UN(i,HO),n.id=Sne(n),n})}function bne(e){return su(e)||oF(e)}function kn(e){return ZC(()=>({type:e.type,bootstrap:e.bootstrap||Qo,declarations:e.declarations||Qo,imports:e.imports||Qo,exports:e.exports||Qo,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function wne(e,t){if(e==null)return vh;let n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=sx.None,l=null),n[o]=[i,a,l],t[o]=s}return n}function yne(e){if(e==null)return vh;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function zt(e){return ZC(()=>{let t=T8(e);return P8(t),t})}function T8(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||vh,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Qo,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:wne(e.inputs,t),outputs:yne(e.outputs),debugInfo:null}}function P8(e){e.features?.forEach(t=>t(e))}function UN(e,t){return e?()=>{let n=typeof e=="function"?e():e,i=[];for(let r of n){let o=t(r);o!==null&&i.push(o)}return i}:null}function Sne(e){let t=0,n=typeof e.consts=="function"?"":e.consts,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function xne(e){return Object.getPrototypeOf(e.prototype).constructor}function br(e){let t=xne(e.type),n=!0,i=[e];for(;t;){let r;if(id(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ut(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);let s=e;s.inputs=zF(e.inputs),s.declaredInputs=zF(e.declaredInputs),s.outputs=zF(e.outputs);let a=r.hostBindings;a&&Rne(e,a);let l=r.viewQuery,c=r.contentQueries;if(l&&_ne(e,l),c&&Ane(e,c),Ene(e,r),TO(e.outputs,r.outputs),id(r)&&r.data.animation){let d=e.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===br&&(n=!1)}}t=Object.getPrototypeOf(t)}Dne(i)}function Ene(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n])}}function Dne(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Fm(r.hostAttrs,n=Fm(n,r.hostAttrs))}}function zF(e){return e===vh?{}:e===Qo?[]:e}function _ne(e,t){let n=e.viewQuery;n?e.viewQuery=(i,r)=>{t(i,r),n(i,r)}:e.viewQuery=t}function Ane(e,t){let n=e.contentQueries;n?e.contentQueries=(i,r,o)=>{t(i,r,o),n(i,r,o)}:e.contentQueries=t}function Rne(e,t){let n=e.hostBindings;n?e.hostBindings=(i,r)=>{t(i,r),n(i,r)}:e.hostBindings=t}function k8(e,t,n,i,r,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Fm(e.mergedAttrs,e.attrs);let d=e.tView=_M(2,e,r,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),d.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),Em(e,!1);let l=Mne(n,t,e,i);FS()&&PM(n,t,l,e),Mm(l,t);let c=s8(l,t,l,e);t[i+Mr]=c,RM(t,c),cne(c,e,t)}function Fne(e,t,n,i,r,o,s,a,l,c,d){let u=n+Mr,h;return t.firstCreatePass?(h=Lm(t,u,4,s||null,a||null),yF()&&p8(t,e,h,hl(t.consts,c),K6),i6(t,h)):h=t.data[u],k8(h,e,t,n,i,r,o,l),kC(h)&&LM(t,e,h),c!=null&&ux(e,h,d),h}function KC(e,t,n,i,r,o,s,a,l,c,d){let u=n+Mr,h;if(t.firstCreatePass){if(h=Lm(t,u,4,s||null,a||null),c!=null){let p=hl(t.consts,c);h.localNames=[];for(let f=0;f<p.length;f+=2)h.localNames.push(p[f],-1)}}else h=t.data[u];return k8(h,e,t,n,i,r,o,l),c!=null&&ux(e,h,d),h}function Jo(e,t,n,i,r,o,s,a){let l=cn(),c=rr(),d=hl(c.consts,o);return Fne(l,c,e,t,n,i,r,d,void 0,s,a),Jo}var Mne=Ine;function Ine(e,t,n,i){return MS(!0),t[Ai].createComment("")}var WM=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function L8(e){return typeof e=="function"&&e[wo]!==void 0}function $M(e){return L8(e)&&typeof e.set=="function"}var qM=new Ke("");function Sf(e){return!!e&&typeof e.then=="function"}function O8(e){return!!e&&typeof e.subscribe=="function"}var N8=new Ke("");var KM=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=Z(N8,{optional:!0})??[];injector=Z(_n);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=Lo(this.injector,r);if(Sf(o))n.push(o);else if(O8(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gx=new Ke("");function B8(){pR(()=>{let e="";throw new ut(600,e)})}function V8(e){return e.isBoundToModule}var Tne=10;var Ta=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Z(pc);afterRenderManager=Z(lx);zonelessEnabled=Z(GC);rootEffectScheduler=Z(TS);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new At;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Z(du);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(yn(n=>!n))}constructor(){Z(sd,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=Z(ki);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=_n.NULL){return this._injector.get(It).run(()=>{di(Un.BootstrapComponentStart);let s=n instanceof px;if(!this._injector.get(KM).done){let f="";throw new ut(405,f)}let l;s?l=n:l=this._injector.get(eb).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=V8(l)?void 0:this._injector.get(hu),d=i||l.selector,u=l.create(r,[],d,c),h=u.location.nativeElement,p=u.injector.get(qM,null);return p?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),zC(this.components,u),p?.unregisterApplication(h)}),this._loadComponent(u),di(Un.BootstrapComponentEnd,u),u})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){di(Un.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(ax.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw di(Un.ChangeDetectionEnd),new ut(101,!1);let n=Ht(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ht(n),this.afterTick.next(),di(Un.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Tne;){di(Un.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{di(Un.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!OC(r))continue;let o=i&&!this.zonelessEnabled?0:1;n8(r,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>OC(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;zC(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(gx,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>zC(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ut(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function zC(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Yi(e,t,n,i){let r=cn(),o=yh();if(vc(r,o,t)){let s=rr(),a=BC();lte(a,r,e,t,n,i)}return Yi}var i$e=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var uM=class{destroy(t){}updateValue(t,n){}swap(t,n){let i=Math.min(t,n),r=Math.max(t,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(t,n){this.attach(n,this.detach(t))}};function jF(e,t,n,i,r){return e===n&&Object.is(t,i)?1:Object.is(r(e,t),r(n,i))?-1:0}function Pne(e,t,n,i){let r,o,s=0,a=e.length-1,l=void 0;if(Array.isArray(t)){Ht(i);let c=t.length-1;for(Ht(null);s<=a&&s<=c;){let d=e.at(s),u=t[s],h=jF(s,d,s,u,n);if(h!==0){h<0&&e.updateValue(s,u),s++;continue}let p=e.at(a),f=t[c],g=jF(a,p,c,f,n);if(g!==0){g<0&&e.updateValue(a,f),a--,c--;continue}let C=n(s,d),m=n(a,p),w=n(s,u);if(Object.is(w,m)){let x=n(c,f);Object.is(x,C)?(e.swap(s,a),e.updateValue(a,f),c--,a--):e.move(a,s),e.updateValue(s,u),s++;continue}if(r??=new QS,o??=$N(e,s,a,n),hM(e,r,s,w))e.updateValue(s,u),s++,a++;else if(o.has(w))r.set(C,e.detach(s)),a--;else{let x=e.create(s,t[s]);e.attach(s,x),s++,a++}}for(;s<=c;)WN(e,r,n,s,t[s]),s++}else if(t!=null){Ht(i);let c=t[Symbol.iterator]();Ht(null);let d=c.next();for(;!d.done&&s<=a;){let u=e.at(s),h=d.value,p=jF(s,u,s,h,n);if(p!==0)p<0&&e.updateValue(s,h),s++,d=c.next();else{r??=new QS,o??=$N(e,s,a,n);let f=n(s,h);if(hM(e,r,s,f))e.updateValue(s,h),s++,a++,d=c.next();else if(!o.has(f))e.attach(s,e.create(s,h)),s++,a++,d=c.next();else{let g=n(s,u);r.set(g,e.detach(s)),a--}}}for(;!d.done;)WN(e,r,n,e.length,d.value),d=c.next()}for(;s<=a;)e.destroy(e.detach(a--));r?.forEach(c=>{e.destroy(c)})}function hM(e,t,n,i){return t!==void 0&&t.has(i)?(e.attach(n,t.get(i)),t.delete(i),!0):!1}function WN(e,t,n,i,r){if(hM(e,t,i,n(i,r)))e.updateValue(i,r);else{let o=e.create(i,r);e.attach(i,o)}}function $N(e,t,n,i){let r=new Set;for(let o=t;o<=n;o++)r.add(i(o,e.at(o)));return r}var QS=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,i]of this.kvMap)if(t(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,n)}}};function wr(e,t,n,i,r,o,s,a){pu("NgControlFlow");let l=cn(),c=rr(),d=hl(c.consts,o);return KC(l,c,e,t,n,i,r,d,256,s,a),YM}function YM(e,t,n,i,r,o,s,a){pu("NgControlFlow");let l=cn(),c=rr(),d=hl(c.consts,o);return KC(l,c,e,t,n,i,r,d,512,s,a),YM}function yr(e,t){pu("NgControlFlow");let n=cn(),i=yh(),r=n[i]!==Ia?n[i]:-1,o=r!==-1?JS(n,Mr+r):void 0,s=0;if(vc(n,i,e)){let a=Ht(null);try{if(o!==void 0&&l8(o,s),e!==-1){let l=Mr+e,c=JS(n,l),d=mM(n[Wt],l),u=d8(c,d,n),h=QC(n,d,t,{dehydratedView:u});JC(c,h,s,Im(d,u))}}finally{Ht(a)}}else if(o!==void 0){let a=a8(o,s);a!==void 0&&(a[Fr]=t)}}var pM=class{lContainer;$implicit;$index;constructor(t,n,i){this.lContainer=t,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Cr}};var fM=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,i){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=i}};function nb(e,t,n,i,r,o,s,a,l,c,d,u,h){pu("NgControlFlow");let p=cn(),f=rr(),g=l!==void 0,C=cn(),m=a?s.bind(C[ys][Fr]):s,w=new fM(g,m);C[Mr+e]=w,KC(p,f,e+1,t,n,i,r,hl(f.consts,o),256),g&&KC(p,f,e+2,l,c,d,u,hl(f.consts,h),512)}var gM=class extends uM{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,i){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-Cr}at(t){return this.getLView(t)[Fr].$implicit}attach(t,n){let i=n[af];this.needsIndexUpdate||=t!==this.length,JC(this.lContainer,n,t,Im(this.templateTNode,i)),kne(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Lne(this.lContainer,t),One(this.lContainer,t)}create(t,n){let i=WS(this.lContainer,this.templateTNode.tView.ssrId),r=QC(this.hostLView,this.templateTNode,new pM(this.lContainer,n,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){cx(t[Wt],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Fr].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Fr].$index=t}getLView(t){return Nne(this.lContainer,t)}};function ib(e){let t=Ht(null),n=rd();try{let i=cn(),r=i[Wt],o=i[n],s=n+1,a=JS(i,s);if(o.liveCollection===void 0){let c=mM(r,s);o.liveCollection=new gM(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(Pne(l,e,o.trackByFn,t),l.updateIndexes(),o.hasEmptyBlock){let c=yh(),d=l.length===0;if(vc(i,c,d)){let u=n+2,h=JS(i,u);if(d){let p=mM(r,u),f=d8(h,p,i),g=QC(i,p,void 0,{dehydratedView:f});JC(h,g,0,Im(p,f))}else r.firstUpdatePass&&Tte(h),l8(h,0)}}}finally{Ht(t)}}function JS(e,t){return e[t]}function kne(e,t){if(e.length<=Cr)return;let n=Cr+t,i=e[n],r=i?i[uf]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[lu];Gee(o,r),Cf.delete(i),r.detachedLeaveAnimationFns=void 0}}function Lne(e,t){if(e.length<=Cr)return;let n=Cr+t,i=e[n],r=i?i[uf]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function One(e,t){return $C(e,t)}function Nne(e,t){return a8(e,t)}function mM(e,t){return LC(e,t)}function mn(e,t,n){let i=cn(),r=yh();if(vc(i,r,t)){let o=rr(),s=BC();$6(s,i,e,t,i[Ai],n)}return mn}function vM(e,t,n,i,r){OM(t,e,n,r?"class":"style",i)}function ze(e,t,n,i){let r=cn(),o=r[Wt],s=e+Mr,a=o.firstCreatePass?g8(s,r,2,t,K6,yF(),n,i):o.data[s];if(Y6(a,r,e,t,G8),kC(a)){let l=r[Wt];LM(l,r,a),A6(l,a,r)}return i!=null&&ux(r,a),ze}function We(){let e=rr(),t=yo(),n=Z6(t);return e.firstCreatePass&&m8(e,n),xF(n)&&EF(),wF(),n.classesWithoutHost!=null&&YJ(n)&&vM(e,n,cn(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ZJ(n)&&vM(e,n,cn(),n.stylesWithoutHost,!1),We}function ri(e,t,n,i){return ze(e,t,n,i),We(),ri}function Ks(e,t,n,i){let r=cn(),o=r[Wt],s=e+Mr,a=o.firstCreatePass?$te(s,o,2,t,n,i):o.data[s];return Y6(a,r,e,t,G8),i!=null&&ux(r,a),Ks}function Ys(){let e=yo(),t=Z6(e);return xF(t)&&EF(),wF(),Ys}function Zs(e,t,n,i){return Ks(e,t,n,i),Ys(),Zs}var G8=(e,t,n,i,r)=>(MS(!0),R6(t[Ai],i,mN()));function Xs(){return cn()}function Om(e,t,n){let i=cn(),r=yh();if(vc(i,r,t)){let o=rr(),s=BC();q6(s,i,e,t,i[Ai],n)}return Om}var qN={};function ZM(e,t,n){typeof t!="string"&&(n=t,t=e[ex.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),qN[t]=e,n&&(qN[t][ex.ExtraData]=n)}var ex=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ex||{});var rb="en-US";var Bne=rb;function H8(e){typeof e=="string"&&(Bne=e.toLowerCase().replace(/_/g,"-"))}function an(e,t,n){let i=cn(),r=rr(),o=yo();return z8(r,i,i[Ai],o,e,t,n),an}function Nm(e,t,n){let i=cn(),r=rr(),o=yo();return(o.type&3||n)&&b8(o,r,i,n,i[Ai],e,t,BS(o,i,t)),Nm}function z8(e,t,n,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=BS(i,t,o),b8(i,e,t,s,n,r,o,l)&&(a=!1)),a){let c=i.outputs?.[r],d=i.hostDirectiveOutputs?.[r];if(d&&d.length)for(let u=0;u<d.length;u+=2){let h=d[u],p=d[u+1];l??=BS(i,t,o),HN(i,t,h,p,r,l)}if(c&&c.length)for(let u of c)l??=BS(i,t,o),HN(i,t,u,r,r,l)}}function Wn(e=1){return gN(e)}function Vne(e,t){let n=null,i=Aee(e);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){n=r;continue}if(i===null?k6(e,o,!0):Mee(i,o))return r}return n}function pl(e){let t=cn()[ys][ws];if(!t.projection){let n=e?e.length:1,i=t.projection=VO(n,null),r=i.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=e?Vne(o,e):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Sr(e,t=0,n,i,r,o){let s=cn(),a=rr(),l=i?e+1:null;l!==null&&KC(s,a,l,i,r,o,null,n);let c=Lm(a,Mr+e,16,null,n||null);c.projection===null&&(c.projection=t),AF();let u=!s[af]||SF();s[ys][ws].projection[c.projection]===null&&l!==null?Gne(s,a,l):u&&!rx(c)&&Xee(a,s,c)}function Gne(e,t,n){let i=Mr+n,r=t.data[i],o=e[i],s=WS(o,r.tView.ssrId),a=QC(e,r,void 0,{dehydratedView:s});JC(o,a,0,Im(r,s))}function fu(e,t,n,i){A8(e,t,n,i)}function Li(e,t,n){_8(e,t,n)}function Yn(e){let t=cn(),n=rr(),i=_S();NC(i+1);let r=zM(n,i);if(e.dirty&&XO(t)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let o=F8(t,i);e.reset(o,g6),e.notifyOnChanges()}return!0}return!1}function Zn(){return HM(cn(),_S())}function XM(e,t,n,i,r){I8(t,A8(e,n,i,r))}function Bm(e,t,n,i){I8(e,_8(t,n,i))}function mx(e=1){NC(_S()+e)}function Vm(e){let t=oN();return ZO(t,Mr+e)}function PS(e,t){return e<<17|t<<2}function wf(e){return e>>17&32767}function Hne(e){return(e&2)==2}function zne(e,t){return e&131071|t<<17}function CM(e){return e|2}function Tm(e){return(e&131068)>>2}function UF(e,t){return e&-131069|t<<2}function jne(e){return(e&1)===1}function bM(e){return e|1}function Une(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=wf(s),l=Tm(s);e[i]=n;let c=!1,d;if(Array.isArray(n)){let u=n;d=u[1],(d===null||bm(u,d)>0)&&(c=!0)}else d=n;if(r)if(l!==0){let h=wf(e[a+1]);e[i+1]=PS(h,a),h!==0&&(e[h+1]=UF(e[h+1],i)),e[a+1]=zne(e[a+1],i)}else e[i+1]=PS(a,0),a!==0&&(e[a+1]=UF(e[a+1],i)),a=i;else e[i+1]=PS(l,0),a===0?a=i:e[l+1]=UF(e[l+1],i),l=i;c&&(e[i+1]=CM(e[i+1])),KN(e,d,i,!0),KN(e,d,i,!1),Wne(t,d,e,i,o),s=PS(a,l),o?t.classBindings=s:t.styleBindings=s}function Wne(e,t,n,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&bm(o,t)>=0&&(n[i+1]=bM(n[i+1]))}function KN(e,t,n,i){let r=e[n+1],o=t===null,s=i?wf(r):Tm(r),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],c=e[s+1];$ne(l,t)&&(a=!0,e[s+1]=i?bM(c):CM(c)),s=i?wf(c):Tm(c)}a&&(e[n+1]=i?CM(r):bM(r))}function $ne(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?bm(e,t)>=0:!1}var gc={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qne(e){return e.substring(gc.key,gc.keyEnd)}function Kne(e){return Yne(e),j8(e,U8(e,0,gc.textEnd))}function j8(e,t){let n=gc.textEnd;return n===t?-1:(t=gc.keyEnd=Zne(e,gc.key=t,n),U8(e,t,n))}function Yne(e){gc.key=0,gc.keyEnd=0,gc.value=0,gc.valueEnd=0,gc.textEnd=e.length}function U8(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Zne(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function xf(e,t,n){return W8(e,t,n,!1),xf}function Xn(e,t){return W8(e,t,null,!0),Xn}function Gm(e){Qne(rie,Xne,e,!0)}function Xne(e,t){for(let n=Kne(t);n>=0;n=j8(t,n))bS(e,qne(t),!0)}function W8(e,t,n,i){let r=cn(),o=rr(),s=ES(2);if(o.firstUpdatePass&&q8(o,e,s,i),t!==Ia&&vc(r,s,t)){let a=o.data[rd()];K8(o,a,r,r[Ai],e,r[s+1]=sie(t,n),i,s)}}function Qne(e,t,n,i){let r=rr(),o=ES(2);r.firstUpdatePass&&q8(r,null,o,i);let s=cn();if(n!==Ia&&vc(s,o,n)){let a=r.data[rd()];if(Y8(a,i)&&!$8(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=gS(l,n||"")),vM(r,a,s,n,i)}else oie(r,a,s,s[Ai],s[o+1],s[o+1]=iie(e,t,n),i,o)}}function $8(e,t){return t>=e.expandoStartIndex}function q8(e,t,n,i){let r=e.data;if(r[n+1]===null){let o=r[rd()],s=$8(e,n);Y8(o,i)&&t===null&&!s&&(t=!1),t=Jne(r,o,t,i),Une(r,o,t,n,s,i)}}function Jne(e,t,n,i){let r=uN(e),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(n=WF(null,e,t,n,i),n=YC(n,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==r)if(n=WF(r,e,t,n,i),o===null){let l=eie(e,t,i);l!==void 0&&Array.isArray(l)&&(l=WF(null,e,t,l[1],i),l=YC(l,t.attrs,i),tie(e,t,i,l))}else o=nie(e,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),n}function eie(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Tm(i)!==0)return e[wf(i)]}function tie(e,t,n,i){let r=n?t.classBindings:t.styleBindings;e[wf(r)]=i}function nie(e,t,n){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=e[o].hostAttrs;i=YC(i,s,n)}return YC(i,t.attrs,n)}function WF(e,t,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],i=YC(i,o.hostAttrs,r),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function YC(e,t,n){let i=n?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),bS(e,s,n?!0:t[++o]))}return e===void 0?null:e}function iie(e,t,n){if(n==null||n==="")return Qo;let i=[],r=ox(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function rie(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&bS(e,i,n)}function oie(e,t,n,i,r,o,s,a){r===Ia&&(r=Qo);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=l<r.length?r[l+1]:void 0,p=c<o.length?o[c+1]:void 0,f=null,g;d===u?(l+=2,c+=2,h!==p&&(f=u,g=p)):u===null||d!==null&&d<u?(l+=2,f=d):(c+=2,f=u,g=p),f!==null&&K8(e,t,n,i,f,g,s,a),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}function K8(e,t,n,i,r,o,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],d=jne(c)?YN(l,t,n,r,Tm(c),s):void 0;if(!tx(d)){tx(o)||Hne(c)&&(o=YN(l,null,n,r,a,s));let u=fF(rd(),n);Jee(i,s,u,r,o)}}function YN(e,t,n,i,r,o){let s=t===null,a;for(;r>0;){let l=e[r],c=Array.isArray(l),d=c?l[1]:l,u=d===null,h=n[r+1];h===Ia&&(h=u?Qo:void 0);let p=u?wS(h,i):d===i?h:void 0;if(c&&!tx(p)&&(p=wS(l,i)),tx(p)&&(a=p,s))return a;let f=e[r+1];r=s?wf(f):Tm(f)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=wS(l,i))}return a}function tx(e){return e!==void 0}function sie(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ou(ox(e)))),e}function Y8(e,t){return(e.flags&(t?8:16))!==0}function Gt(e,t=""){let n=cn(),i=rr(),r=e+Mr,o=i.firstCreatePass?Lm(i,r,1,t,null):i.data[r],s=aie(i,n,o,t,e);n[r]=s,FS()&&PM(i,n,s,o),Em(o,!1)}var aie=(e,t,n,i,r)=>(MS(!0),Cee(t[Ai],i));function lie(e,t,n,i=""){return vc(e,yh(),n)?t+Cm(n)+i:Ia}function cie(e,t,n,i,r,o=""){let s=sN(),a=qte(e,s,n,r);return ES(2),a?t+Cm(n)+i+Cm(r)+o:Ia}function fl(e){return es("",e),fl}function es(e,t,n){let i=cn(),r=lie(i,e,t,n);return r!==Ia&&Z8(i,rd(),r),es}function Ef(e,t,n,i,r){let o=cn(),s=cie(o,e,t,n,i,r);return s!==Ia&&Z8(o,rd(),s),Ef}function Z8(e,t,n){let i=fF(t,e);bee(e[Ai],i,n)}function or(e,t,n){$M(t)&&(t=t());let i=cn(),r=yh();if(vc(i,r,t)){let o=rr(),s=BC();$6(s,i,e,t,i[Ai],n)}return or}function xr(e,t){let n=$M(e);return n&&e.set(t),n}function sr(e,t){let n=cn(),i=rr(),r=yo();return z8(i,n,n[Ai],r,e,t),sr}function ZN(e,t,n){let i=rr();i.firstCreatePass&&X8(t,i.data,i.blueprint,id(e),n)}function X8(e,t,n,i,r){if(e=ko(e),Array.isArray(e))for(let o=0;o<e.length;o++)X8(e[o],t,n,i,r);else{let o=rr(),s=cn(),a=yo(),l=tf(e)?e:ko(e.provide),c=lF(e),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(tf(e)||!e.multi){let p=new vf(c,r,Pt,null),f=qF(l,t,r?d:d+h,u);f===-1?(YF(zS(a,s),o,l),$F(o,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[f]=p,s[f]=p)}else{let p=qF(l,t,d+h,u),f=qF(l,t,d,d+h),g=p>=0&&n[p],C=f>=0&&n[f];if(r&&!C||!r&&!g){YF(zS(a,s),o,l);let m=hie(r?uie:die,n.length,r,i,c,e);!r&&C&&(n[f].providerFactory=m),$F(o,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),s.push(m)}else{let m=Q8(n[r?f:p],c,!r&&i);$F(o,e,p>-1?p:f,m)}!r&&i&&C&&n[f].componentProviders++}}}function $F(e,t,n,i){let r=tf(t),o=$O(t);if(r||o){let l=(o?ko(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){let d=c.indexOf(n);d===-1?c.push(n,[i,l]):c[d+1].push(i,l)}else c.push(n,l)}}}function Q8(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function qF(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function die(e,t,n,i,r){return wM(this.multi,[])}function uie(e,t,n,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=jC(i,i[Wt],this.providerFactory.index,r);s=l.slice(0,a),wM(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],wM(o,s);return s}function wM(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function hie(e,t,n,i,r,o){let s=new vf(e,n,Pt,null);return s.multi=[],s.index=t,s.componentProviders=0,Q8(s,r,i&&!n),s}function uo(e,t){return n=>{n.providersResolver=(i,r)=>ZN(i,r?r(e):e,!1),t&&(n.viewProvidersResolver=(i,r)=>ZN(i,r?r(t):t,!0))}}function QM(e,t){return hx(e,t)}var nx=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},JM=(()=>{class e{compileModuleSync(n){return new XS(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=rF(n),o=T6(r.declarations).reduce((s,a)=>{let l=su(a);return l&&s.push(new bf(l)),s},[]);return new nx(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var J8=(()=>{class e{applicationErrorHandler=Z(pc);appRef=Z(Ta);taskService=Z(du);ngZone=Z(It);zonelessEnabled=Z(GC);tracing=Z(sd,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new li;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(AC):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Z(NF,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?PF:TF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(AC+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PF(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eB(){return[{provide:ed,useExisting:J8},{provide:It,useClass:RC},{provide:GC,useValue:!0}]}function pie(){return typeof $localize<"u"&&$localize.locale||rb}var Df=new Ke("",{factory:()=>Z(Df,{optional:!0,skipSelf:!0})||pie()});function Pa(e,t){return dC(e,t?.equal)}var aB=Symbol("InputSignalNode#UNSET"),xie=ce(T({},hC),{transformFn:void 0,applyValueToInputSignal(e,t){uC(e,t)}});function lB(e,t){let n=Object.create(xie);n.value=e,n.transformFn=t?.transform;function i(){if(om(n),n.value===aB){let r=null;throw new ut(-950,r)}return n.value}return i[wo]=n,i}var sb=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>SM(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function tB(e,t){return lB(e,t)}function Eie(e){return lB(aB,e)}var cB=(tB.required=Eie,tB);function nB(e,t){return jM(t)}function Die(e,t){return UM(t)}var ab=(nB.required=Die,nB);function iB(e,t){return jM(t)}function _ie(e,t){return UM(t)}var dB=(iB.required=_ie,iB);var tI=new Ke(""),Aie=new Ke("");function ob(e){return!e.moduleRef}function Rie(e){let t=ob(e)?e.r3Injector:e.moduleRef.injector,n=t.get(It);return n.run(()=>{ob(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(pc),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),ob(e)){let o=()=>t.destroy(),s=e.platformInjector.get(tI);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(tI);s.add(o),e.moduleRef.onDestroy(()=>{zC(e.allPlatformModules,e.moduleRef),r.unsubscribe(),s.delete(o)})}return Mie(i,n,()=>{let o=t.get(du),s=o.add(),a=t.get(KM);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(Df,rb);if(H8(l||rb),!t.get(Aie,!0))return ob(e)?t.get(Ta):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ob(e)){let d=t.get(Ta);return e.rootComponent!==void 0&&d.bootstrap(e.rootComponent),d}else return Fie?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var Fie;function Mie(e,t,n){try{let i=n();return Sf(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e(i)),i}}var vx=null;function Iie(e=[],t){return _n.create({name:t,providers:[{provide:IC,useValue:"platform"},{provide:tI,useValue:new Set([()=>vx=null])},...e]})}function Tie(e=[]){if(vx)return vx;let t=Iie(e);return vx=t,B8(),Pie(t),t}function Pie(e){let t=e.get(ix,null);Lo(e,()=>{t?.forEach(n=>n())})}var Oi=(()=>{class e{static __NG_ELEMENT_ID__=kie}return e})();function kie(e){return Lie(yo(),cn(),(e&16)===16)}function Lie(e,t,n){if(wh(e)&&!n){let i=ul(e.index,t);return new xh(i,i)}else if(e.type&175){let i=t[ys];return new xh(i,t)}return null}var nI=class{constructor(){}supports(t){return GM(t)}create(t){return new iI(t)}},Oie=(e,t)=>t,iI=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Oie}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<rB(i,r,o)?n:i,a=rB(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){let p=h<o.length?o[h]:o[h]=0,f=p+h;d<=f&&f<c&&(o[h]=p+1)}let u=s.previousIndex;o[u]=d-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!GM(t))throw new ut(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,v8(t,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new rI(n,i),o,r)),t}_verifyReinsertion(t,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let r=n===null?this._itHead:n._next;return t._next=r,t._prev=n,r===null?this._itTail=t:r._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Cx),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cx),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},rI=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},oI=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Cx=class{map=new Map;put(t){let n=t.trackById,i=this.map.get(n);i||(i=new oI,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,r=this.map.get(i);return r?r.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function rB(e,t,n){let i=e.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}function oB(){return new bx([new nI])}var bx=(()=>{class e{factories;static \u0275prov=Be({token:e,providedIn:"root",factory:oB});constructor(n){this.factories=n}static create(n,i){if(i!=null){let r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let i=Z(e,{optional:!0,skipSelf:!0});return e.create(n,i||oB())}}}find(n){let i=this.factories.find(r=>r.supports(n));if(i!=null)return i;throw new ut(901,!1)}}return e})();function uB(e){let{rootComponent:t,appProviders:n,platformProviders:i,platformRef:r}=e;di(Un.BootstrapApplicationStart);try{let o=r?.injector??Tie(i),s=[eB(),wN,...n||[]],a=new qC({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Rie({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{di(Un.BootstrapApplicationEnd)}}function Se(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function lI(e,t=NaN){return!isNaN(parseFloat(e))&&!isNaN(Number(e))?Number(e):t}var eI=Symbol("NOT_SET"),hB=new Set,Nie=ce(T({},hC),{kind:"afterRenderEffectPhase",consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:eI,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(e){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==eI&&!am(this))return this.signal;try{for(let r of this.cleanup??hB)r()}finally{this.cleanup?.clear()}let t=[];e!==void 0&&t.push(e),t.push(this.registerCleanupFn);let n=$p(this),i;try{i=this.userFn.apply(null,t)}finally{sm(this,n)}return(this.value===eI||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),sI=class extends UC{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];onDestroyFns=null;constructor(t,n,i,r,o,s=null){super(t,[void 0,void 0,void 0,void 0],i,!1,o.get(Ss),s),this.scheduler=r;for(let a of MM){let l=n[a];if(l===void 0)continue;let c=Object.create(Nie);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(om(c),c.value),c.signal[wo]=c,c.registerCleanupFn=d=>(c.cleanup??=new Set).add(d),this.nodes[a]=c,this.hooks[a]=d=>c.phaseFn(d)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){if(this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();super.destroy();for(let t of this.nodes)if(t)try{for(let n of t.cleanup??hB)n()}finally{ph(t)}}};function pB(e,t){let n=t?.injector??Z(_n),i=n.get(ed),r=n.get(lx),o=n.get(sd,null,{optional:!0});r.impl??=n.get(IM);let s=e;typeof s=="function"&&(s={mixedReadWrite:e});let a=n.get(Dm,null,{optional:!0}),l=new sI(r.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,i,n,o?.snapshot(null));return r.impl.register(l),l}function wx(e,t){let n=su(e),i=t.elementInjector||wm();return new bf(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector,t.directives,t.bindings)}var fB=null;function gl(){return fB}function cI(e){fB??=e}var lb=class{},zm=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(gB),providedIn:"platform"})}return e})();var gB=(()=>{class e extends zm{_location;_history;_doc=Z($t);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gl().getBaseHref(this._doc)}onPopState(n){let i=gl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=gl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function CB(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function mB(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Dh(e){return e&&e[0]!=="?"?`?${e}`:e}var yx=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(Vie),providedIn:"root"})}return e})(),Bie=new Ke(""),Vie=(()=>{class e extends yx{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Z($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return CB(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+Dh(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+Dh(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+Dh(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||e)(Tt(zm),Tt(Bie,8))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),_h=(()=>{class e{_subject=new At;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=zie(mB(vB(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Dh(i))}normalize(n){return e.stripTrailingSlash(Hie(this._basePath,vB(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dh(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dh(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Dh;static joinWithSlash=CB;static stripTrailingSlash=mB;static \u0275fac=function(i){return new(i||e)(Tt(yx))};static \u0275prov=Be({token:e,factory:()=>Gie(),providedIn:"root"})}return e})();function Gie(){return new _h(Tt(yx))}function Hie(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function vB(e){return e.replace(/\/index.html$/,"")}function zie(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var dI=/\s+/,bB=[],cb=(()=>{class e{_ngEl;_renderer;initialClasses=bB;rawClass;stateMap=new Map;constructor(n,i){this._ngEl=n,this._renderer=i}set klass(n){this.initialClasses=n!=null?n.trim().split(dI):bB}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(dI):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let r=this.stateMap.get(n);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(dI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||e)(Pt(sn),Pt(co))};static \u0275dir=zt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var Sx=class{$implicit;ngForOf;index;count;constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xx=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Sx(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),wB(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);wB(o,r)})}static ngTemplateContextGuard(n,i){return!0}static \u0275fac=function(i){return new(i||e)(Pt(qr),Pt(Ma),Pt(bx))};static \u0275dir=zt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function wB(e,t){e.context.$implicit=t.item}var uI=(()=>{class e{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||e)(Pt(qr))};static \u0275dir=zt({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[$r]})}return e})();var ad=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})();function db(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var _f=class{};function yB(e,t,n){return ZM(e,t,n)}var hI="browser";function SB(e){return e===hI}var ub=class{_doc;constructor(t){this._doc=t}manager},Ex=(()=>{class e extends ub{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,o){return n.addEventListener(i,r,o),()=>this.removeEventListener(n,i,r,o)}removeEventListener(n,i,r,o){return n.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||e)(Tt($t))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),Ax=new Ke(""),mI=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(s=>{s.manager=this});let r=n.filter(s=>!(s instanceof Ex));this._plugins=r.slice().reverse();let o=n.find(s=>s instanceof Ex);o&&this._plugins.push(o)}addEventListener(n,i,r,o){return this._findPluginFor(i).addEventListener(n,i,r,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new ut(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||e)(Tt(Ax),Tt(It))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),pI="ng-app-id";function xB(e){for(let t of e)t.remove()}function EB(e,t){let n=t.createElement("style");return n.textContent=e,n}function Uie(e,t,n,i){let r=e.head?.querySelectorAll(`style[${pI}="${t}"],link[${pI}="${t}"]`);if(r)for(let o of r)o.removeAttribute(pI),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function gI(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var vI=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,Uie(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,EB);i?.forEach(r=>this.addUsage(r,this.external,gI))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let o=i.get(n);o?o.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(xB(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])xB(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,EB(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,gI(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),n.appendChild(i)}static \u0275fac=function(i){return new(i||e)(Tt($t),Tt(Eh),Tt(km,8),Tt(yf))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),fI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CI=/%COMP%/g;var _B="%COMP%",Wie=`_nghost-${_B}`,$ie=`_ngcontent-${_B}`,qie=!0,Kie=new Ke("",{factory:()=>qie});function Yie(e){return $ie.replace(CI,e)}function Zie(e){return Wie.replace(CI,e)}function AB(e,t){return t.map(n=>n.replace(CI,e))}var bI=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,r,o,s,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new hb(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof _x?r.applyToHost(n):r instanceof pb&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case mc.Emulated:o=new _x(l,c,i,this.appId,d,s,a,u,h);break;case mc.ShadowDom:return new Dx(l,n,i,s,a,this.nonce,u,h,c);case mc.ExperimentalIsolatedShadowDom:return new Dx(l,n,i,s,a,this.nonce,u,h);default:o=new pb(l,c,i,d,s,a,u,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||e)(Tt(mI),Tt(vI),Tt(Eh),Tt(Kie),Tt($t),Tt(It),Tt(km),Tt(sd,8))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),hb=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,i,r,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(fI[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(DB(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(DB(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ut(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=fI[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=fI[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(uu.DashCase|uu.Important)?t.style.setProperty(n,i,r&uu.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&uu.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i,r){if(typeof t=="string"&&(t=gl().getGlobalEventTarget(this.doc,t),!t))throw new ut(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,r)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function DB(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Dx=class extends hb{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,i,r,o,s,a,l,c){super(t,r,o,a,l),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=AB(i.id,d);for(let h of d){let p=document.createElement("style");s&&p.setAttribute("nonce",s),p.textContent=h,this.shadowRoot.appendChild(p)}let u=i.getExternalStyles?.();if(u)for(let h of u){let p=gI(h,r);s&&p.setAttribute("nonce",s),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pb=class extends hb{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,i,r,o,s,a,l,c){super(t,o,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let d=i.styles;this.styles=c?AB(c,d):d,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Cf.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},_x=class extends pb{contentAttr;hostAttr;constructor(t,n,i,r,o,s,a,l,c){let d=r+"-"+i.id;super(t,n,i,o,s,a,l,c,d),this.contentAttr=Yie(d),this.hostAttr=Zie(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}};var Rx=class e extends lb{supportsDOMEvents=!0;static makeCurrent(){cI(new e)}onAndCancel(t,n,i,r){return t.addEventListener(n,i,r),()=>{t.removeEventListener(n,i,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Xie();return n==null?null:Qie(n)}resetBaseElement(){fb=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return db(document.cookie,t)}},fb=null;function Xie(){return fb=fb||document.head.querySelector("base"),fb?fb.getAttribute("href"):null}function Qie(e){return new URL(e,document.baseURI).pathname}var Jie=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),RB=["alt","control","meta","shift"],ere={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tre={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},FB=(()=>{class e extends ub{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,r,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gl().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),RB.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=ere[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),RB.forEach(s=>{if(s!==r){let a=tre[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||e)(Tt($t))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})();function wI(e,t,n){let i=T({rootComponent:e,platformRef:n?.platformRef},nre(t));return uB(i)}function nre(e){return{appProviders:[...are,...e?.providers??[]],platformProviders:sre}}function ire(){Rx.makeCurrent()}function rre(){return new Jc}function ore(){return EM(document),document}var sre=[{provide:yf,useValue:hI},{provide:ix,useValue:ire,multi:!0},{provide:$t,useFactory:ore}];var are=[{provide:IC,useValue:"root"},{provide:Jc,useFactory:rre},{provide:Ax,useClass:Ex,multi:!0},{provide:Ax,useClass:FB,multi:!0},bI,vI,mI,{provide:xo,useExisting:bI},{provide:_f,useClass:Jie},[]];var Ah=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=n.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let r=(t.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Mx=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},Ix=class{encodeKey(t){return MB(t)}encodeValue(t){return MB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function lre(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var cre=/%(\d[a-f0-9])/gi,dre={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function MB(e){return encodeURIComponent(e).replace(cre,(t,n)=>dre[n]??t)}function Fx(e){return`${e}`}var gu=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Ix,t.fromString){if(t.fromObject)throw new ut(2805,!1);this.map=lre(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let i=t.fromObject[n],r=Array.isArray(i)?i.map(Fx):[Fx(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Fx(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Fx(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function ure(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function IB(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function TB(e){return typeof Blob<"u"&&e instanceof Blob}function PB(e){return typeof FormData<"u"&&e instanceof FormData}function hre(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var kB="Content-Type",LB="Accept",OB="text/plain",NB="application/json",pre=`${NB}, ${OB}, */*`,jm=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,i,r){this.url=n,this.method=t.toUpperCase();let o;if(ure(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new ut(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Ah,this.context??=new Mx,!this.params)this.params=new gu,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||IB(this.body)||TB(this.body)||PB(this.body)||hre(this.body)?this.body:this.body instanceof gu?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PB(this.body)?null:TB(this.body)?this.body.type||null:IB(this.body)?null:typeof this.body=="string"?OB:this.body instanceof gu?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?NB:null}clone(t={}){let n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,c=t.redirect||this.redirect,d=t.credentials||this.credentials,u=t.referrer||this.referrer,h=t.integrity||this.integrity,p=t.referrerPolicy||this.referrerPolicy,f=t.transferCache??this.transferCache,g=t.timeout??this.timeout,C=t.body!==void 0?t.body:this.body,m=t.withCredentials??this.withCredentials,w=t.reportProgress??this.reportProgress,x=t.headers||this.headers,D=t.params||this.params,F=t.context??this.context;return t.setHeaders!==void 0&&(x=Object.keys(t.setHeaders).reduce((L,V)=>L.set(V,t.setHeaders[V]),x)),t.setParams&&(D=Object.keys(t.setParams).reduce((L,V)=>L.set(V,t.setParams[V]),D)),new e(n,i,C,{params:D,headers:x,context:F,reportProgress:w,responseType:r,withCredentials:m,transferCache:f,keepalive:o,cache:a,priority:s,timeout:g,mode:l,redirect:c,credentials:d,referrer:u,integrity:h,referrerPolicy:p})}},Af=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Af||{}),Wm=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,i="OK"){this.headers=t.headers||new Ah,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},Tx=class e extends Wm{constructor(t={}){super(t)}type=Af.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},gb=class e extends Wm{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Af.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Um=class extends Wm{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},fre=200,gre=204;var mre=new Ke("");var vre=/^\)\]\}',?\n/;var SI=(()=>{class e{xhrFactory;tracingService=Z(sd,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new ut(-2800,!1);let i=this.xhrFactory;return Zt(null).pipe(bs(()=>new fn(o=>{let s=i.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((C,m)=>s.setRequestHeader(C,m.join(","))),n.headers.has(LB)||s.setRequestHeader(LB,pre),!n.headers.has(kB)){let C=n.detectContentTypeHeader();C!==null&&s.setRequestHeader(kB,C)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let C=n.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=n.serializeBody(),l=null,c=()=>{if(l!==null)return l;let C=s.statusText||"OK",m=new Ah(s.getAllResponseHeaders()),w=s.responseURL||n.url;return l=new Tx({headers:m,status:s.status,statusText:C,url:w}),l},d=this.maybePropagateTrace(()=>{let{headers:C,status:m,statusText:w,url:x}=c(),D=null;m!==gre&&(D=typeof s.response>"u"?s.responseText:s.response),m===0&&(m=D?fre:0);let F=m>=200&&m<300;if(n.responseType==="json"&&typeof D=="string"){let L=D;D=D.replace(vre,"");try{D=D!==""?JSON.parse(D):null}catch(V){D=L,F&&(F=!1,D={error:V,text:D})}}F?(o.next(new gb({body:D,headers:C,status:m,statusText:w,url:x||void 0})),o.complete()):o.error(new Um({error:D,headers:C,status:m,statusText:w,url:x||void 0}))}),u=this.maybePropagateTrace(C=>{let{url:m}=c(),w=new Um({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:m||void 0});o.error(w)}),h=u;n.timeout&&(h=this.maybePropagateTrace(C=>{let{url:m}=c(),w=new Um({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:m||void 0});o.error(w)}));let p=!1,f=this.maybePropagateTrace(C=>{p||(o.next(c()),p=!0);let m={type:Af.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(m.total=C.total),n.responseType==="text"&&s.responseText&&(m.partialText=s.responseText),o.next(m)}),g=this.maybePropagateTrace(C=>{let m={type:Af.UploadProgress,loaded:C.loaded};C.lengthComputable&&(m.total=C.total),o.next(m)});return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",h),s.addEventListener("abort",u),n.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:Af.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||e)(Tt(_f))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Cre(e,t){return t(e)}function bre(e,t,n){return(i,r)=>Lo(n,()=>t(i,o=>e(o,r)))}var BB=new Ke("",{factory:()=>[]}),VB=new Ke(""),GB=new Ke("",{providedIn:"root",factory:()=>!0});var xI=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:function(i){let r=null;return i?r=new(i||e):r=Tt(SI),r},providedIn:"root"})}return e})();var Px=(()=>{class e{backend;injector;chain=null;pendingTasks=Z(IS);contributeToStability=Z(GB);constructor(n,i){this.backend=n,this.injector=i}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(BB),...this.injector.get(VB,[])]));this.chain=i.reduceRight((r,o)=>bre(r,o,this.injector),Cre)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe(yC(i))}else return this.chain(n,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||e)(Tt(xI),Tt(ki))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),EI=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:function(i){let r=null;return i?r=new(i||e):r=Tt(Px),r},providedIn:"root"})}return e})();function yI(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Rh=(()=>{class e{handler;constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof jm)o=n;else{let l;r.headers instanceof Ah?l=r.headers:l=new Ah(r.headers);let c;r.params&&(r.params instanceof gu?c=r.params:c=new gu({fromObject:r.params})),o=new jm(n,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let s=Zt(o).pipe(gm(l=>this.handler.handle(l)));if(n instanceof jm||r.observe==="events")return s;let a=s.pipe(zi(l=>l instanceof gb));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(yn(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new ut(2806,!1);return l.body}));case"blob":return a.pipe(yn(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new ut(2807,!1);return l.body}));case"text":return a.pipe(yn(l=>{if(l.body!==null&&typeof l.body!="string")throw new ut(2808,!1);return l.body}));case"json":default:return a.pipe(yn(l=>l.body))}case"response":return a;default:throw new ut(2809,!1)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new gu().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,yI(r,i))}post(n,i,r={}){return this.request("POST",n,yI(r,i))}put(n,i,r={}){return this.request("PUT",n,yI(r,i))}static \u0275fac=function(i){return new(i||e)(Tt(EI))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wre=new Ke("",{factory:()=>!0}),yre="XSRF-TOKEN",Sre=new Ke("",{providedIn:"root",factory:()=>yre}),xre="X-XSRF-TOKEN",Ere=new Ke("",{providedIn:"root",factory:()=>xre}),Dre=(()=>{class e{cookieName=Z(Sre);doc=Z($t);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=db(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),HB=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:function(i){let r=null;return i?r=new(i||e):r=Tt(Dre),r},providedIn:"root"})}return e})();function _re(e,t){if(!Z(wre)||e.method==="GET"||e.method==="HEAD")return t(e);try{let r=Z(zm).href,{origin:o}=new URL(r),{origin:s}=new URL(e.url,o);if(o!==s)return t(e)}catch{return t(e)}let n=Z(HB).getToken(),i=Z(Ere);return n!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,n)})),t(e)}function DI(...e){let t=[Rh,Px,{provide:EI,useExisting:Px},{provide:xI,useFactory:()=>Z(mre,{optional:!0})??Z(SI)},{provide:BB,useValue:_re,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return au(t)}var zB=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||e)(Tt($t))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var dn="primary",Rb=Symbol("RouteTitle"),II=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function If(e){return new II(e)}function XB(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=e[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function Vx(e){return new Promise((t,n)=>{e.pipe(iu()).subscribe({next:i=>t(i),error:i=>n(i)})})}function Rre(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ld(e[n],t[n]))return!1;return!0}function ld(e,t){let n=e?TI(e):void 0,i=t?TI(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!QB(e[r],t[r]))return!1;return!0}function TI(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function QB(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function JB(e){return e.length>0?e[e.length-1]:null}function Pf(e){return vC(e)?e:Sf(e)?vr(Promise.resolve(e)):Zt(e)}function e7(e){return vC(e)?Vx(e):Promise.resolve(e)}var Fre={exact:n7,subset:i7},t7={exact:Mre,subset:Ire,ignored:()=>!0};function jB(e,t,n){return Fre[n.paths](e.root,t.root,n.matrixParams)&&t7[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Mre(e,t){return ld(e,t)}function n7(e,t,n){if(!Ff(e.segments,t.segments)||!Ox(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!n7(e.children[i],t.children[i],n))return!1;return!0}function Ire(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>QB(e[n],t[n]))}function i7(e,t,n){return r7(e,t,t.segments,n)}function r7(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Ff(r,n)||t.hasChildren()||!Ox(r,n,i))}else if(e.segments.length===n.length){if(!Ff(e.segments,n)||!Ox(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!i7(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Ff(e.segments,r)||!Ox(e.segments,r,i)||!e.children[dn]?!1:r7(e.children[dn],t,o,i)}}function Ox(e,t,n){return t.every((i,r)=>t7[n](e[r].parameters,i.parameters))}var bc=class{root;queryParams;fragment;_queryParamMap;constructor(t=new oi([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=If(this.queryParams),this._queryParamMap}toString(){return kre.serialize(this)}},oi=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nx(this)}},Fh=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=If(this.parameters),this._parameterMap}toString(){return s7(this)}};function Tre(e,t){return Ff(e,t)&&e.every((n,i)=>ld(n.parameters,t[i].parameters))}function Ff(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function Pre(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===dn&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==dn&&(n=n.concat(t(r,i)))}),n}var Fb=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>new Mh,providedIn:"root"})}return e})(),Mh=class{parse(t){let n=new kI(t);return new bc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${mb(t.root,!0)}`,i=Nre(t.queryParams),r=typeof t.fragment=="string"?`#${Lre(t.fragment)}`:"";return`${n}${i}${r}`}},kre=new Mh;function Nx(e){return e.segments.map(t=>s7(t)).join("/")}function mb(e,t){if(!e.hasChildren())return Nx(e);if(t){let n=e.children[dn]?mb(e.children[dn],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==dn&&i.push(`${r}:${mb(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Pre(e,(i,r)=>r===dn?[mb(e.children[dn],!1)]:[`${r}:${mb(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[dn]!=null?`${Nx(e)}/${n[0]}`:`${Nx(e)}/(${n.join("//")})`}}function o7(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kx(e){return o7(e).replace(/%3B/gi,";")}function Lre(e){return encodeURI(e)}function PI(e){return o7(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bx(e){return decodeURIComponent(e)}function UB(e){return Bx(e.replace(/\+/g,"%20"))}function s7(e){return`${PI(e.path)}${Ore(e.parameters)}`}function Ore(e){return Object.entries(e).map(([t,n])=>`;${PI(t)}=${PI(n)}`).join("")}function Nre(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${kx(n)}=${kx(r)}`).join("&"):`${kx(n)}=${kx(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var Bre=/^[^\/()?;#]+/;function AI(e){let t=e.match(Bre);return t?t[0]:""}var Vre=/^[^\/()?;=#]+/;function Gre(e){let t=e.match(Vre);return t?t[0]:""}var Hre=/^[^=?&#]+/;function zre(e){let t=e.match(Hre);return t?t[0]:""}var jre=/^[^&#]+/;function Ure(e){let t=e.match(jre);return t?t[0]:""}var kI=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oi([],{}):new oi([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[dn]=new oi(t,n)),i}parseSegment(){let t=AI(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ut(4009,!1);return this.capture(t),new Fh(Bx(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Gre(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=AI(this.remaining);r&&(i=r,this.capture(i))}t[Bx(n)]=Bx(i)}parseQueryParam(t){let n=zre(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=Ure(this.remaining);s&&(i=s,this.capture(i))}let r=UB(n),o=UB(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=AI(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ut(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=dn);let s=this.parseChildren();n[o??dn]=Object.keys(s).length===1&&s[dn]?s[dn]:new oi([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ut(4011,!1)}};function a7(e){return e.segments.length>0?new oi([],{[dn]:e}):e}function l7(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=l7(r);if(i===dn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new oi(e.segments,t);return Wre(n)}function Wre(e){if(e.numberOfChildren===1&&e.children[dn]){let t=e.children[dn];return new oi(e.segments.concat(t.segments),t.children)}return e}function Ym(e){return e instanceof bc}function c7(e,t,n=null,i=null,r=new Mh){let o=d7(e);return u7(o,t,n,i,r)}function d7(e){let t;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new oi(o.url,s);return o===e&&(t=a),a}let i=n(e.root),r=a7(i);return t??r}function u7(e,t,n,i,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return RI(o,o,o,n,i,r);let s=$re(t);if(s.toRoot())return RI(o,o,new oi([],{}),n,i,r);let a=qre(s,o,e),l=a.processChildren?Cb(a.segmentGroup,a.index,s.commands):p7(a.segmentGroup,a.index,s.commands);return RI(o,a.segmentGroup,l,n,i,r)}function Gx(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function yb(e){return typeof e=="object"&&e!=null&&e.outlets}function WB(e,t,n){e||="\u0275";let i=new bc;return i.queryParams={[e]:t},n.parse(n.serialize(i)).queryParams[e]}function RI(e,t,n,i,r,o){let s={};for(let[c,d]of Object.entries(i??{}))s[c]=Array.isArray(d)?d.map(u=>WB(c,u,o)):WB(c,d,o);let a;e===t?a=n:a=h7(e,t,n);let l=a7(l7(a));return new bc(l,s,r)}function h7(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=h7(o,t,n)}),new oi(e.segments,i)}var Hx=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Gx(i[0]))throw new ut(4003,!1);let r=i.find(yb);if(r&&r!==JB(i))throw new ut(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $re(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Hx(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Hx(n,t,i)}var qm=class{segmentGroup;processChildren;index;constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function qre(e,t,n){if(e.isAbsolute)return new qm(t,!0,0);if(!n)return new qm(t,!1,NaN);if(n.parent===null)return new qm(n,!0,0);let i=Gx(e.commands[0])?0:1,r=n.segments.length-1+i;return Kre(n,r,e.numberOfDoubleDots)}function Kre(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ut(4005,!1);r=i.segments.length}return new qm(i,!1,r-o)}function Yre(e){return yb(e[0])?e[0].outlets:{[dn]:e}}function p7(e,t,n){if(e??=new oi([],{}),e.segments.length===0&&e.hasChildren())return Cb(e,t,n);let i=Zre(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new oi(e.segments.slice(0,i.pathIndex),{});return o.children[dn]=new oi(e.segments.slice(i.pathIndex),e.children),Cb(o,0,r)}else return i.match&&r.length===0?new oi(e.segments,{}):i.match&&!e.hasChildren()?LI(e,t,n):i.match?Cb(e,0,r):LI(e,t,n)}function Cb(e,t,n){if(n.length===0)return new oi(e.segments,{});{let i=Yre(n),r={};if(Object.keys(i).some(o=>o!==dn)&&e.children[dn]&&e.numberOfChildren===1&&e.children[dn].segments.length===0){let o=Cb(e.children[dn],t,n);return new oi(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=p7(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new oi(e.segments,r)}}function Zre(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let s=e.segments[r],a=n[i];if(yb(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!qB(l,c,s))return o;i+=2}else{if(!qB(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function LI(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(yb(o)){let l=Xre(o.outlets);return new oi(i,l)}if(r===0&&Gx(n[0])){let l=e.segments[t];i.push(new Fh(l.path,$B(n[0]))),r++;continue}let s=yb(o)?o.outlets[dn]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Gx(a)?(i.push(new Fh(s,$B(a))),r+=2):(i.push(new Fh(s,{})),r++)}return new oi(i,{})}function Xre(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=LI(new oi([],{}),0,i))}),t}function $B(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function qB(e,t,n){return e==n.path&&ld(t,n.parameters)}var bb="imperative",Do=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Do||{}),La=class{id;url;constructor(t,n){this.id=t,this.url=n}},Tf=class extends La{type=Do.NavigationStart;navigationTrigger;restoredState;constructor(t,n,i="imperative",r=null){super(t,n),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wc=class extends La{urlAfterRedirects;type=Do.NavigationEnd;constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Es=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Es||{}),Sb=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Sb||{}),cd=class extends La{reason;code;type=Do.NavigationCancel;constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mu=class extends La{reason;code;type=Do.NavigationSkipped;constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r}},Zm=class extends La{error;target;type=Do.NavigationError;constructor(t,n,i,r){super(t,n),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xb=class extends La{urlAfterRedirects;state;type=Do.RoutesRecognized;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zx=class extends La{urlAfterRedirects;state;type=Do.GuardsCheckStart;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jx=class extends La{urlAfterRedirects;state;shouldActivate;type=Do.GuardsCheckEnd;constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ux=class extends La{urlAfterRedirects;state;type=Do.ResolveStart;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wx=class extends La{urlAfterRedirects;state;type=Do.ResolveEnd;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$x=class{route;type=Do.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qx=class{route;type=Do.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kx=class{snapshot;type=Do.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yx=class{snapshot;type=Do.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zx=class{snapshot;type=Do.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xx=class{snapshot;type=Do.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Eb=class{},Xm=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Qre(e){return!(e instanceof Eb)&&!(e instanceof Xm)}function Jre(e,t){return e.providers&&!e._injector&&(e._injector=tb(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Cc(e){return e.outlet||dn}function eoe(e,t){let n=e.filter(i=>Cc(i)===t);return n.push(...e.filter(i=>Cc(i)!==t)),n}function ev(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Qx=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ev(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new tv(this.rootInjector)}},tv=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,i){let r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new Qx(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(i){return new(i||e)(Tt(ki))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Jx=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=OI(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=OI(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=NI(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return NI(t,this._root).map(n=>n.value)}};function OI(e,t){if(e===t.value)return t;for(let n of t.children){let i=OI(e,n);if(i)return i}return null}function NI(e,t){if(e===t.value)return[t];for(let n of t.children){let i=NI(e,n);if(i.length)return i.unshift(t),i}return[]}var ka=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function $m(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Db=class extends Jx{snapshot;constructor(t,n){super(t),this.snapshot=n,jI(this,t)}toString(){return this.snapshot.toString()}};function f7(e){let t=toe(e),n=new ao([new Fh("",{})]),i=new ao({}),r=new ao({}),o=new ao({}),s=new ao(""),a=new ml(n,i,o,s,r,dn,e,t.root);return a.snapshot=t.root,new Db(new ka(a,[]),t)}function toe(e){let t={},n={},i={},o=new Mf([],t,i,"",n,dn,e,null,{});return new _b("",new ka(o,[]))}var ml=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(yn(c=>c[Rb]))??Zt(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(yn(t=>If(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(yn(t=>If(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function e2(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:T(T({},t.params),e.params),data:T(T({},t.data),e.data),resolve:T(T(T(T({},e.data),t.data),r?.data),e._resolvedData)}:i={params:T({},e.params),data:T({},e.data),resolve:T(T({},e.data),e._resolvedData??{})},r&&m7(r)&&(i.resolve[Rb]=r.title),i}var Mf=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rb]}constructor(t,n,i,r,o,s,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=If(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=If(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},_b=class extends Jx{url;constructor(t,n){super(n),this.url=t,jI(this,n)}toString(){return g7(this._root)}};function jI(e,t){t.value._routerState=e,t.children.forEach(n=>jI(e,n))}function g7(e){let t=e.children.length>0?` { ${e.children.map(g7).join(", ")} } `:"";return`${e.value}${t}`}function FI(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ld(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),ld(t.params,n.params)||e.paramsSubject.next(n.params),Rre(t.url,n.url)||e.urlSubject.next(n.url),ld(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function BI(e,t){let n=ld(e.params,t.params)&&Tre(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||BI(e.parent,t.parent))}function m7(e){return typeof e.title=="string"||e.title===null}var v7=new Ke(""),kf=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=dn;activateEvents=new Ee;deactivateEvents=new Ee;attachEvents=new Ee;detachEvents=new Ee;routerOutletData=cB();parentContexts=Z(tv);location=Z(qr);changeDetector=Z(Oi);inputBinder=Z(r2,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ut(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ut(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ut(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new ut(4013,!1);this._activatedRoute=n;let r=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new VI(n,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$r]})}return e})(),VI=class{route;childContexts;parent;outletData;constructor(t,n,i,r){this.route=t,this.childContexts=n,this.parent=i,this.outletData=r}get(t,n){return t===ml?this.route:t===tv?this.childContexts:t===v7?this.outletData:this.parent.get(t,n)}},r2=new Ke("");var UI=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ri(0,"router-outlet")},dependencies:[kf],encapsulation:2})}return e})();function WI(e){let t=e.children&&e.children.map(WI),n=t?ce(T({},e),{children:t}):T({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==dn&&(n.component=UI),n}function noe(e,t,n){let i=Ab(e,t._root,n?n._root:void 0);return new Db(i,t)}function Ab(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=ioe(e,t,n);return new ka(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ab(e,a)),s}}let i=roe(t.value),r=t.children.map(o=>Ab(e,o));return new ka(i,r)}}function ioe(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Ab(e,i,r);return Ab(e,i)})}function roe(e){return new ml(new ao(e.url),new ao(e.params),new ao(e.queryParams),new ao(e.fragment),new ao(e.data),e.outlet,e.component,e)}var Qm=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},C7="ngNavigationCancelingError";function t2(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Ym(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=b7(!1,Es.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function b7(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[C7]=!0,n.cancellationCode=t,n}function ooe(e){return w7(e)&&Ym(e.url)}function w7(e){return!!e&&e[C7]}var soe=(e,t,n,i)=>yn(r=>(new GI(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),GI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),FI(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=$m(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=$m(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=$m(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=$m(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Xx(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Yx(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(FI(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),FI(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},n2=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Km=class{component;route;constructor(t,n){this.component=t,this.route=n}};function aoe(e,t,n){let i=e._root,r=t?t._root:null;return vb(i,r,n,[i.value])}function loe(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function nv(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!qR(e)?e:t.get(e):i}function vb(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=$m(t);return e.children.forEach(s=>{coe(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>wb(a,n.getContext(s),r)),r}function coe(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=doe(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new n2(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?vb(e,t,a?a.children:null,i,r):vb(e,t,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Km(a.outlet.component,s))}else s&&wb(t,a,r),r.canActivateChecks.push(new n2(i)),o.component?vb(e,null,a?a.children:null,i,r):vb(e,null,n,i,r);return r}function doe(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Ff(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ff(e.url,t.url)||!ld(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BI(e,t)||!ld(e.queryParams,t.queryParams);case"paramsChange":default:return!BI(e,t)}}function wb(e,t,n){let i=$m(e),r=e.value;Object.entries(i).forEach(([o,s])=>{r.component?t?wb(s,t.children.getContext(o),n):wb(s,null,n):wb(s,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Km(t.outlet.component,r)):n.canDeactivateChecks.push(new Km(null,r)):n.canDeactivateChecks.push(new Km(null,r))}function Mb(e){return typeof e=="function"}function uoe(e){return typeof e=="boolean"}function hoe(e){return e&&Mb(e.canLoad)}function poe(e){return e&&Mb(e.canActivate)}function foe(e){return e&&Mb(e.canActivateChild)}function goe(e){return e&&Mb(e.canDeactivate)}function moe(e){return e&&Mb(e.canMatch)}function y7(e){return e instanceof Xp||e?.name==="EmptyError"}var Lx=Symbol("INITIAL_VALUE");function Jm(){return bs(e=>CC(e.map(t=>t.pipe(al(1),ll(Lx)))).pipe(yn(t=>{for(let n of t)if(n!==!0){if(n===Lx)return Lx;if(n===!1||voe(n))return n}return!0}),zi(t=>t!==Lx),al(1)))}function voe(e){return Ym(e)||e instanceof Qm}function S7(e){return e.aborted?Zt(void 0).pipe(al(1)):new fn(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function x7(e){return Ki(S7(e))}function Coe(e,t){return Cs(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Zt(ce(T({},n),{guardsResult:!0})):boe(s,i,r,e).pipe(Cs(a=>a&&uoe(a)?woe(i,o,e,t):Zt(a)),yn(a=>ce(T({},n),{guardsResult:a})))})}function boe(e,t,n,i){return vr(e).pipe(Cs(r=>Doe(r.component,r.route,n,t,i)),iu(r=>r!==!0,!0))}function woe(e,t,n,i){return vr(t).pipe(gm(r=>fh(Soe(r.route.parent,i),yoe(r.route,i),Eoe(e,r.path,n),xoe(e,r.route,n))),iu(r=>r!==!0,!0))}function yoe(e,t){return e!==null&&t&&t(new Zx(e)),Zt(!0)}function Soe(e,t){return e!==null&&t&&t(new Kx(e)),Zt(!0)}function xoe(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Zt(!0);let r=i.map(o=>bC(()=>{let s=ev(t)??n,a=nv(o,s),l=poe(a)?a.canActivate(t,e):Lo(s,()=>a(t,e));return Pf(l).pipe(iu())}));return Zt(r).pipe(Jm())}function Eoe(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>loe(s)).filter(s=>s!==null).map(s=>bC(()=>{let a=s.guards.map(l=>{let c=ev(s.node)??n,d=nv(l,c),u=foe(d)?d.canActivateChild(i,e):Lo(c,()=>d(i,e));return Pf(u).pipe(iu())});return Zt(a).pipe(Jm())}));return Zt(o).pipe(Jm())}function Doe(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Zt(!0);let s=o.map(a=>{let l=ev(t)??r,c=nv(a,l),d=goe(c)?c.canDeactivate(e,t,n,i):Lo(l,()=>c(e,t,n,i));return Pf(d).pipe(iu())});return Zt(s).pipe(Jm())}function _oe(e,t,n,i,r){let o=t.canLoad;if(o===void 0||o.length===0)return Zt(!0);let s=o.map(a=>{let l=nv(a,e),c=hoe(l)?l.canLoad(t,n):Lo(e,()=>l(t,n)),d=Pf(c);return r?d.pipe(x7(r)):d});return Zt(s).pipe(Jm(),E7(i))}function E7(e){return xR(Wr(t=>{if(typeof t!="boolean")throw t2(e,t)}),yn(t=>t===!0))}function Aoe(e,t,n,i,r){let o=t.canMatch;if(!o||o.length===0)return Zt(!0);let s=o.map(a=>{let l=nv(a,e),c=moe(l)?l.canMatch(t,n):Lo(e,()=>l(t,n)),d=Pf(c);return r?d.pipe(x7(r)):d});return Zt(s).pipe(Jm(),E7(i))}var Rf=class D7 extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,D7.prototype)}},HI=class _7 extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,_7.prototype)}};function Roe(e){throw new ut(4e3,!1)}function Foe(e){throw b7(!1,Es.GuardRejected)}var Moe=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[dn])throw Roe(`${t.redirectTo}`);r=r.children[dn]}}async applyRedirectCommands(t,n,i,r,o){let s=await Ioe(n,r,o);if(s instanceof bc)throw new HI(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,i);if(s[0]==="/")throw new HI(a);return a}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new bc(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new oi(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new ut(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}};function Ioe(e,t,n){if(typeof e=="string")return Promise.resolve(e);let i=e,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:d,title:u}=t;return Vx(Pf(Lo(n,()=>i({params:c,data:d,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,title:u}))))}var zI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Toe(e,t,n,i,r,o){let s=A7(e,t,n);return s.matched?(i=Jre(t,i),Aoe(i,t,n,r,o).pipe(yn(a=>a===!0?s:T({},zI)))):Zt(s)}function A7(e,t,n){if(t.path==="**")return Poe(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?T({},zI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||XB)(n,e,t);if(!r)return T({},zI);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?T(T({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Poe(e){return{matched:!0,parameters:e.length>0?JB(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function KB(e,t,n,i){return n.length>0&&Ooe(e,n,i)?{segmentGroup:new oi(t,Loe(i,new oi(n,e.children))),slicedSegments:[]}:n.length===0&&Noe(e,n,i)?{segmentGroup:new oi(e.segments,koe(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new oi(e.segments,e.children),slicedSegments:n}}function koe(e,t,n,i){let r={};for(let o of n)if(o2(e,t,o)&&!i[Cc(o)]){let s=new oi([],{});r[Cc(o)]=s}return T(T({},i),r)}function Loe(e,t){let n={};n[dn]=t;for(let i of e)if(i.path===""&&Cc(i)!==dn){let r=new oi([],{});n[Cc(i)]=r}return n}function Ooe(e,t,n){return n.some(i=>o2(e,t,i)&&Cc(i)!==dn)}function Noe(e,t,n){return n.some(i=>o2(e,t,i))}function o2(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Boe(e,t,n){return t.length===0&&!e.children[n]}var Voe=class{};async function Goe(e,t,n,i,r,o,s="emptyOnly",a){return new zoe(e,t,n,i,r,s,o,a).recognize()}var Hoe=31,zoe=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,i,r,o,s,a,l){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=l,this.applyRedirects=new Moe(this.urlSerializer,this.urlTree)}noMatchError(t){return new ut(4002,`'${t.segmentGroup}'`)}async recognize(){let t=KB(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:i}=await this.match(t),r=new ka(i,n),o=new _b("",r),s=c7(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new Mf([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),dn,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,dn,n),rootSnapshot:n}}catch(i){if(i instanceof HI)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Rf?this.noMatchError(i):i}}async processSegmentGroup(t,n,i,r,o){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,n,i,o);let s=await this.processSegment(t,n,i,i.segments,r,!0,o);return s instanceof ka?[s]:[]}async processChildren(t,n,i,r){let o=[];for(let l of Object.keys(i.children))l==="primary"?o.unshift(l):o.push(l);let s=[];for(let l of o){let c=i.children[l],d=eoe(n,l),u=await this.processSegmentGroup(t,d,c,l,r);s.push(...u)}let a=R7(s);return joe(a),a}async processSegment(t,n,i,r,o,s,a){for(let l of n)try{return await this.processSegmentAgainstRoute(l._injector??t,n,l,i,r,o,s,a)}catch(c){if(c instanceof Rf||y7(c))continue;throw c}if(Boe(i,r,o))return new Voe;throw new Rf(i)}async processSegmentAgainstRoute(t,n,i,r,o,s,a,l){if(Cc(i)!==s&&(s===dn||!o2(r,o,i)))throw new Rf(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,r,i,o,s,l);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,s,l);throw new Rf(r)}async expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=A7(n,r,o);if(!l)throw new Rf(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hoe&&(this.allowRedirects=!1));let p=new Mf(o,c,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,YB(r),Cc(r),r.component??r._loadedComponent??null,r,ZB(r)),f=e2(p,a,this.paramsInheritanceStrategy);if(p.params=Object.freeze(f.params),p.data=Object.freeze(f.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let g=await this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,p,t),C=await this.applyRedirects.lineralizeSegments(r,g);return this.processSegment(t,i,n,C.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,i,r,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Vx(Toe(n,i,r,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(n.children={}),!a?.matched)throw new Rf(n);t=i._injector??t;let{routes:l}=await this.getChildConfig(t,i,r),c=i._loadedInjector??t,{parameters:d,consumedSegments:u,remainingSegments:h}=a,p=new Mf(u,d,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,YB(i),Cc(i),i.component??i._loadedComponent??null,i,ZB(i)),f=e2(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(f.params),p.data=Object.freeze(f.data);let{segmentGroup:g,slicedSegments:C}=KB(n,u,h,l);if(C.length===0&&g.hasChildren()){let x=await this.processChildren(c,l,g,p);return new ka(p,x)}if(l.length===0&&C.length===0)return new ka(p,[]);let m=Cc(i)===o,w=await this.processSegment(c,l,g,C,m?dn:o,!0,p);return new ka(p,w instanceof ka?[w]:[])}async getChildConfig(t,n,i){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Vx(_oe(t,n,i,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw Foe(n)}return{routes:[],injector:t}}};function joe(e){e.sort((t,n)=>t.value.outlet===dn?-1:n.value.outlet===dn?1:t.value.outlet.localeCompare(n.value.outlet))}function Uoe(e){let t=e.value.routeConfig;return t&&t.path===""}function R7(e){let t=[],n=new Set;for(let i of e){if(!Uoe(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=R7(i.children);t.push(new ka(i.value,r))}return t.filter(i=>!n.has(i))}function YB(e){return e.data||{}}function ZB(e){return e.resolve||{}}var Woe=new Ke("",{factory:()=>Goe});function $oe(e,t,n,i,r,o,s){let a=e.get(Woe);return Cs(l=>Zt(l).pipe(bs(c=>a(e,t,n,i,c.extractedUrl,r,o,s)),yn(({state:c,tree:d})=>ce(T({},l),{targetSnapshot:c,urlAfterRedirects:d}))))}function qoe(e,t){return Cs(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Zt(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of F7(l))s.add(c);let a=0;return vr(s).pipe(gm(l=>o.has(l)?Koe(l,i,e,t):(l.data=e2(l,l.parent,e).resolve,Zt(void 0))),Wr(()=>a++),oS(1),Cs(l=>a===s.size?Zt(n):Xo))})}function F7(e){let t=e.children.map(n=>F7(n)).flat();return[e,...t]}function Koe(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!m7(r)&&(o[Rb]=r.title),bC(()=>(e.data=e2(e,e.parent,n).resolve,Yoe(o,e,t,i).pipe(yn(s=>(e._resolvedData=s,e.data=T(T({},e.data),s),null)))))}function Yoe(e,t,n,i){let r=TI(e);if(r.length===0)return Zt({});let o={};return vr(r).pipe(Cs(s=>Zoe(e[s],t,n,i).pipe(iu(),Wr(a=>{if(a instanceof Qm)throw t2(new Mh,a);o[s]=a}))),oS(1),yn(()=>o),wC(s=>y7(s)?Xo:AR(s)))}function Zoe(e,t,n,i){let r=ev(t)??i,o=nv(e,r),s=o.resolve?o.resolve(t,n):Lo(r,()=>o(t,n));return Pf(s)}function MI(e){return bs(t=>{let n=e(t);return n?vr(n).pipe(yn(()=>t)):Zt(t)})}var $I=(()=>{class e{buildTitle(n){let i,r=n.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===dn);return i}getResolvedTitleForRoute(n){return n.data[Rb]}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(M7),providedIn:"root"})}return e})(),M7=(()=>{class e extends $I{title;constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||e)(Tt(zB))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ib=new Ke("",{factory:()=>({})}),Tb=new Ke(""),I7=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Z(JM);async loadComponent(n,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let o=await e7(Lo(n,()=>i.loadComponent())),s=await k7(P7(o));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s,s}finally{this.componentLoaders.delete(i)}})();return this.componentLoaders.set(i,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=(async()=>{try{let o=await T7(i,this.compiler,n,this.onLoadEndListener);return i._loadedRoutes=o.routes,i._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(i)}})();return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function T7(e,t,n,i){let r=await e7(Lo(n,()=>e.loadChildren())),o=await k7(P7(r)),s;o instanceof fx||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),i&&i(e);let a,l,c=!1;return Array.isArray(s)?(l=s,c=!0):(a=s.create(n).injector,l=a.get(Tb,[],{optional:!0,self:!0}).flat()),{routes:l.map(WI),injector:a}}function Xoe(e){return e&&typeof e=="object"&&"default"in e}function P7(e){return Xoe(e)?e.default:e}async function k7(e){return e}var s2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(Qoe),providedIn:"root"})}return e})(),Qoe=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),L7=new Ke("");var Joe=()=>{},O7=new Ke(""),N7=(()=>{class e{currentNavigation=gn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=gn(null);events=new At;transitionAbortWithErrorSubject=new At;configLoader=Z(I7);environmentInjector=Z(ki);destroyRef=Z(Ss);urlSerializer=Z(Fb);rootContexts=Z(tv);location=Z(_h);inputBindingEnabled=Z(r2,{optional:!0})!==null;titleStrategy=Z($I);options=Z(Ib,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Z(s2);createViewTransition=Z(L7,{optional:!0});navigationErrorHandler=Z(O7,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Zt(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=r=>this.events.next(new $x(r)),i=r=>this.events.next(new qx(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;So(()=>{this.transitions?.next(ce(T({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(n){return this.transitions=new ao(null),this.transitions.pipe(zi(i=>i!==null),bs(i=>{let r=!1,o=new AbortController;return Zt(i).pipe(bs(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Es.SupersededByNewNavigation),Xo;this.currentTransition=i;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?ce(T({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&c!=="reload")return this.events.next(new mu(s.id,this.urlSerializer.serialize(s.rawUrl),"",Sb.IgnoredSameUrlNavigation)),s.resolve(!1),Xo;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Zt(s).pipe(bs(d=>(this.events.next(new Tf(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Xo:Promise.resolve(d))),$oe(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Wr(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=d.urlAfterRedirects,h));let u=new xb(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:u,source:h,restoredState:p,extras:f}=s,g=new Tf(d,this.urlSerializer.serialize(u),h,p);this.events.next(g);let C=f7(this.rootComponentType).snapshot;return this.currentTransition=i=ce(T({},s),{targetSnapshot:C,urlAfterRedirects:u,extras:ce(T({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(m=>(m.finalUrl=u,m)),Zt(i)}else return this.events.next(new mu(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Sb.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Xo}),Wr(s=>{let a=new zx(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),yn(s=>(this.currentTransition=i=ce(T({},s),{guards:aoe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),Coe(this.environmentInjector,s=>this.events.next(s)),Wr(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw t2(this.urlSerializer,s.guardsResult);let a=new jx(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),zi(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Es.GuardRejected),!1)),MI(s=>{if(s.guards.canActivateChecks.length!==0)return Zt(s).pipe(Wr(a=>{let l=new Ux(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),bs(a=>{let l=!1;return Zt(a).pipe(qoe(this.paramsInheritanceStrategy,this.environmentInjector),Wr({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Es.NoDataFromResolver)}}))}),Wr(a=>{let l=new Wx(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),MI(s=>{let a=c=>{let d=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let u=ev(c)??this.environmentInjector;d.push(this.configLoader.loadComponent(u,c.routeConfig).then(h=>{c.component=h}))}for(let u of c.children)d.push(...a(u));return d},l=a(s.targetSnapshot.root);return l.length===0?Zt(s):vr(Promise.all(l).then(()=>s))}),MI(()=>this.afterPreactivation()),bs(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?vr(l).pipe(yn(()=>i)):Zt(i)}),yn(s=>{let a=noe(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=ce(T({},s),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),i}),Wr(()=>{this.events.next(new Eb)}),soe(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),al(1),Ki(S7(o.signal).pipe(zi(()=>!r&&!i.targetRouterState),Wr(()=>{this.cancelNavigationTransition(i,o.signal.reason+"",Es.Aborted)}))),Wr({next:s=>{r=!0,this.currentNavigation.update(a=>(a.abort=Joe,a)),this.lastSuccessfulNavigation.set(So(this.currentNavigation)),this.events.next(new wc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Ki(this.transitionAbortWithErrorSubject.pipe(Wr(s=>{throw s}))),yC(()=>{o.abort(),r||this.cancelNavigationTransition(i,"",Es.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),wC(s=>{if(this.destroyed)return i.resolve(!1),Xo;if(r=!0,w7(s))this.events.next(new cd(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),ooe(s)?this.events.next(new Xm(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Zm(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Lo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Qm){let{message:c,cancellationCode:d}=t2(this.urlSerializer,l);this.events.next(new cd(i.id,this.urlSerializer.serialize(i.extractedUrl),c,d)),this.events.next(new Xm(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Xo}))}))}cancelNavigationTransition(n,i,r){let o=new cd(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=So(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return n.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ese(e){return e!==bb}var B7=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(tse),providedIn:"root"})}return e})(),i2=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},tse=(()=>{class e extends i2{static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qI=(()=>{class e{urlSerializer=Z(Fb);options=Z(Ib,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Z(_h);urlHandlingStrategy=Z(s2);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new bc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:i,targetBrowserUrl:r}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,i):i,s=r??o;return s instanceof bc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:i,initialUrl:r}){i&&n?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=n):this.rawUrlTree=r}routerState=f7(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:()=>Z(V7),providedIn:"root"})}return e})(),V7=(()=>{class e extends qI{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{n(i.url,i.state,"popstate")})})}handleRouterEvent(n,i){n instanceof Tf?this.updateStateMemento():n instanceof mu?this.commitTransition(i):n instanceof xb?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof Eb?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof cd&&n.code!==Es.SupersededByNewNavigation&&n.code!==Es.Redirect?this.restoreHistory(i):n instanceof Zm?this.restoreHistory(i,!0):n instanceof wc&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,l=T(T({},s),this.generateNgRouterState(r,a));this.location.replaceState(n,"",l)}else{let a=T(T({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function KI(e,t){e.events.pipe(zi(n=>n instanceof wc||n instanceof cd||n instanceof Zm||n instanceof mu),yn(n=>n instanceof wc||n instanceof mu?0:(n instanceof cd?n.code===Es.Redirect||n.code===Es.SupersededByNewNavigation:!1)?2:1),zi(n=>n!==2),al(1)).subscribe(()=>{t()})}var nse={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ise={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dd=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Z(WM);stateManager=Z(qI);options=Z(Ib,{optional:!0})||{};pendingTasks=Z(du);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Z(N7);urlSerializer=Z(Fb);location=Z(_h);urlHandlingStrategy=Z(s2);injector=Z(ki);_events=new At;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Z(B7);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Z(Tb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Z(r2,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new li;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=So(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof cd&&i.code!==Es.Redirect&&i.code!==Es.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof wc)this.navigated=!0;else if(i instanceof Xm){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=T({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ese(r.source)},s);this.scheduleNavigation(a,bb,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Qre(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bb,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i,r)=>{this.navigateToSyncWithBrowser(n,r,i)})}navigateToSyncWithBrowser(n,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=T({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,s,o).catch(l=>{this.disposed||this.injector.get(pc)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return So(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(WI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=T(T({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=d7(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),u=this.currentUrlTree.root}return u7(u,n,d,c??null,this.urlSerializer)}navigateByUrl(n,i={skipLocationChange:!1}){let r=Ym(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,bb,null,i)}navigate(n,i={skipLocationChange:!1}){return rse(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(rf(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,i){let r;if(i===!0?r=T({},nse):i===!1?r=T({},ise):r=i,Ym(n))return jB(this.currentUrlTree,n,r);let o=this.parseUrl(n);return jB(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.entries(n).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((u,h)=>{a=u,l=h});let d=this.pendingTasks.add();return KI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rse(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ut(4008,!1)}var sse=new Ke("");function YI(e,...t){return au([{provide:Tb,multi:!0,useValue:e},[],{provide:ml,useFactory:ase},{provide:gx,multi:!0,useFactory:lse},t.map(n=>n.\u0275providers)])}function ase(){return Z(dd).routerState.root}function lse(){let e=Z(_n);return t=>{let n=e.get(Ta);if(t!==n.components[0])return;let i=e.get(dd),r=e.get(cse);e.get(dse)===1&&i.initialNavigation(),e.get(use,null,{optional:!0})?.setUpPreloading(),e.get(sse,null,{optional:!0})?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var cse=new Ke("",{factory:()=>new At}),dse=new Ke("",{factory:()=>1});var use=new Ke("");var Y7=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||e)(Pt(co),Pt(sn))};static \u0275dir=zt({type:e})}return e})(),JI=(()=>{class e extends Y7{static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275dir=zt({type:e,features:[br]})}return e})(),g2=new Ke("");var pse={provide:g2,useExisting:Ra(()=>sv),multi:!0};function fse(){let e=gl()?gl().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var gse=new Ke(""),sv=(()=>{class e extends Y7{_compositionMode;_composing=!1;constructor(n,i,r){super(n,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!fse())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||e)(Pt(co),Pt(sn),Pt(gse,8))};static \u0275dir=zt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&an("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[uo([pse]),br]})}return e})();function mse(e){return e==null||vse(e)===0}function vse(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var eT=new Ke(""),Z7=new Ke("");function Cse(e){return mse(e.value)?{required:!0}:null}function G7(e){return null}function X7(e){return e!=null}function Q7(e){return Sf(e)?vr(e):e}function J7(e){let t={};return e.forEach(n=>{t=n!=null?T(T({},t),n):t}),Object.keys(t).length===0?null:t}function eV(e,t){return t.map(n=>n(e))}function bse(e){return!e.validate}function tV(e){return e.map(t=>bse(t)?t:n=>t.validate(n))}function wse(e){if(!e)return null;let t=e.filter(X7);return t.length==0?null:function(n){return J7(eV(n,t))}}function tT(e){return e!=null?wse(tV(e)):null}function yse(e){if(!e)return null;let t=e.filter(X7);return t.length==0?null:function(n){let i=eV(n,t).map(Q7);return RR(i).pipe(yn(J7))}}function nT(e){return e!=null?yse(tV(e)):null}function H7(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Sse(e){return e._rawValidators}function xse(e){return e._rawAsyncValidators}function XI(e){return e?Array.isArray(e)?e:[e]:[]}function l2(e,t){return Array.isArray(e)?e.includes(t):e===t}function z7(e,t){let n=XI(t);return XI(e).forEach(r=>{l2(n,r)||n.push(r)}),n}function j7(e,t){return XI(t).filter(n=>!l2(e,n))}var c2=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},ov=class extends c2{name;get formDirective(){return null}get path(){return null}},Bb=class extends c2{_parent=null;name=null;valueAccessor=null},d2=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var m2=(()=>{class e extends d2{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(Pt(Bb,2))};static \u0275dir=zt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Xn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[br]})}return e})(),v2=(()=>{class e extends d2{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(Pt(ov,10))};static \u0275dir=zt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Xn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[br]})}return e})();var Pb="VALID",a2="INVALID",iv="PENDING",kb="DISABLED",Ih=class{},u2=class extends Ih{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Ob=class extends Ih{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Nb=class extends Ih{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},rv=class extends Ih{status;source;constructor(t,n){super(),this.status=t,this.source=n}},QI=class extends Ih{source;constructor(t){super(),this.source=t}},h2=class extends Ih{source;constructor(t){super(),this.source=t}};function nV(e){return(C2(e)?e.validators:e)||null}function Ese(e){return Array.isArray(e)?tT(e):e||null}function iV(e,t){return(C2(t)?t.asyncValidators:e)||null}function Dse(e){return Array.isArray(e)?nT(e):e||null}function C2(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function _se(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new ut(1e3,"");if(!i[n])throw new ut(1001,"")}function Ase(e,t,n){e._forEachChild((i,r)=>{if(n[r]===void 0)throw new ut(1002,"")})}var p2=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return So(this.statusReactive)}set status(t){So(()=>this.statusReactive.set(t))}_status=Pa(()=>this.statusReactive());statusReactive=gn(void 0);get valid(){return this.status===Pb}get invalid(){return this.status===a2}get pending(){return this.status==iv}get disabled(){return this.status===kb}get enabled(){return this.status!==kb}errors;get pristine(){return So(this.pristineReactive)}set pristine(t){So(()=>this.pristineReactive.set(t))}_pristine=Pa(()=>this.pristineReactive());pristineReactive=gn(!0);get dirty(){return!this.pristine}get touched(){return So(this.touchedReactive)}set touched(t){So(()=>this.touchedReactive.set(t))}_touched=Pa(()=>this.touchedReactive());touchedReactive=gn(!1);get untouched(){return!this.touched}_events=new At;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(z7(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(z7(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(j7(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(j7(t,this._rawAsyncValidators))}hasValidator(t){return l2(this._rawValidators,t)}hasAsyncValidator(t){return l2(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ce(T({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new Nb(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),n&&t.emitEvent!==!1&&this._events.next(new Nb(!1,i))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ce(T({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new Ob(!1,i))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),n&&t.emitEvent!==!1&&this._events.next(new Ob(!0,i))}markAsPending(t={}){this.status=iv;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new rv(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ce(T({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=kb,this.errors=null,this._forEachChild(r=>{r.disable(ce(T({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u2(this.value,i)),this._events.next(new rv(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Pb,this._forEachChild(i=>{i.enable(ce(T({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ce(T({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pb||this.status===iv)&&this._runAsyncValidator(i,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u2(this.value,n)),this._events.next(new rv(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ce(T({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kb:Pb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=iv,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let i=Q7(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new rv(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,i)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?kb:this.errors?a2:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iv)?iv:this._anyControlsHaveStatus(a2)?a2:Pb}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),r&&this._events.next(new Ob(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Nb(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){C2(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Ese(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Dse(this._rawAsyncValidators)}},f2=class extends p2{constructor(t,n,i){super(nV(n),iV(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Ase(this,!0,t),Object.keys(t).forEach(i=>{_se(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,ce(T({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new h2(this))}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var iT=new Ke("",{factory:()=>rT}),rT="always";function Rse(e,t){return[...t.path,e]}function rV(e,t,n=rT){oV(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Mse(e,t),Tse(e,t),Ise(e,t),Fse(e,t)}function U7(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Fse(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function oV(e,t){let n=Sse(e);t.validator!==null?e.setValidators(H7(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=xse(e);t.asyncValidator!==null?e.setAsyncValidators(H7(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();U7(t._rawValidators,r),U7(t._rawAsyncValidators,r)}function Mse(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&sV(e,t)})}function Ise(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&sV(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function sV(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Tse(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Pse(e,t){e==null,oV(e,t)}function kse(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Lse(e){return Object.getPrototypeOf(e.constructor)===JI}function Ose(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Nse(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(o=>{o.constructor===sv?n=o:Lse(o)?i=o:r=o}),r||i||n||null}var Bse={provide:ov,useExisting:Ra(()=>Vb)},Lb=Promise.resolve(),Vb=(()=>{class e extends ov{callSetDisabledState;get submitted(){return So(this.submittedReactive)}_submitted=Pa(()=>this.submittedReactive());submittedReactive=gn(!1);_directives=new Set;form;ngSubmit=new Ee;options;constructor(n,i,r){super(),this.callSetDisabledState=r,this.form=new f2({},tT(n),nT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Lb.then(()=>{let i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),rV(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Lb.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Lb.then(()=>{let i=this._findContainer(n.path),r=new f2({});Pse(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Lb.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Lb.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Ose(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new QI(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(i){return new(i||e)(Pt(eT,10),Pt(Z7,10),Pt(iT,8))};static \u0275dir=zt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&an("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[uo([Bse]),br]})}return e})();function W7(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function $7(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Vse=class extends p2{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,i){super(nV(n),iV(i,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),C2(n)&&(n.nonNullable||n.initialValueIsDefault)&&($7(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new h2(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){W7(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){W7(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){$7(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Gse={provide:Bb,useExisting:Ra(()=>Gb)},q7=Promise.resolve(),Gb=(()=>{class e extends Bb{_changeDetectorRef;callSetDisabledState;control=new Vse;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(n,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Nse(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),kse(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rV(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){q7.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,r=i!==0&&Se(i);q7.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Rse(n,this._parent):[n]}static \u0275fac=function(i){return new(i||e)(Pt(ov,9),Pt(eT,10),Pt(Z7,10),Pt(g2,10),Pt(Oi,8),Pt(iT,8))};static \u0275dir=zt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[uo([Gse]),br,$r]})}return e})();var b2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var Hse={provide:g2,useExisting:Ra(()=>w2),multi:!0};function aV(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function zse(e){return e.split(":")[0]}var w2=(()=>{class e extends JI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=Z(Ta).injector;destroyRef=Z(Ss);cdr=Z(Oi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Eo({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let i=this._getOptionId(n),r=aV(i,n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=zse(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275dir=zt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&an("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[uo([Hse]),br]})}return e})(),lV=(()=>{class e{_element;_renderer;_select;id;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(aV(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||e)(Pt(sn),Pt(co),Pt(w2,9))};static \u0275dir=zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),jse={provide:g2,useExisting:Ra(()=>cV),multi:!0};function K7(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Use(e){return e.split(":")[0]}var cV=(()=>{class e extends JI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i;if(Array.isArray(n)){let r=n.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,n(r)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=Use(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275dir=zt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&an("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[uo([jse]),br]})}return e})(),dV=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(K7(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(K7(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(Pt(sn),Pt(co),Pt(cV,9))};static \u0275dir=zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var Wse=(()=>{class e{_validator=G7;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):G7,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,features:[$r]})}return e})();var $se={provide:eT,useExisting:Ra(()=>Hb),multi:!0};var Hb=(()=>{class e extends Wse{required;inputName="required";normalizeInput=Se;createValidator=n=>Cse;enabled(n){return n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275dir=zt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Yi("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[uo([$se]),br]})}return e})();var qse=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})();var av=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:iT,useValue:n.callSetDisabledState??rT}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[qse]})}return e})();var y2=class e{constructor(t){this.router=t}username="";password="";onLogin(){this.username==="admin"&&this.password==="1234"?this.router.navigate(["/home"]):alert("Credenziali non valide")}static \u0275fac=function(n){return new(n||e)(Pt(dd))};static \u0275cmp=Kt({type:e,selectors:[["app-login"]],decls:12,vars:2,consts:[[1,"login-container"],[3,"ngSubmit"],["for","username"],["id","username","type","text","name","username","required","",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(n,i){n&1&&(ze(0,"div",0)(1,"h2"),Gt(2,"Accedi"),We(),ze(3,"form",1),an("ngSubmit",function(){return i.onLogin()}),ze(4,"label",2),Gt(5,"Username"),We(),ze(6,"input",3),sr("ngModelChange",function(o){return xr(i.username,o)||(i.username=o),o}),We(),ze(7,"label",4),Gt(8,"Password"),We(),ze(9,"input",5),sr("ngModelChange",function(o){return xr(i.password,o)||(i.password=o),o}),We(),ze(10,"button",6),Gt(11,"Login"),We()()()),n&2&&(Xe(6),or("ngModel",i.username),Xe(3),or("ngModel",i.password))},dependencies:[ad,av,b2,sv,m2,v2,Hb,Gb,Vb],styles:[".login-container[_ngcontent-%COMP%]{width:320px;margin:80px auto;padding:30px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #0000001a;font-family:Arial,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;border-radius:4px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;margin-top:20px;padding:10px;background:#1976d2;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background:#125a9c}"]})};var S2=class e{constructor(t,n){this.router=t;this.route=n}navigateTo(t){this.router.navigate([t],{relativeTo:this.route})}static \u0275fac=function(n){return new(n||e)(Pt(dd),Pt(ml))};static \u0275cmp=Kt({type:e,selectors:[["app-home"]],decls:11,vars:0,consts:[[1,"container"],[1,"sidebar"],[3,"click"],[1,"content"]],template:function(n,i){n&1&&(ze(0,"div",0)(1,"aside",1)(2,"ul")(3,"li",2),an("click",function(){return i.navigateTo("dashboard")}),Gt(4,"Inserimento Fattura"),We(),ze(5,"li",2),an("click",function(){return i.navigateTo("listaFatture")}),Gt(6,"Liste Fatture"),We(),ze(7,"li",2),an("click",function(){return i.navigateTo("report")}),Gt(8,"Report"),We()()(),ze(9,"main",3),ri(10,"router-outlet"),We()())},dependencies:[ad,kf],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100vh;font-family:Arial,sans-serif}.sidebar[_ngcontent-%COMP%]{width:220px;background:#1e293b;color:#fff;padding:20px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px;margin-bottom:8px;background:#334155;border-radius:4px;cursor:pointer}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#475569}.content[_ngcontent-%COMP%]{flex:1;padding:20px;background:#f1f5f9}"]})};var oT=new Ke("MAT_DATE_LOCALE",{providedIn:"root",factory:()=>Z(Df)}),lv="Method not implemented",Qs=class{locale;_localeChanges=new At;localeChanges=this._localeChanges;setTime(t,n,i,r){throw new Error(lv)}getHours(t){throw new Error(lv)}getMinutes(t){throw new Error(lv)}getSeconds(t){throw new Error(lv)}parseTime(t,n){throw new Error(lv)}addSeconds(t,n){throw new Error(lv)}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,n){return this.getYear(t)-this.getYear(n)||this.getMonth(t)-this.getMonth(n)||this.getDate(t)-this.getDate(n)}compareTime(t,n){return this.getHours(t)-this.getHours(n)||this.getMinutes(t)-this.getMinutes(n)||this.getSeconds(t)-this.getSeconds(n)}sameDate(t,n){if(t&&n){let i=this.isValid(t),r=this.isValid(n);return i&&r?!this.compareDate(t,n):i==r}return t==n}sameTime(t,n){if(t&&n){let i=this.isValid(t),r=this.isValid(n);return i&&r?!this.compareTime(t,n):i==r}return t==n}clampDate(t,n,i){return n&&this.compareDate(t,n)<0?n:i&&this.compareDate(t,i)>0?i:t}},vu=new Ke("mat-date-formats");function zb(e){return e.buttons===0||e.detail===0}function jb(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var sT;function hV(){if(sT==null){let e=typeof document<"u"?document.head:null;sT=!!(e&&(e.createShadowRoot||e.attachShadow))}return sT}function aT(e){if(hV()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ub(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function Js(e){return e.composedPath?e.composedPath()[0]:e.target}var lT;try{lT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lT=!1}var ui=(()=>{class e{_platformId=Z(yf);isBrowser=this._platformId?SB(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||lT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Wb;function pV(){if(Wb==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Wb=!0}))}finally{Wb=Wb||!1}return Wb}function Th(e){return pV()?e:!!e.capture}function $b(e,t=0){return fV(e)?Number(e):arguments.length===2?t:0}function fV(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function ud(e){return e instanceof sn?e.nativeElement:e}var gV=new Ke("cdk-input-modality-detector-options"),mV={ignoreKeys:[18,17,224,91,16]},vV=650,cT={passive:!0,capture:!0},CV=(()=>{class e{_platform=Z(ui);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new ao(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(i=>i===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Js(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<vV||(this._modality.next(zb(n)?"keyboard":"mouse"),this._mostRecentTarget=Js(n))};_onTouchstart=n=>{if(jb(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Js(n)};constructor(){let n=Z(It),i=Z($t),r=Z(gV,{optional:!0});if(this._options=T(T({},mV),r),this.modalityDetected=this._modality.pipe(SC(1)),this.modalityChanged=this.modalityDetected.pipe(rS()),this._platform.isBrowser){let o=Z(xo).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,cT),o.listen(i,"mousedown",this._onMousedown,cT),o.listen(i,"touchstart",this._onTouchstart,cT)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qb=(function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e})(qb||{}),bV=new Ke("cdk-focus-monitor-default-options"),x2=Th({passive:!0,capture:!0}),cv=(()=>{class e{_ngZone=Z(It);_platform=Z(ui);_inputModalityDetector=Z(CV);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=Z($t);_stopInputModalityDetector=new At;constructor(){let n=Z(bV,{optional:!0});this._detectionMode=n?.detectionMode||qb.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let i=Js(n);for(let r=i;r;r=r.parentElement)n.type==="focus"?this._onFocus(n,r):this._onBlur(n,r)};monitor(n,i=!1){let r=ud(n);if(!this._platform.isBrowser||r.nodeType!==1)return Zt();let o=aT(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new At,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let i=ud(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){let o=ud(n),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===qb.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused",i==="touch"),n.classList.toggle("cdk-keyboard-focused",i==="keyboard"),n.classList.toggle("cdk-mouse-focused",i==="mouse"),n.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&i,this._detectionMode===qb.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?vV:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(n,i){let r=this._elementInfo.get(i),o=Js(n);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(n,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,x2),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,x2)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ki(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(n){let i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,x2),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,x2),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){let i=[];return this._elementInfo.forEach((r,o)=>{(o===n||r.checkChildren&&o.contains(n))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let o=n.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dT=(()=>{class e{_elementRef=Z(sn);_focusMonitor=Z(cv);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new Ee;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let n=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(n,n.nodeType===1&&n.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return e})();var E2=new WeakMap,Oo=(()=>{class e{_appRef;_injector=Z(_n);_environmentInjector=Z(ki);load(n){let i=this._appRef=this._appRef||this._injector.get(Ta),r=E2.get(i);r||(r={loaders:new Set,refs:[]},E2.set(i,r),i.onDestroy(()=>{E2.get(i)?.refs.forEach(o=>o.destroy()),E2.delete(i)})),r.loaders.has(n)||(r.loaders.add(n),r.refs.push(wx(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Cu=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function dv(e){return Array.isArray(e)?e:[e]}var wV=new Set,Lf,D2=(()=>{class e{_platform=Z(ui);_nonce=Z(km,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Yse}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&Kse(n,this._nonce),this._matchMedia(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Kse(e,t){if(!wV.has(e))try{Lf||(Lf=document.createElement("style"),t&&Lf.setAttribute("nonce",t),Lf.setAttribute("type","text/css"),document.head.appendChild(Lf)),Lf.sheet&&(Lf.sheet.insertRule(`@media ${e} {body{ }}`,0),wV.add(e))}catch(n){console.error(n)}}function Yse(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var Kb=(()=>{class e{_mediaMatcher=Z(D2);_zone=Z(It);_queries=new Map;_destroySubject=new At;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return yV(dv(n)).some(r=>this._registerQuery(r).mql.matches)}observe(n){let r=yV(dv(n)).map(s=>this._registerQuery(s).observable),o=CC(r);return o=fh(o.pipe(al(1)),o.pipe(SC(1),FR(0))),o.pipe(yn(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let i=this._mediaMatcher.matchMedia(n),o={observable:new fn(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(ll(i),yn(({matches:s})=>({query:n,matches:s})),Ki(this._destroySubject)),mql:i};return this._queries.set(n,o),o}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yV(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}var Zse=(()=>{class e{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var _2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({providers:[Zse]})}return e})();var Xse=(()=>{class e{_platform=Z(ui);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return Jse(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let i=Qse(aae(n));if(i&&(SV(i)===-1||!this.isVisible(i)))return!1;let r=n.nodeName.toLowerCase(),o=SV(n);return n.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!oae(n)?!1:r==="audio"?n.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,i){return sae(n)&&!this.isDisabled(n)&&(i?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qse(e){try{return e.frameElement}catch{return null}}function Jse(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function eae(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function tae(e){return iae(e)&&e.type=="hidden"}function nae(e){return rae(e)&&e.hasAttribute("href")}function iae(e){return e.nodeName.toLowerCase()=="input"}function rae(e){return e.nodeName.toLowerCase()=="a"}function DV(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function SV(e){if(!DV(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function oae(e){let t=e.nodeName.toLowerCase(),n=t==="input"&&e.type;return n==="text"||n==="password"||t==="select"||t==="textarea"}function sae(e){return tae(e)?!1:eae(e)||nae(e)||e.hasAttribute("contenteditable")||DV(e)}function aae(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var hT=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,n,i,r,o=!1,s){this._element=t,this._checker=n,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,n=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let n=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(t),!!i}return n.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let n=this._getRegionBoundary("start");return n&&n.focus(t),!!n}focusLastTabbableElement(t){let n=this._getRegionBoundary("end");return n&&n.focus(t),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,n){t?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Eo(t,{injector:this._injector}):setTimeout(t)}},_V=(()=>{class e{_checker=Z(Xse);_ngZone=Z(It);_document=Z($t);_injector=Z(_n);constructor(){Z(Oo).load(Cu)}create(n,i=!1){return new hT(n,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pT=(()=>{class e{_elementRef=Z(sn);_focusTrapFactory=Z(_V);focusTrap;_previouslyFocusedElement=null;get enabled(){return this.focusTrap?.enabled||!1}set enabled(n){this.focusTrap&&(this.focusTrap.enabled=n)}autoCapture;constructor(){Z(ui).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(n){let i=n.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Ub(),this.focusTrap?.focusInitialElementWhenReady()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Se],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Se]},exportAs:["cdkTrapFocus"],features:[$r]})}return e})(),AV=new Ke("liveAnnouncerElement",{providedIn:"root",factory:()=>null}),RV=new Ke("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),lae=0,fT=(()=>{class e{_ngZone=Z(It);_defaultOptions=Z(RV,{optional:!0});_liveElement;_document=Z($t);_previousTimeout;_currentPromise;_currentResolve;constructor(){let n=Z(AV,{optional:!0});this._liveElement=n||this._createLiveElement()}announce(n,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=n,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let n="cdk-live-announcer-element",i=this._document.getElementsByClassName(n),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(n),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${lae++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(n){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(n)===-1&&o.setAttribute("aria-owns",s+" "+n):o.setAttribute("aria-owns",n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ph=(function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e})(Ph||{}),xV="cdk-high-contrast-black-on-white",EV="cdk-high-contrast-white-on-black",uT="cdk-high-contrast-active",FV=(()=>{class e{_platform=Z(ui);_hasCheckedHighContrastMode;_document=Z($t);_breakpointSubscription;constructor(){this._breakpointSubscription=Z(Kb).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ph.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(n):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ph.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ph.BLACK_ON_WHITE}return Ph.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(uT,xV,EV),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Ph.BLACK_ON_WHITE?n.add(uT,xV):i===Ph.WHITE_ON_BLACK&&n.add(uT,EV)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gT=(()=>{class e{constructor(){Z(FV)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[_2]})}return e})();var mT={},Oa=class e{_appId=Z(Eh);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(t,n=!1){return this._appId!=="ng"&&(t+=this._appId),mT.hasOwnProperty(t)||(mT[t]=0),`${t}${n?e._infix+"-":""}${mT[t]++}`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})};function A2(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var IV=" ";function cae(e,t,n){let i=F2(e,t);n=n.trim(),!i.some(r=>r.trim()===n)&&(i.push(n),e.setAttribute(t,i.join(IV)))}function dae(e,t,n){let i=F2(e,t);n=n.trim();let r=i.filter(o=>o!==n);r.length?e.setAttribute(t,r.join(IV)):e.removeAttribute(t)}function F2(e,t){return e.getAttribute(t)?.match(/\S+/g)??[]}var TV="cdk-describedby-message",R2="cdk-describedby-host",CT=0,PV=(()=>{class e{_platform=Z(ui);_document=Z($t);_messageRegistry=new Map;_messagesContainer=null;_id=`${CT++}`;constructor(){Z(Oo).load(Cu),this._id=Z(Eh)+"-"+CT++}describe(n,i,r){if(!this._canBeDescribed(n,i))return;let o=vT(i,r);typeof i!="string"?(MV(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(n,o)||this._addMessageReference(n,o)}removeDescription(n,i,r){if(!i||!this._isElementNode(n))return;let o=vT(i,r);if(this._isElementDescribedByMessage(n,o)&&this._removeMessageReference(n,o),typeof i=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let n=this._document.querySelectorAll(`[${R2}="${this._id}"]`);for(let i=0;i<n.length;i++)this._removeCdkDescribedByReferenceIds(n[i]),n[i].removeAttribute(R2);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(n,i){let r=this._document.createElement("div");MV(r,this._id),r.textContent=n,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(vT(n,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(n){this._messageRegistry.get(n)?.messageElement?.remove(),this._messageRegistry.delete(n)}_createMessagesContainer(){if(this._messagesContainer)return;let n="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${n}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(n),r.classList.add("cdk-visually-hidden"),this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(n){let i=F2(n,"aria-describedby").filter(r=>r.indexOf(TV)!=0);n.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(n,i){let r=this._messageRegistry.get(i);cae(n,"aria-describedby",r.messageElement.id),n.setAttribute(R2,this._id),r.referenceCount++}_removeMessageReference(n,i){let r=this._messageRegistry.get(i);r.referenceCount--,dae(n,"aria-describedby",r.messageElement.id),n.removeAttribute(R2)}_isElementDescribedByMessage(n,i){let r=F2(n,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&r.indexOf(s)!=-1}_canBeDescribed(n,i){if(!this._isElementNode(n))return!1;if(i&&typeof i=="object")return!0;let r=i==null?"":`${i}`.trim(),o=n.getAttribute("aria-label");return r?!o||o.trim()!==r:!1}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vT(e,t){return typeof e=="string"?`${t||""}/${e}`:e}function MV(e,t){e.id||(e.id=`${TV}-${t}-${CT++}`)}var uae=new Ke("cdk-dir-doc",{providedIn:"root",factory:()=>Z($t)}),hae=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function kV(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?hae.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var yc=(()=>{class e{get value(){return this.valueSignal()}valueSignal=gn("ltr");change=new Ee;constructor(){let n=Z(uae,{optional:!0});if(n){let i=n.body?n.body.dir:null,r=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(kV(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ds=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})();function Ir(e){return e==null?"":typeof e=="string"?e:`${e}px`}function Yb(e){return e!=null&&`${e}`!="false"}function bT(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Of;function LV(){if(Of==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Of=!1,Of;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)Of=!0;else{let e=Element.prototype.scrollTo;e?Of=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Of=!1}}return Of}var pae=20,uv=(()=>{class e{_ngZone=Z(It);_platform=Z(ui);_renderer=Z(xo).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new At;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=pae){return this._platform.isBrowser?new fn(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=n>0?this._scrolled.pipe(iS(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Zt()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){let r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(zi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(n){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,n)&&i.push(o)}),i}_scrollableContainsElement(n,i){let r=ud(i),o=n.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fae=20,hv=(()=>{class e{_platform=Z(ui);_listeners;_viewportSize;_change=new At;_document=Z($t);constructor(){let n=Z(It),i=Z(xo).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,i=this._getWindow(),r=n.documentElement,o=r.getBoundingClientRect(),s=-o.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(n=fae){return n>0?this._change.pipe(iS(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Zb=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})(),wT=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[Ds,Zb,Ds,Zb]})}return e})();var Xb=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},hd=class extends Xb{component;viewContainerRef;injector;projectableNodes;constructor(t,n,i,r){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.projectableNodes=r}},Nf=class extends Xb{templateRef;viewContainerRef;context;injector;constructor(t,n,i,r){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},yT=class extends Xb{element;constructor(t){super(),this.element=t instanceof sn?t.nativeElement:t}},pv=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof hd)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Nf)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof yT)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},M2=class extends pv{outletElement;_appRef;_defaultInjector;constructor(t,n,i){super(),this.outletElement=t,this._appRef=n,this._defaultInjector=i}attachComponentPortal(t){let n;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,r=i.get(hu,null,{optional:!0})||void 0;n=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let i=this._appRef,r=t.injector||this._defaultInjector||_n.NULL,o=r.get(ki,i.injector);n=wx(t.component,{elementInjector:r,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),i.attachView(n.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=t,i}attachDomPortal=t=>{let n=t.element;n.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(i,n),this.outletElement.appendChild(n),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var fv=(()=>{class e extends pv{_moduleRef=Z(hu,{optional:!0});_document=Z($t);_viewContainerRef=Z(qr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new Ee;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let i=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,r=i.createComponent(n.component,{index:i.length,injector:n.injector||i.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(n){n.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=n=>{let i=n.element;i.parentNode;let r=this._document.createComment("dom-portal");n.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=n,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[br]})}return e})(),Qb=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})();var OV=LV();function ET(e){return new I2(e.get(hv),e.get($t))}var I2=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,n){this._viewportRuler=t,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ir(-this._previousScrollPosition.left),t.style.top=Ir(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,i=t.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),OV&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),OV&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};function jV(e,t){return new T2(e.get(uv),e.get(It),e.get(hv),t)}var T2=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,n,i,r){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(zi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Jb=class{enable(){}disable(){}attach(){}};function ST(e,t){return t.some(n=>{let i=e.bottom<n.top,r=e.top>n.bottom,o=e.right<n.left,s=e.left>n.right;return i||r||o||s})}function NV(e,t){return t.some(n=>{let i=e.top<n.top,r=e.bottom>n.bottom,o=e.left<n.left,s=e.right>n.right;return i||r||o||s})}function tw(e,t){return new P2(e.get(uv),e.get(hv),e.get(It),t)}var P2=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,n,i,r){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();ST(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},UV=(()=>{class e{_injector=Z(_n);constructor(){}noop=()=>new Jb;close=n=>jV(this._injector,n);block=()=>ET(this._injector);reposition=n=>tw(this._injector,n);static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Vf=class{positionStrategy;scrollStrategy=new Jb;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;constructor(t){if(t){let n=Object.keys(t);for(let i of n)t[i]!==void 0&&(this[i]=t[i])}}};var k2=class{connectionPair;scrollableViewProperties;constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var WV=(()=>{class e{_attachedOverlays=[];_document=Z($t);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$V=(()=>{class e extends WV{_ngZone=Z(It);_renderer=Z(xo).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qV=(()=>{class e extends WV{_platform=Z(ui);_ngZone=Z(It);_renderer=Z(xo).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=Js(n)};_clickListener=n=>{let i=Js(n),r=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(BV(a.overlayElement,i)||BV(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})();static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function BV(e,t){let n=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===e)return!0;i=n&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var KV=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return e})(),YV=(()=>{class e{_platform=Z(ui);_containerElement;_document=Z($t);_styleLoader=Z(Oo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||bT()){let r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(n),bT()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(KV)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xT=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,n,i,r){this._renderer=n,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function DT(e){return e&&e.nodeType===1}var L2=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new At;_attachments=new At;_detachments=new At;_positionStrategy;_scrollStrategy;_locationChanges=li.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new At;_outsidePointerEvents=new At;_afterNextRenderRef;constructor(t,n,i,r,o,s,a,l,c,d=!1,u,h){this._portalOutlet=t,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._injector=u,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){this._attachHost();let n=this._portalOutlet.attach(t);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Eo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=T(T({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ce(T({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Ir(this._config.width),t.height=Ir(this._config.height),t.minWidth=Ir(this._config.minWidth),t.minHeight=Ir(this._config.minHeight),t.maxWidth=Ir(this._config.maxWidth),t.maxHeight=Ir(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachHost(){if(!this._host.parentElement){let t=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;DT(t)?t.after(this._host):t?.type==="parent"?t.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch{}}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new xT(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,n,i){let r=dv(n||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Eo(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(n){if(t)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},VV="cdk-overlay-connected-position-bounding-box",gae=/([A-Za-z%]+)$/;function nw(e,t){return new ew(t,e.get(hv),e.get($t),e.get(ui),e.get(YV))}var ew=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new At;_resizeSubscription=li.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;_popoverLocation="global";positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(VV),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,n,a),d=this._getOverlayFit(c,n,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,i)){o.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(o.length){let a=null,l=-1;for(let c of o){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Bf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(VV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}withPopoverLocation(t){return this._popoverLocation=t,this}getPopoverInsertionPoint(){return this._popoverLocation==="global"?null:this._popoverLocation!=="inline"?this._popoverLocation:this._origin instanceof sn?this._origin.nativeElement:DT(this._origin)?this._origin:null}_getOriginPoint(t,n,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(t,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,n,i,r){let o=HV(n),{x:s,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let d=0-s,u=s+o.width-i.width,h=0-a,p=a+o.height-i.height,f=this._subtractOverflows(o.width,d,u),g=this._subtractOverflows(o.height,h,p),C=f*g;return{visibleArea:C,isCompletelyWithinViewport:o.width*o.height===C,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:f==o.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=GV(this._overlayRef.getConfig().minHeight),a=GV(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||s!=null&&s<=r,c=t.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=HV(n),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),c=Math.max(o.left-i.left-t.x,0),d=0,u=0;return r.width<=o.width?d=c||-s:d=t.x<this._getViewportMarginStart()?o.left-i.left-t.x:0,r.height<=o.height?u=l||-a:u=t.y<this._getViewportMarginTop()?o.top-i.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!mae(this._lastScrollVisibility,i)){let r=new k2(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,n){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(n.overlayY==="top")s=t.y,o=i.height-s+this._getViewportMarginBottom();else if(n.overlayY==="bottom")a=i.height-t.y+this._getViewportMarginTop()+this._getViewportMarginBottom(),o=i.height-a+this._getViewportMarginTop();else{let p=Math.min(i.bottom-t.y+i.top,t.y),f=this._lastBoundingBoxSize.height;o=p*2,s=t.y-p,o>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-f/2)}let l=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,c=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,d,u,h;if(c)h=i.width-t.x+this._getViewportMarginStart()+this._getViewportMarginEnd(),d=t.x-this._getViewportMarginStart();else if(l)u=t.x,d=i.right-t.x-this._getViewportMarginEnd();else{let p=Math.min(i.right-t.x+i.left,t.x),f=this._lastBoundingBoxSize.width;d=p*2,u=t.x-p,d>f&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-f/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(t,n){let i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="auto",r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.width=Ir(i.width),r.height=Ir(i.height),r.top=Ir(i.top)||"auto",r.bottom=Ir(i.bottom)||"auto",r.left=Ir(i.left)||"auto",r.right=Ir(i.right)||"auto",n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Ir(o)),s&&(r.maxWidth=Ir(s))}this._lastBoundingBoxSize=i,Bf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Bf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Bf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();Bf(i,this._getExactOverlayY(n,t,d)),Bf(i,this._getExactOverlayX(n,t,d))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Ir(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Ir(s.maxWidth):o&&(i.maxWidth="")),Bf(this._pane.style,i)}_getExactOverlayY(t,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Ir(o.y);return r}_getExactOverlayX(t,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Ir(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:NV(t,i),isOriginOutsideView:ST(t,i),isOverlayClipped:NV(n,i),isOverlayOutsideView:ST(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._getViewportMarginTop(),left:i.left+this._getViewportMarginStart(),right:i.left+t-this._getViewportMarginEnd(),bottom:i.top+n-this._getViewportMarginBottom(),width:t-this._getViewportMarginStart()-this._getViewportMarginEnd(),height:n-this._getViewportMarginTop()-this._getViewportMarginBottom()}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&dv(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getViewportMarginStart(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.start??0}_getViewportMarginEnd(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.end??0}_getViewportMarginTop(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.top??0}_getViewportMarginBottom(){return typeof this._viewportMargin=="number"?this._viewportMargin:this._viewportMargin?.bottom??0}_getOriginRect(){let t=this._origin;if(t instanceof sn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}};function Bf(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function GV(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(gae);return!n||n==="px"?parseFloat(t):null}return e||null}function HV(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function mae(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var zV="cdk-global-overlay-wrapper";function iw(e){return new O2}var O2=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(zV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",f="",g="";l?g="flex-start":d==="center"?(g="center",h?f=u:p=u):h?d==="left"||d==="end"?(g="flex-end",p=u):(d==="right"||d==="start")&&(g="flex-start",f=u):d==="left"||d==="start"?(g="flex-start",p=u):(d==="right"||d==="end")&&(g="flex-end",f=u),t.position=this._cssPosition,t.marginLeft=l?"0":p,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":f,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(zV),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},ZV=(()=>{class e{_injector=Z(_n);constructor(){}global(){return iw()}flexibleConnectedTo(n){return nw(this._injector,n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),XV=new Ke("OVERLAY_DEFAULT_CONFIG");function Gf(e,t){e.get(Oo).load(KV);let n=e.get(YV),i=e.get($t),r=e.get(Oa),o=e.get(Ta),s=e.get(yc),a=e.get(co,null,{optional:!0})||e.get(xo).createRenderer(null,null),l=new Vf(t),c=e.get(XV,null,{optional:!0})?.usePopover??!0;l.direction=l.direction||s.value,"showPopover"in i.body?l.usePopover=t?.usePopover??c:l.usePopover=!1;let d=i.createElement("div"),u=i.createElement("div");d.id=r.getId("cdk-overlay-"),d.classList.add("cdk-overlay-pane"),u.appendChild(d),l.usePopover&&(u.setAttribute("popover","manual"),u.classList.add("cdk-overlay-popover"));let h=l.usePopover?l.positionStrategy?.getPopoverInsertionPoint?.():null;return n.getContainerElement().appendChild(u),DT(h)?h.after(u):h?.type==="parent"&&h.element.appendChild(u),new L2(new M2(d,o,e),u,d,l,e.get(It),e.get($V),i,e.get(_h),e.get(qV),t?.disableAnimations??e.get(XC,null,{optional:!0})==="NoopAnimations",e.get(ki),a)}var QV=(()=>{class e{scrollStrategies=Z(UV);_positionBuilder=Z(ZV);_injector=Z(_n);constructor(){}create(n){return Gf(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({providers:[QV],imports:[Ds,Qb,wT,wT]})}return e})();var B2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return e})();var JV={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var vae=new Ke("MATERIAL_ANIMATIONS"),eG=null;function Cae(){return Z(vae,{optional:!0})?.animationsDisabled||Z(XC,{optional:!0})==="NoopAnimations"?"di-disabled":(eG??=Z(D2).matchMedia("(prefers-reduced-motion)").matches,eG?"reduced-motion":"enabled")}function ea(){return Cae()!=="enabled"}var vl=(function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e})(vl||{}),_T=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=vl.HIDDEN;constructor(t,n,i,r=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},tG=Th({passive:!0,capture:!0}),AT=class{_events=new Map;addHandler(t,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,tG)})}removeHandler(t,n,i){let r=this._events.get(t);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,tG)))}_delegateEventHandler=t=>{let n=Js(t);n&&this._events.get(t.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(t))})}},rw={enterDuration:225,exitDuration:150},bae=800,nG=Th({passive:!0,capture:!0}),iG=["mousedown","touchstart"],rG=["mouseup","mouseleave","touchend","touchcancel"],wae=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return e})(),V2=class e{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new AT;constructor(t,n,i,r,o){this._target=t,this._ngZone=n,this._platform=r,r.isBrowser&&(this._containerElement=ud(i)),o&&o.get(Oo).load(wae)}fadeInRipple(t,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=T(T({},rw),i.animation);i.centered&&(t=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||yae(t,n,r),a=t-r.left,l=n-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${l-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,p=u.transitionDuration,f=h==="none"||p==="0s"||p==="0s, 0s"||r.width===0&&r.height===0,g=new _T(this,d,i,f);d.style.transform="scale3d(1, 1, 1)",g.state=vl.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let C=null;return!f&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let m=()=>{C&&(C.fallbackTimer=null),clearTimeout(x),this._finishRippleTransition(g)},w=()=>this._destroyRipple(g),x=setTimeout(w,c+100);d.addEventListener("transitionend",m),d.addEventListener("transitioncancel",w),C={onTransitionEnd:m,onTransitionCancel:w,fallbackTimer:x}}),this._activeRipples.set(g,C),(f||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(t){if(t.state===vl.FADING_OUT||t.state===vl.HIDDEN)return;let n=t.element,i=T(T({},rw),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=vl.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=ud(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,iG.forEach(i=>{e._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{rG.forEach(n=>{this._triggerElement.addEventListener(n,this,nG)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===vl.FADING_IN?this._startFadeOutTransition(t):t.state===vl.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=vl.VISIBLE,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=vl.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),t.element.remove()}_onMousedown(t){let n=zb(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+bae;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!jb(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===vl.VISIBLE||t.config.terminateOnPointerUp&&t.state===vl.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(iG.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(rG.forEach(n=>t.removeEventListener(n,this,nG)),this._pointerUpEventsRegistered=!1))}};function yae(e,t,n){let i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}var oG=new Ke("mat-ripple-global-options");var Sae={capture:!0},xae=["focus","mousedown","mouseenter","touchstart"],RT="mat-ripple-loader-uninitialized",FT="mat-ripple-loader-class-name",sG="mat-ripple-loader-centered",G2="mat-ripple-loader-disabled",aG=(()=>{class e{_document=Z($t);_animationsDisabled=ea();_globalRippleOptions=Z(oG,{optional:!0});_platform=Z(ui);_ngZone=Z(It);_injector=Z(_n);_eventCleanups;_hosts=new Map;constructor(){let n=Z(xo).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>xae.map(i=>n.listen(this._document,i,this._onInteraction,Sae)))}ngOnDestroy(){let n=this._hosts.keys();for(let i of n)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(n,i){n.setAttribute(RT,this._globalRippleOptions?.namespace??""),(i.className||!n.hasAttribute(FT))&&n.setAttribute(FT,i.className||""),i.centered&&n.setAttribute(sG,""),i.disabled&&n.setAttribute(G2,"")}setDisabled(n,i){let r=this._hosts.get(n);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(n))):i?n.setAttribute(G2,""):n.removeAttribute(G2)}_onInteraction=n=>{let i=Js(n);if(i instanceof HTMLElement){let r=i.closest(`[${RT}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(n){if(!this._document||this._hosts.has(n))return;n.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",n.getAttribute(FT)),n.append(i);let r=this._globalRippleOptions,o=this._animationsDisabled?0:r?.animation?.enterDuration??rw.enterDuration,s=this._animationsDisabled?0:r?.animation?.exitDuration??rw.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||n.hasAttribute(G2),rippleConfig:{centered:n.hasAttribute(sG),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},l=new V2(a,this._ngZone,i,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(n),this._hosts.set(n,{target:a,renderer:l,hasSetUpEvents:c}),n.removeAttribute(RT)}destroyRipple(n){let i=this._hosts.get(n);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Eae=["mat-icon-button",""],Dae=["*"],_ae=new Ke("MAT_BUTTON_CONFIG");function lG(e){return e==null?void 0:lI(e)}var MT=(()=>{class e{_elementRef=Z(sn);_ngZone=Z(It);_animationsDisabled=ea();_config=Z(_ae,{optional:!0});_focusMonitor=Z(cv);_cleanupClick;_renderer=Z(co);_rippleLoader=Z(aG);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(n){this.tabIndex=n}constructor(){Z(Oo).load(B2);let n=this._elementRef.nativeElement;this._isAnchor=n.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",i){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",n=>{this.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Yi("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Gm(r.color?"mat-"+r.color:""),Xn("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Se],disabled:[2,"disabled","disabled",Se],ariaDisabled:[2,"aria-disabled","ariaDisabled",Se],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Se],tabIndex:[2,"tabIndex","tabIndex",lG],_tabindex:[2,"tabindex","_tabindex",lG]}})}return e})(),H2=(()=>{class e extends MT{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[br],attrs:Eae,ngContentSelectors:Dae,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(pl(),Zs(0,"span",0),Sr(1),Zs(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();var cG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[Ds]})}return e})();var Aae=["matButton",""],Rae=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Fae=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var dG=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),ow=(()=>{class e extends MT{get appearance(){return this._appearance}set appearance(n){this.setAppearance(n||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let n=Mae(this._elementRef.nativeElement);n&&this.setAppearance(n)}setAppearance(n){if(n===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?dG.get(this._appearance):null,o=dG.get(n);r&&i.remove(...r),i.add(...o),this._appearance=n}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[br],attrs:Aae,ngContentSelectors:Fae,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(pl(Rae),Zs(0,"span",0),Sr(1),Ks(2,"span",1),Sr(3,1),Ys(),Sr(4,2),Zs(5,"span",2)(6,"span",3)),i&2&&Xn("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();function Mae(e){return e.hasAttribute("mat-raised-button")?"elevated":e.hasAttribute("mat-stroked-button")?"outlined":e.hasAttribute("mat-flat-button")?"filled":e.hasAttribute("mat-button")?"text":null}var IT=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[cG,Ds]})}return e})();var Iae=["tooltip"],Tae=20;var Pae=new Ke("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let e=Z(_n);return()=>tw(e,{scrollThrottle:Tae})}}),kae=new Ke("mat-tooltip-default-options",{providedIn:"root",factory:()=>({showDelay:0,hideDelay:0,touchendHideDelay:1500})});var uG="tooltip-panel",hG=Th({passive:!0}),Lae=8,Oae=8,Nae=24,Bae=200,pG=(()=>{class e{_elementRef=Z(sn);_ngZone=Z(It);_platform=Z(ui);_ariaDescriber=Z(PV);_focusMonitor=Z(cv);_dir=Z(yc);_injector=Z(_n);_viewContainerRef=Z(qr);_animationsDisabled=ea();_defaultOptions=Z(kae,{optional:!0});_overlayRef;_tooltipInstance;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=Vae;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(n){this._positionAtOrigin=Yb(n),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(n){let i=Yb(n);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=$b(n)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=$b(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(n){let i=this._message;this._message=n!=null?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new At;_isDestroyed=!1;constructor(){let n=this._defaultOptions;n&&(this._showDelay=n.showDelay,this._hideDelay=n.hideDelay,n.position&&(this.position=n.position),n.positionAtOrigin&&(this.positionAtOrigin=n.positionAtOrigin),n.touchGestures&&(this.touchGestures=n.touchGestures),n.tooltipClass&&(this.tooltipClass=n.tooltipClass)),this._viewportMargin=Lae}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ki(this._destroyed)).subscribe(n=>{n?n==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let n=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{n.removeEventListener(i,r,hG)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(i);this._detach(),this._portal=this._portal||new hd(this._tooltipComponent,this._viewContainerRef);let o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(Ki(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(n)}hide(n=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(n):(i._cancelPendingAnimations(),this._detach()))}toggle(n){this._isTooltipVisible()?this.hide():this.show(void 0,n)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(n){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!n)&&s._origin instanceof sn)return this._overlayRef;this._detach()}let i=this._injector.get(uv).getAncestorScrollContainers(this._elementRef),r=`${this._cssClassPrefix}-${uG}`,o=nw(this._injector,this.positionAtOrigin?n||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i).withPopoverLocation("global");return o.positionChanges.pipe(Ki(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=Gf(this._injector,{direction:this._dir,positionStrategy:o,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,r]:r,scrollStrategy:this._injector.get(Pae)(),disableAnimations:this._animationsDisabled,usePopover:!0}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ki(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ki(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ki(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!A2(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(Ki(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){let i=n.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset(T(T({},r.main),o.main)),this._addOffset(T(T({},r.fallback),o.fallback))])}_addOffset(n){let i=Oae,r=!this._dir||this._dir.value=="ltr";return n.originY==="top"?n.offsetY=-i:n.originY==="bottom"?n.offsetY=i:n.originX==="start"?n.offsetX=r?-i:i:n.originX==="end"&&(n.offsetX=r?i:-i),n}_getOrigin(){let n=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"||i=="below"?r={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&n||i=="right"&&!n?r={originX:"start",originY:"center"}:(i=="after"||i=="right"&&n||i=="left"&&!n)&&(r={originX:"end",originY:"center"});let{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){let n=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"?r={overlayX:"center",overlayY:"bottom"}:i=="below"?r={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&n||i=="right"&&!n?r={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&n||i=="left"&&!n)&&(r={overlayX:"start",overlayY:"center"});let{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),Eo(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):n==="end"?n="start":n==="start"&&(n="end"),{x:n,y:i}}_updateCurrentPositionClass(n){let{overlayY:i,originX:r,originY:o}=n,s;if(i==="center"?this._dir&&this._dir.value==="rtl"?s=r==="end"?"left":"right":s=r==="start"?"left":"right":s=i==="bottom"&&o==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${uG}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",n=>{this._setupPointerExitEventsIfNeeded();let i;n.x!==void 0&&n.y!==void 0&&(i=n),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",n=>{let i=n.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let o=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions?.touchLongPressShowDelay??o)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",i=>{let r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};n.push(["touchend",i],["touchcancel",i])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,hG)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){let i=this._injector.get($t).elementFromPoint(n.clientX,n.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let n=this.touchGestures;if(n!=="off"){let i=this._elementRef.nativeElement,r=i.style;(n==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(n==="on"||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(n){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,n,"tooltip"),this._isDestroyed||Eo({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,r){i&2&&Xn("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return e})(),Vae=(()=>{class e{_changeDetectorRef=Z(Oi);_elementRef=Z(sn);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=ea();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new At;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(n){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let n=this._elementRef.nativeElement.getBoundingClientRect();return n.height>Nae&&n.width>=Bae}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){let i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(n?o:r),i.classList.add(n?r:o),this._isVisible!==n&&(this._isVisible=n,this._changeDetectorRef.markForCheck()),n&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(i);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-tooltip-component"]],viewQuery:function(i,r){if(i&1&&Li(Iae,7),i&2){let o;Yn(o=Zn())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,r){i&1&&an("mouseleave",function(s){return r._handleMouseLeave(s)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,r){if(i&1){let o=Xs();ze(0,"div",1,0),an("animationend",function(a){return Fn(o),Mn(r._handleAnimationEnd(a))}),ze(2,"div",2),Gt(3),We()()}i&2&&(Xn("mdc-tooltip--multiline",r._isMultiline),mn("ngClass",r.tooltipClass),Xe(3),fl(r.message))},dependencies:[cb],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return e})();var PT=class{_box;_destroyed=new At;_resizeSubject=new At;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new fn(n=>{let i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(zi(n=>n.some(i=>i.target===t)),aS({bufferSize:1,refCount:!0}),Ki(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},fG=(()=>{class e{_cleanupErrorListener;_observers=new Map;_ngZone=Z(It);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(n,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new PT(r)),this._observers.get(r).observe(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Gae=["notch"],Hae=["matFormFieldNotchedOutline",""],zae=["*"],gG=["iconPrefixContainer"],mG=["textPrefixContainer"],vG=["iconSuffixContainer"],CG=["textSuffixContainer"],jae=["textField"],Uae=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Wae=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function $ae(e,t){e&1&&ri(0,"span",21)}function qae(e,t){if(e&1&&(ze(0,"label",20),Sr(1,1),wr(2,$ae,1,0,"span",21),We()),e&2){let n=Wn(2);mn("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),Yi("for",n._control.disableAutomaticLabeling?null:n._control.id),Xe(2),yr(!n.hideRequiredMarker&&n._control.required?2:-1)}}function Kae(e,t){if(e&1&&wr(0,qae,3,5,"label",20),e&2){let n=Wn();yr(n._hasFloatingLabel()?0:-1)}}function Yae(e,t){e&1&&ri(0,"div",7)}function Zae(e,t){}function Xae(e,t){if(e&1&&Jo(0,Zae,0,0,"ng-template",13),e&2){Wn(2);let n=Vm(1);mn("ngTemplateOutlet",n)}}function Qae(e,t){if(e&1&&(ze(0,"div",9),wr(1,Xae,1,1,null,13),We()),e&2){let n=Wn();mn("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),Xe(),yr(n._forceDisplayInfixLabel()?-1:1)}}function Jae(e,t){e&1&&(ze(0,"div",10,2),Sr(2,2),We())}function ele(e,t){e&1&&(ze(0,"div",11,3),Sr(2,3),We())}function tle(e,t){}function nle(e,t){if(e&1&&Jo(0,tle,0,0,"ng-template",13),e&2){Wn();let n=Vm(1);mn("ngTemplateOutlet",n)}}function ile(e,t){e&1&&(ze(0,"div",14,4),Sr(2,4),We())}function rle(e,t){e&1&&(ze(0,"div",15,5),Sr(2,5),We())}function ole(e,t){e&1&&ri(0,"div",16)}function sle(e,t){e&1&&(ze(0,"div",18),Sr(1,6),We())}function ale(e,t){if(e&1&&(ze(0,"mat-hint",22),Gt(1),We()),e&2){let n=Wn(2);mn("id",n._hintLabelId),Xe(),fl(n.hintLabel)}}function lle(e,t){if(e&1&&(ze(0,"div",19),wr(1,ale,2,2,"mat-hint",22),Sr(2,7),ri(3,"div",23),Sr(4,8),We()),e&2){let n=Wn();Xe(),yr(n.hintLabel?1:-1)}}var kT=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["mat-label"]]})}return e})(),cle=new Ke("MatError");var LT=(()=>{class e{align="start";id=Z(Oa).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(Om("id",r.id),Yi("align",null),Xn("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return e})(),dle=new Ke("MatPrefix");var ule=new Ke("MatSuffix");var DG=new Ke("FloatingLabelParent"),bG=(()=>{class e{_elementRef=Z(sn);get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=Z(fG);_ngZone=Z(It);_parent=Z(DG);_resizeSubscription=new li;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return hle(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Xn("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return e})();function hle(e){let t=e;if(t.offsetParent!==null)return t.scrollWidth;let n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);let i=n.scrollWidth;return n.remove(),i}var wG="mdc-line-ripple--active",z2="mdc-line-ripple--deactivating",yG=(()=>{class e{_elementRef=Z(sn);_cleanupTransitionEnd;constructor(){let n=Z(It),i=Z(co);n.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(z2),n.add(wG)}deactivate(){this._elementRef.nativeElement.classList.add(z2)}_handleTransitionEnd=n=>{let i=this._elementRef.nativeElement.classList,r=i.contains(z2);n.propertyName==="opacity"&&r&&i.remove(wG,z2)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return e})(),SG=(()=>{class e{_elementRef=Z(sn);_ngZone=Z(It);open=!1;_notch;ngAfterViewInit(){let n=this._elementRef.nativeElement,i=n.querySelector(".mdc-floating-label");i?(n.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):n.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){let i=this._notch.nativeElement;!this.open||!n?i.style.width="":i.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(n){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${n}px)`)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&Li(Gae,5),i&2){let o;Yn(o=Zn())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Xn("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Hae,ngContentSelectors:zae,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(pl(),Zs(0,"div",1),Ks(1,"div",2,0),Sr(3),Ys(),Zs(4,"div",3))},encapsulation:2,changeDetection:0})}return e})(),ple=(()=>{class e{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e})}return e})();var fle=new Ke("MatFormField"),gle=new Ke("MAT_FORM_FIELD_DEFAULT_OPTIONS"),xG="fill",mle="auto",EG="fixed",vle="translateY(-50%)",_G=(()=>{class e{_elementRef=Z(sn);_changeDetectorRef=Z(Oi);_platform=Z(ui);_idGenerator=Z(Oa);_ngZone=Z(It);_defaults=Z(gle,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=ab("iconPrefixContainer");_textPrefixContainerSignal=ab("textPrefixContainer");_iconSuffixContainerSignal=ab("iconSuffixContainer");_textSuffixContainerSignal=ab("textSuffixContainer");_prefixSuffixContainers=Pa(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(n=>n?.nativeElement).filter(n=>n!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=dB(kT);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Yb(n)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||mle}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(n){let i=n||this._defaults?.appearance||xG;this._appearanceSignal.set(i)}_appearanceSignal=gn(xG);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||EG}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||EG}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}_destroyed=new At;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=ea();constructor(){let n=this._defaults,i=Z(yc);n&&(n.appearance&&(this.appearance=n.appearance),this._hideRequiredMarker=!!n?.hideRequiredMarker,n.color&&(this.color=n.color)),_m(()=>this._currentDirection=i.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Pa(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(n){let i=this._control,r="mat-mdc-form-field-type-";n&&this._elementRef.nativeElement.classList.remove(r+n.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(ll([void 0,void 0]),yn(()=>[i.errorState,i.userAriaDescribedBy]),sS(),zi(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(Ki(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),fm(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let n=this._control.focused;n&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!n&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",n),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",n)}_syncOutlineLabelOffset(){pB({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let n of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(n,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:n=>this._writeOutlinedLabelStyles(n())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Pa(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(n){let i=this._control?this._control.ngControl:null;return i&&i[n]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?n.push(o.id):this._hintLabel&&n.push(this._hintLabelId),s&&n.push(s.id)}else this._errorChildren&&n.push(...this._errorChildren.map(o=>o.id));let i=this._control.describedByIds,r;if(i){let o=this._describedByIds||n;r=n.concat(i.filter(s=>s&&!o.includes(s)))}else r=n;this._control.setDescribedByIds(r),this._describedByIds=n}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let n=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,r=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,a=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0,d=this._currentDirection==="rtl"?"-1":"1",u=`${s+a}px`,p=`calc(${d} * (${u} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,f=`var(--mat-mdc-form-field-label-transform, ${vle} translateX(${p}))`,g=s+a+l+c;return[f,g]}_writeOutlinedLabelStyles(n){if(n!==null){let[i,r]=n;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(XM(o,r._labelChild,kT,5),fu(o,ple,5),fu(o,dle,5),fu(o,ule,5),fu(o,cle,5),fu(o,LT,5)),i&2){mx();let s;Yn(s=Zn())&&(r._formFieldControl=s.first),Yn(s=Zn())&&(r._prefixChildren=s),Yn(s=Zn())&&(r._suffixChildren=s),Yn(s=Zn())&&(r._errorChildren=s),Yn(s=Zn())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(Bm(r._iconPrefixContainerSignal,gG,5),Bm(r._textPrefixContainerSignal,mG,5),Bm(r._iconSuffixContainerSignal,vG,5),Bm(r._textSuffixContainerSignal,CG,5),Li(jae,5),Li(gG,5),Li(mG,5),Li(vG,5),Li(CG,5),Li(bG,5),Li(SG,5),Li(yG,5)),i&2){mx(4);let o;Yn(o=Zn())&&(r._textField=o.first),Yn(o=Zn())&&(r._iconPrefixContainer=o.first),Yn(o=Zn())&&(r._textPrefixContainer=o.first),Yn(o=Zn())&&(r._iconSuffixContainer=o.first),Yn(o=Zn())&&(r._textSuffixContainer=o.first),Yn(o=Zn())&&(r._floatingLabel=o.first),Yn(o=Zn())&&(r._notchedOutline=o.first),Yn(o=Zn())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(i,r){i&2&&Xn("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[uo([{provide:fle,useExisting:e},{provide:DG,useExisting:e}])],ngContentSelectors:Wae,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],["aria-atomic","true","aria-live","polite",1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=Xs();pl(Uae),Jo(0,Kae,1,1,"ng-template",null,0,QM),ze(2,"div",6,1),an("click",function(a){return Fn(o),Mn(r._control.onContainerClick(a))}),wr(4,Yae,1,0,"div",7),ze(5,"div",8),wr(6,Qae,2,2,"div",9),wr(7,Jae,3,0,"div",10),wr(8,ele,3,0,"div",11),ze(9,"div",12),wr(10,nle,1,1,null,13),Sr(11),We(),wr(12,ile,3,0,"div",14),wr(13,rle,3,0,"div",15),We(),wr(14,ole,1,0,"div",16),We(),ze(15,"div",17),wr(16,sle,2,0,"div",18)(17,lle,5,1,"div",19),We()}if(i&2){let o;Xe(2),Xn("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),Xe(2),yr(!r._hasOutline()&&!r._control.disabled?4:-1),Xe(2),yr(r._hasOutline()?6:-1),Xe(),yr(r._hasIconPrefix?7:-1),Xe(),yr(r._hasTextPrefix?8:-1),Xe(2),yr(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),Xe(2),yr(r._hasTextSuffix?12:-1),Xe(),yr(r._hasIconSuffix?13:-1),Xe(),yr(r._hasOutline()?-1:14),Xe(),Xn("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let s=r._getSubscriptMessageType();Xe(),yr((o=s)==="error"?16:o==="hint"?17:-1)}},dependencies:[bG,SG,uI,yG,LT],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return e})();var Cle=["mat-calendar-body",""];function ble(e,t){return this._trackRow(t)}var TG=(e,t)=>t.id;function wle(e,t){if(e&1&&(ze(0,"tr",0)(1,"td",3),Gt(2),We()()),e&2){let n=Wn();Xe(),xf("padding-top",n._cellPadding)("padding-bottom",n._cellPadding),Yi("colspan",n.numCols),Xe(),es(" ",n.label," ")}}function yle(e,t){if(e&1&&(ze(0,"td",3),Gt(1),We()),e&2){let n=Wn(2);xf("padding-top",n._cellPadding)("padding-bottom",n._cellPadding),Yi("colspan",n._firstRowOffset),Xe(),es(" ",n._firstRowOffset>=n.labelMinRequiredCells?n.label:""," ")}}function Sle(e,t){if(e&1){let n=Xs();ze(0,"td",6)(1,"button",7),an("click",function(r){let o=Fn(n).$implicit,s=Wn(2);return Mn(s._cellClicked(o,r))})("focus",function(r){let o=Fn(n).$implicit,s=Wn(2);return Mn(s._emitActiveDateChange(o,r))}),ze(2,"span",8),Gt(3),We(),ri(4,"span",9),We()()}if(e&2){let n=t.$implicit,i=t.$index,r=Wn().$index,o=Wn();xf("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),Yi("data-mat-row",r)("data-mat-col",i),Xe(),Xn("mat-calendar-body-disabled",!n.enabled)("mat-calendar-body-active",o._isActiveCell(r,i))("mat-calendar-body-range-start",o._isRangeStart(n.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(n.compareValue))("mat-calendar-body-in-range",o._isInRange(n.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(n.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(n.compareValue,r,i))("mat-calendar-body-comparison-start",o._isComparisonStart(n.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(n.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(n.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(n.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(n.compareValue))("mat-calendar-body-in-preview",o._isInPreview(n.compareValue)),mn("ngClass",n.cssClasses)("tabindex",o._isActiveCell(r,i)?0:-1),Yi("aria-label",n.ariaLabel)("aria-disabled",!n.enabled||null)("aria-pressed",o._isSelected(n.compareValue))("aria-current",o.todayValue===n.compareValue?"date":null)("aria-describedby",o._getDescribedby(n.compareValue)),Xe(),Xn("mat-calendar-body-selected",o._isSelected(n.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(n.compareValue))("mat-calendar-body-today",o.todayValue===n.compareValue),Xe(),es(" ",n.displayValue," ")}}function xle(e,t){if(e&1&&(ze(0,"tr",1),wr(1,yle,2,6,"td",4),nb(2,Sle,5,48,"td",5,TG),We()),e&2){let n=t.$implicit,i=t.$index,r=Wn();Xe(),yr(i===0&&r._firstRowOffset?1:-1),Xe(),ib(n)}}function Ele(e,t){if(e&1&&(ze(0,"th",2)(1,"span",6),Gt(2),We(),ze(3,"span",3),Gt(4),We()()),e&2){let n=t.$implicit;Xe(2),fl(n.long),Xe(2),fl(n.narrow)}}var Dle=["*"];function _le(e,t){}function Ale(e,t){if(e&1){let n=Xs();ze(0,"mat-month-view",4),sr("activeDateChange",function(r){Fn(n);let o=Wn();return xr(o.activeDate,r)||(o.activeDate=r),Mn(r)}),an("_userSelection",function(r){Fn(n);let o=Wn();return Mn(o._dateSelected(r))})("dragStarted",function(r){Fn(n);let o=Wn();return Mn(o._dragStarted(r))})("dragEnded",function(r){Fn(n);let o=Wn();return Mn(o._dragEnded(r))}),We()}if(e&2){let n=Wn();or("activeDate",n.activeDate),mn("selected",n.selected)("dateFilter",n.dateFilter)("maxDate",n.maxDate)("minDate",n.minDate)("dateClass",n.dateClass)("comparisonStart",n.comparisonStart)("comparisonEnd",n.comparisonEnd)("startDateAccessibleName",n.startDateAccessibleName)("endDateAccessibleName",n.endDateAccessibleName)("activeDrag",n._activeDrag)}}function Rle(e,t){if(e&1){let n=Xs();ze(0,"mat-year-view",5),sr("activeDateChange",function(r){Fn(n);let o=Wn();return xr(o.activeDate,r)||(o.activeDate=r),Mn(r)}),an("monthSelected",function(r){Fn(n);let o=Wn();return Mn(o._monthSelectedInYearView(r))})("selectedChange",function(r){Fn(n);let o=Wn();return Mn(o._goToDateInView(r,"month"))}),We()}if(e&2){let n=Wn();or("activeDate",n.activeDate),mn("selected",n.selected)("dateFilter",n.dateFilter)("maxDate",n.maxDate)("minDate",n.minDate)("dateClass",n.dateClass)}}function Fle(e,t){if(e&1){let n=Xs();ze(0,"mat-multi-year-view",6),sr("activeDateChange",function(r){Fn(n);let o=Wn();return xr(o.activeDate,r)||(o.activeDate=r),Mn(r)}),an("yearSelected",function(r){Fn(n);let o=Wn();return Mn(o._yearSelectedInMultiYearView(r))})("selectedChange",function(r){Fn(n);let o=Wn();return Mn(o._goToDateInView(r,"year"))}),We()}if(e&2){let n=Wn();or("activeDate",n.activeDate),mn("selected",n.selected)("dateFilter",n.dateFilter)("maxDate",n.maxDate)("minDate",n.minDate)("dateClass",n.dateClass)}}function Mle(e,t){}var Ile=["button"],Tle=[[["","matDatepickerToggleIcon",""]]],Ple=["[matDatepickerToggleIcon]"];function kle(e,t){e&1&&(gf(),ze(0,"svg",2),ri(1,"path",3),We())}var Cv=(()=>{class e{changes=new At;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(n,i){return`${n} \u2013 ${i}`}formatYearRangeLabel(n,i){return`${n} to ${i}`}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Lle=0,aw=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=Lle++;constructor(t,n,i,r,o={},s=t,a){this.value=t,this.displayValue=n,this.ariaLabel=i,this.enabled=r,this.cssClasses=o,this.compareValue=s,this.rawValue=a}},Ole={passive:!1,capture:!0},j2={passive:!0,capture:!0},AG={passive:!0},vv=(()=>{class e{_elementRef=Z(sn);_ngZone=Z(It);_platform=Z(ui);_intl=Z(Cv);_eventCleanups;_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new Ee;previewChange=new Ee;activeDateChange=new Ee;dragStarted=new Ee;dragEnded=new Ee;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=Z(_n);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=n=>n;constructor(){let n=Z(co),i=Z(Oa);this._startDateLabelId=i.getId("mat-calendar-body-start-"),this._endDateLabelId=i.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=i.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=i.getId("mat-calendar-body-comparison-end-"),Z(Oo).load(B2),this._ngZone.runOutsideAngular(()=>{let r=this._elementRef.nativeElement,o=[n.listen(r,"touchmove",this._touchmoveHandler,Ole),n.listen(r,"mouseenter",this._enterHandler,j2),n.listen(r,"focus",this._enterHandler,j2),n.listen(r,"mouseleave",this._leaveHandler,j2),n.listen(r,"blur",this._leaveHandler,j2),n.listen(r,"mousedown",this._mousedownHandler,AG),n.listen(r,"touchstart",this._mousedownHandler,AG)];this._platform.isBrowser&&o.push(n.listen("window","mouseup",this._mouseupHandler),n.listen("window","touchend",this._touchendHandler)),this._eventCleanups=o})}_cellClicked(n,i){this._didDragSinceMouseDown||n.enabled&&this.selectedValueChange.emit({value:n.value,event:i})}_emitActiveDateChange(n,i){n.enabled&&this.activeDateChange.emit({value:n.value,event:i})}_isSelected(n){return this.startValue===n||this.endValue===n}ngOnChanges(n){let i=n.numCols,{rows:r,numCols:o}=this;(n.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?o-r[0].length:0),(n.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/o}%`),(i||!this._cellWidth)&&(this._cellWidth=`${100/o}%`)}ngOnDestroy(){this._eventCleanups.forEach(n=>n())}_isActiveCell(n,i){let r=n*this.numCols+i;return n&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(n=!0){Eo(()=>{setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(n||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(n){return BT(n,this.startValue,this.endValue)}_isRangeEnd(n){return VT(n,this.startValue,this.endValue)}_isInRange(n){return GT(n,this.startValue,this.endValue,this.isRange)}_isComparisonStart(n){return BT(n,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(n,i,r){if(!this._isComparisonStart(n)||this._isRangeStart(n)||!this._isInRange(n))return!1;let o=this.rows[i][r-1];if(!o){let s=this.rows[i-1];o=s&&s[s.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(n,i,r){if(!this._isComparisonEnd(n)||this._isRangeEnd(n)||!this._isInRange(n))return!1;let o=this.rows[i][r+1];if(!o){let s=this.rows[i+1];o=s&&s[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(n){return VT(n,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(n){return GT(n,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(n){return this.comparisonStart===this.comparisonEnd&&n===this.comparisonStart}_isPreviewStart(n){return BT(n,this.previewStart,this.previewEnd)}_isPreviewEnd(n){return VT(n,this.previewStart,this.previewEnd)}_isInPreview(n){return GT(n,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(n){if(!this.isRange)return null;if(this.startValue===n&&this.endValue===n)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===n)return this._startDateLabelId;if(this.endValue===n)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(n===this.comparisonStart&&n===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(n===this.comparisonStart)return this._comparisonStartDateLabelId;if(n===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=n=>{if(this._skipNextFocus&&n.type==="focus"){this._skipNextFocus=!1;return}if(n.target&&this.isRange){let i=this._getCellFromElement(n.target);i&&this._ngZone.run(()=>this.previewChange.emit({value:i.enabled?i:null,event:n}))}};_touchmoveHandler=n=>{if(!this.isRange)return;let i=RG(n),r=i?this._getCellFromElement(i):null;i!==n.target&&(this._didDragSinceMouseDown=!0),NT(n.target)&&n.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:r?.enabled?r:null,event:n}))};_leaveHandler=n=>{this.previewEnd!==null&&this.isRange&&(n.type!=="blur"&&(this._didDragSinceMouseDown=!0),n.target&&this._getCellFromElement(n.target)&&!(n.relatedTarget&&this._getCellFromElement(n.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:n})))};_mousedownHandler=n=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let i=n.target&&this._getCellFromElement(n.target);!i||!this._isInRange(i.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:i.rawValue,event:n})})};_mouseupHandler=n=>{if(!this.isRange)return;let i=NT(n.target);if(!i){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:n})});return}i.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let r=this._getCellFromElement(i);this.dragEnded.emit({value:r?.rawValue??null,event:n})})};_touchendHandler=n=>{let i=RG(n);i&&this._mouseupHandler({target:i})};_getCellFromElement(n){let i=NT(n);if(i){let r=i.getAttribute("data-mat-row"),o=i.getAttribute("data-mat-col");if(r&&o)return this.rows[parseInt(r)]?.[parseInt(o)]||null}return null}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[$r],attrs:Cle,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,r){i&1&&(wr(0,wle,3,6,"tr",0),nb(1,xle,4,1,"tr",1,ble,!0),ze(3,"span",2),Gt(4),We(),ze(5,"span",2),Gt(6),We(),ze(7,"span",2),Gt(8),We(),ze(9,"span",2),Gt(10),We()),i&2&&(yr(r._firstRowOffset<r.labelMinRequiredCells?0:-1),Xe(),ib(r.rows),Xe(2),mn("id",r._startDateLabelId),Xe(),es(" ",r.startDateAccessibleName,`
`),Xe(),mn("id",r._endDateLabelId),Xe(),es(" ",r.endDateAccessibleName,`
`),Xe(),mn("id",r._comparisonStartDateLabelId),Xe(),Ef(" ",r.comparisonDateAccessibleName," ",r.startDateAccessibleName,`
`),Xe(),mn("id",r._comparisonEndDateLabelId),Xe(),Ef(" ",r.comparisonDateAccessibleName," ",r.endDateAccessibleName,`
`))},dependencies:[cb],styles:[`.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}
`],encapsulation:2,changeDetection:0})}return e})();function OT(e){return e?.nodeName==="TD"}function NT(e){let t;return OT(e)?t=e:OT(e.parentNode)?t=e.parentNode:OT(e.parentNode?.parentNode)&&(t=e.parentNode.parentNode),t?.getAttribute("data-mat-row")!=null?t:null}function BT(e,t,n){return n!==null&&t!==n&&e<n&&e===t}function VT(e,t,n){return t!==null&&t!==n&&e>=t&&e===n}function GT(e,t,n,i){return i&&t!==null&&n!==null&&t!==n&&e>=t&&e<=n}function RG(e){let t=e.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}var Cl=class{start;end;_disableStructuralEquivalency;constructor(t,n){this.start=t,this.end=n}},U2=(()=>{class e{selection;_adapter;_selectionChanged=new At;selectionChanged=this._selectionChanged;constructor(n,i){this.selection=n,this._adapter=i,this.selection=n}updateSelection(n,i){let r=this.selection;this.selection=n,this._selectionChanged.next({selection:n,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(n){return this._adapter.isDateInstance(n)&&this._adapter.isValid(n)}static \u0275fac=function(i){VM()};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})(),Nle=(()=>{class e extends U2{constructor(n){super(null,n)}add(n){super.updateSelection(n,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let n=new e(this._adapter);return n.updateSelection(this.selection,this),n}static \u0275fac=function(i){return new(i||e)(Tt(Qs))};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})();var Ble={provide:U2,useFactory:()=>Z(U2,{optional:!0,skipSelf:!0})||new Nle(Z(Qs))};var PG=new Ke("MAT_DATE_RANGE_SELECTION_STRATEGY");var HT=7,Vle=0,FG=(()=>{class e{_changeDetectorRef=Z(Oi);_dateFormats=Z(vu,{optional:!0});_dateAdapter=Z(Qs,{optional:!0});_dir=Z(yc,{optional:!0});_rangeStrategy=Z(PG,{optional:!0});_rerenderSubscription=li.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(n){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(n){n instanceof Cl?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_minDate;get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new Ee;_userSelection=new Ee;dragStarted=new Ee;dragEnded=new Ee;activeDateChange=new Ee;_matCalendarBody;_monthLabel=gn("");_weeks=gn([]);_firstWeekOffset=gn(0);_rangeStart=gn(null);_rangeEnd=gn(null);_comparisonRangeStart=gn(null);_comparisonRangeEnd=gn(null);_previewStart=gn(null);_previewEnd=gn(null);_isRange=gn(!1);_todayDate=gn(null);_weekdays=gn([]);constructor(){Z(Oo).load(Cu),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ll(null)).subscribe(()=>this._init())}ngOnChanges(n){let i=n.comparisonStart||n.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),n.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(n){let i=n.value,r=this._getDateFromDayOfMonth(i),o,s;this._selected instanceof Cl?(o=this._getDateInCurrentMonth(this._selected.start),s=this._getDateInCurrentMonth(this._selected.end)):o=s=this._getDateInCurrentMonth(this._selected),(o!==i||s!==i)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:n.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(n){let i=n.value,r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(n){let i=this._activeDate,r=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=n.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=n.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&n.preventDefault();return;case 27:this._previewEnd()!=null&&!A2(n)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:n}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:n})),n.preventDefault(),n.stopPropagation());return;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate.set(this._getCellCompareValue(this._dateAdapter.today())),this._monthLabel.set(this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase());let n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset.set((HT+this._dateAdapter.getDayOfWeek(n)-this._dateAdapter.getFirstDayOfWeek())%HT),this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(n){this._matCalendarBody._focusActiveCell(n)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:n,value:i}){if(this._rangeStrategy){let r=i?i.rawValue:null,o=this._rangeStrategy.createPreview(r,this.selected,n);if(this._previewStart.set(this._getCellCompareValue(o.start)),this._previewEnd.set(this._getCellCompareValue(o.end)),this.activeDrag&&r){let s=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,n);s&&(this._previewStart.set(this._getCellCompareValue(s.start)),this._previewEnd.set(this._getCellCompareValue(s.end)))}}}_dragEnded(n){if(this.activeDrag)if(n.value){let i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,n.value,n.event);this.dragEnded.emit({value:i??null,event:n.event})}else this.dragEnded.emit({value:null,event:n.event})}_getDateFromDayOfMonth(n){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n)}_initWeekdays(){let n=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow"),o=this._dateAdapter.getDayOfWeekNames("long").map((s,a)=>({long:s,narrow:i[a],id:Vle++}));this._weekdays.set(o.slice(n).concat(o.slice(0,n)))}_createWeekCells(){let n=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames(),r=[[]];for(let o=0,s=this._firstWeekOffset();o<n;o++,s++){s==HT&&(r.push([]),s=0);let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),o+1),l=this._shouldEnableDate(a),c=this._dateAdapter.format(a,this._dateFormats.display.dateA11yLabel),d=this.dateClass?this.dateClass(a,"month"):void 0;r[r.length-1].push(new aw(o+1,i[o],c,l,d,this._getCellCompareValue(a),a))}this._weeks.set(r)}_shouldEnableDate(n){return!!n&&(!this.minDate||this._dateAdapter.compareDate(n,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(n,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(n))}_getDateInCurrentMonth(n){return n&&this._hasSameMonthAndYear(n,this.activeDate)?this._dateAdapter.getDate(n):null}_hasSameMonthAndYear(n,i){return!!(n&&i&&this._dateAdapter.getMonth(n)==this._dateAdapter.getMonth(i)&&this._dateAdapter.getYear(n)==this._dateAdapter.getYear(i))}_getCellCompareValue(n){if(n){let i=this._dateAdapter.getYear(n),r=this._dateAdapter.getMonth(n),o=this._dateAdapter.getDate(n);return new Date(i,r,o).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(n){n instanceof Cl?(this._rangeStart.set(this._getCellCompareValue(n.start)),this._rangeEnd.set(this._getCellCompareValue(n.end)),this._isRange.set(!0)):(this._rangeStart.set(this._getCellCompareValue(n)),this._rangeEnd.set(this._rangeStart()),this._isRange.set(!1)),this._comparisonRangeStart.set(this._getCellCompareValue(this.comparisonStart)),this._comparisonRangeEnd.set(this._getCellCompareValue(this.comparisonEnd))}_canSelect(n){return!this.dateFilter||this.dateFilter(n)}_clearPreview(){this._previewStart.set(null),this._previewEnd.set(null)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-month-view"]],viewQuery:function(i,r){if(i&1&&Li(vv,5),i&2){let o;Yn(o=Zn())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[$r],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,r){i&1&&(ze(0,"table",0)(1,"thead",1)(2,"tr"),nb(3,Ele,5,2,"th",2,TG),We(),ze(5,"tr",3),ri(6,"th",4),We()(),ze(7,"tbody",5),an("selectedValueChange",function(s){return r._dateSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("previewChange",function(s){return r._previewChanged(s)})("dragStarted",function(s){return r.dragStarted.emit(s)})("dragEnded",function(s){return r._dragEnded(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),We()()),i&2&&(Xe(3),ib(r._weekdays()),Xe(4),mn("label",r._monthLabel())("rows",r._weeks())("todayValue",r._todayDate())("startValue",r._rangeStart())("endValue",r._rangeEnd())("comparisonStart",r._comparisonRangeStart())("comparisonEnd",r._comparisonRangeEnd())("previewStart",r._previewStart())("previewEnd",r._previewEnd())("isRange",r._isRange())("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName))},dependencies:[vv],encapsulation:2,changeDetection:0})}return e})(),Na=24,zT=4,MG=(()=>{class e{_changeDetectorRef=Z(Oi);_dateAdapter=Z(Qs,{optional:!0});_dir=Z(yc,{optional:!0});_rerenderSubscription=li.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(n){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),kG(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(n){n instanceof Cl?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setSelectedYear(n)}_selected;get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_minDate;get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_maxDate;dateFilter;dateClass;selectedChange=new Ee;yearSelected=new Ee;activeDateChange=new Ee;_matCalendarBody;_years=gn([]);_todayYear=gn(0);_selectedYear=gn(null);constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ll(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear.set(this._dateAdapter.getYear(this._dateAdapter.today()));let i=this._dateAdapter.getYear(this._activeDate)-sw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate),r=[];for(let o=0,s=[];o<Na;o++)s.push(i+o),s.length==zT&&(r.push(s.map(a=>this._createCellForYear(a))),s=[]);this._years.set(r),this._changeDetectorRef.markForCheck()}_yearSelected(n){let i=n.value,r=this._dateAdapter.createDate(i,0,1),o=this._getDateFromYear(i);this.yearSelected.emit(r),this.selectedChange.emit(o)}_updateActiveDate(n){let i=n.value,r=this._activeDate;this.activeDate=this._getDateFromYear(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(n){let i=this._activeDate,r=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-zT);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,zT);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-sw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Na-sw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?-Na*10:-Na);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?Na*10:Na);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_getActiveCell(){return sw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(n){let i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(n,i,1));return this._dateAdapter.createDate(n,i,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(n){let i=this._dateAdapter.createDate(n,0,1),r=this._dateAdapter.getYearName(i),o=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new aw(n,r,r,this._shouldEnableYear(n),o)}_shouldEnableYear(n){if(n==null||this.maxDate&&n>this._dateAdapter.getYear(this.maxDate)||this.minDate&&n<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(n,0,1);for(let r=i;this._dateAdapter.getYear(r)==n;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(n){if(this._selectedYear.set(null),n instanceof Cl){let i=n.start||n.end;i&&this._selectedYear.set(this._dateAdapter.getYear(i))}else n&&this._selectedYear.set(this._dateAdapter.getYear(n))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-multi-year-view"]],viewQuery:function(i,r){if(i&1&&Li(vv,5),i&2){let o;Yn(o=Zn())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(ze(0,"table",0)(1,"thead",1)(2,"tr"),ri(3,"th",2),We()(),ze(4,"tbody",3),an("selectedValueChange",function(s){return r._yearSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),We()()),i&2&&(Xe(4),mn("rows",r._years())("todayValue",r._todayYear())("startValue",r._selectedYear())("endValue",r._selectedYear())("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},dependencies:[vv],encapsulation:2,changeDetection:0})}return e})();function kG(e,t,n,i,r){let o=e.getYear(t),s=e.getYear(n),a=LG(e,i,r);return Math.floor((o-a)/Na)===Math.floor((s-a)/Na)}function sw(e,t,n,i){let r=e.getYear(t);return Gle(r-LG(e,n,i),Na)}function LG(e,t,n){let i=0;return n?i=e.getYear(n)-Na+1:t&&(i=e.getYear(t)),i}function Gle(e,t){return(e%t+t)%t}var IG=(()=>{class e{_changeDetectorRef=Z(Oi);_dateFormats=Z(vu,{optional:!0});_dateAdapter=Z(Qs,{optional:!0});_dir=Z(yc,{optional:!0});_rerenderSubscription=li.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(n){let i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(n){n instanceof Cl?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setSelectedMonth(n)}_selected;get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_minDate;get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_maxDate;dateFilter;dateClass;selectedChange=new Ee;monthSelected=new Ee;activeDateChange=new Ee;_matCalendarBody;_months=gn([]);_yearLabel=gn("");_todayMonth=gn(null);_selectedMonth=gn(null);constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ll(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(n){let i=n.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);let o=this._getDateFromMonth(i);this.selectedChange.emit(o)}_updateActiveDate(n){let i=n.value,r=this._activeDate;this.activeDate=this._getDateFromMonth(i),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(n){let i=this._activeDate,r=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth.set(this._getMonthInCurrentYear(this._dateAdapter.today())),this._yearLabel.set(this._dateAdapter.getYearName(this.activeDate));let n=this._dateAdapter.getMonthNames("short");this._months.set([[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,n[r])))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(n){return n&&this._dateAdapter.getYear(n)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(n):null}_getDateFromMonth(n){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1),r=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(n,i){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1),o=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),s=this.dateClass?this.dateClass(r,"year"):void 0;return new aw(n,i.toLocaleUpperCase(),o,this._shouldEnableMonth(n),s)}_shouldEnableMonth(n){let i=this._dateAdapter.getYear(this.activeDate);if(n==null||this._isYearAndMonthAfterMaxDate(i,n)||this._isYearAndMonthBeforeMinDate(i,n))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(i,n,1);for(let o=r;this._dateAdapter.getMonth(o)==n;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(n,i){if(this.maxDate){let r=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return n>r||n===r&&i>o}return!1}_isYearAndMonthBeforeMinDate(n,i){if(this.minDate){let r=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return n<r||n===r&&i<o}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(n){n instanceof Cl?this._selectedMonth.set(this._getMonthInCurrentYear(n.start)||this._getMonthInCurrentYear(n.end)):this._selectedMonth.set(this._getMonthInCurrentYear(n))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-year-view"]],viewQuery:function(i,r){if(i&1&&Li(vv,5),i&2){let o;Yn(o=Zn())&&(r._matCalendarBody=o.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,r){i&1&&(ze(0,"table",0)(1,"thead",1)(2,"tr"),ri(3,"th",2),We()(),ze(4,"tbody",3),an("selectedValueChange",function(s){return r._monthSelected(s)})("activeDateChange",function(s){return r._updateActiveDate(s)})("keyup",function(s){return r._handleCalendarBodyKeyup(s)})("keydown",function(s){return r._handleCalendarBodyKeydown(s)}),We()()),i&2&&(Xe(4),mn("label",r._yearLabel())("rows",r._months())("todayValue",r._todayMonth())("startValue",r._selectedMonth())("endValue",r._selectedMonth())("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},dependencies:[vv],encapsulation:2,changeDetection:0})}return e})(),OG=(()=>{class e{_intl=Z(Cv);calendar=Z(jT);_dateAdapter=Z(Qs,{optional:!0});_dateFormats=Z(vu,{optional:!0});_periodButtonText;_periodButtonDescription;_periodButtonLabel;_prevButtonLabel;_nextButtonLabel;constructor(){Z(Oo).load(Cu);let n=Z(Oi);this._updateLabels(),this.calendar.stateChanges.subscribe(()=>{this._updateLabels(),n.markForCheck()})}get periodButtonText(){return this._periodButtonText}get periodButtonDescription(){return this._periodButtonDescription}get periodButtonLabel(){return this._periodButtonLabel}get prevButtonLabel(){return this._prevButtonLabel}get nextButtonLabel(){return this._nextButtonLabel}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.previousEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-Na))}nextClicked(){this.nextEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:Na))}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_updateLabels(){let n=this.calendar,i=this._intl,r=this._dateAdapter;n.currentView==="month"?(this._periodButtonText=r.format(n.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonDescription=r.format(n.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonLabel=i.switchToMultiYearViewLabel,this._prevButtonLabel=i.prevMonthLabel,this._nextButtonLabel=i.nextMonthLabel):n.currentView==="year"?(this._periodButtonText=r.getYearName(n.activeDate),this._periodButtonDescription=r.getYearName(n.activeDate),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevYearLabel,this._nextButtonLabel=i.nextYearLabel):(this._periodButtonText=i.formatYearRange(...this._formatMinAndMaxYearLabels()),this._periodButtonDescription=i.formatYearRangeLabel(...this._formatMinAndMaxYearLabels()),this._periodButtonLabel=i.switchToMonthViewLabel,this._prevButtonLabel=i.prevMultiYearLabel,this._nextButtonLabel=i.nextMultiYearLabel)}_isSameView(n,i){return this.calendar.currentView=="month"?this._dateAdapter.getYear(n)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(n)==this._dateAdapter.getMonth(i):this.calendar.currentView=="year"?this._dateAdapter.getYear(n)==this._dateAdapter.getYear(i):kG(this._dateAdapter,n,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let i=this._dateAdapter.getYear(this.calendar.activeDate)-sw(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+Na-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),s=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return[o,s]}_periodButtonLabelId=Z(Oa).getId("mat-calendar-period-label-");static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:Dle,decls:17,vars:13,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["matButton","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-previous-button",3,"click","disabled","matTooltip"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-next-button",3,"click","disabled","matTooltip"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(i,r){i&1&&(pl(),ze(0,"div",0)(1,"div",1)(2,"span",2),Gt(3),We(),ze(4,"button",3),an("click",function(){return r.currentPeriodClicked()}),ze(5,"span",4),Gt(6),We(),gf(),ze(7,"svg",5),ri(8,"polygon",6),We()(),VC(),ri(9,"div",7),Sr(10),ze(11,"button",8),an("click",function(){return r.previousClicked()}),gf(),ze(12,"svg",9),ri(13,"path",10),We()(),VC(),ze(14,"button",11),an("click",function(){return r.nextClicked()}),gf(),ze(15,"svg",9),ri(16,"path",12),We()()()()),i&2&&(Xe(2),mn("id",r._periodButtonLabelId),Xe(),fl(r.periodButtonDescription),Xe(),Yi("aria-label",r.periodButtonLabel)("aria-describedby",r._periodButtonLabelId),Xe(2),fl(r.periodButtonText),Xe(),Xn("mat-calendar-invert",r.calendar.currentView!=="month"),Xe(4),mn("disabled",!r.previousEnabled())("matTooltip",r.prevButtonLabel),Yi("aria-label",r.prevButtonLabel),Xe(3),mn("disabled",!r.nextEnabled())("matTooltip",r.nextButtonLabel),Yi("aria-label",r.nextButtonLabel))},dependencies:[ow,H2,pG],encapsulation:2,changeDetection:0})}return e})(),jT=(()=>{class e{_dateAdapter=Z(Qs,{optional:!0});_dateFormats=Z(vu,{optional:!0});_changeDetectorRef=Z(Oi);_elementRef=Z(sn);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(n){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_startAt;startView="month";get selected(){return this._selected}set selected(n){n instanceof Cl?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_selected;get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_minDate;get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new Ee;yearSelected=new Ee;monthSelected=new Ee;viewChanged=new Ee(!0);_userSelection=new Ee;_userDragDrop=new Ee;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(n){this._clampedActiveDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(n){let i=this._currentView!==n?n:null;this._currentView=n,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&(this.stateChanges.next(),this.viewChanged.emit(i))}_currentView;_activeDrag=null;stateChanges=new At;constructor(){this._intlChanges=Z(Cv).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new hd(this.headerComponent||OG),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(n){let i=n.minDate&&!this._dateAdapter.sameDate(n.minDate.previousValue,n.minDate.currentValue)?n.minDate:void 0,r=n.maxDate&&!this._dateAdapter.sameDate(n.maxDate.previousValue,n.maxDate.currentValue)?n.maxDate:void 0,o=i||r||n.dateFilter;if(o&&!o.firstChange){let s=this._getCurrentViewComponent();s&&(this._elementRef.nativeElement.contains(Ub())&&(this._moveFocusOnNextTick=!0),this._changeDetectorRef.detectChanges(),s._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(n){let i=n.value;(this.selected instanceof Cl||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(n)}_yearSelectedInMultiYearView(n){this.yearSelected.emit(n)}_monthSelectedInYearView(n){this.monthSelected.emit(n)}_goToDateInView(n,i){this.activeDate=n,this.currentView=i}_dragStarted(n){this._activeDrag=n}_dragEnded(n){this._activeDrag&&(n.value&&this._userDragDrop.emit(n),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-calendar"]],viewQuery:function(i,r){if(i&1&&(Li(FG,5),Li(IG,5),Li(MG,5)),i&2){let o;Yn(o=Zn())&&(r.monthView=o.first),Yn(o=Zn())&&(r.yearView=o.first),Yn(o=Zn())&&(r.multiYearView=o.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[uo([Ble]),$r],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,r){if(i&1&&(Jo(0,_le,0,0,"ng-template",0),ze(1,"div",1),wr(2,Ale,1,11,"mat-month-view",2)(3,Rle,1,6,"mat-year-view",3)(4,Fle,1,6,"mat-multi-year-view",3),We()),i&2){let o;mn("cdkPortalOutlet",r._calendarHeaderPortal),Xe(2),yr((o=r.currentView)==="month"?2:o==="year"?3:o==="multi-year"?4:-1)}},dependencies:[fv,dT,FG,IG,MG],styles:[`.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mat-button-text-label-text-color: var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return e})();var Hle=(()=>{class e{_elementRef=Z(sn);_animationsDisabled=ea();_changeDetectorRef=Z(Oi);_globalModel=Z(U2);_dateAdapter=Z(Qs);_ngZone=Z(It);_rangeSelectionStrategy=Z(PG,{optional:!0});_stateChanges;_model;_eventCleanups;_animationFallback;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationDone=new At;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){if(Z(Oo).load(Cu),this._closeButtonText=Z(Cv).closeCalendarLabel,!this._animationsDisabled){let n=this._elementRef.nativeElement,i=Z(co);this._eventCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(n,"animationstart",this._handleAnimationEvent),i.listen(n,"animationend",this._handleAnimationEvent),i.listen(n,"animationcancel",this._handleAnimationEvent)])}}ngAfterViewInit(){this._stateChanges=this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._calendar.focusActiveCell()}ngOnDestroy(){clearTimeout(this._animationFallback),this._eventCleanups?.forEach(n=>n()),this._stateChanges?.unsubscribe(),this._animationDone.complete()}_handleUserSelection(n){let i=this._model.selection,r=n.value,o=i instanceof Cl;if(o&&this._rangeSelectionStrategy){let s=this._rangeSelectionStrategy.selectionFinished(r,i,n.event);this._model.updateSelection(s,this)}else r&&(o||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(n){this._model.updateSelection(n.value,this)}_startExitAnimation(){this._elementRef.nativeElement.classList.add("mat-datepicker-content-exit"),this._animationsDisabled?this._animationDone.next():(clearTimeout(this._animationFallback),this._animationFallback=setTimeout(()=>{this._isAnimating||this._animationDone.next()},200))}_handleAnimationEvent=n=>{let i=this._elementRef.nativeElement;n.target!==i||!n.animationName.startsWith("_mat-datepicker-content")||(clearTimeout(this._animationFallback),this._isAnimating=n.type==="animationstart",i.classList.toggle("mat-datepicker-content-animating",this._isAnimating),this._isAnimating||this._animationDone.next())};_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(n,i){this._model=n?this._globalModel.clone():this._globalModel,this._actionsPortal=n,i&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-datepicker-content"]],viewQuery:function(i,r){if(i&1&&Li(jT,5),i&2){let o;Yn(o=Zn())&&(r._calendar=o.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:6,hostBindings:function(i,r){i&2&&(Gm(r.color?"mat-"+r.color:""),Xn("mat-datepicker-content-touch",r.datepicker.touchUi)("mat-datepicker-content-animations-enabled",!r._animationsDisabled))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","matButton","elevated",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,r){i&1&&(ze(0,"div",0)(1,"mat-calendar",1),an("yearSelected",function(s){return r.datepicker._selectYear(s)})("monthSelected",function(s){return r.datepicker._selectMonth(s)})("viewChanged",function(s){return r.datepicker._viewChanged(s)})("_userSelection",function(s){return r._handleUserSelection(s)})("_userDragDrop",function(s){return r._handleUserDragDrop(s)}),We(),Jo(2,Mle,0,0,"ng-template",2),ze(3,"button",3),an("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),Gt(4),We()()),i&2&&(Xn("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),Yi("aria-modal",!0)("aria-labelledby",r._dialogLabelId??void 0),Xe(),Gm(r.datepicker.panelClass),mn("id",r.datepicker.id)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName),Xe(),mn("cdkPortalOutlet",r._actionsPortal),Xe(),Xn("cdk-visually-hidden",!r._closeButtonFocused),mn("color",r.color||"primary"),Xe(),fl(r._closeButtonText))},dependencies:[pT,jT,fv,ow],styles:[`@keyframes _mat-datepicker-content-dropdown-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-dialog-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-exit{from{opacity:1}to{opacity:0}}.mat-datepicker-content{display:block;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dropdown-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.mat-datepicker-content-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dialog-enter 150ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}.mat-datepicker-content-exit.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-exit 100ms linear}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}
`],encapsulation:2,changeDetection:0})}return e})();var zle=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","matDatepickerToggleIcon",""]]})}return e})(),jle=(()=>{class e{_intl=Z(Cv);_changeDetectorRef=Z(Oi);_stateChanges=li.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(n){this._disabled=n}_disabled;disableRipple;_customIcon;_button;constructor(){let n=Z(new sb("tabindex"),{optional:!0}),i=Number(n);this.tabIndex=i||i===0?i:null}ngOnChanges(n){n.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(n){this.datepicker&&!this.disabled&&(this.datepicker.open(),n.stopPropagation())}_watchStateChanges(){let n=this.datepicker?this.datepicker.stateChanges:Zt(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Zt(),r=this.datepicker?fm(this.datepicker.openedStream,this.datepicker.closedStream):Zt();this._stateChanges.unsubscribe(),this._stateChanges=fm(this._intl.changes,n,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,r,o){if(i&1&&fu(o,zle,5),i&2){let s;Yn(s=Zn())&&(r._customIcon=s.first)}},viewQuery:function(i,r){if(i&1&&Li(Ile,5),i&2){let o;Yn(o=Zn())&&(r._button=o.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,r){i&1&&an("click",function(s){return r._open(s)}),i&2&&(Yi("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),Xn("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&r.datepicker.color==="accent")("mat-warn",r.datepicker&&r.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Se],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[$r],ngContentSelectors:Ple,decls:4,vars:7,consts:[["button",""],["matIconButton","","type","button",3,"tabIndex","disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,r){i&1&&(pl(Tle),ze(0,"button",1,0),wr(2,kle,2,0,":svg:svg",2),Sr(3),We()),i&2&&(mn("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled)("disableRipple",r.disableRipple),Yi("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("aria-expanded",r.datepicker?r.datepicker.opened:null),Xe(2),yr(r._customIcon?-1:2))},dependencies:[H2],styles:[`.mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle button{color:inherit}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}
`],encapsulation:2,changeDetection:0})}return e})();var NG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({providers:[Cv],imports:[IT,N2,gT,Qb,Hle,jle,OG,Ds,Zb]})}return e})();var lw=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[_2,_G,Ds]})}return e})();var BG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({})}return e})();var VG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({imports:[lw,lw,BG,Ds]})}return e})();var Ule=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,Wle=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function QT(e,t){let n=Array(e);for(let i=0;i<e;i++)n[i]=t(i);return n}var $le=(()=>{class e extends Qs{_matDateLocale=Z(oT,{optional:!0});constructor(){super();let n=Z(oT,{optional:!0});n!==void 0&&(this._matDateLocale=n),super.setLocale(this._matDateLocale)}getYear(n){return n.getFullYear()}getMonth(n){return n.getMonth()}getDate(n){return n.getDate()}getDayOfWeek(n){return n.getDay()}getMonthNames(n){let i=new Intl.DateTimeFormat(this.locale,{month:n,timeZone:"utc"});return QT(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){let n=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return QT(31,i=>this._format(n,new Date(2017,0,i+1)))}getDayOfWeekNames(n){let i=new Intl.DateTimeFormat(this.locale,{weekday:n,timeZone:"utc"});return QT(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(n){let i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,n)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let n=new Intl.Locale(this.locale),i=(n.getWeekInfo?.()||n.weekInfo)?.firstDay??0;return i===7?0:i}return 0}getNumDaysInMonth(n){return this.getDate(this._createDateWithOverflow(this.getYear(n),this.getMonth(n)+1,0))}clone(n){return new Date(n.getTime())}createDate(n,i,r){let o=this._createDateWithOverflow(n,i,r);return o.getMonth()!=i,o}today(){return new Date}parse(n,i){return typeof n=="number"?new Date(n):n?new Date(Date.parse(n)):null}format(n,i){if(!this.isValid(n))throw Error("NativeDateAdapter: Cannot format invalid date.");let r=new Intl.DateTimeFormat(this.locale,ce(T({},i),{timeZone:"utc"}));return this._format(r,n)}addCalendarYears(n,i){return this.addCalendarMonths(n,i*12)}addCalendarMonths(n,i){let r=this._createDateWithOverflow(this.getYear(n),this.getMonth(n)+i,this.getDate(n));return this.getMonth(r)!=((this.getMonth(n)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(n,i){return this._createDateWithOverflow(this.getYear(n),this.getMonth(n),this.getDate(n)+i)}toIso8601(n){return[n.getUTCFullYear(),this._2digit(n.getUTCMonth()+1),this._2digit(n.getUTCDate())].join("-")}deserialize(n){if(typeof n=="string"){if(!n)return null;if(Ule.test(n)){let i=new Date(n);if(this.isValid(i))return i}}return super.deserialize(n)}isDateInstance(n){return n instanceof Date}isValid(n){return!isNaN(n.getTime())}invalid(){return new Date(NaN)}setTime(n,i,r,o){let s=this.clone(n);return s.setHours(i,r,o,0),s}getHours(n){return n.getHours()}getMinutes(n){return n.getMinutes()}getSeconds(n){return n.getSeconds()}parseTime(n,i){if(typeof n!="string")return n instanceof Date?new Date(n.getTime()):null;let r=n.trim();if(r.length===0)return null;let o=this._parseTimeString(r);if(o===null){let s=r.replace(/[^0-9:(AM|PM)]/gi,"").trim();s.length>0&&(o=this._parseTimeString(s))}return o||this.invalid()}addSeconds(n,i){return new Date(n.getTime()+i*1e3)}_createDateWithOverflow(n,i,r){let o=new Date;return o.setFullYear(n,i,r),o.setHours(0,0,0,0),o}_2digit(n){return("00"+n).slice(-2)}_format(n,i){let r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),n.format(r)}_parseTimeString(n){let i=n.toUpperCase().match(Wle);if(i){let r=parseInt(i[1]),o=parseInt(i[2]),s=i[3]==null?void 0:parseInt(i[3]),a=i[4];if(r===12?r=a==="AM"?0:r:a==="PM"&&(r+=12),JT(r,0,23)&&JT(o,0,59)&&(s==null||JT(s,0,59)))return this.setTime(this.today(),r,o,s||0)}return null}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac})}return e})();function JT(e,t,n){return!isNaN(e)&&e>=t&&e<=n}var qle={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};var GG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=kn({type:e});static \u0275inj=Rn({providers:[Kle()]})}return e})();function Kle(e=qle){return[{provide:Qs,useClass:$le},{provide:vu,useValue:e}]}var Sc=Uint8Array,Ba=Uint16Array,rP=Int32Array,oP=new Sc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sP=new Sc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HG=new Sc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WG=function(e,t){for(var n=new Ba(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var r=new rP(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return{b:n,r}},$G=WG(oP,2),Yle=$G.b,tP=$G.r;Yle[28]=258,tP[258]=28;var qG=WG(sP,0),Jat=qG.b,zG=qG.r,nP=new Ba(32768);for(si=0;si<32768;++si)bu=(si&43690)>>1|(si&21845)<<1,bu=(bu&52428)>>2|(bu&13107)<<2,bu=(bu&61680)>>4|(bu&3855)<<4,nP[si]=((bu&65280)>>8|(bu&255)<<8)>>1;var bu,si,uw=function(e,t,n){for(var i=e.length,r=0,o=new Ba(t);r<i;++r)e[r]&&++o[e[r]-1];var s=new Ba(t);for(r=1;r<t;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(n){a=new Ba(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var c=r<<4|e[r],d=t-e[r],u=s[e[r]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[nP[u]>>l]=c}else for(a=new Ba(i),r=0;r<i;++r)e[r]&&(a[r]=nP[s[e[r]-1]++]>>15-e[r]);return a},Hf=new Sc(288);for(si=0;si<144;++si)Hf[si]=8;var si;for(si=144;si<256;++si)Hf[si]=9;var si;for(si=256;si<280;++si)Hf[si]=7;var si;for(si=280;si<288;++si)Hf[si]=8;var si,W2=new Sc(32);for(si=0;si<32;++si)W2[si]=5;var si,Zle=uw(Hf,9,0);var Xle=uw(W2,5,0);var KG=function(e){return(e+7)/8|0},Qle=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new Sc(e.subarray(t,n))};var wu=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},cw=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},eP=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,o=n.slice();if(!r)return{t:ZG,l:0};if(r==1){var s=new Sc(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(F,L){return F.f-L.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=r-1;)a=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=o[0].s,i=1;i<r;++i)o[i].s>h&&(h=o[i].s);var p=new Ba(h+1),f=iP(n[d-1],p,0);if(f>t){var i=0,g=0,C=f-t,m=1<<C;for(o.sort(function(L,V){return p[V.s]-p[L.s]||L.f-V.f});i<r;++i){var w=o[i].s;if(p[w]>t)g+=m-(1<<f-p[w]),p[w]=t;else break}for(g>>=C;g>0;){var x=o[i].s;p[x]<t?g-=1<<t-p[x]++-1:++i}for(;i>=0&&g;--i){var D=o[i].s;p[D]==t&&(--p[D],++g)}f=t}return{t:new Sc(p),l:f}},iP=function(e,t,n){return e.s==-1?Math.max(iP(e.l,t,n+1),iP(e.r,t,n+1)):t[e.s]=n},jG=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ba(++t),i=0,r=e[0],o=1,s=function(l){n[i++]=l},a=1;a<=t;++a)if(e[a]==r&&a!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=e[a]}return{c:n.subarray(0,i),n:t}},dw=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},YG=function(e,t,n){var i=n.length,r=KG(t+2);e[r]=i&255,e[r+1]=i>>8,e[r+2]=e[r]^255,e[r+3]=e[r+1]^255;for(var o=0;o<i;++o)e[r+o+4]=n[o];return(r+4+i)*8},UG=function(e,t,n,i,r,o,s,a,l,c,d){wu(t,d++,n),++r[256];for(var u=eP(r,15),h=u.t,p=u.l,f=eP(o,15),g=f.t,C=f.l,m=jG(h),w=m.c,x=m.n,D=jG(g),F=D.c,L=D.n,V=new Ba(19),B=0;B<w.length;++B)++V[w[B]&31];for(var B=0;B<F.length;++B)++V[F[B]&31];for(var P=eP(V,7),U=P.t,A=P.l,I=19;I>4&&!U[HG[I-1]];--I);var j=c+5<<3,G=dw(r,Hf)+dw(o,W2)+s,Q=dw(r,h)+dw(o,g)+s+14+3*I+dw(V,U)+2*V[16]+3*V[17]+7*V[18];if(l>=0&&j<=G&&j<=Q)return YG(t,d,e.subarray(l,l+c));var le,me,ge,se;if(wu(t,d,1+(Q<G)),d+=2,Q<G){le=uw(h,p,0),me=h,ge=uw(g,C,0),se=g;var de=uw(U,A,0);wu(t,d,x-257),wu(t,d+5,L-1),wu(t,d+10,I-4),d+=14;for(var B=0;B<I;++B)wu(t,d+3*B,U[HG[B]]);d+=3*I;for(var he=[w,F],M=0;M<2;++M)for(var ee=he[M],B=0;B<ee.length;++B){var te=ee[B]&31;wu(t,d,de[te]),d+=U[te],te>15&&(wu(t,d,ee[B]>>5&127),d+=ee[B]>>12)}}else le=Zle,me=Hf,ge=Xle,se=W2;for(var B=0;B<a;++B){var ue=i[B];if(ue>255){var te=ue>>18&31;cw(t,d,le[te+257]),d+=me[te+257],te>7&&(wu(t,d,ue>>23&31),d+=oP[te]);var ae=ue&31;cw(t,d,ge[ae]),d+=se[ae],ae>3&&(cw(t,d,ue>>5&8191),d+=sP[ae])}else cw(t,d,le[ue]),d+=me[ue]}return cw(t,d,le[256]),d+me[256]},Jle=new rP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ZG=new Sc(0),ece=function(e,t,n,i,r,o){var s=o.z||e.length,a=new Sc(i+s+5*(1+Math.ceil(s/7e3))+r),l=a.subarray(i,a.length-r),c=o.l,d=(o.r||0)&7;if(t){d&&(l[0]=o.r>>3);for(var u=Jle[t-1],h=u>>13,p=u&8191,f=(1<<n)-1,g=o.p||new Ba(32768),C=o.h||new Ba(f+1),m=Math.ceil(n/3),w=2*m,x=function(ot){return(e[ot]^e[ot+1]<<m^e[ot+2]<<w)&f},D=new rP(25e3),F=new Ba(288),L=new Ba(32),V=0,B=0,P=o.i||0,U=0,A=o.w||0,I=0;P+2<s;++P){var j=x(P),G=P&32767,Q=C[j];if(g[G]=Q,C[j]=G,A<=P){var le=s-P;if((V>7e3||U>24576)&&(le>423||!c)){d=UG(e,l,0,D,F,L,B,U,I,P-I,d),U=V=B=0,I=P;for(var me=0;me<286;++me)F[me]=0;for(var me=0;me<30;++me)L[me]=0}var ge=2,se=0,de=p,he=G-Q&32767;if(le>2&&j==x(P-he))for(var M=Math.min(h,le)-1,ee=Math.min(32767,P),te=Math.min(258,le);he<=ee&&--de&&G!=Q;){if(e[P+ge]==e[P+ge-he]){for(var ue=0;ue<te&&e[P+ue]==e[P+ue-he];++ue);if(ue>ge){if(ge=ue,se=he,ue>M)break;for(var ae=Math.min(he,ue-2),Ce=0,me=0;me<ae;++me){var Ae=P-he+me&32767,Fe=g[Ae],Me=Ae-Fe&32767;Me>Ce&&(Ce=Me,Q=Ae)}}}G=Q,Q=g[G],he+=G-Q&32767}if(se){D[U++]=268435456|tP[ge]<<18|zG[se];var Ve=tP[ge]&31,Ze=zG[se]&31;B+=oP[Ve]+sP[Ze],++F[257+Ve],++L[Ze],A=P+ge,++V}else D[U++]=e[P],++F[e[P]]}}for(P=Math.max(P,A);P<s;++P)D[U++]=e[P],++F[e[P]];d=UG(e,l,c,D,F,L,B,U,I,P-I,d),c||(o.r=d&7|l[d/8|0]<<3,d-=7,o.h=C,o.p=g,o.i=P,o.w=A)}else{for(var P=o.w||0;P<s+c;P+=65535){var et=P+65535;et>=s&&(l[d/8|0]=c,et=s),d=YG(l,d+1,e.subarray(P,et))}o.i=s}return Qle(a,0,i+KG(d)+r)};var XG=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,o=n.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)r+=i+=n[s];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}e=i,t=r},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},tce=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new Sc(o.length+e.length);s.set(o),s.set(e,o.length),e=s,r.w=o.length}return ece(e,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,r)};var QG=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};var nce=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=XG();r.p(t.dictionary),QG(e,2,r.d())}};function $2(e,t){t||(t={});var n=XG();n.p(e);var i=tce(e,t,t.dictionary?6:2,4);return nce(i,t),QG(i,i.length-4,n.d()),i}var ice=typeof TextDecoder<"u"&&new TextDecoder,rce=0;try{ice.decode(ZG,{stream:!0}),rce=1}catch{}function JG(e){if(Array.isArray(e))return e}function eH(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}function aP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function tH(e,t){if(e){if(typeof e=="string")return aP(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aP(e,t):void 0}}function nH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lP(e,t){return JG(e)||eH(e,t)||tH(e,t)||nH()}function cP(e,t="utf8"){return new TextDecoder(t).decode(e)}var oce=new TextEncoder;function iH(e){return oce.encode(e)}var sce=1024*8,ace=(()=>{let e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),dP={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},hw=class e{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=sce,n={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);let r=n.offset?n.offset>>>0:0,o=t.byteLength-r,s=r;(ArrayBuffer.isView(t)||t instanceof e)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+r),t=t.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){let i=(this.offset+t)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){let i=dP[n].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,o=this.buffer.slice(r,r+i);if(this.littleEndian===ace&&n!=="uint8"&&n!=="int8"){let a=new Uint8Array(this.buffer.slice(r,r+i));a.reverse();let l=new dP[n](a.buffer);return this.offset+=i,l.reverse(),l}let s=new dP[n](o);return this.offset+=i,s}readInt16(){let t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){let t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){let t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){let t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){let t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){let t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){let t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){let t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let i=0;i<t;i++)n+=this.readChar();return n}readUtf8(t=1){return cP(this.readBytes(t))}decodeText(t=1,n="utf8"){return cP(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(iH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function Ev(e){let t=e.length;for(;--t>=0;)e[t]=0}var lce=0,zH=1,cce=2,dce=3,uce=258,kP=29,Aw=256,bw=Aw+1+kP,yv=30,LP=19,jH=2*bw+1,zf=15,uP=16,hce=7,OP=256,UH=16,WH=17,$H=18,DP=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Q2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),pce=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qH=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fce=512,Su=new Array((bw+2)*2);Ev(Su);var mw=new Array(yv*2);Ev(mw);var ww=new Array(fce);Ev(ww);var yw=new Array(uce-dce+1);Ev(yw);var NP=new Array(kP);Ev(NP);var J2=new Array(yv);Ev(J2);function hP(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var KH,YH,ZH;function pP(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var XH=e=>e<256?ww[e]:ww[256+(e>>>7)],Sw=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ta=(e,t,n)=>{e.bi_valid>uP-n?(e.bi_buf|=t<<e.bi_valid&65535,Sw(e,e.bi_buf),e.bi_buf=t>>uP-e.bi_valid,e.bi_valid+=n-uP):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},fd=(e,t,n)=>{ta(e,n[t*2],n[t*2+1])},QH=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},gce=e=>{e.bi_valid===16?(Sw(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},mce=(e,t)=>{let n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,d,u,h,p,f,g=0;for(h=0;h<=zf;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<jH;c++)d=e.heap[c],h=n[n[d*2+1]*2+1]+1,h>l&&(h=l,g++),n[d*2+1]=h,!(d>i)&&(e.bl_count[h]++,p=0,d>=a&&(p=s[d-a]),f=n[d*2],e.opt_len+=f*(h+p),o&&(e.static_len+=f*(r[d*2+1]+p)));if(g!==0){do{for(h=l-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(h=l;h!==0;h--)for(d=e.bl_count[h];d!==0;)u=e.heap[--c],!(u>i)&&(n[u*2+1]!==h&&(e.opt_len+=(h-n[u*2+1])*n[u*2],n[u*2+1]=h),d--)}},JH=(e,t,n)=>{let i=new Array(zf+1),r=0,o,s;for(o=1;o<=zf;o++)r=r+n[o-1]<<1,i[o]=r;for(s=0;s<=t;s++){let a=e[s*2+1];a!==0&&(e[s*2]=QH(i[a]++,a))}},vce=()=>{let e,t,n,i,r,o=new Array(zf+1);for(n=0,i=0;i<kP-1;i++)for(NP[i]=n,e=0;e<1<<DP[i];e++)yw[n++]=i;for(yw[n-1]=i,r=0,i=0;i<16;i++)for(J2[i]=r,e=0;e<1<<Q2[i];e++)ww[r++]=i;for(r>>=7;i<yv;i++)for(J2[i]=r<<7,e=0;e<1<<Q2[i]-7;e++)ww[256+r++]=i;for(t=0;t<=zf;t++)o[t]=0;for(e=0;e<=143;)Su[e*2+1]=8,e++,o[8]++;for(;e<=255;)Su[e*2+1]=9,e++,o[9]++;for(;e<=279;)Su[e*2+1]=7,e++,o[7]++;for(;e<=287;)Su[e*2+1]=8,e++,o[8]++;for(JH(Su,bw+1,o),e=0;e<yv;e++)mw[e*2+1]=5,mw[e*2]=QH(e,5);KH=new hP(Su,DP,Aw+1,bw,zf),YH=new hP(mw,Q2,0,yv,zf),ZH=new hP(new Array(0),pce,0,LP,hce)},e9=e=>{let t;for(t=0;t<bw;t++)e.dyn_ltree[t*2]=0;for(t=0;t<yv;t++)e.dyn_dtree[t*2]=0;for(t=0;t<LP;t++)e.bl_tree[t*2]=0;e.dyn_ltree[OP*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},t9=e=>{e.bi_valid>8?Sw(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},rH=(e,t,n,i)=>{let r=t*2,o=n*2;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]},fP=(e,t,n)=>{let i=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&rH(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!rH(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},oH=(e,t,n)=>{let i,r,o=0,s,a;if(e.sym_next!==0)do i=e.pending_buf[e.sym_buf+o++]&255,i+=(e.pending_buf[e.sym_buf+o++]&255)<<8,r=e.pending_buf[e.sym_buf+o++],i===0?fd(e,r,t):(s=yw[r],fd(e,s+Aw+1,t),a=DP[s],a!==0&&(r-=NP[s],ta(e,r,a)),i--,s=XH(i),fd(e,s,n),a=Q2[s],a!==0&&(i-=J2[s],ta(e,i,a)));while(o<e.sym_next);fd(e,OP,t)},_P=(e,t)=>{let n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems,s,a,l=-1,c;for(e.heap_len=0,e.heap_max=jH,s=0;s<o;s++)n[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)fP(e,n,s);c=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],fP(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[c*2]=n[s*2]+n[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[s*2+1]=n[a*2+1]=c,e.heap[1]=c++,fP(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],mce(e,t),JH(n,l,e.bl_count)},sH=(e,t,n)=>{let i,r=-1,o,s=t[1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)o=s,s=t[(i+1)*2+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[o*2]+=a:o!==0?(o!==r&&e.bl_tree[o*2]++,e.bl_tree[UH*2]++):a<=10?e.bl_tree[WH*2]++:e.bl_tree[$H*2]++,a=0,r=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))},aH=(e,t,n)=>{let i,r=-1,o,s=t[1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),i=0;i<=n;i++)if(o=s,s=t[(i+1)*2+1],!(++a<l&&o===s)){if(a<c)do fd(e,o,e.bl_tree);while(--a!==0);else o!==0?(o!==r&&(fd(e,o,e.bl_tree),a--),fd(e,UH,e.bl_tree),ta(e,a-3,2)):a<=10?(fd(e,WH,e.bl_tree),ta(e,a-3,3)):(fd(e,$H,e.bl_tree),ta(e,a-11,7));a=0,r=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}},Cce=e=>{let t;for(sH(e,e.dyn_ltree,e.l_desc.max_code),sH(e,e.dyn_dtree,e.d_desc.max_code),_P(e,e.bl_desc),t=LP-1;t>=3&&e.bl_tree[qH[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},bce=(e,t,n,i)=>{let r;for(ta(e,t-257,5),ta(e,n-1,5),ta(e,i-4,4),r=0;r<i;r++)ta(e,e.bl_tree[qH[r]*2+1],3);aH(e,e.dyn_ltree,t-1),aH(e,e.dyn_dtree,n-1)},wce=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return 0;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return 1;for(n=32;n<Aw;n++)if(e.dyn_ltree[n*2]!==0)return 1;return 0},lH=!1,yce=e=>{lH||(vce(),lH=!0),e.l_desc=new pP(e.dyn_ltree,KH),e.d_desc=new pP(e.dyn_dtree,YH),e.bl_desc=new pP(e.bl_tree,ZH),e.bi_buf=0,e.bi_valid=0,e9(e)},n9=(e,t,n,i)=>{ta(e,(lce<<1)+(i?1:0),3),t9(e),Sw(e,n),Sw(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Sce=e=>{ta(e,zH<<1,3),fd(e,OP,Su),gce(e)},xce=(e,t,n,i)=>{let r,o,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=wce(e)),_P(e,e.l_desc),_P(e,e.d_desc),s=Cce(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&t!==-1?n9(e,t,n,i):e.strategy===4||o===r?(ta(e,(zH<<1)+(i?1:0),3),oH(e,Su,mw)):(ta(e,(cce<<1)+(i?1:0),3),bce(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),oH(e,e.dyn_ltree,e.dyn_dtree)),e9(e),i&&t9(e)},Ece=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(yw[n]+Aw+1)*2]++,e.dyn_dtree[XH(t)*2]++),e.sym_next===e.sym_end),Dce=yce,_ce=n9,Ace=xce,Rce=Ece,Fce=Sce,Mce={_tr_init:Dce,_tr_stored_block:_ce,_tr_flush_block:Ace,_tr_tally:Rce,_tr_align:Fce},Ice=(e,t,n,i)=>{let r=e&65535|0,o=e>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do r=r+t[i++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0},xw=Ice,Tce=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},Pce=new Uint32Array(Tce()),kce=(e,t,n,i)=>{let r=Pce,o=i+n;e^=-1;for(let s=i;s<o;s++)e=e>>>8^r[(e^t[s])&255];return e^-1},_o=kce,Wf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Dv={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Lce,_tr_stored_block:AP,_tr_flush_block:Oce,_tr_tally:Oh,_tr_align:Nce}=Mce,{Z_NO_FLUSH:Nh,Z_PARTIAL_FLUSH:Bce,Z_FULL_FLUSH:Vce,Z_FINISH:bl,Z_BLOCK:cH,Z_OK:No,Z_STREAM_END:dH,Z_STREAM_ERROR:gd,Z_DATA_ERROR:Gce,Z_BUF_ERROR:gP,Z_DEFAULT_COMPRESSION:Hce,Z_FILTERED:zce,Z_HUFFMAN_ONLY:q2,Z_RLE:jce,Z_FIXED:Uce,Z_DEFAULT_STRATEGY:Wce,Z_UNKNOWN:$ce,Z_DEFLATED:nE}=Dv,qce=9,Kce=15,Yce=8,Zce=29,Xce=256,RP=Xce+1+Zce,Qce=30,Jce=19,ede=2*RP+1,tde=15,Gn=3,Lh=258,md=Lh+Gn+1,nde=32,Sv=42,BP=57,FP=69,MP=73,IP=91,TP=103,jf=113,fw=666,_s=1,_v=2,$f=3,Av=4,ide=3,Uf=(e,t)=>(e.msg=Wf[t],t),uH=e=>e*2-(e>4?9:0),kh=e=>{let t=e.length;for(;--t>=0;)e[t]=0},rde=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do n=e.head[--i],e.head[i]=n>=r?n-r:0;while(--t);t=r,i=t;do n=e.prev[--i],e.prev[i]=n>=r?n-r:0;while(--t)},ode=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Bh=ode,Va=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ga=(e,t)=>{Oce(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Va(e.strm)},ai=(e,t)=>{e.pending_buf[e.pending++]=t},pw=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},PP=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=xw(e.adler,t,r,n):e.state.wrap===2&&(e.adler=_o(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},i9=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,o,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-md?e.strstart-(e.w_size-md):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+Lh,p=c[i+s-1],f=c[i+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+s]!==f||c[r+s-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(o=Lh-(h-i),i=h-Lh,o>s){if(e.match_start=t,s=o,o>=a)break;p=c[i+s-1],f=c[i+s]}}while((t=u[t&d])>l&&--n!==0);return s<=e.lookahead?s:e.lookahead},xv=e=>{let t=e.w_size,n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-md)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),rde(e),i+=t),e.strm.avail_in===0)break;if(n=PP(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=Gn)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Bh(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Bh(e,e.ins_h,e.window[r+Gn-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<Gn)););}while(e.lookahead<md&&e.strm.avail_in!==0)},r9=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,r,o,s=0,a=e.strm.avail_in;do{if(i=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,r=e.strstart-e.block_start,i>r+e.strm.avail_in&&(i=r+e.strm.avail_in),i>o&&(i=o),i<n&&(i===0&&t!==bl||t===Nh||i!==r+e.strm.avail_in)))break;s=t===bl&&i===r+e.strm.avail_in?1:0,AP(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,Va(e.strm),r&&(r>i&&(r=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,i-=r),i&&(PP(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(s===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?Av:t!==Nh&&t!==bl&&e.strm.avail_in===0&&e.strstart===e.block_start?_v:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(PP(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=n||(r||t===bl)&&t!==Nh&&e.strm.avail_in===0&&r<=o)&&(i=r>o?o:r,s=t===bl&&e.strm.avail_in===0&&i===r?1:0,AP(e,e.block_start,i,s),e.block_start+=i,Va(e.strm)),s?$f:_s)},mP=(e,t)=>{let n,i;for(;;){if(e.lookahead<md){if(xv(e),e.lookahead<md&&t===Nh)return _s;if(e.lookahead===0)break}if(n=0,e.lookahead>=Gn&&(e.ins_h=Bh(e,e.ins_h,e.window[e.strstart+Gn-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-md&&(e.match_length=i9(e,n)),e.match_length>=Gn)if(i=Oh(e,e.strstart-e.match_start,e.match_length-Gn),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Gn){e.match_length--;do e.strstart++,e.ins_h=Bh(e,e.ins_h,e.window[e.strstart+Gn-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Bh(e,e.ins_h,e.window[e.strstart+1]);else i=Oh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Ga(e,!1),e.strm.avail_out===0))return _s}return e.insert=e.strstart<Gn-1?e.strstart:Gn-1,t===bl?(Ga(e,!0),e.strm.avail_out===0?$f:Av):e.sym_next&&(Ga(e,!1),e.strm.avail_out===0)?_s:_v},bv=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<md){if(xv(e),e.lookahead<md&&t===Nh)return _s;if(e.lookahead===0)break}if(n=0,e.lookahead>=Gn&&(e.ins_h=Bh(e,e.ins_h,e.window[e.strstart+Gn-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Gn-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-md&&(e.match_length=i9(e,n),e.match_length<=5&&(e.strategy===zce||e.match_length===Gn&&e.strstart-e.match_start>4096)&&(e.match_length=Gn-1)),e.prev_length>=Gn&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-Gn,i=Oh(e,e.strstart-1-e.prev_match,e.prev_length-Gn),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=Bh(e,e.ins_h,e.window[e.strstart+Gn-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Gn-1,e.strstart++,i&&(Ga(e,!1),e.strm.avail_out===0))return _s}else if(e.match_available){if(i=Oh(e,0,e.window[e.strstart-1]),i&&Ga(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return _s}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Oh(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Gn-1?e.strstart:Gn-1,t===bl?(Ga(e,!0),e.strm.avail_out===0?$f:Av):e.sym_next&&(Ga(e,!1),e.strm.avail_out===0)?_s:_v},sde=(e,t)=>{let n,i,r,o,s=e.window;for(;;){if(e.lookahead<=Lh){if(xv(e),e.lookahead<=Lh&&t===Nh)return _s;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Gn&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=e.strstart+Lh;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=Lh-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Gn?(n=Oh(e,1,e.match_length-Gn),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Oh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ga(e,!1),e.strm.avail_out===0))return _s}return e.insert=0,t===bl?(Ga(e,!0),e.strm.avail_out===0?$f:Av):e.sym_next&&(Ga(e,!1),e.strm.avail_out===0)?_s:_v},ade=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(xv(e),e.lookahead===0)){if(t===Nh)return _s;break}if(e.match_length=0,n=Oh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ga(e,!1),e.strm.avail_out===0))return _s}return e.insert=0,t===bl?(Ga(e,!0),e.strm.avail_out===0?$f:Av):e.sym_next&&(Ga(e,!1),e.strm.avail_out===0)?_s:_v};function pd(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var gw=[new pd(0,0,0,0,r9),new pd(4,4,8,4,mP),new pd(4,5,16,8,mP),new pd(4,6,32,32,mP),new pd(4,4,16,16,bv),new pd(8,16,32,32,bv),new pd(8,16,128,128,bv),new pd(8,32,128,256,bv),new pd(32,128,258,1024,bv),new pd(32,258,258,4096,bv)],lde=e=>{e.window_size=2*e.w_size,kh(e.head),e.max_lazy_match=gw[e.level].max_lazy,e.good_match=gw[e.level].good_length,e.nice_match=gw[e.level].nice_length,e.max_chain_length=gw[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Gn-1,e.match_available=0,e.ins_h=0};function cde(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nE,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ede*2),this.dyn_dtree=new Uint16Array((2*Qce+1)*2),this.bl_tree=new Uint16Array((2*Jce+1)*2),kh(this.dyn_ltree),kh(this.dyn_dtree),kh(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tde+1),this.heap=new Uint16Array(2*RP+1),kh(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*RP+1),kh(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Rw=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==Sv&&t.status!==BP&&t.status!==FP&&t.status!==MP&&t.status!==IP&&t.status!==TP&&t.status!==jf&&t.status!==fw?1:0},o9=e=>{if(Rw(e))return Uf(e,gd);e.total_in=e.total_out=0,e.data_type=$ce;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?BP:t.wrap?Sv:jf,e.adler=t.wrap===2?0:1,t.last_flush=-2,Lce(t),No},s9=e=>{let t=o9(e);return t===No&&lde(e.state),t},dde=(e,t)=>Rw(e)||e.state.wrap!==2?gd:(e.state.gzhead=t,No),a9=(e,t,n,i,r,o)=>{if(!e)return gd;let s=1;if(t===Hce&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>qce||n!==nE||i<8||i>15||t<0||t>9||o<0||o>Uce||i===8&&s!==1)return Uf(e,gd);i===8&&(i=9);let a=new cde;return e.state=a,a.strm=e,a.status=Sv,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Gn-1)/Gn),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=o,a.method=n,s9(e)},ude=(e,t)=>a9(e,t,nE,Kce,Yce,Wce),hde=(e,t)=>{if(Rw(e)||t>cH||t<0)return e?Uf(e,gd):gd;let n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===fw&&t!==bl)return Uf(e,e.avail_out===0?gP:gd);let i=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Va(e),e.avail_out===0)return n.last_flush=-1,No}else if(e.avail_in===0&&uH(t)<=uH(i)&&t!==bl)return Uf(e,gP);if(n.status===fw&&e.avail_in!==0)return Uf(e,gP);if(n.status===Sv&&n.wrap===0&&(n.status=jf),n.status===Sv){let r=nE+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=q2||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,r|=o<<6,n.strstart!==0&&(r|=nde),r+=31-r%31,pw(n,r),n.strstart!==0&&(pw(n,e.adler>>>16),pw(n,e.adler&65535)),e.adler=1,n.status=jf,Va(e),n.pending!==0)return n.last_flush=-1,No}if(n.status===BP){if(e.adler=0,ai(n,31),ai(n,139),ai(n,8),n.gzhead)ai(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ai(n,n.gzhead.time&255),ai(n,n.gzhead.time>>8&255),ai(n,n.gzhead.time>>16&255),ai(n,n.gzhead.time>>24&255),ai(n,n.level===9?2:n.strategy>=q2||n.level<2?4:0),ai(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ai(n,n.gzhead.extra.length&255),ai(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=_o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=FP;else if(ai(n,0),ai(n,0),ai(n,0),ai(n,0),ai(n,0),ai(n,n.level===9?2:n.strategy>=q2||n.level<2?4:0),ai(n,ide),n.status=jf,Va(e),n.pending!==0)return n.last_flush=-1,No}if(n.status===FP){if(n.gzhead.extra){let r=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex+=a,Va(e),n.pending!==0)return n.last_flush=-1,No;r=0,o-=a}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=MP}if(n.status===MP){if(n.gzhead.name){let r=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r)),Va(e),n.pending!==0)return n.last_flush=-1,No;r=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,ai(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=IP}if(n.status===IP){if(n.gzhead.comment){let r=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r)),Va(e),n.pending!==0)return n.last_flush=-1,No;r=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,ai(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=_o(e.adler,n.pending_buf,n.pending-r,r))}n.status=TP}if(n.status===TP){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Va(e),n.pending!==0))return n.last_flush=-1,No;ai(n,e.adler&255),ai(n,e.adler>>8&255),e.adler=0}if(n.status=jf,Va(e),n.pending!==0)return n.last_flush=-1,No}if(e.avail_in!==0||n.lookahead!==0||t!==Nh&&n.status!==fw){let r=n.level===0?r9(n,t):n.strategy===q2?ade(n,t):n.strategy===jce?sde(n,t):gw[n.level].func(n,t);if((r===$f||r===Av)&&(n.status=fw),r===_s||r===$f)return e.avail_out===0&&(n.last_flush=-1),No;if(r===_v&&(t===Bce?Nce(n):t!==cH&&(AP(n,0,0,!1),t===Vce&&(kh(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Va(e),e.avail_out===0))return n.last_flush=-1,No}return t!==bl?No:n.wrap<=0?dH:(n.wrap===2?(ai(n,e.adler&255),ai(n,e.adler>>8&255),ai(n,e.adler>>16&255),ai(n,e.adler>>24&255),ai(n,e.total_in&255),ai(n,e.total_in>>8&255),ai(n,e.total_in>>16&255),ai(n,e.total_in>>24&255)):(pw(n,e.adler>>>16),pw(n,e.adler&65535)),Va(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?No:dH)},pde=e=>{if(Rw(e))return gd;let t=e.state.status;return e.state=null,t===jf?Uf(e,Gce):No},fde=(e,t)=>{let n=t.length;if(Rw(e))return gd;let i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==Sv||i.lookahead)return gd;if(r===1&&(e.adler=xw(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(kh(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}let o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,xv(i);i.lookahead>=Gn;){let l=i.strstart,c=i.lookahead-(Gn-1);do i.ins_h=Bh(i,i.ins_h,i.window[l+Gn-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=Gn-1,xv(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Gn-1,i.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,i.wrap=r,No},gde=ude,mde=a9,vde=s9,Cde=o9,bde=dde,wde=hde,yde=pde,Sde=fde,xde="pako deflate (from Nodeca project)",vw={deflateInit:gde,deflateInit2:mde,deflateReset:vde,deflateResetKeep:Cde,deflateSetHeader:bde,deflate:wde,deflateEnd:yde,deflateSetDictionary:Sde,deflateInfo:xde},Ede=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Dde=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(let i in n)Ede(n,i)&&(e[i]=n[i])}}return e},_de=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;let n=new Uint8Array(t);for(let i=0,r=0,o=e.length;i<o;i++){let s=e[i];n.set(s,r),r+=s.length}return n},iE={assign:Dde,flattenChunks:_de},l9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l9=!1}var Ew=new Uint8Array(256);for(let e=0;e<256;e++)Ew[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ew[254]=Ew[254]=1;var Ade=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,o,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t},Rde=(e,t)=>{if(t<65534&&e.subarray&&l9)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n},Fde=(e,t)=>{let n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,r,o=new Array(n*2);for(r=0,i=0;i<n;){let s=e[i++];if(s<128){o[r++]=s;continue}let a=Ew[s];if(a>4){o[r++]=65533,i+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&i<n;)s=s<<6|e[i++]&63,a--;if(a>1){o[r++]=65533;continue}s<65536?o[r++]=s:(s-=65536,o[r++]=55296|s>>10&1023,o[r++]=56320|s&1023)}return Rde(o,r)},Mde=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Ew[e[n]]>t?n:t},Dw={string2buf:Ade,buf2string:Fde,utf8border:Mde};function Ide(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var c9=Ide,d9=Object.prototype.toString,{Z_NO_FLUSH:Tde,Z_SYNC_FLUSH:Pde,Z_FULL_FLUSH:kde,Z_FINISH:Lde,Z_OK:eE,Z_STREAM_END:Ode,Z_DEFAULT_COMPRESSION:Nde,Z_DEFAULT_STRATEGY:Bde,Z_DEFLATED:Vde}=Dv;function Fw(e){this.options=iE.assign({level:Nde,method:Vde,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bde},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c9,this.strm.avail_out=0;let n=vw.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==eE)throw new Error(Wf[n]);if(t.header&&vw.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=Dw.string2buf(t.dictionary):d9.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=vw.deflateSetDictionary(this.strm,i),n!==eE)throw new Error(Wf[n]);this._dict_set=!0}}Fw.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Lde:Tde,typeof e=="string"?n.input=Dw.string2buf(e):d9.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===Pde||o===kde)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=vw.deflate(n,o),r===Ode)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=vw.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===eE;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Fw.prototype.onData=function(e){this.chunks.push(e)};Fw.prototype.onEnd=function(e){e===eE&&(this.result=iE.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function VP(e,t){let n=new Fw(t);if(n.push(e,!0),n.err)throw n.msg||Wf[n.err];return n.result}function Gde(e,t){return t=t||{},t.raw=!0,VP(e,t)}function Hde(e,t){return t=t||{},t.gzip=!0,VP(e,t)}var zde=Fw,jde=VP,Ude=Gde,Wde=Hde,$de=Dv,qde={Deflate:zde,deflate:jde,deflateRaw:Ude,gzip:Wde,constants:$de},K2=16209,Kde=16191,Yde=function(t,n){let i,r,o,s,a,l,c,d,u,h,p,f,g,C,m,w,x,D,F,L,V,B,P,U,A=t.state;i=t.next_in,P=t.input,r=i+(t.avail_in-5),o=t.next_out,U=t.output,s=o-(n-t.avail_out),a=o+(t.avail_out-257),l=A.dmax,c=A.wsize,d=A.whave,u=A.wnext,h=A.window,p=A.hold,f=A.bits,g=A.lencode,C=A.distcode,m=(1<<A.lenbits)-1,w=(1<<A.distbits)-1;e:do{f<15&&(p+=P[i++]<<f,f+=8,p+=P[i++]<<f,f+=8),x=g[p&m];t:for(;;){if(D=x>>>24,p>>>=D,f-=D,D=x>>>16&255,D===0)U[o++]=x&65535;else if(D&16){F=x&65535,D&=15,D&&(f<D&&(p+=P[i++]<<f,f+=8),F+=p&(1<<D)-1,p>>>=D,f-=D),f<15&&(p+=P[i++]<<f,f+=8,p+=P[i++]<<f,f+=8),x=C[p&w];n:for(;;){if(D=x>>>24,p>>>=D,f-=D,D=x>>>16&255,D&16){if(L=x&65535,D&=15,f<D&&(p+=P[i++]<<f,f+=8,f<D&&(p+=P[i++]<<f,f+=8)),L+=p&(1<<D)-1,L>l){t.msg="invalid distance too far back",A.mode=K2;break e}if(p>>>=D,f-=D,D=o-s,L>D){if(D=L-D,D>d&&A.sane){t.msg="invalid distance too far back",A.mode=K2;break e}if(V=0,B=h,u===0){if(V+=c-D,D<F){F-=D;do U[o++]=h[V++];while(--D);V=o-L,B=U}}else if(u<D){if(V+=c+u-D,D-=u,D<F){F-=D;do U[o++]=h[V++];while(--D);if(V=0,u<F){D=u,F-=D;do U[o++]=h[V++];while(--D);V=o-L,B=U}}}else if(V+=u-D,D<F){F-=D;do U[o++]=h[V++];while(--D);V=o-L,B=U}for(;F>2;)U[o++]=B[V++],U[o++]=B[V++],U[o++]=B[V++],F-=3;F&&(U[o++]=B[V++],F>1&&(U[o++]=B[V++]))}else{V=o-L;do U[o++]=U[V++],U[o++]=U[V++],U[o++]=U[V++],F-=3;while(F>2);F&&(U[o++]=U[V++],F>1&&(U[o++]=U[V++]))}}else if((D&64)===0){x=C[(x&65535)+(p&(1<<D)-1)];continue n}else{t.msg="invalid distance code",A.mode=K2;break e}break}}else if((D&64)===0){x=g[(x&65535)+(p&(1<<D)-1)];continue t}else if(D&32){A.mode=Kde;break e}else{t.msg="invalid literal/length code",A.mode=K2;break e}break}}while(i<r&&o<a);F=f>>3,i-=F,f-=F<<3,p&=(1<<f)-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=o<a?257+(a-o):257-(o-a),A.hold=p,A.bits=f},wv=15,hH=852,pH=592,fH=0,vP=1,gH=2,Zde=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Xde=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Qde=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Jde=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),eue=(e,t,n,i,r,o,s,a)=>{let l=a.bits,c=0,d=0,u=0,h=0,p=0,f=0,g=0,C=0,m=0,w=0,x,D,F,L,V,B=null,P,U=new Uint16Array(wv+1),A=new Uint16Array(wv+1),I=null,j,G,Q;for(c=0;c<=wv;c++)U[c]=0;for(d=0;d<i;d++)U[t[n+d]]++;for(p=l,h=wv;h>=1&&U[h]===0;h--);if(p>h&&(p=h),h===0)return r[o++]=1<<24|64<<16|0,r[o++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<h&&U[u]===0;u++);for(p<u&&(p=u),C=1,c=1;c<=wv;c++)if(C<<=1,C-=U[c],C<0)return-1;if(C>0&&(e===fH||h!==1))return-1;for(A[1]=0,c=1;c<wv;c++)A[c+1]=A[c]+U[c];for(d=0;d<i;d++)t[n+d]!==0&&(s[A[t[n+d]]++]=d);if(e===fH?(B=I=s,P=20):e===vP?(B=Zde,I=Xde,P=257):(B=Qde,I=Jde,P=0),w=0,d=0,c=u,V=o,f=p,g=0,F=-1,m=1<<p,L=m-1,e===vP&&m>hH||e===gH&&m>pH)return 1;for(;;){j=c-g,s[d]+1<P?(G=0,Q=s[d]):s[d]>=P?(G=I[s[d]-P],Q=B[s[d]-P]):(G=96,Q=0),x=1<<c-g,D=1<<f,u=D;do D-=x,r[V+(w>>g)+D]=j<<24|G<<16|Q|0;while(D!==0);for(x=1<<c-1;w&x;)x>>=1;if(x!==0?(w&=x-1,w+=x):w=0,d++,--U[c]===0){if(c===h)break;c=t[n+s[d]]}if(c>p&&(w&L)!==F){for(g===0&&(g=p),V+=u,f=c-g,C=1<<f;f+g<h&&(C-=U[f+g],!(C<=0));)f++,C<<=1;if(m+=1<<f,e===vP&&m>hH||e===gH&&m>pH)return 1;F=w&L,r[F]=p<<24|f<<16|V-o|0}}return w!==0&&(r[V+w]=c-g<<24|64<<16|0),a.bits=p,0},Cw=eue,tue=0,u9=1,h9=2,{Z_FINISH:mH,Z_BLOCK:nue,Z_TREES:Y2,Z_OK:qf,Z_STREAM_END:iue,Z_NEED_DICT:rue,Z_STREAM_ERROR:wl,Z_DATA_ERROR:p9,Z_MEM_ERROR:f9,Z_BUF_ERROR:oue,Z_DEFLATED:vH}=Dv,rE=16180,CH=16181,bH=16182,wH=16183,yH=16184,SH=16185,xH=16186,EH=16187,DH=16188,_H=16189,tE=16190,yu=16191,CP=16192,AH=16193,bP=16194,RH=16195,FH=16196,MH=16197,IH=16198,Z2=16199,X2=16200,TH=16201,PH=16202,kH=16203,LH=16204,OH=16205,wP=16206,NH=16207,BH=16208,Zi=16209,g9=16210,m9=16211,sue=852,aue=592,lue=15,cue=lue,VH=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function due(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Kf=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<rE||t.mode>m9?1:0},v9=e=>{if(Kf(e))return wl;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=rE,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(sue),t.distcode=t.distdyn=new Int32Array(aue),t.sane=1,t.back=-1,qf},C9=e=>{if(Kf(e))return wl;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,v9(e)},b9=(e,t)=>{let n;if(Kf(e))return wl;let i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?wl:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,C9(e))},w9=(e,t)=>{if(!e)return wl;let n=new due;e.state=n,n.strm=e,n.window=null,n.mode=rE;let i=b9(e,t);return i!==qf&&(e.state=null),i},uue=e=>w9(e,cue),GH=!0,yP,SP,hue=e=>{if(GH){yP=new Int32Array(512),SP=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Cw(u9,e.lens,0,288,yP,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Cw(h9,e.lens,0,32,SP,0,e.work,{bits:5}),GH=!1}e.lencode=yP,e.lenbits=9,e.distcode=SP,e.distbits=5},y9=(e,t,n,i)=>{let r,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),i-=r,i?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0},pue=(e,t)=>{let n,i,r,o,s,a,l,c,d,u,h,p,f,g,C=0,m,w,x,D,F,L,V,B,P=new Uint8Array(4),U,A,I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Kf(e)||!e.output||!e.input&&e.avail_in!==0)return wl;n=e.state,n.mode===yu&&(n.mode=CP),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,c=n.hold,d=n.bits,u=a,h=l,B=qf;e:for(;;)switch(n.mode){case rE:if(n.wrap===0){n.mode=CP;break}for(;d<16;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,P[0]=c&255,P[1]=c>>>8&255,n.check=_o(n.check,P,2,0),c=0,d=0,n.mode=CH;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Zi;break}if((c&15)!==vH){e.msg="unknown compression method",n.mode=Zi;break}if(c>>>=4,d-=4,V=(c&15)+8,n.wbits===0&&(n.wbits=V),V>15||V>n.wbits){e.msg="invalid window size",n.mode=Zi;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?_H:yu,c=0,d=0;break;case CH:for(;d<16;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(n.flags=c,(n.flags&255)!==vH){e.msg="unknown compression method",n.mode=Zi;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Zi;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,n.check=_o(n.check,P,2,0)),c=0,d=0,n.mode=bH;case bH:for(;d<32;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,P[2]=c>>>16&255,P[3]=c>>>24&255,n.check=_o(n.check,P,4,0)),c=0,d=0,n.mode=wH;case wH:for(;d<16;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,n.check=_o(n.check,P,2,0)),c=0,d=0,n.mode=yH;case yH:if(n.flags&1024){for(;d<16;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(P[0]=c&255,P[1]=c>>>8&255,n.check=_o(n.check,P,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=SH;case SH:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(V=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+p),V)),n.flags&512&&n.wrap&4&&(n.check=_o(n.check,i,p,o)),a-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=xH;case xH:if(n.flags&2048){if(a===0)break e;p=0;do V=i[o+p++],n.head&&V&&n.length<65536&&(n.head.name+=String.fromCharCode(V));while(V&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=_o(n.check,i,p,o)),a-=p,o+=p,V)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=EH;case EH:if(n.flags&4096){if(a===0)break e;p=0;do V=i[o+p++],n.head&&V&&n.length<65536&&(n.head.comment+=String.fromCharCode(V));while(V&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=_o(n.check,i,p,o)),a-=p,o+=p,V)break e}else n.head&&(n.head.comment=null);n.mode=DH;case DH:if(n.flags&512){for(;d<16;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Zi;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=yu;break;case _H:for(;d<32;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}e.adler=n.check=VH(c),c=0,d=0,n.mode=tE;case tE:if(n.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=d,rue;e.adler=n.check=1,n.mode=yu;case yu:if(t===nue||t===Y2)break e;case CP:if(n.last){c>>>=d&7,d-=d&7,n.mode=wP;break}for(;d<3;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}switch(n.last=c&1,c>>>=1,d-=1,c&3){case 0:n.mode=AH;break;case 1:if(hue(n),n.mode=Z2,t===Y2){c>>>=2,d-=2;break e}break;case 2:n.mode=FH;break;case 3:e.msg="invalid block type",n.mode=Zi}c>>>=2,d-=2;break;case AH:for(c>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Zi;break}if(n.length=c&65535,c=0,d=0,n.mode=bP,t===Y2)break e;case bP:n.mode=RH;case RH:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;r.set(i.subarray(o,o+p),s),a-=p,o+=p,l-=p,s+=p,n.length-=p;break}n.mode=yu;break;case FH:for(;d<14;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(n.nlen=(c&31)+257,c>>>=5,d-=5,n.ndist=(c&31)+1,c>>>=5,d-=5,n.ncode=(c&15)+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Zi;break}n.have=0,n.mode=MH;case MH:for(;n.have<n.ncode;){for(;d<3;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.lens[I[n.have++]]=c&7,c>>>=3,d-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,U={bits:n.lenbits},B=Cw(tue,n.lens,0,19,n.lencode,0,n.work,U),n.lenbits=U.bits,B){e.msg="invalid code lengths set",n.mode=Zi;break}n.have=0,n.mode=IH;case IH:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[c&(1<<n.lenbits)-1],m=C>>>24,w=C>>>16&255,x=C&65535,!(m<=d);){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(x<16)c>>>=m,d-=m,n.lens[n.have++]=x;else{if(x===16){for(A=m+2;d<A;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(c>>>=m,d-=m,n.have===0){e.msg="invalid bit length repeat",n.mode=Zi;break}V=n.lens[n.have-1],p=3+(c&3),c>>>=2,d-=2}else if(x===17){for(A=m+3;d<A;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}c>>>=m,d-=m,V=0,p=3+(c&7),c>>>=3,d-=3}else{for(A=m+7;d<A;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}c>>>=m,d-=m,V=0,p=11+(c&127),c>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Zi;break}for(;p--;)n.lens[n.have++]=V}}if(n.mode===Zi)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Zi;break}if(n.lenbits=9,U={bits:n.lenbits},B=Cw(u9,n.lens,0,n.nlen,n.lencode,0,n.work,U),n.lenbits=U.bits,B){e.msg="invalid literal/lengths set",n.mode=Zi;break}if(n.distbits=6,n.distcode=n.distdyn,U={bits:n.distbits},B=Cw(h9,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,U),n.distbits=U.bits,B){e.msg="invalid distances set",n.mode=Zi;break}if(n.mode=Z2,t===Y2)break e;case Z2:n.mode=X2;case X2:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=d,Yde(e,h),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,c=n.hold,d=n.bits,n.mode===yu&&(n.back=-1);break}for(n.back=0;C=n.lencode[c&(1<<n.lenbits)-1],m=C>>>24,w=C>>>16&255,x=C&65535,!(m<=d);){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(w&&(w&240)===0){for(D=m,F=w,L=x;C=n.lencode[L+((c&(1<<D+F)-1)>>D)],m=C>>>24,w=C>>>16&255,x=C&65535,!(D+m<=d);){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}c>>>=D,d-=D,n.back+=D}if(c>>>=m,d-=m,n.back+=m,n.length=x,w===0){n.mode=OH;break}if(w&32){n.back=-1,n.mode=yu;break}if(w&64){e.msg="invalid literal/length code",n.mode=Zi;break}n.extra=w&15,n.mode=TH;case TH:if(n.extra){for(A=n.extra;d<A;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=PH;case PH:for(;C=n.distcode[c&(1<<n.distbits)-1],m=C>>>24,w=C>>>16&255,x=C&65535,!(m<=d);){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if((w&240)===0){for(D=m,F=w,L=x;C=n.distcode[L+((c&(1<<D+F)-1)>>D)],m=C>>>24,w=C>>>16&255,x=C&65535,!(D+m<=d);){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}c>>>=D,d-=D,n.back+=D}if(c>>>=m,d-=m,n.back+=m,w&64){e.msg="invalid distance code",n.mode=Zi;break}n.offset=x,n.extra=w&15,n.mode=kH;case kH:if(n.extra){for(A=n.extra;d<A;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Zi;break}n.mode=LH;case LH:if(l===0)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Zi;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=r,f=s-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do r[s++]=g[f++];while(--p);n.length===0&&(n.mode=X2);break;case OH:if(l===0)break e;r[s++]=n.length,l--,n.mode=X2;break;case wP:if(n.wrap){for(;d<32;){if(a===0)break e;a--,c|=i[o++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?_o(n.check,r,h,s-h):xw(n.check,r,h,s-h)),h=l,n.wrap&4&&(n.flags?c:VH(c))!==n.check){e.msg="incorrect data check",n.mode=Zi;break}c=0,d=0}n.mode=NH;case NH:if(n.wrap&&n.flags){for(;d<32;){if(a===0)break e;a--,c+=i[o++]<<d,d+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Zi;break}c=0,d=0}n.mode=BH;case BH:B=iue;break e;case Zi:B=p9;break e;case g9:return f9;case m9:default:return wl}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<Zi&&(n.mode<wP||t!==mH))&&y9(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?_o(n.check,r,h,e.next_out-h):xw(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===yu?128:0)+(n.mode===Z2||n.mode===bP?256:0),(u===0&&h===0||t===mH)&&B===qf&&(B=oue),B},fue=e=>{if(Kf(e))return wl;let t=e.state;return t.window&&(t.window=null),e.state=null,qf},gue=(e,t)=>{if(Kf(e))return wl;let n=e.state;return(n.wrap&2)===0?wl:(n.head=t,t.done=!1,qf)},mue=(e,t)=>{let n=t.length,i,r,o;return Kf(e)||(i=e.state,i.wrap!==0&&i.mode!==tE)?wl:i.mode===tE&&(r=1,r=xw(r,t,n,0),r!==i.check)?p9:(o=y9(e,t,n,n),o?(i.mode=g9,f9):(i.havedict=1,qf))},vue=C9,Cue=b9,bue=v9,wue=uue,yue=w9,Sue=pue,xue=fue,Eue=gue,Due=mue,_ue="pako inflate (from Nodeca project)",xu={inflateReset:vue,inflateReset2:Cue,inflateResetKeep:bue,inflateInit:wue,inflateInit2:yue,inflate:Sue,inflateEnd:xue,inflateGetHeader:Eue,inflateSetDictionary:Due,inflateInfo:_ue};function Aue(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Rue=Aue,S9=Object.prototype.toString,{Z_NO_FLUSH:Fue,Z_FINISH:Mue,Z_OK:_w,Z_STREAM_END:xP,Z_NEED_DICT:EP,Z_STREAM_ERROR:Iue,Z_DATA_ERROR:HH,Z_MEM_ERROR:Tue}=Dv;function Mw(e){this.options=iE.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c9,this.strm.avail_out=0;let n=xu.inflateInit2(this.strm,t.windowBits);if(n!==_w)throw new Error(Wf[n]);if(this.header=new Rue,xu.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Dw.string2buf(t.dictionary):S9.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=xu.inflateSetDictionary(this.strm,t.dictionary),n!==_w)))throw new Error(Wf[n])}Mw.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,o,s,a;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Mue:Fue,S9.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=xu.inflate(n,s),o===EP&&r&&(o=xu.inflateSetDictionary(n,r),o===_w?o=xu.inflate(n,s):o===HH&&(o=EP));n.avail_in>0&&o===xP&&n.state.wrap>0&&e[n.next_in]!==0;)xu.inflateReset(n),o=xu.inflate(n,s);switch(o){case Iue:case HH:case EP:case Tue:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||o===xP))if(this.options.to==="string"){let l=Dw.utf8border(n.output,n.next_out),c=n.next_out-l,d=Dw.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===_w&&a===0)){if(o===xP)return o=xu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Mw.prototype.onData=function(e){this.chunks.push(e)};Mw.prototype.onEnd=function(e){e===_w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iE.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function GP(e,t){let n=new Mw(t);if(n.push(e),n.err)throw n.msg||Wf[n.err];return n.result}function Pue(e,t){return t=t||{},t.raw=!0,GP(e,t)}var kue=Mw,Lue=GP,Oue=Pue,Nue=GP,Bue=Dv,Vue={Inflate:kue,inflate:Lue,inflateRaw:Oue,ungzip:Nue,constants:Bue},{Deflate:glt,deflate:mlt,deflateRaw:vlt,gzip:Clt}=qde,{Inflate:Gue,inflate:Hue,inflateRaw:blt,ungzip:wlt}=Vue;var HP=Gue,x9=Hue;var D9=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;D9[e]=t}var E9=4294967295;function zue(e,t,n){let i=e;for(let r=0;r<n;r++)i=D9[(i^t[r])&255]^i>>>8;return i}function jue(e,t){return(zue(E9,e,t)^E9)>>>0}function zP(e,t,n){let i=e.readUint32(),r=jue(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(r!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${r}`)}function oE(e,t,n){for(let i=0;i<n;i++)t[i]=e[i]}function sE(e,t,n,i){let r=0;for(;r<i;r++)t[r]=e[r];for(;r<n;r++)t[r]=e[r]+t[r-i]&255}function aE(e,t,n,i){let r=0;if(n.length===0)for(;r<i;r++)t[r]=e[r];else for(;r<i;r++)t[r]=e[r]+n[r]&255}function lE(e,t,n,i,r){let o=0;if(n.length===0){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+(t[o-r]>>1)&255}else{for(;o<r;o++)t[o]=e[o]+(n[o]>>1)&255;for(;o<i;o++)t[o]=e[o]+(t[o-r]+n[o]>>1)&255}}function cE(e,t,n,i,r){let o=0;if(n.length===0){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+t[o-r]&255}else{for(;o<r;o++)t[o]=e[o]+n[o]&255;for(;o<i;o++)t[o]=e[o]+Uue(t[o-r],n[o],n[o-r])&255}}function Uue(e,t,n){let i=e+t-n,r=Math.abs(i-e),o=Math.abs(i-t),s=Math.abs(i-n);return r<=o&&r<=s?e:o<=s?t:n}function _9(e,t,n,i,r,o){switch(e){case 0:oE(t,n,r);break;case 1:sE(t,n,r,o);break;case 2:aE(t,n,i,r);break;case 3:lE(t,n,i,r,o);break;case 4:cE(t,n,i,r,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}var Wue=new Uint16Array([255]),$ue=new Uint8Array(Wue.buffer),que=$ue[0]===255;function A9(e){let{data:t,width:n,height:i,channels:r,depth:o}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*r,l=new Uint8Array(i*n*a),c=0;for(let d=0;d<7;d++){let u=s[d],h=Math.ceil((n-u.x)/u.xStep),p=Math.ceil((i-u.y)/u.yStep);if(h<=0||p<=0)continue;let f=h*a,g=new Uint8Array(f);for(let C=0;C<p;C++){let m=t[c++],w=t.subarray(c,c+f);c+=f;let x=new Uint8Array(f);_9(m,w,x,g,f,a),g.set(x);for(let D=0;D<h;D++){let F=u.x+D*u.xStep,L=u.y+C*u.yStep;if(!(F>=n||L>=i))for(let V=0;V<a;V++)l[(L*n+F)*a+V]=x[D*a+V]}}}if(o===16){let d=new Uint16Array(l.buffer);if(que)for(let u=0;u<d.length;u++)d[u]=Kue(d[u]);return d}else return l}function Kue(e){return(e&255)<<8|e>>8&255}var Yue=new Uint16Array([255]),Zue=new Uint8Array(Yue.buffer),Xue=Zue[0]===255,Que=new Uint8Array(0);function jP(e){let{data:t,width:n,height:i,channels:r,depth:o}=e,s=Math.ceil(o/8)*r,a=Math.ceil(o/8*r*n),l=new Uint8Array(i*a),c=Que,d=0,u,h;for(let p=0;p<i;p++){switch(u=t.subarray(d+1,d+1+a),h=l.subarray(p*a,(p+1)*a),t[d]){case 0:oE(u,h,a);break;case 1:sE(u,h,a,s);break;case 2:aE(u,h,c,a);break;case 3:lE(u,h,c,a,s);break;case 4:cE(u,h,c,a,s);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}c=h,d+=a+1}if(o===16){let p=new Uint16Array(l.buffer);if(Xue)for(let f=0;f<p.length;f++)p[f]=Jue(p[f]);return p}else return l}function Jue(e){return(e&255)<<8|e>>8&255}var dE=Uint8Array.of(137,80,78,71,13,10,26,10);function UP(e){if(!R9(e.readBytes(dE.length)))throw new Error("wrong PNG signature")}function R9(e){if(e.length<dE.length)return!1;for(let t=0;t<dE.length;t++)if(e[t]!==dE[t])return!1;return!0}var F9="tEXt",the=0,M9=new TextDecoder("latin1");function nhe(e){if(rhe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}var ihe=/^[\u0000-\u00FF]*$/;function rhe(e){if(!ihe.test(e))throw new Error("invalid latin1 text")}function I9(e,t,n){let i=WP(t);e[i]=ohe(t,n-i.length-1)}function WP(e){for(e.mark();e.readByte()!==the;);let t=e.offset;e.reset();let n=M9.decode(e.readBytes(t-e.offset-1));return e.skip(1),nhe(n),n}function ohe(e,t){return M9.decode(e.readBytes(t))}var As={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Iw={UNKNOWN:-1,DEFLATE:0},uE={UNKNOWN:-1,ADAPTIVE:0},Tw={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Pw={NONE:0,BACKGROUND:1,PREVIOUS:2},hE={SOURCE:0,OVER:1};var pE=class extends hw{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,n={}){super(t);let{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new HP,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Iw.UNKNOWN,this._filterMethod=uE.UNKNOWN,this._interlaceMethod=Tw.UNKNOWN,this._colorType=As.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(UP(this);!this._end;){let t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(UP(this);!this._end;){let t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){let i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case F9:I9(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?zP(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){let i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?zP(this,t+4,n):this.skip(4)}decodeIHDR(){let t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=she(this.readUint8());let n=this.readUint8();this._colorType=n;let i;switch(n){case As.GREYSCALE:i=1;break;case As.TRUECOLOUR:i=3;break;case As.INDEXED_COLOUR:i=1;break;case As.GREYSCALE_ALPHA:i=2;break;case As.TRUECOLOUR_ALPHA:i=4;break;case As.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Iw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);let n=t/3;this._hasPalette=!0;let i=[];this._palette=i;for(let r=0;r<n;r++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case As.GREYSCALE:case As.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case As.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){let i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case As.UNKNOWN:case As.GREYSCALE_ALPHA:case As.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){let n=WP(this),i=this.readUint8();if(i!==Iw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);let r=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:x9(r)}}decodepHYs(){let t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){let n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=jP({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{let r=this._apng.frames.at(t-1);this.disposeFrame(i,r,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case Pw.NONE:break;case Pw.BACKGROUND:for(let r=0;r<this._png.height;r++)for(let o=0;o<this._png.width;o++){let s=(r*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)i.data[s+a]=0}break;case Pw.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){let i=1<<this._png.depth,r=(o,s)=>{let a=((o+n.yOffset)*this._png.width+n.xOffset+s)*this._png.channels,l=(o*n.width+s)*this._png.channels;return{index:a,frameIndex:l}};switch(n.blendOp){case hE.SOURCE:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){let{index:a,frameIndex:l}=r(o,s);for(let c=0;c<this._png.channels;c++)t.data[a+c]=n.data[l+c]}break;case hE.OVER:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){let{index:a,frameIndex:l}=r(o,s);for(let c=0;c<this._png.channels;c++){let d=n.data[l+this._png.channels-1]/i,u=c%(this._png.channels-1)===0?1:n.data[l+c],h=Math.floor(d*u+(1-d)*t.data[a+c]);t.data[a+c]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==uE.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Tw.NO_INTERLACE)this._png.data=jP({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Tw.ADAM7)this._png.data=A9({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Pw.NONE,blendOp:hE.SOURCE,data:t}),this._inflator=new HP,this._writingDataChunks=!1}};function she(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}function T9(e,t){return new pE(e,t).decode()}var tn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function $P(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var Ri={log:$P,warn:function(e){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):$P.call(null,arguments))},error:function(e){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):$P(e))}};function qP(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Yf(i.response,t,n)},i.onerror=function(){Ri.error("could not download file")},i.send()}function P9(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function fE(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Yf=tn.saveAs||((typeof window>"u"?"undefined":Si(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=tn.URL||tn.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin!==location.origin?P9(r.href)?qP(e,t,n):fE(r,r.target="_blank"):fE(r)):(r.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){fE(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(P9(e))qP(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){fE(i)})}else navigator.msSaveOrOpenBlob((function(r,o){return o===void 0?o={autoBom:!1}:Si(o)!=="object"&&(Ri.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return qP(e,t,n);var r=e.type==="application/octet-stream",o=/constructor/i.test(tn.HTMLElement)||tn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&o)&&(typeof FileReader>"u"?"undefined":Si(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=d:location=d,i=null},a.readAsDataURL(e)}else{var l=tn.URL||tn.webkitURL,c=l.createObjectURL(e);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function iz(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(e);s&&(t=o(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var CE=tn.atob.bind(tn),k9=tn.btoa.bind(tn);function KP(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];n=ts(n,i,r,o,t[0],7,-680876936),o=ts(o,n,i,r,t[1],12,-389564586),r=ts(r,o,n,i,t[2],17,606105819),i=ts(i,r,o,n,t[3],22,-1044525330),n=ts(n,i,r,o,t[4],7,-176418897),o=ts(o,n,i,r,t[5],12,1200080426),r=ts(r,o,n,i,t[6],17,-1473231341),i=ts(i,r,o,n,t[7],22,-45705983),n=ts(n,i,r,o,t[8],7,1770035416),o=ts(o,n,i,r,t[9],12,-1958414417),r=ts(r,o,n,i,t[10],17,-42063),i=ts(i,r,o,n,t[11],22,-1990404162),n=ts(n,i,r,o,t[12],7,1804603682),o=ts(o,n,i,r,t[13],12,-40341101),r=ts(r,o,n,i,t[14],17,-1502002290),n=ns(n,i=ts(i,r,o,n,t[15],22,1236535329),r,o,t[1],5,-165796510),o=ns(o,n,i,r,t[6],9,-1069501632),r=ns(r,o,n,i,t[11],14,643717713),i=ns(i,r,o,n,t[0],20,-373897302),n=ns(n,i,r,o,t[5],5,-701558691),o=ns(o,n,i,r,t[10],9,38016083),r=ns(r,o,n,i,t[15],14,-660478335),i=ns(i,r,o,n,t[4],20,-405537848),n=ns(n,i,r,o,t[9],5,568446438),o=ns(o,n,i,r,t[14],9,-1019803690),r=ns(r,o,n,i,t[3],14,-187363961),i=ns(i,r,o,n,t[8],20,1163531501),n=ns(n,i,r,o,t[13],5,-1444681467),o=ns(o,n,i,r,t[2],9,-51403784),r=ns(r,o,n,i,t[7],14,1735328473),n=is(n,i=ns(i,r,o,n,t[12],20,-1926607734),r,o,t[5],4,-378558),o=is(o,n,i,r,t[8],11,-2022574463),r=is(r,o,n,i,t[11],16,1839030562),i=is(i,r,o,n,t[14],23,-35309556),n=is(n,i,r,o,t[1],4,-1530992060),o=is(o,n,i,r,t[4],11,1272893353),r=is(r,o,n,i,t[7],16,-155497632),i=is(i,r,o,n,t[10],23,-1094730640),n=is(n,i,r,o,t[13],4,681279174),o=is(o,n,i,r,t[0],11,-358537222),r=is(r,o,n,i,t[3],16,-722521979),i=is(i,r,o,n,t[6],23,76029189),n=is(n,i,r,o,t[9],4,-640364487),o=is(o,n,i,r,t[12],11,-421815835),r=is(r,o,n,i,t[15],16,530742520),n=rs(n,i=is(i,r,o,n,t[2],23,-995338651),r,o,t[0],6,-198630844),o=rs(o,n,i,r,t[7],10,1126891415),r=rs(r,o,n,i,t[14],15,-1416354905),i=rs(i,r,o,n,t[5],21,-57434055),n=rs(n,i,r,o,t[12],6,1700485571),o=rs(o,n,i,r,t[3],10,-1894986606),r=rs(r,o,n,i,t[10],15,-1051523),i=rs(i,r,o,n,t[1],21,-2054922799),n=rs(n,i,r,o,t[8],6,1873313359),o=rs(o,n,i,r,t[15],10,-30611744),r=rs(r,o,n,i,t[6],15,-1560198380),i=rs(i,r,o,n,t[13],21,1309151649),n=rs(n,i,r,o,t[4],6,-145523070),o=rs(o,n,i,r,t[11],10,-1120210379),r=rs(r,o,n,i,t[2],15,718787259),i=rs(i,r,o,n,t[9],21,-343485551),e[0]=Gh(n,e[0]),e[1]=Gh(i,e[1]),e[2]=Gh(r,e[2]),e[3]=Gh(o,e[3])}function DE(e,t,n,i,r,o){return t=Gh(Gh(t,e),Gh(i,o)),Gh(t<<r|t>>>32-r,n)}function ts(e,t,n,i,r,o,s){return DE(t&n|~t&i,e,t,r,o,s)}function ns(e,t,n,i,r,o,s){return DE(t&i|n&~i,e,t,r,o,s)}function is(e,t,n,i,r,o,s){return DE(t^n^i,e,t,r,o,s)}function rs(e,t,n,i,r,o,s){return DE(n^(t|~i),e,t,r,o,s)}function rz(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)KP(i,ahe(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(KP(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,KP(i,r),i}function ahe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var L9="0123456789abcdef".split("");function lhe(e){for(var t="",n=0;n<4;n++)t+=L9[e>>8*n+4&15]+L9[e>>8*n&15];return t}function che(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function e3(e){return rz(e).map(che).join("")}var dhe=(function(e){for(var t=0;t<e.length;t++)e[t]=lhe(e[t]);return e.join("")})(rz("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gh(e,t){if(dhe){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function t3(e,t){var n,i,r,o;if(e!==n){for(var s=(r=e,o=1+(256/e.length|0),new Array(o+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+s.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=e,i=a}else a=i;var u=t.length,h=0,p=0,f="";for(l=0;l<u;l++)p=(p+(d=a[h=(h+1)%256]))%256,a[h]=a[p],a[p]=d,s=a[(a[h]+a[p])%256],f+=String.fromCharCode(t.charCodeAt(l)^s);return f}var O9={print:4,modify:8,copy:16,"annot-forms":32};function Mv(e,t,n,i){this.v=1,this.r=2;var r=192;e.forEach(function(a){if(O9.perm!==void 0)throw new Error("Invalid permission: "+a);r+=O9[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(t+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^r)),this.encryptionKey=e3(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=t3(this.encryptionKey,this.padding)}function Iv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var r=e.charCodeAt(i);t+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):e[i]}return t}function N9(e){if(Si(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[i,!!r],o},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in t[n]){var s=t[n][o];try{s[0].apply(e,i)}catch(a){tn.console&&Ri.error("jsPDF PubSub Error",a.message,a)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function xE(e){if(!(this instanceof xE))return new xE(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function oz(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Zf(e,t,n,i,r){if(!(this instanceof Zf))return new Zf(e,t,n,i,r);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,oz.call(this,i,r)}function Tv(e,t,n,i,r){if(!(this instanceof Tv))return new Tv(e,t,n,i,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,oz.call(this,i,r)}function _t(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",d=null;Si(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,r=e.format||r,o=e.compress||e.compressPdf||o,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(o===!0?["FlateEncode"]:s),i=i||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=N9;var f="1.3",g=p.__private__.getPdfVersion=function(){return f};p.__private__.setPdfVersion=function(S){f=S};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var m=p.__private__.getPageFormat=function(S){return C[S]};r=r||"a4";var w="compat",x="advanced",D=w;function F(){this.saveGraphicsState(),J(new kt(gt,0,0,-gt,0,Oc()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),c="n",D=x}function L(){this.restoreGraphicsState(),c="S",D=w}var V=p.__private__.combineFontStyleAndFontWeight=function(S,O){if(S=="bold"&&O=="normal"||S=="bold"&&O==400||S=="normal"&&O=="italic"||S=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(S=O==400||O==="normal"?S==="italic"?"italic":"normal":O!=700&&O!=="bold"||S!=="normal"?(O==700?"bold":O)+""+S:"bold"),S};p.advancedAPI=function(S){var O=D===w;return O&&F.call(this),typeof S!="function"||(S(this),O&&L.call(this)),this},p.compatAPI=function(S){var O=D===x;return O&&L.call(this),typeof S!="function"||(S(this),O&&F.call(this)),this},p.isAdvancedAPI=function(){return D===x};var B,P=function(S){if(D!==x)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=p.roundToPrecision=p.__private__.roundToPrecision=function(S,O){var ie=t||O;if(isNaN(S)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ie).replace(/0+$/,"")};B=p.hpf=p.__private__.hpf=typeof l=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return U(S,l)}:l==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return U(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return U(S,16)};var A=p.f2=p.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return U(S,2)},I=p.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return U(S,3)},j=p.scale=p.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return D===w?S*gt:D===x?S:void 0},G=function(S){return j((function(O){return D===w?Oc()-O:D===x?O:void 0})(S))};p.__private__.setPrecision=p.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var Q,le="00000000000000000000000000000000",me=p.__private__.getFileId=function(){return le},ge=p.__private__.setFileId=function(S){return le=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(qi=new Mv(d.userPermissions,d.userPassword,d.ownerPassword,le)),le};p.setFileId=function(S){return ge(S),this},p.getFileId=function(){return me()};var se=p.__private__.convertDateToPDFDate=function(S){var O=S.getTimezoneOffset(),ie=O<0?"+":"-",fe=Math.floor(Math.abs(O/60)),we=Math.abs(O%60),ke=[ie,te(fe),"'",te(we),"'"].join("");return["D:",S.getFullYear(),te(S.getMonth()+1),te(S.getDate()),te(S.getHours()),te(S.getMinutes()),te(S.getSeconds()),ke].join("")},de=p.__private__.convertPDFDateToDate=function(S){var O=parseInt(S.substr(2,4),10),ie=parseInt(S.substr(6,2),10)-1,fe=parseInt(S.substr(8,2),10),we=parseInt(S.substr(10,2),10),ke=parseInt(S.substr(12,2),10),He=parseInt(S.substr(14,2),10);return new Date(O,ie,fe,we,ke,He,0)},he=p.__private__.setCreationDate=function(S){var O;if(S===void 0&&(S=new Date),S instanceof Date)O=se(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=S}return Q=O},M=p.__private__.getCreationDate=function(S){var O=Q;return S==="jsDate"&&(O=de(Q)),O};p.setCreationDate=function(S){return he(S),this},p.getCreationDate=function(S){return M(S)};var ee,te=p.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ue=p.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ae=0,Ce=[],Ae=[],Fe=0,Me=[],Ve=[],Ze=!1,et=Ae;p.__private__.setCustomOutputDestination=function(S){Ze=!0,et=S};var ot=function(S){Ze||(et=S)};p.__private__.resetCustomOutputDestination=function(){Ze=!1,et=Ae};var J=p.__private__.out=function(S){return S=S.toString(),Fe+=S.length+1,et.push(S),et},nt=p.__private__.write=function(S){return J(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},Rt=p.__private__.getArrayBuffer=function(S){for(var O=S.length,ie=new ArrayBuffer(O),fe=new Uint8Array(ie);O--;)fe[O]=S.charCodeAt(O);return ie},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return vt};var Ne=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(S){return Ne=D===x?S/gt:S,this};var ct,Ue=p.__private__.getFontSize=p.getFontSize=function(){return D===w?Ne:Ne*gt},lt=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(S){return lt=S,this},p.__private__.getR2L=p.getR2L=function(){return lt};var dt,rn=p.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))ct=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');ct=S}else ct=parseInt(S,10)};p.__private__.getZoomMode=function(){return ct};var yt,Ct=p.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');dt=S};p.__private__.getPageMode=function(){return dt};var Cn=p.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');yt=S};p.__private__.getLayoutMode=function(){return yt},p.__private__.setDisplayMode=p.setDisplayMode=function(S,O,ie){return rn(S),Cn(O),Ct(ie),this};var bn={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(S){if(Object.keys(bn).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bn[S]},p.__private__.getDocumentProperties=function(){return bn},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(S){for(var O in bn)bn.hasOwnProperty(O)&&S[O]&&(bn[O]=S[O]);return this},p.__private__.setDocumentProperty=function(S,O){if(Object.keys(bn).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bn[S]=O};var st,gt,St,bi,In,ln={},on={},pi=[],Mt={},ni={},Vt={},Ot={},wi=null,wn=0,Nt=[],Bn=new N9(p),jl=e.hotfixes||[],cr={},Bs={},Vs=[],kt=function S(O,ie,fe,we,ke,He){if(!(this instanceof S))return new S(O,ie,fe,we,ke,He);isNaN(O)&&(O=1),isNaN(ie)&&(ie=0),isNaN(fe)&&(fe=0),isNaN(we)&&(we=1),isNaN(ke)&&(ke=0),isNaN(He)&&(He=0),this._matrix=[O,ie,fe,we,ke,He]};Object.defineProperty(kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),kt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(S)},kt.prototype.multiply=function(S){var O=S.sx*this.sx+S.shy*this.shx,ie=S.sx*this.shy+S.shy*this.sy,fe=S.shx*this.sx+S.sy*this.shx,we=S.shx*this.shy+S.sy*this.sy,ke=S.tx*this.sx+S.ty*this.shx+this.tx,He=S.tx*this.shy+S.ty*this.sy+this.ty;return new kt(O,ie,fe,we,ke,He)},kt.prototype.decompose=function(){var S=this.sx,O=this.shy,ie=this.shx,fe=this.sy,we=this.tx,ke=this.ty,He=Math.sqrt(S*S+O*O),ht=(S/=He)*ie+(O/=He)*fe;ie-=S*ht,fe-=O*ht;var xt=Math.sqrt(ie*ie+fe*fe);return ht/=xt,S*(fe/=xt)<O*(ie/=xt)&&(S=-S,O=-O,ht=-ht,He=-He),{scale:new kt(He,0,0,xt,0,0),translate:new kt(1,0,0,1,we,ke),rotate:new kt(S,O,-O,S,0,0),skew:new kt(1,0,ht,1,0,0)}},kt.prototype.toString=function(S){return this.join(" ")},kt.prototype.inversed=function(){var S=this.sx,O=this.shy,ie=this.shx,fe=this.sy,we=this.tx,ke=this.ty,He=1/(S*fe-O*ie),ht=fe*He,xt=-O*He,Yt=-ie*He,Qt=S*He;return new kt(ht,xt,Yt,Qt,-ht*we-Yt*ke,-xt*we-Qt*ke)},kt.prototype.applyToPoint=function(S){var O=S.x*this.sx+S.y*this.shx+this.tx,ie=S.x*this.shy+S.y*this.sy+this.ty;return new Xl(O,ie)},kt.prototype.applyToRectangle=function(S){var O=this.applyToPoint(S),ie=this.applyToPoint(new Xl(S.x+S.w,S.y+S.h));return new Pp(O.x,O.y,ie.x-O.x,ie.y-O.y)},kt.prototype.clone=function(){var S=this.sx,O=this.shy,ie=this.shx,fe=this.sy,we=this.tx,ke=this.ty;return new kt(S,O,ie,fe,we,ke)},p.Matrix=kt;var Ni=p.matrixMult=function(S,O){return O.multiply(S)},zr=new kt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=zr;var to=function(S,O){if(!ni[S]){var ie=(O instanceof Zf?"Sh":"P")+(Object.keys(Mt).length+1).toString(10);O.id=ie,ni[S]=ie,Mt[ie]=O,Bn.publish("addPattern",O)}};p.ShadingPattern=Zf,p.TilingPattern=Tv,p.addShadingPattern=function(S,O){return P("addShadingPattern()"),to(S,O),this},p.beginTilingPattern=function(S){P("beginTilingPattern()"),kp(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},p.endTilingPattern=function(S,O){P("endTilingPattern()"),O.stream=Ve[ee].join(`
`),to(S,O),Bn.publish("endTilingPattern",O),Vs.pop().restore()};var bo,$i=p.__private__.newObject=function(){var S=jr();return no(S,!0),S},jr=p.__private__.newObjectDeferred=function(){return ae++,Ce[ae]=function(){return Fe},ae},no=function(S,O){return O=typeof O=="boolean"&&O,Ce[S]=Fe,O&&J(S+" 0 obj"),S},Ud=p.__private__.newAdditionalObject=function(){var S={objId:jr(),content:""};return Me.push(S),S},Tc=jr(),Tn=jr(),Za=p.__private__.decodeColorString=function(S){var O=S.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length!==5||O[4]!=="k"&&O[4]!=="K"||(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ie=parseFloat(O[0]);O=[ie,ie,ie,"r"]}for(var fe="#",we=0;we<3;we++)fe+=("0"+Math.floor(255*parseFloat(O[we])).toString(16)).slice(-2);return fe},ga=p.__private__.encodeColorString=function(S){var O;typeof S=="string"&&(S={ch1:S});var ie=S.ch1,fe=S.ch2,we=S.ch3,ke=S.ch4,He=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var ht=new iz(ie);if(ht.ok)ie=ht.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var xt=parseInt(ie.substr(1),16);ie=xt>>16&255,fe=xt>>8&255,we=255&xt}if(fe===void 0||ke===void 0&&ie===fe&&fe===we)O=typeof ie=="string"?ie+" "+He[0]:S.precision===2?A(ie/255)+" "+He[0]:I(ie/255)+" "+He[0];else if(ke===void 0||Si(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",He[1]].join(" ");O=typeof ie=="string"?[ie,fe,we,He[1]].join(" "):S.precision===2?[A(ie/255),A(fe/255),A(we/255),He[1]].join(" "):[I(ie/255),I(fe/255),I(we/255),He[1]].join(" ")}else O=typeof ie=="string"?[ie,fe,we,ke,He[2]].join(" "):S.precision===2?[A(ie),A(fe),A(we),A(ke),He[2]].join(" "):[I(ie),I(fe),I(we),I(ke),He[2]].join(" ");return O},ma=p.__private__.getFilters=function(){return s},Gs=p.__private__.putStream=function(S){var O=(S=S||{}).data||"",ie=S.filters||ma(),fe=S.alreadyAppliedFilters||[],we=S.addLength1||!1,ke=O.length,He=S.objectId,ht=function(ur){return ur};if(d!==null&&He===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ht=qi.encryptor(He,0));var xt={};ie===!0&&(ie=["FlateEncode"]);var Yt=S.additionalKeyValues||[],Qt=(xt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(O,ie):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(xt.data.length!==0&&(Yt.push({key:"Length",value:xt.data.length}),we===!0&&Yt.push({key:"Length1",value:ke})),Qt.length!=0)if(Qt.split("/").length-1==1)Yt.push({key:"Filter",value:Qt});else{Yt.push({key:"Filter",value:"["+Qt+"]"});for(var On=0;On<Yt.length;On+=1)if(Yt[On].key==="DecodeParms"){for(var Vi=[],dr=0;dr<xt.reverseChain.split("/").length-1;dr+=1)Vi.push("null");Vi.push(Yt[On].value),Yt[On].value="["+Vi.join(" ")+"]"}}J("<<");for(var yi=0;yi<Yt.length;yi++)J("/"+Yt[yi].key+" "+Yt[yi].value);J(">>"),xt.data.length!==0&&(J("stream"),J(ht(xt.data)),J("endstream"))},Wd=p.__private__.putPage=function(S){var O=S.number,ie=S.data,fe=S.objId,we=S.contentsObjId;no(fe,!0),J("<</Type /Page"),J("/Parent "+S.rootDictionaryObjId+" 0 R"),J("/Resources "+S.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(B(S.mediaBox.bottomLeftX))+" "+parseFloat(B(S.mediaBox.bottomLeftY))+" "+B(S.mediaBox.topRightX)+" "+B(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&J("/CropBox ["+B(S.cropBox.bottomLeftX)+" "+B(S.cropBox.bottomLeftY)+" "+B(S.cropBox.topRightX)+" "+B(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&J("/BleedBox ["+B(S.bleedBox.bottomLeftX)+" "+B(S.bleedBox.bottomLeftY)+" "+B(S.bleedBox.topRightX)+" "+B(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&J("/TrimBox ["+B(S.trimBox.bottomLeftX)+" "+B(S.trimBox.bottomLeftY)+" "+B(S.trimBox.topRightX)+" "+B(S.trimBox.topRightY)+"]"),S.artBox!==null&&J("/ArtBox ["+B(S.artBox.bottomLeftX)+" "+B(S.artBox.bottomLeftY)+" "+B(S.artBox.topRightX)+" "+B(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&J("/UserUnit "+S.userUnit),Bn.publish("putPage",{objId:fe,pageContext:Nt[O],pageNumber:O,page:ie}),J("/Contents "+we+" 0 R"),J(">>"),J("endobj");var ke=ie.join(`
`);return D===x&&(ke+=`
Q`),no(we,!0),Gs({data:ke,filters:ma(),objectId:we}),J("endobj"),fe},Xa=p.__private__.putPages=function(){var S,O,ie=[];for(S=1;S<=wn;S++)Nt[S].objId=jr(),Nt[S].contentsObjId=jr();for(S=1;S<=wn;S++)ie.push(Wd({number:S,data:Ve[S],objId:Nt[S].objId,contentsObjId:Nt[S].contentsObjId,mediaBox:Nt[S].mediaBox,cropBox:Nt[S].cropBox,bleedBox:Nt[S].bleedBox,trimBox:Nt[S].trimBox,artBox:Nt[S].artBox,userUnit:Nt[S].userUnit,rootDictionaryObjId:Tc,resourceDictionaryObjId:Tn}));no(Tc,!0),J("<</Type /Pages");var fe="/Kids [";for(O=0;O<wn;O++)fe+=ie[O]+" 0 R ";J(fe+"]"),J("/Count "+wn),J(">>"),J("endobj"),Bn.publish("postPutPages")},Ul=function(S){Bn.publish("putFont",{font:S,out:J,newObject:$i,putStream:Gs}),S.isAlreadyPutted!==!0&&(S.objectNumber=$i(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Iv(S.postScriptName)),J("/Subtype /Type1"),typeof S.encoding=="string"&&J("/Encoding /"+S.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Qa=function(S){S.objectNumber=$i();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[B(S.x),B(S.y),B(S.x+S.width),B(S.y+S.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ie=S.pages[1].join(`
`);Gs({data:ie,additionalKeyValues:O,objectId:S.objectNumber}),J("endobj")},$d=function(S,O){O||(O=21);var ie=$i(),fe=(function(He,ht){var xt,Yt=[],Qt=1/(ht-1);for(xt=0;xt<1;xt+=Qt)Yt.push(xt);if(Yt.push(1),He[0].offset!=0){var On={offset:0,color:He[0].color};He.unshift(On)}if(He[He.length-1].offset!=1){var Vi={offset:1,color:He[He.length-1].color};He.push(Vi)}for(var dr="",yi=0,ur=0;ur<Yt.length;ur++){for(xt=Yt[ur];xt>He[yi+1].offset;)yi++;var hr=He[yi].offset,_r=(xt-hr)/(He[yi+1].offset-hr),tl=He[yi].color,js=He[yi+1].color;dr+=ue(Math.round((1-_r)*tl[0]+_r*js[0]).toString(16))+ue(Math.round((1-_r)*tl[1]+_r*js[1]).toString(16))+ue(Math.round((1-_r)*tl[2]+_r*js[2]).toString(16))}return dr.trim()})(S.colors,O),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+O+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gs({data:fe,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),J("endobj"),S.objectNumber=$i(),J("<< /ShadingType "+S.type),J("/ColorSpace /DeviceRGB");var ke="/Coords ["+B(parseFloat(S.coords[0]))+" "+B(parseFloat(S.coords[1]))+" ";S.type===2?ke+=B(parseFloat(S.coords[2]))+" "+B(parseFloat(S.coords[3])):ke+=B(parseFloat(S.coords[2]))+" "+B(parseFloat(S.coords[3]))+" "+B(parseFloat(S.coords[4]))+" "+B(parseFloat(S.coords[5])),J(ke+="]"),S.matrix&&J("/Matrix ["+S.matrix.toString()+"]"),J("/Function "+ie+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Wl=function(S,O){var ie=jr(),fe=$i();O.push({resourcesOid:ie,objectOid:fe}),S.objectNumber=fe;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+S.boundingBox.map(B).join(" ")+"]"}),we.push({key:"XStep",value:B(S.xStep)}),we.push({key:"YStep",value:B(S.yStep)}),we.push({key:"Resources",value:ie+" 0 R"}),S.matrix&&we.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Gs({data:S.stream,additionalKeyValues:we,objectId:S.objectNumber}),J("endobj")},Bi=function(S){for(var O in S.objectNumber=$i(),J("<<"),S)switch(O){case"opacity":J("/ca "+A(S[O]));break;case"stroke-opacity":J("/CA "+A(S[O]))}J(">>"),J("endobj")},xp=function(S){no(S.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var O in J("/Font <<"),ln)ln.hasOwnProperty(O)&&(u===!1||u===!0&&h.hasOwnProperty(O))&&J("/"+O+" "+ln[O].objectNumber+" 0 R");J(">>")})(),(function(){if(Object.keys(Mt).length>0){for(var O in J("/Shading <<"),Mt)Mt.hasOwnProperty(O)&&Mt[O]instanceof Zf&&Mt[O].objectNumber>=0&&J("/"+O+" "+Mt[O].objectNumber+" 0 R");Bn.publish("putShadingPatternDict"),J(">>")}})(),(function(O){if(Object.keys(Mt).length>0){for(var ie in J("/Pattern <<"),Mt)Mt.hasOwnProperty(ie)&&Mt[ie]instanceof p.TilingPattern&&Mt[ie].objectNumber>=0&&Mt[ie].objectNumber<O&&J("/"+ie+" "+Mt[ie].objectNumber+" 0 R");Bn.publish("putTilingPatternDict"),J(">>")}})(S.objectOid),(function(){if(Object.keys(Vt).length>0){var O;for(O in J("/ExtGState <<"),Vt)Vt.hasOwnProperty(O)&&Vt[O].objectNumber>=0&&J("/"+O+" "+Vt[O].objectNumber+" 0 R");Bn.publish("putGStateDict"),J(">>")}})(),(function(){for(var O in J("/XObject <<"),cr)cr.hasOwnProperty(O)&&cr[O].objectNumber>=0&&J("/"+O+" "+cr[O].objectNumber+" 0 R");Bn.publish("putXobjectDict"),J(">>")})(),J(">>"),J("endobj")},Vg=function(S){on[S.fontName]=on[S.fontName]||{},on[S.fontName][S.fontStyle]=S.id},Gg=function(S,O,ie,fe,we){var ke={id:"F"+(Object.keys(ln).length+1).toString(10),postScriptName:S,fontName:O,fontStyle:ie,encoding:fe,isStandardFont:we||!1,metadata:{}};return Bn.publish("addFont",{font:ke,instance:this}),ln[ke.id]=ke,Vg(ke),ke.id},us=p.__private__.pdfEscape=p.pdfEscape=function(S,O){return(function(ie,fe){var we,ke,He,ht,xt,Yt,Qt,On,Vi;if(He=(fe=fe||{}).sourceEncoding||"Unicode",xt=fe.outputEncoding,(fe.autoencode||xt)&&ln[st].metadata&&ln[st].metadata[He]&&ln[st].metadata[He].encoding&&(ht=ln[st].metadata[He].encoding,!xt&&ln[st].encoding&&(xt=ln[st].encoding),!xt&&ht.codePages&&(xt=ht.codePages[0]),typeof xt=="string"&&(xt=ht[xt]),xt)){for(Qt=!1,Yt=[],we=0,ke=ie.length;we<ke;we++)(On=xt[ie.charCodeAt(we)])?Yt.push(String.fromCharCode(On)):Yt.push(ie[we]),Yt[we].charCodeAt(0)>>8&&(Qt=!0);ie=Yt.join("")}for(we=ie.length;Qt===void 0&&we!==0;)ie.charCodeAt(we-1)>>8&&(Qt=!0),we--;if(!Qt)return ie;for(Yt=fe.noBOM?[]:[254,255],we=0,ke=ie.length;we<ke;we++){if((Vi=(On=ie.charCodeAt(we))>>8)>>8)throw new Error("Character at position "+we+" of string '"+ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yt.push(Vi),Yt.push(On-(Vi<<8))}return String.fromCharCode.apply(void 0,Yt)})(S,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yu=p.__private__.beginPage=function(S){Ve[++wn]=[],Nt[wn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Dp(wn),ot(Ve[ee])},Hg=function(S,O){var ie,fe,we;switch(n=O||n,typeof S=="string"&&(ie=m(S.toLowerCase()),Array.isArray(ie)&&(fe=ie[0],we=ie[1])),Array.isArray(S)&&(fe=S[0]*gt,we=S[1]*gt),isNaN(fe)&&(fe=r[0],we=r[1]),(fe>14400||we>14400)&&(Ri.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),we=Math.min(14400,we)),r=[fe,we],n.substr(0,1)){case"l":we>fe&&(r=[we,fe]);break;case"p":fe>we&&(r=[we,fe])}Yu(r),Xt(Qu),J(qd),Ip!==0&&J(Ip+" J"),Tp!==0&&J(Tp+" j"),Bn.publish("addPage",{pageNumber:wn})},Ep=function(S){S>0&&S<=wn&&(Ve.splice(S,1),Nt.splice(S,1),wn--,ee>wn&&(ee=wn),this.setPage(ee))},Dp=function(S){S>0&&S<=wn&&(ee=S)},zg=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ve.length-1},_p=function(S,O,ie){var fe,we=void 0;return ie=ie||{},S=S!==void 0?S:ln[st].fontName,O=O!==void 0?O:ln[st].fontStyle,fe=S.toLowerCase(),on[fe]!==void 0&&on[fe][O]!==void 0?we=on[fe][O]:on[S]!==void 0&&on[S][O]!==void 0?we=on[S][O]:ie.disableWarning===!1&&Ri.warn("Unable to look up font label for font '"+S+"', '"+O+"'. Refer to getFontList() for available fonts."),we||ie.noFallback||(we=on.times[O])==null&&(we=on.times.normal),we},Ja=p.__private__.putInfo=function(){var S=$i(),O=function(fe){return fe};for(var ie in d!==null&&(O=qi.encryptor(S,0)),J("<<"),J("/Producer ("+us(O("jsPDF "+_t.version))+")"),bn)bn.hasOwnProperty(ie)&&bn[ie]&&J("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+us(O(bn[ie]))+")");J("/CreationDate ("+us(O(Q))+")"),J(">>"),J("endobj")},Pc=p.__private__.putCatalog=function(S){var O=(S=S||{}).rootDictionaryObjId||Tc;switch($i(),J("<<"),J("/Type /Catalog"),J("/Pages "+O+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+ct;ie.substr(ie.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&J("/OpenAction [3 0 R /XYZ null null "+A(ct)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}dt&&J("/PageMode /"+dt),Bn.publish("putCatalog"),J(">>"),J("endobj")},jg=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(ae+1)),J("/Root "+ae+" 0 R"),J("/Info "+(ae-1)+" 0 R"),d!==null&&J("/Encrypt "+qi.oid+" 0 R"),J("/ID [ <"+le+"> <"+le+"> ]"),J(">>")},tr=p.__private__.putHeader=function(){J("%PDF-"+f),J("%\xBA\xDF\xAC\xE0")},Ap=p.__private__.putXRef=function(){var S="0000000000";J("xref"),J("0 "+(ae+1)),J("0000000000 65535 f ");for(var O=1;O<=ae;O++)typeof Ce[O]=="function"?J((S+Ce[O]()).slice(-10)+" 00000 n "):Ce[O]!==void 0?J((S+Ce[O]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},va=p.__private__.buildDocument=function(){var S;ae=0,Fe=0,Ae=[],Ce=[],Me=[],Tc=jr(),Tn=jr(),ot(Ae),Bn.publish("buildDocument"),tr(),Xa(),(function(){Bn.publish("putAdditionalObjects");for(var ie=0;ie<Me.length;ie++){var fe=Me[ie];no(fe.objId,!0),J(fe.content),J("endobj")}Bn.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var ie in ln)ln.hasOwnProperty(ie)&&(u===!1||u===!0&&h.hasOwnProperty(ie))&&Ul(ln[ie])})(),(function(){var ie;for(ie in Vt)Vt.hasOwnProperty(ie)&&Bi(Vt[ie])})(),(function(){for(var ie in cr)cr.hasOwnProperty(ie)&&Qa(cr[ie])})(),(function(ie){var fe;for(fe in Mt)Mt.hasOwnProperty(fe)&&(Mt[fe]instanceof Zf?$d(Mt[fe]):Mt[fe]instanceof Tv&&Wl(Mt[fe],ie))})(S),Bn.publish("putResources"),S.forEach(xp),xp({resourcesOid:Tn,objectOid:Number.MAX_SAFE_INTEGER}),Bn.publish("postPutResources"),d!==null&&(qi.oid=$i(),J("<<"),J("/Filter /Standard"),J("/V "+qi.v),J("/R "+qi.r),J("/U <"+qi.toHexString(qi.U)+">"),J("/O <"+qi.toHexString(qi.O)+">"),J("/P "+qi.P),J(">>"),J("endobj")),Ja(),Pc();var O=Fe;return Ap(),jg(),J("startxref"),J(""+O),J("%%EOF"),ot(Ve[ee]),Ae.join(`
`)},Zu=p.__private__.getBlob=function(S){return new Blob([Rt(S)],{type:"application/pdf"})},Ug=p.output=p.__private__.output=(bo=function(S,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",S){case void 0:return va();case"save":p.save(O.filename);break;case"arraybuffer":return Rt(va());case"blob":return Zu(va());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Zu(va()))||void 0;Ri.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",fe=va();try{ie=k9(fe)}catch{ie=k9(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+O.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(we=O.pdfObjectUrl,ke="");var He='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",ht=tn.open();return ht!==null&&ht.document.write(He),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Yt=tn.open();if(Yt!==null){Yt.document.write(xt);var Qt=this;Yt.document.documentElement.querySelector("#pdfViewer").onload=function(){Yt.document.title=O.filename,Yt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qt.output("bloburl"))}}return Yt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Vi=tn.open();if(Vi!==null&&(Vi.document.write(On),Vi.document.title=O.filename),Vi||typeof safari>"u")return Vi;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",O);default:return null}},bo.foo=function(){try{return bo.apply(this,arguments)}catch(ie){var S=ie.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var O="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ie.message;if(!tn.console)throw new Error(O);tn.console.error(O,ie),tn.alert&&alert(O)}},bo.foo.bar=bo,bo.foo),Fo=function(S){return Array.isArray(jl)===!0&&jl.indexOf(S)>-1};switch(i){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=Fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);gt=i}var qi=null;he(),ge();var Hs=p.__private__.getPageInfo=p.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[S].objId,pageNumber:S,pageContext:Nt[S]}},Rp=p.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Nt)if(Nt[O].objId===S)break;return Hs(O)},W0=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Nt[ee].objId,pageNumber:ee,pageContext:Nt[ee]}};p.addPage=function(){return Hg.apply(this,arguments),this},p.setPage=function(){return Dp.apply(this,arguments),ot.call(this,Ve[ee]),this},p.insertPage=function(S){return this.addPage(),this.movePage(ee,S),this},p.movePage=function(S,O){var ie,fe;if(S>O){ie=Ve[S],fe=Nt[S];for(var we=S;we>O;we--)Ve[we]=Ve[we-1],Nt[we]=Nt[we-1];Ve[O]=ie,Nt[O]=fe,this.setPage(O)}else if(S<O){ie=Ve[S],fe=Nt[S];for(var ke=S;ke<O;ke++)Ve[ke]=Ve[ke+1],Nt[ke]=Nt[ke+1];Ve[O]=ie,Nt[O]=fe,this.setPage(O)}return this},p.deletePage=function(){return Ep.apply(this,arguments),this},p.__private__.text=p.text=function(S,O,ie,fe,we){var ke,He,ht,xt,Yt,Qt,On,Vi,dr,yi=(fe=fe||{}).scope||this;if(typeof S=="number"&&typeof O=="number"&&(typeof ie=="string"||Array.isArray(ie))){var ur=ie;ie=O,O=S,S=ur}if(arguments[3]instanceof kt==0?(ht=arguments[4],xt=arguments[5],Si(On=arguments[3])==="object"&&On!==null||(typeof ht=="string"&&(xt=ht,ht=null),typeof On=="string"&&(xt=On,On=null),typeof On=="number"&&(ht=On,On=null),fe={flags:On,angle:ht,align:xt})):(P("The transform parameter of text() with a Matrix value"),dr=we),isNaN(O)||isNaN(ie)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return yi;var hr,_r="",tl=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:ql,js=yi.internal.scaleFactor;function Ca(Kn){return Kn=Kn.split("	").join(Array(fe.TabLen||9).join(" ")),us(Kn,On)}function Nc(Kn){for(var fi,ir=Kn.concat(),fr=[],wa=ir.length;wa--;)typeof(fi=ir.shift())=="string"?fr.push(fi):Array.isArray(Kn)&&(fi.length===1||fi[1]===void 0&&fi[2]===void 0)?fr.push(fi[0]):fr.push([fi[0],fi[1],fi[2]]);return fr}function Ju(Kn,fi){var ir;if(typeof Kn=="string")ir=fi(Kn)[0];else if(Array.isArray(Kn)){for(var fr,wa,Hp=Kn.concat(),oh=[],Qg=Hp.length;Qg--;)typeof(fr=Hp.shift())=="string"?oh.push(fi(fr)[0]):Array.isArray(fr)&&typeof fr[0]=="string"&&(wa=fi(fr[0],fr[1],fr[2]),oh.push([wa[0],wa[1],wa[2]]));ir=oh}return ir}var tc=!1,Bc=!0;if(typeof S=="string")tc=!0;else if(Array.isArray(S)){var Vc=S.concat();He=[];for(var nc,Ur=Vc.length;Ur--;)(typeof(nc=Vc.shift())!="string"||Array.isArray(nc)&&typeof nc[0]!="string")&&(Bc=!1);tc=Bc}if(tc===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Gc=Ne/yi.internal.scaleFactor,Hc=Gc*(tl-1);switch(fe.baseline){case"bottom":ie-=Hc;break;case"top":ie+=Gc-Hc;break;case"hanging":ie+=Gc-2*Hc;break;case"middle":ie+=Gc/2-Hc}if((Qt=fe.maxWidth||0)>0&&(typeof S=="string"?S=yi.splitTextToSize(S,Qt):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Kn,fi){return Kn.concat(yi.splitTextToSize(fi,Qt))},[]))),ke={text:S,x:O,y:ie,options:fe,mutex:{pdfEscape:us,activeFontKey:st,fonts:ln,activeFontSize:Ne}},Bn.publish("preProcessText",ke),S=ke.text,ht=(fe=ke.options).angle,dr instanceof kt==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,fe.rotationDirection===0&&(ht=-ht),D===x&&(ht=-ht);var eh=Math.cos(ht),th=Math.sin(ht);dr=new kt(eh,th,-th,eh,0,0)}else ht&&ht instanceof kt&&(dr=ht);D!==x||dr||(dr=zr),(Yt=fe.charSpace||Yl)!==void 0&&(_r+=B(j(Yt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Vi=fe.horizontalScale)!==void 0&&(_r+=B(100*Vi)+` Tz
`),fe.lang;var pr=-1,ic=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,nh=yi.internal.getCurrentPageInfo().pageContext;switch(ic){case 0:case!1:case"fill":pr=0;break;case 1:case!0:case"stroke":pr=1;break;case 2:case"fillThenStroke":pr=2;break;case 3:case"invisible":pr=3;break;case 4:case"fillAndAddForClipping":pr=4;break;case 5:case"strokeAndAddPathForClipping":pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":pr=6;break;case 7:case"addToPathForClipping":pr=7}var Zg=nh.usedRenderingMode!==void 0?nh.usedRenderingMode:-1;pr!==-1?_r+=pr+` Tr
`:Zg!==-1&&(_r+=`0 Tr
`),pr!==-1&&(nh.usedRenderingMode=pr),xt=fe.align||"left";var hs,zc=Ne*tl,ih=yi.internal.pageSize.getWidth(),Np=ln[st];Yt=fe.charSpace||Yl,Qt=fe.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var jc=[],Zd=function(Kn){return yi.getStringUnitWidth(Kn,{font:Np,charSpace:Yt,fontSize:Ne,doKerning:!1})*Ne/js};if(Object.prototype.toString.call(S)==="[object Array]"){var qo;He=Nc(S),xt!=="left"&&(hs=He.map(Zd));var Ko,Uc=0;if(xt==="right"){O-=hs[0],S=[],Ur=He.length;for(var nl=0;nl<Ur;nl++)nl===0?(Ko=Kl(O),qo=Wo(ie)):(Ko=j(Uc-hs[nl]),qo=-zc),S.push([He[nl],Ko,qo]),Uc=hs[nl]}else if(xt==="center"){O-=hs[0]/2,S=[],Ur=He.length;for(var Wc=0;Wc<Ur;Wc++)Wc===0?(Ko=Kl(O),qo=Wo(ie)):(Ko=j((Uc-hs[Wc])/2),qo=-zc),S.push([He[Wc],Ko,qo]),Uc=hs[Wc]}else if(xt==="left"){S=[],Ur=He.length;for(var rh=0;rh<Ur;rh++)S.push(He[rh])}else if(xt==="justify"&&Np.encoding==="Identity-H"){S=[],Ur=He.length,Qt=Qt!==0?Qt:ih;for(var $c=0,nr=0;nr<Ur;nr++)if(qo=nr===0?Wo(ie):-zc,Ko=nr===0?Kl(O):$c,nr<Ur-1){var Xg=j((Qt-hs[nr])/(He[nr].split(" ").length-1)),il=He[nr].split(" ");S.push([il[0]+" ",Ko,qo]),$c=0;for(var rl=1;rl<il.length;rl++){var qc=(Zd(il[rl-1]+" "+il[rl])-Zd(il[rl]))*js+Xg;rl==il.length-1?S.push([il[rl],qc,0]):S.push([il[rl]+" ",qc,0]),$c-=qc}}else S.push([He[nr],Ko,qo]);S.push(["",$c,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Ur=He.length,Qt=Qt!==0?Qt:ih,nr=0;nr<Ur;nr++){qo=nr===0?Wo(ie):-zc,Ko=nr===0?Kl(O):0;var Bp=He[nr].split(" ").length-1,Vp=Bp>0?(Qt-hs[nr])/Bp:0;nr<Ur-1?jc.push(B(j(Vp))):jc.push(0),S.push([He[nr],Ko,qo])}}}(typeof fe.R2L=="boolean"?fe.R2L:lt)===!0&&(S=Ju(S,function(Kn,fi,ir){return[Kn.split("").reverse().join(""),fi,ir]})),ke={text:S,x:O,y:ie,options:fe,mutex:{pdfEscape:us,activeFontKey:st,fonts:ln,activeFontSize:Ne}},Bn.publish("postProcessText",ke),S=ke.text,hr=ke.mutex.isHex||!1;var Gp=ln[st].encoding;Gp!=="WinAnsiEncoding"&&Gp!=="StandardEncoding"||(S=Ju(S,function(Kn,fi,ir){return[Ca(Kn),fi,ir]})),He=Nc(S),S=[];for(var Kc,rc,Yc,Xd=Array.isArray(He[0])?1:0,Zc="",Qd=function(Kn,fi,ir){var fr="";return ir instanceof kt?(ir=typeof fe.angle=="number"?Ni(ir,new kt(1,0,0,1,Kn,fi)):Ni(new kt(1,0,0,1,Kn,fi),ir),D===x&&(ir=Ni(new kt(1,0,0,-1,0,0),ir)),fr=ir.join(" ")+` Tm
`):fr=B(Kn)+" "+B(fi)+` Td
`,fr},ps=0;ps<He.length;ps++){switch(Zc="",Xd){case 1:Yc=(hr?"<":"(")+He[ps][0]+(hr?">":")"),Kc=parseFloat(He[ps][1]),rc=parseFloat(He[ps][2]);break;case 0:Yc=(hr?"<":"(")+He[ps]+(hr?">":")"),Kc=Kl(O),rc=Wo(ie)}jc!==void 0&&jc[ps]!==void 0&&(Zc=jc[ps]+` Tw
`),ps===0?S.push(Zc+Qd(Kc,rc,dr)+Yc):Xd===0?S.push(Zc+Yc):Xd===1&&S.push(Zc+Qd(Kc,rc,dr)+Yc)}S=Xd===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var ba=`BT
/`;return ba+=st+" "+Ne+` Tf
`,ba+=B(Ne*tl)+` TL
`,ba+=Kd+`
`,ba+=_r,ba+=S,J(ba+="ET"),h[st]=!0,yi};var $0=p.__private__.clip=p.clip=function(S){return J(S==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return $0("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var el=p.__private__.isValidStyle=function(S){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(O=!0),O};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(S){return el(S)&&(c=S),this};var Wg=p.__private__.getStyle=p.getStyle=function(S){var O=c;switch(S){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=S}return O},$g=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(S){return Xu("f",S),this},p.fillEvenOdd=function(S){return Xu("f*",S),this},p.fillStroke=function(S){return Xu("B",S),this},p.fillStrokeEvenOdd=function(S){return Xu("B*",S),this};var Xu=function(S,O){Si(O)==="object"?qg(O,S):J(S)},kc=function(S){S===null||D===x&&S===void 0||(S=Wg(S),J(S))};function q0(S,O,ie,fe,we){var ke=new Tv(O||this.boundingBox,ie||this.xStep,fe||this.yStep,this.gState,we||this.matrix);ke.stream=this.stream;var He=S+"$$"+this.cloneIndex+++"$$";return to(He,ke),ke}var qg=function(S,O){var ie=ni[S.key],fe=Mt[ie];if(fe instanceof Zf)J("q"),J(K0(O)),fe.gState&&p.setGState(fe.gState),J(S.matrix.toString()+" cm"),J("/"+ie+" sh"),J("Q");else if(fe instanceof Tv){var we=new kt(1,0,0,-1,0,Oc());S.matrix&&(we=we.multiply(S.matrix||zr),ie=q0.call(fe,S.key,S.boundingBox,S.xStep,S.yStep,we).id),J("q"),J("/Pattern cs"),J("/"+ie+" scn"),fe.gState&&p.setGState(fe.gState),J(O),J("Q")}},K0=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fp=p.moveTo=function(S,O){return J(B(j(S))+" "+B(G(O))+" m"),this},$l=p.lineTo=function(S,O){return J(B(j(S))+" "+B(G(O))+" l"),this},zs=p.curveTo=function(S,O,ie,fe,we,ke){return J([B(j(S)),B(G(O)),B(j(ie)),B(G(fe)),B(j(we)),B(G(ke)),"c"].join(" ")),this};p.__private__.line=p.line=function(S,O,ie,fe,we){if(isNaN(S)||isNaN(O)||isNaN(ie)||isNaN(fe)||!el(we))throw new Error("Invalid arguments passed to jsPDF.line");return D===w?this.lines([[ie-S,fe-O]],S,O,[1,1],we||"S"):this.lines([[ie-S,fe-O]],S,O,[1,1]).stroke()},p.__private__.lines=p.lines=function(S,O,ie,fe,we,ke){var He,ht,xt,Yt,Qt,On,Vi,dr,yi,ur,hr,_r;if(typeof S=="number"&&(_r=ie,ie=O,O=S,S=_r),fe=fe||[1,1],ke=ke||!1,isNaN(O)||isNaN(ie)||!Array.isArray(S)||!Array.isArray(fe)||!el(we)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fp(O,ie),He=fe[0],ht=fe[1],Yt=S.length,ur=O,hr=ie,xt=0;xt<Yt;xt++)(Qt=S[xt]).length===2?(ur=Qt[0]*He+ur,hr=Qt[1]*ht+hr,$l(ur,hr)):(On=Qt[0]*He+ur,Vi=Qt[1]*ht+hr,dr=Qt[2]*He+ur,yi=Qt[3]*ht+hr,ur=Qt[4]*He+ur,hr=Qt[5]*ht+hr,zs(On,Vi,dr,yi,ur,hr));return ke&&$g(),kc(we),this},p.path=function(S){for(var O=0;O<S.length;O++){var ie=S[O],fe=ie.c;switch(ie.op){case"m":Fp(fe[0],fe[1]);break;case"l":$l(fe[0],fe[1]);break;case"c":zs.apply(this,fe);break;case"h":$g()}}return this},p.__private__.rect=p.rect=function(S,O,ie,fe,we){if(isNaN(S)||isNaN(O)||isNaN(ie)||isNaN(fe)||!el(we))throw new Error("Invalid arguments passed to jsPDF.rect");return D===w&&(fe=-fe),J([B(j(S)),B(G(O)),B(j(ie)),B(j(fe)),"re"].join(" ")),kc(we),this},p.__private__.triangle=p.triangle=function(S,O,ie,fe,we,ke,He){if(isNaN(S)||isNaN(O)||isNaN(ie)||isNaN(fe)||isNaN(we)||isNaN(ke)||!el(He))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-S,fe-O],[we-ie,ke-fe],[S-we,O-ke]],S,O,[1,1],He,!0),this},p.__private__.roundedRect=p.roundedRect=function(S,O,ie,fe,we,ke,He){if(isNaN(S)||isNaN(O)||isNaN(ie)||isNaN(fe)||isNaN(we)||isNaN(ke)||!el(He))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*ie),ke=Math.min(ke,.5*fe),this.lines([[ie-2*we,0],[we*ht,0,we,ke-ke*ht,we,ke],[0,fe-2*ke],[0,ke*ht,-we*ht,ke,-we,ke],[2*we-ie,0],[-we*ht,0,-we,-ke*ht,-we,-ke],[0,2*ke-fe],[0,-ke*ht,we*ht,-ke,we,-ke]],S+we,O,[1,1],He,!0),this},p.__private__.ellipse=p.ellipse=function(S,O,ie,fe,we){if(isNaN(S)||isNaN(O)||isNaN(ie)||isNaN(fe)||!el(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*ie,He=4/3*(Math.SQRT2-1)*fe;return Fp(S+ie,O),zs(S+ie,O-He,S+ke,O-fe,S,O-fe),zs(S-ke,O-fe,S-ie,O-He,S-ie,O),zs(S-ie,O+He,S-ke,O+fe,S,O+fe),zs(S+ke,O+fe,S+ie,O+He,S+ie,O),kc(we),this},p.__private__.circle=p.circle=function(S,O,ie,fe){if(isNaN(S)||isNaN(O)||isNaN(ie)||!el(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,O,ie,ie,fe)},p.setFont=function(S,O,ie){return ie&&(O=V(O,ie)),st=_p(S,O,{disableWarning:!1}),this};var Y0=p.__private__.getFont=p.getFont=function(){return ln[_p.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var S,O,ie={};for(S in on)if(on.hasOwnProperty(S))for(O in ie[S]=[],on[S])on[S].hasOwnProperty(O)&&ie[S].push(O);return ie},p.addFont=function(S,O,ie,fe,we){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(ie=V(ie,fe)),Gg.call(this,S,O,ie,we=we||"Identity-H")};var ql,Qu=e.lineWidth||.200025,Z0=p.__private__.getLineWidth=p.getLineWidth=function(){return Qu},Xt=p.__private__.setLineWidth=p.setLineWidth=function(S){return Qu=S,J(B(j(S))+" w"),this};p.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(S,O){if(S=S||[],O=O||0,isNaN(O)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ie){return B(j(ie))}).join(" "),O=B(j(O)),J("["+S+"] "+O+" d"),this};var X0=p.__private__.getLineHeight=p.getLineHeight=function(){return Ne*ql};p.__private__.getLineHeight=p.getLineHeight=function(){return Ne*ql};var Q0=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(ql=S),this},J0=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ql};Q0(e.lineHeight);var Kl=p.__private__.getHorizontalCoordinate=function(S){return j(S)},Wo=p.__private__.getVerticalCoordinate=function(S){return D===x?S:Nt[ee].mediaBox.topRightY-Nt[ee].mediaBox.bottomLeftY-j(S)},eC=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(S){return B(Kl(S))},Kg=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(S){return B(Wo(S))},qd=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Za(qd)},p.__private__.setStrokeColor=p.setDrawColor=function(S,O,ie,fe){return qd=ga({ch1:S,ch2:O,ch3:ie,ch4:fe,pdfColorType:"draw",precision:2}),J(qd),this};var Mp=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Za(Mp)},p.__private__.setFillColor=p.setFillColor=function(S,O,ie,fe){return Mp=ga({ch1:S,ch2:O,ch3:ie,ch4:fe,pdfColorType:"fill",precision:2}),J(Mp),this};var Kd=e.textColor||"0 g",tC=p.__private__.getTextColor=p.getTextColor=function(){return Za(Kd)};p.__private__.setTextColor=p.setTextColor=function(S,O,ie,fe){return Kd=ga({ch1:S,ch2:O,ch3:ie,ch4:fe,pdfColorType:"text",precision:3}),this};var Yl=e.charSpace,nC=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Yl||0)};p.__private__.setCharSpace=p.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yl=S,this};var Ip=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(S){var O=p.CapJoinStyles[S];if(O===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ip=O,J(O+" J"),this};var Tp=0;p.__private__.setLineJoin=p.setLineJoin=function(S){var O=p.CapJoinStyles[S];if(O===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tp=O,J(O+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(B(j(S))+" M"),this},p.GState=xE,p.setGState=function(S){(S=typeof S=="string"?Vt[Ot[S]]:Zl(null,S)).equals(wi)||(J("/"+S.id+" gs"),wi=S)};var Zl=function(S,O){if(!S||!Ot[S]){var ie=!1;for(var fe in Vt)if(Vt.hasOwnProperty(fe)&&Vt[fe].equals(O)){ie=!0;break}if(ie)O=Vt[fe];else{var we="GS"+(Object.keys(Vt).length+1).toString(10);Vt[we]=O,O.id=we}return S&&(Ot[S]=O.id),Bn.publish("addGState",O),O}};p.addGState=function(S,O){return Zl(S,O),this},p.saveGraphicsState=function(){return J("q"),pi.push({key:st,size:Ne,color:Kd}),this},p.restoreGraphicsState=function(){J("Q");var S=pi.pop();return st=S.key,Ne=S.size,Kd=S.color,wi=null,this},p.setCurrentTransformationMatrix=function(S){return J(S.toString()+" cm"),this},p.comment=function(S){return J("#"+S),this};var Xl=function(S,O){var ie=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(ke){isNaN(ke)||(ie=parseFloat(ke))}});var fe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(ke){isNaN(ke)||(fe=parseFloat(ke))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(ke){we=ke.toString()}}),this},Pp=function(S,O,ie,fe){Xl.call(this,S,O),this.type="rect";var we=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function(He){isNaN(He)||(we=parseFloat(He))}});var ke=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(He){isNaN(He)||(ke=parseFloat(He))}}),this},Yd=function(){this.page=wn,this.currentPage=ee,this.pages=Ve.slice(0),this.pagesContext=Nt.slice(0),this.x=St,this.y=bi,this.matrix=In,this.width=Lp(ee),this.height=Lc(ee),this.outputDestination=et,this.id="",this.objectNumber=-1};Yd.prototype.restore=function(){wn=this.page,ee=this.currentPage,Nt=this.pagesContext,Ve=this.pages,St=this.x,bi=this.y,In=this.matrix,Op(ee,this.width),Ql(ee,this.height),et=this.outputDestination};var kp=function(S,O,ie,fe,we){Vs.push(new Yd),wn=ee=0,Ve=[],St=S,bi=O,In=we,Yu([ie,fe])};for(var $o in p.beginFormObject=function(S,O,ie,fe,we){return kp(S,O,ie,fe,we),this},p.endFormObject=function(S){return(function(O){if(Bs[O])Vs.pop().restore();else{var ie=new Yd,fe="Xo"+(Object.keys(cr).length+1).toString(10);ie.id=fe,Bs[O]=fe,cr[fe]=ie,Bn.publish("addFormObject",ie),Vs.pop().restore()}})(S),this},p.doFormObject=function(S,O){var ie=cr[Bs[S]];return J("q"),J(O.toString()+" cm"),J("/"+ie.id+" Do"),J("Q"),this},p.getFormObject=function(S){var O=cr[Bs[S]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},p.save=function(S,O){return S=S||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(Yf(Zu(va()),S),typeof Yf.unload=="function"&&tn.setTimeout&&setTimeout(Yf.unload,911),this):new Promise(function(ie,fe){try{var we=Yf(Zu(va()),S);typeof Yf.unload=="function"&&tn.setTimeout&&setTimeout(Yf.unload,911),ie(we)}catch(ke){fe(ke.message)}})},_t.API)_t.API.hasOwnProperty($o)&&($o==="events"&&_t.API.events.length?(function(S,O){var ie,fe,we;for(we=O.length-1;we!==-1;we--)ie=O[we][0],fe=O[we][1],S.subscribe.apply(S,[ie].concat(typeof fe=="function"?[fe]:fe))})(Bn,_t.API.events):p[$o]=_t.API[$o]);function Lp(S){return Nt[S].mediaBox.topRightX-Nt[S].mediaBox.bottomLeftX}function Op(S,O){Nt[S].mediaBox.topRightX=O+Nt[S].mediaBox.bottomLeftX}function Lc(S){return Nt[S].mediaBox.topRightY-Nt[S].mediaBox.bottomLeftY}function Ql(S,O){Nt[S].mediaBox.topRightY=O+Nt[S].mediaBox.bottomLeftY}var Jl=p.getPageWidth=function(S){return Lp(S=S||ee)/gt},Yg=p.setPageWidth=function(S,O){Op(S,O*gt)},Oc=p.getPageHeight=function(S){return Lc(S=S||ee)/gt},ec=p.setPageHeight=function(S,O){Ql(S,O*gt)};return p.internal={pdfEscape:us,getStyle:Wg,getFont:Y0,getFontSize:Ue,getCharSpace:nC,getTextColor:tC,getLineHeight:X0,getLineHeightFactor:J0,getLineWidth:Z0,write:nt,getHorizontalCoordinate:Kl,getVerticalCoordinate:Wo,getCoordinateString:eC,getVerticalCoordinateString:Kg,collections:{},newObject:$i,newAdditionalObject:Ud,newObjectDeferred:jr,newObjectDeferredBegin:no,getFilters:ma,putStream:Gs,events:Bn,scaleFactor:gt,pageSize:{getWidth:function(){return Jl(ee)},setWidth:function(S){Yg(ee,S)},getHeight:function(){return Oc(ee)},setHeight:function(S){ec(ee,S)}},encryptionOptions:d,encryption:qi,getEncryptor:function(S){return d!==null?qi.encryptor(S,0):function(O){return O}},output:Ug,getNumberOfPages:zg,get pages(){return Ve},out:J,f2:A,f3:I,getPageInfo:Hs,getPageInfoByObjId:Rp,getCurrentPageInfo:W0,getPDFVersion:g,Point:Xl,Rectangle:Pp,Matrix:kt,hasHotfix:Fo},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Jl(ee)},set:function(S){Yg(ee,S)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Oc(ee)},set:function(S){ec(ee,S)},enumerable:!0,configurable:!0}),function(S){for(var O=0,ie=vt.length;O<ie;O++){var fe=Gg.call(this,S[O][0],S[O][1],S[O][2],vt[O][3],!0);u===!1&&(h[fe]=!0);var we=S[O][0].split("-");Vg({id:fe,fontName:we[0],fontStyle:we[1]||""})}Bn.publish("addFonts",{fonts:ln,dictionary:on})}.call(p,vt),st="F1",Hg(r,n),Bn.publish("initialized"),p}Mv.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Mv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Mv.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Mv.prototype.processOwnerPassword=function(e,t){return t3(e3(t).substr(0,5),e)},Mv.prototype.encryptor=function(e,t){var n=e3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return t3(n,i)}},xE.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Si(e)!==Si(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},_t.API={events:[]},_t.version="3.0.4";var Er=_t.API,r3=1,Qf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},un=function(e){return e.toFixed(2)},Vh=function(e){return e.toFixed(5)};Er.__acroform__={};var na=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},B9=function(e){return e*r3},vd=function(e){var t=new az,n=ft.internal.getHeight(e)||0,i=ft.internal.getWidth(e)||0;return t.BBox=[0,0,Number(un(i)),Number(un(n))],t},uhe=Er.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},hhe=Er.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},phe=Er.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Tr=Er.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return phe(e,t-1)},Pr=Er.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uhe(e,t-1)},kr=Er.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return hhe(e,t-1)},fhe=Er.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=e[0],o=e[1],s=e[2],a=e[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(o+a)||0,l.upperRight_X=n(r+s)||0,l.upperRight_Y=i(o)||0,[Number(un(l.lowerLeft_X)),Number(un(l.lowerLeft_Y)),Number(un(l.upperRight_X)),Number(un(l.upperRight_Y))]},ghe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=n3(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+un(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=vd(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},n3=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map(function(A){return A.split(`
`)}):r.map(function(A){return[A]});var o=n,s=ft.internal.getHeight(e)||0;s=s<0?-s:s;var a=ft.internal.getWidth(e)||0;a=a<0?-a:a;var l=function(A,I,j){if(A+1<r.length){var G=I+" "+r[A+1][0];return gE(G,e,j).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var c,d,u=gE("3",e,o).height,h=e.multiline?s-o:(s-u)/2,p=h+=2,f=0,g=0,C=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+gE(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var m="",w=0,x=0;x<r.length;x++)if(r.hasOwnProperty(x)){var D=!1;if(r[x].length!==1&&C!==r[x].length-1){if((u+2)*(w+2)+2>s)continue e;m+=r[x][C],D=!0,g=x,x--}else{m=(m+=r[x][C]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var F=parseInt(x),L=l(F,m,o),V=x>=r.length-1;if(L&&!V){m+=" ",C=0;continue}if(L||V){if(V)g=F;else if(e.multiline&&(u+2)*(w+2)+2>s)continue e}else{if(!e.multiline||(u+2)*(w+2)+2>s)continue e;g=F}}for(var B="",P=f;P<=g;P++){var U=r[P];if(e.multiline){if(P===g){B+=U[C]+" ",C=(C+1)%U.length;continue}if(P===f){B+=U[U.length-1]+" ";continue}}B+=U[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,d=gE(B,e,o).width,e.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;default:c=2}t+=un(c)+" "+un(p)+` Td
`,t+="("+Qf(B)+`) Tj
`,t+=-un(c)+` 0 Td
`,p=-(o+2),d=0,f=D?g:g+1,w++,m=""}break}return i.text=t,i.fontSize=o,i},gE=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},mhe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vhe=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Che=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ec.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(mhe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new lz,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o.objId=void 0,o.hasAnnotation&&vhe(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,r){var o=!i;for(var s in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var a=i[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=fhe(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ft.createDefaultAppearanceStream(a),Si(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=ghe(a);l.push({key:"AP",value:"<</N "+d+">>"}),r.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var u="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var p=a.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var f=p[s];typeof f=="function"&&(f=f.call(r,a)),u+="/"+s+" "+f+" ",r.internal.acroformPlugin.xForms.indexOf(f)>=0||r.internal.acroformPlugin.xForms.push(f)}}else typeof(f=p)=="function"&&(f=f.call(r,a)),u+="/"+s+" "+f,r.internal.acroformPlugin.xForms.indexOf(f)>=0||r.internal.acroformPlugin.xForms.push(f);u+=">>"}l.push({key:"AP",value:`<<
`+u+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}o&&(function(g,C){for(var m in g)if(g.hasOwnProperty(m)){var w=m,x=g[m];C.internal.newObjectDeferredBegin(x.objId,!0),Si(x)==="object"&&typeof x.putStream=="function"&&x.putStream(),delete g[w]}})(r.internal.acroformPlugin.xForms,r)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},sz=Er.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(s){return s};if(Array.isArray(e)){for(var r="[",o=0;o<e.length;o++)switch(o!==0&&(r+=" "),Si(e[o])){case"boolean":case"number":case"object":r+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),r+="("+Qf(i(e[o].toString()))+")"):r+=e[o].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},YP=function(e,t,n){var i=function(r){return r};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Qf(i(e))+")"},Cd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Cd.prototype.toString=function(){return this.objId+" 0 R"},Cd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Cd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],r=this[i];r&&(Array.isArray(r)?e.push({key:i,value:sz(r,this.objId,this.scope)}):r instanceof Cd?(r.scope=this.scope,e.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&e.push({key:i,value:r}))}return e};var az=function(){Cd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};na(az,Cd);var lz=function(){Cd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Qf(n(e))+")"}},set:function(n){e=n}})};na(lz,Cd);var Ec=function e(){Cd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');t=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Tr(t,3)},set:function(m){m?this.F=Pr(t,3):this.F=kr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');n=m}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(m){i=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(m){i[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(m){i[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(m){i[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(m){i[3]=m}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof EE)return;o="FieldObject"+e.FieldNum++}var m=function(w){return w};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+Qf(m(o))+")"},set:function(m){o=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(m){o=m}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(m){s=m}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(m){a=m}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(m){l=m}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/r3:c},set:function(m){c=m}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(m){d=m}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof EE||this instanceof Xf))return YP(u,this.objId,this.scope)},set:function(m){m=m.toString(),u=m}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ao==0?YP(h,this.objId,this.scope):h},set:function(m){m=m.toString(),h=this instanceof Ao==0?m.substr(0,1)==="("?Rv(m.substr(1,m.length-2)):Rv(m):m}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ao==1?Rv(h.substr(1,h.length-1)):h},set:function(m){m=m.toString(),h=this instanceof Ao==1?"/"+m:m}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ao==0?YP(p,this.objId,this.scope):p},set:function(m){m=m.toString(),p=this instanceof Ao==0?m.substr(0,1)==="("?Rv(m.substr(1,m.length-2)):Rv(m):m}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ao==1?Rv(p.substr(1,p.length-1)):p},set:function(m){m=m.toString(),p=this instanceof Ao==1?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(m){m=!!m,g=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(m){f=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,1)},set:function(m){m?this.Ff=Pr(this.Ff,1):this.Ff=kr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,2)},set:function(m){m?this.Ff=Pr(this.Ff,2):this.Ff=kr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,3)},set:function(m){m?this.Ff=Pr(this.Ff,3):this.Ff=kr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');C=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(C){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};na(Ec,Cd);var Pv=function(){Ec.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return sz(t,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,18)},set:function(n){n?this.Ff=Pr(this.Ff,18):this.Ff=kr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Pr(this.Ff,19):this.Ff=kr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,20)},set:function(n){n?(this.Ff=Pr(this.Ff,20),t.sort()):this.Ff=kr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,22)},set:function(n){n?this.Ff=Pr(this.Ff,22):this.Ff=kr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,23)},set:function(n){n?this.Ff=Pr(this.Ff,23):this.Ff=kr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,27)},set:function(n){n?this.Ff=Pr(this.Ff,27):this.Ff=kr(this.Ff,27)}}),this.hasAppearanceStream=!1};na(Pv,Ec);var kv=function(){Pv.call(this),this.fontName="helvetica",this.combo=!1};na(kv,Pv);var Lv=function(){kv.call(this),this.combo=!0};na(Lv,kv);var bE=function(){Lv.call(this),this.edit=!0};na(bE,Lv);var Ao=function(){Ec.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,15)},set:function(n){n?this.Ff=Pr(this.Ff,15):this.Ff=kr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,16)},set:function(n){n?this.Ff=Pr(this.Ff,16):this.Ff=kr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,17)},set:function(n){n?this.Ff=Pr(this.Ff,17):this.Ff=kr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,26)},set:function(n){n?this.Ff=Pr(this.Ff,26):this.Ff=kr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+Qf(n(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){Si(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};na(Ao,Ec);var wE=function(){Ao.call(this),this.pushButton=!0};na(wE,Ao);var Ov=function(){Ao.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};na(Ov,Ao);var EE=function(){var e,t;Ec.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),i)s.push("/"+o+" ("+Qf(r(i[o]))+")");return s.push(">>"),s.join(`
`)},set:function(r){Si(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ft.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};na(EE,Ec),Ov.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Ov.prototype.createOption=function(e){var t=new EE;return t.Parent=this,t.optionName=e,this.Kids.push(t),bhe.call(this.scope,t),t};var yE=function(){Ao.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ft.CheckBox.createAppearanceStream()};na(yE,Ao);var Xf=function(){Ec.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,13)},set:function(t){t?this.Ff=Pr(this.Ff,13):this.Ff=kr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,21)},set:function(t){t?this.Ff=Pr(this.Ff,21):this.Ff=kr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,23)},set:function(t){t?this.Ff=Pr(this.Ff,23):this.Ff=kr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,24)},set:function(t){t?this.Ff=Pr(this.Ff,24):this.Ff=kr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,25)},set:function(t){t?this.Ff=Pr(this.Ff,25):this.Ff=kr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,26)},set:function(t){t?this.Ff=Pr(this.Ff,26):this.Ff=kr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};na(Xf,Ec);var SE=function(){Xf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Tr(this.Ff,14)},set:function(e){e?this.Ff=Pr(this.Ff,14):this.Ff=kr(this.Ff,14)}}),this.password=!0};na(SE,Xf);var ft={CheckBox:{createAppearanceStream:function(){return{N:{On:ft.CheckBox.YesNormal},D:{On:ft.CheckBox.YesPushDown,Off:ft.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=n3(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+un(ft.internal.getWidth(e))+" "+un(ft.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+un(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=vd(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=[],o=ft.internal.getHeight(e),s=ft.internal.getWidth(e),a=n3(e,e.caption);return r.push("1 g"),r.push("0 0 "+un(s)+" "+un(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+un(s-1)+" "+un(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+un(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+un(ft.internal.getWidth(e))+" "+un(ft.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ft.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ft.RadioButton.Circle.YesNormal,t.D[e]=ft.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=vd(e);t.scope=e.scope;var n=[],i=ft.internal.getWidth(e)<=ft.internal.getHeight(e)?ft.internal.getWidth(e)/4:ft.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=ft.internal.Bezier_C,o=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Vh(ft.internal.getWidth(e)/2)+" "+Vh(ft.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=[],i=ft.internal.getWidth(e)<=ft.internal.getHeight(e)?ft.internal.getWidth(e)/4:ft.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*ft.internal.Bezier_C).toFixed(5)),s=Number((i*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vh(ft.internal.getWidth(e)/2)+" "+Vh(ft.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Vh(ft.internal.getWidth(e)/2)+" "+Vh(ft.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=[],i=ft.internal.getWidth(e)<=ft.internal.getHeight(e)?ft.internal.getWidth(e)/4:ft.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vh(ft.internal.getWidth(e)/2)+" "+Vh(ft.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ft.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ft.RadioButton.Cross.YesNormal,t.D[e]=ft.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=vd(e);t.scope=e.scope;var n=[],i=ft.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+un(ft.internal.getWidth(e)-2)+" "+un(ft.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(un(i.x1.x)+" "+un(i.x1.y)+" m"),n.push(un(i.x2.x)+" "+un(i.x2.y)+" l"),n.push(un(i.x4.x)+" "+un(i.x4.y)+" m"),n.push(un(i.x3.x)+" "+un(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=ft.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+un(ft.internal.getWidth(e))+" "+un(ft.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+un(ft.internal.getWidth(e)-2)+" "+un(ft.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(un(n.x1.x)+" "+un(n.x1.y)+" m"),i.push(un(n.x2.x)+" "+un(n.x2.y)+" l"),i.push(un(n.x4.x)+" "+un(n.x4.y)+" m"),i.push(un(n.x3.x)+" "+un(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=vd(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+un(ft.internal.getWidth(e))+" "+un(ft.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ft.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ft.internal.getWidth(e),n=ft.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},ft.internal.getWidth=function(e){var t=0;return Si(e)==="object"&&(t=B9(e.Rect[2])),t},ft.internal.getHeight=function(e){var t=0;return Si(e)==="object"&&(t=B9(e.Rect[3])),t};var bhe=Er.addField=function(e){if(Che(this,e),!(e instanceof Ec))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Er.AcroFormChoiceField=Pv,Er.AcroFormListBox=kv,Er.AcroFormComboBox=Lv,Er.AcroFormEditBox=bE,Er.AcroFormButton=Ao,Er.AcroFormPushButton=wE,Er.AcroFormRadioButton=Ov,Er.AcroFormCheckBox=yE,Er.AcroFormTextField=Xf,Er.AcroFormPasswordField=SE,Er.AcroFormAppearance=ft,Er.AcroForm={ChoiceField:Pv,ListBox:kv,ComboBox:Lv,EditBox:bE,Button:Ao,PushButton:wE,RadioButton:Ov,CheckBox:yE,TextField:Xf,PasswordField:SE,Appearance:ft},_t.AcroForm={ChoiceField:Pv,ListBox:kv,ComboBox:Lv,EditBox:bE,Button:Ao,PushButton:wE,RadioButton:Ov,CheckBox:yE,TextField:Xf,PasswordField:SE,Appearance:ft};var fct=_t.AcroForm;function cz(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(A,I){var j,G,Q,le,me,ge=n;if((I=I||n)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(L(A))for(me in i)for(Q=i[me],j=0;j<Q.length;j+=1){for(le=!0,G=0;G<Q[j].length;G+=1)if(Q[j][G]!==void 0&&Q[j][G]!==A[G]){le=!1;break}if(le===!0){ge=me;break}}else for(me in i)for(Q=i[me],j=0;j<Q.length;j+=1){for(le=!0,G=0;G<Q[j].length;G+=1)if(Q[j][G]!==void 0&&Q[j][G]!==A.charCodeAt(G)){le=!1;break}if(le===!0){ge=me;break}}return ge===n&&I!==n&&(ge=I),ge},o=function A(I){for(var j=this.internal.write,G=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:I.width}),le.push({key:"Height",value:I.height}),I.colorSpace===m.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===m.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var me="",ge=0,se=I.transparency.length;ge<se;ge++)me+=I.transparency[ge]+" "+I.transparency[ge]+" ";le.push({key:"Mask",value:"["+me+"]"})}I.sMask!==void 0&&le.push({key:"SMask",value:I.objectId+1+" 0 R"});var de=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:le,alreadyAppliedFilters:de,objectId:I.objectId}),j("endobj"),"sMask"in I&&I.sMask!==void 0){var he,M=(he=I.sMaskBitsPerComponent)!==null&&he!==void 0?he:I.bitsPerComponent,ee={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:I.sMask};"filter"in I&&(ee.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(I.width),ee.filter=I.filter),A.call(this,ee)}if(I.colorSpace===m.INDEXED){var te=this.internal.newObject();G({data:B(new Uint8Array(I.palette)),objectId:te}),j("endobj")}},s=function(){var A=this.internal.collections[t+"images"];for(var I in A)o.call(this,A[I])},a=function(){var A,I=this.internal.collections[t+"images"],j=this.internal.write;for(var G in I)j("/I"+(A=I[G]).index,A.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var A=this.internal.collections[t+"images"];return l.call(this),A},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(A){return typeof e["process"+A.toUpperCase()]=="function"},h=function(A){return Si(A)==="object"&&A.nodeType===1},p=function(A,I){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var j=""+A.getAttribute("src");if(j.indexOf("data:image/")===0)return CE(unescape(j).split("base64,").pop());var G=e.loadFile(j,!0);if(G!==void 0)return G}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var Q;switch(I){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return CE(A.toDataURL(Q,1).split("base64,").pop())}},f=function(A){var I=this.internal.collections[t+"images"];if(I){for(var j in I)if(A===I[j].alias)return I[j]}},g=function(A,I,j){return A||I||(A=-96,I=-96),A<0&&(A=-1*j.width*72/A/this.internal.scaleFactor),I<0&&(I=-1*j.height*72/I/this.internal.scaleFactor),A===0&&(A=I*j.width/j.height),I===0&&(I=A*j.height/j.width),[A,I]},C=function(A,I,j,G,Q,le){var me=g.call(this,j,G,Q),ge=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,de=c.call(this);if(j=me[0],G=me[1],de[Q.index]=Q,le){le*=Math.PI/180;var he=Math.cos(le),M=Math.sin(le),ee=function(ue){return ue.toFixed(4)},te=[ee(he),ee(M),ee(-1*M),ee(he),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,ge(A),se(I+G),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([ge(j),"0","0",ge(G),"0","0","cm"].join(" "))):this.internal.write([ge(j),"0","0",ge(G),ge(A),se(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(A){var I,j,G=0;if(typeof A=="string")for(j=A.length,I=0;I<j;I++)G=(G<<5)-G+A.charCodeAt(I),G|=0;else if(L(A))for(j=A.byteLength/2,I=0;I<j;I++)G=(G<<5)-G+A[I],G|=0;return G},D=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var I=!0;return A.length===0&&(I=!1),A.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(I=!1),I},F=e.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var I=A.indexOf(",");return I<0?null:A.substring(0,I).trim().endsWith("base64")?A.substring(I+1):null};e.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var L=e.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},V=e.__addimage__.binaryStringToUint8Array=function(A){for(var I=A.length,j=new Uint8Array(I),G=0;G<I;G++)j[G]=A.charCodeAt(G);return j},B=e.__addimage__.arrayBufferToBinaryString=function(A){for(var I="",j=L(A)?A:new Uint8Array(A),G=0;G<j.length;G+=8192)I+=String.fromCharCode.apply(null,j.subarray(G,G+8192));return I};e.addImage=function(){var A,I,j,G,Q,le,me,ge,se;if(typeof arguments[1]=="number"?(I=n,j=arguments[1],G=arguments[2],Q=arguments[3],le=arguments[4],me=arguments[5],ge=arguments[6],se=arguments[7]):(I=arguments[1],j=arguments[2],G=arguments[3],Q=arguments[4],le=arguments[5],me=arguments[6],ge=arguments[7],se=arguments[8]),Si(A=arguments[0])==="object"&&!h(A)&&"imageData"in A){var de=A;A=de.imageData,I=de.format||I||n,j=de.x||j||0,G=de.y||G||0,Q=de.w||de.width||Q,le=de.h||de.height||le,me=de.alias||me,ge=de.compression||ge,se=de.rotation||de.angle||se}var he=this.internal.getFilters();if(ge===void 0&&he.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(j)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=P.call(this,A,I,me,ge);return C.call(this,j,G,Q,le,M,se),this};var P=function(A,I,j,G){var Q,le,me;if(typeof A=="string"&&r(A)===n){A=unescape(A);var ge=U(A,!1);(ge!==""||(ge=e.loadFile(A,!0))!==void 0)&&(A=ge)}if(h(A)&&(A=p(A,I)),I=r(A,I),!u(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((me=j)==null||me.length===0)&&(j=(function(se){return typeof se=="string"||L(se)?x(se):L(se.data)?x(se.data):null})(A)),(Q=f.call(this,j))||(A instanceof Uint8Array||I==="RGBA"||(le=A,A=V(A)),Q=this["process"+I.toUpperCase()](A,d.call(this),j,(function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:w.NONE})(G),le)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},U=e.__addimage__.convertBase64ToBinaryString=function(A,I){I=typeof I!="boolean"||I;var j,G="";if(typeof A=="string"){var Q;j=(Q=F(A))!==null&&Q!==void 0?Q:A;try{G=CE(j)}catch(le){if(I)throw D(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(A){var I,j,G="";if(h(A)&&(A=p(A)),typeof A=="string"&&r(A)===n&&((G=U(A,!1))===""&&(G=e.loadFile(A)||""),A=G),j=r(A),!u(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(A instanceof Uint8Array||(A=V(A)),!(I=this["process"+j.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=j,I}})(_t.API),(function(e){var t=function(n){if(n!==void 0&&n!="")return!0};_t.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,r,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,u=0;u<c.length&&!d;u++)switch((i=c[u]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){i=c[h];var p=this.internal.pdfEscape,f=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(g.objId),w=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+p(m(i.contents))+")",o+=" /Popup "+C.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(m(w))+") >>",g.content=o;var x=g.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+x,i.open&&(o+=" /Open true"),o+=" >>",C.content=o,this.internal.write(g.objId,"0 R",C.objId,"0 R");break;case"freetext":r="/Rect ["+s(i.bounds.x)+" "+a(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var D=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+p(f(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var F=this.annotations._nameMap[i.options.name];i.options.pageNumber=F.page,i.options.top=F.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+p(f(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;default:var L=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+L+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,r,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(i),w:l(n+r),h:c(i+o)},options:s,type:"link"})},e.textWithLink=function(n,i,r,o){var s,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var d=this.splitTextToSize(n,a).length;s=Math.ceil(c*d)}else a=l,s=c;return this.text(n,i,r,o),r+=.2*c,o.align==="center"&&(i-=l/2),o.align==="right"&&(i-=l),this.link(i,r-c,a,s,o),l},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(_t.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},a=e.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&o(g)&&t[g.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&r.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&o(g)&&t[g.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&o(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&o(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&o(g)&&t[g.charCodeAt(0)].length==4},u=e.__arabicParser__.resolveLigatures=function(g){var C=0,m=n,w="",x=0;for(C=0;C<g.length;C+=1)m[g.charCodeAt(C)]!==void 0?(x++,typeof(m=m[g.charCodeAt(C)])=="number"&&(w+=String.fromCharCode(m),m=n,x=0),C===g.length-1&&(m=n,w+=g.charAt(C-(x-1)),C-=x-1,x=0)):(m=n,w+=g.charAt(C-x),C-=x,x=0);return w};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&i[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,C,m){return s(g)?o(g)===!1?-1:!c(g)||!s(C)&&!s(m)||!s(m)&&a(C)||a(g)&&!s(C)||a(g)&&l(C)||a(g)&&a(C)?0:d(g)&&s(C)&&!a(C)&&s(m)&&c(m)?3:a(g)||!s(m)?1:2:-1},p=function(g){var C=0,m=0,w=0,x="",D="",F="",L=(g=g||"").split("\\s+"),V=[];for(C=0;C<L.length;C+=1){for(V.push(""),m=0;m<L[C].length;m+=1)x=L[C][m],D=L[C][m-1],F=L[C][m+1],s(x)?(w=h(x,D,F),V[C]+=w!==-1?String.fromCharCode(t[x.charCodeAt(0)][w]):x):V[C]+=x;V[C]=u(V[C])}return V.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var g,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(C)){var w=0;for(m=[],w=0;w<C.length;w+=1)Array.isArray(C[w])?m.push([p(C[w][0]),C[w][1],C[w][2]]):m.push([p(C[w])]);g=m}else g=p(C);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",f])})(_t.API),_t.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(_t.API),(function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var f=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return f},set:function(g){f=g}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){i.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),u=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,f=0,g=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var m=c.maxWidth;m>0?typeof l=="string"?l=this.splitTextToSize(l,m):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,D){return x.concat(C.splitTextToSize(D,m))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)p<(g=this.getStringUnitWidth(l[w],{font:u})*d)&&(p=g);return p!==0&&(f=l.length),{w:p/=h,h:Math.max((f*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=u.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,d,u,h){if(i.call(this),!d)throw new Error("No data for PDF table.");var p,f,g,C,m=[],w=[],x=[],D={},F={},L=[],V=[],B=(h=h||{}).autoSize||!1,P=h.printHeaders!==!1,U=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,A=h.margins||Object.assign({width:this.getPageWidth()},t),I=typeof h.padding=="number"?h.padding:3,j=h.headerBackgroundColor||"#c8c8c8",G=h.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=G,this.setFontSize(U),u==null)w=m=Object.keys(d[0]),x=m.map(function(){return"left"});else if(Array.isArray(u)&&Si(u[0])==="object")for(m=u.map(function(de){return de.name}),w=u.map(function(de){return de.prompt||de.name||""}),x=u.map(function(de){return de.align||"left"}),p=0;p<u.length;p+=1)F[u[p].name]=.7499990551181103*u[p].width;else Array.isArray(u)&&typeof u[0]=="string"&&(w=m=u,x=m.map(function(){return"left"}));if(B||Array.isArray(u)&&typeof u[0]=="string")for(p=0;p<m.length;p+=1){for(D[C=m[p]]=d.map(function(de){return de[C]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=D[C],this.setFont(void 0,"normal"),g=0;g<f.length;g+=1)L.push(this.getTextDimensions(f[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[C]=Math.max.apply(null,L)+I+I,L=[]}if(P){var Q={};for(p=0;p<m.length;p+=1)Q[m[p]]={},Q[m[p]].text=w[p],Q[m[p]].align=x[p];var le=a.call(this,Q,F);V=m.map(function(de){return new o(l,c,F[de],le,Q[de].text,void 0,Q[de].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var me=u.reduce(function(de,he){return de[he.name]=he.align,de},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var ge=a.call(this,d[p],F);for(g=0;g<m.length;g+=1){var se=d[p][m[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:g,data:se},this),s.call(this,new o(l,c,F[m[g]],ge,se,p+2,me[m[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var f=l[p];return this.splitTextToSize(f.hasOwnProperty("text")?f.text:f,c[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*u/h+d+d},this).reduce(function(p,f){return Math.max(p,f)},0)};e.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=l;var f=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(f)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}})(_t.API);var dz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],i3=cz(uz),hz=[100,200,300,400,500,600,700,800,900],whe=cz(hz);function ZP(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return dz[o=o||"normal"]?o:"normal"})(e.style),i=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),r=(function(o){return typeof i3[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:n,weight:i,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,i].join(" ")}}}function V9(e,t,n,i){var r;for(r=n;r>=0&&r<t.length;r+=i)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=i)if(e[t[r]])return e[t[r]]}var yhe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},G9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function H9(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function z9(e){return e.trimLeft()}function She(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function xhe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var mE,j9,U9,Fv,vE,W9,$9,q9,XP=["times"];function K9(e,t,n,i,r){var o=4,s=Z9;switch(r){case _t.API.image_compression.FAST:o=1,s=Y9;break;case _t.API.image_compression.MEDIUM:o=6,s=X9;break;case _t.API.image_compression.SLOW:o=9,s=Q9}e=(function(l,c,d,u){for(var h,p=l.length/c,f=new Uint8Array(l.length+p),g=[Ehe,Y9,Z9,X9,Q9],C=0;C<p;C+=1){var m=C*c,w=l.subarray(m,m+c);if(u)f.set(u(w,d,h),m+C);else{for(var x=g.length,D=[],F=0;F<x;F+=1)D[F]=g[F](w,d,h);var L=_he(D.concat());f.set(D[L],m+C)}h=w}return f})(e,t,Math.ceil(n*i/8),s);var a=$2(e,{level:o});return _t.API.__addimage__.arrayBufferToBinaryString(a)}function Ehe(e){var t=Array.apply([],e);return t.unshift(0),t}function Y9(e,t){var n=e.length,i=[];i[0]=1;for(var r=0;r<n;r+=1){var o=e[r-t]||0;i[r+1]=e[r]-o+256&255}return i}function Z9(e,t,n){var i=e.length,r=[];r[0]=2;for(var o=0;o<i;o+=1){var s=n&&n[o]||0;r[o+1]=e[o]-s+256&255}return r}function X9(e,t,n){var i=e.length,r=[];r[0]=3;for(var o=0;o<i;o+=1){var s=e[o-t]||0,a=n&&n[o]||0;r[o+1]=e[o]+256-(s+a>>>1)&255}return r}function Q9(e,t,n){var i=e.length,r=[];r[0]=4;for(var o=0;o<i;o+=1){var s=Dhe(e[o-t]||0,n&&n[o]||0,n&&n[o-t]||0);r[o+1]=e[o]-s+256&255}return r}function Dhe(e,t,n){if(e===t&&t===n)return e;var i=Math.abs(t-n),r=Math.abs(e-n),o=Math.abs(e+t-n-n);return i<=r&&i<=o?e:r<=o?t:n}function _he(e){var t=e.map(function(n){return n.reduce(function(i,r){return i+Math.abs(r)},0)});return t.indexOf(Math.min.apply(null,t))}function QP(e,t,n){var i=t*n,r=Math.floor(i/8),o=16-(i-8*r+n),s=(1<<n)-1;return pz(e,r)>>o&s}function J9(e,t,n,i){var r=n*i,o=Math.floor(r/8),s=16-(r-8*o+i),a=(1<<i)-1,l=(t&a)<<s;(function(c,d,u){if(d+1<c.byteLength)c.setUint16(d,u,!1);else{var h=u>>8&255;c.setUint8(d,h)}})(e,o,pz(e,o)&~(a<<s)&65535|l)}function pz(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Ahe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,r=e[t++],o=r>>7,s=1<<1+(7&r);e[t++],e[t++];var a=null,l=null;o&&(a=t,l=s,t+=3*s);var c=!0,d=[],u=0,h=null,p=0,f=null;for(this.width=n,this.height=i;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&g||(h=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var C=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,D=e[t++],F=D>>6&1,L=1<<1+(7&D),V=a,B=l,P=!1;D>>7&&(P=!0,V=t,B=L,t+=3*L);var U=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}d.push({x:C,y:m,width:w,height:x,has_local_palette:P,palette_offset:V,palette_size:B,data_offset:U,data_length:t-U,transparent_index:h,interlaced:!!F,delay:u,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return f},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,j){var G=this.frameInfo(I),Q=G.width*G.height,le=new Uint8Array(Q);ez(e,G.data_offset,le,Q);var me=G.palette_offset,ge=G.transparent_index;ge===null&&(ge=256);var se=G.width,de=n-se,he=se,M=4*(G.y*n+G.x),ee=4*((G.y+G.height)*n+G.x),te=M,ue=4*de;G.interlaced===!0&&(ue+=4*n*7);for(var ae=8,Ce=0,Ae=le.length;Ce<Ae;++Ce){var Fe=le[Ce];if(he===0&&(he=se,(te+=ue)>=ee&&(ue=4*de+4*n*(ae-1),te=M+(se+de)*(ae<<1),ae>>=1)),Fe===ge)te+=4;else{var Me=e[me+3*Fe],Ve=e[me+3*Fe+1],Ze=e[me+3*Fe+2];j[te++]=Ze,j[te++]=Ve,j[te++]=Me,j[te++]=255}--he}},this.decodeAndBlitFrameRGBA=function(I,j){var G=this.frameInfo(I),Q=G.width*G.height,le=new Uint8Array(Q);ez(e,G.data_offset,le,Q);var me=G.palette_offset,ge=G.transparent_index;ge===null&&(ge=256);var se=G.width,de=n-se,he=se,M=4*(G.y*n+G.x),ee=4*((G.y+G.height)*n+G.x),te=M,ue=4*de;G.interlaced===!0&&(ue+=4*n*7);for(var ae=8,Ce=0,Ae=le.length;Ce<Ae;++Ce){var Fe=le[Ce];if(he===0&&(he=se,(te+=ue)>=ee&&(ue=4*de+4*n*(ae-1),te=M+(se+de)*(ae<<1),ae>>=1)),Fe===ge)te+=4;else{var Me=e[me+3*Fe],Ve=e[me+3*Fe+1],Ze=e[me+3*Fe+2];j[te++]=Me,j[te++]=Ve,j[te++]=Ze,j[te++]=255}--he}}}function ez(e,t,n,i){for(var r=e[t++],o=1<<r,s=o+1,a=s+1,l=r+1,c=(1<<l)-1,d=0,u=0,h=0,p=e[t++],f=new Int32Array(4096),g=null;;){for(;d<16&&p!==0;)u|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<l)break;var C=u&c;if(u>>=l,d-=l,C!==o){if(C===s)break;for(var m=C<a?C:g,w=0,x=m;x>o;)x=f[x]>>8,++w;var D=x;if(h+w+(m!==C?1:0)>i)return void Ri.log("Warning, gif stream longer than expected.");n[h++]=D;var F=h+=w;for(m!==C&&(n[h++]=D),x=m;w--;)x=f[x],n[--F]=255&x,x>>=8;g!==null&&a<4096&&(f[a++]=g<<8|D,a>=c+1&&l<12&&(++l,c=c<<1|1)),g=C}else a=s+1,c=(1<<(l=r+1))-1,g=null}return h!==i&&Ri.log("Warning, gif stream shorter than expected."),n}function JP(e){var t,n,i,r,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),f=new Array(64),g=[],C=0,m=7,w=new Array(64),x=new Array(64),D=new Array(64),F=new Array(256),L=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(M,ee){for(var te=0,ue=0,ae=new Array,Ce=1;Ce<=16;Ce++){for(var Ae=1;Ae<=M[Ce];Ae++)ae[ee[ue]]=[],ae[ee[ue]][0]=te,ae[ee[ue]][1]=Ce,ue++,te++;te*=2}return ae}function me(M){for(var ee=M[0],te=M[1]-1;te>=0;)ee&1<<te&&(C|=1<<m),te--,--m<0&&(C==255?(ge(255),ge(0)):ge(C),m=7,C=0)}function ge(M){g.push(M)}function se(M){ge(M>>8&255),ge(255&M)}function de(M,ee,te,ue,ae){for(var Ce,Ae=ae[0],Fe=ae[240],Me=(function(Ne,ct){var Ue,lt,dt,rn,yt,Ct,Cn,bn,st,gt,St=0;for(st=0;st<8;++st){Ue=Ne[St],lt=Ne[St+1],dt=Ne[St+2],rn=Ne[St+3],yt=Ne[St+4],Ct=Ne[St+5],Cn=Ne[St+6];var bi=Ue+(bn=Ne[St+7]),In=Ue-bn,ln=lt+Cn,on=lt-Cn,pi=dt+Ct,Mt=dt-Ct,ni=rn+yt,Vt=rn-yt,Ot=bi+ni,wi=bi-ni,wn=ln+pi,Nt=ln-pi;Ne[St]=Ot+wn,Ne[St+4]=Ot-wn;var Bn=.707106781*(Nt+wi);Ne[St+2]=wi+Bn,Ne[St+6]=wi-Bn;var jl=.382683433*((Ot=Vt+Mt)-(Nt=on+In)),cr=.5411961*Ot+jl,Bs=1.306562965*Nt+jl,Vs=.707106781*(wn=Mt+on),kt=In+Vs,Ni=In-Vs;Ne[St+5]=Ni+cr,Ne[St+3]=Ni-cr,Ne[St+1]=kt+Bs,Ne[St+7]=kt-Bs,St+=8}for(St=0,st=0;st<8;++st){Ue=Ne[St],lt=Ne[St+8],dt=Ne[St+16],rn=Ne[St+24],yt=Ne[St+32],Ct=Ne[St+40],Cn=Ne[St+48];var zr=Ue+(bn=Ne[St+56]),to=Ue-bn,bo=lt+Cn,$i=lt-Cn,jr=dt+Ct,no=dt-Ct,Ud=rn+yt,Tc=rn-yt,Tn=zr+Ud,Za=zr-Ud,ga=bo+jr,ma=bo-jr;Ne[St]=Tn+ga,Ne[St+32]=Tn-ga;var Gs=.707106781*(ma+Za);Ne[St+16]=Za+Gs,Ne[St+48]=Za-Gs;var Wd=.382683433*((Tn=Tc+no)-(ma=$i+to)),Xa=.5411961*Tn+Wd,Ul=1.306562965*ma+Wd,Qa=.707106781*(ga=no+$i),$d=to+Qa,Wl=to-Qa;Ne[St+40]=Wl+Xa,Ne[St+24]=Wl-Xa,Ne[St+8]=$d+Ul,Ne[St+56]=$d-Ul,St++}for(st=0;st<64;++st)gt=Ne[st]*ct[st],p[st]=gt>0?gt+.5|0:gt-.5|0;return p})(M,ee),Ve=0;Ve<64;++Ve)f[V[Ve]]=Me[Ve];var Ze=f[0]-te;te=f[0],Ze==0?me(ue[0]):(me(ue[h[Ce=32767+Ze]]),me(u[Ce]));for(var et=63;et>0&&f[et]==0;)et--;if(et==0)return me(Ae),te;for(var ot,J=1;J<=et;){for(var nt=J;f[J]==0&&J<=et;)++J;var Rt=J-nt;if(Rt>=16){ot=Rt>>4;for(var vt=1;vt<=ot;++vt)me(Fe);Rt&=15}Ce=32767+f[J],me(ae[(Rt<<4)+h[Ce]]),me(u[Ce]),J++}return et!=63&&me(Ae),te}function he(M){M=Math.min(Math.max(M,1),100),o!=M&&((function(ee){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var ae=s((te[ue]*ee+50)/100);ae=Math.min(Math.max(ae,1),255),a[V[ue]]=ae}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var Fe=s((Ce[Ae]*ee+50)/100);Fe=Math.min(Math.max(Fe,1),255),l[V[Ae]]=Fe}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,Ze=0;Ze<8;Ze++)for(var et=0;et<8;et++)c[Ve]=1/(a[V[Ve]]*Me[Ze]*Me[et]*8),d[Ve]=1/(l[V[Ve]]*Me[Ze]*Me[et]*8),Ve++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,ee){ee&&he(ee),g=new Array,C=0,m=7,se(65496),se(65504),se(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),se(1),se(1),ge(0),ge(0),(function(){se(65499),se(132),ge(0);for(var lt=0;lt<64;lt++)ge(a[lt]);ge(1);for(var dt=0;dt<64;dt++)ge(l[dt])})(),(function(lt,dt){se(65472),se(17),ge(8),se(dt),se(lt),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)})(M.width,M.height),(function(){se(65476),se(418),ge(0);for(var lt=0;lt<16;lt++)ge(B[lt+1]);for(var dt=0;dt<=11;dt++)ge(P[dt]);ge(16);for(var rn=0;rn<16;rn++)ge(U[rn+1]);for(var yt=0;yt<=161;yt++)ge(A[yt]);ge(1);for(var Ct=0;Ct<16;Ct++)ge(I[Ct+1]);for(var Cn=0;Cn<=11;Cn++)ge(j[Cn]);ge(17);for(var bn=0;bn<16;bn++)ge(G[bn+1]);for(var st=0;st<=161;st++)ge(Q[st])})(),se(65498),se(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var te=0,ue=0,ae=0;C=0,m=7,this.encode.displayName="_encode_";for(var Ce,Ae,Fe,Me,Ve,Ze,et,ot,J,nt=M.data,Rt=M.width,vt=M.height,Ne=4*Rt,ct=0;ct<vt;){for(Ce=0;Ce<Ne;){for(Ve=Ne*ct+Ce,et=-1,ot=0,J=0;J<64;J++)Ze=Ve+(ot=J>>3)*Ne+(et=4*(7&J)),ct+ot>=vt&&(Ze-=Ne*(ct+1+ot-vt)),Ce+et>=Ne&&(Ze-=Ce+et-Ne+4),Ae=nt[Ze++],Fe=nt[Ze++],Me=nt[Ze++],w[J]=(L[Ae]+L[Fe+256|0]+L[Me+512|0]>>16)-128,x[J]=(L[Ae+768|0]+L[Fe+1024|0]+L[Me+1280|0]>>16)-128,D[J]=(L[Ae+1280|0]+L[Fe+1536|0]+L[Me+1792|0]>>16)-128;te=de(w,c,te,t,i),ue=de(x,d,ue,n,r),ae=de(D,d,ae,n,r),Ce+=32}ct+=8}if(m>=0){var Ue=[];Ue[1]=m+1,Ue[0]=(1<<m+1)-1,me(Ue)}return se(65497),new Uint8Array(g)},e=e||50,(function(){for(var M=String.fromCharCode,ee=0;ee<256;ee++)F[ee]=M(ee)})(),t=le(B,P),n=le(I,j),i=le(U,A),r=le(G,Q),(function(){for(var M=1,ee=2,te=1;te<=15;te++){for(var ue=M;ue<ee;ue++)h[32767+ue]=te,u[32767+ue]=[],u[32767+ue][1]=te,u[32767+ue][0]=ue;for(var ae=-(ee-1);ae<=-M;ae++)h[32767+ae]=te,u[32767+ae]=[],u[32767+ae][1]=te,u[32767+ae][0]=ee-1+ae;M<<=1,ee<<=1}})(),(function(){for(var M=0;M<256;M++)L[M]=19595*M,L[M+256|0]=38470*M,L[M+512|0]=7471*M+32768,L[M+768|0]=-11059*M,L[M+1024|0]=-21709*M,L[M+1280|0]=32768*M+8421375,L[M+1536|0]=-27439*M,L[M+1792|0]=-5329*M})(),he(e)}function xc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tz(e){function t(P){if(!P)throw Error("assert :P")}function n(P,U,A){for(var I=0;4>I;I++)if(P[U+I]!=A.charCodeAt(I))return!0;return!1}function i(P,U,A,I,j){for(var G=0;G<j;G++)P[U+G]=A[I+G]}function r(P,U,A,I){for(var j=0;j<I;j++)P[U+j]=A}function o(P){return new Int32Array(P)}function s(P,U){for(var A=[],I=0;I<P;I++)A.push(new U);return A}function a(P,U){var A=[];return(function I(j,G,Q){for(var le=Q[G],me=0;me<le&&(j.push(Q.length>G+1?[]:new U),!(Q.length<G+1));me++)I(j[me],G+1,Q)})(A,0,P),A}var l=function(){var P=this;function U(v,b){for(var _=1<<b-1>>>0;v&_;)_>>>=1;return _?(v&_-1)+_:v}function A(v,b,_,R,N){t(!(R%_));do v[b+(R-=_)]=N;while(0<R)}function I(v,b,_,R,N){if(t(2328>=N),512>=N)var H=o(512);else if((H=o(N))==null)return 0;return(function(z,W,Y,re,ve,De){var oe,be,ye=W,Te=1<<Y,xe=o(16),Pe=o(16);for(t(ve!=0),t(re!=null),t(z!=null),t(0<Y),be=0;be<ve;++be){if(15<re[be])return 0;++xe[re[be]]}if(xe[0]==ve)return 0;for(Pe[1]=0,oe=1;15>oe;++oe){if(xe[oe]>1<<oe)return 0;Pe[oe+1]=Pe[oe]+xe[oe]}for(be=0;be<ve;++be)oe=re[be],0<re[be]&&(De[Pe[oe]++]=be);if(Pe[15]==1)return(re=new j).g=0,re.value=De[0],A(z,ye,1,Te,re),Te;var Le,Ye=-1,je=Te-1,Ft=0,pt=1,Sn=1,Et=1<<Y;for(be=0,oe=1,ve=2;oe<=Y;++oe,ve<<=1){if(pt+=Sn<<=1,0>(Sn-=xe[oe]))return 0;for(;0<xe[oe];--xe[oe])(re=new j).g=oe,re.value=De[be++],A(z,ye+Ft,ve,Et,re),Ft=U(Ft,oe)}for(oe=Y+1,ve=2;15>=oe;++oe,ve<<=1){if(pt+=Sn<<=1,0>(Sn-=xe[oe]))return 0;for(;0<xe[oe];--xe[oe]){if(re=new j,(Ft&je)!=Ye){for(ye+=Et,Le=1<<(Ye=oe)-Y;15>Ye&&!(0>=(Le-=xe[Ye]));)++Ye,Le<<=1;Te+=Et=1<<(Le=Ye-Y),z[W+(Ye=Ft&je)].g=Le+Y,z[W+Ye].value=ye-W-Ye}re.g=oe-Y,re.value=De[be++],A(z,ye+(Ft>>Y),ve,Et,re),Ft=U(Ft,oe)}}return pt!=2*Pe[15]-1?0:Te})(v,b,_,R,N,H)}function j(){this.value=this.g=0}function G(){this.value=this.g=0}function Q(){this.G=s(5,j),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Zd,G)}function le(v,b,_,R){t(v!=null),t(b!=null),t(2147483648>R),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=b,v.pa=_,v.Jd=b,v.Yc=_+R,v.Zc=4<=R?_+R-4+1:_,Ae(v)}function me(v,b){for(var _=0;0<b--;)_|=Me(v,128)<<b;return _}function ge(v,b){var _=me(v,b);return Fe(v)?-_:_}function se(v,b,_,R){var N,H=0;for(t(v!=null),t(b!=null),t(4294967288>R),v.Sb=R,v.Ra=0,v.u=0,v.h=0,4<R&&(R=4),N=0;N<R;++N)H+=b[_+N]<<8*N;v.Ra=H,v.bb=R,v.oa=b,v.pa=_}function de(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Uc-8>>>0,++v.bb,v.u-=8;ue(v)&&(v.h=1,v.u=0)}function he(v,b){if(t(0<=b),!v.h&&b<=Ko){var _=te(v)&qo[b];return v.u+=b,de(v),_}return v.h=1,v.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(v){return v.Ra>>>(v.u&Uc-1)>>>0}function ue(v){return t(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Uc}function ae(v,b){v.u=b,v.h=ue(v)}function Ce(v){v.u>=nl&&(t(v.u>=nl),de(v))}function Ae(v){t(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(t(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function Fe(v){return me(v,1)}function Me(v,b){var _=v.Ca;0>v.b&&Ae(v);var R=v.b,N=_*b>>>8,H=(v.I>>>R>N)+0;for(H?(_-=N,v.I-=N+1<<R>>>0):_=N+1,R=_,N=0;256<=R;)N+=8,R>>=8;return R=7^N+Wc[R],v.b-=R,v.Ca=(_<<R)-1,H}function Ve(v,b,_){v[b+0]=_>>24&255,v[b+1]=_>>16&255,v[b+2]=_>>8&255,v[b+3]=255&_}function Ze(v,b){return v[b+0]|v[b+1]<<8}function et(v,b){return Ze(v,b)|v[b+2]<<16}function ot(v,b){return Ze(v,b)|Ze(v,b+2)<<16}function J(v,b){var _=1<<b;return t(v!=null),t(0<b),v.X=o(_),v.X==null?0:(v.Mb=32-b,v.Xa=b,1)}function nt(v,b){t(v!=null),t(b!=null),t(v.Xa==b.Xa),i(b.X,0,v.X,0,1<<b.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function vt(v,b,_,R){t(_!=null),t(R!=null);var N=_[0],H=R[0];return N==0&&(N=(v*H+b/2)/b),H==0&&(H=(b*N+v/2)/v),0>=N||0>=H?0:(_[0]=N,R[0]=H,1)}function Ne(v,b){return v+(1<<b)-1>>>b}function ct(v,b){return((4278255360&v)+(4278255360&b)>>>0&4278255360)+((16711935&v)+(16711935&b)>>>0&16711935)>>>0}function Ue(v,b){P[b]=function(_,R,N,H,z,W,Y){var re;for(re=0;re<z;++re){var ve=P[v](W[Y+re-1],N,H+re);W[Y+re]=ct(_[R+re],ve)}}}function lt(){this.ud=this.hd=this.jd=0}function dt(v,b){return((4278124286&(v^b))>>>1)+(v&b)>>>0}function rn(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function yt(v,b){return rn(v+(v-b+.5>>1))}function Ct(v,b,_){return Math.abs(b-_)-Math.abs(v-_)}function Cn(v,b,_,R,N,H,z){for(R=H[z-1],_=0;_<N;++_)H[z+_]=R=ct(v[b+_],R)}function bn(v,b,_,R,N){var H;for(H=0;H<_;++H){var z=v[b+H],W=z>>8&255,Y=16711935&(Y=(Y=16711935&z)+((W<<16)+W));R[N+H]=(4278255360&z)+Y>>>0}}function st(v,b){b.jd=255&v,b.hd=v>>8&255,b.ud=v>>16&255}function gt(v,b,_,R,N,H){var z;for(z=0;z<R;++z){var W=b[_+z],Y=W>>>8,re=W,ve=255&(ve=(ve=W>>>16)+((v.jd<<24>>24)*(Y<<24>>24)>>>5));re=255&(re=(re+=(v.hd<<24>>24)*(Y<<24>>24)>>>5)+((v.ud<<24>>24)*(ve<<24>>24)>>>5)),N[H+z]=(4278255360&W)+(ve<<16)+re}}function St(v,b,_,R,N){P[b]=function(H,z,W,Y,re,ve,De,oe,be){for(Y=De;Y<oe;++Y)for(De=0;De<be;++De)re[ve++]=N(W[R(H[z++])])},P[v]=function(H,z,W,Y,re,ve,De){var oe=8>>H.b,be=H.Ea,ye=H.K[0],Te=H.w;if(8>oe)for(H=(1<<H.b)-1,Te=(1<<oe)-1;z<W;++z){var xe,Pe=0;for(xe=0;xe<be;++xe)xe&H||(Pe=R(Y[re++])),ve[De++]=N(ye[Pe&Te]),Pe>>=oe}else P["VP8LMapColor"+_](Y,re,ye,Te,ve,De,z,W,be)}}function bi(v,b,_,R,N){for(_=b+_;b<_;){var H=v[b++];R[N++]=H>>16&255,R[N++]=H>>8&255,R[N++]=255&H}}function In(v,b,_,R,N){for(_=b+_;b<_;){var H=v[b++];R[N++]=H>>16&255,R[N++]=H>>8&255,R[N++]=255&H,R[N++]=H>>24&255}}function ln(v,b,_,R,N){for(_=b+_;b<_;){var H=(z=v[b++])>>16&240|z>>12&15,z=240&z|z>>28&15;R[N++]=H,R[N++]=z}}function on(v,b,_,R,N){for(_=b+_;b<_;){var H=(z=v[b++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;R[N++]=H,R[N++]=z}}function pi(v,b,_,R,N){for(_=b+_;b<_;){var H=v[b++];R[N++]=255&H,R[N++]=H>>8&255,R[N++]=H>>16&255}}function Mt(v,b,_,R,N,H){if(H==0)for(_=b+_;b<_;)Ve(R,((H=v[b++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),N+=32;else i(R,N,v,b,_)}function ni(v,b){P[b][0]=P[v+"0"],P[b][1]=P[v+"1"],P[b][2]=P[v+"2"],P[b][3]=P[v+"3"],P[b][4]=P[v+"4"],P[b][5]=P[v+"5"],P[b][6]=P[v+"6"],P[b][7]=P[v+"7"],P[b][8]=P[v+"8"],P[b][9]=P[v+"9"],P[b][10]=P[v+"10"],P[b][11]=P[v+"11"],P[b][12]=P[v+"12"],P[b][13]=P[v+"13"],P[b][14]=P[v+"0"],P[b][15]=P[v+"0"]}function Vt(v){return v==Us||v==sh||v==Ti||v==oC}function Ot(){this.eb=[],this.size=this.A=this.fb=0}function wi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function wn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ot,this.f.kb=new wi,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function jl(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function cr(v,b){var _=v.T,R=b.ba.f.RGBA,N=R.eb,H=R.fb+v.ka*R.A,z=sl[b.ba.S],W=v.y,Y=v.O,re=v.f,ve=v.N,De=v.ea,oe=v.W,be=b.cc,ye=b.dc,Te=b.Mc,xe=b.Nc,Pe=v.ka,Le=v.ka+v.T,Ye=v.U,je=Ye+1>>1;for(Pe==0?z(W,Y,null,null,re,ve,De,oe,re,ve,De,oe,N,H,null,null,Ye):(z(b.ec,b.fc,W,Y,be,ye,Te,xe,re,ve,De,oe,N,H-R.A,N,H,Ye),++_);Pe+2<Le;Pe+=2)be=re,ye=ve,Te=De,xe=oe,ve+=v.Rc,oe+=v.Rc,H+=2*R.A,z(W,(Y+=2*v.fa)-v.fa,W,Y,be,ye,Te,xe,re,ve,De,oe,N,H-R.A,N,H,Ye);return Y+=v.fa,v.j+Le<v.o?(i(b.ec,b.fc,W,Y,Ye),i(b.cc,b.dc,re,ve,je),i(b.Mc,b.Nc,De,oe,je),_--):1&Le||z(W,Y,null,null,re,ve,De,oe,re,ve,De,oe,N,H+R.A,null,null,Ye),_}function Bs(v,b,_){var R=v.F,N=[v.J];if(R!=null){var H=v.U,z=b.ba.S,W=z==tm||z==Ti;b=b.ba.f.RGBA;var Y=[0],re=v.ka;Y[0]=v.T,v.Kb&&(re==0?--Y[0]:(--re,N[0]-=v.width),v.j+v.ka+v.T==v.o&&(Y[0]=v.o-v.j-re));var ve=b.eb;re=b.fb+re*b.A,v=a1(R,N[0],v.width,H,Y,ve,re+(W?0:3),b.A),t(_==Y),v&&Vt(z)&&zp(ve,re,W,H,Y,b.A)}return 0}function Vs(v){var b=v.ma,_=b.ba.S,R=11>_,N=_==em||_==Up||_==tm||_==rC||_==12||Vt(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!ih(b.Oa,v,N?11:12))return 0;if(N&&Vt(_)&&Nc(),v.da)alert("todo:use_scaling");else{if(R){if(b.Ib=jl,v.Kb){if(_=v.U+1>>1,b.memory=o(v.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+v.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=cr,Nc()}}else alert("todo:EmitYUV");N&&(b.Jb=Bs,R&&js())}if(R&&!M4){for(v=0;256>v;++v)sQ[v]=89858*(v-128)+C1>>v1,cQ[v]=-22014*(v-128)+C1,lQ[v]=-45773*(v-128),aQ[v]=113618*(v-128)+C1>>v1;for(v=sC;v<qA;++v)b=76283*(v-16)+C1>>v1,dQ[v-sC]=Ja(b,255),uQ[v-sC]=Ja(b+8>>4,15);M4=1}return 1}function kt(v){var b=v.ma,_=v.U,R=v.T;return t(!(1&v.ka)),0>=_||0>=R?0:(_=b.Ib(v,b),b.Jb!=null&&b.Jb(v,b,_),b.Dc+=_,1)}function Ni(v){v.ma.memory=null}function zr(v,b,_,R){return he(v,8)!=47?0:(b[0]=he(v,14)+1,_[0]=he(v,14)+1,R[0]=he(v,1),he(v,3)!=0?0:!v.h)}function to(v,b){if(4>v)return v+1;var _=v-2>>1;return(2+(1&v)<<_)+he(b,_)+1}function bo(v,b){return 120<b?b-120:1<=(_=((_=WA[b-1])>>4)*v+(8-(15&_)))?_:1;var _}function $i(v,b,_){var R=te(_),N=v[b+=255&R].g-8;return 0<N&&(ae(_,_.u+8),R=te(_),b+=v[b].value,b+=R&(1<<N)-1),ae(_,_.u+v[b].g),v[b].value}function jr(v,b,_){return _.g+=v.g,_.value+=v.value<<b>>>0,t(8>=_.g),v.g}function no(v,b,_){var R=v.xc;return t((b=R==0?0:v.vc[v.md*(_>>R)+(b>>R)])<v.Wb),v.Ya[b]}function Ud(v,b,_,R){var N=v.ab,H=v.c*b,z=v.C;b=z+b;var W=_,Y=R;for(R=v.Ta,_=v.Ua;0<N--;){var re=v.gc[N],ve=z,De=b,oe=W,be=Y,ye=(Y=R,W=_,re.Ea);switch(t(ve<De),t(De<=re.nc),re.hc){case 2:nr(oe,be,(De-ve)*ye,Y,W);break;case 0:var Te=ve,xe=De,Pe=Y,Le=W,Ye=(Et=re).Ea;Te==0&&(rh(oe,be,null,null,1,Pe,Le),Cn(oe,be+1,0,0,Ye-1,Pe,Le+1),be+=Ye,Le+=Ye,++Te);for(var je=1<<Et.b,Ft=je-1,pt=Ne(Ye,Et.b),Sn=Et.K,Et=Et.w+(Te>>Et.b)*pt;Te<xe;){var Vn=Sn,io=Et,xn=1;for($c(oe,be,Pe,Le-Ye,1,Pe,Le);xn<Ye;){var Dt=(xn&~Ft)+je;Dt>Ye&&(Dt=Ye),(0,Bp[Vn[io++]>>8&15])(oe,be+ +xn,Pe,Le+xn-Ye,Dt-xn,Pe,Le+xn),xn=Dt}be+=Ye,Le+=Ye,++Te&Ft||(Et+=pt)}De!=re.nc&&i(Y,W-ye,Y,W+(De-ve-1)*ye,ye);break;case 1:for(ye=oe,xe=be,Ye=(oe=re.Ea)-(Le=oe&~(Pe=(be=1<<re.b)-1)),Te=Ne(oe,re.b),je=re.K,re=re.w+(ve>>re.b)*Te;ve<De;){for(Ft=je,pt=re,Sn=new lt,Et=xe+Le,Vn=xe+oe;xe<Et;)st(Ft[pt++],Sn),Vp(Sn,ye,xe,be,Y,W),xe+=be,W+=be;xe<Vn&&(st(Ft[pt++],Sn),Vp(Sn,ye,xe,Ye,Y,W),xe+=Ye,W+=Ye),++ve&Pe||(re+=Te)}break;case 3:if(oe==Y&&be==W&&0<re.b){for(xe=Y,oe=ye=W+(De-ve)*ye-(Le=(De-ve)*Ne(re.Ea,re.b)),be=Y,Pe=W,Te=[],Le=(Ye=Le)-1;0<=Le;--Le)Te[Le]=be[Pe+Le];for(Le=Ye-1;0<=Le;--Le)xe[oe+Le]=Te[Le];Xg(re,ve,De,Y,ye,Y,W)}else Xg(re,ve,De,oe,be,Y,W)}W=R,Y=_}Y!=_&&i(R,_,W,Y,H)}function Tc(v,b){var _=v.V,R=v.Ba+v.c*v.C,N=b-v.C;if(t(b<=v.l.o),t(16>=N),0<N){var H=v.l,z=v.Ta,W=v.Ua,Y=H.width;if(Ud(v,N,_,R),N=W=[W],t((_=v.C)<(R=b)),t(H.v<H.va),R>H.o&&(R=H.o),_<H.j){var re=H.j-_;_=H.j,N[0]+=re*Y}if(_>=R?_=0:(N[0]+=4*H.v,H.ka=_-H.j,H.U=H.va-H.v,H.T=R-_,_=1),_){if(W=W[0],11>(_=v.ca).S){var ve=_.f.RGBA,De=(R=_.S,N=H.U,H=H.T,re=ve.eb,ve.A),oe=H;for(ve=ve.fb+v.Ma*ve.A;0<oe--;){var be=z,ye=W,Te=N,xe=re,Pe=ve;switch(R){case Jg:Gp(be,ye,Te,xe,Pe);break;case em:Kc(be,ye,Te,xe,Pe);break;case Us:Kc(be,ye,Te,xe,Pe),zp(xe,Pe,0,Te,1,0);break;case f1:Xd(be,ye,Te,xe,Pe);break;case Up:Mt(be,ye,Te,xe,Pe,1);break;case sh:Mt(be,ye,Te,xe,Pe,1),zp(xe,Pe,0,Te,1,0);break;case tm:Mt(be,ye,Te,xe,Pe,0);break;case Ti:Mt(be,ye,Te,xe,Pe,0),zp(xe,Pe,1,Te,1,0);break;case rC:rc(be,ye,Te,xe,Pe);break;case oC:rc(be,ye,Te,xe,Pe),s1(xe,Pe,Te,1,0);break;case g1:Yc(be,ye,Te,xe,Pe);break;default:t(0)}W+=Y,ve+=De}v.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");t(v.Ma<=_.height)}}v.C=b,t(v.C<=v.i)}function Tn(v){var b;if(0<v.ua)return 0;for(b=0;b<v.Wb;++b){var _=v.Ya[b].G,R=v.Ya[b].H;if(0<_[1][R[1]+0].g||0<_[2][R[2]+0].g||0<_[3][R[3]+0].g)return 0}return 1}function Za(v,b,_,R,N,H){if(v.Z!=0){var z=v.qd,W=v.rd;for(t(lh[v.Z]!=null);b<_;++b)lh[v.Z](z,W,R,N,R,N,H),z=R,W=N,N+=H;v.qd=z,v.rd=W}}function ga(v,b){var _=v.l.ma,R=_.Z==0||_.Z==1?v.l.j:v.C;if(R=v.C<R?R:v.C,t(b<=v.l.o),b>R){var N=v.l.width,H=_.ca,z=_.tb+N*R,W=v.V,Y=v.Ba+v.c*R,re=v.gc;t(v.ab==1),t(re[0].hc==3),rl(re[0],R,b,W,Y,H,z),Za(_,R,b,H,z,N)}v.C=v.Ma=b}function ma(v,b,_,R,N,H,z){var W=v.$/R,Y=v.$%R,re=v.m,ve=v.s,De=_+v.$,oe=De;N=_+R*N;var be=_+R*H,ye=280+ve.ua,Te=v.Pb?W:16777216,xe=0<ve.ua?ve.Wa:null,Pe=ve.wc,Le=De<be?no(ve,Y,W):null;t(v.C<H),t(be<=N);var Ye=!1;e:for(;;){for(;Ye||De<be;){var je=0;if(W>=Te){var Ft=De-_;t((Te=v).Pb),Te.wd=Te.m,Te.xd=Ft,0<Te.s.ua&&nt(Te.s.Wa,Te.s.vb),Te=W+nm}if(Y&Pe||(Le=no(ve,Y,W)),t(Le!=null),Le.Qb&&(b[De]=Le.qb,Ye=!0),!Ye)if(Ce(re),Le.jc){je=re,Ft=b;var pt=De,Sn=Le.pd[te(je)&Zd-1];t(Le.jc),256>Sn.g?(ae(je,je.u+Sn.g),Ft[pt]=Sn.value,je=0):(ae(je,je.u+Sn.g-256),t(256<=Sn.value),je=Sn.value),je==0&&(Ye=!0)}else je=$i(Le.G[0],Le.H[0],re);if(re.h)break;if(Ye||256>je){if(!Ye)if(Le.nd)b[De]=(Le.qb|je<<8)>>>0;else{if(Ce(re),Ye=$i(Le.G[1],Le.H[1],re),Ce(re),Ft=$i(Le.G[2],Le.H[2],re),pt=$i(Le.G[3],Le.H[3],re),re.h)break;b[De]=(pt<<24|Ye<<16|je<<8|Ft)>>>0}if(Ye=!1,++De,++Y>=R&&(Y=0,++W,z!=null&&W<=H&&!(W%16)&&z(v,W),xe!=null))for(;oe<De;)je=b[oe++],xe.X[(506832829*je&4294967295)>>>xe.Mb]=je}else if(280>je){if(je=to(je-256,re),Ft=$i(Le.G[4],Le.H[4],re),Ce(re),Ft=bo(R,Ft=to(Ft,re)),re.h)break;if(De-_<Ft||N-De<je)break e;for(pt=0;pt<je;++pt)b[De+pt]=b[De+pt-Ft];for(De+=je,Y+=je;Y>=R;)Y-=R,++W,z!=null&&W<=H&&!(W%16)&&z(v,W);if(t(De<=N),Y&Pe&&(Le=no(ve,Y,W)),xe!=null)for(;oe<De;)je=b[oe++],xe.X[(506832829*je&4294967295)>>>xe.Mb]=je}else{if(!(je<ye))break e;for(Ye=je-280,t(xe!=null);oe<De;)je=b[oe++],xe.X[(506832829*je&4294967295)>>>xe.Mb]=je;je=De,t(!(Ye>>>(Ft=xe).Xa)),b[je]=Ft.X[Ye],Ye=!0}Ye||t(re.h==ue(re))}if(v.Pb&&re.h&&De<N)t(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&nt(v.s.vb,v.s.Wa);else{if(re.h)break e;z?.(v,W>H?H:W),v.a=0,v.$=De-_}return 1}return v.a=3,0}function Gs(v){t(v!=null),v.vc=null,v.yc=null,v.Ya=null;var b=v.Wa;b!=null&&(b.X=null),v.vb=null,t(v!=null)}function Wd(){var v=new Yt;return v==null?null:(v.a=0,v.xb=E4,ni("Predictor","VP8LPredictors"),ni("Predictor","VP8LPredictors_C"),ni("PredictorAdd","VP8LPredictorsAdd"),ni("PredictorAdd","VP8LPredictorsAdd_C"),nr=bn,Vp=gt,Gp=bi,Kc=In,rc=ln,Yc=on,Xd=pi,P.VP8LMapColor32b=il,P.VP8LMapColor8b=qc,v)}function Xa(v,b,_,R,N){var H=1,z=[v],W=[b],Y=R.m,re=R.s,ve=null,De=0;e:for(;;){if(_)for(;H&&he(Y,1);){var oe=z,be=W,ye=R,Te=1,xe=ye.m,Pe=ye.gc[ye.ab],Le=he(xe,2);if(ye.Oc&1<<Le)H=0;else{switch(ye.Oc|=1<<Le,Pe.hc=Le,Pe.Ea=oe[0],Pe.nc=be[0],Pe.K=[null],++ye.ab,t(4>=ye.ab),Le){case 0:case 1:Pe.b=he(xe,3)+2,Te=Xa(Ne(Pe.Ea,Pe.b),Ne(Pe.nc,Pe.b),0,ye,Pe.K),Pe.K=Pe.K[0];break;case 3:var Ye,je=he(xe,8)+1,Ft=16<je?0:4<je?1:2<je?2:3;if(oe[0]=Ne(Pe.Ea,Ft),Pe.b=Ft,Ye=Te=Xa(je,1,0,ye,Pe.K)){var pt,Sn=je,Et=Pe,Vn=1<<(8>>Et.b),io=o(Vn);if(io==null)Ye=0;else{var xn=Et.K[0],Dt=Et.w;for(io[0]=Et.K[0][0],pt=1;pt<1*Sn;++pt)io[pt]=ct(xn[Dt+pt],io[pt-1]);for(;pt<4*Vn;++pt)io[pt]=0;Et.K[0]=null,Et.K[0]=io,Ye=1}}Te=Ye;break;case 2:break;default:t(0)}H=Te}}if(z=z[0],W=W[0],H&&he(Y,1)&&!(H=1<=(De=he(Y,4))&&11>=De)){R.a=3;break e}var it;if(it=H)t:{var Ar,hn,zn,Hi=R,Io=z,gs=W,gr=De,Yo=_,ms=Hi.m,ro=Hi.s,jn=[null],gi=1,mr=0,mi=$A[gr];n:for(;;){if(Yo&&he(ms,1)){var To=he(ms,3)+2,ac=Ne(Io,To),Rr=Ne(gs,To),Ws=ac*Rr;if(!Xa(ac,Rr,0,Hi,jn))break n;for(jn=jn[0],ro.xc=To,Ar=0;Ar<Ws;++Ar){var Di=jn[Ar]>>8&65535;jn[Ar]=Di,Di>=gi&&(gi=Di+1)}}if(ms.h)break n;for(hn=0;5>hn;++hn){var oo=m1[hn];!hn&&0<gr&&(oo+=1<<gr),mr<oo&&(mr=oo)}var ya=s(gi*mi,j),vs=gi,Sa=s(vs,Q);if(Sa==null)var xa=null;else t(65536>=vs),xa=Sa;var $s=o(mr);if(xa==null||$s==null||ya==null){Hi.a=1;break n}var Ea=ya;for(Ar=zn=0;Ar<gi;++Ar){var Pi=xa[Ar],Da=Pi.G,lc=Pi.H,Wp=0,eu=1,Po=0;for(hn=0;5>hn;++hn){oo=m1[hn],Da[hn]=Ea,lc[hn]=zn,!hn&&0<gr&&(oo+=1<<gr);r:{var w1,KA=oo,y1=Hi,aC=$s,fQ=Ea,gQ=zn,YA=0,ch=y1.m,mQ=he(ch,1);if(r(aC,0,0,KA),mQ){var vQ=he(ch,1)+1,CQ=he(ch,1),P4=he(ch,CQ==0?1:8);aC[P4]=1,vQ==2&&(aC[P4=he(ch,8)]=1);var S1=1}else{var k4=o(19),L4=he(ch,4)+4;if(19<L4){y1.a=3;var x1=0;break r}for(w1=0;w1<L4;++w1)k4[UA[w1]]=he(ch,3);var ZA=void 0,lC=void 0,O4=y1,bQ=k4,E1=KA,N4=aC,XA=0,dh=O4.m,B4=8,V4=s(128,j);i:for(;I(V4,0,7,bQ,19);){if(he(dh,1)){var wQ=2+2*he(dh,3);if((ZA=2+he(dh,wQ))>E1)break i}else ZA=E1;for(lC=0;lC<E1&&ZA--;){Ce(dh);var G4=V4[0+(127&te(dh))];ae(dh,dh.u+G4.g);var im=G4.value;if(16>im)N4[lC++]=im,im!=0&&(B4=im);else{var yQ=im==16,H4=im-16,SQ=zA[H4],z4=he(dh,HA[H4])+SQ;if(lC+z4>E1)break i;for(var xQ=yQ?B4:0;0<z4--;)N4[lC++]=xQ}}XA=1;break i}XA||(O4.a=3),S1=XA}(S1=S1&&!ch.h)&&(YA=I(fQ,gQ,8,aC,KA)),S1&&YA!=0?x1=YA:(y1.a=3,x1=0)}if(x1==0)break n;if(eu&&jA[hn]==1&&(eu=Ea[zn].g==0),Wp+=Ea[zn].g,zn+=x1,3>=hn){var cC,QA=$s[0];for(cC=1;cC<oo;++cC)$s[cC]>QA&&(QA=$s[cC]);Po+=QA}}if(Pi.nd=eu,Pi.Qb=0,eu&&(Pi.qb=(Da[3][lc[3]+0].value<<24|Da[1][lc[1]+0].value<<16|Da[2][lc[2]+0].value)>>>0,Wp==0&&256>Da[0][lc[0]+0].value&&(Pi.Qb=1,Pi.qb+=Da[0][lc[0]+0].value<<8)),Pi.jc=!Pi.Qb&&6>Po,Pi.jc){var D1,tu=Pi;for(D1=0;D1<Zd;++D1){var uh=D1,hh=tu.pd[uh],_1=tu.G[0][tu.H[0]+uh];256<=_1.value?(hh.g=_1.g+256,hh.value=_1.value):(hh.g=0,hh.value=0,uh>>=jr(_1,8,hh),uh>>=jr(tu.G[1][tu.H[1]+uh],16,hh),uh>>=jr(tu.G[2][tu.H[2]+uh],0,hh),jr(tu.G[3][tu.H[3]+uh],24,hh))}}}ro.vc=jn,ro.Wb=gi,ro.Ya=xa,ro.yc=ya,it=1;break t}it=0}if(!(H=it)){R.a=3;break e}if(0<De){if(re.ua=1<<De,!J(re.Wa,De)){R.a=1,H=0;break e}}else re.ua=0;var JA=R,j4=z,EQ=W,eR=JA.s,tR=eR.xc;if(JA.c=j4,JA.i=EQ,eR.md=Ne(j4,tR),eR.wc=tR==0?-1:(1<<tR)-1,_){R.xb=tQ;break e}if((ve=o(z*W))==null){R.a=1,H=0;break e}H=(H=ma(R,ve,0,z,W,W,null))&&!Y.h;break e}return H?(N!=null?N[0]=ve:(t(ve==null),t(_)),R.$=0,_||Gs(re)):Gs(re),H}function Ul(v,b){var _=v.c*v.i,R=_+b+16*b;return t(v.c<=b),v.V=o(R),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+_+b,1)}function Qa(v,b){var _=v.C,R=b-_,N=v.V,H=v.Ba+v.c*_;for(t(b<=v.l.o);0<R;){var z=16<R?16:R,W=v.l.ma,Y=v.l.width,re=Y*z,ve=W.ca,De=W.tb+Y*_,oe=v.Ta,be=v.Ua;Ud(v,z,N,H),l1(oe,be,ve,De,re),Za(W,_,_+z,ve,De,Y),R-=z,N+=z*v.c,_+=z}t(_==b),v.C=v.Ma=b}function $d(){this.ub=this.yd=this.td=this.Rb=0}function Wl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Bi(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function xp(){this.Yb=(function(){var v=[];return(function b(_,R,N){for(var H=N[R],z=0;z<H&&(_.push(N.length>R+1?[]:0),!(N.length<R+1));z++)b(_[z],R+1,N)})(v,0,[3,11]),v})()}function Vg(){this.jb=o(3),this.Wc=a([4,8],xp),this.Xc=a([4,17],xp)}function Gg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function us(){this.ld=this.La=this.dd=this.tc=0}function Yu(){this.Na=this.la=0}function Hg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ep(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dp(){this.uc=this.M=this.Nb=0,this.wa=Array(new us),this.Y=0,this.ya=Array(new Ep),this.aa=0,this.l=new Pc}function zg(){this.y=o(16),this.f=o(8),this.ea=o(8)}function _p(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new $d,this.Kc=new Wl,this.ed=new Gg,this.Qa=new Bi,this.Ic=this.$c=this.Aa=0,this.D=new Dp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,M),this.ia=0,this.pb=s(4,Hg),this.Pa=new Vg,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zg),this.Hd=0,this.rb=Array(new Yu),this.sb=0,this.wa=Array(new us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ep),this.L=this.aa=0,this.gd=a([4,2],us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ja(v,b){return 0>v?0:v>b?b:v}function Pc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jg(){var v=new _p;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,k||(k=Zu)),v}function tr(v,b,_){return v.a==0&&(v.a=b,v.sc=_,v.cb=0),0}function Ap(v,b,_){return 3<=_&&v[b+0]==157&&v[b+1]==1&&v[b+2]==42}function va(v,b){if(v==null)return 0;if(v.a=0,v.sc="OK",b==null)return tr(v,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,R=b.w,N=b.ha;if(4>N)return tr(v,7,"Truncated header.");var H=_[R+0]|_[R+1]<<8|_[R+2]<<16,z=v.Od;if(z.Rb=!(1&H),z.td=H>>1&7,z.yd=H>>4&1,z.ub=H>>5,3<z.td)return tr(v,3,"Incorrect keyframe parameters.");if(!z.yd)return tr(v,4,"Frame not displayable.");R+=3,N-=3;var W=v.Kc;if(z.Rb){if(7>N)return tr(v,7,"cannot parse picture header");if(!Ap(_,R,N))return tr(v,3,"Bad code word");W.c=16383&(_[R+4]<<8|_[R+3]),W.Td=_[R+4]>>6,W.i=16383&(_[R+6]<<8|_[R+5]),W.Ud=_[R+6]>>6,R+=7,N-=7,v.za=W.c+15>>4,v.Ub=W.i+15>>4,b.width=W.c,b.height=W.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,r((H=v.Pa).jb,0,255,H.jb.length),t((H=v.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,r(H.Zb,0,0,H.Zb.length),r(H.Lb,0,0,H.Lb)}if(z.ub>N)return tr(v,7,"bad partition length");le(H=v.m,_,R,z.ub),R+=z.ub,N-=z.ub,z.Rb&&(W.Ld=Fe(H),W.Kd=Fe(H)),W=v.Qa;var Y,re=v.Pa;if(t(H!=null),t(W!=null),W.Cb=Fe(H),W.Cb){if(W.Bb=Fe(H),Fe(H)){for(W.Fb=Fe(H),Y=0;4>Y;++Y)W.Zb[Y]=Fe(H)?ge(H,7):0;for(Y=0;4>Y;++Y)W.Lb[Y]=Fe(H)?ge(H,6):0}if(W.Bb)for(Y=0;3>Y;++Y)re.jb[Y]=Fe(H)?me(H,8):255}else W.Bb=0;if(H.Ka)return tr(v,3,"cannot parse segment header");if((W=v.ed).zd=Fe(H),W.Tb=me(H,6),W.wb=me(H,3),W.Pc=Fe(H),W.Pc&&Fe(H)){for(re=0;4>re;++re)Fe(H)&&(W.vd[re]=ge(H,6));for(re=0;4>re;++re)Fe(H)&&(W.od[re]=ge(H,6))}if(v.L=W.Tb==0?0:W.zd?1:2,H.Ka)return tr(v,3,"cannot parse filter header");var ve=N;if(N=Y=R,R=Y+ve,W=ve,v.Xb=(1<<me(v.m,2))-1,ve<3*(re=v.Xb))_=7;else{for(Y+=3*re,W-=3*re,ve=0;ve<re;++ve){var De=_[N+0]|_[N+1]<<8|_[N+2]<<16;De>W&&(De=W),le(v.Jc[+ve],_,Y,De),Y+=De,W-=De,N+=3}le(v.Jc[+re],_,Y,W),_=Y<R?0:5}if(_!=0)return tr(v,_,"cannot parse partitions");for(_=me(Y=v.m,7),N=Fe(Y)?ge(Y,4):0,R=Fe(Y)?ge(Y,4):0,W=Fe(Y)?ge(Y,4):0,re=Fe(Y)?ge(Y,4):0,Y=Fe(Y)?ge(Y,4):0,ve=v.Qa,De=0;4>De;++De){if(ve.Cb){var oe=ve.Zb[De];ve.Fb||(oe+=_)}else{if(0<De){v.pb[De]=v.pb[0];continue}oe=_}var be=v.pb[De];be.Sc[0]=y[Ja(oe+N,127)],be.Sc[1]=E[Ja(oe+0,127)],be.Eb[0]=2*y[Ja(oe+R,127)],be.Eb[1]=101581*E[Ja(oe+W,127)]>>16,8>be.Eb[1]&&(be.Eb[1]=8),be.Qc[0]=y[Ja(oe+re,117)],be.Qc[1]=E[Ja(oe+Y,127)],be.lc=oe+Y}if(!z.Rb)return tr(v,4,"Not a key frame.");for(Fe(H),z=v.Pa,_=0;4>_;++_){for(N=0;8>N;++N)for(R=0;3>R;++R)for(W=0;11>W;++W)re=Me(H,Gi[_][N][R][W])?me(H,8):Ln[_][N][R][W],z.Wc[_][N].Yb[R][W]=re;for(N=0;17>N;++N)z.Xc[_][N]=z.Wc[_][ah[N]]}return v.kc=Fe(H),v.kc&&(v.Bd=me(H,8)),v.cb=1}function Zu(v,b,_,R,N,H,z){var W=b[N].Yb[_];for(_=0;16>N;++N){if(!Me(v,W[_+0]))return N;for(;!Me(v,W[_+1]);)if(W=b[++N].Yb[0],_=0,N==16)return 16;var Y=b[N+1].Yb;if(Me(v,W[_+2])){var re=v,ve=0;if(Me(re,(oe=W)[(De=_)+3]))if(Me(re,oe[De+6])){for(W=0,De=2*(ve=Me(re,oe[De+8]))+(oe=Me(re,oe[De+9+ve])),ve=0,oe=ne[De];oe[W];++W)ve+=ve+Me(re,oe[W]);ve+=3+(8<<De)}else Me(re,oe[De+7])?(ve=7+2*Me(re,165),ve+=Me(re,145)):ve=5+Me(re,159);else ve=Me(re,oe[De+4])?3+Me(re,oe[De+5]):2;W=Y[2]}else ve=1,W=Y[1];Y=z+Re[N],0>(re=v).b&&Ae(re);var De,oe=re.b,be=(De=re.Ca>>1)-(re.I>>oe)>>31;--re.b,re.Ca+=be,re.Ca|=1,re.I-=(De+1&be)<<oe,H[Y]=((ve^be)-be)*R[(0<N)+0]}return 16}function Ug(v){var b=v.rb[v.sb-1];b.la=0,b.Na=0,r(v.zc,0,0,v.zc.length),v.ja=0}function Fo(v,b,_,R,N){N=v[b+_+32*R]+(N>>3),v[b+_+32*R]=-256&N?0>N?0:255:N}function qi(v,b,_,R,N,H){Fo(v,b,0,_,R+N),Fo(v,b,1,_,R+H),Fo(v,b,2,_,R-H),Fo(v,b,3,_,R-N)}function Hs(v){return(20091*v>>16)+v}function Rp(v,b,_,R){var N,H=0,z=o(16);for(N=0;4>N;++N){var W=v[b+0]+v[b+8],Y=v[b+0]-v[b+8],re=(35468*v[b+4]>>16)-Hs(v[b+12]),ve=Hs(v[b+4])+(35468*v[b+12]>>16);z[H+0]=W+ve,z[H+1]=Y+re,z[H+2]=Y-re,z[H+3]=W-ve,H+=4,b++}for(N=H=0;4>N;++N)W=(v=z[H+0]+4)+z[H+8],Y=v-z[H+8],re=(35468*z[H+4]>>16)-Hs(z[H+12]),Fo(_,R,0,0,W+(ve=Hs(z[H+4])+(35468*z[H+12]>>16))),Fo(_,R,1,0,Y+re),Fo(_,R,2,0,Y-re),Fo(_,R,3,0,W-ve),H++,R+=32}function W0(v,b,_,R){var N=v[b+0]+4,H=35468*v[b+4]>>16,z=Hs(v[b+4]),W=35468*v[b+1]>>16;qi(_,R,0,N+z,v=Hs(v[b+1]),W),qi(_,R,1,N+H,v,W),qi(_,R,2,N-H,v,W),qi(_,R,3,N-z,v,W)}function $0(v,b,_,R,N){Rp(v,b,_,R),N&&Rp(v,b+16,_,R+4)}function el(v,b,_,R){Qd(v,b+0,_,R,1),Qd(v,b+32,_,R+128,1)}function Wg(v,b,_,R){var N;for(v=v[b+0]+4,N=0;4>N;++N)for(b=0;4>b;++b)Fo(_,R,b,N,v)}function $g(v,b,_,R){v[b+0]&&Kn(v,b+0,_,R),v[b+16]&&Kn(v,b+16,_,R+4),v[b+32]&&Kn(v,b+32,_,R+128),v[b+48]&&Kn(v,b+48,_,R+128+4)}function Xu(v,b,_,R){var N,H=o(16);for(N=0;4>N;++N){var z=v[b+0+N]+v[b+12+N],W=v[b+4+N]+v[b+8+N],Y=v[b+4+N]-v[b+8+N],re=v[b+0+N]-v[b+12+N];H[0+N]=z+W,H[8+N]=z-W,H[4+N]=re+Y,H[12+N]=re-Y}for(N=0;4>N;++N)z=(v=H[0+4*N]+3)+H[3+4*N],W=H[1+4*N]+H[2+4*N],Y=H[1+4*N]-H[2+4*N],re=v-H[3+4*N],_[R+0]=z+W>>3,_[R+16]=re+Y>>3,_[R+32]=z-W>>3,_[R+48]=re-Y>>3,R+=64}function kc(v,b,_){var R,N=b-32,H=fs,z=255-v[N-1];for(R=0;R<_;++R){var W,Y=H,re=z+v[b-1];for(W=0;W<_;++W)v[b+W]=Y[re+v[N+W]];b+=32}}function q0(v,b){kc(v,b,4)}function qg(v,b){kc(v,b,8)}function K0(v,b){kc(v,b,16)}function Fp(v,b){var _;for(_=0;16>_;++_)i(v,b+32*_,v,b-32,16)}function $l(v,b){var _;for(_=16;0<_;--_)r(v,b,v[b-1],16),b+=32}function zs(v,b,_){var R;for(R=0;16>R;++R)r(b,_+32*R,v,16)}function Y0(v,b){var _,R=16;for(_=0;16>_;++_)R+=v[b-1+32*_]+v[b+_-32];zs(R>>5,v,b)}function ql(v,b){var _,R=8;for(_=0;16>_;++_)R+=v[b-1+32*_];zs(R>>4,v,b)}function Qu(v,b){var _,R=8;for(_=0;16>_;++_)R+=v[b+_-32];zs(R>>4,v,b)}function Z0(v,b){zs(128,v,b)}function Xt(v,b,_){return v+2*b+_+2>>2}function X0(v,b){var _,R=b-32;for(R=new Uint8Array([Xt(v[R-1],v[R+0],v[R+1]),Xt(v[R+0],v[R+1],v[R+2]),Xt(v[R+1],v[R+2],v[R+3]),Xt(v[R+2],v[R+3],v[R+4])]),_=0;4>_;++_)i(v,b+32*_,R,0,R.length)}function Q0(v,b){var _=v[b-1],R=v[b-1+32],N=v[b-1+64],H=v[b-1+96];Ve(v,b+0,16843009*Xt(v[b-1-32],_,R)),Ve(v,b+32,16843009*Xt(_,R,N)),Ve(v,b+64,16843009*Xt(R,N,H)),Ve(v,b+96,16843009*Xt(N,H,H))}function J0(v,b){var _,R=4;for(_=0;4>_;++_)R+=v[b+_-32]+v[b-1+32*_];for(R>>=3,_=0;4>_;++_)r(v,b+32*_,R,4)}function Kl(v,b){var _=v[b-1+0],R=v[b-1+32],N=v[b-1+64],H=v[b-1-32],z=v[b+0-32],W=v[b+1-32],Y=v[b+2-32],re=v[b+3-32];v[b+0+96]=Xt(R,N,v[b-1+96]),v[b+1+96]=v[b+0+64]=Xt(_,R,N),v[b+2+96]=v[b+1+64]=v[b+0+32]=Xt(H,_,R),v[b+3+96]=v[b+2+64]=v[b+1+32]=v[b+0+0]=Xt(z,H,_),v[b+3+64]=v[b+2+32]=v[b+1+0]=Xt(W,z,H),v[b+3+32]=v[b+2+0]=Xt(Y,W,z),v[b+3+0]=Xt(re,Y,W)}function Wo(v,b){var _=v[b+1-32],R=v[b+2-32],N=v[b+3-32],H=v[b+4-32],z=v[b+5-32],W=v[b+6-32],Y=v[b+7-32];v[b+0+0]=Xt(v[b+0-32],_,R),v[b+1+0]=v[b+0+32]=Xt(_,R,N),v[b+2+0]=v[b+1+32]=v[b+0+64]=Xt(R,N,H),v[b+3+0]=v[b+2+32]=v[b+1+64]=v[b+0+96]=Xt(N,H,z),v[b+3+32]=v[b+2+64]=v[b+1+96]=Xt(H,z,W),v[b+3+64]=v[b+2+96]=Xt(z,W,Y),v[b+3+96]=Xt(W,Y,Y)}function eC(v,b){var _=v[b-1+0],R=v[b-1+32],N=v[b-1+64],H=v[b-1-32],z=v[b+0-32],W=v[b+1-32],Y=v[b+2-32],re=v[b+3-32];v[b+0+0]=v[b+1+64]=H+z+1>>1,v[b+1+0]=v[b+2+64]=z+W+1>>1,v[b+2+0]=v[b+3+64]=W+Y+1>>1,v[b+3+0]=Y+re+1>>1,v[b+0+96]=Xt(N,R,_),v[b+0+64]=Xt(R,_,H),v[b+0+32]=v[b+1+96]=Xt(_,H,z),v[b+1+32]=v[b+2+96]=Xt(H,z,W),v[b+2+32]=v[b+3+96]=Xt(z,W,Y),v[b+3+32]=Xt(W,Y,re)}function Kg(v,b){var _=v[b+0-32],R=v[b+1-32],N=v[b+2-32],H=v[b+3-32],z=v[b+4-32],W=v[b+5-32],Y=v[b+6-32],re=v[b+7-32];v[b+0+0]=_+R+1>>1,v[b+1+0]=v[b+0+64]=R+N+1>>1,v[b+2+0]=v[b+1+64]=N+H+1>>1,v[b+3+0]=v[b+2+64]=H+z+1>>1,v[b+0+32]=Xt(_,R,N),v[b+1+32]=v[b+0+96]=Xt(R,N,H),v[b+2+32]=v[b+1+96]=Xt(N,H,z),v[b+3+32]=v[b+2+96]=Xt(H,z,W),v[b+3+64]=Xt(z,W,Y),v[b+3+96]=Xt(W,Y,re)}function qd(v,b){var _=v[b-1+0],R=v[b-1+32],N=v[b-1+64],H=v[b-1+96];v[b+0+0]=_+R+1>>1,v[b+2+0]=v[b+0+32]=R+N+1>>1,v[b+2+32]=v[b+0+64]=N+H+1>>1,v[b+1+0]=Xt(_,R,N),v[b+3+0]=v[b+1+32]=Xt(R,N,H),v[b+3+32]=v[b+1+64]=Xt(N,H,H),v[b+3+64]=v[b+2+64]=v[b+0+96]=v[b+1+96]=v[b+2+96]=v[b+3+96]=H}function Mp(v,b){var _=v[b-1+0],R=v[b-1+32],N=v[b-1+64],H=v[b-1+96],z=v[b-1-32],W=v[b+0-32],Y=v[b+1-32],re=v[b+2-32];v[b+0+0]=v[b+2+32]=_+z+1>>1,v[b+0+32]=v[b+2+64]=R+_+1>>1,v[b+0+64]=v[b+2+96]=N+R+1>>1,v[b+0+96]=H+N+1>>1,v[b+3+0]=Xt(W,Y,re),v[b+2+0]=Xt(z,W,Y),v[b+1+0]=v[b+3+32]=Xt(_,z,W),v[b+1+32]=v[b+3+64]=Xt(R,_,z),v[b+1+64]=v[b+3+96]=Xt(N,R,_),v[b+1+96]=Xt(H,N,R)}function Kd(v,b){var _;for(_=0;8>_;++_)i(v,b+32*_,v,b-32,8)}function tC(v,b){var _;for(_=0;8>_;++_)r(v,b,v[b-1],8),b+=32}function Yl(v,b,_){var R;for(R=0;8>R;++R)r(b,_+32*R,v,8)}function nC(v,b){var _,R=8;for(_=0;8>_;++_)R+=v[b+_-32]+v[b-1+32*_];Yl(R>>4,v,b)}function Ip(v,b){var _,R=4;for(_=0;8>_;++_)R+=v[b+_-32];Yl(R>>3,v,b)}function Tp(v,b){var _,R=4;for(_=0;8>_;++_)R+=v[b-1+32*_];Yl(R>>3,v,b)}function Zl(v,b){Yl(128,v,b)}function Xl(v,b,_){var R=v[b-_],N=v[b+0],H=3*(N-R)+oc[1020+v[b-2*_]-v[b+_]],z=jp[112+(H+4>>3)];v[b-_]=fs[255+R+jp[112+(H+3>>3)]],v[b+0]=fs[255+N-z]}function Pp(v,b,_,R){var N=v[b+0],H=v[b+_];return Mo[255+v[b-2*_]-v[b-_]]>R||Mo[255+H-N]>R}function Yd(v,b,_,R){return 4*Mo[255+v[b-_]-v[b+0]]+Mo[255+v[b-2*_]-v[b+_]]<=R}function kp(v,b,_,R,N){var H=v[b-3*_],z=v[b-2*_],W=v[b-_],Y=v[b+0],re=v[b+_],ve=v[b+2*_],De=v[b+3*_];return 4*Mo[255+W-Y]+Mo[255+z-re]>R?0:Mo[255+v[b-4*_]-H]<=N&&Mo[255+H-z]<=N&&Mo[255+z-W]<=N&&Mo[255+De-ve]<=N&&Mo[255+ve-re]<=N&&Mo[255+re-Y]<=N}function $o(v,b,_,R){var N=2*R+1;for(R=0;16>R;++R)Yd(v,b+R,_,N)&&Xl(v,b+R,_)}function Lp(v,b,_,R){var N=2*R+1;for(R=0;16>R;++R)Yd(v,b+R*_,1,N)&&Xl(v,b+R*_,1)}function Op(v,b,_,R){var N;for(N=3;0<N;--N)$o(v,b+=4*_,_,R)}function Lc(v,b,_,R){var N;for(N=3;0<N;--N)Lp(v,b+=4,_,R)}function Ql(v,b,_,R,N,H,z,W){for(H=2*H+1;0<N--;){if(kp(v,b,_,H,z))if(Pp(v,b,_,W))Xl(v,b,_);else{var Y=v,re=b,ve=_,De=Y[re-2*ve],oe=Y[re-ve],be=Y[re+0],ye=Y[re+ve],Te=Y[re+2*ve],xe=27*(Le=oc[1020+3*(be-oe)+oc[1020+De-ye]])+63>>7,Pe=18*Le+63>>7,Le=9*Le+63>>7;Y[re-3*ve]=fs[255+Y[re-3*ve]+Le],Y[re-2*ve]=fs[255+De+Pe],Y[re-ve]=fs[255+oe+xe],Y[re+0]=fs[255+be-xe],Y[re+ve]=fs[255+ye-Pe],Y[re+2*ve]=fs[255+Te-Le]}b+=R}}function Jl(v,b,_,R,N,H,z,W){for(H=2*H+1;0<N--;){if(kp(v,b,_,H,z))if(Pp(v,b,_,W))Xl(v,b,_);else{var Y=v,re=b,ve=_,De=Y[re-ve],oe=Y[re+0],be=Y[re+ve],ye=jp[112+(4+(Te=3*(oe-De))>>3)],Te=jp[112+(Te+3>>3)],xe=ye+1>>1;Y[re-2*ve]=fs[255+Y[re-2*ve]+xe],Y[re-ve]=fs[255+De+Te],Y[re+0]=fs[255+oe-ye],Y[re+ve]=fs[255+be-xe]}b+=R}}function Yg(v,b,_,R,N,H){Ql(v,b,_,1,16,R,N,H)}function Oc(v,b,_,R,N,H){Ql(v,b,1,_,16,R,N,H)}function ec(v,b,_,R,N,H){var z;for(z=3;0<z;--z)Jl(v,b+=4*_,_,1,16,R,N,H)}function S(v,b,_,R,N,H){var z;for(z=3;0<z;--z)Jl(v,b+=4,1,_,16,R,N,H)}function O(v,b,_,R,N,H,z,W){Ql(v,b,N,1,8,H,z,W),Ql(_,R,N,1,8,H,z,W)}function ie(v,b,_,R,N,H,z,W){Ql(v,b,1,N,8,H,z,W),Ql(_,R,1,N,8,H,z,W)}function fe(v,b,_,R,N,H,z,W){Jl(v,b+4*N,N,1,8,H,z,W),Jl(_,R+4*N,N,1,8,H,z,W)}function we(v,b,_,R,N,H,z,W){Jl(v,b+4,1,N,8,H,z,W),Jl(_,R+4,1,N,8,H,z,W)}function ke(){this.ba=new wn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function He(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xt(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new j}function Yt(){this.xb=this.a=0,this.l=new Pc,this.ca=new wn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xt,this.ab=0,this.gc=s(4,ht),this.Oc=0}function Qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function On(v,b,_,R,N,H,z){for(v=v==null?0:v[b+0],b=0;b<z;++b)N[H+b]=v+_[R+b]&255,v=N[H+b]}function Vi(v,b,_,R,N,H,z){var W;if(v==null)On(null,null,_,R,N,H,z);else for(W=0;W<z;++W)N[H+W]=v[b+W]+_[R+W]&255}function dr(v,b,_,R,N,H,z){if(v==null)On(null,null,_,R,N,H,z);else{var W,Y=v[b+0],re=Y,ve=Y;for(W=0;W<z;++W)re=ve+(Y=v[b+W])-re,ve=_[R+W]+(-256&re?0>re?0:255:re)&255,re=Y,N[H+W]=ve}}function yi(v,b,_,R){var N=b.width,H=b.o;if(t(v!=null&&b!=null),0>_||0>=R||_+R>H)return null;if(!v.Cc){if(v.ga==null){var z;if(v.ga=new Qt,(z=v.ga==null)||(z=b.width*b.o,t(v.Gb.length==0),v.Gb=o(z),v.Uc=0,v.Gb==null?z=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,z=1),z=!z),!z){z=v.ga;var W=v.Fa,Y=v.P,re=v.qc,ve=v.mb,De=v.nb,oe=Y+1,be=re-1,ye=z.l;if(t(W!=null&&ve!=null&&b!=null),lh[0]=null,lh[1]=On,lh[2]=Vi,lh[3]=dr,z.ca=ve,z.tb=De,z.c=b.width,z.i=b.height,t(0<z.c&&0<z.i),1>=re)b=0;else if(z.$a=3&W[Y+0],z.Z=W[Y+0]>>2&3,z.Lc=W[Y+0]>>4&3,Y=W[Y+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||Y)b=0;else if(ye.put=kt,ye.ac=Vs,ye.bc=Ni,ye.ma=z,ye.width=b.width,ye.height=b.height,ye.Da=b.Da,ye.v=b.v,ye.va=b.va,ye.j=b.j,ye.o=b.o,z.$a)e:{t(z.$a==1),b=Wd();t:for(;;){if(b==null){b=0;break e}if(t(z!=null),z.mc=b,b.c=z.c,b.i=z.i,b.l=z.l,b.l.ma=z,b.l.width=z.c,b.l.height=z.i,b.a=0,se(b.m,W,oe,be),!Xa(z.c,z.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Tn(b.s)?(z.ic=1,W=b.c*b.i,b.Ta=null,b.Ua=0,b.V=o(W),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(z.ic=0,b=Ul(b,z.c)),!b))break t;b=1;break e}z.mc=null,b=0}else b=be>=z.c*z.i;z=!b}if(z)return null;v.ga.Lc!=1?v.Ga=0:R=H-_}t(v.ga!=null),t(_+R<=H);e:{if(b=(W=v.ga).c,H=W.l.o,W.$a==0){if(oe=v.rc,be=v.Vc,ye=v.Fa,Y=v.P+1+_*b,re=v.mb,ve=v.nb+_*b,t(Y<=v.P+v.qc),W.Z!=0)for(t(lh[W.Z]!=null),z=0;z<R;++z)lh[W.Z](oe,be,ye,Y,re,ve,b),oe=re,be=ve,ve+=b,Y+=b;else for(z=0;z<R;++z)i(re,ve,ye,Y,b),oe=re,be=ve,ve+=b,Y+=b;v.rc=oe,v.Vc=be}else{if(t(W.mc!=null),b=_+R,t((z=W.mc)!=null),t(b<=z.i),z.C>=b)b=1;else if(W.ic||js(),W.ic){W=z.V,oe=z.Ba,be=z.c;var Te=z.i,xe=(ye=1,Y=z.$/be,re=z.$%be,ve=z.m,De=z.s,z.$),Pe=be*Te,Le=be*b,Ye=De.wc,je=xe<Le?no(De,re,Y):null;t(xe<=Pe),t(b<=Te),t(Tn(De));t:for(;;){for(;!ve.h&&xe<Le;){if(re&Ye||(je=no(De,re,Y)),t(je!=null),Ce(ve),256>(Te=$i(je.G[0],je.H[0],ve)))W[oe+xe]=Te,++xe,++re>=be&&(re=0,++Y<=b&&!(Y%16)&&ga(z,Y));else{if(!(280>Te)){ye=0;break t}Te=to(Te-256,ve);var Ft,pt=$i(je.G[4],je.H[4],ve);if(Ce(ve),!(xe>=(pt=bo(be,pt=to(pt,ve)))&&Pe-xe>=Te)){ye=0;break t}for(Ft=0;Ft<Te;++Ft)W[oe+xe+Ft]=W[oe+xe+Ft-pt];for(xe+=Te,re+=Te;re>=be;)re-=be,++Y<=b&&!(Y%16)&&ga(z,Y);xe<Le&&re&Ye&&(je=no(De,re,Y))}t(ve.h==ue(ve))}ga(z,Y>b?b:Y);break t}!ye||ve.h&&xe<Pe?(ye=0,z.a=ve.h?5:3):z.$=xe,b=ye}else b=ma(z,z.V,z.Ba,z.c,z.i,b,Qa);if(!b){R=0;break e}}_+R>=H&&(v.Cc=1),R=1}if(!R)return null;if(v.Cc&&((R=v.ga)!=null&&(R.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+_*N}function ur(v,b,_,R,N,H){for(;0<N--;){var z,W=v,Y=b+(_?1:0),re=v,ve=b+(_?0:3);for(z=0;z<R;++z){var De=re[ve+4*z];De!=255&&(De*=32897,W[Y+4*z+0]=W[Y+4*z+0]*De>>23,W[Y+4*z+1]=W[Y+4*z+1]*De>>23,W[Y+4*z+2]=W[Y+4*z+2]*De>>23)}b+=H}}function hr(v,b,_,R,N){for(;0<R--;){var H;for(H=0;H<_;++H){var z=v[b+2*H+0],W=15&(re=v[b+2*H+1]),Y=4369*W,re=(240&re|re>>4)*Y>>16;v[b+2*H+0]=(240&z|z>>4)*Y>>16&240|(15&z|z<<4)*Y>>16>>4&15,v[b+2*H+1]=240&re|W}b+=N}}function _r(v,b,_,R,N,H,z,W){var Y,re,ve=255;for(re=0;re<N;++re){for(Y=0;Y<R;++Y){var De=v[b+Y];H[z+4*Y]=De,ve&=De}b+=_,z+=W}return ve!=255}function tl(v,b,_,R,N){var H;for(H=0;H<N;++H)_[R+H]=v[b+H]>>8}function js(){zp=ur,s1=hr,a1=_r,l1=tl}function Ca(v,b,_){P[v]=function(R,N,H,z,W,Y,re,ve,De,oe,be,ye,Te,xe,Pe,Le,Ye){var je,Ft=Ye-1>>1,pt=W[Y+0]|re[ve+0]<<16,Sn=De[oe+0]|be[ye+0]<<16;t(R!=null);var Et=3*pt+Sn+131074>>2;for(b(R[N+0],255&Et,Et>>16,Te,xe),H!=null&&(Et=3*Sn+pt+131074>>2,b(H[z+0],255&Et,Et>>16,Pe,Le)),je=1;je<=Ft;++je){var Vn=W[Y+je]|re[ve+je]<<16,io=De[oe+je]|be[ye+je]<<16,xn=pt+Vn+Sn+io+524296,Dt=xn+2*(Vn+Sn)>>3;Et=Dt+pt>>1,pt=(xn=xn+2*(pt+io)>>3)+Vn>>1,b(R[N+2*je-1],255&Et,Et>>16,Te,xe+(2*je-1)*_),b(R[N+2*je-0],255&pt,pt>>16,Te,xe+(2*je-0)*_),H!=null&&(Et=xn+Sn>>1,pt=Dt+io>>1,b(H[z+2*je-1],255&Et,Et>>16,Pe,Le+(2*je-1)*_),b(H[z+2*je+0],255&pt,pt>>16,Pe,Le+(2*je+0)*_)),pt=Vn,Sn=io}1&Ye||(Et=3*pt+Sn+131074>>2,b(R[N+Ye-1],255&Et,Et>>16,Te,xe+(Ye-1)*_),H!=null&&(Et=3*Sn+pt+131074>>2,b(H[z+Ye-1],255&Et,Et>>16,Pe,Le+(Ye-1)*_)))}}function Nc(){sl[Jg]=nQ,sl[em]=D4,sl[f1]=iQ,sl[Up]=_4,sl[tm]=A4,sl[rC]=R4,sl[g1]=rQ,sl[Us]=D4,sl[sh]=_4,sl[Ti]=A4,sl[oC]=R4}function Ju(v){return v&~oQ?0>v?0:255:v>>F4}function tc(v,b){return Ju((19077*v>>8)+(26149*b>>8)-14234)}function Bc(v,b,_){return Ju((19077*v>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function Vc(v,b){return Ju((19077*v>>8)+(33050*b>>8)-17685)}function nc(v,b,_,R,N){R[N+0]=tc(v,_),R[N+1]=Bc(v,b,_),R[N+2]=Vc(v,b)}function Ur(v,b,_,R,N){R[N+0]=Vc(v,b),R[N+1]=Bc(v,b,_),R[N+2]=tc(v,_)}function Gc(v,b,_,R,N){var H=Bc(v,b,_);b=H<<3&224|Vc(v,b)>>3,R[N+0]=248&tc(v,_)|H>>5,R[N+1]=b}function Hc(v,b,_,R,N){var H=240&Vc(v,b)|15;R[N+0]=240&tc(v,_)|Bc(v,b,_)>>4,R[N+1]=H}function eh(v,b,_,R,N){R[N+0]=255,nc(v,b,_,R,N+1)}function th(v,b,_,R,N){Ur(v,b,_,R,N),R[N+3]=255}function pr(v,b,_,R,N){nc(v,b,_,R,N),R[N+3]=255}function ic(v,b,_){P[v]=function(R,N,H,z,W,Y,re,ve,De){for(var oe=ve+(-2&De)*_;ve!=oe;)b(R[N+0],H[z+0],W[Y+0],re,ve),b(R[N+1],H[z+0],W[Y+0],re,ve+_),N+=2,++z,++Y,ve+=2*_;1&De&&b(R[N+0],H[z+0],W[Y+0],re,ve)}}function nh(v,b,_){return _==0?v==0?b==0?6:5:b==0?4:0:_}function Zg(v,b,_,R,N){switch(v>>>30){case 3:Qd(b,_,R,N,0);break;case 2:ps(b,_,R,N);break;case 1:Kn(b,_,R,N)}}function hs(v,b){var _,R,N=b.M,H=b.Nb,z=v.oc,W=v.pc+40,Y=v.oc,re=v.pc+584,ve=v.oc,De=v.pc+600;for(_=0;16>_;++_)z[W+32*_-1]=129;for(_=0;8>_;++_)Y[re+32*_-1]=129,ve[De+32*_-1]=129;for(0<N?z[W-1-32]=Y[re-1-32]=ve[De-1-32]=129:(r(z,W-32-1,127,21),r(Y,re-32-1,127,9),r(ve,De-32-1,127,9)),R=0;R<v.za;++R){var oe=b.ya[b.aa+R];if(0<R){for(_=-1;16>_;++_)i(z,W+32*_-4,z,W+32*_+12,4);for(_=-1;8>_;++_)i(Y,re+32*_-4,Y,re+32*_+4,4),i(ve,De+32*_-4,ve,De+32*_+4,4)}var be=v.Gd,ye=v.Hd+R,Te=oe.ad,xe=oe.Hc;if(0<N&&(i(z,W-32,be[ye].y,0,16),i(Y,re-32,be[ye].f,0,8),i(ve,De-32,be[ye].ea,0,8)),oe.Za){var Pe=z,Le=W-32+16;for(0<N&&(R>=v.za-1?r(Pe,Le,be[ye].y[15],4):i(Pe,Le,be[ye+1].y,0,4)),_=0;4>_;_++)Pe[Le+128+_]=Pe[Le+256+_]=Pe[Le+384+_]=Pe[Le+0+_];for(_=0;16>_;++_,xe<<=2)Pe=z,Le=W+I4[_],sc[oe.Ob[_]](Pe,Le),Zg(xe,Te,16*+_,Pe,Le)}else if(Pe=nh(R,N,oe.Ob[0]),ol[Pe](z,W),xe!=0)for(_=0;16>_;++_,xe<<=2)Zg(xe,Te,16*+_,z,W+I4[_]);for(_=oe.Gc,Pe=nh(R,N,oe.Dd),Jd[Pe](Y,re),Jd[Pe](ve,De),xe=Te,Pe=Y,Le=re,255&(oe=0|_)&&(170&oe?ba(xe,256,Pe,Le):fi(xe,256,Pe,Le)),oe=ve,xe=De,255&(_>>=8)&&(170&_?ba(Te,320,oe,xe):fi(Te,320,oe,xe)),N<v.Ub-1&&(i(be[ye].y,0,z,W+480,16),i(be[ye].f,0,Y,re+224,8),i(be[ye].ea,0,ve,De+224,8)),_=8*H*v.B,be=v.sa,ye=v.ta+16*R+16*H*v.R,Te=v.qa,oe=v.ra+8*R+_,xe=v.Ha,Pe=v.Ia+8*R+_,_=0;16>_;++_)i(be,ye+_*v.R,z,W+32*_,16);for(_=0;8>_;++_)i(Te,oe+_*v.B,Y,re+32*_,8),i(xe,Pe+_*v.B,ve,De+32*_,8)}}function zc(v,b,_,R,N,H,z,W,Y){var re=[0],ve=[0],De=0,oe=Y!=null?Y.kd:0,be=Y??new He;if(v==null||12>_)return 7;be.data=v,be.w=b,be.ha=_,b=[b],_=[_],be.gb=[be.gb];e:{var ye=b,Te=_,xe=be.gb;if(t(v!=null),t(Te!=null),t(xe!=null),xe[0]=0,12<=Te[0]&&!n(v,ye[0],"RIFF")){if(n(v,ye[0]+8,"WEBP")){xe=3;break e}var Pe=ot(v,ye[0]+4);if(12>Pe||4294967286<Pe){xe=3;break e}if(oe&&Pe>Te[0]-8){xe=7;break e}xe[0]=Pe,ye[0]+=12,Te[0]-=12}xe=0}if(xe!=0)return xe;for(Pe=0<be.gb[0],_=_[0];;){e:{var Le=v;Te=b,xe=_;var Ye=re,je=ve,Ft=ye=[0];if((Et=De=[De])[0]=0,8>xe[0])xe=7;else{if(!n(Le,Te[0],"VP8X")){if(ot(Le,Te[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var pt=ot(Le,Te[0]+8),Sn=1+et(Le,Te[0]+12);if(2147483648<=Sn*(Le=1+et(Le,Te[0]+15))){xe=3;break e}Ft!=null&&(Ft[0]=pt),Ye!=null&&(Ye[0]=Sn),je!=null&&(je[0]=Le),Te[0]+=18,xe[0]-=18,Et[0]=1}xe=0}}if(De=De[0],ye=ye[0],xe!=0)return xe;if(Te=!!(2&ye),!Pe&&De)return 3;if(H!=null&&(H[0]=!!(16&ye)),z!=null&&(z[0]=Te),W!=null&&(W[0]=0),z=re[0],ye=ve[0],De&&Te&&Y==null){xe=0;break}if(4>_){xe=7;break}if(Pe&&De||!Pe&&!De&&!n(v,b[0],"ALPH")){_=[_],be.na=[be.na],be.P=[be.P],be.Sa=[be.Sa];e:{pt=v,xe=b,Pe=_;var Et=be.gb;Ye=be.na,je=be.P,Ft=be.Sa,Sn=22,t(pt!=null),t(Pe!=null),Le=xe[0];var Vn=Pe[0];for(t(Ye!=null),t(Ft!=null),Ye[0]=null,je[0]=null,Ft[0]=0;;){if(xe[0]=Le,Pe[0]=Vn,8>Vn){xe=7;break e}var io=ot(pt,Le+4);if(4294967286<io){xe=3;break e}var xn=8+io+1&-2;if(Sn+=xn,0<Et&&Sn>Et){xe=3;break e}if(!n(pt,Le,"VP8 ")||!n(pt,Le,"VP8L")){xe=0;break e}if(Vn[0]<xn){xe=7;break e}n(pt,Le,"ALPH")||(Ye[0]=pt,je[0]=Le+8,Ft[0]=io),Le+=xn,Vn-=xn}}if(_=_[0],be.na=be.na[0],be.P=be.P[0],be.Sa=be.Sa[0],xe!=0)break}_=[_],be.Ja=[be.Ja],be.xa=[be.xa];e:if(Et=v,xe=b,Pe=_,Ye=be.gb[0],je=be.Ja,Ft=be.xa,pt=xe[0],Le=!n(Et,pt,"VP8 "),Sn=!n(Et,pt,"VP8L"),t(Et!=null),t(Pe!=null),t(je!=null),t(Ft!=null),8>Pe[0])xe=7;else{if(Le||Sn){if(Et=ot(Et,pt+4),12<=Ye&&Et>Ye-12){xe=3;break e}if(oe&&Et>Pe[0]-8){xe=7;break e}je[0]=Et,xe[0]+=8,Pe[0]-=8,Ft[0]=Sn}else Ft[0]=5<=Pe[0]&&Et[pt+0]==47&&!(Et[pt+4]>>5),je[0]=Pe[0];xe=0}if(_=_[0],be.Ja=be.Ja[0],be.xa=be.xa[0],b=b[0],xe!=0)break;if(4294967286<be.Ja)return 3;if(W==null||Te||(W[0]=be.xa?2:1),z=[z],ye=[ye],be.xa){if(5>_){xe=7;break}W=z,oe=ye,Te=H,v==null||5>_?v=0:5<=_&&v[b+0]==47&&!(v[b+4]>>5)?(Pe=[0],Et=[0],Ye=[0],se(je=new ee,v,b,_),zr(je,Pe,Et,Ye)?(W!=null&&(W[0]=Pe[0]),oe!=null&&(oe[0]=Et[0]),Te!=null&&(Te[0]=Ye[0]),v=1):v=0):v=0}else{if(10>_){xe=7;break}W=ye,v==null||10>_||!Ap(v,b+3,_-3)?v=0:(oe=v[b+0]|v[b+1]<<8|v[b+2]<<16,Te=16383&(v[b+7]<<8|v[b+6]),v=16383&(v[b+9]<<8|v[b+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=be.Ja||!Te||!v?v=0:(z&&(z[0]=Te),W&&(W[0]=v),v=1))}if(!v||(z=z[0],ye=ye[0],De&&(re[0]!=z||ve[0]!=ye)))return 3;Y!=null&&(Y[0]=be,Y.offset=b-Y.w,t(4294967286>b-Y.w),t(Y.offset==Y.ha-_));break}return xe==0||xe==7&&De&&Y==null?(H!=null&&(H[0]|=be.na!=null&&0<be.na.length),R!=null&&(R[0]=z),N!=null&&(N[0]=ye),0):xe}function ih(v,b,_){var R=b.width,N=b.height,H=0,z=0,W=R,Y=N;if(b.Da=v!=null&&0<v.Da,b.Da&&(W=v.cd,Y=v.bd,H=v.v,z=v.j,11>_||(H&=-2,z&=-2),0>H||0>z||0>=W||0>=Y||H+W>R||z+Y>N))return 0;if(b.v=H,b.j=z,b.va=H+W,b.o=z+Y,b.U=W,b.T=Y,b.da=v!=null&&0<v.da,b.da){if(!vt(W,Y,_=[v.ib],H=[v.hb]))return 0;b.ib=_[0],b.hb=H[0]}return b.ob=v!=null&&v.ob,b.Kb=v==null||!v.Sd,b.da&&(b.ob=b.ib<3*R/4&&b.hb<3*N/4,b.Kb=0),1}function Np(v){if(v==null)return 2;if(11>v.S){var b=v.f.RGBA;b.fb+=(v.height-1)*b.A,b.A=-b.A}else b=v.f.kb,v=v.height,b.O+=(v-1)*b.fa,b.fa=-b.fa,b.N+=(v-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(v-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(v-1)*b.lb,b.lb=-b.lb);return 0}function jc(v,b,_,R){if(R==null||0>=v||0>=b)return 2;if(_!=null){if(_.Da){var N=_.cd,H=_.bd,z=-2&_.v,W=-2&_.j;if(0>z||0>W||0>=N||0>=H||z+N>v||W+H>b)return 2;v=N,b=H}if(_.da){if(!vt(v,b,N=[_.ib],H=[_.hb]))return 2;v=N[0],b=H[0]}}R.width=v,R.height=b;e:{var Y=R.width,re=R.height;if(v=R.S,0>=Y||0>=re||!(v>=Jg&&13>v))v=2;else{if(0>=R.Rd&&R.sd==null){z=H=N=b=0;var ve=(W=Y*T4[v])*re;if(11>v||(H=(re+1)/2*(b=(Y+1)/2),v==12&&(z=(N=Y)*re)),(re=o(ve+2*H+z))==null){v=1;break e}R.sd=re,11>v?((Y=R.f.RGBA).eb=re,Y.fb=0,Y.A=W,Y.size=ve):((Y=R.f.kb).y=re,Y.O=0,Y.fa=W,Y.Fd=ve,Y.f=re,Y.N=0+ve,Y.Ab=b,Y.Cd=H,Y.ea=re,Y.W=0+ve+H,Y.Db=b,Y.Ed=H,v==12&&(Y.F=re,Y.J=0+ve+2*H),Y.Tc=z,Y.lb=N)}if(b=1,N=R.S,H=R.width,z=R.height,N>=Jg&&13>N)if(11>N)v=R.f.RGBA,b&=(W=Math.abs(v.A))*(z-1)+H<=v.size,b&=W>=H*T4[N],b&=v.eb!=null;else{v=R.f.kb,W=(H+1)/2,ve=(z+1)/2,Y=Math.abs(v.fa),re=Math.abs(v.Ab);var De=Math.abs(v.Db),oe=Math.abs(v.lb),be=oe*(z-1)+H;b&=Y*(z-1)+H<=v.Fd,b&=re*(ve-1)+W<=v.Cd,b=(b&=De*(ve-1)+W<=v.Ed)&Y>=H&re>=W&De>=W,b&=v.y!=null,b&=v.f!=null,b&=v.ea!=null,N==12&&(b&=oe>=H,b&=be<=v.Tc,b&=v.F!=null)}else b=0;v=b?0:2}}return v!=0||_!=null&&_.fd&&(v=Np(R)),v}var Zd=64,qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ko=24,Uc=32,nl=8,Wc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(v){return v},P.Predictor2=function(v,b,_){return b[_+0]},P.Predictor3=function(v,b,_){return b[_+1]},P.Predictor4=function(v,b,_){return b[_-1]},P.Predictor5=function(v,b,_){return dt(dt(v,b[_+1]),b[_+0])},P.Predictor6=function(v,b,_){return dt(v,b[_-1])},P.Predictor7=function(v,b,_){return dt(v,b[_+0])},P.Predictor8=function(v,b,_){return dt(b[_-1],b[_+0])},P.Predictor9=function(v,b,_){return dt(b[_+0],b[_+1])},P.Predictor10=function(v,b,_){return dt(dt(v,b[_-1]),dt(b[_+0],b[_+1]))},P.Predictor11=function(v,b,_){var R=b[_+0];return 0>=Ct(R>>24&255,v>>24&255,(b=b[_-1])>>24&255)+Ct(R>>16&255,v>>16&255,b>>16&255)+Ct(R>>8&255,v>>8&255,b>>8&255)+Ct(255&R,255&v,255&b)?R:v},P.Predictor12=function(v,b,_){var R=b[_+0];return(rn((v>>24&255)+(R>>24&255)-((b=b[_-1])>>24&255))<<24|rn((v>>16&255)+(R>>16&255)-(b>>16&255))<<16|rn((v>>8&255)+(R>>8&255)-(b>>8&255))<<8|rn((255&v)+(255&R)-(255&b)))>>>0},P.Predictor13=function(v,b,_){var R=b[_-1];return(yt((v=dt(v,b[_+0]))>>24&255,R>>24&255)<<24|yt(v>>16&255,R>>16&255)<<16|yt(v>>8&255,R>>8&255)<<8|yt(255&v,255&R))>>>0};var rh=P.PredictorAdd0;P.PredictorAdd1=Cn,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var $c=P.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var nr,Xg=P.ColorIndexInverseTransform,il=P.MapARGB,rl=P.VP8LColorIndexInverseTransformAlpha,qc=P.MapAlpha,Bp=P.VP8LPredictorsAdd=[];Bp.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var Vp,Gp,Kc,rc,Yc,Xd,Zc,Qd,ps,ba,Kn,fi,ir,fr,wa,Hp,oh,Qg,BA,VA,GA,r1,o1,iC,zp,s1,a1,l1,c1=o(511),d1=o(2041),u1=o(225),h1=o(767),p1=0,oc=d1,jp=u1,fs=h1,Mo=c1,Jg=0,em=1,f1=2,Up=3,tm=4,rC=5,g1=6,Us=7,sh=8,Ti=9,oC=10,HA=[2,3,7],zA=[3,3,11],m1=[280,256,256,256,40],jA=[0,1,1,1,0],UA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],WA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$A=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nm=8,y=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],E=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],k=null,ne=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Re=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rt=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ln=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ii=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Gi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ah=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ol=[],sc=[],Jd=[],tQ=1,E4=2,lh=[],sl=[];Ca("UpsampleRgbLinePair",nc,3),Ca("UpsampleBgrLinePair",Ur,3),Ca("UpsampleRgbaLinePair",pr,4),Ca("UpsampleBgraLinePair",th,4),Ca("UpsampleArgbLinePair",eh,4),Ca("UpsampleRgba4444LinePair",Hc,2),Ca("UpsampleRgb565LinePair",Gc,2);var nQ=P.UpsampleRgbLinePair,iQ=P.UpsampleBgrLinePair,D4=P.UpsampleRgbaLinePair,_4=P.UpsampleBgraLinePair,A4=P.UpsampleArgbLinePair,R4=P.UpsampleRgba4444LinePair,rQ=P.UpsampleRgb565LinePair,v1=16,C1=1<<v1-1,sC=-227,qA=482,F4=6,oQ=(256<<F4)-1,M4=0,sQ=o(256),aQ=o(256),lQ=o(256),cQ=o(256),dQ=o(qA-sC),uQ=o(qA-sC);ic("YuvToRgbRow",nc,3),ic("YuvToBgrRow",Ur,3),ic("YuvToRgbaRow",pr,4),ic("YuvToBgraRow",th,4),ic("YuvToArgbRow",eh,4),ic("YuvToRgba4444Row",Hc,2),ic("YuvToRgb565Row",Gc,2);var I4=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],b1=[0,2,8],hQ=[8,7,6,4,4,2,2,2,1,1,1,1],pQ=1;this.WebPDecodeRGBA=function(v,b,_,R,N){var H=em,z=new ke,W=new wn;z.ba=W,W.S=H,W.width=[W.width],W.height=[W.height];var Y=W.width,re=W.height,ve=new Nt;if(ve==null||v==null)var De=2;else t(ve!=null),De=zc(v,b,_,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(De!=0?Y=0:(Y!=null&&(Y[0]=ve.width[0]),re!=null&&(re[0]=ve.height[0]),Y=1),Y){W.width=W.width[0],W.height=W.height[0],R!=null&&(R[0]=W.width),N!=null&&(N[0]=W.height);e:{if(R=new Pc,(N=new He).data=v,N.w=b,N.ha=_,N.kd=1,b=[0],t(N!=null),((v=zc(N.data,N.w,N.ha,null,null,null,b,null,N))==0||v==7)&&b[0]&&(v=4),(b=v)==0){if(t(z!=null),R.data=N.data,R.w=N.w+N.offset,R.ha=N.ha-N.offset,R.put=kt,R.ac=Vs,R.bc=Ni,R.ma=z,N.xa){if((v=Wd())==null){z=1;break e}if((function(oe,be){var ye=[0],Te=[0],xe=[0];t:for(;;){if(oe==null)return 0;if(be==null)return oe.a=2,0;if(oe.l=be,oe.a=0,se(oe.m,be.data,be.w,be.ha),!zr(oe.m,ye,Te,xe)){oe.a=3;break t}if(oe.xb=E4,be.width=ye[0],be.height=Te[0],!Xa(ye[0],Te[0],1,oe,null))break t;return 1}return t(oe.a!=0),0})(v,R)){if(R=(b=jc(R.width,R.height,z.Oa,z.ba))==0){t:{R=v;n:for(;;){if(R==null){R=0;break t}if(t(R.s.yc!=null),t(R.s.Ya!=null),t(0<R.s.Wb),t((_=R.l)!=null),t((N=_.ma)!=null),R.xb!=0){if(R.ca=N.ba,R.tb=N.tb,t(R.ca!=null),!ih(N.Oa,_,Up)){R.a=2;break n}if(!Ul(R,_.width)||_.da)break n;if((_.da||Vt(R.ca.S))&&js(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&js()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!J(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!ma(R,R.V,R.Ba,R.c,R.i,_.o,Tc))break n;N.Dc=R.Ma,R=1;break t}t(R.a!=0),R=0}R=!R}R&&(b=v.a)}else b=v.a}else{if((v=new jg)==null){z=1;break e}if(v.Fa=N.na,v.P=N.P,v.qc=N.Sa,va(v,R)){if((b=jc(R.width,R.height,z.Oa,z.ba))==0){if(v.Aa=0,_=z.Oa,t((N=v)!=null),_!=null){if(0<(Y=0>(Y=_.Md)?0:100<Y?255:255*Y/100)){for(re=ve=0;4>re;++re)12>(De=N.pb[re]).lc&&(De.ia=Y*hQ[0>De.lc?0:De.lc]>>3),ve|=De.ia;ve&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=_.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}(function(oe,be){if(oe==null)return 0;if(be==null)return tr(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!va(oe,be))return 0;if(t(oe.cb),be.ac==null||be.ac(be)){be.ob&&(oe.L=0);var ye=b1[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=be.v-ye>>4,oe.zb=be.j-ye>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=be.o+15+ye>>4,oe.Hb=be.va+15+ye>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var Te=oe.ed;for(ye=0;4>ye;++ye){var xe;if(oe.Qa.Cb){var Pe=oe.Qa.Lb[ye];oe.Qa.Fb||(Pe+=Te.Tb)}else Pe=Te.Tb;for(xe=0;1>=xe;++xe){var Le=oe.gd[ye][xe],Ye=Pe;if(Te.Pc&&(Ye+=Te.vd[0],xe&&(Ye+=Te.od[0])),0<(Ye=0>Ye?0:63<Ye?63:Ye)){var je=Ye;0<Te.wb&&(je=4<Te.wb?je>>2:je>>1)>9-Te.wb&&(je=9-Te.wb),1>je&&(je=1),Le.dd=je,Le.tc=2*Ye+je,Le.ld=40<=Ye?2:15<=Ye?1:0}else Le.tc=0;Le.La=xe}}}ye=0}else tr(oe,6,"Frame setup failed"),ye=oe.a;if(ye=ye==0){if(ye){oe.$c=0,0<oe.Aa||(oe.Ic=pQ);t:{ye=oe.Ic,Te=4*(je=oe.za);var Ft=32*je,pt=je+1,Sn=0<oe.L?je*(0<oe.Aa?2:1):0,Et=(oe.Aa==2?2:1)*je;if((Le=Te+832+(xe=3*(16*ye+b1[oe.L])/2*Ft)+(Pe=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Le)ye=0;else{if(Le>oe.Vb){if(oe.Vb=0,oe.Ec=o(Le),oe.Fc=0,oe.Ec==null){ye=tr(oe,1,"no memory during frame initialization.");break t}oe.Vb=Le}Le=oe.Ec,Ye=oe.Fc,oe.Ac=Le,oe.Bc=Ye,Ye+=Te,oe.Gd=s(Ft,zg),oe.Hd=0,oe.rb=s(pt+1,Yu),oe.sb=1,oe.wa=Sn?s(Sn,us):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=je),t(!0),oe.oc=Le,oe.pc=Ye,Ye+=832,oe.ya=s(Et,Ep),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=je),oe.R=16*je,oe.B=8*je,je=(Ft=b1[oe.L])*oe.R,Ft=Ft/2*oe.B,oe.sa=Le,oe.ta=Ye+je,oe.qa=oe.sa,oe.ra=oe.ta+16*ye*oe.R+Ft,oe.Ha=oe.qa,oe.Ia=oe.ra+8*ye*oe.B+Ft,oe.$c=0,Ye+=xe,oe.mb=Pe?Le:null,oe.nb=Pe?Ye:null,t(Ye+Pe<=oe.Fc+oe.Vb),Ug(oe),r(oe.Ac,oe.Bc,0,Te),ye=1}}if(ye){if(be.ka=0,be.y=oe.sa,be.O=oe.ta,be.f=oe.qa,be.N=oe.ra,be.ea=oe.Ha,be.Vd=oe.Ia,be.fa=oe.R,be.Rc=oe.B,be.F=null,be.J=0,!p1){for(ye=-255;255>=ye;++ye)c1[255+ye]=0>ye?-ye:ye;for(ye=-1020;1020>=ye;++ye)d1[1020+ye]=-128>ye?-128:127<ye?127:ye;for(ye=-112;112>=ye;++ye)u1[112+ye]=-16>ye?-16:15<ye?15:ye;for(ye=-255;510>=ye;++ye)h1[255+ye]=0>ye?0:255<ye?255:ye;p1=1}Zc=Xu,Qd=$0,ba=el,Kn=Wg,fi=$g,ps=W0,ir=Yg,fr=Oc,wa=O,Hp=ie,oh=ec,Qg=S,BA=fe,VA=we,GA=$o,r1=Lp,o1=Op,iC=Lc,sc[0]=J0,sc[1]=q0,sc[2]=X0,sc[3]=Q0,sc[4]=Kl,sc[5]=eC,sc[6]=Wo,sc[7]=Kg,sc[8]=Mp,sc[9]=qd,ol[0]=Y0,ol[1]=K0,ol[2]=Fp,ol[3]=$l,ol[4]=ql,ol[5]=Qu,ol[6]=Z0,Jd[0]=nC,Jd[1]=qg,Jd[2]=Kd,Jd[3]=tC,Jd[4]=Tp,Jd[5]=Ip,Jd[6]=Zl,ye=1}else ye=0}ye&&(ye=(function(Vn,io){for(Vn.M=0;Vn.M<Vn.Va;++Vn.M){var xn,Dt=Vn.Jc[Vn.M&Vn.Xb],it=Vn.m,Ar=Vn;for(xn=0;xn<Ar.za;++xn){var hn=it,zn=Ar,Hi=zn.Ac,Io=zn.Bc+4*xn,gs=zn.zc,gr=zn.ya[zn.aa+xn];if(zn.Qa.Bb?gr.$b=Me(hn,zn.Pa.jb[0])?2+Me(hn,zn.Pa.jb[2]):Me(hn,zn.Pa.jb[1]):gr.$b=0,zn.kc&&(gr.Ad=Me(hn,zn.Bd)),gr.Za=!Me(hn,145)+0,gr.Za){var Yo=gr.Ob,ms=0;for(zn=0;4>zn;++zn){var ro,jn=gs[0+zn];for(ro=0;4>ro;++ro){jn=ii[Hi[Io+ro]][jn];for(var gi=rt[Me(hn,jn[0])];0<gi;)gi=rt[2*gi+Me(hn,jn[gi])];jn=-gi,Hi[Io+ro]=jn}i(Yo,ms,Hi,Io,4),ms+=4,gs[0+zn]=jn}}else jn=Me(hn,156)?Me(hn,128)?1:3:Me(hn,163)?2:0,gr.Ob[0]=jn,r(Hi,Io,jn,4),r(gs,0,jn,4);gr.Dd=Me(hn,142)?Me(hn,114)?Me(hn,183)?1:3:2:0}if(Ar.m.Ka)return tr(Vn,7,"Premature end-of-partition0 encountered.");for(;Vn.ja<Vn.za;++Vn.ja){if(Ar=Dt,hn=(it=Vn).rb[it.sb-1],Hi=it.rb[it.sb+it.ja],xn=it.ya[it.aa+it.ja],Io=it.kc?xn.Ad:0)hn.la=Hi.la=0,xn.Za||(hn.Na=Hi.Na=0),xn.Hc=0,xn.Gc=0,xn.ia=0;else{var mr,mi;if(hn=Hi,Hi=Ar,Io=it.Pa.Xc,gs=it.ya[it.aa+it.ja],gr=it.pb[gs.$b],zn=gs.ad,Yo=0,ms=it.rb[it.sb-1],jn=ro=0,r(zn,Yo,0,384),gs.Za)var To=0,ac=Io[3];else{gi=o(16);var Rr=hn.Na+ms.Na;if(Rr=k(Hi,Io[1],Rr,gr.Eb,0,gi,0),hn.Na=ms.Na=(0<Rr)+0,1<Rr)Zc(gi,0,zn,Yo);else{var Ws=gi[0]+3>>3;for(gi=0;256>gi;gi+=16)zn[Yo+gi]=Ws}To=1,ac=Io[0]}var Di=15&hn.la,oo=15&ms.la;for(gi=0;4>gi;++gi){var ya=1&oo;for(Ws=mi=0;4>Ws;++Ws)Di=Di>>1|(ya=(Rr=k(Hi,ac,Rr=ya+(1&Di),gr.Sc,To,zn,Yo))>To)<<7,mi=mi<<2|(3<Rr?3:1<Rr?2:zn[Yo+0]!=0),Yo+=16;Di>>=4,oo=oo>>1|ya<<7,ro=(ro<<8|mi)>>>0}for(ac=Di,To=oo>>4,mr=0;4>mr;mr+=2){for(mi=0,Di=hn.la>>4+mr,oo=ms.la>>4+mr,gi=0;2>gi;++gi){for(ya=1&oo,Ws=0;2>Ws;++Ws)Rr=ya+(1&Di),Di=Di>>1|(ya=0<(Rr=k(Hi,Io[2],Rr,gr.Qc,0,zn,Yo)))<<3,mi=mi<<2|(3<Rr?3:1<Rr?2:zn[Yo+0]!=0),Yo+=16;Di>>=2,oo=oo>>1|ya<<5}jn|=mi<<4*mr,ac|=Di<<4<<mr,To|=(240&oo)<<mr}hn.la=ac,ms.la=To,gs.Hc=ro,gs.Gc=jn,gs.ia=43690&jn?0:gr.ia,Io=!(ro|jn)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[xn.$b][xn.Za],it.wa[it.Y+it.ja].La|=!Io),Ar.Ka)return tr(Vn,7,"Premature end-of-file encountered.")}if(Ug(Vn),it=io,Ar=1,xn=(Dt=Vn).D,hn=0<Dt.L&&Dt.M>=Dt.zb&&Dt.M<=Dt.Va,Dt.Aa==0)t:{if(xn.M=Dt.M,xn.uc=hn,hs(Dt,xn),Ar=1,xn=(mi=Dt.D).Nb,hn=(jn=b1[Dt.L])*Dt.R,Hi=jn/2*Dt.B,gi=16*xn*Dt.R,Ws=8*xn*Dt.B,Io=Dt.sa,gs=Dt.ta-hn+gi,gr=Dt.qa,zn=Dt.ra-Hi+Ws,Yo=Dt.Ha,ms=Dt.Ia-Hi+Ws,oo=(Di=mi.M)==0,ro=Di>=Dt.Va-1,Dt.Aa==2&&hs(Dt,mi),mi.uc)for(ya=(Rr=Dt).D.M,t(Rr.D.uc),mi=Rr.yb;mi<Rr.Hb;++mi){To=mi,ac=ya;var vs=(Sa=(Po=Rr).D).Nb;mr=Po.R;var Sa=Sa.wa[Sa.Y+To],xa=Po.sa,$s=Po.ta+16*vs*mr+16*To,Ea=Sa.dd,Pi=Sa.tc;if(Pi!=0)if(t(3<=Pi),Po.L==1)0<To&&r1(xa,$s,mr,Pi+4),Sa.La&&iC(xa,$s,mr,Pi),0<ac&&GA(xa,$s,mr,Pi+4),Sa.La&&o1(xa,$s,mr,Pi);else{var Da=Po.B,lc=Po.qa,Wp=Po.ra+8*vs*Da+8*To,eu=Po.Ha,Po=Po.Ia+8*vs*Da+8*To;vs=Sa.ld,0<To&&(fr(xa,$s,mr,Pi+4,Ea,vs),Hp(lc,Wp,eu,Po,Da,Pi+4,Ea,vs)),Sa.La&&(Qg(xa,$s,mr,Pi,Ea,vs),VA(lc,Wp,eu,Po,Da,Pi,Ea,vs)),0<ac&&(ir(xa,$s,mr,Pi+4,Ea,vs),wa(lc,Wp,eu,Po,Da,Pi+4,Ea,vs)),Sa.La&&(oh(xa,$s,mr,Pi,Ea,vs),BA(lc,Wp,eu,Po,Da,Pi,Ea,vs))}}if(Dt.ia&&alert("todo:DitherRow"),it.put!=null){if(mi=16*Di,Di=16*(Di+1),oo?(it.y=Dt.sa,it.O=Dt.ta+gi,it.f=Dt.qa,it.N=Dt.ra+Ws,it.ea=Dt.Ha,it.W=Dt.Ia+Ws):(mi-=jn,it.y=Io,it.O=gs,it.f=gr,it.N=zn,it.ea=Yo,it.W=ms),ro||(Di-=jn),Di>it.o&&(Di=it.o),it.F=null,it.J=null,Dt.Fa!=null&&0<Dt.Fa.length&&mi<Di&&(it.J=yi(Dt,it,mi,Di-mi),it.F=Dt.mb,it.F==null&&it.F.length==0)){Ar=tr(Dt,3,"Could not decode alpha data.");break t}mi<it.j&&(jn=it.j-mi,mi=it.j,t(!(1&jn)),it.O+=Dt.R*jn,it.N+=Dt.B*(jn>>1),it.W+=Dt.B*(jn>>1),it.F!=null&&(it.J+=it.width*jn)),mi<Di&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=mi-it.j,it.U=it.va-it.v,it.T=Di-mi,Ar=it.put(it))}xn+1!=Dt.Ic||ro||(i(Dt.sa,Dt.ta-hn,Io,gs+16*Dt.R,hn),i(Dt.qa,Dt.ra-Hi,gr,zn+8*Dt.B,Hi),i(Dt.Ha,Dt.Ia-Hi,Yo,ms+8*Dt.B,Hi))}if(!Ar)return tr(Vn,6,"Output aborted.")}return 1})(oe,be)),be.bc!=null&&be.bc(be),ye&=1}return ye?(oe.cb=0,ye):0})(v,R)||(b=v.a)}}else b=v.a}b==0&&z.Oa!=null&&z.Oa.fd&&(b=Np(z.ba))}z=b}H=z!=0?null:11>H?W.f.RGBA.eb:W.f.kb.y}else H=null;return H};var T4=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(P,U){for(var A="",I=0;I<4;I++)A+=String.fromCharCode(P[U++]);return A}function d(P,U){return P[U+0]|P[U+1]<<8}function u(P,U){return(P[U+0]|P[U+1]<<8|P[U+2]<<16)>>>0}function h(P,U){return(P[U+0]|P[U+1]<<8|P[U+2]<<16|P[U+3]<<24)>>>0}new l;var p=[0],f=[0],g=[],C=new l,m=e,w=(function(P,U){var A={},I=0,j=!1,G=0,Q=0;if(A.frames=[],!(function(M,ee){for(var te=0;te<4;te++)if(M[ee+te]!="RIFF".charCodeAt(te))return!0;return!1})(P,U)){for(h(P,U+=4),U+=8;U<P.length;){var le=c(P,U),me=h(P,U+=4);U+=4;var ge=me+(1&me);switch(le){case"VP8 ":case"VP8L":A.frames[I]===void 0&&(A.frames[I]={}),(he=A.frames[I]).src_off=j?Q:U-8,he.src_size=G+me+8,I++,j&&(j=!1,G=0,Q=0);break;case"VP8X":(he=A.header={}).feature_flags=P[U];var se=U+4;he.canvas_width=1+u(P,se),se+=3,he.canvas_height=1+u(P,se),se+=3;break;case"ALPH":j=!0,G=ge+8,Q=U-8;break;case"ANIM":(he=A.header).bgcolor=h(P,U),se=U+4,he.loop_count=d(P,se),se+=2;break;case"ANMF":var de,he;(he=A.frames[I]={}).offset_x=2*u(P,U),U+=3,he.offset_y=2*u(P,U),U+=3,he.width=1+u(P,U),U+=3,he.height=1+u(P,U),U+=3,he.duration=u(P,U),U+=3,de=P[U++],he.dispose=1&de,he.blend=de>>1&1}le!="ANMF"&&(U+=ge)}return A}})(m,0);w.response=m,w.rgbaoutput=!0,w.dataurl=!1;var x=w.header?w.header:null,D=w.frames?w.frames:null;if(x){x.loop_counter=x.loop_count,p=[x.canvas_height],f=[x.canvas_width];for(var F=0;F<D.length&&D[F].blend!=0;F++);}var L=D[0],V=C.WebPDecodeRGBA(m,L.src_off,L.src_size,f,p);L.rgba=V,L.imgwidth=f[0],L.imgheight=p[0];for(var B=0;B<f[0]*p[0]*4;B++)g[B]=V[B];return this.width=f,this.height=p,this.data=g,this}(function(e){var t,n,i,r,o,s,a,l,c,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new s,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new s,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=M;Object.defineProperty(this,"pdf",{get:function(){return ee}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(J){te=!!J}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(J){ue=!!J}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(J){isNaN(J)||(ae=J)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(J){isNaN(J)||(Ce=J)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(J){var nt;typeof J=="number"?nt=[J,J,J,J]:((nt=new Array(4))[0]=J[0],nt[1]=J.length>=2?J[1]:nt[0],nt[2]=J.length>=3?J[2]:nt[0],nt[3]=J.length>=4?J[3]:nt[1]),c.margin=nt}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(J){Ae=J}});var Fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Fe},set:function(J){Fe=J}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(J){Me=J}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(J){J instanceof d&&(c=J)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(J){c.path=J}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(J){Ve=J}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(J){var nt;nt=h(J),this.ctx.fillStyle=nt.style,this.ctx.isFillTransparent=nt.a===0,this.ctx.fillOpacity=nt.a,this.pdf.setFillColor(nt.r,nt.g,nt.b,{a:nt.a}),this.pdf.setTextColor(nt.r,nt.g,nt.b,{a:nt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(J){var nt=h(J);this.ctx.strokeStyle=nt.style,this.ctx.isStrokeTransparent=nt.a===0,this.ctx.strokeOpacity=nt.a,nt.a===0?this.pdf.setDrawColor(255,255,255):(nt.a,this.pdf.setDrawColor(nt.r,nt.g,nt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(J){["butt","round","square"].indexOf(J)!==-1&&(this.ctx.lineCap=J,this.pdf.setLineCap(J))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(J){isNaN(J)||(this.ctx.lineWidth=J,this.pdf.setLineWidth(J))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(J){["bevel","round","miter"].indexOf(J)!==-1&&(this.ctx.lineJoin=J,this.pdf.setLineJoin(J))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(J){isNaN(J)||(this.ctx.miterLimit=J,this.pdf.setMiterLimit(J))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(J){this.ctx.textBaseline=J}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(J){["right","end","center","left","start"].indexOf(J)!==-1&&(this.ctx.textAlign=J)}});var Ze=null,et=null,ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return ot},set:function(J){Ze=null,et=null,ot=J}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(J){var nt;if(this.ctx.font=J,(nt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(J))!==null){var Rt=nt[1];nt[2];var vt=nt[3],Ne=nt[4];nt[5];var ct=nt[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Ue==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var lt=(function(St){var bi,In,ln=[],on=St.trim();if(on==="")return XP;if(on in G9)return[G9[on]];for(;on!=="";){switch(In=null,bi=(on=z9(on)).charAt(0)){case'"':case"'":In=She(on.substring(1),bi);break;default:In=xhe(on)}if(In===null||(ln.push(In[0]),(on=z9(In[1]))!==""&&on.charAt(0)!==","))return XP;on=on.replace(/^,/,"")}return ln})(ct);if(this.fontFaces){var dt=(function(St,bi){var In=St.getFontList(),ln=JSON.stringify(In);if(Ze===null||et!==ln){var on=(function(pi){var Mt=[];return Object.keys(pi).forEach(function(ni){pi[ni].forEach(function(Vt){var Ot=null;switch(Vt){case"bold":Ot={family:ni,weight:"bold"};break;case"italic":Ot={family:ni,style:"italic"};break;case"bolditalic":Ot={family:ni,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:ni}}Ot!==null&&(Ot.ref={name:ni,style:Vt},Mt.push(Ot))})}),Mt})(In);Ze=(function(pi){for(var Mt={},ni=0;ni<pi.length;++ni){var Vt=ZP(pi[ni]),Ot=Vt.family,wi=Vt.stretch,wn=Vt.style,Nt=Vt.weight;Mt[Ot]=Mt[Ot]||{},Mt[Ot][wi]=Mt[Ot][wi]||{},Mt[Ot][wi][wn]=Mt[Ot][wi][wn]||{},Mt[Ot][wi][wn][Nt]=Vt}return Mt})(on.concat(bi)),et=ln}return Ze})(this.pdf,this.fontFaces),rn=lt.map(function(St){return{family:St,stretch:"normal",weight:vt,style:Rt}}),yt=(function(St,bi,In){for(var ln=(In=In||{}).defaultFontFamily||"times",on=Object.assign({},yhe,In.genericFontFamilies||{}),pi=null,Mt=null,ni=0;ni<bi.length;++ni)if(on[(pi=ZP(bi[ni])).family]&&(pi.family=on[pi.family]),St.hasOwnProperty(pi.family)){Mt=St[pi.family];break}if(!(Mt=Mt||St[ln]))throw new Error("Could not find a font-family for the rule '"+H9(pi)+"' and default family '"+ln+"'.");if(Mt=(function(Vt,Ot){if(Ot[Vt])return Ot[Vt];var wi=i3[Vt],wn=wi<=i3.normal?-1:1,Nt=V9(Ot,uz,wi,wn);if(!Nt)throw new Error("Could not find a matching font-stretch value for "+Vt);return Nt})(pi.stretch,Mt),Mt=(function(Vt,Ot){if(Ot[Vt])return Ot[Vt];for(var wi=dz[Vt],wn=0;wn<wi.length;++wn)if(Ot[wi[wn]])return Ot[wi[wn]];throw new Error("Could not find a matching font-style for "+Vt)})(pi.style,Mt),!(Mt=(function(Vt,Ot){if(Ot[Vt])return Ot[Vt];if(Vt===400&&Ot[500])return Ot[500];if(Vt===500&&Ot[400])return Ot[400];var wi=whe[Vt],wn=V9(Ot,hz,wi,Vt<400?-1:1);if(!wn)throw new Error("Could not find a matching font-weight for value "+Vt);return wn})(pi.weight,Mt)))throw new Error("Failed to resolve a font for the rule '"+H9(pi)+"'.");return Mt})(dt,rn);this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var Ct="";(vt==="bold"||parseInt(vt,10)>=700||Rt==="bold")&&(Ct="bold"),Rt==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var Cn="",bn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},st=0;st<lt.length;st++){if(this.pdf.internal.getFont(lt[st],Ct,{noFallback:!0,disableWarning:!0})!==void 0){Cn=lt[st];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(lt[st],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Cn=lt[st],Ct="bold";else if(this.pdf.internal.getFont(lt[st],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Cn=lt[st],Ct="normal";break}}if(Cn===""){for(var gt=0;gt<lt.length;gt++)if(bn[lt[gt]]){Cn=bn[lt[gt]];break}}Cn=Cn===""?"Times":Cn,this.pdf.setFont(Cn,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(J){this.ctx.globalCompositeOperation=J}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(J){this.ctx.globalAlpha=J}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(J){this.ctx.lineDashOffset=J,he.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(J){this.ctx.lineDash=J,he.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(J){this.ctx.ignoreClearRect=!!J}})};u.prototype.setLineDash=function(M){this.lineDash=M},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){D.call(this,"fill",!1)},u.prototype.stroke=function(){D.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(M,ee){if(isNaN(M)||isNaN(ee))throw Ri.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new s(M,ee));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(M,ee)},u.prototype.closePath=function(){var M=new s(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Si(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){M=new s(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(M.x,M.y)},u.prototype.lineTo=function(M,ee){if(isNaN(M)||isNaN(ee))throw Ri.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new s(M,ee));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},u.prototype.quadraticCurveTo=function(M,ee,te,ue){if(isNaN(te)||isNaN(ue)||isNaN(M)||isNaN(ee))throw Ri.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new s(te,ue)),Ce=this.ctx.transform.applyToPoint(new s(M,ee));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new s(ae.x,ae.y)},u.prototype.bezierCurveTo=function(M,ee,te,ue,ae,Ce){if(isNaN(ae)||isNaN(Ce)||isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue))throw Ri.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new s(ae,Ce)),Fe=this.ctx.transform.applyToPoint(new s(M,ee)),Me=this.ctx.transform.applyToPoint(new s(te,ue));this.path.push({type:"bct",x1:Fe.x,y1:Fe.y,x2:Me.x,y2:Me.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new s(Ae.x,Ae.y)},u.prototype.arc=function(M,ee,te,ue,ae,Ce){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue)||isNaN(ae))throw Ri.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new s(M,ee));M=Ae.x,ee=Ae.y;var Fe=this.ctx.transform.applyToPoint(new s(0,te)),Me=this.ctx.transform.applyToPoint(new s(0,0));te=Math.sqrt(Math.pow(Fe.x-Me.x,2)+Math.pow(Fe.y-Me.y,2))}Math.abs(ae-ue)>=2*Math.PI&&(ue=0,ae=2*Math.PI),this.path.push({type:"arc",x:M,y:ee,radius:te,startAngle:ue,endAngle:ae,counterclockwise:Ce})},u.prototype.arcTo=function(M,ee,te,ue,ae){throw new Error("arcTo not implemented.")},u.prototype.rect=function(M,ee,te,ue){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue))throw Ri.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,ee),this.lineTo(M+te,ee),this.lineTo(M+te,ee+ue),this.lineTo(M,ee+ue),this.lineTo(M,ee),this.lineTo(M+te,ee),this.lineTo(M,ee)},u.prototype.fillRect=function(M,ee,te,ue){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue))throw Ri.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,ee,te,ue),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},u.prototype.strokeRect=function(M,ee,te,ue){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue))throw Ri.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(M,ee,te,ue),this.stroke())},u.prototype.clearRect=function(M,ee,te,ue){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue))throw Ri.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,ee,te,ue))},u.prototype.save=function(M){M=typeof M!="boolean"||M;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},u.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var ee,te,ue,ae;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))ee=0,te=0,ue=0,ae=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(Ce!==null)ee=parseInt(Ce[1]),te=parseInt(Ce[2]),ue=parseInt(Ce[3]),ae=1;else if((Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)ee=parseInt(Ce[1]),te=parseInt(Ce[2]),ue=parseInt(Ce[3]),ae=parseFloat(Ce[4]);else{if(ae=1,typeof M=="string"&&M.charAt(0)!=="#"){var Ae=new iz(M);M=Ae.ok?Ae.toHex():"#000000"}M.length===4?(ee=M.substring(1,2),ee+=ee,te=M.substring(2,3),te+=te,ue=M.substring(3,4),ue+=ue):(ee=M.substring(1,3),te=M.substring(3,5),ue=M.substring(5,7)),ee=parseInt(ee,16),te=parseInt(te,16),ue=parseInt(ue,16)}}return{r:ee,g:te,b:ue,a:ae,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},f=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(M,ee,te,ue){if(isNaN(ee)||isNaN(te)||typeof M!="string")throw Ri.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!p.call(this)){var ae=ge(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;I.call(this,{text:M,x:ee,y:te,scale:Ce,angle:ae,align:this.textAlign,maxWidth:ue})}},u.prototype.strokeText=function(M,ee,te,ue){if(isNaN(ee)||isNaN(te)||typeof M!="string")throw Ri.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){ue=isNaN(ue)?void 0:ue;var ae=ge(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;I.call(this,{text:M,x:ee,y:te,scale:Ce,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ue})}},u.prototype.measureText=function(M){if(typeof M!="string")throw Ri.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,te=this.pdf.internal.scaleFactor,ue=ee.internal.getFontSize(),ae=ee.getStringUnitWidth(M)*ue/ee.internal.scaleFactor;return new function(Ce){var Ae=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:ae*=Math.round(96*te/72*1e4)/1e4})},u.prototype.scale=function(M,ee){if(isNaN(M)||isNaN(ee))throw Ri.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new l(M,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},u.prototype.rotate=function(M){if(isNaN(M))throw Ri.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},u.prototype.translate=function(M,ee){if(isNaN(M)||isNaN(ee))throw Ri.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new l(1,0,0,1,M,ee);this.ctx.transform=this.ctx.transform.multiply(te)},u.prototype.transform=function(M,ee,te,ue,ae,Ce){if(isNaN(M)||isNaN(ee)||isNaN(te)||isNaN(ue)||isNaN(ae)||isNaN(Ce))throw Ri.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new l(M,ee,te,ue,ae,Ce);this.ctx.transform=this.ctx.transform.multiply(Ae)},u.prototype.setTransform=function(M,ee,te,ue,ae,Ce){M=isNaN(M)?1:M,ee=isNaN(ee)?0:ee,te=isNaN(te)?0:te,ue=isNaN(ue)?1:ue,ae=isNaN(ae)?0:ae,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new l(M,ee,te,ue,ae,Ce)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(M,ee,te,ue,ae,Ce,Ae,Fe,Me){var Ve=this.pdf.getImageProperties(M),Ze=1,et=1,ot=1,J=1;ue!==void 0&&Fe!==void 0&&(ot=Fe/ue,J=Me/ae,Ze=Ve.width/ue*Fe/ue,et=Ve.height/ae*Me/ae),Ce===void 0&&(Ce=ee,Ae=te,ee=0,te=0),ue!==void 0&&Fe===void 0&&(Fe=ue,Me=ae),ue===void 0&&Fe===void 0&&(Fe=Ve.width,Me=Ve.height);var nt=this.ctx.transform.decompose(),Rt=ge(nt.rotate.shx),vt=new l,Ne=(vt=(vt=(vt=vt.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new a(Ce-ee*ot,Ae-te*J,ue*Ze,ae*et));if(this.autoPaging){for(var ct,Ue=C.call(this,Ne),lt=[],dt=0;dt<Ue.length;dt+=1)lt.indexOf(Ue[dt])===-1&&lt.push(Ue[dt]);x(lt);for(var rn=lt[0],yt=lt[lt.length-1],Ct=rn;Ct<yt+1;Ct++){this.pdf.setPage(Ct);var Cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bn=Ct===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Ct===1?0:st+(Ct-2)*gt;if(this.ctx.clip_path.length!==0){var bi=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ct,this.posX+this.margin[3],-St+bn+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=bi}var In=JSON.parse(JSON.stringify(Ne));In=w([In],this.posX+this.margin[3],-St+bn+this.ctx.prevPageLastElemOffset)[0];var ln=(Ct>rn||Ct<yt)&&g.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Cn,gt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",In.x,In.y,In.w,In.h,null,null,Rt),ln&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",Ne.x,Ne.y,Ne.w,Ne.h,null,null,Rt)};var C=function(M,ee,te){var ue=[];ee=ee||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ue.push(Math.floor((M.y+ae)/te)+1);break;case"arc":ue.push(Math.floor((M.y+ae-M.radius)/te)+1),ue.push(Math.floor((M.y+ae+M.radius)/te)+1);break;case"qct":var Ce=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ue.push(Math.floor((Ce.y+ae)/te)+1),ue.push(Math.floor((Ce.y+Ce.h+ae)/te)+1);break;case"bct":var Ae=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ue.push(Math.floor((Ae.y+ae)/te)+1),ue.push(Math.floor((Ae.y+Ae.h+ae)/te)+1);break;case"rect":ue.push(Math.floor((M.y+ae)/te)+1),ue.push(Math.floor((M.y+M.h+ae)/te)+1)}for(var Fe=0;Fe<ue.length;Fe+=1)for(;this.pdf.internal.getNumberOfPages()<ue[Fe];)m.call(this);return ue},m=function(){var M=this.fillStyle,ee=this.strokeStyle,te=this.font,ue=this.lineCap,ae=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=ee,this.font=te,this.lineCap=ue,this.lineWidth=ae,this.lineJoin=Ce},w=function(M,ee,te){for(var ue=0;ue<M.length;ue++)switch(M[ue].type){case"bct":M[ue].x2+=ee,M[ue].y2+=te;case"qct":M[ue].x1+=ee,M[ue].y1+=te;default:M[ue].x+=ee,M[ue].y+=te}return M},x=function(M){return M.sort(function(ee,te){return ee-te})},D=function(M,ee){var te=this.fillStyle,ue=this.strokeStyle,ae=this.lineCap,Ce=this.lineWidth,Ae=Math.abs(Ce*this.ctx.transform.scaleX),Fe=this.lineJoin;if(this.autoPaging){for(var Me,Ve,Ze=JSON.parse(JSON.stringify(this.path)),et=JSON.parse(JSON.stringify(this.path)),ot=[],J=0;J<et.length;J++)if(et[J].x!==void 0)for(var nt=C.call(this,et[J]),Rt=0;Rt<nt.length;Rt+=1)ot.indexOf(nt[Rt])===-1&&ot.push(nt[Rt]);for(var vt=0;vt<ot.length;vt++)for(;this.pdf.internal.getNumberOfPages()<ot[vt];)m.call(this);x(ot);for(var Ne=ot[0],ct=ot[ot.length-1],Ue=Ne;Ue<ct+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=te,this.strokeStyle=ue,this.lineCap=ae,this.lineWidth=Ae,this.lineJoin=Fe;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=Ue===1?this.posY+this.margin[0]:this.margin[0],rn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Ue===1?0:rn+(Ue-2)*yt;if(this.ctx.clip_path.length!==0){var Cn=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Me,this.posX+this.margin[3],-Ct+dt+this.ctx.prevPageLastElemOffset),F.call(this,M,!0),this.path=Cn}if(Ve=JSON.parse(JSON.stringify(Ze)),this.path=w(Ve,this.posX+this.margin[3],-Ct+dt+this.ctx.prevPageLastElemOffset),ee===!1||Ue===0){var bn=(Ue>Ne||Ue<ct)&&g.call(this);bn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,yt,null).clip().discardPath()),F.call(this,M,ee),bn&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}this.path=Ze}else this.lineWidth=Ae,F.call(this,M,ee),this.lineWidth=Ce},F=function(M,ee){if((M!=="stroke"||ee||!f.call(this))&&(M==="stroke"||ee||!p.call(this))){for(var te,ue,ae=[],Ce=this.path,Ae=0;Ae<Ce.length;Ae++){var Fe=Ce[Ae];switch(Fe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:Fe,deltas:[],abs:[]});break;case"lt":var Me=ae.length;if(Ce[Ae-1]&&!isNaN(Ce[Ae-1].x)&&(te=[Fe.x-Ce[Ae-1].x,Fe.y-Ce[Ae-1].y],Me>0)){for(;Me>=0;Me--)if(ae[Me-1].close!==!0&&ae[Me-1].begin!==!0){ae[Me-1].deltas.push(te),ae[Me-1].abs.push(Fe);break}}break;case"bct":te=[Fe.x1-Ce[Ae-1].x,Fe.y1-Ce[Ae-1].y,Fe.x2-Ce[Ae-1].x,Fe.y2-Ce[Ae-1].y,Fe.x-Ce[Ae-1].x,Fe.y-Ce[Ae-1].y],ae[ae.length-1].deltas.push(te);break;case"qct":var Ve=Ce[Ae-1].x+2/3*(Fe.x1-Ce[Ae-1].x),Ze=Ce[Ae-1].y+2/3*(Fe.y1-Ce[Ae-1].y),et=Fe.x+2/3*(Fe.x1-Fe.x),ot=Fe.y+2/3*(Fe.y1-Fe.y),J=Fe.x,nt=Fe.y;te=[Ve-Ce[Ae-1].x,Ze-Ce[Ae-1].y,et-Ce[Ae-1].x,ot-Ce[Ae-1].y,J-Ce[Ae-1].x,nt-Ce[Ae-1].y],ae[ae.length-1].deltas.push(te);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(Fe)}}ue=ee?null:M==="stroke"?"stroke":"fill";for(var Rt=!1,vt=0;vt<ae.length;vt++)if(ae[vt].arc)for(var Ne=ae[vt].abs,ct=0;ct<Ne.length;ct++){var Ue=Ne[ct];Ue.type==="arc"?B.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,ee,!Rt):j.call(this,Ue.x,Ue.y),Rt=!0}else if(ae[vt].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(ae[vt].begin!==!0){var lt=ae[vt].start.x,dt=ae[vt].start.y;G.call(this,ae[vt].deltas,lt,dt),Rt=!0}ue&&P.call(this,ue),ee&&U.call(this)}},L=function(M){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-te;case"top":return M+ee-te;case"hanging":return M+ee-2*te;case"middle":return M+ee/2-te;default:return M}},V=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(ee,te){this.colorStops.push([ee,te])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(M,ee,te,ue,ae,Ce,Ae,Fe,Me){for(var Ve=le.call(this,te,ue,ae,Ce),Ze=0;Ze<Ve.length;Ze++){var et=Ve[Ze];Ze===0&&(Me?A.call(this,et.x1+M,et.y1+ee):j.call(this,et.x1+M,et.y1+ee)),Q.call(this,M,ee,et.x2,et.y2,et.x3,et.y3,et.x4,et.y4)}Fe?U.call(this):P.call(this,Ae)},P=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(M,ee){this.pdf.internal.out(n(M)+" "+i(ee)+" m")},I=function(M){var ee;switch(M.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var te,ue,ae,Ce=this.pdf.getTextDimensions(M.text),Ae=L.call(this,M.y),Fe=V.call(this,Ae)-Ce.h,Me=this.ctx.transform.applyToPoint(new s(M.x,Ae));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),Ze=new l;Ze=(Ze=(Ze=Ze.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var et=this.ctx.transform.applyToRectangle(new a(M.x,Ae,Ce.w,Ce.h)),ot=Ze.applyToRectangle(new a(M.x,Fe,Ce.w,Ce.h)),J=C.call(this,ot),nt=[],Rt=0;Rt<J.length;Rt+=1)nt.indexOf(J[Rt])===-1&&nt.push(J[Rt]);x(nt);for(var vt=nt[0],Ne=nt[nt.length-1],ct=vt;ct<Ne+1;ct++){this.pdf.setPage(ct);var Ue=ct===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[2],rn=dt-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],Ct=yt-this.margin[3],Cn=ct===1?0:lt+(ct-2)*rn;if(this.ctx.clip_path.length!==0){var bn=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(te,this.posX+this.margin[3],-1*Cn+Ue),F.call(this,"fill",!0),this.path=bn}var st=w([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Cn+Ue+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*M.scale),ae=this.lineWidth,this.lineWidth=ae*M.scale);var gt=this.autoPaging!=="text";if(gt||st.y+st.h<=dt){if(gt||st.y>=Ue&&st.x<=yt){var St=gt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||yt-st.x)[0],bi=w([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Cn+Ue+this.ctx.prevPageLastElemOffset)[0],In=gt&&(ct>vt||ct<Ne)&&g.call(this);In&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,rn,null).clip().discardPath()),this.pdf.text(St,bi.x,bi.y,{angle:M.angle,align:ee,renderingMode:M.renderingMode}),In&&this.pdf.restoreGraphicsState()}}else st.y<dt&&(this.ctx.prevPageLastElemOffset+=dt-st.y);M.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=ae)}}else M.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*M.scale),ae=this.lineWidth,this.lineWidth=ae*M.scale),this.pdf.text(M.text,Me.x+this.posX,Me.y+this.posY,{angle:M.angle,align:ee,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=ae)},j=function(M,ee,te,ue){te=te||0,ue=ue||0,this.pdf.internal.out(n(M+te)+" "+i(ee+ue)+" l")},G=function(M,ee,te){return this.pdf.lines(M,ee,te,null,null)},Q=function(M,ee,te,ue,ae,Ce,Ae,Fe){this.pdf.internal.out([t(r(te+M)),t(o(ue+ee)),t(r(ae+M)),t(o(Ce+ee)),t(r(Ae+M)),t(o(Fe+ee)),"c"].join(" "))},le=function(M,ee,te,ue){for(var ae=2*Math.PI,Ce=Math.PI/2;ee>te;)ee-=ae;var Ae=Math.abs(te-ee);Ae<ae&&ue&&(Ae=ae-Ae);for(var Fe=[],Me=ue?-1:1,Ve=ee;Ae>1e-5;){var Ze=Ve+Me*Math.min(Ae,Ce);Fe.push(me.call(this,M,Ve,Ze)),Ae-=Math.abs(Ze-Ve),Ve=Ze}return Fe},me=function(M,ee,te){var ue=(te-ee)/2,ae=M*Math.cos(ue),Ce=M*Math.sin(ue),Ae=ae,Fe=-Ce,Me=Ae*Ae+Fe*Fe,Ve=Me+Ae*ae+Fe*Ce,Ze=4/3*(Math.sqrt(2*Me*Ve)-Ve)/(Ae*Ce-Fe*ae),et=Ae-Ze*Fe,ot=Fe+Ze*Ae,J=et,nt=-ot,Rt=ue+ee,vt=Math.cos(Rt),Ne=Math.sin(Rt);return{x1:M*Math.cos(ee),y1:M*Math.sin(ee),x2:et*vt-ot*Ne,y2:et*Ne+ot*vt,x3:J*vt-nt*Ne,y3:J*Ne+nt*vt,x4:M*Math.cos(te),y4:M*Math.sin(te)}},ge=function(M){return 180*M/Math.PI},se=function(M,ee,te,ue,ae,Ce){var Ae=M+.5*(te-M),Fe=ee+.5*(ue-ee),Me=ae+.5*(te-ae),Ve=Ce+.5*(ue-Ce),Ze=Math.min(M,ae,Ae,Me),et=Math.max(M,ae,Ae,Me),ot=Math.min(ee,Ce,Fe,Ve),J=Math.max(ee,Ce,Fe,Ve);return new a(Ze,ot,et-Ze,J-ot)},de=function(M,ee,te,ue,ae,Ce,Ae,Fe){var Me,Ve,Ze,et,ot,J,nt,Rt,vt,Ne,ct,Ue,lt,dt,rn=te-M,yt=ue-ee,Ct=ae-te,Cn=Ce-ue,bn=Ae-ae,st=Fe-Ce;for(Ve=0;Ve<41;Ve++)vt=(nt=(Ze=M+(Me=Ve/40)*rn)+Me*((ot=te+Me*Ct)-Ze))+Me*(ot+Me*(ae+Me*bn-ot)-nt),Ne=(Rt=(et=ee+Me*yt)+Me*((J=ue+Me*Cn)-et))+Me*(J+Me*(Ce+Me*st-J)-Rt),Ve==0?(ct=vt,Ue=Ne,lt=vt,dt=Ne):(ct=Math.min(ct,vt),Ue=Math.min(Ue,Ne),lt=Math.max(lt,vt),dt=Math.max(dt,Ne));return new a(Math.round(ct),Math.round(Ue),Math.round(lt-ct),Math.round(dt-Ue))},he=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,ee,te=(M=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:ee}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(_t.API),(function(e){var t=function(s){var a,l,c,d,u,h,p,f,g,C;for(/[^\x00-\xFF]/.test(s),l=[],c=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>c;c+=4)(u=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(C=u%85))/85)-(g=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)%85,l.push(h+33,p+33,f+33,g+33,C+33)):l.push(122);return(function(m,w){for(var x=w;x>0;x--)m.pop()})(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,d,u,h=String,p="length",f=255,g="charCodeAt",C="slice",m="replace";for(s[C](-2),s=s[C](0,-2)[m](/\s/g,"")[m]("z","!!!!!"),c=[],d=0,u=(s+=a="uuuuu"[C](s[p]%5||5))[p];u>d;d+=5)l=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return(function(w,x){for(var D=x;D>0;D--)w.pop()})(c,a[p]),h.fromCharCode.apply(h,c)},i=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},o=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return(a=$2(a)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=i(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(_t.API),(function(e){e.loadFile=function(t,n,i){return(function(r,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,d){var u=new XMLHttpRequest,h=0,p=function(f){var g=f.length,C=[],m=String.fromCharCode;for(h=0;h<g;h+=1)C.push(m(255&f.charCodeAt(h)));return C.join("")};if(u.open("GET",l,!c),u.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(u.onload=function(){u.status===200?d(p(this.responseText)):d(void 0)}),u.send(null),c&&u.status===200)return p(u.responseText)})(r,o,s)}catch{}return a})(t,n,i)},e.loadImageFile=e.loadFile})(_t.API),(function(e){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):import("./chunk-54RKOVA4.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):import("./chunk-MO74H3LF.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var l=Si(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(a,l){var c=document.createElement(a);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},o=function a(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),u=l.firstChild;u;u=u.nextSibling)c!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||d.appendChild(a(u,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),c);return(d=d.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||(function(c){switch(i(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),l){case"string":return this.then(n).then(function(c){return this.set({src:r("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var f=d[p],g=f.src.find(function(C){return C.format==="truetype"});g&&c.addFont(g.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(a=a||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,d){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,d){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var d=this;a&&(a=a.bind(d)),l&&(l=l.bind(d));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),h=c.call(u,a,l);return s.convert(h,d.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,_t.getPageSize=function(a,l,c){if(Si(a)==="object"){var d=a;a=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var f,g=0,C=0;if(p.hasOwnProperty(h))g=p[h][1]/u,C=p[h][0]/u;else try{g=c[1],C=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",C>g&&(f=C,C=g,g=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",g>C&&(f=C,C=g,g=f)}return{width:C,height:g,unit:l,k:u,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(ZP):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}})(_t.API),_t.API.addJS=function(e){return U9=e,this.internal.events.subscribe("postPutResources",function(){mE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(mE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),j9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+U9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){mE!==void 0&&j9!==void 0&&this.internal.out("/Names <</JavaScript "+mE+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),o=0;o<r.length;o++){var s=r[o],a=i.exec(s);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(o=0;o<c;o++){var u=n.internal.newObject();d.push(u);var h=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<d.length;o++)n.internal.write("(page_"+(o+1)+")"+d[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,o){var s={title:r,options:o,children:[]};return i==null&&(i=this.root),i.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var s=i.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var o=0;o<r.children.length;o++)i.count++,this.count_r(i,r.children[o]);return i.count}}])})(_t.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,r,o,s,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=(function(u){for(var h,p=256*u.charCodeAt(4)+u.charCodeAt(5),f=u.length,g={width:0,height:0,numcomponents:1},C=4;C<f;C+=2){if(C+=p,t.indexOf(u.charCodeAt(C+1))!==-1){h=256*u.charCodeAt(C+5)+u.charCodeAt(C+6),g={width:256*u.charCodeAt(C+7)+u.charCodeAt(C+8),height:h,numcomponents:u.charCodeAt(C+9)};break}p=256*u.charCodeAt(C+2)+u.charCodeAt(C+3)}return g})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:r}}return d}})(_t.API),_t.API.processPNG=function(e,t,n,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var r,o=T9(e,{checkCrc:!0}),s=o.width,a=o.height,l=o.channels,c=o.palette,d=o.depth;r=c&&l===1?(function(B){for(var P=B.width,U=B.height,A=B.data,I=B.palette,j=B.depth,G=!1,Q=[],le=[],me=void 0,ge=!1,se=0,de=0;de<I.length;de++){var he=lP(I[de],4),M=he[0],ee=he[1],te=he[2],ue=he[3];Q.push(M,ee,te),ue!=null&&(ue===0?(se++,le.length<1&&le.push(de)):ue<255&&(ge=!0))}if(ge||se>1){G=!0,le=void 0;var ae=P*U;me=new Uint8Array(ae);for(var Ce=new DataView(A.buffer),Ae=0;Ae<ae;Ae++){var Fe=QP(Ce,Ae,j),Me=lP(I[Fe],4)[3];me[Ae]=Me}}else se===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:A,alphaBytes:me,needSMask:G,palette:Q,mask:le}})(o):l===2||l===4?(function(B){for(var P=B.data,U=B.width,A=B.height,I=B.channels,j=B.depth,G=I===2?"DeviceGray":"DeviceRGB",Q=I-1,le=U*A,me=Q,ge=le*me,se=1*le,de=Math.ceil(ge*j/8),he=Math.ceil(se*j/8),M=new Uint8Array(de),ee=new Uint8Array(he),te=new DataView(P.buffer),ue=new DataView(M.buffer),ae=new DataView(ee.buffer),Ce=!1,Ae=0;Ae<le;Ae++){for(var Fe=Ae*I,Me=0;Me<me;Me++)J9(ue,QP(te,Fe+Me,j),Ae*me+Me,j);var Ve=QP(te,Fe+me,j);Ve<(1<<j)-1&&(Ce=!0),J9(ae,Ve,1*Ae,j)}return{colorSpace:G,colorsPerPixel:Q,sMaskBitsPerComponent:Ce?j:void 0,colorBytes:M,alphaBytes:ee,needSMask:Ce}})(o):(function(B){var P=B.data,U=B.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:P instanceof Uint16Array?(function(A){for(var I=A.length,j=new Uint8Array(2*I),G=new DataView(j.buffer,j.byteOffset,j.byteLength),Q=0;Q<I;Q++)G.setUint16(2*Q,A[Q],!1);return j})(P):P,needSMask:!1}})(o);var u,h,p,f=r,g=f.colorSpace,C=f.colorsPerPixel,m=f.sMaskBitsPerComponent,w=f.colorBytes,x=f.alphaBytes,D=f.needSMask,F=f.palette,L=f.mask,V=null;return i!==_t.API.image_compression.NONE&&typeof $2=="function"?(V=(function(B){var P;switch(B){case _t.API.image_compression.FAST:P=11;break;case _t.API.image_compression.MEDIUM:P=13;break;case _t.API.image_compression.SLOW:P=14;break;default:P=12}return P})(i),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(V," /Colors ").concat(C," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=K9(w,Math.ceil(s*C*d/8),C,d,i),D&&(p=K9(x,Math.ceil(s*m/8),1,m,i))):(u=void 0,h=void 0,e=w,D&&(p=x)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:e,index:t,filter:u,decodeParameters:h,transparency:L,palette:F,sMask:p,predictor:V,width:s,height:a,bitsPerComponent:d,sMaskBitsPerComponent:m,colorSpace:g}}},(function(e){e.processGIF89A=function(t,n,i,r){var o=new Ahe(t),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},d=new JP(100).encode(c,100);return e.processJPEG.call(this,d,n,i,r)},e.processGIF87A=e.processGIF89A})(_t.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ri.log("bit decode error:"+n)}},xc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}n!==0&&(this.pos+=4-n)}},xc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},xc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,d=i*this.width*4+4*r;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=c}this.pos+=e}},xc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/t*255|0,d=r*this.width*4+4*o;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=e}},xc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=s}},xc.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,n,i,r){var o=new xc(t,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new JP(100).encode(l,100);return e.processJPEG.call(this,c,n,i,r)}})(_t.API),tz.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,n,i,r){var o=new tz(t),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new JP(100).encode(l,100);return e.processJPEG.call(this,c,n,i,r)}})(_t.API),_t.API.processRGBA=function(e,t,n){for(var i=e.data,r=i.length,o=new Uint8Array(r/4*3),s=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var d=i[c],u=i[c+1],h=i[c+2],p=i[c+3];o[a++]=d,o[a++]=u,o[a++]=h,s[l++]=p}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},_t.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fv=_t.API,vE=Fv.getCharWidthsArray=function(e,t){var n,i,r=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=t.kerning?t.kerning:r.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=t.doKerning!==!1,h=0,p=e.length,f=0,g=a[0]||l,C=[];for(n=0;n<p;n++)i=e.charCodeAt(n),typeof r.metadata.widthOfString=="function"?C.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+s*(1e3/o)||0)/1e3):(h=u&&Si(c[i])==="object"&&!isNaN(parseInt(c[i][f],10))?c[i][f]/d:0,C.push((a[i]||g)/l+h)),f=i;return C},W9=Fv.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return Fv.processArabic&&(e=Fv.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,r)/n:vE.apply(this,arguments).reduce(function(o,s){return o+s},0)},$9=function(e,t,n,i){for(var r=[],o=0,s=e.length,a=0;o!==s&&a+t[o]<n;)a+=t[o],o++;r.push(e.slice(0,o));var l=o;for(a=0;o!==s;)a+t[o]>i&&(r.push(e.slice(l,o)),a=0,l=o),a+=t[o],o++;return l!==o&&r.push(e.slice(l,o)),r},q9=function(e,t,n){n||(n={});var i,r,o,s,a,l,c,d=[],u=[d],h=n.textIndent||0,p=0,f=0,g=e.split(" "),C=vE.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var m=Array(l).join(" "),w=[];g.map(function(D){(D=D.split(/\s*\n/)).length>1?w=w.concat(D.map(function(F,L){return(L&&F.length?`
`:"")+F})):w.push(D[0])}),g=w,l=W9.apply(this,[m,n])}for(o=0,s=g.length;o<s;o++){var x=0;if(i=g[o],l&&i[0]==`
`&&(i=i.substr(1),x=1),h+p+(f=(r=vE.apply(this,[i,n])).reduce(function(D,F){return D+F},0))>t||x){if(f>t){for(a=$9.apply(this,[i,r,t-(h+p),t]),d.push(a.shift()),d=[a.pop()];a.length;)u.push([a.shift()]);f=r.slice(i.length-(d[0]?d[0].length:0)).reduce(function(D,F){return D+F},0)}else d=[i];u.push(d),h=f+l,p=C}else d.push(i),h+=p+f,p=C}return c=l?function(D,F){return(F?m:"")+D.join(" ")}:function(D){return D.join(" ")},u.map(c)},Fv.splitTextToSize=function(e,t,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var u=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return u.metadata[h]?{widths:u.metadata[h].widths||{0:1},kerning:u.metadata[h].kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(q9.apply(this,[i[a],s,o]));return c},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",i={},r={},o=0;o<16;o++)i[n[o]]=t[o],r[t[o]]=n[o];var s=function(h){return"0x"+parseInt(h,10).toString(16)},a=e.__fontmetrics__.compress=function(h){var p,f,g,C,m=["{"];for(var w in h){if(p=h[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=s(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof p=="number")p<0?(g=s(p).slice(3),C="-"):(g=s(p).slice(2),C=""),g=C+g.slice(0,-1)+r[g.slice(-1)];else{if(Si(p)!=="object")throw new Error("Don't know what to do with value type "+Si(p)+".");g=a(p)}m.push(f+g)}return m.push("}"),m.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,g,C,m={},w=1,x=m,D=[],F="",L="",V=h.length-1,B=1;B<V;B+=1)(C=h[B])=="'"?p?(g=p.join(""),p=void 0):p=[]:p?p.push(C):C=="{"?(D.push([x,g]),x={},g=void 0):C=="}"?((f=D.pop())[0][f[1]]=x,g=void 0,x=f[0]):C=="-"?w=-1:g===void 0?i.hasOwnProperty(C)?(F+=i[C],g=parseInt(F,16)*w,w=1,F=""):F+=C:i.hasOwnProperty(C)?(L+=i[C],x[g]=parseInt(L,16)*w,w=1,g=void 0,L=""):L+=C;return m},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var p=h.font,f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var g=d.Unicode[p.postScriptName];g&&(p.metadata.Unicode.encoding=g,p.encoding=g.codePages[0])}])})(_t.API),(function(e){var t=function(n){for(var i=n.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=n.charCodeAt(o);return r};e.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(CE(a)),s.metadata=e.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(r,i)}}])})(_t),_t.API.addSvgAsImage=function(e,t,n,i,r,o,s,a){if(isNaN(t)||isNaN(n))throw Ri.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw Ri.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=r;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(tn.canvg?Promise.resolve(tn.canvg):import("./chunk-742H4REC.js")).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(c,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){u.addImage(l.toDataURL("image/jpeg",1),t,n,i,r,s,a)})},_t.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,n);return this},_t.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,d=0,u=0;function h(f,g){var C,m=!1;for(C=0;C<f.length;C+=1)f[C]===g&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=a.length;for(u=0;u<p;u+=1)n[a[u]].value=n[a[u]].defaultValue,n[a[u]].explicitSet=!1}if(Si(e)==="object"){for(r in e)if(o=e[r],h(a,r)&&o!==void 0){if(n[r].type==="boolean"&&typeof o=="boolean")n[r].value=o;else if(n[r].type==="name"&&h(n[r].valueSet,o))n[r].value=o;else if(n[r].type==="integer"&&Number.isInteger(o))n[r].value=o;else if(n[r].type==="array"){for(c=0;c<o.length;c+=1)if(i=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(d=0;d<o[c].length;d+=1)typeof o[c][d]!="number"&&(i=!1);i===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var f,g=[];for(f in n)n[f].explicitSet===!0&&(n[f].type==="name"?g.push("/"+f+" /"+n[f].value):g.push("/"+f+" "+n[f].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}})(_t.API),(function(e){var t=e.API,n=t.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],u=0,h=o.length;u<h;++u){if(a=s.metadata.characterToGlyph(o.charCodeAt(u)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(u),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},i=function(o){var s,a,l,c,d,u,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],u=0,h=(a=Object.keys(o).sort(function(p,f){return p-f})).length;u<h;u++)s=a[u],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,d=s.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var g=c();d({data:p,addLength1:!0,objectId:g}),l("endobj");var C=c();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var m=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Iv(a.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var w=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Iv(a.fontName)),l("/FontDescriptor "+m+" 0 R"),l("/W "+e.API.PDFObject.convert(u)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+Iv(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,d=s.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,h="",p=0;p<u.length;p++)h+=String.fromCharCode(u[p]);var f=c();d({data:h,addLength1:!0,objectId:f}),l("endobj");var g=c();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var C=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+f+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Iv(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var m=0;m<a.metadata.hmtx.widths.length;m++)a.metadata.hmtx.widths[m]=parseInt(a.metadata.hmtx.widths[m]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Iv(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var r=function(o){var s,a=o.text||"",l=o.x,c=o.y,d=o.options||{},u=o.mutex||{},h=u.pdfEscape,p=u.activeFontKey,f=u.fonts,g=p,C="",m=0,w="",x=f[g].encoding;if(f[g].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:u};for(w=a,g=p,Array.isArray(a)&&(w=a[0]),m=0;m<w.length;m+=1)f[g].metadata.hasOwnProperty("cmap")&&(s=f[g].metadata.cmap.unicode.codeMap[w[m].charCodeAt(0)]),s||w[m].charCodeAt(0)<256&&f[g].metadata.hasOwnProperty("Unicode")?C+=w[m]:C+="";var D="";return parseInt(g.slice(1))<14||x==="WinAnsiEncoding"?D=h(C,g).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(D=n(C,f[g])),u.isHex=!0,{text:D,x:l,y:c,options:d,mutex:u}};t.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([r(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(r(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=r(Object.assign({},l,{text:s})).text}])})(_t),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(_t.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var r,o,s,a,l,c,d,u=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],f={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,x=0;this.__bidiEngine__={};var D=function(A){var I=A.charCodeAt(),j=I>>8,G=g[j];return G!==void 0?u[256*G+(255&I)]:j===252||j===253?"AL":m.test(j)?"L":j===8?"R":"N"},F=function(A){for(var I,j=0;j<A.length;j++){if((I=D(A.charAt(j)))==="L")return!1;if(I==="R")return!0}return!1},L=function(A,I,j,G){var Q,le,me,ge,se=I[G];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(se="AN");break;case"AL":w=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":G<1||G+1>=I.length||(Q=j[G-1])!=="EN"&&Q!=="AN"||(le=I[G+1])!=="EN"&&le!=="AN"?se="N":w&&(le="AN"),se=le===Q?le:"N";break;case"ES":se=(Q=G>0?j[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&j[G-1]==="EN"){se="EN";break}if(w){se="N";break}for(me=G+1,ge=I.length;me<ge&&I[me]==="ET";)me++;se=me<ge&&I[me]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(ge=I.length,me=G+1;me<ge&&I[me]==="NSM";)me++;if(me<ge){var de=A[G],he=de>=1425&&de<=2303||de===64286;if(Q=I[me],he&&(Q==="R"||Q==="AL")){se="R";break}}}se=G<1||(Q=I[G-1])==="B"?"N":j[G-1];break;case"B":w=!1,r=!0,se=x;break;case"S":o=!0,se="N"}return se},V=function(A,I,j){var G=A.split("");return j&&B(G,j,{hiLevel:x}),G.reverse(),I&&I.reverse(),G.join("")},B=function(A,I,j){var G,Q,le,me,ge,se=-1,de=A.length,he=0,M=[],ee=x?p:h,te=[];for(w=!1,r=!1,o=!1,Q=0;Q<de;Q++)te[Q]=D(A[Q]);for(le=0;le<de;le++){if(ge=he,M[le]=L(A,te,M,le),G=240&(he=ee[ge][f[M[le]]]),he&=15,I[le]=me=ee[he][5],G>0)if(G===16){for(Q=se;Q<le;Q++)I[Q]=1;se=-1}else se=-1;if(ee[he][6])se===-1&&(se=le);else if(se>-1){for(Q=se;Q<le;Q++)I[Q]=me;se=-1}te[le]==="B"&&(I[le]=0),j.hiLevel|=me}o&&(function(ue,ae,Ce){for(var Ae=0;Ae<Ce;Ae++)if(ue[Ae]==="S"){ae[Ae]=x;for(var Fe=Ae-1;Fe>=0&&ue[Fe]==="WS";Fe--)ae[Fe]=x}})(te,I,de)},P=function(A,I,j,G,Q){if(!(Q.hiLevel<A)){if(A===1&&x===1&&!r)return I.reverse(),void(j&&j.reverse());for(var le,me,ge,se,de=I.length,he=0;he<de;){if(G[he]>=A){for(ge=he+1;ge<de&&G[ge]>=A;)ge++;for(se=he,me=ge-1;se<me;se++,me--)le=I[se],I[se]=I[me],I[me]=le,j&&(le=j[se],j[se]=j[me],j[me]=le);he=ge}he++}}},U=function(A,I,j){var G=A.split(""),Q={hiLevel:x};return j||(j=[]),B(G,j,Q),(function(le,me,ge){if(ge.hiLevel!==0&&d)for(var se,de=0;de<le.length;de++)me[de]===1&&(se=C.indexOf(le[de]))>=0&&(le[de]=C[se+1])})(G,j,Q),P(2,G,I,j,Q),P(1,G,I,j,Q),G.join("")};return this.__bidiEngine__.doBidiReorder=function(A,I,j){if((function(Q,le){if(le)for(var me=0;me<Q.length;me++)le[me]=me;a===void 0&&(a=F(Q)),c===void 0&&(c=F(Q))})(A,I),s||!l||c)if(s&&l&&a^c)x=a?1:0,A=V(A,I,j);else if(!s&&l&&c)x=a?1:0,A=U(A,I,j),A=V(A,I);else if(!s||a||l||c){if(s&&!l&&a^c)A=V(A,I),a?(x=0,A=U(A,I,j)):(x=1,A=U(A,I,j),A=V(A,I));else if(s&&a&&!l&&c)x=1,A=U(A,I,j),A=V(A,I);else if(!s&&!l&&a^c){var G=d;a?(x=1,A=U(A,I,j),x=0,d=!1,A=U(A,I,j),d=G):(x=0,A=U(A,I,j),A=V(A,I),x=1,d=!1,A=U(A,I,j),d=G,A=V(A,I))}}else x=0,A=U(A,I,j);else x=a?1:0,A=U(A,I,j);return A},this.__bidiEngine__.setOptions=function(A){A&&(s=A.isInputVisual,l=A.isOutputVisual,a=A.isInputRtl,c=A.isOutputRtl,d=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var o=i.options||{};i.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(s=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?s.push([n.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):s.push([n.doBidiReorder(r[a])]);i.text=s}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])})(_t),_t.API.TTFFont=(function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Hh(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new zhe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Rhe(this.contents),this.head=new Mhe(this),this.name=new Lhe(this),this.cmap=new fz(this),this.toUnicode={},this.hhea=new Ihe(this),this.maxp=new Ohe(this),this.hmtx=new Nhe(this),this.post=new Phe(this),this.os2=new The(this),this.loca=new Hhe(this),this.glyf=new Bhe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)t=l[s],c.push(Math.round(t*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var r,o,s,a;for(s=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)r=t.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return s*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e})();var Dc,Hh=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,r;for(r=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(t.charCodeAt(n)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,r,o,s,a,l;return t=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*r+16777216*o+65536*s+256*a+l},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],o.push(this.writeByte(n));return o},e})(),Rhe=(function(){var e;function t(n){var i,r,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,r,o,s,a,l,c,d,u,h,p,f,g;for(g in p=Object.keys(n).length,l=Math.log(2),u=16*Math.floor(Math.log(p)/l),s=Math.floor(u/l),d=16*p-u,(r=new Hh).writeInt(this.scalarType),r.writeShort(p),r.writeShort(u),r.writeShort(s),r.writeShort(d),o=16*p,c=r.pos+o,a=null,f=[],n)for(h=n[g],r.writeString(g),r.writeInt(e(h)),r.writeInt(c),r.writeInt(h.length),f=f.concat(h),g==="head"&&(a=c),c+=h.length;c%4;)f.push(0),c++;return r.write(f),i=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(i),r.data},e=function(n){var i,r,o,s;for(n=gz.call(n);n.length%4;)n.push(0);for(o=new Hh(n),r=0,i=0,s=n.length;i<s;i=i+=4)r+=o.readUInt32();return 4294967295&r},t})(),Fhe={}.hasOwnProperty,bd=function(e,t){for(var n in t)Fhe.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Dc=(function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Mhe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Hh).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e})(),nz=(function(){function e(t,n){var i,r,o,s,a,l,c,d,u,h,p,f,g,C,m,w,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,o=(function(){var D,F;for(F=[],l=D=0;0<=h?D<h:D>h;l=0<=h?++D:--D)F.push(t.readUInt16());return F})(),t.pos+=2,g=(function(){var D,F;for(F=[],l=D=0;0<=h?D<h:D>h;l=0<=h?++D:--D)F.push(t.readUInt16());return F})(),c=(function(){var D,F;for(F=[],l=D=0;0<=h?D<h:D>h;l=0<=h?++D:--D)F.push(t.readUInt16());return F})(),d=(function(){var D,F;for(F=[],l=D=0;0<=h?D<h:D>h;l=0<=h?++D:--D)F.push(t.readUInt16());return F})(),r=(this.length-t.pos+this.offset)/2,a=(function(){var D,F;for(F=[],l=D=0;0<=r?D<r:D>r;l=0<=r?++D:--D)F.push(t.readUInt16());return F})(),l=m=0,x=o.length;m<x;l=++m)for(C=o[l],i=w=f=g[l];f<=C?w<=C:w>=C;i=f<=C?++w:--w)d[l]===0?s=i+c[l]:(s=a[d[l]/2+(i-f)-(h-l)]||0)!==0&&(s+=c[l]),this.codeMap[i]=65535&s}t.pos=u}return e.encode=function(t,n){var i,r,o,s,a,l,c,d,u,h,p,f,g,C,m,w,x,D,F,L,V,B,P,U,A,I,j,G,Q,le,me,ge,se,de,he,M,ee,te,ue,ae,Ce,Ae,Fe,Me,Ve,Ze;switch(G=new Hh,s=Object.keys(t).sort(function(et,ot){return et-ot}),n){case"macroman":for(g=0,C=(function(){var et=[];for(f=0;f<256;++f)et.push(0);return et})(),w={0:0},o={},Q=0,se=s.length;Q<se;Q++)w[Fe=t[r=s[Q]]]==null&&(w[Fe]=++g),o[r]={old:t[r],new:w[t[r]]},C[r]=w[t[r]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(C),{charMap:o,subtable:G.data,maxGlyphID:g+1};case"unicode":for(I=[],u=[],x=0,w={},i={},m=c=null,le=0,de=s.length;le<de;le++)w[F=t[r=s[le]]]==null&&(w[F]=++x),i[r]={old:F,new:w[F]},a=w[F]-r,m!=null&&a===c||(m&&u.push(m),I.push(r),c=a),m=r;for(m&&u.push(m),u.push(65535),I.push(65535),U=2*(P=I.length),B=2*Math.pow(Math.log(P)/Math.LN2,2),h=Math.log(B/2)/Math.LN2,V=2*P-B,l=[],L=[],p=[],f=me=0,he=I.length;me<he;f=++me){if(A=I[f],d=u[f],A===65535){l.push(0),L.push(0);break}if(A-(j=i[A].new)>=32768)for(l.push(0),L.push(2*(p.length+P-f)),r=ge=A;A<=d?ge<=d:ge>=d;r=A<=d?++ge:--ge)p.push(i[r].new);else l.push(j-A),L.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*P+2*p.length),G.writeUInt16(0),G.writeUInt16(U),G.writeUInt16(B),G.writeUInt16(h),G.writeUInt16(V),Ce=0,M=u.length;Ce<M;Ce++)r=u[Ce],G.writeUInt16(r);for(G.writeUInt16(0),Ae=0,ee=I.length;Ae<ee;Ae++)r=I[Ae],G.writeUInt16(r);for(Me=0,te=l.length;Me<te;Me++)a=l[Me],G.writeUInt16(a);for(Ve=0,ue=L.length;Ve<ue;Ve++)D=L[Ve],G.writeUInt16(D);for(Ze=0,ae=p.length;Ze<ae;Ze++)g=p[Ze],G.writeUInt16(g);return{charMap:i,subtable:G.data,maxGlyphID:x+1}}},e})(),fz=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n=new nz(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,r;return n==null&&(n="macroman"),i=nz.encode(t,n),(r=new Hh).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},e})(),Ihe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),The=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i})(),this.charRange=(function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Phe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)n=t.readByte(),r.push(this.names.push(t.readString(n)));return r;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=function(){var s,a,l;for(l=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)l.push(t.readUInt32());return l}.call(this)}},e})(),khe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Lhe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,r,o,s,a,l,c,d,u,h;for(t.pos=this.offset,t.readShort(),n=t.readShort(),a=t.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(l={},o=d=0,u=i.length;d<u;o=++d)r=i[o],t.pos=r.offset,c=t.readString(r.length),s=new khe(c,r),l[h=r.nameID]==null&&(l[h]=[]),l[r.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e})(),Ohe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Nhe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,r,o,s,a,l;for(t.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,d;for(d=[],n=c=0;0<=r?c<r:c>r;n=0<=r?++c:--c)d.push(t.readInt16());return d})(),this.widths=function(){var c,d,u,h;for(h=[],c=0,d=(u=this.metrics).length;c<d;c++)o=u[c],h.push(o.advance);return h}.call(this),i=this.widths[this.widths.length-1],l=[],n=s=0;0<=r?s<r:s>r;n=0<=r?++s:--s)l.push(this.widths.push(i));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),gz=[].slice,Bhe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,r,o,s,a,l,c,d,u;return t in this.cache?this.cache[t]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(t),(r=o.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,s=(a=new Hh(n.read(r))).readShort(),c=a.readShort(),u=a.readShort(),l=a.readShort(),d=a.readShort(),this.cache[t]=s===-1?new Ghe(a,c,u,l,d):new Vhe(a,s,c,u,l,d),this.cache[t]))},e.prototype.encode=function(t,n,i){var r,o,s,a,l;for(s=[],o=[],a=0,l=n.length;a<l;a++)r=t[n[a]],o.push(s.length),r&&(s=s.concat(r.encode(i)));return o.push(s.length),{table:s,offsets:o}},e})(),Vhe=(function(){function e(t,n,i,r,o,s){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=o,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Ghe=(function(){function e(t,n,i,r,o){var s,a;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new Hh(gz.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e})(),Hhe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return bd(e,Dc),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=2)o.push(2*t.readUInt16());return o}.call(this):function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=4)o.push(t.readUInt32());return o}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),r=0,o=0,s=0;s<i.length;++s)if(i[s]=r,o<n.length&&n[o]==s){++o,i[s]=r;var a=this.offsets[s],l=this.offsets[s+1]-a;l>0&&(r+=l)}for(var c=new Array(4*i.length),d=0;d<i.length;++d)c[4*d+3]=255&i[d],c[4*d+2]=(65280&i[d])>>8,c[4*d+1]=(16711680&i[d])>>16,c[4*d]=(4278190080&i[d])>>24;return c},e})(),zhe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,r,o;for(n in r=this.font.cmap.tables[0].codeMap,t={},o=this.subset)i=o[n],t[n]=r[i];return t},e.prototype.glyphsFor=function(t){var n,i,r,o,s,a,l;for(r={},s=0,a=t.length;s<a;s++)r[o=t[s]]=this.font.glyf.glyphFor(o);for(o in n=[],r)(i=r[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))i=l[o],r[o]=i;return r},e.prototype.encode=function(t,n){var i,r,o,s,a,l,c,d,u,h,p,f,g,C,m;for(r in i=fz.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),p={0:0},m=i.charMap)p[(l=m[r]).old]=l.new;for(f in h=i.maxGlyphID,s)f in p||(p[f]=h++);return d=(function(w){var x,D;for(x in D={},w)D[w[x]]=x;return D})(p),u=Object.keys(d).sort(function(w,x){return w-x}),g=(function(){var w,x,D;for(D=[],w=0,x=u.length;w<x;w++)a=u[w],D.push(d[a]);return D})(),o=this.font.glyf.encode(s,g,p),c=this.font.loca.encode(o.offsets,g),C={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},e})();_t.API.PDFObject=(function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,r,o,s;if(Array.isArray(n))return"["+(function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)i=n[a],c.push(t.convert(i));return c})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in o=["<<"],n)s=n[r],o.push("/"+r+" "+t.convert(s));return o.push(">>"),o.join(`
`)}return""+n},t})();function yz(e,t,n,i,r){i=i||{};var o=1.15,s=r.internal.scaleFactor,a=r.internal.getFontSize()/s,l=r.getLineHeightFactor?r.getLineHeightFactor():o,c=a*l,d=/\r\n|\r|\n/g,u="",h=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(u=typeof e=="string"?e.split(d):e,h=u.length||1),n+=a*(2-o),i.valign==="middle"?n-=h/2*c:i.valign==="bottom"&&(n-=h*c),i.halign==="center"||i.halign==="right"){var p=a;if(i.halign==="center"&&(p*=.5),u&&h>=1){for(var f=0;f<u.length;f++)r.text(u[f],t-r.getStringUnitWidth(u[f])*p,n),n+=c;return r}t-=r.getStringUnitWidth(e)*p}return i.halign==="justify"?r.text(e,t,n,{maxWidth:i.maxWidth||100,align:"justify"}):r.text(e,t,n),r}var mz={},Nv=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:mz=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var i,r,o;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){a=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var d=e.unifyColor(t.fillColor);d&&(i=this.jsPDFDocument).setFillColor.apply(i,d),d=e.unifyColor(t.textColor),d&&(r=this.jsPDFDocument).setTextColor.apply(r,d),d=e.unifyColor(t.lineColor),d&&(o=this.jsPDFDocument).setDrawColor.apply(o,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,i){return this.jsPDFDocument.splitTextToSize(t,n,i)},e.prototype.rect=function(t,n,i,r,o){return this.jsPDFDocument.rect(t,n,i,r,o)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return mz||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),u3=function(e,t){return u3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},u3(e,t)};function Sz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");u3(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var xz=(function(e){Sz(t,e);function t(n){var i=e.call(this)||this;return i._element=n,i}return t})(Array);function jhe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Uhe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function _E(e,t,n){n.applyStyles(t,!0);var i=Array.isArray(e)?e:[e],r=i.map(function(o){return n.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return r}function Ez(e,t,n,i){var r=t.settings.tableLineWidth,o=t.settings.tableLineColor;e.applyStyles({lineWidth:r,lineColor:o});var s=Dz(r,!1);s&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),i.y-n.y,s)}function Dz(e,t){var n=e>0,i=t||t===0;return n&&i?"DF":n?"S":i?"F":null}function RE(e,t){var n,i,r,o;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(i=e.top)!==null&&i!==void 0?i:t,right:(r=e.right)!==null&&r!==void 0?r:t,bottom:(o=e.bottom)!==null&&o!==void 0?o:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function _z(e,t){var n=RE(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function Whe(e,t,n,i,r){var o={},s=1.3333333333333333,a=o3(t,function(x){return r.getComputedStyle(x).backgroundColor});a!=null&&(o.fillColor=a);var l=o3(t,function(x){return r.getComputedStyle(x).color});l!=null&&(o.textColor=l);var c=qhe(i,n);c&&(o.cellPadding=c);var d="borderTopColor",u=s*n,h=i.borderTopWidth;if(i.borderBottomWidth===h&&i.borderRightWidth===h&&i.borderLeftWidth===h){var p=(parseFloat(h)||0)/u;p&&(o.lineWidth=p)}else o.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/u,right:(parseFloat(i.borderRightWidth)||0)/u,bottom:(parseFloat(i.borderBottomWidth)||0)/u,left:(parseFloat(i.borderLeftWidth)||0)/u},o.lineWidth.top||(o.lineWidth.right?d="borderRightColor":o.lineWidth.bottom?d="borderBottomColor":o.lineWidth.left&&(d="borderLeftColor"));var f=o3(t,function(x){return r.getComputedStyle(x)[d]});f!=null&&(o.lineColor=f);var g=["left","right","center","justify"];g.indexOf(i.textAlign)!==-1&&(o.halign=i.textAlign),g=["middle","bottom","top"],g.indexOf(i.verticalAlign)!==-1&&(o.valign=i.verticalAlign);var C=parseInt(i.fontSize||"");isNaN(C)||(o.fontSize=C/s);var m=$he(i);m&&(o.fontStyle=m);var w=(i.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(o.font=w),o}function $he(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function o3(e,t){var n=Az(e,t);if(!n)return null;var i=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],o=parseInt(i[4]);return o===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Az(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:Az(e.parentElement,t):n}function qhe(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),r=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,o=n.map(function(a){return parseInt(a||"0")/i}),s=RE(o,0);return r>s.top&&(s.top=r),r>s.bottom&&(s.bottom=r),s}function Rz(e,t,n,i,r){var o,s;i===void 0&&(i=!1),r===void 0&&(r=!1);var a;typeof t=="string"?a=n.document.querySelector(t):a=t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),d=[],u=[],h=[];if(!a)return console.error("Html table could not be found with input: ",t),{head:d,body:u,foot:h};for(var p=0;p<a.rows.length;p++){var f=a.rows[p],g=(s=(o=f?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),C=Khe(l,c,n,f,i,r);C&&(g==="thead"?d.push(C):g==="tfoot"?h.push(C):u.push(C))}return{head:d,body:u,foot:h}}function Khe(e,t,n,i,r,o){for(var s=new xz(i),a=0;a<i.cells.length;a++){var l=i.cells[a],c=n.getComputedStyle(l);if(r||c.display!=="none"){var d=void 0;o&&(d=Whe(e,l,t,c,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Yhe(l)})}}var u=n.getComputedStyle(i);if(s.length>0&&(r||u.display!=="none"))return s}function Yhe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function Zhe(e,t,n){for(var i=0,r=[e,t,n];i<r.length;i++){var o=r[i];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Eu(e,t,n,i,r){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}function Fz(e,t){var n=new Nv(e),i=n.getDocumentOptions(),r=n.getGlobalOptions();Zhe(r,i,t);var o=Eu({},r,i,t),s;typeof window<"u"&&(s=window);var a=Xhe(r,i,t),l=Qhe(r,i,t),c=Jhe(n,o),d=tpe(n,o,s);return{id:t.tableId,content:d,hooks:l,styles:a,settings:c}}function Xhe(e,t,n){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(l){if(l==="columnStyles"){var c=e[l],d=t[l],u=n[l];i.columnStyles=Eu({},c,d,u)}else{var h=[e,t,n],p=h.map(function(f){return f[l]||{}});i[l]=Eu({},p[0],p[1],p[2])}},o=0,s=Object.keys(i);o<s.length;o++){var a=s[o];r(a)}return i}function Qhe(e,t,n){for(var i=[e,t,n],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=i;o<s.length;o++){var a=s[o];a.didParseCell&&r.didParseCell.push(a.didParseCell),a.willDrawCell&&r.willDrawCell.push(a.willDrawCell),a.didDrawCell&&r.didDrawCell.push(a.didDrawCell),a.willDrawPage&&r.willDrawPage.push(a.willDrawPage),a.didDrawPage&&r.didDrawPage.push(a.didDrawPage)}return r}function Jhe(e,t){var n,i,r,o,s,a,l,c,d,u,h,p,f=RE(t.margin,40/e.scaleFactor()),g=(n=epe(e,t.startY))!==null&&n!==void 0?n:f.top,C;t.showFoot===!0?C="everyPage":t.showFoot===!1?C="never":C=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var m;t.showHead===!0?m="everyPage":t.showHead===!1?m="never":m=(r=t.showHead)!==null&&r!==void 0?r:"everyPage";var w=(o=t.useCss)!==null&&o!==void 0?o:!1,x=t.theme||(w?"plain":"striped"),D=!!t.horizontalPageBreak,F=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=t.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:w,theme:x,startY:g,margin:f,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:m,showFoot:C,tableLineWidth:(u=t.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:D,horizontalPageBreakRepeat:F,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function epe(e,t){var n=e.getLastAutoTable(),i=e.scaleFactor(),r=e.pageNumber(),o=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;o=s===r}return typeof t=="number"?t:(t==null||t===!1)&&o&&n?.finalY!=null?n.finalY+20/i:null}function tpe(e,t,n){var i=t.head||[],r=t.body||[],o=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(n){var a=Rz(e,t.html,n,s,t.useCss)||{};i=a.head||i,r=a.body||i,o=a.foot||i}else console.error("Cannot parse html in non browser environment")}var l=t.columns||npe(i,r,o);return{columns:l,head:i,body:r,foot:o}}function npe(e,t,n){var i=e[0]||t[0]||n[0]||[],r=[];return Object.keys(i).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(i)?a=i[parseInt(o)]:a=i[o],typeof a=="object"&&!Array.isArray(a)&&(s=a?.colSpan||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(i)?c=r.length:c=o+(l>0?"_".concat(l):"");var d={dataKey:c};r.push(d)}}),r}var h3=(function(){function e(t,n,i){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=i,this.doc=t.getDocument()}return e})(),ipe=(function(e){Sz(t,e);function t(n,i,r,o,s,a){var l=e.call(this,n,i,a)||this;return l.cell=r,l.row=o,l.column=s,l.section=o.section,l}return t})(h3),rpe=(function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,i){return n+i.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,i){return n+i.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,i,r,o,s){for(var a=0,l=n;a<l.length;a++){var c=l[a],d=new ipe(t,this,i,r,o,s),u=c(d)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],u)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var i=0,r=this.hooks.didDrawPage;i<r.length;i++){var o=r[i];o(new h3(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var i=0,r=this.hooks.willDrawPage;i<r.length;i++){var o=r[i];o(new h3(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(r,o){return r+o.wrappedWidth},0);return n}else{var i=this.settings.margin;return t-i.left-i.right}},e})(),Mz=(function(){function e(t,n,i,r,o){o===void 0&&(o=!1),this.height=0,this.raw=t,t instanceof xz&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=i,this.cells=r,this.spansMultiplePages=o}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(i,r){var o;return Math.max(i,((o=n.cells[r.index])===null||o===void 0?void 0:o.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(i){var r=n.cells[i.index];return r?r.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var i=this;return t.reduce(function(r,o){var s=i.cells[o.index];if(!s)return 0;var a=n.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+a;return c>r?c:r},0)},e})(),Iz=(function(){function e(t,n,i){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=i,this.raw=t;var o=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,o=(r=t.content)!==null&&r!==void 0?r:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");i=this.x+r/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var i=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/t*n,o=i*r+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=RE(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e})(),ope=(function(){function e(t,n,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=i}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,i=0,r=t.allRows();i<r.length;i++){var o=r[i],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},e})();function spe(e,t){ape(e,t);var n=[],i=0;t.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(t);s?o.width=s:(o.width=o.wrappedWidth,n.push(o)),i+=o.width});var r=t.getWidth(e.pageSize().width)-i;r&&(r=p3(n,r,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),r&&(r=p3(n,r,function(o){return o.minWidth})),r=Math.abs(r),!t.settings.horizontalPageBreak&&r>.1/e.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),cpe(t),dpe(t,e),lpe(t)}function ape(e,t){var n=e.scaleFactor(),i=t.settings.horizontalPageBreak,r=_z(e,t);t.allRows().forEach(function(o){for(var s=0,a=t.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c){var d=t.hooks.didParseCell;t.callCellHooks(e,d,c,o,l,null);var u=c.padding("horizontal");c.contentWidth=_E(c.text,c.styles,e)+u;var h=_E(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=h+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||i===!0)c.contentWidth>r?(c.minWidth=r,c.wrappedWidth=r):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(o){for(var s=0,a=t.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},u=d.cellWidth||d.minCellWidth;u&&typeof u=="number"&&(l.minWidth=u,l.wrappedWidth=u)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function p3(e,t,n){for(var i=t,r=e.reduce(function(p,f){return p+f.wrappedWidth},0),o=0;o<e.length;o++){var s=e[o],a=s.wrappedWidth/r,l=i*a,c=s.width+l,d=n(s),u=c<d?d:c;t-=u-s.width,s.width=u}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>n(p):!0});h.length&&(t=p3(h,t,n))}return t}function lpe(e){for(var t={},n=1,i=e.allRows(),r=0;r<i.length;r++)for(var o=i[r],s=0,a=e.columns;s<a.length;s++){var l=a[s],c=t[l.index];if(n>1)n--,delete o.cells[l.index];else if(c)c.cell.height+=o.height,n=c.cell.colSpan,delete o.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var d=o.cells[l.index];if(!d)continue;if(d.height=o.height,d.rowSpan>1){var u=i.length-r,h=d.rowSpan>u?u:d.rowSpan;t[l.index]={cell:d,left:h,row:o}}}}}function cpe(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var i=t[n],r=null,o=0,s=0,a=0;a<e.columns.length;a++){var l=e.columns[a];if(s-=1,s>1&&e.columns[a+1])o+=l.width,delete i.cells[l.index];else if(r){var c=r;delete i.cells[l.index],r=null,c.width=l.width+o}else{var c=i.cells[l.index];if(!c)continue;if(s=c.colSpan,o=0,c.colSpan>1){r=c,o+=l.width;continue}c.width=l.width+o}}}function dpe(e,t){for(var n={count:0,height:0},i=0,r=e.allRows();i<r.length;i++){for(var o=r[i],s=0,a=e.columns;s<a.length;s++){var l=a[s],c=o.cells[l.index];if(c){t.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,d+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=vz(c.text,d,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=vz(c.text,d,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var u=c.styles.overflow(c.text,d);typeof u=="string"?c.text=[u]:c.text=u}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<h*c.rowSpan?n={height:h,count:c.rowSpan}:n&&n.count>0&&n.height>h&&(h=n.height),h>o.height&&(o.height=h)}}n.count--}}function vz(e,t,n,i,r){return e.map(function(o){return upe(o,t,n,i,r)})}function upe(e,t,n,i,r){var o=1e4*i.scaleFactor();if(t=Math.ceil(t*o)/o,t>=_E(e,n,i))return e;for(;t<_E(e+r,n,i)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+r}function Tz(e,t){var n=new Nv(e),i=hpe(t,n.scaleFactor()),r=new rpe(t,i);return spe(n,r),n.applyStyles(n.userStyles),r}function hpe(e,t){var n=e.content,i=fpe(n.columns);if(n.head.length===0){var r=Cz(i,"head");r&&n.head.push(r)}if(n.foot.length===0){var r=Cz(i,"foot");r&&n.foot.push(r)}var o=e.settings.theme,s=e.styles;return{columns:i,head:s3("head",n.head,i,s,o,t),body:s3("body",n.body,i,s,o,t),foot:s3("foot",n.foot,i,s,o,t)}}function s3(e,t,n,i,r,o){var s={},a=t.map(function(l,c){for(var d=0,u={},h=0,p=0,f=0,g=n;f<g.length;f++){var C=g[f];if(s[C.index]==null||s[C.index].left===0)if(p===0){var m=void 0;Array.isArray(l)?m=l[C.index-h-d]:m=l[C.dataKey];var w={};typeof m=="object"&&!Array.isArray(m)&&(w=m?.styles||{});var x=gpe(e,C,c,r,i,o,w),D=new Iz(m,x,e);u[C.dataKey]=D,u[C.index]=D,p=D.colSpan-1,s[C.index]={left:D.rowSpan-1,times:p}}else p--,h++;else s[C.index].left--,p=s[C.index].times,d++}return new Mz(l,c,e,u)});return a}function Cz(e,t){var n={};return e.forEach(function(i){if(i.raw!=null){var r=ppe(t,i.raw);r!=null&&(n[i.dataKey]=r)}}),Object.keys(n).length>0?n:null}function ppe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function fpe(e){return e.map(function(t,n){var i,r;return typeof t=="object"?r=(i=t.dataKey)!==null&&i!==void 0?i:n:r=n,new ope(r,t,n)})}function gpe(e,t,n,i,r,o,s){var a=Uhe(i),l;e==="head"?l=r.headStyles:e==="body"?l=r.bodyStyles:e==="foot"&&(l=r.footStyles);var c=Eu({},a.table,a[e],r.styles,l),d=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},u=e==="body"?d:{},h=e==="body"&&n%2===0?Eu({},a.alternateRow,r.alternateRowStyles):{},p=jhe(o),f=Eu({},p,c,h,u);return Eu(f,s)}function mpe(e,t,n){var i;n===void 0&&(n={});var r=_z(e,t),o=new Map,s=[],a=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var p=t.columns.find(function(f){return f.dataKey===h||f.index===h});p&&!o.has(p.index)&&(o.set(p.index,!0),s.push(p.index),a.push(t.columns[p.index]),r-=p.wrappedWidth)});for(var c=!0,d=(i=n?.start)!==null&&i!==void 0?i:0;d<t.columns.length;){if(o.has(d)){d++;continue}var u=t.columns[d].wrappedWidth;if(c||r>=u)c=!1,s.push(d),a.push(t.columns[d]),r-=u;else break;d++}return{colIndexes:s,columns:a,lastIndex:d-1}}function vpe(e,t){for(var n=[],i=0;i<t.columns.length;i++){var r=mpe(e,t,{start:i});r.columns.length&&(n.push(r),i=r.lastIndex)}return n}function Pz(e,t){var n=t.settings,i=n.startY,r=n.margin,o={x:r.left,y:i},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),a=i+r.bottom+s;if(n.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(h,p){return h+p.height},0);a+=c}var d=new Nv(e);(n.pageBreak==="always"||n.startY!=null&&a>d.pageSize().height)&&(Lz(d),o.y=r.top),t.callWillDrawPageHooks(d,o);var u=Eu({},o);t.startPageNumber=d.pageNumber(),n.horizontalPageBreak?Cpe(d,t,u,o):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(h){return Du(d,t,h,o,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var f=p===t.body.length-1;AE(d,t,h,f,u,o,t.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(h){return Du(d,t,h,o,t.columns)})),Ez(d,t,u,o),t.callEndPageHooks(d,o),t.finalY=o.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function Cpe(e,t,n,i){var r=vpe(e,t),o=t.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(c,d){e.applyStyles(e.userStyles),d>0?kw(e,t,n,i,c.columns,!0):bz(e,t,i,c.columns),bpe(e,t,n,i,c.columns),a3(e,t,i,c.columns)});else for(var s=-1,a=r[0],l=function(){var c=s;if(a){e.applyStyles(e.userStyles);var d=a.columns;s>=0?kw(e,t,n,i,d,!0):bz(e,t,i,d),c=wz(e,t,s+1,i,d),a3(e,t,i,d)}var u=c-s;r.slice(1).forEach(function(h){e.applyStyles(e.userStyles),kw(e,t,n,i,h.columns,!0),wz(e,t,s+1,i,h.columns,u),a3(e,t,i,h.columns)}),s=c};s<t.body.length-1;)l()}function bz(e,t,n,i){var r=t.settings;e.applyStyles(e.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(o){return Du(e,t,o,n,i)})}function bpe(e,t,n,i,r){e.applyStyles(e.userStyles),t.body.forEach(function(o,s){var a=s===t.body.length-1;AE(e,t,o,a,n,i,r)})}function wz(e,t,n,i,r,o){e.applyStyles(e.userStyles),o=o??t.body.length;var s=Math.min(n+o,t.body.length),a=-1;return t.body.slice(n,s).forEach(function(l,c){var d=n+c===t.body.length-1,u=kz(e,t,d,i);l.canEntireRowFit(u,r)&&(Du(e,t,l,i,r),a=n+c)}),a}function a3(e,t,n,i){var r=t.settings;e.applyStyles(e.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(o){return Du(e,t,o,n,i)})}function wpe(e,t,n){var i=n.getLineHeight(e.styles.fontSize),r=e.padding("vertical"),o=Math.floor((t-r)/i);return Math.max(0,o)}function ype(e,t,n,i){var r={};e.spansMultiplePages=!0,e.height=0;for(var o=0,s=0,a=n.columns;s<a.length;s++){var l=a[s],c=e.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var d=new Iz(c.raw,c.styles,c.section);d=Eu(d,c),d.text=[];var u=wpe(c,t,i);c.text.length>u&&(d.text=c.text.splice(u,c.text.length));var h=i.scaleFactor(),p=i.getLineHeightFactor();c.contentHeight=c.getContentHeight(h,p),c.contentHeight>=t&&(c.contentHeight=t,d.styles.minCellHeight-=t),c.contentHeight>e.height&&(e.height=c.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>o&&(o=d.contentHeight),r[l.index]=d}}var f=new Mz(e.raw,-1,e.section,r,!0);f.height=o;for(var g=0,C=n.columns;g<C.length;g++){var l=C[g],d=f.cells[l.index];d&&(d.height=f.height);var c=e.cells[l.index];c&&(c.height=e.height)}return f}function Spe(e,t,n,i){var r=e.pageSize().height,o=i.settings.margin,s=o.top+o.bottom,a=r-s;t.section==="body"&&(a-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var l=t.getMinimumRowHeight(i.columns,e),c=l<n;if(l>a)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var d=t.hasRowSpan(i.columns),u=t.getMaxCellHeight(i.columns)>a;return u?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||i.settings.rowPageBreak==="avoid")}function AE(e,t,n,i,r,o,s){var a=kz(e,t,i,o);if(n.canEntireRowFit(a,s))Du(e,t,n,o,s);else if(Spe(e,n,a,t)){var l=ype(n,a,t,e);Du(e,t,n,o,s),kw(e,t,r,o,s),AE(e,t,l,i,r,o,s)}else kw(e,t,r,o,s),AE(e,t,n,i,r,o,s)}function Du(e,t,n,i,r){i.x=t.settings.margin.left;for(var o=0,s=r;o<s.length;o++){var a=s[o],l=n.cells[a.index];if(!l){i.x+=a.width;continue}e.applyStyles(l.styles),l.x=i.x,l.y=i.y;var c=t.callCellHooks(e,t.hooks.willDrawCell,l,n,a,i);if(c===!1){i.x+=a.width;continue}xpe(e,l,i);var d=l.getTextPos();yz(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,n,a,i),i.x+=a.width}i.y+=n.height}function xpe(e,t,n){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof i.lineWidth=="number"){var r=Dz(i.lineWidth,i.fillColor);r&&e.rect(t.x,n.y,t.width,t.height,r)}else typeof i.lineWidth=="object"&&(i.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),Epe(e,t,n,i.lineWidth))}function Epe(e,t,n,i){var r,o,s,a;i.top&&(r=n.x,o=n.y,s=n.x+t.width,a=n.y,i.right&&(s+=.5*i.right),i.left&&(r-=.5*i.left),l(i.top,r,o,s,a)),i.bottom&&(r=n.x,o=n.y+t.height,s=n.x+t.width,a=n.y+t.height,i.right&&(s+=.5*i.right),i.left&&(r-=.5*i.left),l(i.bottom,r,o,s,a)),i.left&&(r=n.x,o=n.y,s=n.x,a=n.y+t.height,i.top&&(o-=.5*i.top),i.bottom&&(a+=.5*i.bottom),l(i.left,r,o,s,a)),i.right&&(r=n.x+t.width,o=n.y,s=n.x+t.width,a=n.y+t.height,i.top&&(o-=.5*i.top),i.bottom&&(a+=.5*i.bottom),l(i.right,r,o,s,a));function l(c,d,u,h,p){e.getDocument().setLineWidth(c),e.getDocument().line(d,u,h,p,"S")}}function kz(e,t,n,i){var r=t.settings.margin.bottom,o=t.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&n)&&(r+=t.getFootHeight(t.columns)),e.pageSize().height-i.y-r}function kw(e,t,n,i,r,o){r===void 0&&(r=[]),o===void 0&&(o=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!o&&t.foot.forEach(function(a){return Du(e,t,a,i,r)}),t.callEndPageHooks(e,i);var s=t.settings.margin;Ez(e,t,n,i),Lz(e),t.pageNumber++,i.x=s.left,i.y=s.top,n.y=s.top,t.callWillDrawPageHooks(e,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(a){return Du(e,t,a,i,r)}),e.applyStyles(e.userStyles))}function Lz(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function Dpe(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],r=Fz(this,i),o=Tz(this,r);return Pz(this,o),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,i,r){yz(t,n,i,r,this)},e.API.autoTableSetDefaults=function(t){return Nv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){Nv.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var i;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Nv(this),o=Rz(r,t,window,n,!1),s=o.head,a=o.body,l=((i=s[0])===null||i===void 0?void 0:i.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var l3;function FE(e,t){var n=Fz(e,t),i=Tz(e,n);Pz(e,i)}try{typeof window<"u"&&window&&(c3=window,d3=c3.jsPDF||((l3=c3.jspdf)===null||l3===void 0?void 0:l3.jsPDF),d3&&Dpe(d3))}catch(e){console.error("Could not apply autoTable plugin",e)}var c3,d3;var C3=nR(g3());var Jf=nR(Uj());var fD={production:!1,baseUrl:"http://localhost:3000"};var gD="chiave-super-segreta",Bv=class e{constructor(t){this.http=t}key="fatture";url="assets/fatture.json";urlFatture=fD.baseUrl+"/fatture";encryptObject(t){return t.paziente=Jf.AES.encrypt(t.paziente,gD).toString(),t.codiceFiscalePaziente=Jf.AES.encrypt(t.codiceFiscalePaziente,gD).toString(),t.indirizzoPaziente=Jf.AES.encrypt(t.indirizzoPaziente,gD).toString(),t}decryptField(t){try{return Jf.AES.decrypt(t,gD).toString(Jf.enc.Utf8)||t}catch{return t}}decryptFattura(t){var n=T({},t);return n.codiceFiscalePaziente=this.decryptField(n.codiceFiscalePaziente),n.paziente=this.decryptField(n.paziente),n.indirizzoPaziente=this.decryptField(n.indirizzoPaziente),n}_getListaFatture(){return this.http.get(this.urlFatture).pipe(yn(t=>t.map(n=>this.decryptFattura(n))))}getFatturaByNumero(t){return this._getListaFatture().pipe(yn(n=>{let i=n.find(r=>Number(r.numero)===t);return i?this.decryptFattura(i):void 0}))}insertNewFattura(t){var n=this.encryptObject(t);return this.http.post(this.urlFatture,this.encryptObject(n))}getUltimoNumeroFattura(){return this._getListaFatture().pipe(yn(t=>t.length?t.reduce((i,r)=>r.numero>i.numero?r:i).numero:0))}getNextNumFattura(){return this.http.get(this.urlFatture).pipe(yn(t=>!t||t.length===0?1:Math.max(...t.filter(i=>i.numero!=null).map(i=>i.numero))+1))}checkEsistenzaFattura(t){return this.http.get(this.urlFatture).pipe(Wr(n=>console.log("Fatture:",n)),yn(n=>n.some(i=>String(i.numero)===String(t))),Wr(n=>console.log("Esiste fattura",t,"?",n)))}eliminaFattura(t){return this.checkEsistenzaFattura(t.numero).pipe(Wr(n=>{if(!n)throw new Error("La fattura non esiste")}),bs(()=>this.http.delete(`${this.urlFatture}/${t.id}`)),Wr(()=>console.log("Fattura eliminata:",t.numero)))}static \u0275fac=function(n){return new(n||e)(Tt(Rh))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})};var _pe=["class","component"];function Ape(e,t){if(e&1&&(ze(0,"option",25),Gt(1),We()),e&2){let n=t.$implicit;mn("value",n.id),Xe(),Ef(" ",n.Cognome," ",n.Nome," ")}}function Rpe(e,t){if(e&1&&(ze(0,"option",25),Gt(1),We()),e&2){let n=t.$implicit;mn("value",n.valore),Xe(),es(" ",n.descrizione," ")}}function Fpe(e,t){if(e&1&&(ze(0,"option",25),Gt(1),We()),e&2){let n=t.$implicit;mn("value",n.valore),Xe(),es(" ",n.descrizione," ")}}function Mpe(e,t){if(e&1&&(ze(0,"option",25),Gt(1),We()),e&2){let n=t.$implicit;mn("value",n.valore),Xe(),es(" ",n.descrizione," ")}}var Ipe={parse:{dateInput:"dd MMMM yyyy"},display:{dateInput:"dd MMMM yyyy",monthYearLabel:"MMMM yyyy",dateA11yLabel:"dd MMMM yyyy",monthYearA11yLabel:"MMMM yyyy"}},mD=class e{constructor(t,n,i){this.cd=t;this.http=n;this.fattureService=i}pbSalvaFattura=!1;fattureEmesse=[];dataSelezionata=new Date().toISOString().substring(0,10);nextFattura=0;username="Rosaci Carmela";codiceFiscaleMedico="RSCCML58A44F112E";indirizzoMedico="Via Mar Nero 3/B Milano";codiceFiscalePaziente="";indirizzoPaziente="";nomeCompletoPaziente="";filtro="A";listaOpzioni=[];listaPazientiFiltrata=[];listaPazienti=[];opzioneSelezionata="";valoreSelezionato="";importoSelezionato="100 \u20AC";valoreSelezionatoImporto="";valoreSelezionatoImportoFattura="";valoreSelezionatoIva="0";listaCertificato=[];lsPazienti=[];listaImporto=[{valore:"81.97 \u20AC",descrizione:"81.97 \u20AC"},{valore:"50 \u20AC",descrizione:"50 \u20AC"},{valore:"106.57 \u20AC",descrizione:"106.57 \u20AC"}];listaIva=[{valore:"0",descrizione:"0"},{valore:"22",descrizione:"22"}];ngOnInit(){this.http.get("assets/clienti.json").subscribe(t=>{this.listaPazienti=t,this.listaPazienti=t.map((n,i)=>ce(T({},n),{id:`P${String(i+1).padStart(3,"0")}`}))}),this.http.get("assets/certificati.json").subscribe(t=>{this.listaCertificato=t}),this.nuovaFattura()}listaFiltrata(){let t=(this.filtro||"").toLowerCase();return this.listaPazientiFiltrata.filter(n=>(n?.Cognome??"").toLowerCase().includes(t)||(n?.Nome??"").toLowerCase().includes(t))}listaFiltrataPazienti(){let t=(this.filtro||"").toLowerCase();return this.listaPazienti.filter(n=>(n?.Cognome??"").toLowerCase().includes(t)||(n?.Nome??"").toLowerCase().includes(t))}filtraPazienti(){let t=(this.filtro||"").toLowerCase();this.lsPazienti=this.listaPazienti.filter(n=>(n?.Cognome??"").toLowerCase().includes(t)||(n?.Nome??"").toLowerCase().includes(t))}pazienteSelezionato(){return this.listaOpzioni.find(t=>t.id==this.opzioneSelezionata)}onPazienteChange(){let t=this.lsPazienti.find(n=>n.id==this.opzioneSelezionata);console.log("Paziente selezionato:",t),t&&(this.codiceFiscalePaziente=t.CodiceFiscale,this.indirizzoPaziente=t.Indirizzo+" "+t.Comune,this.nomeCompletoPaziente=t.NomeCompleto)}generaPdf(){let t=new _t,n=this.getFattura();t.setFontSize(16),t.text("Fattura",10,10),t.setFontSize(12),t.text(`Numero fattura: ${this.nextFattura} del  ${n.data}`,10,20),t.text(`Dott.ssa : ${this.username}  ${this.codiceFiscaleMedico}`,10,30),t.text(`${this.indirizzoMedico} `,10,40),t.text(`Paziente: ${this.nomeCompletoPaziente}`,10,70),t.text(`Codice Fiscale: ${this.codiceFiscalePaziente}`,10,80),t.text(`Indirizzo: ${this.indirizzoPaziente}`,10,90),t.text(` ${this.valoreSelezionato}`,10,110),t.text(`Imponibile : \u20AC  ${n.imponibile} `,10,130),t.text(`iva ${n.ivaPerc} %`,80,130),t.text(`: ${n.iva} \u20AC`,99,130),t.text(`Totale fattura:  ${n.importo} \u20AC`,10,140),FE(t,{startY:60,body:[]}),t.save(`fattura_${this.nextFattura||"senza_numero"}.pdf`)}getFattura(){let t=Number(this.valoreSelezionatoIva),n=Number(this.valoreSelezionatoImporto.replace("\u20AC","").trim()),i=t>0?Math.trunc(n)*t/100:0;return{id:crypto.randomUUID(),numero:this.nextFattura=isNaN(Number(this.nextFattura))?this.nextFattura:Number(this.nextFattura),data:this.dataSelezionata??"",imponibile:n,importo:Math.ceil(n+i),paziente:this.nomeCompletoPaziente,iva:i,ivaPerc:t,codiceFiscalePaziente:this.codiceFiscalePaziente,descrizioneCertificato:this.valoreSelezionato,indirizzoPaziente:this.indirizzoPaziente}}salvaFattura(){let t=this.getFattura();this.fattureService.checkEsistenzaFattura(t.numero).subscribe(n=>{n?C3.default.fire("Attenzione!",`Fattura ${t.numero} esistente.`,"info"):C3.default.fire({title:"Sei sicuro?",text:`Vuoi inserire la fattura ${t.numero}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xEC, inserisci",cancelButtonText:"Annulla"}).then(i=>{let r=this.getFattura();var o=this.fattureService.insertNewFattura(r);o?.subscribe(s=>{console.log("Valore ricevuto:",s)}),this.pbSalvaFattura=!1})})}scaricaArchivioFatture(){var t=this.fattureService._getListaFatture().subscribe(n=>{console.log("Valore ricevuto:",n)})}handleNumero(t){this.nextFattura=parseInt(t)+1,this.cd.detectChanges()}async nuovaFattura(){var t=await this.fattureService.getNextNumFattura().toPromise()??0;this.nextFattura=t,this.codiceFiscalePaziente="",this.indirizzoPaziente="",this.nomeCompletoPaziente="",this.cd.detectChanges()}static \u0275fac=function(n){return new(n||e)(Pt(Oi),Pt(Rh),Pt(Bv))};static \u0275cmp=Kt({type:e,selectors:[["app-dashboard",8,"component"]],features:[uo([{provide:vu,useValue:Ipe}])],attrs:_pe,decls:73,vars:19,consts:[["f","ngForm"],[1,"login-container"],[1,"row"],["for","nextFattura",2,"width","140px"],[1,"field"],["id","nextFattura","type","text","name","nextFattura","border-radius:","","4px;","","required","",2,"width","140px","background-color","#93c5e6",3,"ngModelChange","ngModel"],["for","dataSelezionata",2,"width","140px"],["type","date","name","dataSelezionata",1,"date-small",3,"ngModelChange","ngModel"],["id","username","disabled","","type","text","name","username","required","",2,"width","140px",3,"ngModelChange","ngModel"],["id","codiceFiscaleMedico","type","text","name","codiceFiscaleMedico","disabled","","required","",2,"width","190px",3,"ngModelChange","ngModel"],["id","indirizzoMedico","disabled","","type","text","name","indirizzoMedico","required","",2,"width","260px",3,"ngModelChange","ngModel"],["for","opzioneSelezionata"],["name","opzioneSelezionata",2,"width","300px",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","filtro",1,"search-box",2,"width","100px",3,"ngModelChange","input","ngModel"],["type","text","name","nomeCompletoPaziente","required","",3,"ngModelChange","ngModel"],["type","text","name","codiceFiscalePaziente","required","",3,"ngModelChange","ngModel"],["type","text","name","indirizzoPaziente","required","",3,"ngModelChange","ngModel"],["list","listaCertificato","name","listaCertificato","onmousedown","this.dataset.valore = this.value; this.value='';","onblur","if(this.value==='') this.value=this.dataset.valore;","required","",3,"ngModelChange","ngModel"],["id","listaCertificato"],["list","listaImporto","name","importoEditabile","onmousedown","this.dataset.valore = this.value; this.value='';","onblur","if(this.value==='') this.value=this.dataset.valore;","required","",2,"width","120px",3,"ngModelChange","ngModel"],["id","listaImporto"],["list","listaIva","name","listaIva","onmousedown","this.dataset.valore = this.value; this.value='';","onblur","if(this.value==='') this.value=this.dataset.valore;","required","",2,"width","120px",3,"ngModelChange","ngModel"],["id","listaIva"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[3,"value"]],template:function(n,i){if(n&1){let r=Xs();ze(0,"div",1)(1,"h2"),Gt(2,"Gestione Fatture"),We(),ze(3,"form")(4,"div",2)(5,"label",3),Gt(6," Fattura N. "),We(),ze(7,"div",4)(8,"input",5),sr("ngModelChange",function(s){return Fn(r),xr(i.nextFattura,s)||(i.nextFattura=s),Mn(s)}),We()(),ze(9,"label",6),Gt(10," Data "),We(),ze(11,"div",4)(12,"input",7),sr("ngModelChange",function(s){return Fn(r),xr(i.dataSelezionata,s)||(i.dataSelezionata=s),Mn(s)}),We()()(),ri(13,"br"),ze(14,"div",2)(15,"div",4)(16,"input",8),sr("ngModelChange",function(s){return Fn(r),xr(i.username,s)||(i.username=s),Mn(s)}),We(),ze(17,"input",9),sr("ngModelChange",function(s){return Fn(r),xr(i.codiceFiscaleMedico,s)||(i.codiceFiscaleMedico=s),Mn(s)}),We()(),ze(18,"div",4)(19,"input",10),sr("ngModelChange",function(s){return Fn(r),xr(i.indirizzoMedico,s)||(i.indirizzoMedico=s),Mn(s)}),We()()()(),ri(20,"br")(21,"br"),We(),ze(22,"div",1)(23,"form",null,0)(25,"div",2)(26,"div",4)(27,"label",11),Gt(28,"Paziente"),We(),ze(29,"select",12),sr("ngModelChange",function(s){return Fn(r),xr(i.opzioneSelezionata,s)||(i.opzioneSelezionata=s),Mn(s)}),an("change",function(){return Fn(r),Mn(i.onPazienteChange())}),Jo(30,Ape,2,3,"option",13),We()(),ze(31,"input",14),sr("ngModelChange",function(s){return Fn(r),xr(i.filtro,s)||(i.filtro=s),Mn(s)}),an("input",function(){return Fn(r),Mn(i.filtraPazienti())}),We()(),ri(32,"br")(33,"br")(34,"br"),ze(35,"div",2)(36,"div",4)(37,"label"),Gt(38,"Nome Completo"),We(),ze(39,"input",15),sr("ngModelChange",function(s){return Fn(r),xr(i.nomeCompletoPaziente,s)||(i.nomeCompletoPaziente=s),Mn(s)}),We()()(),ze(40,"div",2)(41,"div",4)(42,"label"),Gt(43,"Codice Fiscale"),We(),ze(44,"input",16),sr("ngModelChange",function(s){return Fn(r),xr(i.codiceFiscalePaziente,s)||(i.codiceFiscalePaziente=s),Mn(s)}),We()()(),ze(45,"div",2)(46,"div",4)(47,"label"),Gt(48,"Indirizzo"),We(),ze(49,"input",17),sr("ngModelChange",function(s){return Fn(r),xr(i.indirizzoPaziente,s)||(i.indirizzoPaziente=s),Mn(s)}),We()()(),ri(50,"br"),ze(51,"div",2)(52,"div",4)(53,"label"),Gt(54,"Certificato"),We(),ze(55,"input",18),sr("ngModelChange",function(s){return Fn(r),xr(i.valoreSelezionato,s)||(i.valoreSelezionato=s),Mn(s)}),We(),ze(56,"datalist",19),Jo(57,Rpe,2,2,"option",13),We(),ze(58,"label"),Gt(59,"Importo"),We(),ze(60,"input",20),sr("ngModelChange",function(s){return Fn(r),xr(i.valoreSelezionatoImporto,s)||(i.valoreSelezionatoImporto=s),Mn(s)}),We(),ze(61,"datalist",21),Jo(62,Fpe,2,2,"option",13),We(),ze(63,"label"),Gt(64,"Iva"),We(),ze(65,"input",22),sr("ngModelChange",function(s){return Fn(r),xr(i.valoreSelezionatoIva,s)||(i.valoreSelezionatoIva=s),Mn(s)}),We(),ze(66,"datalist",23),Jo(67,Mpe,2,2,"option",13),We()()(),ri(68,"br"),ze(69,"button",24),an("click",function(){return Fn(r),Mn(i.generaPdf())}),Gt(70," Esporta in PDF "),We(),ze(71,"button",24),an("click",function(){return Fn(r),Mn(i.salvaFattura())}),Gt(72," salva "),We()()()}if(n&2){let r=Vm(24);Xe(8),or("ngModel",i.nextFattura),Xe(4),or("ngModel",i.dataSelezionata),Xe(4),or("ngModel",i.username),Xe(),or("ngModel",i.codiceFiscaleMedico),Xe(2),or("ngModel",i.indirizzoMedico),Xe(10),or("ngModel",i.opzioneSelezionata),Xe(),mn("ngForOf",i.lsPazienti),Xe(),or("ngModel",i.filtro),Xe(8),or("ngModel",i.nomeCompletoPaziente),Xe(5),or("ngModel",i.codiceFiscalePaziente),Xe(5),or("ngModel",i.indirizzoPaziente),Xe(6),or("ngModel",i.valoreSelezionato),Xe(2),mn("ngForOf",i.listaCertificato),Xe(3),or("ngModel",i.valoreSelezionatoImporto),Xe(2),mn("ngForOf",i.listaImporto),Xe(3),or("ngModel",i.valoreSelezionatoIva),Xe(2),mn("ngForOf",i.listaIva),Xe(2),mn("disabled",r.invalid),Xe(2),mn("disabled",r.invalid)}},dependencies:[ad,xx,av,b2,lV,dV,sv,w2,m2,v2,Hb,Gb,Vb,NG,lw,VG,GG],styles:[".login-container[_ngcontent-%COMP%]{width:320px;padding:30px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #0000001a;font-family:Arial,sans-serif;width:100%;max-width:800px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;border-radius:4px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;margin-top:20px;padding:10px;background:#1976d2;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background:#125a9c}.row[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;grid-template-columns:1fr 100px;column-gap:20px}.field1[_ngcontent-%COMP%]{width:250px;display:flex;flex-direction:column;gap:4px}.field1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:120px;display:inline-block}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#88b3d5}mat-form-field[_ngcontent-%COMP%]{background-color:#93c5e6;padding:4px;border-radius:4px}.field[_ngcontent-%COMP%]{display:grid;width:550px;grid-template-columns:120px 1fr;align-items:center;column-gap:10px;flex-wrap:nowrap}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;white-space:nowrap}.small-date[_ngcontent-%COMP%]{width:180px;min-width:120px}button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.small-date[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0!important}.small-date[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{height:40px}.small-date[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}"]})};var Rc=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,r=i.get(e);return!r&&n&&(r=new Set,i.set(e,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let{frameworkOverrides:i}=this,r=a=>{let l=i?()=>i.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},o=this.getListeners(n,t,!1);if((o?.size??0)>0){let a=new Set(o);for(let l of a)o?.has(l)&&r(()=>l(e))}let s=this.getGlobalListeners(t);if(s.size>0){let a=new Set(s);for(let l of a)r(()=>l(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(let t of e)t()}};function hi(e){return e==null||e===""?null:e}function _e(e){return e!=null&&e!==""}function jt(e){return!_e(e)}function Xr(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Pu(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function u0(e,t,n={}){n.transform&&(e=n.transform(e),t=n.transform(t));let i=e==null,r=t==null;if(e?.toNumber&&(e=e.toNumber()),t?.toNumber&&(t=t.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof e!="string"||!n.accentedCompare)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var Tpe=/[&<>"']/g,Ppe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ca(e){return e?.toString().toString()??null}function Zr(e){return ca(e)?.replace(Tpe,t=>Ppe[t])??null}function Fd(e){return typeof e=="string"&&e.startsWith("=")&&e.length>1}function ra(e){return e.eRootDiv.getRootNode()}function wt(e){return ra(e).activeElement}function vi(e){let{gos:t,eRootDiv:n}=e,i=null,r=t.get("getDocument");return r&&_e(r)?i=r():n&&(i=n.ownerDocument),i&&_e(i)?i:document}function Ts(e){let t=wt(e);return t===null||t===vi(e).body}function aW(e){return vi(e).defaultView||window}function rp(e){let t=null,n=null;try{t=vi(e).fullscreenElement}catch{}finally{t||(t=ra(e));let i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function kpe(e){return rp(e)?.clientWidth??(window.innerWidth||-1)}function Lpe(e){return rp(e)?.clientHeight??(window.innerHeight||-1)}function Ps(e,t,n){n==null||typeof n=="string"&&n==""?Ak(e,t):ja(e,t,n)}function ja(e,t,n){e.setAttribute(lW(t),n.toString())}function Ak(e,t){e.removeAttribute(lW(t))}function lW(e){return`aria-${e}`}function Jn(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Ope(e){let t=e?.direction;return t==="asc"?"ascending":t==="desc"?"descending":t==="mixed"?"other":"none"}function cW(e){return Number.parseInt(e.getAttribute("aria-posinset"),10)}function Npe(e){return e.getAttribute("aria-label")}function Ut(e,t){Ps(e,"label",t)}function Fc(e,t){Ps(e,"labelledby",t)}function op(e,t){Ps(e,"describedby",t)}function dW(e,t){Ps(e,"live",t)}function Bpe(e,t){Ps(e,"atomic",t)}function Vpe(e,t){Ps(e,"relevant",t)}function Rk(e,t){Ps(e,"invalid",t)}function sp(e,t){Ps(e,"level",t)}function h0(e,t){Ps(e,"disabled",t)}function o_(e,t){Ps(e,"hidden",t)}function s_(e,t){Ps(e,"activedescendant",t)}function Fi(e,t){ja(e,"expanded",t)}function a_(e){Ak(e,"expanded")}function gg(e,t){ja(e,"setsize",t)}function mg(e,t){ja(e,"posinset",t)}function Gpe(e,t){ja(e,"multiselectable",t)}function Hpe(e,t){ja(e,"rowcount",t)}function r0(e,t){ja(e,"rowindex",t)}function zpe(e,t){ja(e,"rowspan",t)}function jpe(e,t){ja(e,"colcount",t)}function l_(e,t){ja(e,"colindex",t)}function Fk(e,t){ja(e,"colspan",t)}function Upe(e,t){ja(e,"sort",t)}function Wpe(e){Ak(e,"sort")}function p0(e,t){Ps(e,"selected",t)}function c_(e,t){ja(e,"checked",t===void 0?"mixed":t)}function d_(e,t){Ps(e,"controls",t)}function ay(e,t){d_(e,t.id),Fc(t,e.id)}function $j(e,t){Ps(e,"owns",t)}function uW(e,t){Ps(e,"haspopup",t===!1?null:t)}function u_(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function f0(e,t,n){let i=e.parentElement,r=i&&i.firstChild;for(;r;)t&&r.classList.toggle(t,r===e),n&&r.classList.toggle(n,r!==e),r=r.nextSibling}var $pe="[tabindex], input, select, button, textarea, [href]",hW="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Ww(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(hW)?!1:Dr(e)}function Ie(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||o_(e,!t)}function Mk(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||o_(e,!t)}function ep(e,t){let n="disabled",i=t?o=>o.setAttribute(n,""):o=>o.removeAttribute(n);i(e);let r=e.querySelectorAll("input")??[];for(let o of r)i(o)}function ng(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function vg(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:u,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(e),C=Number.parseFloat;return{height:C(t||"0"),width:C(n||"0"),borderTopWidth:C(i||"0"),borderRightWidth:C(r||"0"),borderBottomWidth:C(o||"0"),borderLeftWidth:C(s||"0"),paddingTop:C(a||"0"),paddingRight:C(l||"0"),paddingBottom:C(c||"0"),paddingLeft:C(d||"0"),marginTop:C(u||"0"),marginRight:C(h||"0"),marginBottom:C(p||"0"),marginLeft:C(f||"0"),boxSizing:g}}function ly(e){let t=vg(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function lg(e){let t=vg(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function g0(e){let{height:t,marginBottom:n,marginTop:i}=vg(e);return Math.floor(t+n+i)}function Md(e){let{width:t,marginLeft:n,marginRight:i}=vg(e);return Math.floor(t+n+i)}function pW(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:o}=vg(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(r||0),bottom:t.bottom+(o||0)}}function GD(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function HD(e,t,n){n&&(t*=-1),e.scrollLeft=t}function at(e){for(;e?.firstChild;)e.firstChild.remove()}function Bt(e){e?.parentNode&&e.remove()}function Ik(e){return!!e.offsetParent}function Dr(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!Ik(e)||window.getComputedStyle(e).visibility!=="visible")}function Tk(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function fW(e,t,n){n&&n.nextSibling===t||(e.firstChild?n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function gW(e,t){for(let n=0;n<t.length;n++){let i=t[n],r=e.children[n];r!==i&&e.insertBefore(i,r)}}function qpe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function cy(e,t){if(t)for(let n of Object.keys(t)){let i=t[n];if(!n?.length||i==null)continue;let r=qpe(n),o=i.toString(),s=o.replace(/\s*!important/g,""),a=s.length!=o.length?"important":void 0;e.style.setProperty(r,s,a)}}function Iu(e){return()=>{let t=e();return t?Pk(t)||mW(t):!0}}function Pk(e){return e.clientWidth<e.scrollWidth}function mW(e){return e.clientHeight<e.scrollHeight}function zD(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):_l(e,t)}function _l(e,t){t=kk(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function $w(e,t){t=kk(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function kk(e){return typeof e=="number"?`${e}px`:e}function dy(e){return e instanceof Node||e instanceof HTMLElement}function sa(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function Pl(e,t,n){let r=aW(e).ResizeObserver,o=r?new r(n):null;return o?.observe(t),()=>o?.disconnect()}function ks(e,t){let n=aW(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var vW="data-ref",b3;function qj(){return b3??(b3=document.createTextNode(" ")),b3.cloneNode()}function Qi(e){let{attrs:t,children:n,cls:i,ref:r,role:o,tag:s}=e,a=document.createElement(s);if(i&&(a.className=i),r&&a.setAttribute(vW,r),o&&a.setAttribute("role",o),t)for(let l of Object.keys(t))a.setAttribute(l,t[l]);if(n)if(typeof n=="string")a.textContent=n;else{let l=!0;for(let c of n)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(qj()),l=!1),a.append(Qi(c)),a.appendChild(qj())))}return a}var Kpe=["touchstart","touchend","touchmove","touchcancel","scroll"],Ype=["wheel"],w3={},CW=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof w3[n]=="boolean")return w3[n];let i=document.createElement(e[n]||"div");return n="on"+n,w3[n]=n in i}})();function h_(e,t){return!t||!e?!1:Xpe(t).indexOf(e)>=0}function Zpe(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function Xpe(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():Zpe(t)}function Qpe(e,t,n){let i=Jpe(t),r;i!=null&&(r={passive:i}),e.addEventListener(t,n,r)}var Jpe=e=>{let t=Kpe.includes(e),n=Ype.includes(e);if(t)return!0;if(n)return!1};function bW(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(i,r)<=n}var Kv=(e,t)=>{let n=e.identifier;for(let i=0,r=t.length;i<r;++i){let o=t[i];if(o.identifier===n)return o}return null};function Qw(e,t){return e.gos.isElementInThisInstance(t.target)}function p_(e,t,n){let r=e.getBoundingClientRect().height,o=kpe(n)-2,s=Lpe(n)-2;if(!e.offsetParent)return;let l=pW(e.offsetParent),{clientY:c,clientX:d}=t,u=c-l.top-r/2,h=d-l.left-10,p=vi(n),f=p.defaultView||window,g=f.pageYOffset||p.documentElement.scrollTop,C=f.pageXOffset||p.documentElement.scrollLeft;o>0&&h+e.clientWidth>o+C&&(h=o+C-e.clientWidth),h<0&&(h=0),s>0&&u+e.clientHeight>s+g&&(u=s+g-e.clientHeight),u<0&&(u=0),e.style.left=`${h}px`,e.style.top=`${u}px`}var RD=(e,...t)=>{for(let n of t){let[i,r,o,s]=n;i.addEventListener(r,o,s),e.push(n)}},Lk=e=>{if(e){for(let[t,n,i,r]of e)t.removeEventListener(n,i,r);e.length=0}},jv=e=>{e.cancelable&&e.preventDefault()};function efe(e,t){return t}function wW(e){return e?.getLocaleTextFunc()??efe}function uy(e,t,n,i){let r=t[n];return e.getLocaleTextFunc()(n,typeof r=="function"?r(i):r,i)}function tfe(e){return(t,n,i)=>e({key:t,defaultValue:n,variableValues:i})}function nfe(e){return(t,n,i)=>{let r=e?.[t];if(r&&i?.length){let o=0;for(;!(o>=i.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",i[o++])}return r??n}}var Gr=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){let{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new Rc),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i of Object.keys(t)){let r=t[i];r&&n.push(this._setupListener(e,i,r))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;if(ife(e))e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null);else{let r=rfe(e);e instanceof HTMLElement?Qpe(e,t,n):r?e.addListener(t,n):e.addEventListener(t,n),i=r?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupPropertyListener(e,t){let{gos:n}=this;n.addPropertyEventListener(e,t);let i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}let o={type:"propertyChanged",changeSet:r.changeSet,source:r.source};t(o)};for(let r of e)this.setupPropertyListener(r,i)}getLocaleTextFunc(){return wW(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function ife(e){return e.__addEventListener!==void 0}function rfe(e){return e.eventServiceType==="global"}var K=class extends Gr{},J3=new Set,m0=(e,t)=>{J3.has(t)||(J3.add(t),e())};m0._set=J3;var ofe={pending:!1,funcs:[]},sfe={pending:!1,funcs:[]};function Jw(e,t="setTimeout",n){let i=t==="raf"?sfe:ofe;if(i.funcs.push(e),i.pending)return;i.pending=!0;let r=()=>{let o=i.funcs.slice();i.funcs.length=0,i.pending=!1;for(let s of o)s()};t==="raf"?ks(n,r):window.setTimeout(r,0)}function $n(e,t,n){let i;return function(...r){let o=this;return window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(o,r)},n),i}}function Kj(e,t){let n=0;return function(...i){let r=this,o=Date.now();o-n<t||(n=o,e.apply(r,i))}}function Ok(e,t,n,i=100){let r=Date.now(),o=null,s=!1,a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);let l=()=>{let c=Date.now()-r>i;(t()||c)&&(n(),s=!0,a())};l(),s||(o=window.setInterval(l,10))}var yW=new Set(["__proto__","constructor","prototype"]);function afe(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let n of Object.keys(e).filter(i=>!yW.has(i)))t(n,e[n])}}function ji(e,t,n=!0,i=!1){_e(t)&&afe(t,(r,o)=>{let s=e[r];s!==o&&(i&&s==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(s={},e[r]=s),Yj(o)&&Yj(s)&&!Array.isArray(s)?ji(s,o,n,i):(n||o!==void 0)&&(e[r]=o))})}function Yj(e){return typeof e=="object"&&e!==null}var lfe=(()=>{let e=class Au{static applyGlobalGridOptions(n){if(!Au.gridOptions)return T({},n);let i={};return ji(i,Au.gridOptions,!0,!0),Au.mergeStrategy==="deep"?ji(i,n,!0,!0):i=T(T({},i),n),Au.gridOptions.context&&(i.context=Au.gridOptions.context),n.context&&(Au.mergeStrategy==="deep"&&i.context&&ji(n.context,i.context,!0,!0),i.context=n.context),i}static applyGlobalGridOption(n,i){if(Au.mergeStrategy==="deep"){let r=cfe(n);if(r&&typeof r=="object"&&typeof i=="object")return Au.applyGlobalGridOptions({[n]:i})[n]}return i}};return e.gridOptions=void 0,e.mergeStrategy="shallow",e})(),Nk=lfe;function cfe(e){return Nk.gridOptions?.[e]}var dfe={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},SW="https://www.ag-grid.com";function tp(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function Al(e,...t){m0(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Yv(e,...t){m0(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var xW=new Set,jD={},ig={},FD,EW=!1,DW=!1,ufe=!1;function hfe(e){let[t,n]=e.version.split(".")||[],[i,r]=FD.split(".")||[];return t===i&&n===r}function pfe(e){FD||(FD=e.version);let t=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;e.version?hfe(e)||Yv(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${FD}.`)):Yv(t(`'${e.moduleName}' is incompatible.`));let n=e.validate?.();n&&!n.isValid&&Yv(`${n.message}`)}function ey(e,t,n=!1){n||(EW=!0),pfe(e);let i=e.rowModels??["all"];xW.add(e);let r;t!==void 0?(DW=!0,ig[t]===void 0&&(ig[t]={}),r=ig[t]):r=jD;for(let o of i)r[o]===void 0&&(r[o]={}),r[o][e.moduleName]=e;if(e.dependsOn)for(let o of e.dependsOn)ey(o,t,n)}function ffe(e){delete ig[e]}function ek(e,t,n){let i=r=>!!jD[r]?.[e]||!!ig[t]?.[r]?.[e];return i(n)||i("all")}function Bk(){return DW}function gfe(e,t){let n=ig[e]??{};return[...Object.values(jD.all??{}),...Object.values(n.all??{}),...Object.values(jD[t]??{}),...Object.values(n[t]??{})]}function mfe(){return new Set(xW)}function _W(e,t){let n=ig[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function vfe(){return EW}function Vk(){return ufe}var hy=class{static register(e){ey(e,void 0)}static registerModules(e){for(let t of e)ey(t,void 0)}},Je="35.0.0",Zj=2e3,Xj=100,AW="_version_",RW=null,Zv=`${SW}/javascript-data-grid`;function Cfe(e){RW=e}function bfe(e){Zv=e}function FW(e,t,n){return RW?.(e,t)??[xfe(e,t,n)]}function f_(e,t,n,i,r){e(`${i?"warning":"error"} #${t}`,...FW(t,n,r))}function wfe(e){if(!e)return String(e);let t={};for(let n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function yfe(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=wfe(e)),t}function MD(e){return e===void 0?"undefined":e===null?"null":e}function tk(e,t){return`${e}?${t.toString()}`}function Sfe(e,t,n){let i=Array.from(t.entries()).sort((o,s)=>s[1].length-o[1].length),r=tk(e,t);for(let[o,s]of i){if(o===AW)continue;let a=r.length-n;if(a<=0)break;let l="...",c=a+l.length,d=s.length-c>Xj?s.slice(0,s.length-c)+l:s.slice(0,Xj)+l;t.set(o,d),r=tk(e,t)}return r}function MW(e,t){let n=new URLSearchParams;if(n.append(AW,Je),t)for(let o of Object.keys(t))n.append(o,yfe(t[o]));let i=`${Zv}/errors/${e}`,r=tk(i,n);return r.length<=Zj?r:Sfe(i,n,Zj)}var xfe=(e,t,n)=>{let i=MW(e,t),r=`${n?n+` 
`:""}Visit ${i}`;return Vk()?r:`${r}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function X(...e){f_(Al,e[0],e[1],!0)}function mt(...e){f_(Yv,e[0],e[1],!1)}function jw(e,t,n){f_(Yv,e,t,!1,n)}function IW(e,t,n){f_(Al,e,t,!0,n)}function TW(e,t){let n=t[0];return`error #${n} `+FW(n,t[1],e).join(" ")}function Bo(...e){return TW(void 0,e)}function g_(...e){return TW(`
`,e)}function PW(e,t){return e.get("rowModelType")===t}function nn(e,t){return PW(e,"clientSide")}function Ui(e,t){return PW(e,"serverSide")}function po(e,t){return e.get("domLayout")===t}function ss(e){return ug(e)!==void 0}function m_(e){return typeof e.get("getRowHeight")=="function"}function Efe(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Pd({gos:e,formula:t}){let n=e.get("rowNumbers");return n||!!t?.active&&n!==!1}function Nr(e,t,n=!1,i){let{gos:r,environment:o}=e;if(i==null&&(i=o.getDefaultRowHeight()),m_(r)){if(n)return{height:i,estimated:!0};let l={node:t,data:t.data},c=r.getCallback("getRowHeight")(l);if(nk(c))return c===0&&X(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&r.get("masterDetail"))return Dfe(r);let s=r.get("rowHeight");return{height:s&&nk(s)?s:i,estimated:!1}}function Dfe(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return nk(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function fo(e){let{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||jt(i))return t.getDefaultRowHeight();let r=t.refreshRowHeightVariable();return r!==-1?r:(X(24),t.getDefaultRowHeight())}function nk(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function kW(e,t,n){let i=t[e.getDomDataKey()];return i?i[n]:void 0}function cg(e,t,n,i){let r=e.getDomDataKey(),o=t[r];jt(o)&&(o={},t[r]=o),o[n]=i}function Xv(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function v0(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||po(e,"print"))}function xl(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function dg(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function kl(e){return e.get("grandTotalRow")}function kd(e){let t=e.get("groupTotalRow");return typeof t=="function"?e.getCallback("groupTotalRow"):()=>t??void 0}function C0(e){return e.get("groupHideOpenParents")?!0:e.get("groupDisplayType")==="multipleColumns"}function v_(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function C_(e,t,n){return!!t.group&&!t.footer&&v_(e,n)}function Fl(e){let t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(m0(()=>X(25,{id:i}),"getRowIdString"),i=String(i)),i}}function _fe(e,t){let n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function Gk(e){let t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function b_(e,t){let n=e.get("suppressGroupChangesColumnVisibility");if(n===!0||t&&n==="suppressHideOnGroup"||!t&&n==="suppressShowOnUngroup")return!1;let i=e.get("suppressRowGroupHidesColumns");if(t&&i===!0)return!1;let r=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&r===!0)}function Xh(e){return e?.checkboxes??!0}function ID(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function o0(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function y3(e){return e?.hideDisabledCheckboxes??!1}function py(e){return typeof e.get("rowSelection")!="string"}function LW(e){return e.get("cellSelection")!==void 0}function b0(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function Vo(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function w_(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"&&t.handle?.mode==="fill"?t.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}}function Qh(e){let t=e.get("cellSelection")??!1;return(typeof t=="object"&&t.enableColumnSelection)??!1}function OW(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function Afe(e){let t=OW(e);return t===!0||t==="enableSelection"}function Rfe(e){let t=OW(e);return t===!0||t==="enableDeselection"}function ik(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function ug(e){let t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Ml(e){return ug(e)==="multiRow"}function Ffe(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function UD(e){let t=e.get("rowSelection");if(typeof t=="string"){let n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function NW(e,t=!0){let n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Mfe(e){let t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function np(e){let t=UD(e);return t==="descendants"||t==="filteredDescendants"}function Qj(e){let t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function Hk(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Yr(e){return e.get("columnMenu")==="legacy"}function zk(e){return!Yr(e)}function Ife(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function BW(e,t,n){typeof e!="object"&&(e={});let i=T({},e);for(let r of n){let o=t[r];typeof o<"u"&&(i[r]=o)}return i}function VW(e,t){if(!e)return;let n={},i=!1;for(let s of Object.keys(e))n[s]=e[s],i=!0;if(!i)return;let r={type:"gridOptionsChanged",options:n};t.dispatchEvent(r);let o=T({type:"componentStateChanged"},n);t.dispatchEvent(o)}function Oe(e,t){return e.addCommon(t)}function fy({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var Tfe={resizable:!0,sortable:!0},Pfe=0;function GW(){return Pfe++}function Il(e){return e instanceof da}var kfe=["asc","desc",null],Lfe=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],da=class extends K{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=GW(),this.autoHeaderHeight=null,this.sortDef=Ac(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Rc,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Zr(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}initState(){let{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t?.initCol(this);let r=e.hide;r!==void 0?this.visible=!r:this.visible=!e.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(e,t,n){let i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){let{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=_e(t)&&t.includes(".")&&!i,this.tooltipFieldContainsDots=_e(n)&&n.includes(".")&&!i}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){let e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{let i=e.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return Oe(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Tfe[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return Oe(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){let e=[],{sort:t,initialSort:n}=this.colDef,i=t===null?t:Ms(t?.type),r=n===null?n:Ms(n?.type);return i&&e.push(i),r&&e.push(r),e}getSortingOrder(){let e=this.getColDefAllowedSortTypes().includes("absolute")?Lfe:kfe;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??e).map(t=>Ac(t))}getAvailableSortTypes(){let e=this.getSortingOrder().reduce((t,n)=>(n.direction&&t.push(n.type),t),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e,t=!1){t||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.getSort()==="asc"}isSortDescending(){return this.getSort()==="desc"}isSortNone(){return jt(this.getSort())}isSorting(){return _e(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return X(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Oe(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(jt(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(jt(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}isAllowFormula(){return this.colDef.allowFormula===!0}dispatchColEvent(e,t,n){let i=this.createColumnEvent(e,t);n&&ji(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Ac(e){return Qv(e)?{direction:e.direction,type:e.type}:{direction:w0(e),type:Ms(e)}}function Jh(e){return e==="asc"||e==="desc"||e===null}function jk(e){return e==="default"||e==="absolute"}function Qv(e){if(!e||typeof e!="object")return!1;let t=e;return jk(t.type)&&Jh(t.direction)}function TD(e,t){return e?t?e.type===t.type&&e.direction===t.direction:e?e.direction===null:!0:t?t.direction===null:!0}function w0(e){return Jh(e)?e:null}function Ms(e){return jk(e)?e:"default"}function Qn(e){return e instanceof rg}var rg=class extends K{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=GW(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(let t of this.children)Il(t)?e(t):Qn(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(let t of this.children)Il(t)?e.push(t):Qn(t)&&t.addLeafColumns(e)}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);for(let t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(let t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let o=0,s=i.length;o<s;o++){let a=i[o];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let r=e&&t&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{for(let i of n)Qn(i)&&i.isPadding()?t(i.children):e.push(i)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Ofe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function rk(e,t,n){let i={},r=e.gos;return Object.assign(i,r.get("defaultColGroupDef")),Object.assign(i,t),r.validateColDef(i,n),i}var Nfe=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Xr(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){let r=String(i);return e&&n>0&&X(273,{providedId:e,usedId:r}),this.existingKeys[r]=!0,r}n++}}},Cg=Object.freeze([]);function Qe(e){if(e?.length)return e[e.length-1]}function Hr(e,t,n){if(e===t)return!0;if(!e||!t)return e==null&&t==null;let i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(e[r]!==t[r]&&!n?.(e[r],t[r]))return!1;return!0}function Ow(e,t){if(e){for(let n of e)if(t(n))return!0}}function Ci(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function y_(e,t){let n=0,i=0;for(;n<e.length;n++)t.includes(e[n])||(e[i]=e[n],i++);for(;i<e.length;)e.pop()}function Jj(e,t,n){for(let i=0;i<t.length;i++)Ci(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}function S_(e){return[].concat.apply([],e)}var Mc="ag-Grid-AutoColumn",HW="ag-Grid-SelectionColumn",x_="ag-Grid-RowNumbersColumn",zW="ag-Grid-HierarchyColumn";function E_(e){let t=[],n=i=>{for(let r=0;r<i.length;r++){let o=i[r];Il(o)?t.push(o):Qn(o)&&n(o.getChildren())}};return n(e),t}function Ru(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function Is(e,t,n){let i={};if(!t)return;Rd(null,t,o=>{i[o.getInstanceId()]=o}),n&&Rd(null,n,o=>{i[o.getInstanceId()]=null});let r=Object.values(i).filter(o=>o!=null);e.context.destroyBeans(r)}function bg(e){return e.getId().startsWith(Mc)}function Ld(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(HW)??!1}function Or(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(x_)??!1}function gy(e){return Ld(e)||Or(e)}function WD(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function wg(e,t){return Hr(e,t,(n,i)=>n.getColId()===i.getColId())}function yg(e){e.map={};for(let t of e.list)e.map[t.getId()]=t}function Rl(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function Ad(e,t){let n=e===t,i=e.getColDef()===t,r=e.getColId()==t;return n||i||r}var Bfe=(e,t)=>(n,i)=>{let r={value1:void 0,value2:void 0},o=!1;return e&&(e[n]!==void 0&&(r.value1=e[n],o=!0),_e(i)&&e[i]!==void 0&&(r.value2=e[i],o=!0)),!o&&t&&(t[n]!==void 0&&(r.value1=t[n]),_e(i)&&t[i]!==void 0&&(r.value2=t[i])),r};function my(e,t){let n=ce(T({},e),{sort:void 0,colId:t}),i=jW(e);return i&&(n.sort=i.direction,n.sortType=i.type),n}function jW(e){let{sort:t,initialSort:n}=e,i=Qv(t)||Jh(t),r=Qv(n)||Jh(n);return i?Ac(t):r?Ac(n):null}var UW=(e,t)=>{Qn(e)&&e.setupExpandable(),e.originalParent=t};function WW(e,t=null,n,i,r){let{existingCols:o,existingGroups:s}=$W(i),a=new Map(o.map(g=>[g.getId(),g])),l=new Map(s.map(g=>[g.getId(),g])),c=0,d=(g,C)=>{if(c=Math.max(c,C),ZW(g)){if(!e.colGroupSvc)return null;let D=g.groupId,F=l.get(D),L=rk(e,g,D),V=new rg(L,D,!1,C);return e.context.createBean(V),F&&V.setExpanded(F.isExpanded()),V.setChildren(g.children.map(B=>d(B,C+1))),V}let m=g.colId,w=a.get(m),x=ku(e,g,w?.getColId()??m);return w?(w.setColDef(x,g,r),YW(e,w,x,r)):(w=new da(x,g,m,n),e.context.createBean(w)),e.dataTypeSvc?.addColumnListeners(w),w},u=t?.map(g=>d(g,0))??[],h=0,p={getUniqueKey:(g,C)=>String(++h)},f=e.colGroupSvc?e.colGroupSvc.balanceColumnTree(u,0,c,p):u;return Rd(null,f,UW),{columnTree:f,treeDepth:c}}function Uk(e,t=null,n,i,r){let o=new Nfe,{existingCols:s,existingGroups:a,existingColKeys:l}=$W(i);o.addExistingKeys(l);let c=qW(e,t,0,n,s,o,a,r),{colGroupSvc:d}=e,u=d?.findMaxDepth(c,0)??0,h=d?d.balanceColumnTree(c,0,u,o):c;return Rd(null,h,UW),{columnTree:h,treeDepth:u}}function $W(e){let t=[],n=[],i=[];return e&&Rd(null,e,r=>{if(Qn(r)){let o=r;n.push(o)}else{let o=r;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function qW(e,t,n,i,r,o,s,a){if(!t)return[];let{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){let u=t[d];l&&ZW(u)?c[d]=l.createProvidedColumnGroup(i,u,n,r,o,s,a):c[d]=Vfe(e,i,u,r,o,a)}return c}function Vfe(e,t,n,i,r,o){let s=Gfe(n,i);s&&i?.splice(s.idx,1);let a=s?.column;if(a){let l=ku(e,n,a.getColId());a.setColDef(l,n,o),YW(e,a,l,o)}else{let l=r.getUniqueKey(n.colId,n.field),c=ku(e,n,l);a=new da(c,n,l,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}function KW(e,t,n,i,r,o,s,a){let{sortSvc:l,pinnedCols:c,colFlex:d}=e;n!==void 0&&t.setVisible(!n,a),l&&(l.updateColSort(t,i,a),r!==void 0&&l.setColSortIndex(t,r)),o!==void 0&&c?.setColPinned(t,o),s!==void 0&&d?.setColFlex(t,s)}function YW(e,t,n,i){KW(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);let r=t.getFlex();if(!(r!=null&&r>0))if(n.width!=null)t.setActualWidth(n.width,i);else{let o=t.getActualWidth();t.setActualWidth(o,i)}}function Gfe(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function ku(e,t,n,i){let{gos:r,dataTypeSvc:o}=e,s={},a=r.get("defaultColDef");ji(s,a,!1,!0);let l=Hfe(e,s,t,n);l&&zfe(e,l,s);let c=s.cellDataType;ji(s,t,!1,!0),c!==void 0&&(s.cellDataType=c);let d=r.get("autoGroupColumnDef"),u=xl(r);return t.rowGroup&&d&&u&&ji(s,{sort:d.sort,initialSort:d.initialSort},!1,!0),o?.postProcess(s),o?.validateColDef(s),r.validateColDef(s,n,i),s}function Hfe(e,t,n,i){let r=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,i),o=n.type??r??t.type;return t.type=o,o?WD(o):void 0}function zfe(e,t,n){if(!t.length)return;let i=Object.assign({},Ofe),r=e.gos.get("columnTypes")||{};for(let o of Object.keys(r)){let s=r[o];o in i?X(34,{key:o}):(s.type&&X(35),i[o]=s)}for(let o of t){let s=i[o.trim()];s?ji(n,s,!1,!0):X(36,{t:o})}}function ZW(e){return e.children!==void 0}function Rd(e,t,n){if(t)for(let i=0;i<t.length;i++){let r=t[i];Qn(r)&&Rd(r,r.getChildren(),n),n(r,e)}}function XW(e,t){let n=[],i=[],r=[];return e.forEach(s=>{let a=s.getColDef().lockPosition;a==="right"?r.push(s):a==="left"||a===!0?n.push(s):i.push(s)}),t.get("enableRtl")?[...r,...i,...n]:[...n,...i,...r]}function QW(e,t){let n=!0;return Rd(null,t,i=>{if(!Qn(i))return;let r=i;if(!r.getColGroupDef()?.marryChildren)return;let a=[];for(let h of r.getLeafColumns()){let p=e.indexOf(h);a.push(p)}let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,u=r.getLeafColumns().length-1;d>u&&(n=!1)}),n}function JW(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function e$(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,r=JW(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:r??null,columns:t,column:i,source:n})}function jfe(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,r=JW(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:r,columns:t,column:i,source:n})}function t$(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function s0(e,t,n,i,r=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:r,finished:n,source:i})}function go(e,t,n){let{colModel:i,rowGroupColsSvc:r,pivotColsSvc:o,autoColSvc:s,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:d,environment:u,valueColsSvc:h,eventSvc:p,gos:f}=e,g=i.getColDefCols()??[],C=a?.getColumns();if(!g.length&&!C?.length)return!1;if(t?.state&&!t.state.forEach)return X(32),!1;let m=(F,L,V,B,P)=>{if(!F)return;let U=Bfe(L,t.defaultState),A=U("flex").value1,I=U("sort").value1,j=U("sortType").value1,G=Jh(I)||jk(j),Q=Ms(j),le=w0(I),me=G?{type:Q,direction:le}:void 0;if(KW(e,F,U("hide").value1,me,U("sortIndex").value1,U("pinned").value1,A,n),A==null){let ge=U("width").value1;if(ge!=null){let se=F.getColDef().minWidth??u.getDefaultColumnMinWidth();se!=null&&ge>=se&&F.setActualWidth(ge,n)}}P||!F.isPrimary()||(h?.syncColumnWithState(F,n,U),r?.syncColumnWithState(F,n,U,V),o?.syncColumnWithState(F,n,U,B))},w=(F,L,V)=>{let B=n$(e,n),P=L.slice(),U={},A={},I=[],j=[],G=[],Q=0,le=r?.columns.slice()??[],me=o?.columns.slice()??[];for(let de of F){let he=de.colId;if(he.startsWith(Mc)){I.push(de),G.push(de);continue}if(Ld(he)){j.push(de),G.push(de);continue}let ee=V(he);ee?(m(ee,de,U,A,!1),Ci(P,ee)):(G.push(de),Q+=1)}let ge=de=>m(de,null,U,A,!1);P.forEach(ge),r?.sortColumns(eU.bind(r,U,le)),o?.sortColumns(eU.bind(o,A,me)),i.refreshCols(!1,n);let se=(de,he,M=[])=>{for(let ee of he){let te=de(ee.colId);Ci(M,te),m(te,ee,null,null,!0)}M.forEach(ge)};return se(de=>s?.getColumn(de)??null,I,s?.getColumns()?.slice()),se(de=>a?.getColumn(de)??null,j,a?.getColumns()?.slice()),Ufe(t,i,f),c.refresh(n),p.dispatchEvent({type:"columnEverythingChanged",source:n}),B(),{unmatchedAndAutoStates:G,unmatchedCount:Q}};l?.start();let{unmatchedAndAutoStates:x,unmatchedCount:D}=w(t.state||[],g,F=>i.getColDefCol(F));if(x.length>0||_e(t.defaultState)){let F=d?.getPivotResultCols()?.list??[];D=w(x,F,L=>d?.getPivotResultCol(L)??null).unmatchedCount}return l?.finish(),D===0}function Wk(e,t){let{colModel:n,autoColSvc:i,selectionColSvc:r,eventSvc:o,gos:s}=e,a=n.getColDefCols();if(!a?.length)return;let l=n.getColDefColTree(),c=E_(l),d=[],u=1e3,h=1e3,p=w=>{let x=i$(w);jt(x.rowGroupIndex)&&x.rowGroup&&(x.rowGroupIndex=u++),jt(x.pivotIndex)&&x.pivot&&(x.pivotIndex=h++),d.push(x)};i?.getColumns()?.forEach(p),r?.getColumns()?.forEach(p),c?.forEach(p),go(e,{state:d},t);let f=i?.getColumns()??[],m=[...r?.getColumns()??[],...f,...a].map(w=>({colId:w.colId}));go(e,{state:m,applyOrder:!0},t),o.dispatchEvent(Oe(s,{type:"columnsReset",source:t}))}function n$(e,t){let{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:r,colModel:o,sortSvc:s,eventSvc:a}=e,l={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:r?.columns.slice()??[]},c=$D(e),d={};for(let u of c)d[u.colId]=u;return()=>{let u=(L,V,B,P)=>{let U=V.map(P),A=B.map(P);if(Hr(U,A))return;let j=new Set(V);for(let Q of B)j.delete(Q)||j.add(Q);let G=[...j];a.dispatchEvent({type:L,columns:G,column:G.length===1?G[0]:null,source:t})},h=L=>{let V=[];return o.forAllCols(B=>{let P=d[B.getColId()];P&&L(P,B)&&V.push(B)}),V},p=L=>L.getColId();u("columnRowGroupChanged",l.rowGroupColumns,n?.columns??[],p),u("columnPivotChanged",l.pivotColumns,i?.columns??[],p);let g=h((L,V)=>{let B=L.aggFunc!=null,P=B!=V.isValueActive(),U=B&&L.aggFunc!=V.getAggFunc();return P||U});g.length>0&&t$(a,"columnValueChanged",g,t),s0(a,h((L,V)=>L.width!=V.getActualWidth()),!0,t),e$(a,h((L,V)=>L.pinned!=V.getPinned()),t),jfe(a,h((L,V)=>L.hide==V.isVisible()),t);let D=h((L,V)=>!TD(V.getSortDef(),{type:Ms(L.sortType),direction:w0(L.sort)})||L.sortIndex!=V.getSortIndex());D.length>0&&s?.dispatchSortChangedEvents(t,D);let F=$D(e);$fe(c,F,t,o,a)}}function $D(e){let{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,r=t.getColDefCols();if(jt(r)||!t.isAlive())return[];let o=n?.columns,s=i?.columns,a=[],l=d=>{let u=d.isRowGroupActive()&&o?o.indexOf(d):null,h=d.isPivotActive()&&s?s.indexOf(d):null,p=d.isValueActive()?d.getAggFunc():null,f=d.getSortIndex()!=null?d.getSortIndex():null;a.push({colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:d.getSort(),sortType:d.getSortDef()?.type,sortIndex:f,aggFunc:p,rowGroup:d.isRowGroupActive(),rowGroupIndex:u,pivot:d.isPivotActive(),pivotIndex:h,flex:d.getFlex()??null})};t.forAllCols(d=>l(d));let c=new Map(t.getCols().map((d,u)=>[d.getColId(),u]));return a.sort((d,u)=>{let h=c.has(d.colId)?c.get(d.colId):-1,p=c.has(u.colId)?c.get(u.colId):-1;return h-p}),a}function i$(e){let t=(C,m)=>C??m??null,n=e.getColDef(),i=Ac(t(n.sort,n.initialSort)),r=i.direction,o=i.type,s=t(n.sortIndex,n.initialSortIndex),a=t(n.hide,n.initialHide),l=t(n.pinned,n.initialPinned),c=t(n.width,n.initialWidth),d=t(n.flex,n.initialFlex),u=t(n.rowGroupIndex,n.initialRowGroupIndex),h=t(n.rowGroup,n.initialRowGroup);u==null&&!h&&(u=null,h=null);let p=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);p==null&&!f&&(p=null,f=null);let g=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:r,sortType:o,sortIndex:s,hide:a,pinned:l,width:c,flex:d,rowGroup:h,rowGroupIndex:u,pivot:f,pivotIndex:p,aggFunc:g}}function Ufe(e,t,n){if(!e.applyOrder||!e.state)return;let i=[];for(let r of e.state)r.colId!=null&&i.push(r.colId);Wfe(t.cols,i,t,n)}function Wfe(e,t,n,i){if(e==null)return;let r=[],o={};for(let a of t){if(o[a])continue;let l=e.map[a];l&&(r.push(l),o[a]=!0)}let s=0;for(let a of e.list){let l=a.getColId();if(o[l]!=null)continue;l.startsWith(Mc)?r.splice(s++,0,a):r.push(a)}if(r=XW(r,i),!QW(r,n.getColTree())){X(39);return}e.list=r}function $fe(e,t,n,i,r){let o={};for(let d of t)o[d.colId]=d;let s={};for(let d of e)o[d.colId]&&(s[d.colId]=!0);let a=e.filter(d=>s[d.colId]),l=t.filter(d=>s[d.colId]),c=[];l.forEach((d,u)=>{let h=a?.[u];if(h&&h.colId!==d.colId){let p=i.getCol(h.colId);p&&c.push(p)}}),c.length&&r.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:n})}var eU=(e,t,n,i)=>{let r=e[n.getId()],o=e[i.getId()],s=r!=null,a=o!=null;if(s&&a)return r-o;if(s)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),d=l>=0,u=c>=0;return d&&u?l-c:d?-1:1},qfe=class extends K{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Rl(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Rl(e.source)))}createColsFromColDefs(e){let{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:r,pivotColsSvc:o,valueColsSvc:s,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,d=this.colDefs?n$(t,e):void 0;n?.expire();let u=this.colDefCols?.list,h=this.colDefCols?.tree,p=Uk(t,this.colDefs,!0,h,e);Is(t,this.colDefCols?.tree,p.columnTree);let f=p.columnTree,g=p.treeDepth,C=E_(f),m={};for(let w of C)m[w.getId()]=w;this.colDefCols={tree:f,treeDepth:g,list:C,map:m},this.createColumnsForService([c],this.colDefCols,e),r?.extractCols(e,u),o?.extractCols(e,u),s?.extractCols(e,u),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;let n=this.cols?.tree;this.saveColOrder();let{autoColSvc:i,selectionColSvc:r,rowNumbersSvc:o,quickFilter:s,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:d,colViewport:u,eventSvc:h,formula:p}=this.beans,f=this.selectCols(a,this.colDefCols);p?.setFormulasActive(f),this.createColumnsForService([i,r,o],f,t);let g=Efe(this.gos,this.showingPivotResult);(!e||g)&&this.restoreColOrder(f),this.positionLockedCols(f),l?.refresh(),s?.refreshCols(),this.setColSpanActive(),c?.setAutoHeightActive(f),d.clear(),u.clear(),Hr(n,this.cols.tree)||h.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(let i of e)i&&(i.createColumns(t,r=>{this.lastOrder=r(this.lastOrder),this.lastPivotOrder=r(this.lastPivotOrder)},n),i.addColumns(t))}selectCols(e,t){let n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;let{map:i,list:r,tree:o,treeDepth:s}=n??t;return this.cols={list:r.slice(),map:T({},i),tree:o.slice(),treeDepth:s},n&&(n.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let{beans:e,showingPivotResult:t,cols:n}=this,{valueColsSvc:i,selectionColSvc:r}=e,o=this.isPivotMode()&&!t,s=r?.isSelectionColumnEnabled(),a=Pd(e),l=i?.columns;return n.list.filter(d=>{let u=bg(d);if(o){let h=l?.includes(d);return u||h||s&&Ld(d)||a&&Or(d)}else return u||d.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){go(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let n=t.filter(u=>e.map[u.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}let i=u=>{let h=u.getOriginalParent();return h?h.getChildren().length>1?!0:i(h):!1};if(!n.some(u=>i(u))){let u=new Set(n);for(let h of e.list)u.has(h)||n.push(h);e.list=n;return}let r=new Map;for(let u=0;u<n.length;u++){let h=n[u];r.set(h,u)}let o=e.list.filter(u=>!r.has(u));if(o.length===0){e.list=n;return}let s=(u,h)=>{let p=h?h.getOriginalParent():u.getOriginalParent();if(!p)return null;let f=null,g=null;for(let C of p.getChildren())if(!(C===h||C===u)){if(C instanceof da){let m=r.get(C);if(m==null)continue;(f==null||f<m)&&(f=m,g=C);continue}C.forEachLeafColumn(m=>{let w=r.get(m);w!=null&&(f==null||f<w)&&(f=w,g=m)})}return g??s(u,p)},a=[],l=new Map;for(let u of o){let h=s(u,null);if(h==null){a.push(u);continue}let p=l.get(h);p===void 0?l.set(h,u):Array.isArray(p)?p.push(u):l.set(h,[p,u])}let c=new Array(e.list.length),d=c.length-1;for(let u=a.length-1;u>=0;u--)c[d--]=a[u];for(let u=n.length-1;u>=0;u--){let h=n[u],p=l.get(h);if(p)if(Array.isArray(p))for(let f=p.length-1;f>=0;f--){let g=p[f];c[d--]=g}else c[d--]=p;c[d--]=h}e.list=c}positionLockedCols(e){e.list=XW(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);let{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){let e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);let t=Rl(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Is(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){let{pivotResultCols:t,autoColSvc:n,selectionColSvc:i,groupHierarchyColSvc:r}=this.beans;Ow(this.colDefCols?.list,e)||Ow(n?.columns?.list,e)||Ow(i?.columns?.list,e)||Ow(r?.columns?.list,e)||Ow(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let a=0;a<i.length;a++)if(Ad(i[a],e))return i[a];let{autoColSvc:r,selectionColSvc:o,groupHierarchyColSvc:s}=this.beans;return r?.getColumn(e)??o?.getColumn(e)??s?.getColumn(e)??null}},y0=class extends K{constructor(){super(...arguments),this.dispatchColumnChangedEvent=t$,this.columns=[],this.columnIndexMap={},this.updateIndexMap=()=>{this.columnIndexMap={},this.columns.forEach((e,t)=>this.columnIndexMap[e.getId()]=t)}}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols,this.groupHierarchCols=e.groupHierarchyColSvc}sortColumns(e){let{groupHierarchCols:t}=this;this.columns.sort((n,i)=>t?.compareVirtualColumns(n,i)??e(n,i)),this.updateIndexMap()}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}getColumnIndex(e){return this.columnIndexMap[e]}setColList(e=[],t,n,i,r,o,s){let a=this.colModel.getCols();if(!a||a.length===0)return;let l=new Map;t.forEach((d,u)=>l.set(d,u)),t.length=0;for(let d of e){let u=this.colModel.getColDefCol(d);u&&t.push(u)}t.forEach((d,u)=>{let h=l.get(d);if(h===void 0){l.set(d,0);return}i&&h!==u||l.delete(d)}),this.updateIndexMap();let c=this.colModel.getColDefCols();for(let d of c??[]){let u=t.indexOf(d)>=0;o(d,u,s)}r&&this.colModel.refreshCols(!1,s),this.visibleCols.refresh(s),this.dispatchColumnChangedEvent(this.eventSvc,n,[...l.keys()],s)}updateColList(e=[],t,n,i,r,o,s){if(!e||e.length===0)return;let a=!1,l=new Set;for(let d of e){if(!d)continue;let u=this.colModel.getColDefCol(d);if(u){if(l.add(u),n){if(t.indexOf(u)>=0)continue;t.push(u)}else{let h=t.indexOf(u);if(h<0)continue;for(let p=h+1;p<t.length;p++)l.add(t[p]);Ci(t,u)}r(u,n,s),a=!0}}if(!a)return;this.updateIndexMap(),i&&this.colModel.refreshCols(!1,s),this.visibleCols.refresh(s);let c=Array.from(l);this.eventSvc.dispatchEvent({type:o,columns:c,column:c.length===1?c[0]:null,source:s})}extractCols(e,t=[]){let n=this.columns,i=[],r=[],{setFlagFunc:o,getIndexFunc:s,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:c}=this.columnExtractors,d=this.colModel.getColDefCols();for(let g of d??[]){let C=!t.includes(g),m=g.getColDef(),w=l(m),x=c(m),D=s(m),F=a(m),L;w!==void 0?L=w:D!==void 0?D===null?L=!1:L=D>=0:C?x!==void 0?L=x:F!==void 0?L=F!=null&&F>=0:L=!1:L=n.indexOf(g)>=0,L&&((C?D!=null||F!=null:D!=null)?i.push(g):r.push(g))}let u=g=>{let C=g.getColDef();return s(C)??a(C)};i.sort((g,C)=>u(g)-u(C));let h=[],p=this.groupHierarchCols,f=g=>{p?p.expandColumnInto(h,g):h.push(g)};i.forEach(f);for(let g of n)r.indexOf(g)>=0&&f(g);for(let g of r)h.indexOf(g)<0&&f(g);for(let g of n)h.indexOf(g)<0&&o(g,!1,e);for(let g of h)n.indexOf(g)<0&&o(g,!0,e);return this.columns=h,this.updateIndexMap(),this.columns}restoreColumnOrder(e,t){let n=this.columns,i=this.colModel.getColDefCols();if(!n.length||!i)return e;let r=Object.keys(t),o=new Set(r),s=new Set(r),a=new Set(n.map(x=>{let D=x.getColId();return s.delete(D),D}).concat(r)),l=[],c={},d=0;for(let x=0;x<i.length;x++){let D=i[x].getColId();a.has(D)&&(l.push(D),c[D]=d++)}let u=1e3,h=!1,p=0,f=this.columnOrdering.enableProp,g=this.columnOrdering.initialEnableProp,C=this.columnOrdering.indexProp,m=this.columnOrdering.initialIndexProp,w=x=>{let D=c[x];for(let F=p;F<D;F++){let L=l[F];s.has(L)&&(t[L][C]=u++,s.delete(L))}p=D};for(let x of n){let D=x.getColId();if(o.has(D))w(D),t[D][C]=u++;else{let F=x.getColDef();if(F[C]===null||F[C]===void 0&&F[m]==null){if(!h)if(F[f]||F[f]===void 0&&F[g])w(D);else{for(let B of s)t[B][C]=u+c[B];u+=l.length,h=!0}e[D]||(e[D]={colId:D}),e[D][C]=u++}}}return e}},r$=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}};function vy(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var q=null;function a0(e){return typeof e?.getGui=="function"}var o$=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.includes(" ")){let i=(e||"").split(" ");if(i.length>1){for(let r of i)this.toggleCss(r,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},Kfe=0,Qr=class extends Gr{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Kfe++,this.cssManager=new o$(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());let e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(let t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(vW):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){let r=this[t];if(r===q)this[t]=i??e;else{let o=n?.[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(e,t){let n=[];for(let i of e.childNodes??[])n.push(i);for(let i of n){if(!(i instanceof HTMLElement))continue;let r=this.createComponentFromElement(i,o=>{let s=o.getGui();if(s)for(let a of i.attributes??[])s.setAttribute(a.name,a.value)},t);if(r){if(r.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);let o=Array.prototype.slice.call(i.children);r.addItems(o)}this.swapComponentForNode(r,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}}createComponentFromElement(e,t,n){let i=e.nodeName,r=this.getDataRefAttribute(e),o=i.indexOf("AG-")===0,s=o?this.componentSelectors.get(i):null,a=null;if(s){let l=n&&r?n[r]:void 0;a=new s.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,r,n,a),a}swapComponentForNode(e,t,n){let i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){let n=t??this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(let i of e)i.setAttribute("tabindex",n.toString())}setTemplate(e,t,n){let i;typeof e=="string"||e==null?i=Tk(e):i=Qi(e),this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let r=0;r<t.length;r++){let o=t[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),dy(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:n}=t;Mk(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:n}=t;Ie(this.eGui,e,{skipAriaHidden:n});let i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},pe=class extends Qr{};function s$(e){return typeof e=="object"&&!!e.component}function a$(e){return typeof e.then=="function"}function Yfe(e,t){return new tt(n=>{n(window.setInterval(e,t))})}var tt=class Uw{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new Uw(n=>{let i=t.length,r=new Array(i);t.forEach((o,s)=>{o.then(a=>{r[s]=a,i--,i===0&&n(r)})})}):Uw.resolve()}static resolve(t=null){return new Uw(n=>n(t))}then(t){return new Uw(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t;for(let n of this.waiters)n(t)}onReject(t){}};function Zfe(e){return e?e.prototype&&"getGui"in e.prototype:!1}function l$(e,t,n,i){let{name:r}=n,o,s,a,l,c,d;if(t){let u=t,h=u[r+"Selector"],p=h?h(i):null,f=g=>{typeof g=="string"?o=g:g!=null&&g!==!0&&(e.isFrameworkComponent(g)?a=g:s=g)};p?(f(p.component),l=p.params,c=p.popup,d=p.popupPosition):f(u[r])}return{compName:o,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}var Xfe=class extends K{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,r=!1){let{name:o,cellRenderer:s}=t,{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:u,popupPositionFromSelector:h}=l$(this.beans.frameworkOverrides,e,t,i),p,f,g=x=>{let D=this.registry.getUserComponent(o,x);D&&(l=D.componentFromFramework?void 0:D.component,c=D.componentFromFramework?D.component:void 0,p=D.params,f=D.processParams)};if(a!=null&&g(a),l==null&&c==null&&n!=null&&g(n),l&&s&&!Zfe(l)&&(l=this.agCompUtils?.adaptFunction(t,l)),!l&&!c){let{validation:x}=this.beans;r&&(a!==n||!n)?a?x?.isProvidedUserComp(a)||mt(50,{compName:a}):n?x||mt(260,ce(T({},this.gos.getModuleErrorParams()),{propName:o,compName:n})):mt(216,{name:o}):n&&!x&&mt(146,{comp:n});return}let C=this.mergeParams(e,t,i,d,p,f),m=l==null,w=l??c;return{componentFromFramework:m,componentClass:w,params:C,type:t,popupFromSelector:u,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(w,m,C,t)}}newAgStackInstance(e,t,n,i){let r=!t,o;r?o=new e:o=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);let s=o.init?.(n);return s==null?tt.resolve(o):s.then(()=>o)}mergeParams(e,t,n,i=null,r,o){let s=T(T({},n),r),l=e?.[t.name+"Params"];if(typeof l=="function"){let c=l(n);ji(s,c)}else typeof l=="object"&&ji(s,l);return ji(s,i),o?o(s):s}},Qfe={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},Jfe={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},ege={name:"headerComponent",optionalMethods:["refresh"]},tge={name:"innerHeaderComponent"},nge={name:"innerHeaderGroupComponent"},ige={name:"headerGroupComponent"},rge={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},oge={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},sge={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"]},age={name:"loadingCellRenderer",cellRenderer:!0},lge={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},cge={name:"tooltipComponent"},$k={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},dge={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},uge={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},hge={name:"loadingCellRenderer",cellRenderer:!0},pge={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},fge={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function gge(e,t){return e.getCompDetailsFromGridOptions(Jfe,"agDragAndDropImage",t,!0)}function Cy(e,t,n){return e.getCompDetails(t,rge,void 0,n)}function mge(e,t,n){return e.getCompDetails(t,ege,"agColumnHeader",n)}function vge(e,t,n){return e.getCompDetails(t,tge,void 0,n)}function Cge(e,t){let n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,ige,"agColumnGroupHeader",t)}function bge(e,t,n){return e.getCompDetails(t,nge,void 0,n)}function wge(e,t){return e.getCompDetailsFromGridOptions(uge,void 0,t,!0)}function yge(e,t){return e.getCompDetailsFromGridOptions(hge,"agLoadingCellRenderer",t,!0)}function Sge(e,t){return e.getCompDetailsFromGridOptions(pge,"agGroupRowRenderer",t,!0)}function xge(e,t){return e.getCompDetailsFromGridOptions(fge,"agDetailCellRenderer",t,!0)}function ip(e,t,n){return e.getCompDetails(t,oge,void 0,n)}function D_(e,t,n){return e.getCompDetails(t,sge,void 0,n)}function tU(e,t,n){return e.getCompDetails(t,age,"agSkeletonCellRenderer",n,!0)}function c$(e,t,n){return e.getCompDetails(t,lge,"agCellEditor",n,!0)}function qk(e,t,n,i){let r=t.filter;return s$(r)&&(t={filter:r.component,filterParams:t.filterParams}),e.getCompDetails(t,$k,i,n,!0)}function Ege(e,t,n){return e.getCompDetails(t,Qfe,"agDateInput",n,!0)}function Dge(e,t){return e.getCompDetails(t.colDef,cge,"agTooltipComponent",t,!0)}function Kk(e,t,n,i){return e.getCompDetails(t,dge,i,n)}function d$(e,t){return l$(e,t,$k)}function S3(e,t,n){return e.mergeParams(t,$k,n)}function Lu(e){let t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}function _ge(e){return typeof e=="object"&&!!e.getComp}var $={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},Age=65,Rge=67,Fge=86,Mge=68,Ige=90,Tge=89;function u$(e){let{keyCode:t}=e,n;switch(t){case Age:n=$.A;break;case Rge:n=$.C;break;case Fge:n=$.V;break;case Mge:n=$.D;break;case Ige:n=$.Z;break;case Tge:n=$.Y;break;default:n=e.code}return n}var by=class extends Qr{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},x3,E3,D3,_3,ok,sk,A3;function Od(){return x3===void 0&&(x3=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),x3}function hg(){return E3===void 0&&(E3=/(firefox)/i.test(navigator.userAgent)),E3}function h$(){return D3===void 0&&(D3=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),D3}function Tu(){return _3===void 0&&(_3=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),_3}function ak(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!hg())?null:t.toString()}function Pge(){if(A3!==void 0)return A3;if(!document.body)return-1;let e=1e6,t=hg()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return n.remove(),A3=e,e}function kge(){return sk==null&&p$(),sk}function p$(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.remove(),n!=null&&(sk=n,ok=n===0)}function f$(){return ok==null&&p$(),ok}var lk=!1,qD=0;function Lge(e){qD>0||(e.addEventListener("keydown",KD),e.addEventListener("mousedown",KD))}function Oge(e){qD>0||(e.removeEventListener("keydown",KD),e.removeEventListener("mousedown",KD))}function KD(e){let t=lk,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(lk=n)}function Nge(e){let t=vi(e);return Lge(t),qD++,()=>{qD--,Oge(t)}}function S0(){return lk}function Rs(e,t,n=!1){let i=$pe,r=hW;t&&(r+=", "+t),n&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(l=>Dr(l)),s=Array.prototype.slice.apply(e.querySelectorAll(r));return s.length?((l,c)=>l.filter(d=>c.indexOf(d)===-1))(o,s):o}function qn(e,t=!1,n=!1,i=!1){let r=Rs(e,i?".ag-tab-guard":null,n),o=t?Qe(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}function Wi(e,t,n,i){let r=Rs(t,n?':not([tabindex="-1"])':null),o=wt(e),s;n?s=r.findIndex(l=>l.contains(o)):s=r.indexOf(o);let a=s+(i?-1:1);return a<0||a>=r.length?null:r[a]}function __(e,t=5){let n=0;for(;e&&ak(e)===null&&++n<=t;)e=e.parentElement;return ak(e)===null?null:e}var Yk="ag-focus-managed",g$=class extends Gr{constructor(e,t={isStopPropagation:()=>!1,stopPropagation:()=>{}},n={}){super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=n,this.callbacks=T({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let r=Wi(this.beans,this.eFocusable,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())}},n)}postConstruct(){let{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(Yk),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(t))return;let{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){this.stopPropagationCallbacks.stopPropagation(t);return}t.key===$.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},qw={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},Bge=class extends Gr{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:n,eTopGuard:i,eBottomGuard:r,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:l,onFocusIn:c,onFocusOut:d,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:p,isEmpty:f,eFocusableElement:g}=e;this.comp=n,this.eTopGuard=i,this.eBottomGuard=r,this.providedFocusInnerElement=l,this.eFocusableElement=g,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=c,this.providedFocusOut=d,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=p,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new g$(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(let e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Rs(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){let t=vi(this.beans),n=Rs(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,o;e?(r=0,o=i):(r=i+1,o=n.length);let s=n.slice(r,o),a=this.gos.get("tabIndex");s.sort((l,c)=>{let d=Number.parseInt(l.getAttribute("tabindex")||"0"),u=Number.parseInt(c.getAttribute("tabindex")||"0");return u===a?1:d===a?-1:d===0?1:u===0?-1:d-u}),s[e?s.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=Rs(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Wi(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},wy=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick??20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<i.left+r,this.tickRight=e.clientX>i.right-r,this.tickUp=e.clientY<i.top+r&&!n,this.tickDown=e.clientY>i.bottom-r&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},m$="ag-resizer-wrapper",Uh=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),Vge={tag:"div",cls:m$,children:[Uh("eTopLeft","topLeft"),Uh("eTop","top"),Uh("eTopRight","topRight"),Uh("eRight","right"),Uh("eBottomRight","bottomRight"),Uh("eBottom","bottom"),Uh("eBottomLeft","bottomLeft"),Uh("eLeft","left")]},Zk=class extends Gr{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=T({popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){let{clientHeight:t,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,r=t/2-this.getHeight()/2;this.offsetElement(i,r,e)}initialisePosition(e){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:n,minWidth:i,width:r,minHeight:o,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0,u=Dr(this.element);if(u){let h=this.findBoundaryElement(),p=window.getComputedStyle(h);if(p.minWidth!=null){let f=h.offsetWidth-this.element.offsetWidth;d=Number.parseInt(p.minWidth,10)-f}if(p.minHeight!=null){let f=h.offsetHeight-this.element.offsetHeight;c=Number.parseInt(p.minHeight,10)-f}}if(this.minHeight=o||c,this.minWidth=i||d,r&&this.setWidth(r),s&&this.setHeight(s),(!r||!s)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(u&&n){let h=this.boundaryEl,p=!0;if(h||(h=this.findBoundaryElement(),p=!1),h){let f=Number.parseFloat(h.style.top),g=Number.parseFloat(h.style.left);p?this.offsetElement(Number.isNaN(g)?0:g,Number.isNaN(f)?0:f,e):this.setPosition(g,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(let t of Object.keys(e)){let n=!!e[t],i=this.getResizerElement(t),r={dragStartPixels:0,eElement:i,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragSvc?.addDragSource(r),this.resizeListeners.push(r),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[t]=n)}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.includes("%"))$w(n,e),e=g0(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let r=this.getAvailableHeight();r&&e>r&&(e=r)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?$w(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,s=e?0:r.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:d}=c.getBoundingClientRect();a=d-i.bottom}}return n+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.includes("%"))_l(t,e),e=Md(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:r}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;r&&e+o>r&&(e=r-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?_l(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,n){let{forcePopupParentAsOffsetParent:i}=this.config,r=i?this.boundaryEl:this.element;r&&(this.popupSvc?.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(Number.parseFloat(r.style.left),Number.parseFloat(r.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=Pl(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!r,s)?0:s,c=this.shouldSkipY(t,!!i,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return l?!0:(t?l=i<0&&e.clientX>a+o.left||i>0&&e.clientX<a+o.left:n?l=i<0&&e.clientX>s.right||i>0&&e.clientX<a+o.left:l=i<0&&e.clientX>s.right||i>0&&e.clientX<s.right,l)}shouldSkipY(e,t,n=0,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return l?!0:(t?l=i<0&&e.clientY>a+o.top+n||i>0&&e.clientY<a+o.top:l=i<0&&e.clientY>s.bottom||i>0&&e.clientY<s.bottom,l)}createResizeMap(){let e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;let e=this.element;e&&(e.appendChild(Qi(Vge)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0,this.element.querySelector(`.${m$}`)?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i of e){let r=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let o=this.minHeight||0,s=this.minWidth||0;if(r){let a=window.getComputedStyle(i);a.minHeight&&(o=Number.parseInt(a.minHeight,10)),a.minWidth&&(s=Number.parseInt(a.minWidth,10))}else o=i.offsetHeight,s=i.offsetWidth;t+=o,n+=s}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let r=n[i];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:o,isLeft:s}=this.currentResizer,a=r||s,l=o||i,{movementX:c,movementY:d}=this.calculateMouseMovement({e,isLeft:s,isTop:i}),u=this.position.x,h=this.position.y,p=0,f=0;if(a&&c){let g=s?-1:1,C=this.getWidth(),m=C+c*g,w=!1;s&&(p=C-m,(u+p<=0||m<=this.minWidth)&&(w=!0,p=0)),w||this.setWidth(m)}if(l&&d){let g=i?-1:1,C=this.getHeight(),m=C+d*g,w=!1;i?(f=C-m,(h+f<=0||m<=this.minHeight)&&(w=!0,f=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<m&&this.getMinSizeOfSiblings().height+m>this.element.parentElement.offsetHeight&&(w=!0),w||this.setHeight(m)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||f)&&this.offsetElement(u+p,h+f)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:r,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+r,n+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Xk="T",Gge=new RegExp(`[${Xk} ]`),Hge=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${Xk}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Ed(e,t){return e.toString().padStart(t,"0")}function as(e,t=!0,n=Xk){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(r=>Ed(r,2)).join("-");return t&&(i+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(r=>Ed(r,2)).join(":")),i}function Yh(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Ed(e.getDate(),2),Ed(e.getHours(),2),`:${Ed(e.getMinutes(),2)}`,`:${Ed(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Ed(e.getDate(),2)].map(String):null}var R3=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},ty=["January","February","March","April","May","June","July","August","September","October","November","December"],F3=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ck(e,t){if(t==null)return as(e,!1);let n=Ed(e.getFullYear(),4),i={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>ty[e.getMonth()],MMM:()=>ty[e.getMonth()].slice(0,3),MM:()=>Ed(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${R3(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${R3(e.getDate())}`,DD:()=>Ed(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>F3[e.getDay()],ddd:()=>F3[e.getDay()].slice(0,3),dd:()=>F3[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${R3(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(i).join("|"),"g");return t.replace(r,o=>o in i?i[o]():o)}function PD(e,t=!1){return!!Br(e,t)}function zge(e){return PD(e,!0)}function Br(e,t=!1,n){if(!e||!n&&!Hge.test(e))return null;let[i,r]=e.split(Gge);if(!i)return null;let o=i.split("-").map(p=>Number.parseInt(p,10));if(o.filter(p=>!isNaN(p)).length!==3)return null;let[s,a,l]=o,c=new Date(s,a-1,l);if(c.getFullYear()!==s||c.getMonth()!==a-1||c.getDate()!==l||!r&&t)return null;if(!r||r==="00:00:00")return c;let[d,u,h]=r.split(":").map(p=>Number.parseInt(p,10));if(d>=0&&d<24)c.setHours(d);else if(t)return null;if(u>=0&&u<60)c.setMinutes(u);else if(t)return null;if(h>=0&&h<60)c.setSeconds(h);else if(t)return null;return c}function pg(e){let{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:r}=e,o=(n??[]).map((l,c)=>({value:l,relevance:jge(t,l),idx:c}));if(o.sort((l,c)=>l.relevance-c.relevance),i&&(o=o.filter(l=>l.relevance<Math.max(l.value.length,t.length))),o.length>0&&r&&r>0){let c=o[0].relevance*r;o=o.filter(d=>c-d.relevance<0)}let s=[],a=[];for(let l of o)s.push(l.value),a.push(l.idx);return{values:s,indices:a}}function jge(e,t){let n=e.length,i=t.length;if(i===0)return n||0;let r=e.toLocaleLowerCase(),o=t.toLocaleLowerCase(),s;e.length<t.length&&(s=o,o=r,r=s,s=t,t=e,e=s);let a=new Uint16Array(i+1),l=new Uint16Array(i+1);for(let u=0;u<=i;u++)a[u]=u;let c=0,d=n/2-10;for(let u=1;u<=n;u++){let h=e[u-1],p=r[u-1];l[0]=u;for(let f=1;f<=i;f++){let g=t[f-1],C=o[f-1];if(p!==C){let m=l[f-1],w=a[f],x=a[f-1],D=m<w?m:w;x<D&&(D=x),l[f]=D+1|0;continue}if(c++,h===g&&c++,u>1&&f>1){let m=e[u-2],w=r[u-2],x=t[f-2],D=o[f-2];w===D&&(c++,m===x&&c++)}u<d&&c++,l[f]=a[f-1]}s=a,a=l,l=s}return a[i]/(c+1)}function A_(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}var Uge=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",yy=class extends Qr{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(Uge)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:r,labelEllipsis:o}=this.config;r!=null&&this.setDisabled(r),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),o!=null&&this.setLabelEllipsis(o),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:e,eLabel:t}=this;at(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Ie(t,!1),Jn(t,"presentation")):(Ie(t,!0),Jn(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){let e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(zD(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return ep(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},v$=class extends yy{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n,ariaLabel:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),i!=null&&this.setAriaLabel(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||Npe(e)!==null?Fc(e,""):Fc(e,t??"")}setAriaLabel(e){return Ut(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return _l(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function Wge(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var Mu=class extends v${constructor(e,t,n="text",i="input"){super(e,e?.template??Wge(i),[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=q,this.eWrapper=q,this.eInput=q}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);let{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;let{inputName:r,inputWidth:o,inputPlaceholder:s,autoComplete:a,tabIndex:l}=this.config;r!=null&&this.setInputName(r),o!=null&&this.setInputWidth(o),s!=null&&this.setInputPlaceholder(s),a!=null&&this.setAutoComplete(a),this.addInputListeners(),this.activateTabIndex([n],l)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,sa(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return zD(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return sa(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Ut(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ep(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)sa(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";sa(this.eInput,"autocomplete",t)}return this}},Nd=class extends Mu{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t,name:n}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t),n!=null&&this.setName(n)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;let n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){let t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},mo={selector:"AG-CHECKBOX",component:Nd},$ge=class extends Nd{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){let t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}};var qge='.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;transition:background-color .1s;:where(.ag-toggle-button-input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-toggle-button-height);margin:0;max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);opacity:0}&:before{background-color:var(--ag-toggle-button-switch-background-color);border-radius:100%;content:"";display:block;height:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2);left:var(--ag-toggle-button-switch-inset);pointer-events:none;position:absolute;top:var(--ag-toggle-button-switch-inset);transition:left .1s;width:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-switch-inset))}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}',Ic=class extends Nd{constructor(e){super(e,"ag-toggle-button"),this.registerCSS(qge)}setValue(e,t){return super.setValue(e,t),this.toggleCss("ag-selected",this.getValue()),this}},C$={selector:"AG-TOGGLE-BUTTON",component:Ic},Go=class extends Mu{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){let n=this.eInput;return n.value!==e&&(n.value=_e(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}setCustomValidity(e){let t=this.eInput,n=e.length>0;t.setCustomValidity(e),n&&t.reportValidity(),Rk(t,n)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{A_(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{n.clipboardData?.getData("text")?.split("").some(r=>!e.test(r))&&n.preventDefault()}})}},Jr={selector:"AG-INPUT-TEXT-FIELD",component:Go},Kge=class extends Mu{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},Yge={selector:"AG-INPUT-TEXT-AREA",component:Kge},Sy=class extends Go{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();let e=this.eInput;this.addManagedListeners(e,{blur:()=>{let o=Number.parseFloat(e.value),s=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),e.step="any";let{precision:t,min:n,max:i,step:r}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof r=="number"&&this.setStep(r)}onWheel(e){wt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){let n=this.precision;if(n==null)return e;if(t){let r=Number.parseFloat(e).toFixed(n);return Number.parseFloat(r).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,sa(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,sa(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,sa(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(_e(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let r=this.normalizeValue(n);i=n!=r}if(i)return t(n)}return e(n)}getValue(e=!1){let t=this.eInput;if(!t.validity.valid&&!e)return;let n=t.value;return this.isScientificNotation(n)?this.adjustPrecision(n,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Sg={selector:"AG-INPUT-NUMBER-FIELD",component:Sy},x0=class extends Go{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=Od();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){wt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?as(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,sa(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?as(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,sa(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,sa(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Br(this.getValue())??void 0}setDate(e,t){this.setValue(as(e??null,this.includeTime),t)}},b$={selector:"AG-INPUT-DATE-FIELD",component:x0},Zge=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",Xge="ag-active-item",Qge=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),Jge=class extends Qr{constructor(e,t,n){super(Qge(e,t)),this.label=t,this.value=n,this.eText=q}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){let t=this.getGui();t.classList.toggle(Xge,e),p0(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){let n=this.getGui();mg(n,e),gg(n,t)}createTooltip(){let e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>Pk(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){let e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},eme=class extends Qr{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(Zge)}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){let t=e.key;switch(t){case $.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{let n=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(n)}break;case $.DOWN:case $.UP:e.preventDefault(),this.navigate(t);break;case $.PAGE_DOWN:case $.PAGE_UP:case $.PAGE_HOME:case $.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){let{value:t,text:n}=e,i=n??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(let e of this.listItems)e.destroy();at(this.getGui()),this.listItems=[],this.refreshAriaRole()}updateOptions(e){let t=this.options!==e;return t&&(this.clearOptions(),this.addOptions(e)),t}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.listItems[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){let t=e.getGui();if(!Dr(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;let n=this.getGui(),{scrollTop:i,clientHeight:r}=n,{offsetTop:o,offsetHeight:s}=t;(o+s>i+r||o<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){let n=new Jge(this.cssIdentifier,t,e);n.setParentComponent(this);let i=this.createManagedBean(n);this.listItems.push(i),this.getGui().appendChild(i.getGui())}navigate(e){let t=e===$.DOWN,n,{listItems:i,highlightedItem:r}=this;if(!r)n=t?i[0]:Qe(i);else{let s=i.indexOf(r)+(t?1:-1);s=Math.min(Math.max(s,0),i.length-1),n=i[s]}this.highlightItem(n)}navigateToPage(e){let{listItems:t,highlightedItem:n}=this;if(!n||t.length===0)return;let i=t.indexOf(n),r=this.options.length-1,o=t[0].getHeight(),s=Math.floor(this.getGui().clientHeight/o),a=-1;e===$.PAGE_HOME?a=0:e===$.PAGE_END?a=r:e===$.PAGE_DOWN?a=Math.min(i+s,r):e===$.PAGE_UP&&(a=Math.max(i-s,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){Jn(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();let e=this.listItems,t=e.length;e.forEach((n,i)=>{n.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},tme=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",nme={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},xy=class extends v${constructor(e){if(super(e,e?.template||nme,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=q,this.eWrapper=q,this.eDisplayField=q,this.eIcon=q,this.registerCSS(tme),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),r!=null&&this.setPickerMinWidth(r),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let r=this.beans.iconSvc.createIconNoSpan(n);r&&this.eIcon.appendChild(r)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Fi(e,!1),this.ariaRole&&Jn(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case $.UP:case $.DOWN:case $.ENTER:case $.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case $.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:r=!0},maxPickerHeight:o,minPickerWidth:s,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:d}=this,u={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{let g=Ts(c);this.beforeHidePicker(),g&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:d};e.style.position="absolute";let h=c.popupSvc,p=h.addPopup(u);l?(s&&(e.style.minWidth=s),e.style.width=kk(Md(d)),a&&(e.style.maxWidth=a)):zD(e,a??Md(d));let f=o??`${ly(h.getPopupParent())}px`;return e.style.setProperty("max-height",f),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:r,pickerComponent:o}=this,s=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:r,ePopup:o.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();Fi(t,e);let n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return zD(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},ime=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",Ji=class extends xy{constructor(e){super(T({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(ime)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Iu(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){let e=this.createBean(new eme("select"));this.listComponent=e,e.setParentComponent(this);let t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),ay(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){let{key:t}=e;switch(t===$.TAB&&this.hidePicker(),t){case $.ENTER:case $.UP:case $.DOWN:case $.PAGE_UP:case $.PAGE_DOWN:case $.PAGE_HOME:case $.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case $.ESCAPE:super.onKeyDown(e);break;case $.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){let e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}updateOptions(e){return this.listComponent?.updateOptions(e)&&this.setValue(void 0,!0),this}setValue(e,t,n){let{listComponent:i,config:{placeholder:r},eDisplayField:o,tooltipFeature:s}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let l=i.getDisplayValue();return l==null&&r&&(l=r),o.textContent=l,s?.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Ua={selector:"AG-SELECT",component:Ji},Qk=(e=>(e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e))(Qk||{}),rme=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',Jk=typeof window!="object"||!window?.document?.fonts?.forEach,dk=!1,l0=(e,t,n,i,r,o)=>{if(Jk||dk)return;i&&(e=`@layer ${CSS.escape(i).replaceAll("\\.",".")} { ${e} }`);let s=Jv.map.get(t);if(s||(s=[],Jv.map.set(t,s)),s.some(d=>d.css===e))return;let a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=n,a.textContent=e;let l={css:e,el:a,priority:r},c;for(let d of s){if(d.priority>r)break;c=d}if(c){c.el.insertAdjacentElement("afterend",a);let d=s.indexOf(c);s.splice(d+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),s.push(l)},w$=(e,t,n,i)=>{l0(rme,e,"shared",t,0,n),i?.forEach((r,o)=>r.forEach(s=>l0(s,e,o,t,0,n)))},ome=e=>{Jv.grids.add(e)},sme=e=>{if(Jv.grids.delete(e),Jv.grids.size===0){Jv.map=new WeakMap;for(let t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},nU,Jv=(nU=typeof window=="object"?window:{}).agStyleInjectionState??(nU.agStyleInjectionState={map:new WeakMap,grids:new Set}),Id=e=>new y$(e),Kh="$default",ame=0,y$=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:r}){this.feature=e,this.css=i,this.cssImports=r,this.modeParams=T({[Kh]:T(T({},n[Kh]??{}),t??{})},n)}use(e,t,n){let i=this._inject;if(i==null){let{css:r}=this;if(r){let o=`ag-theme-${this.feature??"part"}-${++ame}`;typeof r=="function"&&(r=r()),r=`:where(.${o}) {
${r}
}
`;for(let s of this.cssImports??[])r=`@import url(${JSON.stringify(s)});
${r}`;i={css:r,class:o}}else i=!1;this._inject=i}return i&&e&&l0(i.css,e,i.class,t,1,n),i?i.class:!1}},lme=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),S$=e=>`--ag-${lme(e)}`,Td=e=>`var(${S$(e)})`,cme=(e,t,n)=>Math.max(t,Math.min(n,e)),dme=e=>{let t=new Map;return n=>{let i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},xd=e=>({ref:"accentColor",mix:e}),yl=e=>({ref:"foregroundColor",mix:e}),El=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),ume=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),aa={ref:"backgroundColor"},Uv={ref:"foregroundColor"},Fu={ref:"accentColor"},YD={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:yl(.15),chromeBackgroundColor:El(.02),browserColorScheme:"light"},hme=ce(T({},YD),{textColor:Uv,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:xd(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:aa,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Fu,toggleButtonOffBackgroundColor:El(.3),toggleButtonSwitchBackgroundColor:aa,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}}),pme=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],fme=dme(e=>(e=e.toLowerCase(),pme.find(t=>e.endsWith(t.toLowerCase()))??"length")),R_=e=>typeof e=="object"&&e?.ref?Td(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,e5=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){let t=Td(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Td(e.onto):"transparent"}, ${t} ${cme(e.mix*100,0,100)}%)`}return!1},gme=R_,Wv=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+Td(n)+" ")})`:e&&"ref"in e?Td(e.ref):!1,mme=R_,uk=(e,t)=>typeof e=="string"?e:e===!0?uk({},t):e===!1?t==="columnBorder"?uk({color:"transparent"},t):"none":e&&"ref"in e?Td(e.ref):x$(e.style??"solid")+" "+Wv(e.width??{ref:"borderWidth"})+" "+e5(e.color??{ref:"borderColor"}),vme=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Td(e.ref):[Wv(e.offsetX??0),Wv(e.offsetY??0),Wv(e.radius??0),Wv(e.spread??0),e5(e.color??{ref:"foregroundColor"})].join(" "),x$=R_,E$=e=>typeof e=="string"?e.includes(",")?e:iU(e):e&&"googleFont"in e?E$(e.googleFont):e&&"ref"in e?Td(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),iU(t))).join(", "):!1,iU=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),Cme=R_,D$=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?D$({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Td(e.ref):!1,bme=(e,t,n)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Td(e.ref):!1,wme={color:e5,colorScheme:gme,length:Wv,scale:mme,border:uk,borderStyle:x$,shadow:vme,image:D$,fontFamily:E$,fontWeight:Cme,duration:bme},yme=(e,t,n)=>{let i=fme(e);return wme[i](t,e,n)};var Sme=e=>new _$(e),_$=class A${constructor(t,n=[]){this.themeLogger=t,this.parts=n}withPart(t){return typeof t=="function"&&(t=t()),t instanceof y$?new A$(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Id({feature:t}))}withParams(t,n=Kh){return this.withPart(Id({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:i,loadThemeGoogleFonts:r,moduleCss:o}){if(Jk||dk)return;Eme(),w$(t,n,i,o);let s=xme(this);if(s.length>0)for(let a of s)r&&Dme(a,i);for(let a of this.parts)a.use(t,n,i)}_getCssClass(){return dk?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=rU(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){let n={[Kh]:T({},hme)};for(let i of rU(this.parts))for(let r of Object.keys(i.modeParams)){let o=i.modeParams[r];if(o){let s=n[r]??(n[r]={}),a=new Set;for(let l of Object.keys(o)){let c=o[l];c!==void 0&&(s[l]=c,a.add(l))}if(r===Kh)for(let l of Object.keys(n)){let c=n[l];if(l!==Kh)for(let d of a)delete c[d]}}}this._paramsCache=t=n}return t}_getPerInstanceCss(t){let n="##SELECTOR##",i=this._paramsCssCache;if(!i){let r="",o="",s=this._getModeParams();for(let l of Object.keys(s)){let c=s[l];if(l!==Kh){let u=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;r+=u,o+=u}for(let d of Object.keys(c).sort()){let u=c[d],h=yme(d,u,this.themeLogger);if(h===!1)this.themeLogger.error(107,{key:d,value:u});else{let p=S$(d),f=p.replace("--ag-","--ag-inherited-");r+=`	${p}: var(${f}, ${h});
`,o+=`	${f}: var(${p});
`}}l!==Kh&&(r+=`}
`,o+=`}
`)}let a=`${n} {
${r}}
`;a+=`:has(> ${n}):not(${n}) {
${o}}
`,this._paramsCssCache=i=a}return i.replaceAll(n,`:where(.${t})`)}},rU=e=>{let t=new Map;for(let i of e)t.set(i.feature,i);let n=[];for(let i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},xme=e=>{let t=new Set,n=o=>{if(Array.isArray(o))o.forEach(n);else{let s=o?.googleFont;typeof s=="string"&&t.add(s)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(n),Array.from(t).sort()},oU=!1,Eme=()=>{if(!oU){oU=!0;for(let e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},Dme=async(e,t)=>{let n=`@import url('https://${_me}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;l0(n,document.head,`googleFont:${e}`,void 0,0,t)},_me="fonts.googleapis.com",Ame=1,Rme=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=Ame++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(let t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(let t of e.beanClasses){let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}for(let t of e.derivedBeans??[]){let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){let n=this.beans;for(let i of e)i.preWireBeans?.(n),i.wireBeans?.(n);for(let i of e)i.preConstruct?.();t&&e.forEach(t);for(let i of e)i.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Fme=0,sU={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Mme=class extends Gr{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++Fme}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){let{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t);let n=e.get("themeStyleContainer"),i=typeof ShadowRoot<"u",r=i&&t.getRootNode()instanceof ShadowRoot;this.eStyleContainer=(typeof n=="function"?n():n)??(r?t:document.head),!n&&!r&&i&&Ime(t,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(sU),this.initVariables(),this.addDestroyFunc(()=>sme(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){let{theme:n}=this,i;n?i=`${this.paramsClass} ${n._getCssClass()}`:i=this.applyLegacyThemeClasses();for(let r of Array.from(e.classList))r.startsWith("ag-theme-")&&e.classList.remove(r);if(i){let r=e.className;e.className=`${r}${r?" ":""}${i}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(let i of Array.from(t.classList))i.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${i}`:i);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?l0(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(sU)}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===M3?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=Qi({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.getMeasurementContainer();t=Qi({tag:"div"});let{border:i,noWarn:r}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${M3}px)`)):t.style.width=`var(${e.cssName}, ${M3}px)`,n.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!r&&this.varError(e);let s=Pl(this.beans,t,()=>{let a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}handleThemeChange(){let{gos:e,theme:t}=this,n=e.get("theme"),i;if(n==="legacy")i=void 0;else{let r=n??this.getDefaultTheme();r instanceof _$?i=r:this.themeError(r)}i!==t&&this.handleNewTheme(i),this.postProcessThemeChange(i,n)}handleNewTheme(e){let{gos:t,eRootDiv:n,globalCSS:i}=this,r=this.getAdditionalCss();if(e){ome(this),w$(this.eStyleContainer,this.cssLayer,this.styleNonce,r);for(let[s,a]of i)l0(s,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:r});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=Qi({tag:"style"});let s=t.get("styleNonce");s&&o.setAttribute("nonce",s),n.appendChild(o)}Jk||(o.textContent=e?._getPerInstanceCss(this.paramsClass)||""),this.applyThemeClasses(n),this.fireStylesChangedEvent("themeChanged")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[e]:!0})}},M3=15538,Ime=(e,t,n)=>{let i=60,r=setInterval(()=>{typeof ShadowRoot<"u"&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(r)),(Ik(e)||--i<0)&&clearInterval(r)},1e3);n(()=>clearInterval(r))},Tme=class extends Gr{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(let t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));let i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new i(...n)}},Pme=class extends Gr{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new Rc}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},R$=class extends Gr{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){let n="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(n,e):i.removeAttribute(n))}updateTooltipText(){let{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){let e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},kme=1e3,Lme=1e3,aU=100,lU,vD=!1,Ome=class extends Gr{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){let t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Tu()&&(vD?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},aU):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&i?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||vD)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-lU<kme}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=this.getTooltipValue(),t=this.tooltipCtrl;if(!_e(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}let n=this.gos.addCommon(T({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0)},t.getAdditionalParams?.()));this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(n,i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),lU=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}let i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");let r=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:i,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let s=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:s}),this.setEventHandlers(s)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(vi(this.beans),{keydown:s=>{i.contains(s?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let e=this.tooltipComp?.getGui(),t=wt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){let t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent(ce(T({},e),{mouseEvent:this.lastMouseEvent})):this.popupSvc?.positionPopupByComponent(ce(T({},e),{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?Lme:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(let e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){vD=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},aU)}unlockService(){vD=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},Nme=class extends R${constructor(e,t,n){super(e,n),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},CD=0,Bme=200,Vme=class extends Gr{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:o,alignSide:s="left",position:a="over",type:l}=e,c=o.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(o,t);let u=()=>{let h=c.left-d.left;s==="right"&&(h-=t.offsetWidth-c.width);let p;return a==="over"?(p=c.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,d,e.nudgeY||0)==="under"?p=c.top-d.top+c.height:p=c.top-t.offsetHeight-(i||0)*2-d.top),{x:h,y:p}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:u,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,l,t,o,null)})}positionPopupForMenu(e){let{eventSource:t,ePopup:n,event:i}=e,r=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,n);let s=!1,a=()=>{let l=this.keepXYWithinBounds(n,r.top-o.top,0),c=n.clientWidth>0?n.clientWidth:200;s||(n.style.minWidth=`${c}px`,s=!0);let u=o.right-o.left-c,h;return this.gos.get("enableRtl")?(h=f(),h<0&&(h=p(),this.setAlignedStyles(n,"left")),h>u&&(h=0,this.setAlignedStyles(n,"right"))):(h=p(),h>u&&(h=f(),this.setAlignedStyles(n,"right")),h<0&&(h=0,this.setAlignedStyles(n,"left"))),{x:h,y:l};function p(){return r.right-o.left-2}function f(){return r.left-o.left-c}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",n,t,i instanceof MouseEvent?i:void 0)})}shouldRenderUnderOrAbove(e,t,n,i){let r=n.bottom-t.bottom,o=t.top-n.top,s=e.offsetHeight+i;return r>s?"under":o>s||o>r?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:r}=i;if(!r)return;let o=["right","left","over","above","under"];for(let s of o)r.classList.remove(`ag-has-popup-positioned-${s}`),e.classList.remove(`ag-popup-positioned-${s}`);t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){let n=this.getPopupIndex(t);if(n!==-1){let i=this.popupList[n];i.alignedToElement=e}}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:r,skipObserver:o,updatePosition:s}=e,a={width:0,height:0},l=(c=!1)=>{let{x:d,y:u}=s();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(d+=i),r&&(u+=r),n&&(d=this.keepXYWithinBounds(t,d,1),u=this.keepXYWithinBounds(t,u,0)),t.style.left=`${d}px`,t.style.top=`${u}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){let c=Pl(this.beans,t,()=>l(!0));setTimeout(()=>c(),Bme)}}getParentRect(){let e=vi(this.beans),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),pW(t)}keepXYWithinBounds(e,t,n){let i=n===0,r=i?"clientHeight":"clientWidth",o=i?"top":"left",s=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=vi(this.beans),c=l.documentElement,d=this.getPopupParent(),u=e.getBoundingClientRect(),h=d.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),f=d===l.body,g=Math.ceil(u[s]),m=f?(i?g0:Md)(c)+c[a]:d[r];f&&(m-=Math.abs(p[o]-h[o]));let w=m-g;return Math.min(Math.max(t,0),Math.max(w,0))}addPopup(e){let{eChild:t,ariaLabel:n,ariaOwns:i,alwaysOnTop:r,positionCallback:o,anchorToElement:s}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);let l=this.createPopupWrapper(t,!!r,n,i),c=this.addEventListenersToPopup(ce(T({},e),{wrapperEl:l}));return o&&o(),this.addPopupToPopupList(t,l,c,s),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();_e(e.style.top)||(e.style.top=`${n.top*-1}px`),_e(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,i){let r=this.getPopupParent(),{environment:o,gos:s}=this.beans,a=Qi({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(s.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Jn(e,"dialog"),n?Ut(e,n):i&&(e.id||(e.id=`popup-component-${CD}`),$j(i,e.id)),a.appendChild(e),r.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){let t=this.beans,n=vi(t),{wrapperEl:i,eChild:r,closedCallback:o,afterGuiAttached:s,closeOnEsc:a,modal:l,ariaOwns:c}=e,d=!1,u=g=>{if(!i.contains(wt(t)))return;g.key===$.ESCAPE&&!this.isStopPropagation(g)&&f({keyboardEvent:g})},h=g=>f({mouseEvent:g}),p=g=>f({touchEvent:g}),f=(g={})=>{let{mouseEvent:C,touchEvent:m,keyboardEvent:w,forceHide:x}=g;!x&&(this.isEventFromCurrentPopup({mouseEvent:C,touchEvent:m},r)||d)||(d=!0,i.remove(),n.removeEventListener("keydown",u),n.removeEventListener("mousedown",h),n.removeEventListener("touchstart",p),n.removeEventListener("contextmenu",h),this.eventSvc.removeListener("dragStarted",h),o&&o(C||m||w),this.removePopupFromPopupList(r,c))};return s&&s({hidePopup:f}),window.setTimeout(()=>{a&&n.addEventListener("keydown",u),l&&(n.addEventListener("mousedown",h),this.eventSvc.addListener("dragStarted",h),n.addEventListener("touchstart",p),n.addEventListener("contextmenu",h))},0),f}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:CD,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),CD=CD+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&$j(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:r}=e,o=i.getBoundingClientRect(),s=u=>Number.parseInt(u.substring(0,u.length-1),10),a=(u,h)=>{let p=n[u]-o[u],f=s(r.style[u]);return{initialDiff:p,lastDiff:p,initial:f,last:f,direction:h}},l=a("top",0),c=a("left",1),d=this.beans.frameworkOverrides;return new tt(u=>{d.wrapIncoming(()=>{Yfe(()=>{let h=t.getBoundingClientRect(),p=i.getBoundingClientRect();if(p.top==0&&p.left==0&&p.height==0&&p.width==0){e.hidePopup();return}let g=(C,m)=>{let w=s(r.style[m]);C.last!==w&&(C.initial=w,C.last=w);let x=h[m]-p[m];if(x!=C.lastDiff){let D=this.keepXYWithinBounds(r,C.initial+C.initialDiff-x,C.direction);r.style[m]=`${D}px`,C.last=D}C.lastDiff=x};g(l,"top"),g(c,"left")},200).then(h=>{u(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,r=n||i;if(!r)return!1;let o=this.getPopupIndex(t);if(o===-1)return!1;for(let s=o;s<this.popupList.length;s++){let a=this.popupList[s];if(h_(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){let t=vi(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,r=this.getWrapper(e);if(!r||i<=1||!t.contains(e))return;let o=[],s=[];for(let h of n)h!==r&&(h.classList.contains("ag-always-on-top")?s.push(h):o.push(h));let a=[],l=s.length,u=r.classList.contains("ag-always-on-top")||!l?[...o,...s,r]:[...o,r,...s];for(let h=0;h<=i;h++){let p=u[h];if(n[h]===u[h]||p===r)continue;let f=p.querySelectorAll("div");for(let g of f)g.scrollTop!==0&&a.push([g,g.scrollTop]);h===0?t.insertAdjacentElement("afterbegin",p):u[h-1].insertAdjacentElement("afterend",p)}for(;a.length;){let h=a.pop();h[0].scrollTop=h[1]}}handleThemeChange(e){if(e.themeChanged){let t=this.beans.environment;for(let n of this.popupList)t.applyThemeClasses(n.wrapper)}}},Gme=class extends by{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){let{value:t}=e,n=this.getGui();n.textContent=ca(t);let i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},F$=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},Hme=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;let n=t.pointerId;if(!F$(e,n))return null;let i={eElement:e,pointerId:n,onLost(r){jme(i,r)}};return e.addEventListener("lostpointercapture",i.onLost),i},zme=e=>{if(!e)return;M$(e);let{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}},M$=e=>{let{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},jme=(e,t)=>{M$(e);let{eElement:n,pointerId:i}=e;n&&t.pointerId===i&&F$(n,i)},Vv,$v,I3={passive:!0},Wh={passive:!1},yd=e=>{if(!$v)$v=new WeakSet;else if($v.has(e))return!1;return $v.add(e),!0},Ume=class extends Gr{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!Vv?.has(ra(this.beans))}hasPointerCapture(){let e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();let e=this.dragSources;for(let t of e)cU(t);e.length=0,super.destroy()}removeDragSource(e){let t=this.dragSources;for(let n=0,i=t.length;n<i;++n){let r=t[n];if(r.params===e){t.splice(n,1),cU(r);break}}}addDragSource(e){if(!this.isAlive())return;let{eElement:t,includeTouch:n}=e,i=[],r;if(n){let c=t.style;c&&(r=c.touchAction,c.touchAction="none")}let o={handlers:i,params:e,oldTouchAction:r};this.dragSources.push(o),RD(i,[t,"pointerdown",c=>this.onPointerDown(e,c),Wh],[t,"mousedown",c=>this.onMouseDown(e,c)]);let l=this.gos.get("suppressTouch");n&&!l&&RD(i,[t,"touchstart",d=>this.onTouchStart(e,d),Wh])}cancelDrag(e){let t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){let t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&Qw(this.beans,e)&&!Ww(P3(e))}initDrag(e,...t){this.drag=e;let n=this.beans,i=a=>this.onScroll(a),r=a=>this.onKeyDown(a),o=ra(n),s=vi(n);RD(e.handlers,[o,"contextmenu",jv],[o,"keydown",r],[s,"scroll",i,{capture:!0}],[s.defaultView||window,"scroll",i],...t)}destroyDrag(){this.dragging=!1;let e=this.drag;if(e){let t=e.rootEl;Vv?.get(t)===e&&Vv.delete(t),this.drag=null,zme(e.pointerCapture),Lk(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;let n=this.beans;if($v?.has(t))return;let i=t.pointerType;if(i==="touch"&&(n.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),Ww(P3(t))))||!t.isPrimary||i==="mouse"&&t.button!==0)return;this.destroyDrag();let r=ra(n),o=e.eElement,s=t.pointerId,a=new T3(r,e,t,s);Vv??(Vv=new WeakMap),Vv.set(r,a);let l=h=>{h.pointerId===s&&this.onMouseOrPointerMove(h)},c=h=>{h.pointerId===s&&this.onMouseOrPointerUp(h)},d=h=>{h.pointerId===s&&yd(h)&&this.cancelDrag()},u=h=>this.draggingPreventDefault(h);this.initDrag(a,[r,"pointerup",c],[r,"pointercancel",d],[r,"pointermove",l,Wh],[r,"touchmove",u,Wh],[o,"mousemove",u,Wh]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):yd(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!yd(t)||Ww(P3(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){this.dragging&&jv(t);return}this.destroyDrag();let i=this.beans,r=ra(i),o=new T3(r,e,t.touches[0]),s=h=>this.onTouchMove(h),a=h=>this.onTouchUp(h),l=h=>this.onTouchCancel(h),c=h=>this.draggingPreventDefault(h),d=ra(i),u=t.target??e.eElement;this.initDrag(o,[u,"touchmove",s,I3],[u,"touchend",a,I3],[u,"touchcancel",l,I3],[d,"touchmove",c,Wh],[d,"touchend",a,Wh],[d,"touchcancel",l,Wh]),e.dragStartPixels===0&&this.onMove(o.start)}draggingPreventDefault(e){this.dragging&&jv(e)}onMouseDown(e,t){if(t.button!==0||$v?.has(t)||this.isPointer())return;let n=this.beans;this.destroyDrag();let i=new T3(ra(n),e,t),r=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),s=ra(n);this.initDrag(i,[s,"mousemove",r],[s,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):yd(t)}onScroll(e){if(!yd(e))return;let t=this.drag,n=t?.lastDrag;n&&this.dragging&&t.params?.onDragging?.(n)}onMouseOrPointerMove(e){yd(e)&&(Od()&&vi(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&jv(e),this.onMove(e))}onTouchCancel(e){let t=this.drag;!t||!yd(e)||Kv(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){let t=this.drag;if(!t||!yd(e))return;let n=Kv(t.start,e.touches);n&&(this.onMove(n),this.draggingPreventDefault(e))}onMove(e){let t=this.drag;if(!t)return;t.lastDrag=e;let n=t.params;if(!this.dragging){let i=t.start,o=n.dragStartPixels??4;if(bW(e,i,o)||(this.dragging=!0,n.capturePointer&&(t.pointerCapture=Hme(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart?.(i),this.drag!==t)||(n.onDragging?.(i),this.drag!==t))return}n.onDragging?.(e)}onTouchUp(e){let t=this.drag;t&&yd(e)&&this.onUp(Kv(t.start,e.changedTouches))}onMouseOrPointerUp(e){yd(e)&&this.onUp(e)}onUp(e){let t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop?.(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===$.ESCAPE&&this.cancelDrag()}},cU=e=>{Lk(e.handlers);let t=e.oldTouchAction;if(t!=null){let n=e.params.eElement.style;n&&(n.touchAction=t)}},T3=class{constructor(e,t,n,i=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=i,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},P3=e=>{let t=e.target;return t instanceof Element?t:null},Wme=class extends Gr{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e,t=!1){let n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:i=>this.onDragStart(e,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){let n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){let{dragSourceAndParamsList:t,beans:n}=this;for(let i=0,r=t.length;i<r;i++)if(t[i].dragSource===e){let o=t[i];n.dragSvc?.removeDragSource(o),t.splice(i,1);break}}destroy(){let{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,i=n.dragSvc;for(let r of e)i?.removeDragSource(r);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){let e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();let n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){let{dragSource:t,lastDropTarget:n}=this;if(t?.onDragStopped?.(),n){let i=this.dropTargetEvent(n,e,!1);n.onDragStop?.(i)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:e,lastDropTarget:t,lastMouseEvent:n}=this;if(e?.onDragCancelled?.(),t&&n){let i=this.dropTargetEvent(t,n,!1);t.onDragCancel?.(i)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);let n=this.findCurrentDropTarget(e),{lastDropTarget:i,dragSource:r,dragItem:o}=this,s=!1;if(n!==i){if(s=!0,i){let a=this.dropTargetEvent(i,e,t);i.onDragLeave?.(a)}if(i!==null&&!n?this.handleExit(r,o):i===null&&n&&this.handleEnter(r,o),n){let a=this.dropTargetEvent(n,e,t);n.onDragEnter?.(a)}this.lastDropTarget=n}else if(n){let a=this.dropTargetEvent(n,e,t);n.onDragging?.(a),a?.changed&&(s=!0)}this.lastMouseEvent=e,s&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){let t=e.getContainer(),n=e.getSecondaryContainers?.(),i=n?.length;if(!i)return[[t]];let r=new Array(i+1);r[0]=[t];for(let o=0;o<i;++o)r[o+1]=n[o];return r}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1,r=(a,l)=>{for(let c of l){let{width:d,height:u,left:h,right:p,top:f,bottom:g}=c.getBoundingClientRect();if(d===0||u===0)return!1;let C=a.clientX>=h&&a.clientX<p,m=a.clientY>=f&&a.clientY<g;if(!C||!m)return!1}return!0};for(let a of n)if(r(e,a)){i=!0;break}let{eElement:o,type:s}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(s,o)}findCurrentDropTarget(e){let t=[],n=this.dropTargets;for(let s=0,a=n.length;s<a;++s){let l=n[s];this.isMouseOnDropTarget(e,l)&&t.push(l)}let i=t.length;if(i===0)return null;if(i===1)return t[0];let o=ra(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let s=0,a=o.length;s<a;++s){let l=o[s];for(let c=0,d=t.length;c<d;c++){let u=t[c],h=this.getAllContainersFromDropTarget(u),p=!1;for(let f=0,g=h.length;f<g&&!p;f++){let C=h[f];for(let m=0,w=C.length;m<w;m++)if(C[m]===l){p=!0;break}}if(p)return u}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){let t=e.getContainer(),n=this.dropTargets,i=0;for(let r=0,o=n.length;r<o;++r){let s=n[r];if(s.getContainer()===t){s.external&&--this.externalDropZoneCount;continue}i!==r&&(n[i]=s),++i}n.length=i}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){let t=this.dropTargets;for(let n=0,i=t.length;n<i;++n){let r=t[n];if(r.external&&r.getContainer()===e)return r}return null}dropTargetEvent(e,t,n){let{dragSource:i,dragItem:r,lastDraggingEvent:o,lastMouseEvent:s,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),d=c.getBoundingClientRect(),{clientX:u,clientY:h}=t,p=u-(s?.clientX||0),f=h-(s?.clientY||0),g=this.createEvent({event:t,x:u-d.left,y:h-d.top,vDirection:f>0?"down":f<0?"up":null,hDirection:p<0?"left":p>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:i,fromNudge:n,dragItem:r,dropZoneTarget:c,dropTarget:o?.dropTarget??null,changed:!!o?.changed});return this.lastDraggingEvent=g,g}positionDragImageComp(e){let t=this.dragImageComp?.getGui();t&&p_(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){let t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(n=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;let i=this.dragImageComp;i!==n&&(this.dragImageComp=n,this.removeDragImageComp(i)),n&&(this.appendDragImageComp(n),this.updateDragImageComp())})}appendDragImageComp(e){let t=e.getGui(),n=t.style;n.position="absolute",n.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),n.top="20px",n.left="20px";let i=rp(this.beans);i?i.appendChild(t):this.warnNoBody()}updateDragImageComp(){let{dragImageComp:e,dragSource:t,lastDropTarget:n,lastDraggingEvent:i,dragImageLastLabel:r}=this;if(!e)return;this.setDragImageCompIcon(n?.getIconName?.(i)??null);let o=t?.dragItemName;typeof o=="function"&&(o=o(i)),o||(o=""),r!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},t5=class extends Gr{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i,stopPropagationCallbacks:r}=this,o=[t,n],s={setTabIndex:m=>{for(let w of o)m==null?w.removeAttribute("tabindex"):w.setAttribute("tabindex",m)}};this.addTabGuards(t,n);let{focusTrapActive:a=!1,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:C}=e;this.tabGuardCtrl=this.createManagedBean(new Bge({comp:s,focusTrapActive:a,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:l,onFocusOut:c,focusInnerElement:d,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:C},r))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=vi(this.beans).createElement("div"),n=e==="top"?qw.TAB_GUARD_TOP:qw.TAB_GUARD_BOTTOM;return t.classList.add(qw.TAB_GUARD,n),Jn(t,"presentation"),t}addTabGuards(e,t){let n=this.eFocusableElement;n.prepend(e),n.append(t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];at(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){dy(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.before(t):e(t,n)}destroy(){let{eTopGuard:e,eBottomGuard:t}=this;Bt(e),Bt(t),super.destroy()}},Bu=class extends Qr{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new t5(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},vo=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(vo||{}),$me=class extends Wme{createEvent(e){return Oe(this.gos,e)}createDragImageComp(e){let{gos:t,beans:n}=this;return gge(n.userCompFactory,Oe(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){X(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){let n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}};function I$(e,t){return e+"_"+t}function Lr(e){return e instanceof ny}var ny=class extends K{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=Zr(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return I$(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(let e of this.displayedChildren)Lr(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=Qe(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(let t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(let t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(let t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(let t of this.displayedChildren??[])Il(t)?e.push(t):Lr(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(let t of this.children??[])Il(t)?e.push(t):Lr(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(let n of this.children??[]){if(Lr(n)&&!n.displayedChildren?.length)continue;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},dU="row-group-",n5="t-",i5="b-",qme=0,ar=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=qme++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){let e=this._groupData;return e!==void 0?e:this.footer?this.sibling?.groupData:this.beans.groupStage?.loadGroupData(this)??null}set groupData(e){this._groupData=e}get allLeafChildren(){let e=this._leafs;return e===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){let{valueCache:n,eventSvc:i}=this.beans,r=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();let o=this.createDataChangedEvent(e,r,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;let a=this.sibling.createDataChangedEvent(e,r,t);this.sibling.__localEventService?.dispatchEvent(a)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});let s=this.pinnedSibling;s&&(s.data=e,s.__localEventService?.dispatchEvent(s.createDataChangedEvent(e,r,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:s}))}updateDataOnDetailNode(){let e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(mt(13),null):this.rowPinned==="top"?n5+this.rowIndex:this.rowPinned==="bottom"?i5+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){let{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));let o=this.createDataChangedEvent(e,r,!1);this.__localEventService?.dispatchEvent(o)}setId(e){let t=Fl(this.beans.gos);if(t)if(this.data){let n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(dU)&&mt(14,{groupPrefix:dU})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");let t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){let{colModel:i,valueSvc:r,gos:o,editSvc:s}=this.beans,a=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!a)return!1;let l=r.getValueForDisplay({column:a,node:this,source:"api"}).value;if(o.get("readOnlyEdit")){let{beans:{eventSvc:d},data:u,rowIndex:h,rowPinned:p}=this;return d.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:h,rowPinned:p,column:a,colDef:a.colDef,data:u,node:this,oldValue:l,newValue:t,value:t,source:n}),!1}if(s&&!s.committing){let d=s.setDataValue({rowNode:this,column:a},t,n);if(d!=null)return d}let c=r.setValue(this,a,t,n);return this.dispatchCellChangedEvent(a,t,l),c&&this.pinnedSibling?.dispatchCellChangedEvent(a,t,l),c}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length,{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){let i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();let e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){let t=this.childrenAfterGroup;if(t)for(let n=0,i=t.length;n<i;++n)t[n].depthFirstSearch(e);e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new Rc)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);let n=this.__localEventService??(this.__localEventService=new Rc);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,n);let i=this.frameworkEventListenerService?.wrap(e,t)??t;n.addEventListener(e,i)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){let n=this.__localEventService;n&&(n.removeEventListener(e,t),n.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(X(61),this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let e=[],t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){let e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}_destroy(e){if(this.destroyed)return!1;if(this.destroyed=!0,e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){let t=this.detailNode;t&&t._destroy(e);let n=this.sibling;n&&n._destroy(e)}return!0}};function r5(e,t,n){return Oe(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var Kme=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),o5=(e,t)=>{let n=new ar(t);for(let i of Object.keys(e))Kme.has(i)||(n[i]=e[i]);return n.oldRowTop=null,n},iy=(e,t,n)=>{if(!n)return;let i=n.rowIndex;if(i==null)return;i+=t;let r=e.getRowCount();for(;i>=0&&i<r;){let o=e.getRow(i);if(!o||!o.footer&&!o.detail)return o;i+=t}},T$={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},Yme=new Set(Object.values(T$));function $h(e,t){let n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;let i=n.create(n.refreshed),r=n;return r.created=!0,r.promise=i,i}function F_(e,t,n,i,r,o,s){return t.refresh?.(ce(T({},n),{model:i,source:o,additionalEventAttributes:s})),e().then(a=>{if(a){let{filter:l,filterParams:c}=a;E0(l,c,i,r,o,s)}})}function E0(e,t,n,i,r,o){e?.refresh?.(ce(T({},t),{model:n,state:i,source:r,additionalEventAttributes:o}))}function P$(e,t,n,i){let r=e();r?.created&&r.promise.then(o=>{let s=t();E0(o,r.filterParams,s,n()??{model:s},"ui",i)})}function ZD(e){let t,n=!1,i,{action:r,filterParams:o,getFilterUi:s,getModel:a,getState:l,updateState:c,updateModel:d,processModelToApply:u}=e;switch(r){case"apply":{let h=l();i=h?.model??null,u&&(i=u(i)),t={state:h?.state,model:i},n=!0;break}case"clear":{t={model:null},o?.buttons?.includes("apply")||(n=!0,i=null);break}case"reset":{t={model:null},n=!0,i=null;break}case"cancel":{t={model:a()};break}}c(t),n?d(i):P$(s,a,l,{fromAction:r})}function Kr(e,t){return e[t]??null}function bt(e){return Qi(e)}function Zme(e){return{tag:"div",cls:e}}var D0=class extends pe{constructor(e){let{className:t="ag-filter-apply-panel"}=e??{};super(Zme(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){let n=this.buttons;if(this.buttons=e,n===e)return;let i=this.getGui();at(i);let r;this.destroyListeners();let o=document.createDocumentFragment(),s=this.className,a=({type:c,label:d})=>{let u=m=>{this.dispatchLocalEvent({type:c,event:m})};["apply","clear","reset","cancel"].includes(c)||X(75);let h=c==="apply",f=bt({tag:"button",attrs:{type:h&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${s}-button${h?" "+s+"-apply-button":""}`,children:d});this.activateTabIndex([f]),h&&(r=f);let g=m=>{m.key===$.ENTER&&(m.preventDefault(),u(m))},C=this.listeners;f.addEventListener("click",u),C.push(()=>f.removeEventListener("click",u)),f.addEventListener("keydown",g),C.push(()=>f.removeEventListener("keydown",g)),o.append(f)};for(let c of e)a(c);this.eApply=r;let l=this.validationTooltipFeature;r&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!r&&l&&(this.validationTooltipFeature=this.destroyBean(l)),i.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){let n=this.eApply;n&&(ep(n,!e),this.validationMessage=t,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(let e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},k$={selector:"AG-FILTER-BUTTON",component:D0},Xme={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`,minDateValidation:e=>`Date must be after ${e[0]}`,maxDateValidation:e=>`Date must be before ${e[0]}`,strictMinValueValidation:e=>`Must be greater than ${e[0]}`,strictMaxValueValidation:e=>`Must be less than ${e[0]}`};function Dl(e,t,n){return uy(e,Xme,t,n)}function s5(e,t){let{debounceMs:n}=e;return _0(e)?(n!=null&&X(71),0):n??t}function _0(e){return(e.buttons?.indexOf("apply")??-1)>=0}function L$(e,t,n,i){let r=Dl(e,n);if(typeof t=="function"){let o=Dl(e,i);r=t({filterOptionKey:i,filterOption:o,placeholder:r})}else typeof t=="string"&&(r=t);return r}var a5=class extends pe{constructor(e,t,n,i,r,o){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=r,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){let{comp:e,params:t}=this.wrapper,n=t,i=n.useForm,r=i?"form":"div";this.setTemplate({tag:r,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,T({filterParamsChanged:({column:o,params:s})=>{o===this.column&&this.resetButtonsPanel(s,this.params)},filterStateChanged:({column:o,state:s})=>{o===this.column&&this.eButtons?.updateValidity(s.valid!==!1)},filterAction:({column:o,action:s,event:a})=>{o===this.column&&this.afterAction(s,a)}},this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;let s=this.params;this.resetButtonsPanel(s,s,!0)}}}:void 0))}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){let{buttons:i,readOnly:r}=t??{},{buttons:o,readOnly:s,useForm:a}=e;if(!n&&r===s&&Pu(i,o))return;let l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons,c=this.eButtons;if(l){let d=o.map(u=>{let h=`${u}Filter`;return{type:u,label:Dl(this,h)}});if(this.applyActive=_0(this.params),!c){c=this.createBean(new D0),this.appendChild(c.getGui());let u=this.column,h=p=>({event:f})=>{this.updateModel(u,p,{fromButtons:!0}),this.afterAction(p,f)};c?.addManagedListeners(c,{apply:h("apply"),clear:h("clear"),reset:h("reset"),cancel:h("cancel")}),this.eButtons=c}c.updateButtons(d,a)}else this.applyActive=!1,c&&(Bt(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){let t=this.hidePopup;if(!t)return;let n=e,i=n?.key,r;(i===$.ENTER||i===$.SPACE)&&(r={keyboardEvent:n}),t(r),this.hidePopup=null}afterAction(e,t){let{params:n,applyActive:i}=this,r=n?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),r&&i&&this.close(t);break}case"reset":{r&&i&&this.close();break}case"cancel":{r&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===$.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},Qme={tag:"div",cls:"ag-filter"},Vu=class extends pe{constructor(e,t,n){super(Qme),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??tt.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n,beans:{colFilter:i}}=this,r=i.getFilterUiForDisplay(t)??null;this.wrapper=r,r?.then(o=>{if(!o)return;let{isHandler:s,comp:a}=o,l;if(s){let c=!!this.enableGlobalButtonCheck,d=this.createBean(new a5(t,o,i,i.updateModel.bind(i),c&&i.isGlobalButtons,c));this.comp=d,l=d.getGui()}else l=a.getGui(),_e(l)||X(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){let{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(at(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},uU={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},hU=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jme(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function pU(e){return e instanceof Date&&!isNaN(e.getTime())}var hk={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:pU}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{let i=e.dateParser(n);return n==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&pU(e.dateParser(t))}),dateTime:e=>hk.date(e),dateTimeString:e=>hk.dateString(e),object:()=>{},text:()=>{}},pk={number:()=>({comparator:Jme}),boolean:({t:e})=>({valueFormatter:t=>_e(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{let i=e(n);return _e(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(i===1&&n!=null){let r=hU[Number(n)-1];return t(r,uU[r])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>Yh(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:i=>{let r=e(i);return _e(r)?r:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>Yh(t.dateParser(i??void 0),!1),treeListFormatter:(i,r)=>{if(r===1&&i!=null){let o=hU[Number(i)-1];return n(o,uU[o])}return i??n("blanks","(Blanks)")}}),dateTime:e=>{let t=pk.date(e);return t.treeListPathGetter=Yh,t},dateTimeString(e){let t=e.dataTypeDefinition.dateParser,n=pk.dateString(e);return n.treeListPathGetter=i=>Yh(t(i??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{let i=e(n);return _e(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function Ey(e,t,n,i,r,o,s){let a=t,l=n,c=e==="agSetColumnFilter";!l&&i.baseDataType==="object"&&!c&&(l=({column:p,node:f})=>r({column:p,node:f,value:o.valueSvc.getValue(p,f)}));let u=(c?pk:hk)[i.baseDataType],h=u({dataTypeDefinition:i,formatValue:r,t:s});return a=typeof t=="object"?T(T({},h),t):h,{filterParams:a,filterValueGetter:l}}var eve={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},tve={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function Dy(e,t=!1){return(t?tve:eve)[e??"text"]}var _y=class extends Zk{},O$="__ag_Grid_Stop_Propagation";function ei(e){e[O$]=!0}function Fs(e){return e[O$]===!0}var ap={isStopPropagation:Fs,stopPropagation:ei},Gu=class extends g${constructor(e,t){super(e,ap,t)}},xg=class extends pe{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){let e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Gu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new _y(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){let t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}areStatesEqual(e,t){return e===t}refresh(e){let t=e,n=this.params;this.params=t;let{source:i,state:r,additionalEventAttributes:o}=t;i==="colDef"&&this.updateParams(t,n);let s=this.state;this.state=r;let a=o?.fromAction;return(a&&a!=="apply"||r.model!==s.model||!this.areStatesEqual(r.state,s.state))&&this.setModelIntoUi(r.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=_0(e),this.setupApplyDebounced()}doesFilterPass(e){X(283);let{getHandler:t,model:n,column:i}=this.params;return t().doesFilterPass(ce(T({},e),{model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)}))}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return X(284),this.params.model!=null}setupApplyDebounced(){let e=s5(this.params,this.defaultDebounceMs),t=$n(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return X(285),this.params.model}setModel(e){X(286);let{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){let{params:t,state:{valid:n=!0,model:i}}=this;if(!n)return!1;let r=!this.areModelsEqual(t.model,i);return r&&t.onAction("apply",e),r}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();let n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;let{params:r,gos:o,eventSvc:s,applyActive:a}=this;r.onStateChange(i),r.onUiChange(this.getUiChangeEventParams()),o.get("enableFilterHandlers")||s.dispatchEvent({type:"filterModified",column:r.column,filterInstance:this}),i.valid&&(e??(e=a?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced())}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){let{positionableFeature:t,gos:n}=this;if(!t)return;let i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e,t){return Dl(this,e,t)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function N$(e){return!!e.operator}function l5(e,t,n){if(t==null)return null;let i=null,{compName:r,jsComp:o,fwComp:s}=d$(e,t);return r?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:o==null&&s==null&&t.filter===!0&&(i=n()),i}var B$=["aggregation","filter","sort","pivot","columnVisibility","columnSizing","rowGroup"],_c={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},c5=class extends K{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?_c.AUTO_HEIGHT:t.print?_c.PRINT:_c.NORMAL;this.view.updateLayoutClasses(n,t)}},qh="Viewport",fU="fakeVScrollComp",k3=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],gU=100,L3=150,nve=class extends K{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=$n(this,()=>this.lastScrollSource[1]=null,L3),this.resetLastVScrollDebounced=$n(this,()=>this.lastScrollSource[0]=null,L3)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");let e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,qh)});for(let e of k3){let t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?$n(this,this.onVScroll.bind(this,qh),gU):this.onVScroll.bind(this,qh),i=t?$n(this,this.onVScroll.bind(this,fU),gU):this.onVScroll.bind(this,fU);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...k3,qh]){if(this.lastScrollSource[1]===t)continue;let n=this.getViewportForSource(t);HD(n,e,this.enableRtl)}}getViewportForSource(e){return e===qh?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i=GD(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===qh?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;let{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===qh?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){let t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent(ce(T({},t),{type:"bodyScrollEnd"}))},L3)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Tu()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=ly(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){let e=this.scrollLeft,t=!1;for(let n of k3)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(qh)}scrollGridIfNeeded(e=!1){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),HD(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){let{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;let{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){let t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let{rowModel:n}=this.beans,i=n.getRowCount(),r=-1;for(let o=0;o<i;o++){let s=n.getRow(o);if(typeof e=="function"){if(s&&e(s)){r=o;break}}else if(e===s||e===s.data){r=o;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(e,t,n=0){if(po(this.gos,"print"))return;let{rowModel:i}=this.beans,r=i.getRowCount();if(typeof e!="number"||e<0||e>=r){X(88,{index:e});return}this.clearRetryListeners();let{frameworkOverrides:o,pageBounds:s,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{let c=this.ctrlsSvc.getGridBodyCtrl(),d=i.getRow(e),u,h,p=0;this.invalidateVerticalScroll();do{let{stickyTopHeight:f,stickyBottomHeight:g}=c,C=d.rowTop,m=d.rowHeight,w=s.getPixelOffset(),x=d.rowTop-w,D=x+d.rowHeight,F=this.getVScrollPosition(),L=a.divStretchOffset,V=F.top+L,B=F.bottom+L,P=B-V,U=a.getScrollPositionForPixel(x),A=a.getScrollPositionForPixel(D-P),I=Math.min((U+A)/2,x),j=V+f>x,G=B-g<D,Q=null;t==="top"?Q=U-f:t==="bottom"?Q=A+g:t==="middle"?Q=I:j?Q=U-f:G&&(A-U>P?Q=U-f:Q=A+g),Q!==null&&(this.setVerticalScrollPosition(Q),l.redraw({afterScroll:!0})),u=C!==d.rowTop||m!==d.rowHeight,h=f!==c.stickyTopHeight||g!==c.stickyBottomHeight,p++}while((u||h)&&p<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(d?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){let f=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{let g=this.getVScrollPosition().top;f!==g&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(let e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){let{colModel:n,frameworkOverrides:i}=this.beans,r=n.getCol(e);if(!r||r.isPinned()||!this.visibleCols.isColDisplayed(r))return;let o=this.getPositionedHorizontalScroll(r,t);i.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?n:i)||r,l=s?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:d,colMiddle:u,colRight:h}=this.getColumnBounds(e);return c?u-o/2:a?s?h:d:s?d-o:h-o}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(e),o=this.enableRtl,s=o?t>r:n<r,a=o?n<i:t>i;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),r=e.getLeft(),o=t?-1:1,s=t?n-r:r,a=s+i*o,l=s+i/2*o;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},d5=class extends K{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=po(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,r=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth(),s;e?s=i+r+o:(s=i,this.addSpacer&&(this.gos.get("enableRtl")?r:o)===0&&n.verticalScrollShowing&&(s+=n.getScrollbarWidth())),this.callback(s)}},ive=class extends K{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{ks(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.eBodyViewport,t=ly(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;let e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function kD(e,t,n,i){let r=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return V$(e,t,n,i,r)}function rve(e,t,n,i){let r=t?.suppressMouseEventHandling;return V$(e,void 0,n,i,r)}function V$(e,t,n,i,r){return r?r(Oe(e,{column:t,node:n,event:i})):!1}function G$(e,t,n){let i=t;for(;i;){let r=kW(e,i,n);if(r)return r;i=i.parentElement}return null}var XD="cellCtrl";function Ay(e,t){return G$(e,t,XD)}var QD="renderedRow";function u5(e,t){return G$(e,t,QD)}function fk(e,t,n,i,r){let o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;let s=Oe(e,{event:t,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(s))}function h5(e){let{pinnedRowModel:t,rowModel:n,rangeSvc:i,visibleCols:r}=e;if(!i||r.allCols.length===0)return;let o=t?.isEmpty("top")??!0,s=t?.isEmpty("bottom")??!0,a=o?null:"top",l,c;s?(l=null,c=n.getRowCount()-1):(l="bottom",c=t?.getPinnedBottomRowCount()??-1),i.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:c,rowEndPinned:l})}var ove=class extends K{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){let t=["dblclick","contextmenu","mouseover","mouseout","click",CW("touchstart")?"touchstart":"mousedown"];for(let n of t){let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})}}processMouseEvent(e,t){if(!Qw(this.beans,t)||Fs(t))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){let{gos:t}=this;return{cellCtrl:Ay(t,e),rowCtrl:u5(t,e)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!fk(this.gos,n,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,i),A_(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){let{rowNode:i}=e,{focusSvc:r,navigation:o}=this.beans,a=r.getFocusedCell()?.column;if(!fk(this.gos,n,i,a,!1)){let c=n.key;if(t==="keydown")switch(c){case $.PAGE_HOME:case $.PAGE_END:case $.PAGE_UP:case $.PAGE_DOWN:o?.handlePageScrollingKey(n,!0);break;case $.LEFT:case $.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case $.UP:case $.DOWN:e.onKeyboardNavigate(n);break;case $.TAB:e.onTabKeyDown(n);break;default:}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Qw(this.beans,e))return;let n=u$(e),{clipboardSvc:i,undoRedo:r}=this.beans;if(n===$.A)return this.onCtrlAndA(e);if(n===$.C)return this.onCtrlAndC(i,e);if(n===$.D)return this.onCtrlAndD(i,e);if(n===$.V)return this.onCtrlAndV(i,e);if(n===$.X)return this.onCtrlAndX(i,e);if(n===$.Y)return this.onCtrlAndY(r);if(n===$.Z)return this.onCtrlAndZ(r,e)}onCtrlAndA(e){let{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:r}=this;n&&Vo(r)&&!Mfe(r)&&t.isRowsToRender()?h5(this.beans):i&&i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:NW(r)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},H$=class extends K{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){let t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},bD=e=>e.topRowCtrls,wD=e=>e.getStickyTopRowCtrls(),yD=e=>e.getStickyBottomRowCtrls(),SD=e=>e.bottomRowCtrls,xD=e=>e.allRowCtrls,O3=e=>e.getCtrls("top"),N3=e=>e.getCtrls("center"),B3=e=>e.getCtrls("bottom"),sve={center:{type:"center",name:"center-cols",getRowCtrls:xD,getSpannedRowCtrls:N3},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:xD,getSpannedRowCtrls:N3},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:xD,getSpannedRowCtrls:N3},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:xD},topCenter:{type:"center",name:"floating-top",getRowCtrls:bD,getSpannedRowCtrls:O3},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:bD,getSpannedRowCtrls:O3},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:bD,getSpannedRowCtrls:O3},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:bD},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:wD},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:wD},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:wD},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:wD},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:yD},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:yD},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:yD},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:yD},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:SD,getSpannedRowCtrls:B3},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:SD,getSpannedRowCtrls:B3},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:SD,getSpannedRowCtrls:B3},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:SD}};function z$(e){return`ag-${Ry(e).name}-viewport`}function LD(e){let t=Ry(e);return t.container??`ag-${t.name}-container`}function ave(e){return`ag-${Ry(e).name}-spanned-cells-container`}function Ry(e){return sve[e]}var lve=["topCenter","topLeft","topRight"],cve=["bottomCenter","bottomLeft","bottomRight"],dve=["center","left","right"],uve=["center","left","right","fullWidth"],hve=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],pve=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],fve=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],j$=["stickyTopCenter","stickyTopLeft","stickyTopRight"],U$=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],gve=[...j$,"stickyTopFullWidth",...U$,"stickyBottomFullWidth"],mve=[...lve,...cve,...dve,...j$,...U$],vve=class extends K{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Ry(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ive(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new ove(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:r,rangeSvc:o}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(pve,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(fve,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(uve,()=>this.createManagedBean(new H$(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(mve,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(hve,()=>this.createManagedBean(new d5(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){let{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{let i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(gve.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=po(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:e}=this.beans;if(!e)return;let t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return lg(this.eViewport)}getCenterViewportScrollLeft(){return GD(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=Pl(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Ik(this.eViewport)}getViewportScrollLeft(){return GD(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Pk(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){HD(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=po(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,o=t.filter(s=>{let a=s.isFullWidth();return this.options.fullWidth?!r&&a:r||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},W$="ag-force-vertical-scroll",Cve="ag-selectable",bve="ag-column-moving",wve=class extends K{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,r,o,s){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${z$("center")}`),this.eFullWidthContainer=n.querySelector(`.${LD("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${LD("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${LD("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new c5(this.comp)),this.scrollFeature=this.createManagedBean(new nve(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,o,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){let e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){let t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){let e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let n=t&&e.getScrollbarWidth()||0,i=f$()?16:0,r=`calc(100% + ${n+i}px)`;ks(this.beans,()=>this.comp.setBodyViewportWidth(r)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:e,colModel:t,gos:n}=this,i=n.get("treeData");if(!i){let r=t.isPivotMode();i=(e?e.columns.length:0)>=(r?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){for(let t of e)this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,r=ng(i,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:n=>{let{target:i,relatedTarget:r}=n,o=t.contains(r),s=ng(r,"ag-root",t);ng(i,"ag-root",t)||(!o||s)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(bve,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(Cve,e)}updateScrollingClasses(){let{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?W$:null,n=po(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&mW(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:e,environment:t}=this.beans,n=t.sizesMeasured,i=()=>{let r=n&&Xv(this.gos)&&!e.stretching,o=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,r)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({stylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){let{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:i,eBottom:r,beans:{popupSvc:o,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),s?.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});let l=this.onStickyWheel.bind(this);for(let d of[t,n,i,r])this.addManagedElementListeners(d,{wheel:l});let c=this.onHorizontalWheel.bind(this);for(let d of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(d).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&Qw(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){let{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),i=e?.getPinnedBottomTotalHeight(),r=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),s=r-o,a=n?s+n:0,l=i?s+i:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){let t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=e?.getPinnedBottomTotalHeight()??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,s=i+o;n.setStickyBottomBottom(`${s}px`)}};function p5(e,t){return Ay(e,t.target)?.getFocusedCellPosition()??null}function ry(e,t){let n=po(e.gos,"normal"),i=t,r,o;i.clientX!=null||i.clientY!=null?(r=i.clientX,o=i.clientY):(r=i.x,o=i.y);let{pageFirstPixel:s}=e.pageBounds.getCurrentPagePixelRange();if(o+=s,n){let a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();r+=c.left,o+=l.top}return{x:r,y:o}}var $$=class extends pe{constructor(e,t){super(),this.direction=t,this.eViewport=q,this.eContainer=q,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",h$()||Tu())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=f$(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),ks(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){let t=this.eViewport;Ok(this,()=>Dr(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},yve={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Sve=class extends $${constructor(){super(yve,"horizontal"),this.eLeftSpacer=q,this.eRightSpacer=q,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new d5(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleSvc.verticalScrollShowing,t=this.visibleCols.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),_l(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let r=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(r+=i),_l(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){let e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:i===0&&t?16:i,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),$w(this.getGui(),o),$w(this.eViewport,o),$w(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return GD(this.eViewport,this.enableRtl)}setScrollPosition(e){Dr(this.eViewport)||this.attemptSettingScrollPosition(e),HD(this.eViewport,e,this.enableRtl)}},xve={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Sve},Eve={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Dve=class extends $${constructor(){super(Eve,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new H$(this.eContainer));let{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){let{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,r=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),_l(this.getGui(),r),_l(this.eViewport,r),_l(this.eContainer,r),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){let n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Dr(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},_ve={selector:"AG-FAKE-VERTICAL-SCROLL",component:Dve},Ave="ag-column-first",Rve="ag-column-last";function M_(e,t,n,i){return jt(e)?[]:K$(e.headerClass,e,t,n,i)}function I_(e,t,n,i){return jt(e)?[]:K$(e.toolPanelClass,e,t,n,i)}function q$(e,t,n){e.toggleCss(Ave,n.isColAtEdge(t,"first")),e.toggleCss(Rve,n.isColAtEdge(t,"last"))}function Fve(e,t,n,i){return Oe(t,{colDef:e,column:n,columnGroup:i})}function K$(e,t,n,i,r){if(jt(e))return[];let o;if(typeof e=="function"){let s=Fve(t,n,i,r);o=e(s)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function Bd(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function Eg(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return n&&i&&r}function lr(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(_e(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function Hn(e,t){return!e&&!t?!0:!e||!t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Dg(e){let t=0,n,{pinnedRowModel:i,rowModel:r,pageBounds:o}=e;return i?.getPinnedTopRowCount()?n="top":r.getRowCount()?(n=null,t=o.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function _g(e){let t,n=null,{pinnedRowModel:i,pageBounds:r}=e,o=i?.getPinnedBottomRowCount(),s=i?.getPinnedTopRowCount();return o?(n="bottom",t=o-1):e.rowModel.getRowCount()?t=r.getLastRow():s&&(n="top",t=s-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Mi(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Ha(e,t){let n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;let i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function Mve(e,t,n){let{rowModel:i,pinnedRowModel:r}=e,o;return o??(o=i?.getRowNode(t)),n?o??(o=r?.getPinnedRowById(t,n)):(o??(o=r?.getPinnedRowById(t,"top")),o??(o=r?.getPinnedRowById(t,"bottom"))),o}function la(e,t,n=!1){let{rowIndex:i,rowPinned:r}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;if(i===0)return r==="top"?null:r==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:s?.isRowsToRender("top")?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){let l=r?void 0:a.getRow(i);return Y$(e,l,!0)??{rowIndex:i-1,rowPinned:r}}return{rowIndex:i-1,rowPinned:r}}function f5(e,t){let{pinnedRowModel:n,rowModel:i}=e,r=n?.getPinnedTopRowCount()??0,o=i.getRowCount(),{rowPinned:s,rowIndex:a}=t;return s==="top"?a:s==="bottom"?r+o+a:r+a}function Vr(e,t,n=!1){let{rowIndex:i,rowPinned:r}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;if(Ive(e,t))return r==="bottom"?null:r==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:s?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){let l=r?void 0:a.getRow(i);return Y$(e,l)??{rowIndex:i+1,rowPinned:r}}return{rowIndex:i+1,rowPinned:r}}function Y$(e,t,n=!1){let{gos:i,rowRenderer:r}=e;if(!t?.sticky||!v0(i))return;let o=r.getStickyTopRowCtrls(),s=r.getStickyBottomRowCtrls(),a=!s.some(u=>u.rowNode.rowIndex===t.rowIndex),l=a?o:s,c=(n?-1:1)*(a?-1:1),d;for(let u=0;u<l.length;u++)if(l[u].rowNode.rowIndex===t.rowIndex){d=l[u+c];break}return d?{rowIndex:d.rowNode.rowIndex,rowPinned:null}:void 0}function Ive(e,t){let{rowPinned:n,rowIndex:i}=t,{pinnedRowModel:r,pageBounds:o}=e;return n==="top"?(r?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(r?.getPinnedBottomRowCount()??0)-1<=i:o.getLastRow()<=i}function g5(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===$.TAB){let r=i.shiftKey;Wi(e,n,!1,r)||za(e,r)&&i.preventDefault()}}})}function m5(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function og(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.exclusive}function T_(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.exclusive}function za(e,t,n=!1){let i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function v5(e,t){let n=e.focusSvc,i=n.getFocusedCell();if(i&&t&&Eg(i,t)){let{rowIndex:r,rowPinned:o,column:s}=t;Ts(e)&&n.setFocusedCell({rowIndex:r,column:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!S0()})}}function Z$(e){return e.cols?e.cols.treeDepth+1:-1}function Dd(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function C5(e){let t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(let i of n){if(!i)continue;let r=i.getGroupRowCount()||0;for(let o=0;o<r;o++){let s=i.getGroupRowCtrlAtIndex(o),a=t[o];if(s){let l=Tve(e,s);(a==null||l>a)&&(t[o]=l)}}}return t}function Tve(e,t){let i=e.colModel.isPivotMode()?kve(e):X$(e),r=t.getHeaderCellCtrls();for(let o of r){let{column:s}=o,a=s.getAutoHeaderHeight();a!=null&&a>i&&s.isAutoHeaderHeight()&&(i=a)}return i}function b5(e){let n=e.colModel.isPivotMode()?Pve(e):Fy(e);return e.colModel.forAllCols(i=>{let r=i.getAutoHeaderHeight();r!=null&&r>n&&i.isAutoHeaderHeight()&&(n=r)}),n}function Fy(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function P_(e){return e.gos.get("floatingFiltersHeight")??Fy(e)}function X$(e){return e.gos.get("groupHeaderHeight")??Fy(e)}function Pve(e){return e.gos.get("pivotHeaderHeight")??Fy(e)}function kve(e){return e.gos.get("pivotGroupHeaderHeight")??X$(e)}function Lve(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var Ove=class extends K{setComp(e,t,n){this.comp=e,this.eGui=t;let{beans:i}=this,{headerNavigation:r,touchSvc:o,ctrlsSvc:s}=i;r&&this.createManagedBean(new Gu(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();let a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>ks(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){let{beans:e}=this,t=0,n=C5(e).reduce((o,s)=>o+s,0),i=b5(e);if(e.filterManager?.hasFloatingFilters()&&(t+=P_(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;let r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){let t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){let n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:r}=this,{headerNavigation:o,focusSvc:s}=r;(o.navigateHorizontally(i,!0,e)||!n&&s.focusOverlay(!1)||za(r,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null,{headerNavigation:n}=this.beans;switch(e.key){case $.LEFT:t="LEFT";case $.RIGHT:{_e(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case $.UP:t="UP";case $.DOWN:{_e(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains(wt(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){let{menuSvc:i,ctrlsSvc:r}=this.beans;if(!e&&!n||!i?.isHeaderContextMenuEnabled())return;let{target:o}=e??t;(o===this.eGui||o===r.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,e,n)}},w5=class extends pe{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Nve={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},Bve=class extends w5{constructor(e){super(Nve,e),this.eResize=q,this.eHeaderCompWrapper=q,this.headerCompVersion=0}postConstruct(){let e=this.getGui(),t=()=>{let i=this.ctrl.getSelectAllGui();i&&(this.eResize.insertAdjacentElement("afterend",i),this.addDestroyFunc(()=>i.remove()))},n={setWidth:i=>e.style.width=i,toggleCss:(i,r)=>this.toggleCss(i,r),setUserStyles:i=>cy(e,i),setAriaSort:i=>i?Upe(e,i):Wpe(e),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:t,removeSelectAllGui:()=>this.ctrl.getSelectAllGui()?.remove()};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),t()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.headerCompGui?.remove(),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Vve={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},Gve=class extends w5{constructor(e){super(Vve,e),this.eResize=q,this.eHeaderCompWrapper=q}postConstruct(){let e=this.getGui(),t=(i,r)=>r!=null?e.setAttribute(i,r):e.removeAttribute(i),n={toggleCss:(i,r)=>this.toggleCss(i,r),setUserStyles:i=>cy(e,i),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>Ie(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}},Hve={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},zve=class extends w5{constructor(e){super(Hve,e),this.eFloatingFilterBody=q,this.eButtonWrapper=q,this.eButtonShowMainFilter=q}postConstruct(){let e=this.getGui(),t={toggleCss:(n,i)=>this.toggleCss(n,i),setUserStyles:n=>cy(e,n),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>Ie(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp?.getGui().remove(),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp)}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached?.()}}},jve=class extends pe{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),r0(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:n=>this.getGui().style.height=n,setTop:n=>this.getGui().style.top=n,setHeaderCtrls:(n,i)=>this.setHeaderCtrls(n,i),setWidth:n=>this.getGui().style.width=n,setRowIndex:n=>r0(this.getGui(),n)};this.ctrl.setComp(t,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;this.headerComps={};for(let i of e){let r=i.instanceId,o=n[r];delete n[r],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[r]=o}if(Object.values(n).forEach(i=>{i.getGui().remove(),this.destroyBean(i)}),t){let i=Object.values(this.headerComps);i.sort((o,s)=>{let a=o.getCtrl().column.getLeft(),l=s.getCtrl().column.getLeft();return a-l});let r=i.map(o=>o.getGui());gW(this.getGui(),r)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new Gve(e);break;case"filter":t=new zve(e);break;default:t=new Bve(e);break}return this.createBean(t),t.setParentComponent(this),t}},y5=class extends K{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){let{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Qe(t):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=_e(this.columnOrGroup.getOldLeft());t?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){let{gos:n,visibleCols:i}=this.beans;if(!po(n,"print")||e.getPinned()==="left")return t;let o=i.getColsLeftWidth();if(e.getPinned()==="right"){let s=i.bodyWidth;return o+s+t}return o+t}setLeft(e){if(_e(e)&&(this.eCell.style.left=`${e}px`),Lr(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&Fk(this.ariaEl,t.length)}}},Uve=0,Q$="headerCtrl",S5=class extends K{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+Uve++}postConstruct(){let e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,i,r){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,i,r),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){let{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),r=i?.suppressHeaderKeyboardEvent;if(!_e(r))return!1;let o=Oe(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!r(o)}getWrapperHasFocus(){return wt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let e=this.column.getDefinition();if(!e)return;let{headerStyle:t}=e,n;if(typeof t=="function"){let i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){let{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:r}=this,o=u=>{if(!this.isAlive()||!i.isAlive())return;let{paddingTop:h,paddingBottom:p,borderBottomWidth:f,borderTopWidth:g}=vg(this.eGui),C=h+p+f+g,w=t.offsetHeight+C;if(u<5){let D=!vi(r)?.contains(t),F=w==0;if(D||F){Jw(()=>o(u+1),"raf",r);return}}this.setColHeaderHeight(this.column,w)},s=!1,a,l=()=>{let u=this.column.isAutoHeaderHeight();u&&!s&&c(),!u&&s&&d()},c=()=>{s=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=Pl(this.beans,t,()=>o(0))},d=()=>{s=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),i.addDestroyFunc(()=>d()),i.addManagedListeners(this.column,{widthChanged:()=>s&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>o(0))}}),n&&n(l)}onDisplayedColumnsChanged(){let{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(q$(e,t,n.visibleCols),l_(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let e=og(this.beans);this.eGui&&sa(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){let t=wt(this.beans),n=e.key===$.LEFT||e.key===$.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;if((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),(e.ctrlKey||e.metaKey)&&u$(e)===$.C)return this.beans.clipboardSvc?.copyToClipboard();if(!n)return;let o=e.key===$.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let s=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(s,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(o)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){let{gos:t,column:n}=this,i=e.key===$.LEFT!==t.get("enableRtl"),r=n.getPinned(),o=t.get("enableRtl");return r&&o!==(r==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case $.PAGE_DOWN:case $.PAGE_UP:case $.PAGE_HOME:case $.PAGE_END:t&&e.preventDefault()}}addDomData(e){let t=Q$,{eGui:n,gos:i}=this;cg(i,n,t,this),e.addDestroyFunc(()=>cg(i,n,t,null))}focus(e){if(!this.isAlive())return!1;let{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){let i=e??t,{menuSvc:r,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),r?.isHeaderContextMenuEnabled(n)&&r.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;let{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Wve=class extends S5{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,i,r){this.comp=e;let{rowCtrl:o,column:s,beans:a}=this,{colResize:l,context:c,colHover:d,rangeSvc:u}=a,h=vy(this,c,r);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:f=>this.setRefreshFunction("measuring",f),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(o.pinned,s,n,e,this)):Ie(n,!1),d?.createHoverFeature(h,[s],t),u?.createRangeHighlightFeature(h,s,e),h.createManagedBean(new y5(s,t,a)),h.createManagedBean(new Gu(t,{shouldStopEventPropagation:f=>this.shouldStopEventPropagation(f),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(s,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return Oe(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){let e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return mge(this.beans.userCompFactory,t,e)}createParams(){let{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return Oe(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||Yr(this.gos)),showColumnMenu:(o,s)=>{e?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:s})},showColumnMenuAfterMouseClick:(o,s)=>{e?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:s})},showFilter:o=>{e?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,s)=>{t?.setSortForColumn(this.column,Ac(o),!!s,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,s)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,s)}})}setupSelectAll(e){let{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{let n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===$.SPACE?this.selectAllFeature?.onSpaceKeyDown(e):e.key===$.ENTER?this.onEnterKeyDown(e):e.key===$.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){let{column:t,gos:n,sortable:i,beans:r}=this,o=!1;(e.ctrlKey||e.metaKey)&&(o=this.showMenuOnKeyPress(e,!0)),o||(!e.altKey&&Qh(n)?r.rangeSvc?.handleColumnSelection(t,e):i&&r.sortSvc?.progressSort(t,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();return mU(n)&&n.onMenuKeyboardShortcut(t)?(e.preventDefault(),!0):!1}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),S0()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=M_(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(let r of n)i.has(r)?i.delete(r):this.comp.toggleCss(r,!0);for(let r of i)this.comp.toggleCss(r,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){let{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(let e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){let e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this,r=C5(this.beans),o=r.reduce((h,p)=>h+p,0)===0;if(n.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",s>0);let l=b5(i);if(s===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}n.toggleCss("ag-header-span-total",a);let c=(this.column.getFirstRealParent()?.getLevel()??-1)+1,d=r.length-c,u=0;for(let h=0;h<d;h++)u+=r[r.length-1-h];e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${l+u}px`)}refreshAriaSort(){let e=null,{beans:t,column:n,comp:i,sortable:r}=this;if(r){let o=this.getLocaleTextFunc(),s=t.sortSvc?.getDisplaySortForColumn(n)??null;i.setAriaSort(Ope(s)),e=o("ariaSortableColumn","Press ENTER to sort")}else i.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;this.menuEnabled&&(e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null,{openFilterEnabled:t,gos:n}=this;t&&!Yr(n)&&(e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;this.column.isFilterActive()&&(e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null,{gos:t,column:n,beans:i}=this;if(Qh(t)){let o=this.getLocaleTextFunc(),s=i.rangeSvc?.isColumnInAnyRange(n);e=o("ariaColumnCellSelection",`Press CTRL+SPACE to ${s?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){let n=this.ariaDescriptionProperties;t!=null?n.set(e,t):n.delete(e)}announceAriaDescription(){let{beans:e,eGui:t,ariaDescriptionProperties:n}=this;if(!t.contains(wt(e)))return;let i=Array.from(n.keys()).sort((r,o)=>r==="filter"?-1:o.charCodeAt(0)-r.charCodeAt(0)).map(r=>n.get(r)).join(". ");e.ariaAnnounce?.announceValue(i,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){let t=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return mU(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function mU(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var $ve=0,V3=class extends K{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=$ve++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=po(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=vy(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=po(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0,t=C5(this.beans);for(let r=0;r<t.length;r++){if(r===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[r]};e+=t[r]}let n=b5(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;let i=P_(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;let t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){let e=this.ctrlsById;this.ctrlsById=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);let n=i=>{let{focusSvc:r,visibleCols:o}=this.beans;return r.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(e)for(let[i,r]of e)n(r)?this.ctrlsById.set(i,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;let i=e.getUniqueId(),r;if(n&&(r=n.get(i),n.delete(i)),r&&r.column!=e&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":{r=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":r=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:r=this.createBean(new Wve(e,this));break}t.set(i,r)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];let e=[];for(let t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){let n=this.allCtrls.find(r=>r.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},qve=class extends K{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;let{pinnedCols:n,ctrlsSvc:i,colModel:r,colMoves:o}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);let s=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:s,advancedFilterEnabledChanged:s});let a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(a,this),r.ready&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let{focusSvc:t,filterManager:n,visibleCols:i}=this.beans,r=0,o=t.getFocusHeaderToUseAfterRefresh(),s=()=>{let u=i.headerGroupRowCount;r=u,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));let h=this.groupsRowCtrls.length;if(h!==u){if(h>u){for(let p=u;p<h;p++)this.destroyBean(this.groupsRowCtrls[p]);this.groupsRowCtrls.length=u;return}for(let p=h;p<u;p++){let f=this.createBean(new V3(p,this.pinned,"group"));this.groupsRowCtrls.push(f)}}},a=()=>{let u=r++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new V3(u,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==u&&this.columnsRowCtrl.setRowIndex(u)},l=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;let u=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){u();return}e||u();let h=r++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==h&&this.filtersRowCtrl.setRowIndex(h):this.filtersRowCtrl=this.createBean(new V3(h,this.pinned,"filter"))},c=this.getAllCtrls();s(),a(),l();let d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,o),c.length!==d.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){let t=n=>n?.getHeaderCellCtrls().find(i=>i.column===e);if(Il(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){let i=t(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){let r=this.getAllCtrls()[e];return r?r.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){let n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;let{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new d5(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Kve=class extends K{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){let{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(vU(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){vU(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){let{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(Yr(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Il(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Tu()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Yr(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!Yr(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos,t=e.get("suppressMenuHide");return Yr(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){let{positionBy:r,onClosedCallback:o}=t,s=t.column;if(r==="button"){let{buttonElement:a}=t;e?.showMenuAfterButtonClick(s,a,n,o,i)}else if(r==="mouse"){let{mouseEvent:a}=t;e?.showMenuAfterMouseEvent(s,a,n,o,i)}else if(s){let a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(s,"auto"),ks(a,()=>{let c=l.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);c&&e?.showMenuAfterButtonClick(s,c.getAnchorElementForMenu(i),n,o,i)})}}};function oy(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function vU(e){let{enterpriseMenuFactory:t,filterMenuFactory:n,gos:i}=e;return t&&Yr(i)?t:n}var A0=class extends by{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},k_=class extends pe{constructor(){super()}};function Ll(e,t,n){let i=$e(e,t,n);if(i){let{className:o}=i;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return i}let r=bt({tag:"span"});return r.appendChild(i),r}function $e(e,t,n){let i=null;e==="smallDown"?X(262):e==="smallLeft"?X(263):e==="smallRight"&&X(264);let r=n?.getColDef().icons;if(r&&(i=r[e]),t.gos&&!i){let o=t.gos.get("icons");o&&(i=o[e])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else{X(38,{iconName:e});return}if(typeof o=="string")return Tk(o);if(dy(o))return o;X(133,{iconName:e});return}else{let o=t.registry.getIcon(e);return o||t.validation?.validateIcon(e),bt({tag:"span",cls:`ag-icon ag-icon-${o??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var Yve={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},Zve=class extends k_{constructor(){super(...arguments),this.eLoadingIcon=q,this.eLoadingText=q}init(e){let{beans:t,gos:n}=this,i=hi(n.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(i??Yve),!i){let r=$e("overlayLoading",t,null);r&&this.eLoadingIcon.appendChild(r);let o=e.loading?.overlayText??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=o,t.ariaAnnounce.announceValue(o,"overlay")}}},Xve={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},Qve=class extends k_{constructor(){super(...arguments),this.eExportingIcon=q,this.eExportingText=q}init(e){let{beans:t}=this;this.setTemplate(Xve);let n=$e("overlayExporting",t,null);n&&this.eExportingIcon.appendChild(n);let i=e.exporting?.overlayText??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=i,t.ariaAnnounce.announceValue(i,"overlay")}},Jve={tag:"span",cls:"ag-overlay-no-rows-center"},e0e=class extends k_{init(e){let{beans:t,gos:n}=this,i=hi(n.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(i??Jve),!i){let r=e.noRows?.overlayText??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=r,t.ariaAnnounce.announceValue(r,"overlay")}}},t0e={tag:"span",cls:"ag-overlay-no-matching-rows-center"},n0e=class extends k_{init(e){let{beans:t}=this;this.setTemplate(t0e);let n=e.noMatchingRows?.overlayText??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,t.ariaAnnounce.announceValue(n,"overlay")}},i0e=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",r0e={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},o0e=class extends pe{constructor(){super(),this.dragSource=null,this.eIcon=q,this.eLabel=q,this.eGhost=q,this.registerCSS(i0e)}postConstruct(){let e=t=>Ll(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(r0e),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){let{eGhost:n,eIcon:i,dragSource:r,dropIconMap:o,gos:s}=this;at(i);let a=null;e||(e=r?.getDefaultIconName?r.getDefaultIconName():"notAllowed"),a=o[e],n.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&s.get("suppressDragLeaveHidesColumns"))&&a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},s0e=".ag-checkbox-cell{height:100%}",a0e={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},l0e=class extends pe{constructor(){super(a0e,[mo]),this.eCheckbox=q,this.registerCSS(s0e)}init(e){this.refresh(e);let{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),dW(i,"polite"),this.addManagedListeners(i,{click:r=>{if(ei(r),t.isDisabled())return;let o=t.getValue();this.onCheckboxChanged(o)},dblclick:r=>{ei(r)}}),this.addManagedElementListeners(e.eGridCell,{keydown:r=>{if(r.key===$.SPACE&&!t.isDisabled()){e.eGridCell===wt(n)&&t.toggle();let o=t.getValue();this.onCheckboxChanged(o),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0,{value:i,column:r,node:o}=e;if(o.group&&r)if(typeof i=="boolean")t=i;else{let u=r.getColId();u.startsWith(Mc)?t=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[u]!==void 0||o.sourceRowIndex>=0?t=i??void 0:n=!1}else t=i??void 0;let{eCheckbox:s}=this;if(!n){s.setDisplayed(!1);return}s.setValue(t);let a=e.disabled??!r?.isCellEditable(o);s.setDisabled(a);let l=this.getLocaleTextFunc(),c=u_(l,t),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;s.setInputAriaLabel(d)}onCheckboxChanged(e){let{params:t}=this,{column:n,node:i,value:r}=t,{editSvc:o}=this.beans;if(!n)return;let s={rowNode:i,column:n};o?.dispatchCellEvent(s,null,"cellEditingStarted",{value:r});let a=i.setDataValue(n,e,"ui");o?.dispatchCellEvent(s,null,"cellEditingStopped",{oldValue:r,newValue:e,valueChanged:a}),a||this.updateCheckbox(t)}},CU=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){let{all:t,visible:n,order:i}=this;t.has(e)||(t.add(e),n.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Ci(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(let t of this.visible)if(t.id==e)return t}clear(){let{all:e,visible:t,order:n,queued:i}=this;e.clear(),i.clear(),t.clear(),n.length=0}sort(){let{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,i=e?.getSortOptions()??[],r=u0e(this.order);if(this.order.sort((s,a)=>(s.pinnedSibling?.rowIndex??0)-(a.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,i)??this.order,!r)return;let o=kl(n);o==="bottom"||o==="pinnedBottom"?this.order.push(r):this.order.unshift(r)}hide(e){let{all:t,visible:n}=this,i=n.size;return t.forEach(r=>e(r)?n.delete(r):n.add(r)),this.order=Array.from(n),this.sort(),i!=n.size}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function J$(e){if(e.level===-1)return!0;let t=e.parent;return t?.childrenAfterSort?.some(n=>n==e)?J$(t):!1}function G3(e,t){let{gos:n,rowModel:i,filterManager:r}=e;return Ui(n,i)?!i.getRowNode(t.id):r?.isAnyFilterPresent()?!J$(t):n.get("pivotMode")?!t.group:!1}function c0e(e){return!!e.footer&&e.level===-1}function d0e(e){return!!e.pinnedSibling&&c0e(e.pinnedSibling)}function u0e(e){let t=e.findIndex(d0e);if(t>-1)return e.splice(t,1)?.[0]}var bU=class extends K{postConstruct(){let{gos:e,beans:t}=this;this.top=new CU(t,"top"),this.bottom=new CU(t,"bottom");let n=r=>G3(t,r.pinnedSibling),i=()=>{let r=e.get("isRowPinned");r&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,r(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:r})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow();let o=!1;this.forContainers(a=>{o||(o=a.hide(n))});let s=this.refreshRowPositions();(!r||s||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(p0e),this.refreshRowPositions()},rowNodeDataChanged:({node:r})=>{(e.get("isRowPinnable")?.(r)??!0)||this.pinRow(r,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(r=>r.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:r})=>{this._grandTotalPinned=r==="pinnedBottom"?"bottom":r==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{let n=[];t.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,g0e(this.beans);return}let i=e.rowPinned??e.pinnedSibling?.rowPinned;if(i!=null&&t!=null&&t!=i){let s=e.rowPinned?e:e.pinnedSibling,a=e.rowPinned?e.pinnedSibling:e;this.pinRow(s,null,n),this.pinRow(a,t,n);return}let o=n&&f0e(this.beans,e,n);if(o){o.forEach(s=>this.pinRow(s,t));return}if(t==null){let s=e.rowPinned?e:e.pinnedSibling,a=this.findPinnedRowNode(s);if(!a)return;a.delete(s);let l=s.pinnedSibling;H3(s),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(l)}else{let s=wU(this.beans,e,t),a=this.getContainer(t);a.add(s),G3(this.beans,e)&&a.hide(l=>G3(this.beans,l.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let r=Nr(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return yU(this.top)}getPinnedBottomTotalHeight(){return yU(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){let e=t=>{let n=[];return this.forEachPinnedRow(t,i=>n.push(i.pinnedSibling.id)),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(let i of e[n]){let r=this.beans.rowModel.getRowNode(i);r?this.pinRow(r,n):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{let n=new Set;e.forEachQueued(i=>{let r=this.beans.rowModel.getRowNode(i);r&&n.add(r)});for(let i of n)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){let{gos:e,beans:t,_grandTotalPinned:n}=this,i=t.rowModel;if(!nn(e,i))return;let r=i.rootNode?.sibling;if(!r)return;let o=r.pinnedSibling,s=o&&this.findPinnedRowNode(o);if(n){if(s&&s.floating!==n&&(s.delete(o),H3(o)),!s||s.floating!==n){let a=wU(t,r,n);this.getContainer(n).add(a)}}else{if(!s)return;s.delete(o),H3(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){let t=i=>h0e(this.beans,i);if(e)return t(this.getContainer(e));let n=!1;return this.forContainers(i=>{let r=t(i);n||(n=r)}),n}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function h0e(e,t){let n=0,i=!1;return t.forEach((r,o)=>{if(i||(i=r.rowTop!==n),r.setRowTop(n),r.rowHeightEstimated||r.rowHeight==null){let s=Nr(e,r).height;i||(i=r.rowHeight!==s),r.setRowHeight(s)}r.setRowIndex(o),n+=r.rowHeight}),i}function wU(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;let i=o5(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;let r=n==="top"?n5:i5;return i.id=`${r}${n}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function H3(e){if(!e.pinnedSibling)return;e.rowPinned=null,e._destroy(!1);let t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function p0e(e){let t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function f0e(e,t,n){let{rowSpanSvc:i}=e,r=(n&&i?.isCellSpanning(n,t))??!1;if(n&&r)return i?.getCellSpan(n,t)?.spannedNodes}function yU(e){let t=e.size();if(t===0)return 0;let n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function g0e({gos:e,rowModel:t}){nn(e,t)&&t.refreshModel({step:"map"})}var SU=class extends K{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};Nw(this.pinnedBottomRows,t),Nw(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let r=Nr(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return Nw(this.pinnedBottomRows,n),t=0,Nw(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}let i=Fl(this.gos),r=t==="top"?n5:i5,o=new Set(n.order),s=[],a=new Set,l=0,c=-1;for(let d of e){let u=i?.({data:d,level:0,rowPinned:t})??r+this.nextId++;if(a.has(u)){X(96,{id:u,data:d});continue}c++,a.add(u),s.push(u);let h=Kw(n,u);if(h!==void 0)h.data!==d&&h.updateData(d),l+=this.setRowTopAndRowIndex(h,l,c),o.delete(u);else{let p=new ar(this.beans);p.id=u,p.data=d,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),n.cache[u]=p,n.order.push(u)}}for(let d of o)Kw(n,d)?.clearRowTopAndRowIndex(),delete n.cache[d];n.order=s}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(Nr(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return xU(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return xU(this.pinnedBottomRows)}getPinnedTopRowCount(){return mk(this.pinnedTopRows)}getPinnedBottomRowCount(){return mk(this.pinnedBottomRows)}getPinnedTopRow(e){return gk(this.pinnedTopRows,e)}getPinnedBottomRow(e){return gk(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Kw(this.getCache(t),e)}forEachPinnedRow(e,t){return Nw(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function xU(e){let t=mk(e);if(t===0)return 0;let n=gk(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function Kw(e,t){return e.cache[t]}function gk(e,t){return Kw(e,e.order[t])}function Nw(e,t){e.order.forEach((n,i)=>{let r=Kw(e,n);r&&t(r,i)})}function mk(e){return e.order.length}var m0e=class extends K{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){let{gos:e}=this,t=()=>{let n=e.get("enableRowPinning"),i=kl(e),o=!!n||(i==="pinnedBottom"||i==="pinnedTop"),s=o?this.inner instanceof SU:this.inner instanceof bU;this.inner&&s&&this.destroyBean(this.inner),(s||!this.inner)&&(this.inner=this.createManagedBean(o?new bU:new SU))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},Ou=e=>{let t=e.childrenAfterGroup;for(;t?.length;){let n=t[0];if(n.sourceRowIndex>=0)return n;t=n.childrenAfterGroup}},x5=(e,t,n,i)=>{if(!t.size||!e)return!1;let r=!1,o=e.length??0,s=-1;n&&(s=n.sourceRowIndex,n=s<0?Ou(n):null,n&&(s=n.sourceRowIndex)),s<0||s>=o?s=o:i||++s;let a=s,l=Math.min(s,o-1);for(let u of t){let h=u.sourceRowIndex;h<a&&(a=h),h>l&&(l=h)}let c=a;for(let u=a;u<s;++u){let h=e[u];t.has(h)||(h.sourceRowIndex!==c&&(h.sourceRowIndex=c,e[c]=h,r=!0),++c)}let d=l;for(let u=l;u>=s;--u){let h=e[u];t.has(h)||(h.sourceRowIndex!==d&&(h.sourceRowIndex=d,e[d]=h,r=!0),--d)}for(let u of t)u.sourceRowIndex!==c&&(u.sourceRowIndex=c,e[c]=u,r=!0),++c;return r},sg=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}},Ol=(e=>(e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted",e))(Ol||{});function My(e){return!!(e.rowPinned&&e.pinnedSibling)}function Sl(e,t,n,i){let r=t==="top";if(!n)return Sl(e,t,r?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){let l=r?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return Sl(e,t,n,r?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let o=!1,s=!1,a=[];return e.forEachPinnedRow(t,l=>{if(l===n&&!o){o=!0,a.push(l);return}if(o&&l===i){s=!0,a.push(l);return}o&&!s&&a.push(l)}),a}var v0e={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},C0e=class extends pe{constructor(){super(v0e,[mo]),this.eCheckbox=q}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),r=u_(e,i),[o,s]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,s);n.setValue(i,!0),n.setInputAriaLabel(`${a} (${r})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getWrapperElement(),{dblclick:ei,click:i=>{ei(i),!this.eCheckbox.isDisabled()&&this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{let o=typeof i=="object"?y3(i):void 0,s=typeof r=="object"?y3(r):void 0;o!==s&&this.onSelectableChanged()}),ik(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){let{column:e,rowNode:t,overrides:n,gos:i}=this,r=t.selectable,o=this.getIsVisible(),s;if(typeof o=="function"){let u=n?.callbackParams;if(!e)s=o(ce(T({},u),{node:t,data:t.data}));else{let h=e.createColumnFunctionCallbackParams(t);s=o(T(T({},u),h))}}else s=o??!1;let a=r&&!s||!r&&s,l=r||s,c=i.get("rowSelection"),d=c&&typeof c!="string"?!y3(c):!!e?.getColDef().showDisabledCheckboxes;this.setVisible(l&&(a?d:!0)),this.setDisplayed(l&&(a?d:!0)),l&&this.eCheckbox.setDisabled(a),n?.removeHidden&&this.setDisplayed(l)}getIsVisible(){let e=this.overrides;if(e)return e.isVisible;let t=this.gos.get("rowSelection");return t&&typeof t!="string"?Xh(t):this.column?.getColDef()?.checkboxSelection}},b0e=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t,{rowModel:n,pinnedRowModel:i}=this;return t??(t=n.getRowNode(e)),i?.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.rootId,i=t.findIndex(r=>r.id===e.id);if(i>-1){let r=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),n?{keep:r,discard:o}:{keep:o,discard:r}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let r=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&r.push(o)),r.push(e),this.setRoot(e),{keep:r,discard:[]}}let i=this.getNodesInRange(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(r=>r.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let r=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:r}}}getNodesInRange(e,t){let{pinnedRowModel:n,rowModel:i}=this;if(!n?.isManual())return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return Sl(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){let r=Sl(n,"bottom",void 0,e),o=i.getRowCount(),s=i.getRow(o-1);return(i.getNodesInRangeForSelection(t,s)??[]).concat(r)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return Sl(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){let r=Sl(n,"top",t,void 0),o=Sl(n,"bottom",void 0,e),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return Sl(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){let r=Sl(n,"top",e,void 0),o=Sl(n,"bottom",void 0,t),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return Sl(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){let r=Sl(n,"bottom",void 0,t),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,o)??[]).concat(r)}return null}},w0e=class extends K{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(wt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;let t=this.createManagedBean(new Nd);this.cbSelectAll=t,t.addCss("ag-header-select-all"),Jn(t.getGui(),"presentation"),this.showOrHideSelectAll();let n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{let o=s=>typeof s=="string"||!s||s.mode==="singleRow"?void 0:s.selectAll;o(i)!==o(r)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){let t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);let r=t.hasNodesToSelect(e);n.setDisabled(!r),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){let t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:r}=this,o=i.getValue(),s=u_(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",r?`${a} (${s})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return Ml(this.gos)?!0:(X(128,{feature:e}),!1)}checkRightRowModelType(e){let{gos:t,rowModel:n}=this.beans;return nn(t)||Ui(t)?!0:(X(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.getSelectAllMode(),n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");let i={source:n,selectAll:t},r=this.beans.selectionSvc;e?r.selectAllRowNodes(i):r.deselectAllRowNodes(i)}isCheckboxSelection(){let{column:e,gos:t,beans:n}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return eq(n,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){let e=NW(this.gos,!1);if(e)return e;let{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function eq({gos:e,selectionColSvc:t},n){let i=e.get("rowSelection"),r=n.getColDef(),{headerCheckboxSelection:o}=r,s=!1;if(typeof i=="object"){let l=Ld(n),c=bg(n);(o0(i)==="autoGroupColumn"&&c||l&&t?.isSelectionColumnEnabled())&&(s=ID(i))}else typeof o=="function"?s=o(Oe(e,{column:n,colDef:r})):s=!!o;return s}var E5=class extends K{postConstruct(){let{gos:e,beans:t}=this;this.selectionCtx=new b0e(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{let n=ik(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=ik(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new C0e}createSelectAllFeature(e){if(eq(this.beans,e))return new w0e(e)}isMultiSelect(){return Ml(this.gos)}onRowCtrlSelected(e,t,n){let i=!!e.rowNode.isSelected();e.forEachGui(n,r=>{r.rowComp.toggleCss("ag-row-selected",i);let o=r.element;p0(o,i),o.contains(wt(this.beans))&&t(r)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;let t=e.isSelected(),n=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||n)return;let r=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(r,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!My(e)||!ss(this.gos)}updateRowSelectable(e,t){let n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(np(this.gos)){let r=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:r??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){let r=e.childrenAfterGroup[i],o=r.isSelected();if(!r.selectable){let s=this.calculateSelectedFromChildren(r);if(s===null)continue;o=s}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){if(t&&e.destroyed)return!1;let r=!e.selectable&&t,o=e.__selected===t;if(r||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");let s=e.sibling;s&&s.footer&&s.__localEventService&&s.dispatchRowEvent("rowSelected");let a=e.pinnedSibling;return a?.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(ce(T({},r5(e,this.gos,"rowSelected")),{event:n||null,source:i})),!0}isCellCheckboxSelection(e,t){let n=this.gos.get("rowSelection");if(n&&typeof n!="string"){let i=Ld(e)&&Xh(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){let{gos:r,selectionCtx:o}=this,s=e.isSelected(),a=np(r),l=Afe(r),c=Rfe(r),d=this.isMultiSelect(),u=i==="rowClicked";if(u&&!(l||c))return null;if(t&&n&&d){let h=o.getRoot();if(h)if(h.isSelected()){let p=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:p.discard,select:p.keep,reset:!1}}else{let p=o.extend(e,a);return{select:[],deselect:p.keep,reset:!1}}else return null}else if(t&&d){let h=o.selectAll?this.beans.rowModel.getRow(0):void 0,p=o.getRoot(h),f=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:f.keep,deselect:f.discard,reset:o.selectAll||!!(p&&!p.isSelected())}}else if(n){if(u){let h=!s;return h&&!l||!h&&!c?null:(o.setRoot(e),{node:e,newValue:h,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!s,clearSelection:!d}}else{o.setRoot(e);let h=Ffe(r),p=UD(r)==="filteredDescendants",f=u&&(!h||!l);if(p&&s===void 0&&nn(r))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!d||f};if(u){let g=s?!h:l;return g===s&&!f||g&&!l||!g&&!c?null:{node:e,newValue:g,clearSelection:!d||f,keepDescendants:e.group&&a}}return{node:e,newValue:!s,clearSelection:!d||f}}}},Vd=class extends Bu{initialiseTabGuard(e){super.initialiseTabGuard(e,ap)}};var y0e=500,S0e=550,ED,x0e=e=>{if(!ED)ED=new WeakSet;else if(ED.has(e))return!1;return ED.add(e),!0},oa=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new Rc;let i=this.onTouchStart.bind(this);this.startListener=i,this.eElement.addEventListener("touchstart",i,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!x0e(e))return;let t=e.touches[0];this.touchStart=t;let n=this.handlers;if(!n.length){let i=this.eElement,r=i.ownerDocument,o=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};RD(n,[i,"touchmove",o,l],[r,"touchcancel",a,l],[r,"touchend",s,c],[r,"contextmenu",jv,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},S0e)}onTouchMove(e){let{moved:t,touchStart:n}=this;if(!t&&n){let i=Kv(n,e.touches);i&&!bW(i,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){let t=this.touchStart;!t||!Kv(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&jv(e),this.cancel())}onTouchCancel(e){let t=this.touchStart;!t||!Kv(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now(),n=this.lastTapTime;n&&t-n>y0e&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),Lk(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){let e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},Ls=(e=>(e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION",e))(Ls||{}),D5=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${SW}/${this.frameworkName}-data-grid`,bfe(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function E0e(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var D0e=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],EU=Object.fromEntries(D0e.map((e,t)=>[e,t]));function _0e(e,t){let n=(e.beanName?EU[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?EU[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function A0e(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var R0e={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},F0e={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},M0e={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]},z3=class extends pe{constructor(e){super(),this.eCenterContainer=q,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new qve(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?R0e:t?F0e:M0e;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==q?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),e.getGui().remove()}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=r=>{let o=r.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),n&&fW(this.eRowContainer,o,n),n=o};for(let r of e){let o=r.instanceId,s=t[o];delete t[o];let a=s||this.createBean(new jve(r));this.headerRowComps[o]=a,this.rowCompsList.push(a),i(a)}for(let r of Object.values(t))this.destroyRowComp(r)}},I0e={tag:"div",cls:"ag-header",role:"presentation"},T0e=class extends pe{constructor(){super(I0e)}postConstruct(){let e={toggleCss:(i,r)=>this.toggleCss(i,r),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new Ove).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new z3("left")),n(new z3(null)),n(new z3("right"))}},P0e={selector:"AG-HEADER-ROOT",component:T0e},k0e=class extends pe{constructor(e,t,n,i,r){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=i;let o=bt({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=o;let s;t.isCellSpanning()?(s=bt({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),s.appendChild(o),this.setTemplateFromElement(s)):this.setTemplateFromElement(o),this.cellCssManager=new o$(()=>o),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>cy(o,l),getFocusableElement:()=>o,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,d)=>this.setRenderDetails(l,c,d),setEditDetails:(l,c,d)=>this.setEditDetails(l,c,d),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(l,c)=>this.refreshEditStyles(l,c)};t.setComp(a,o,s,this.eCellWrapper,n,r,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||r)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)),this.rowDraggingComp?.refreshVisibility()}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){let e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;i&&(this.eCellWrapper=bt({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));let r=!n&&this.eCellWrapper!=null;r&&(Bt(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!n);let o=!e&&n,s=o&&this.eCellValue==null;if(s){let c=this.cellCtrl.getCellValueClass();this.eCellValue=bt({tag:"span",cls:c,role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue)}let a=!o&&this.eCellValue!=null;a&&(Bt(this.eCellValue),this.eCellValue=void 0);let l=i||r||s||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){let{cellCtrl:e,eCellWrapper:t,eCellValue:n,includeRowDrag:i,includeDndSource:r,includeSelection:o}=this,s=a=>{a&&t.insertBefore(a.getGui(),n)};i&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),s(this.rowDraggingComp)),r&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),s(this.dndSourceComp)),o&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),s(this.checkboxSelectionComp))}createCellEditorInstance(e,t,n){let i=this.editorVersion,r=e.newAgStackInstance(),{params:o}=e;r.then(a=>this.afterCellEditorCreated(i,a,o,t,n)),jt(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();at(t);let n=ca(e);n!=null&&(t.textContent=n)}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Bt(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;(this.cellEditorPopupWrapper?.getGui().contains(wt(this.beans))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),this.hideEditorPopup?.(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Bt(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer?.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let t=this.rendererVersion,n=o=>s=>{if(this.rendererVersion!==t||!this.isAlive())return;let l=o.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,t,o.componentClass);l?.then(c)},{animationFrameSvc:i}=this.beans,r;if(i?.active&&this.firstRender?r=(o,s=!1)=>{i.createTask(n(o),this.rowNode.rowIndex,"p2",o.componentFromFramework,s)}:r=o=>n(o)(),e.params?.deferRender&&!this.cellCtrl.rowNode.group){let{loadingComp:o,onReady:s}=this.cellCtrl.getDeferLoadingCellRenderer();o&&(r(o),s.then(()=>r(e,!0)))}else r(e)}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}this.cellRenderer=n,this.cellRendererClass=t;let r=n.getGui();if(this.cellRendererGui=r,r!=null){let o=this.getParentOfValue();at(o),o.appendChild(r)}}afterCellEditorCreated(e,t,n,i,r){let o=e!==this.editorVersion,{context:s}=this.beans;if(o){s.destroyBean(t);return}if(t.isCancelBeforeStart?.()){s.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){X(97,{colId:this.column.getId()}),s.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let l=i||t.isPopup?.();l?this.addPopupCellEditor(n,r):this.addInCellEditor(),this.refreshEditStyles(!0,l),t.afterGuiAttached?.(),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){let{cellCssManager:n}=this;n.toggleCss("ag-cell-inline-editing",e&&!t),n.toggleCss("ag-cell-popup-editing",e&&!!t),n.toggleCss("ag-cell-not-inline-editing",!e||!!t)}addInCellEditor(){let{eCell:e}=this;e.contains(wt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),at(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){let{gos:n,context:i,popupSvc:r,editSvc:o}=this.beans;n.get("editType")==="fullRow"&&X(98);let s=this.cellEditorPopupWrapper=i.createBean(o.createPopupEditorWrapper(e)),{cellEditor:a,cellEditorGui:l,eCell:c,rowNode:d,column:u,cellCtrl:h}=this,p=s.getGui();l&&p.appendChild(l);let f=n.get("stopEditingWhenCellsLoseFocus"),g=t??a.getPopupPosition?.()??"over",C=n.get("enableRtl"),m={ePopup:p,additionalParams:{column:u,rowNode:d},type:"popupCellEditor",eventSource:c,position:g,alignSide:C?"right":"left",keepWithinBounds:!0},w=r.positionPopupByComponent.bind(r,m),x=r.addPopup({modal:f,eChild:p,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:c,positionCallback:w,ariaOwns:c});x&&(this.hideEditorPopup=x.hideFunc)}detach(){this.getGui().remove()}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},L0e=class extends pe{constructor(e,t,n){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;let i=bt({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(i,n),this.setTemplateFromElement(i);let r=i.style;this.domOrder=this.rowCtrl.getDomOrder();let o={setDomOrder:s=>this.domOrder=s,setCellCtrls:s=>this.setCellCtrls(s),showFullWidth:s=>this.showFullWidth(s),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(s,a)=>this.toggleCss(s,a),setUserStyles:s=>cy(i,s),setTop:s=>r.top=s,setTransform:s=>r.transform=s,setRowIndex:s=>i.setAttribute("row-index",s),setRowId:s=>i.setAttribute("row-id",s),setRowBusinessKey:s=>i.setAttribute("row-business-key",s),refreshFullWidth:s=>{let a=s();return this.fullWidthCellRendererParams=a,this.fullWidthCellRenderer?.refresh?.(a)??!1}};e.setComp(o,this.getGui(),n,void 0),this.addDestroyFunc(()=>{e.unsetComp(n)})}setInitialStyle(e,t){let n=this.rowCtrl.getInitialTransform(t);if(n)e.style.setProperty("transform",n);else{let i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){let t=i=>{if(this.isAlive()){let r=i.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(i,e.params)}else this.beans.context.destroyBean(i)};e.newAgStackInstance().then(t)}setCellCtrls(e){let t=new Map(this.cellComps);for(let n of e){let i=n.instanceId;this.cellComps.has(i)?t.delete(i):this.newCellComp(n)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];for(let n of e){let i=this.cellComps.get(n.instanceId);i&&t.push(i.getGui())}gW(this.getGui(),t)}newCellComp(e){let t=this.beans.editSvc?.isEditing(e,{withOpenEditor:!0})??!1,n=new k0e(this.beans,e,this.rowCtrl.printLayout,this.getGui(),t);this.cellComps.set(e.instanceId,n),this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e,t){this.fullWidthCellRenderer=e,this.fullWidthCellRendererParams=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer),this.fullWidthCellRendererParams=void 0})}destroyCells(e){for(let t of e.values()){if(!t)return;let n=t.cellCtrl.instanceId;if(this.cellComps.get(n)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(n)}}};function O0e(e,t,n){let i=!!n.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,r={tag:"div",ref:"eContainer",cls:LD(e),role:"rowgroup"};if(t.type==="center"||i){let o={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${ave(e)}`,role:"presentation"};return r.role="presentation",{tag:"div",ref:"eViewport",cls:`ag-viewport ${z$(e)}`,role:"rowgroup",children:[r,i?o:null]}}return r}var N0e=class extends pe{constructor(e){super(),this.eViewport=q,this.eContainer=q,this.eSpannedContainer=q,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=Ry(this.name)}postConstruct(){this.setTemplate(O0e(this.name,this.options,this.beans));let e={setHorizontalScroll:n=>this.eViewport.scrollLeft=n,setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setSpannedRowCtrls:n=>this.setRowCtrls(n,!0),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>{this.eContainer.style.width=n,this.eSpannedContainer&&(this.eSpannedContainer.style.width=n)},setOffsetTop:n=>{let i=`translateY(${n})`;this.eContainer.style.transform=i,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=i)}};this.createManagedBean(new vve(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){let{beans:n,options:i}=this,r=t?this.eSpannedContainer:this.eContainer,o=t?T({},this.rowCompsWithSpan):T({},this.rowCompsNoSpan),s={};t?this.rowCompsWithSpan=s:this.rowCompsNoSpan=s,this.lastPlacedElement=null;let a=[];for(let l of e){let c=l.instanceId,d=o[c],u;if(d)u=d,delete o[c];else{if(!l.rowNode.displayed)continue;u=new L0e(l,n,i.type)}s[c]=u,a.push([u,!d])}this.removeOldRows(Object.values(o)),this.addRowNodes(a,r)}addRowNodes(e,t){let{domOrder:n}=this;for(let[i,r]of e){let o=i.getGui();n?this.ensureDomOrder(o,t):r&&t.appendChild(o)}}removeOldRows(e){for(let t of e)t.getGui().remove(),t.destroy()}ensureDomOrder(e,t){fW(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},B0e={selector:"AG-ROW-CONTAINER",component:N0e};function Bw(e,t){return t.map(n=>{let i=`e${n[0].toUpperCase()+n.substring(1)}RowContainer`;return e[i]={name:n},{tag:"ag-row-container",ref:i,attrs:{name:n}}})}function V0e(e){let t={},n={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:Bw(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:Bw(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:Bw(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:Bw(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:Bw(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:t,elementParams:n}}var G0e=class extends pe{constructor(){super(...arguments),this.eGridRoot=q,this.eBodyViewport=q,this.eStickyTop=q,this.eStickyBottom=q,this.eTop=q,this.eBottom=q,this.eBody=q}postConstruct(){let{overlays:e,rangeSvc:t}=this.beans,n=e?.getOverlayWrapperSelector(),{paramsMap:i,elementParams:r}=V0e(!!n);this.setTemplate(r,[...n?[n]:[],xve,_ve,P0e,B0e],i);let o=(a,l)=>{let c=`${a}px`;l.style.minHeight=c,l.style.height=c},s={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>jpe(this.getGui(),a),setRowCount:a=>Hpe(this.getGui(),a),setTopHeight:a=>o(a,this.eTop),setBottomHeight:a=>o(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{let c=[this.eBodyViewport.classList,this.eBody.classList];for(let d of c)d.toggle(_c.AUTO_HEIGHT,l.autoHeight),d.toggle(_c.NORMAL,l.normal),d.toggle(_c.PRINT,l.print);this.toggleCss(_c.AUTO_HEIGHT,l.autoHeight),this.toggleCss(_c.NORMAL,l.normal),this.toggleCss(_c.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(W$,l),registerBodyViewportResizeListener:a=>{let l=Pl(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{for(let c of[this.eTop,this.eBodyViewport,this.eBottom])c.classList.toggle(a,l)},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>Jn(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new wve),this.ctrl.setComp(s,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&Vo(this.gos)||Ml(this.gos))&&Gpe(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}},H0e={selector:"AG-GRID-BODY",component:G0e},z0e=class extends K{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());let{dragAndDrop:i,ctrlsSvc:r}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new c5(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");let o=Pl(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),r.register("gridCtrl",this)}isDetailGrid(){return __(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){let{view:t}=this;if(e===!1)t.setCursor(null);else{let n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){let{visibleCols:r,focusSvc:o}=this.beans,s=r.allCols,a=Qe(s);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;let n=this.getFocusableContainers(),{focusSvc:i,visibleCols:r}=this.beans,o=r.allCols;if(e){if(n.length>1)return this.focusContainer(Qe(n),e);let s=Qe(o);if(i.focusGridView({column:s,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||og(this.beans)){if(i.focusGridView({column:o[0],backwards:e}))return!0;for(let s=1;s<n.length;s++)if(qn(n[s].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:n}=this.getNextFocusableIndex(t,e),i=t[n];i?this.focusContainer(i):this.forceFocusOutOfContainer(e)}isFocusable(){let e=this.beans;return!T_(e)||!og(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){let n=wt(this.beans),i=e.findIndex(o=>o.getGui().contains(n)),r=i+(t?-1:1);return{indexWithFocus:i,nextIndex:r}}focusContainer(e,t){e.setAllowFocus?.(!0);let n=qn(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},j0e=class extends Vd{constructor(e){super(),this.gridBody=q,this.sideBar=q,this.pagination=q,this.rootWrapperBody=q,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCss(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new z0e),n=t.getOptionalSelectors(),i=this.createTemplate(n),r=[H0e,...Object.values(n).filter(o=>!!o)];this.setTemplate(i,r),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{e.remove(),tp(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList,{AUTO_HEIGHT:i,NORMAL:r,PRINT:o}=_c,{autoHeight:s,normal:a,print:l}=t;n.toggle(i,s),n.toggle(r,a),n.toggle(o,l),this.toggleCss(i,s),this.toggleCss(r,a),this.toggleCss(o,l)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,n=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,i=e.statusBarSelector?{tag:"ag-status-bar"}:null,r=e.watermarkSelector?{tag:"ag-watermark"}:null,o=e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},n]},i,o,r]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];for(let t of[this.sideBar,this.pagination])t&&e.push(t);return e.filter(t=>Dr(t.getGui()))}},qt=(e,t)=>{for(let n of Object.keys(t))t[n]=e;return t},DU=T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T({dispatchEvent:"CommunityCore"},qt("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),qt("GridState",{getState:0,setState:0})),qt("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),qt("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),qt("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),qt("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),qt("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),qt("ValueCache",{expireValueCache:0})),qt("CellApi",{getCellValue:0})),qt("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),qt("Sort",{onSortChanged:0})),qt("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),qt("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),qt("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),qt("HighlightChanges",{flashCells:0})),qt("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),qt("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),qt("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),qt("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),qt("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),qt("ColumnResize",{setColumnWidths:0})),qt("ColumnHover",{isColumnHovered:0})),qt("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),qt("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),qt("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),qt("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),qt("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),qt("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),qt("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),qt("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),qt("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0})),qt("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),qt("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0})),qt("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),qt("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),qt("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),qt("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),qt("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),qt("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),qt("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),qt("ContextMenu",{showContextMenu:0})),qt("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),qt("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),qt("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),qt("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),qt("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),qt("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0})),qt("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),qt("StatusBar",{getStatusPanel:0})),qt("AiToolkit",{getStructuredSchema:0})),j3={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},U0e=(e,t)=>e.eventSvc.dispatchEvent(t),tq=class{};Reflect.defineProperty(tq,"name",{value:"GridApi"});var W0e=class extends K{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new tq,this.fns=ce(T({},j3),{dispatchEvent:U0e}),this.preDestroyLink="";let{api:e}=this;for(let t of Object.keys(DU))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:n,beans:i}=this;n!==j3&&(n[e]=i?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:n,preDestroyLink:i}=this;if(!t)X(26,{fnName:e,preDestroyLink:i});else{let r=DU[e];n.assertModuleRegistered(r,`api.${e}`)&&X(27,{fnName:e,module:r})}}destroy(){super.destroy(),this.fns=j3,this.beans=null}};function $0e(e){return e.context.getId()}function q0e(e){e.gridDestroySvc.destroy()}function K0e(e){return e.gridDestroySvc.destroyCalled}function Y0e(e,t){return e.gos.get(t)}function Z0e(e,t,n){nq(e,{[t]:n})}function nq(e,t){e.gos.updateGridOptions({options:t})}function X0e(e,t){let n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var Q0e={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},J0e=class extends pe{constructor(e,t,n){super(Q0e),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild($e("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let{rowNode:t,column:n,eCell:i,gos:r}=this,o=n.getColDef().dndSourceOnRowDrag,s=e.dataTransfer;if(s.setDragImage(i,0,0),o){let a=Oe(r,{rowNode:t,dragEvent:e});o(a)}else try{let a=JSON.stringify(t.data);s.setData("application/json",a),s.setData("text/plain",a)}catch{}}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function eCe(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function tCe(e,t){let n=e.dragAndDrop?.findExternalZone(t.getContainer());n&&e.dragAndDrop?.removeDropTarget(n)}function nCe(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function iCe(e){let t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function rCe(e,t){let n=e.rowDropHighlightSvc;if(!n)return;let i=t?.row,r=t?.dropIndicatorPosition;r!=="above"&&r!=="below"&&r!=="inside"&&(r="none");let o=i?.rowIndex;o==null||r==="none"?n.clear():n.set(i,r)}var oCe=class extends Ume{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},sCe=class extends K{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},aCe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},DD={skipAriaHidden:!0},lCe=class extends pe{constructor(e,t,n,i,r,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=r,this.alwaysVisible=o,this.dragSource=null,this.disabled=!1}isCustomGui(){return this.customGui!=null}postConstruct(){let{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(aCe),this.getGui().appendChild($e("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){let{beans:e,rowNode:t}=this,n=this.refreshVisibility.bind(this);this.addManagedListeners(e.eventSvc,{rowDragVisibilityChanged:n}),this.addManagedListeners(t,{dataChanged:n,cellChanged:n}),this.refreshVisibility()}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;let{beans:e,column:t,rowNode:n}=this,{gos:i,dragAndDrop:r,rowDragSvc:o}=e,s=o?.visibility,l=!(s==="suppress"||s==="hidden"&&!r?.hasExternalDropZones()),c=l;if(l&&!this.isCustomGui()&&t){let d=t.getColDef().rowDrag;if(d===!1)l=!1;else{let u=typeof d=="function";c=t.isRowDrag(n),l=u||c}}l&&c&&n.footer&&i.get("rowDragManaged")&&(c=!1,l=!0),c&&(c=l),l||this.setDisplayed(l,DD),c||this.setVisible(c,DD),this.setDisabled(!c||s==="disabled"&&!r?.hasExternalDropZones()),l&&this.setDisplayed(l,DD),c&&this.setVisible(c,DD)}setDisabled(e){e!==this.disabled&&(this.disabled=e,this.getGui()?.classList?.toggle("ag-drag-handle-disabled",e))}getSelectedNodes(){let e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];let n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){let{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:i=>this.getDragItemName(i,n),getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}getDragItemName(e,t){let n=e?.dragItem||this.getDragItem(),i=(e?.dropTarget?.rows.length??n.rowNodes?.length)||1,r=this.column?.getColDef()?.rowDragText??this.gos.get("rowDragText");if(r)return r(n,i);if(i!==1)return`${i} ${t("rowDragRows","rows")}`;let o=this.cellValueFn();return o||`1 ${t("rowDragRow","rows")}`}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Nu=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){let{rowNode:n,children:i}=e;if(i)for(let r=0;r<i.length;++r)this.depthFirstSearchChangedPath(i[r],t);t(n)}depthFirstSearchEverything(e,t,n){let i=e.childrenAfterGroup;if(i)for(let r=0,o=i.length;r<o;++r){let s=i[r];s.childrenAfterGroup?this.depthFirstSearchEverything(s,t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(let i of t)this.nodeIdsToColumns[n.id][i.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let r=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(r),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(r=>n[r.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(r=>!n[r.getId()])}},cCe=.25,dCe=class extends K{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.autoScroll=null,this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,t=>{let n=()=>t.gridBodyCtrl.scrollFeature.getVScrollPosition().top,i=new wy({scrollContainer:t.gridBodyCtrl.eBodyViewport,scrollAxis:"y",getVerticalPosition:n,setVerticalPosition:r=>t.gridBodyCtrl.scrollFeature.setVerticalScrollPosition(r),onScrollCallback:()=>{let r=n();if(this.autoScrollOldV!==r){this.autoScrollOldV=r,this.autoScrollChanging=!0;return}let o=this.autoScrollChanging;this.autoScrollChanged=o,this.autoScrollChanging=!1,o&&(e.dragAndDrop?.nudge(),this.autoScrollChanged=!1)}});this.autoScroll=i,this.clearAutoScroll()})}destroy(){super.destroy(),this.clearAutoScroll(),this.autoScroll=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){return e?.dropTarget?.allowed===!1||this.beans.rowDragSvc.visibility!=="visible"?"notAllowed":"move"}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let n=this.beans.selectionSvc?.getSelectedNodes();if(n&&n.indexOf(t)>=0)return n.slice().sort(uCe)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){let{lastDraggingEvent:n,beans:i}=this;if(t){let a=this.getRowNodes(e);e.dragItem.rowNodes=a,AU(a,!0)}this.lastDraggingEvent=e;let r=e.fromNudge,o=this.makeRowsDrop(n,e,r,!1);i.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e);let s=this.autoScroll;o?.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!r&&!s?.scrolling||this.autoScrollChanged)&&this.dropRows(o),s?.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,n,i){let{beans:r,gos:o}=this,s=this.newRowsDrop(t,i),a=r.rowModel;if(t.dropTarget=s,t.changed=!1,!s)return null;let{sameGrid:l,rootNode:c,source:d,target:u}=s;u??(u=a.getRow(a.getRowCount()-1)??null);let h=this.beans.groupEditSvc,p=!!h?.canSetParent(s),f=null;if(u?.footer){let C=iy(a,-1,u)??iy(a,1,u);p&&(f=u.sibling??c),u=C??null}u?.detail&&(u=u.parent),s.moved&&(s.moved=d!==u);let g=.5;if(u&&(l&&s.moved&&(f||!p)?g=d.rowIndex>u.rowIndex?-.5:.5:g=(s.y-u.rowTop-u.rowHeight/2)/u.rowHeight||0),!p&&l&&u&&s.moved&&nn(o)){let C=hCe(a,s);C&&(g=d.rowIndex>C.rowIndex?-.5:.5,u=C,s.moved&&(s.moved=d!==u))}return s.target=u,s.newParent=f,s.pointerPos=pCe(u,s.y),s.yDelta=g,h?.fixRowsDrop(s,p,n,g),this.validateRowsDrop(s,p,i),t.changed||(t.changed=_U(e?.dropTarget,s)),s}newRowsDrop(e,t){let{beans:n,gos:i}=this,r=n.rowModel.rootNode,o=nn(i)?i.get("rowDragManaged"):!1,s=i.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e),{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!r)return null;let d=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e),u=!0;o&&(!c.length||n.rowDragSvc.visibility!=="visible"||(s||!a)&&!d)&&(u=!1);let h=ry(n,e).y,p=this.getOverNode(h);return{api:n.gridApi,context:n.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:s,sameGrid:a,withinGrid:d,treeData:!1,rootNode:r,moved:l!==p,y:h,overNode:p,overIndex:p?.rowIndex??-1,pointerPos:"none",position:"none",source:l,target:p??null,newParent:null,rows:c,allowed:u,highlight:!t&&o&&s&&(d||!a),yDelta:0,inside:!1,droppedManaged:!1}}validateRowsDrop(e,t,n){let{source:i,target:r,yDelta:o,inside:s,moved:a,rowDragManaged:l,suppressMoveWhenRowDragging:c}=e;e.moved&&(e.moved=i!==r);let{position:d,fallbackPosition:u}=this.computeDropPosition(a,s,o);e.position=d,t||(e.newParent=null),this.enforceSuppressMoveWhenRowDragging(e,c,"initial");let h=(!l||e.allowed)&&this.gos.get("isRowValidDropPosition");h&&this.applyDropValidator(e,t,n,l,h),l&&(e.rows=this.filterRows(e)),this.beans.groupEditSvc?.clearNewSameParent(e,t),this.enforceSuppressMoveWhenRowDragging(e,c,"final"),e.position==="inside"&&(!e.allowed||!e.newParent)&&(e.position=u)}computeDropPosition(e,t,n){let i=n<0?"above":"below";return e?{position:t?"inside":i,fallbackPosition:i}:{position:"none",fallbackPosition:i}}enforceSuppressMoveWhenRowDragging(e,t,n){if(t){if(n==="initial"){e.moved||(e.allowed=!1);return}(!e.rows.length||e.position==="none")&&(e.allowed=!1)}}applyDropValidator(e,t,n,i,r){this.beans.groupEditSvc?.clearNewSameParent(e,t);let o=r(e);if(!o){e.allowed=!1;return}if(typeof o!="object")return;o.rows!==void 0&&(e.rows=o.rows??[]),t&&o.newParent!==void 0&&(e.newParent=o.newParent),o.target!==void 0&&(e.target=o.target),o.position&&(e.position=o.position),o.allowed!==void 0?e.allowed=o.allowed:i||(e.allowed=!0);let s=e.draggingEvent;o.changed&&s&&(s.changed=!0),!n&&o.highlight!==void 0&&(e.highlight=o.highlight)}addRowDropZone(e){if(!e.getContainer()){X(55);return}let t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){X(56);return}let n=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(r=>e.onDragEnter(this.rowDragEvent("rowDragEnter",r))),onDragLeave:e.onDragLeave&&(r=>e.onDragLeave(this.rowDragEvent("rowDragLeave",r))),onDragging:e.onDragging&&(r=>e.onDragging(this.rowDragEvent("rowDragMove",r))),onDragStop:e.onDragStop&&(r=>e.onDragStop(this.rowDragEvent("rowDragEnd",r))),onDragCancel:e.onDragCancel&&(r=>e.onDragCancel(this.rowDragEvent("rowDragCancel",r)))},i=T({isInterestedIn:r=>r===2,getIconName:()=>"move",external:!0},n);t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:n=>{this.onDragEnter(n),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",n))},onDragLeave:n=>{this.onDragLeave(n),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",n))},onDragging:n=>{this.onDragging(n),e?.onDragging?.(this.rowDragEvent("rowDragMove",n))},onDragStop:n=>{this.onDragStop(n),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",n))},onDragCancel:n=>{this.onDragCancel(n),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",n))},fromGrid:!0}}getOverNode(e){let{pageBounds:t,rowModel:n}=this.beans,r=e>t.getCurrentPagePixelRange().pageLastPixel?-1:n.getRowIndexAtPixel(e);return r>=0?n.getRow(r):void 0}rowDragEvent(e,t){let n=this.beans,{dragItem:i,dropTarget:r,event:o,vDirection:s}=t,a=r?.rootNode===n.rowModel.rootNode,l=a?r.y:ry(n,t).y,c=a?r.overNode:this.getOverNode(l),d=a?r.overIndex:c?.rowIndex??-1;return{api:n.gridApi,context:n.gridOptions.context,type:e,event:o,node:i.rowNode,nodes:i.rowNodes,overIndex:d,overNode:c,y:l,vDirection:s,rowsDrop:r}}dispatchGridEvent(e,t){let n=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e,!1)}onDragStop(e){let t=this.lastDraggingEvent?.dropTarget??null,n=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),n?.allowed&&n.rowDragManaged&&(!t?.droppedManaged||_U(t,n))&&this.dropRows(n),this.stopDragging(e,!0)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e,!0)}stopDragging(e,t){this.clearAutoScroll(),this.beans.groupEditSvc?.stopDragging(t),this.beans.rowDropHighlightSvc?.fromDrag(null),AU(e.dragItem.rowNodes,!1),this.lastDraggingEvent=null}clearAutoScroll(){this.autoScroll?.ensureCleared(),this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}dropRows(e){return e.droppedManaged=!0,e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:n}){let i=Fl(this.gos),r=this.beans.rowModel,o=n.filter(({data:a,rowPinned:l})=>!r.getRowNode(i?.({data:a,level:0,rowPinned:l})??a.id)).map(({data:a})=>a);if(o.length===0)return!1;let s;if(t){let a=t.sourceRowIndex>=0?t:Ou(t);a&&(s=a.sourceRowIndex+(e==="above"?0:1))}return r.updateRowData({add:o,addIndex:s}),!0}filterRows(e){let{groupEditSvc:t}=this.beans,{rows:n,sameGrid:i}=e,r;for(let o=0,s=n.length;o<s;++o){let a=!0,l=n[o];(!l||l.footer||i&&l.destroyed&&!l.group||!this.csrmGetLeaf(l))&&(a=!1),a&&t&&!t.canDropRow(l,e)&&(a=!1),a?r?.push(l):r??(r=n.slice(0,o))}return r??n}csrmMoveRows(e){let t=this.beans.groupEditSvc;return t?.isGroupingDrop(e)?t.dropGroupEdit(e):this.csrmMoveRowsReorder(e)}csrmMoveRowsReorder({position:e,target:t,rows:n,newParent:i,rootNode:r}){let o=!1,s=new Set;for(let h of n){i&&h.parent!==i&&(h.treeParent=i,o=!0);let p=this.csrmGetLeaf(h);p&&s.add(p)}if(!o&&s.size===0)return!1;let a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&Ha(this.beans,l);if(s.size&&x5(r._leafs,s,t,e==="above")&&(o=!0),!o)return!1;let d=this.beans.rowModel,u=new sg;return u.reordered=!0,d.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Nu(!1,r),changedRowNodes:u}),c?c.focusCell():a.clearFocusedCell(),!0}csrmGetLeaf(e){if(e.sourceRowIndex>=0)return e.destroyed?void 0:e;let t=this.beans.groupEditSvc;return t?t.csrmFirstLeaf(e):Ou(e)}},_U=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!Hr(e.rows,t.rows)),uCe=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,AU=(e,t)=>{for(let n=0,i=e?.length||0;n<i;++n){let r=e[n];r.dragging!==t&&(r.dragging=t,r.dispatchRowEvent("draggingChanged"))}},hCe=(e,t)=>{let n=null,i=t.target;if(i&&t.rows.indexOf(i)<0)return null;let r=t.source;if(!i||!r)return null;let o=i.rowIndex-r.rowIndex,s=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;let a=new Set(t.rows);do{let l=iy(e,s,i);if(!l)break;a.has(l)||(n=l,--o),i=l}while(o>0);return n},pCe=(e,t)=>{let n=e?.rowTop,i=e?.rowHeight??0;if(n==null||!i||i<=0)return"none";let r=t-n,o=i*cCe;return r<=o?"above":r>=i-o?"below":"inside"},fCe=class extends K{constructor(){super(...arguments),this.beanName="rowDragSvc",this.rowDragFeature=null,this.visibility="suppress"}setupRowDrag(e,t){let n=t.createManagedBean(new dCe(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n;let r=()=>this.refreshVisibility();this.addManagedPropertyListeners(["rowDragManaged","suppressRowDrag","refreshAfterGroupEdit"],r),this.addManagedEventListeners({newColumnsLoaded:r,columnRowGroupChanged:r,columnPivotModeChanged:r,sortChanged:r,filterChanged:r}),this.visibility=this.computeVisibility()}createRowDragComp(e,t,n,i,r,o){return new lCe(e,t,n,i,r,o)}createRowDragCompForRow(e,t){if(Vo(this.gos))return;let n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,r,o){let s=this.gos;return s.get("rowDragManaged")&&(!nn(s)||s.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,r,o)}cancelRowDrag(){this.rowDragFeature?.lastDraggingEvent&&this.beans.dragSvc?.cancelDrag()}computeVisibility(){let e=this.beans,t=e.gos;if(t.get("suppressRowDrag"))return"suppress";if(!t.get("rowDragManaged"))return"visible";let i=e.colModel.isPivotMode();return(i||e.rowGroupColsSvc?.columns?.length)&&!t.get("refreshAfterGroupEdit")?"hidden":i||e.filterManager?.isAnyFilterPresent()||e.sortSvc?.isSortActive()?"disabled":"visible"}refreshVisibility(){let e=this.visibility,t=this.computeVisibility();e!==t&&(this.visibility=t,this.eventSvc?.dispatchEvent({type:"rowDragVisibilityChanged"}))}},gCe=class extends K{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){let e=this.row,t=this.dragging;!e||e?.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){let e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){let n=e!==this.row,i=e.uiLevel,r=t!==this.position,o=i!==this.uiLevel;this.dragging=!1,(n||r||o)&&(n&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){let t=e?.dropTarget;if(t){let{highlight:n,target:i,position:r}=t;if(n&&i&&r!=="none"){this.set(i,r),this.dragging=!0;return}}this.dragging&&this.clear()}},L_={moduleName:"Drag",version:Je,beans:[oCe]},mCe={moduleName:"DragAndDrop",version:Je,dynamicBeans:{dndSourceComp:J0e},icons:{rowDrag:"grip"}},Nl={moduleName:"SharedDragAndDrop",version:Je,beans:[$me],dependsOn:[L_],userComponents:{agDragAndDropImage:o0e},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},vCe={moduleName:"RowDrag",version:Je,beans:[gCe,fCe],apiFunctions:{addRowDropZone:eCe,removeRowDropZone:tCe,getRowDropZoneParams:nCe,getRowDropPositionIndicator:iCe,setRowDropPositionIndicator:rCe},dependsOn:[Nl]},_5={moduleName:"HorizontalResize",version:Je,beans:[sCe],dependsOn:[L_]},CCe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",bCe=class extends K{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;let{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){let{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}let r=o=>{for(;o.length;){let s=o.pop();s&&s()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),r(n)},0),window.setTimeout(()=>{t(),r(i)},200)})}};function wCe(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function yCe(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var SCe=class extends K{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;if(t)for(let n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){let{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function xCe(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,r)=>{let o=e.indexOf(i),s=e.indexOf(r);return o-s})}function ECe(e){let t=[...e];for(let n of e){let i=null,r=n.getParent();for(;r!=null&&r.getDisplayedLeafColumns().length===1;)i=r,r=r.getParent();if(i!=null){let s=!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns();for(let a of s)t.includes(a)||t.push(a)}}return t}function DCe(e,t,n,i){let r=i.allCols,o=null,s=null;for(let a=0;a<e.length;a++){let l=e[a],c=n.getProposedColumnOrder(t,l);if(!n.doesOrderPassRules(c))continue;let d=c.filter(h=>r.includes(h));if(s===null)s=d;else if(!Hr(d,s))break;let u=ACe(c);(o===null||u<o.fragCount)&&(o={move:l,fragCount:u})}return o}function iq(e){let{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:r,fakeEvent:o,pinned:s,gos:a,colModel:l,colMoves:c,visibleCols:d}=e,{allMovingColumns:u}=e;t&&(u=ECe(u));let h=u.slice();xCe(l.getCols(),h);let p=FCe({movingCols:h,draggingRight:n,xPosition:i,pinned:s,gos:a,colModel:l,visibleCols:d}),f=_Ce(h,l);if(p.length===0)return;let g=p[0];if(f!==null&&(t||!r)&&!o&&(!n&&g>=f||n&&g<=f))return;let m=DCe(p,h,c,d);if(!m)return;let w=m.move;if(!(w>l.getCols().length-h.length))return{columns:h,toIndex:w}}function rq(e){let{columns:t,toIndex:n}=iq(e)||{},{finished:i,colMoves:r}=e;return!t||n==null?null:(r.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function _Ce(e,t){let n=t.getCols(),i=e.map(l=>n.indexOf(l)).sort((l,c)=>l-c),r=i[0];return Qe(i)-r!==i.length-1?null:r}function ACe(e){function t(i){let r=[],o=i.getOriginalParent();for(;o!=null;)r.push(o),o=o.getOriginalParent();return r}let n=0;for(let i=0;i<e.length-1;i++){let r=t(e[i]),o=t(e[i+1]);[r,o]=r.length>o.length?[r,o]:[o,r];for(let s of r)o.indexOf(s)===-1&&n++}return n}function RCe(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function FCe(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:r,gos:o,colModel:s,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(x=>x.getColDef().suppressMovable))return[];let c=RCe(a,r),d=s.getCols(),u=c.filter(x=>t.includes(x)),h=c.filter(x=>!t.includes(x)),p=d.filter(x=>!t.includes(x)),f=0,g=i;if(n){let x=0;for(let D of u)x+=D.getActualWidth();g-=x}if(g>0){for(let x=0;x<h.length;x++){let D=h[x];if(g-=D.getActualWidth(),g<0)break;f++}n&&f++}let C;if(f>0){let x=h[f-1];C=p.indexOf(x)+1}else C=p.indexOf(h[0]),C===-1&&(C=0);let m=[C],w=(x,D)=>x-D;if(n){let x=C+1,D=d.length-1;for(;x<=D;)m.push(x),x++;m.sort(w)}else{let x=C,D=d.length-1,F=d[x];for(;x<=D&&c.indexOf(F)<0;)x++,m.push(x),F=d[x];x=C-1;let L=0;for(;x>=L;)m.push(x),x--;m.sort(w).reverse()}return m}function vk(e){let{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:r,useHeaderRow:o,skipScrollPadding:s}=e,a=r.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(n&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!s&&(l+=r.get("center").getCenterViewportScrollLeft()),l):0}function U3(e,t){for(let n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var RU=7,Ck=100,_D=Ck/2,MCe=5,ICe=100,TCe=class extends K{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!_e(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},i=n?.columns??[];for(let r of i){let o=r.getPinned();if(r.getColDef().lockPinned){if(o==e)return"move";continue}let s=n?.containerType;if(s===e||!e)return"move";if(e&&(!o||s!==e))return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{let r=t.visibleState,o=(n||[]).filter(s=>r[s.getId()]&&!s.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){let{gos:r,ctrlsSvc:o}=this.beans,s=r.get("suppressMoveWhenColumnDragging");if(i&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&jt(e.hDirection))return;let a=vk({x:e.x,pinned:this.pinned,gos:r,ctrlsSvc:o});t||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(e,t,n,a,i):this.handleColumnDragWhileAllowingMovement(e,t,n,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;let i=e.filter(r=>!r.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();let e=this.lastMovedInfo;if(!e)return;let{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){let{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;let t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,i,r){let o=this.getAllMovingColumns(e,!0);if(r){let s=this.isAttemptingToPin(o);s&&this.attemptToPinColumns(o,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,s)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:n,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,r){let o=this.getAllMovingColumns(e),s=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:i,fromLeft:s,fromEnter:t,fakeEvent:n}),c=rq(ce(T({},l),{finished:r}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let n=e.dragSource.getDragItem(),i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;let r=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(r):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:r,fromEnter:o,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:r,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){let{gos:n,colModel:i}=this.beans,r=n.get("enableRtl"),o=i.getCols().filter(d=>d.isVisible()&&d.getPinned()===this.pinned),s=null,a=null,l=null;for(let d of o){if(a=d.getActualWidth(),s=this.getNormalisedColumnLeft(d,0,r),s!=null){let u=s+a;if(s<=t&&u>=t){l=d;break}}s=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let d=o.length-1;d>=0;d--){let u=o[d],h=o[d].getParent();if(!h){l=u;break}let p=h?.getDisplayedLeafColumns();if(p.length){l=Qe(p);break}}if(!l)return;s=this.getNormalisedColumnLeft(l,0,r),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||s==null||a==null)return;let c;t-s<a/2?c=0:c=1,FU(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:n,visibleCols:i}=this.beans,r=n.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,r);if(!o||!s||a==null)return;let l=i.allCols,c=l.indexOf(o),d=l.indexOf(s),u=a===0,h=c<d||c===d&&!u,p=0;if(u?h&&(p-=1):h||(p+=1),d+p===c)return;let f=l[d+p];if(!f)return;let g=this.getNormalisedColumnLeft(f,20,r);return{fromLeft:h,xPosition:g}}getColumnMoveAndTargetInfo(e,t,n){let i=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:o}=PCe(e);if(!r||!o||i.column||!t)return T({firstMovingCol:r},i);let a=this.getPinDirection()==="left";return{firstMovingCol:r,position:a?1:0,column:a!==n?r:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){let{gos:i,ctrlsSvc:r}=this.beans,o=e.getLeft();if(o==null)return null;let s=e.getActualWidth();return vk({x:n?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:r})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>RU;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:r,fromLeft:o}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:r}),{columns:a,toIndex:l}=iq(s)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:e}=this;e&&(FU(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth(),r,o;this.gos.get("enableRtl")?(r=e<n+_D,o=e>i-_D):(o=e<n+_D,r=e>i-_D),this.needToMoveRight=r,this.needToMoveLeft=o,o||r?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),ICe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*MCe,e>Ck&&(e=Ck);let t=null,n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:i,dragAndDrop:r,gos:o}=this.beans;if(this.failedMoveAttempts<=RU+1||!i)return;if(r.setDragImageCompIcon("pinned"),!o.get("suppressMoveWhenColumnDragging")){let s=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(s,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){let i=(e||[]).filter(s=>!s.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());let{pinnedCols:r,dragAndDrop:o}=this.beans;return r?.setColsPinned(i,t,"uiColumnDragged"),n&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function FU(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function PCe(e){let t=e.length,n,i;for(let r=0;r<t;r++){if(!n){let o=e[r];o.getLeft()!=null&&(n=o)}if(!i){let o=e[t-1-r];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var kCe=class extends K{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){let{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let r,o=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":r=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":r=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:r=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=r}),this.moveColumnFeature=this.createManagedBean(new TCe(n)),this.bodyDropPivotTarget=this.createManagedBean(new SCe(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},LCe=class extends K{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){let i=this.beans.colModel.getCols();if(!i)return;let r=i[e];this.moveColumns([r],t,n)}moveColumns(e,t,n,i=!0){let{colModel:r,colAnimation:o,visibleCols:s,eventSvc:a}=this.beans,l=r.getCols();if(!l)return;if(t>l.length-e.length){X(30,{toIndex:t});return}o?.start();let c=r.getColsForKeys(e);this.doesMovePassRules(c,t)&&(Jj(r.getCols(),c,t),s.refresh(n),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:i,source:n})),o?.finish()}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){let{colModel:t,gos:n}=this.beans;return!(!QW(e,t.getColTree())||!(r=>{let o=c=>c?c==="left"||c===!0?-1:1:0,s=n.get("enableRtl"),a=s?1:-1,l=!0;for(let c of r){let d=o(c.getColDef().lockPosition);s?d>a&&(l=!1):d<a&&(l=!1),a=d}return l})(e))}getProposedColumnOrder(e,t){let i=this.beans.colModel.getCols().slice();return Jj(i,e,t),i}createBodyDropTarget(e,t){return new kCe(e,t)}moveHeader(e,t,n,i,r){let{ctrlsSvc:o,gos:s,colModel:a,visibleCols:l,focusSvc:c}=this.beans,d=t.getBoundingClientRect(),u=d.left,h=Lr(n),p=h?d.width:n.getActualWidth(),f=e==="left"!==s.get("enableRtl"),g=vk({x:f?u-20:u+p+20,pinned:i,fromKeyboard:!0,gos:s,ctrlsSvc:o}),C=c.focusedHeader;rq({allMovingColumns:h?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:g,pinned:i,fromEnter:!1,fakeEvent:!1,gos:s,colModel:a,colMoves:this,visibleCols:l,finished:!0});let m;if(h){let w=n.getDisplayedLeafColumns();m=f?w[0]:Qe(w)}else m=n;if(o.getScrollFeature().ensureColumnVisible(m,"auto"),(!r.isAlive()||s.get("ensureDomOrder"))&&C){let w;if(h){let x=n.getGroupId(),D=n.getLeafColumns();if(!D.length)return;let F=D[0].getParent();if(!F)return;w=OCe(F,x)}else w=n;w&&c.focusHeaderPosition({headerPosition:ce(T({},C),{column:w})})}}setDragSourceForHeader(e,t,n){let{gos:i,colModel:r,dragAndDrop:o,visibleCols:s}=this.beans,a=!i.get("suppressDragLeaveHidesColumns"),l=Lr(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],u={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>BCe(t,s.allCols):()=>NCe(t),dragItemName:n,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),U3(c,!0)},onDragStopped:()=>U3(c,!1),onDragCancelled:()=>U3(c,!1),onGridEnter:h=>{if(a){let{columns:p=[],visibleState:f}=h??{},g=l?m=>!f||f[m.getColId()]:()=>!0,C=p.filter(m=>!m.getColDef().lockVisible&&g(m));r.setColsVisible(C,!0,"uiColumnMoved")}},onGridExit:h=>{if(a){let p=h?.columns?.filter(f=>!f.getColDef().lockVisible)||[];r.setColsVisible(p,!1,"uiColumnMoved")}}};return o.addDragSource(u,!0),u}};function OCe(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function NCe(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function BCe(e,t){let n=e.getProvidedColumnGroup().getLeafColumns(),i={};for(let a of n)i[a.getId()]=a.isVisible();let r=[];for(let a of t)n.indexOf(a)>=0&&(r.push(a),Ci(n,a));for(let a of n)r.push(a);let o=[],s=e.getLeafColumns();for(let a of r)s.indexOf(a)!==-1&&o.push(a);return{columns:r,columnsInSplit:o,visibleState:i,containerType:o[0]?.pinned}}var Iy={moduleName:"ColumnMove",version:Je,beans:[LCe,bCe],apiFunctions:{moveColumnByIndex:wCe,moveColumns:yCe},dependsOn:[Nl],css:[CCe]},VCe=class extends K{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){let n=document.createElement("form");n.style.position="fixed";let i=this.centerRowContainerCtrl.eContainer;for(let o of e)this.cloneItemIntoDummy(o,n);i.appendChild(n);let r=n.offsetWidth;return n.remove(),t=t??this.gos.get("autoSizePadding"),r+t}getHeaderCellForColumn(e){let t=null;for(let n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}return t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let c=s.classList[l];c!="ag-row-position-absolute"&&r.add(c)}break}s=s.parentElement}i.appendChild(n),t.appendChild(i)}},oq={moduleName:"AutoWidth",version:Je,beans:[VCe]};function GCe(e,t,n=!0,i="api"){e.colResize?.setColumnWidths(t,!1,n,i)}var HCe=class extends K{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,e)}getInitialValues(e){let t=l=>l.reduce((c,d)=>c+d.getActualWidth(),0),n=(l,c)=>l.map(d=>d.getActualWidth()/c),i=this.getColumnsToResize(),r=t(i),o=n(i,r),s={columnsToResize:i,resizeStartWidth:r,resizeRatios:o},a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){let l=a.getDisplayedLeafColumns(),c=s.groupAfterColumns=l.filter(u=>u.isResizable()),d=s.groupAfterStartWidth=t(c);s.groupAfterRatios=n(c,d)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){let t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:r,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:r,ratios:s,width:t}),a){let u=t-o;d.push({columns:a,ratios:c,width:l-u})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},zCe=class extends K{constructor(e,t,n,i,r){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){let e=[],t,n,i=()=>{if(Ie(this.eResize,t),!t)return;let{horizontalResizeSvc:s,colAutosize:a}=this.beans,l=s.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),n&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},r=()=>{for(let s of e)s();e.length=0},o=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==n)&&(t=s,n=a,r(),i())};o(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:r,beans:o}=this,s=this.normaliseResizeAmount(t),a=r+s,l=[{key:n,newWidth:a}],{pinnedCols:c,ctrlsSvc:d,colResize:u}=o;if(this.column.getPinned()){let h=c?.leftWidth??0,p=c?.rightWidth??0,f=lg(d.getGridBodyCtrl().eBodyViewport)-50;if(h+p+(s-i)>f)return}this.lastResizeAmount=s,u?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},jCe=class extends K{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){let r=[],{colModel:o,gos:s,visibleCols:a}=this.beans;for(let l of e){let c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)continue;if(r.push({width:l.newWidth,ratios:[1],columns:[c]}),s.get("colResizeDefault")==="shift"&&(t=!t),t){let u=a.getColAfter(c);if(!u)continue;let h=c.getActualWidth()-l.newWidth,p=u.getActualWidth()+h;r.push({width:p,ratios:[1],columns:[u]})}}r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(d=>UCe(d)))){if(n){let d=t&&t.length>0?t[0].columns:null;s0(this.eventSvc,d,n,i)}return}let o=[],s=[];for(let d of t){let{width:u,columns:h,ratios:p}=d,f={},g={};for(let w of h)s.push(w);let C=!0,m=0;for(;C;){if(m++,m>1e3){mt(31);break}C=!1;let w=[],x=0,D=u;h.forEach((L,V)=>{if(g[L.getId()])D-=f[L.getId()];else{w.push(L);let P=p[V];x+=P}});let F=1/x;w.forEach((L,V)=>{let B=V===w.length-1,P;B?P=D:(P=Math.round(p[V]*u*F),D-=P);let U=L.getMinWidth(),A=L.getMaxWidth();P<U?(P=U,g[L.getId()]=!0,C=!0):A>0&&P>A&&(P=A,g[L.getId()]=!0,C=!0),f[L.getId()]=P})}for(let w of h){let x=f[w.getId()];w.getActualWidth()!==x&&(w.setActualWidth(x,i),o.push(w))}}let a=o.length>0,l=[];if(a){let{colFlex:d,visibleCols:u,colViewport:h}=this.beans;l=d?.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0})??[],u.setLeftValues(i),u.updateBodyWidths(),h.checkViewportColumns()}let c=s.concat(l);(a||n)&&s0(this.eventSvc,c,n,i,l)}resizeHeader(e,t,n){if(!e.isResizable())return;let i=e.getActualWidth(),r=e.getMinWidth(),o=e.getMaxWidth(),s=Math.min(Math.max(i+t,r),o);this.setColumnWidths([{key:e,newWidth:s}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,r){return new zCe(e,t,n,i,r)}createGroupResizeFeature(e,t,n,i){return new HCe(e,t,n,i)}};function UCe(e){let{columns:t,width:n}=e,i=0,r=0,o=!0;for(let l of t){let c=l.getMinWidth();i+=c||0;let d=l.getMaxWidth();d>0?r+=d:o=!1}let s=n>=i,a=!o||n<=r;return s&&a}var WCe={moduleName:"ColumnResize",version:Je,beans:[jCe],apiFunctions:{setColumnWidths:GCe},dependsOn:[_5,oq]},$Ce=class extends K{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);for(let t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(let e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},qCe=class extends S5{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,i,r){let{column:o,beans:s}=this,{context:a,colNames:l,colHover:c,rangeSvc:d,colResize:u}=s;this.comp=e,r=vy(this,a,r),this.setGui(t,r),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:i,compBean:r}),this.setupUserComp(),this.addHeaderMouseListeners(r,i),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let h=this.rowCtrl.pinned,p=o.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(r,p,t),d?.createRangeHighlightFeature(r,o,e),r.createManagedBean(new y5(o,t,s)),r.createManagedBean(new $Ce(e,o)),u?this.resizeFeature=r.createManagedBean(u.createGroupResizeFeature(e,n,h,o)):e.setResizableDisplayed(!1),r.createManagedBean(new Gu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,p),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.getDefinition();return Oe(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Qe(t)===e;if(!n&&!i)return;let r=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving()),s=!1,a=!1;if(o){let l=this.beans.gos.get("enableRtl"),c=r===1,d=r===0;n&&(l?a=c:s=d),i&&(l?s=d:a=c)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){let{resizeFeature:n}=this;if(!n)return;let i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){let{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:i}=this.beans,r=this.column,o=r.getProvidedColumnGroup(),s=Oe(n,{displayName:this.displayName,columnGroup:r,setExpanded:l=>{e.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>i?.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>i?.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=Cge(t,s);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e,t){let{column:n,comp:i,beans:{rangeSvc:r},gos:o}=this,s=d=>this.handleMouseOverChange(d.type==="mouseenter"),a=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",n.getProvidedColumnGroup()),l=d=>this.handleContextMenuMouseEvent(d,void 0,n.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:s,mouseleave:s,click:a,contextmenu:l}),i.toggleCss("ag-header-group-cell-selectable",Qh(o));let c=r?.createHeaderGroupCellMouseListenerFeature(this.column,t);c&&this.createManagedBean(c)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:e}=this,t=e.getColGroupDef(),n=M_(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(let i of n)this.comp.toggleCss(i,!0)}setupMovingCss(e){let{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(let o of i)e.addManagedListeners(o,{movingChanged:r});r()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){if(super.handleKeyDown(e),!this.getWrapperHasFocus())return;let{column:n,expandable:i,gos:r,beans:o}=this,s=Qh(r);if(e.key==$.ENTER){if(s&&!e.altKey)o.rangeSvc?.handleColumnSelection(n,e);else if(i){let a=!n.isExpanded();o.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),a,"uiColumnExpanded")}}}refreshAnnouncement(){let e,{gos:t,column:n,beans:i}=this;if(Qh(t)){let o=this.getLocaleTextFunc(),s=i.rangeSvc?.isColumnInAnyRange(n);e=o("ariaColumnCellSelection",`Press CTRL+SPACE to ${s?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=e}announceAriaDescription(){let{beans:e,eGui:t,ariaAnnouncement:n}=this;!n||!t.contains(wt(e))||e.ariaAnnounce?.announceValue(n,"columnHeader")}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function KCe(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function YCe(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function ZCe(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function XCe(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function QCe(e){return e.colGroupSvc?.getColumnGroupState()??[]}function JCe(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function ebe(e){e.colGroupSvc?.resetColumnGroupState("api")}function tbe(e){return e.visibleCols.treeLeft}function nbe(e){return e.visibleCols.treeCenter}function ibe(e){return e.visibleCols.treeRight}function rbe(e){return e.visibleCols.getAllTrees()}function obe(e,t){for(let n=0;n<t.length;n++){let i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var sbe=class extends K{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){let{colFlex:n,colModel:i,colGroupSvc:r,colViewport:o,selectionColSvc:s}=this.beans;t||this.buildTrees(i,r),r?.updateOpenClosedVisibility(),this.leftCols=W3(this.treeLeft),this.centerCols=W3(this.treeCenter),this.rightCols=W3(this.treeRight),s?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(let t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){let i=n.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}n=n.getParent()}}return e}updateBodyWidths(){let e=Ru(this.centerCols),t=Ru(this.leftCols),n=Ru(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let r,o;this.gos.get("enableRtl")?(r=t?t[0]:null,o=n?Qe(n):null):(r=t?Qe(t):null,o=n?n[0]:null);for(let s of e.getCols())s.setLastLeftPinned(s===r,i),s.setFirstRightPinned(s===o,i)}buildTrees(e,t){let n=e.getColsToShow(),i=n.filter(l=>l.getPinned()=="left"),r=n.filter(l=>l.getPinned()=="right"),o=n.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),s=new r$,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:i,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:r,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){let t=e.getCols(),n=[],i=[],r=[];for(let o of t){let s=o.getPinned();s?s===!0||s==="left"?n.push(o):r.push(o):i.push(o)}this.ariaOrderColumns=n.concat(i).concat(r)}getAriaColIndex(e){let t;return Lr(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(let e of[this.treeLeft,this.treeRight,this.treeCenter])for(let t of e)Lr(t)&&t.checkLeft()}setLeftValuesOfCols(e){let{colModel:t}=this.beans;if(!t.getColDefCols())return;let i=t.getCols().slice(0),r=this.gos.get("enableRtl");for(let o of[this.leftCols,this.rightCols,this.centerCols]){if(r){let s=Ru(o);for(let a of o)s-=a.getActualWidth(),a.setLeft(s,e)}else{let s=0;for(let a of o)a.setLeft(s,e),s+=a.getActualWidth()}obe(i,o)}for(let o of i)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){let{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){let{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){let r=[],o=null;for(let s=0;s<t.length;s++){let a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){let h=c-1;for(let p=1;p<=h;p++)d.push(t[s+p]);s+=h}let u;if(n){u=!1;for(let h of d)n(h)&&(u=!0)}else u=!0;u&&(r.length===0&&o&&(i&&i(a))&&r.push(o),r.push(a)),o=a}return r}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){let t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ag(this.treeCenter,!1,e),ag(this.treeLeft,!1,e),ag(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]];if(i.length)return e?Qe(i):i[0]}return null}getColAfter(e){let t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return Ru(this.leftCols)}getDisplayedColumnsRightWidth(){return Ru(this.rightCols)}isColAtEdge(e,t){let n=this.allCols;if(!n.length)return!1;let i=t==="first",r;if(Lr(e)){let o=e.getDisplayedLeafColumns();if(!o.length)return!1;r=i?o[0]:Qe(o)}else r=e;return(i?n[0]:Qe(n))===r}};function ag(e,t,n){if(e)for(let i=0;i<e.length;i++){let r=e[i];if(Lr(r)){let o=t?r.getDisplayedChildren():r.getChildren();ag(o,t,n)}n(r)}}function W3(e){let t=[];return ag(e,!0,n=>{Il(n)&&t.push(n)}),t}var abe=class extends K{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){let e=[],t=this.beans.colModel.getColTree();return Rd(null,t,n=>{Qn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.beans.colModel.getColDefColTree();if(!t)return;let n=[];Rd(null,t,i=>{if(Qn(i)){let r=i.getColGroupDef(),o={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){let{colModel:n,colAnimation:i,visibleCols:r,eventSvc:o}=this.beans;if(!n.getColTree().length)return;i?.start();let a=[];for(let l of e){let c=l.groupId,d=l.open,u=this.getProvidedColGroup(c);u&&u.isExpanded()!==d&&(u.setExpanded(d),a.push(u))}r.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i?.finish()}setColumnGroupOpened(e,t,n){let i;Qn(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return Rd(null,this.beans.colModel.getColTree(),n=>{Qn(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),r=t==="After"?Qe(i):i[0],o=`getCol${t}`;for(;;){let s=this.beans.visibleCols[o](r);if(!s)return null;let a=this.getColGroupAtLevel(s,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){let e=this.beans.visibleCols.getAllTrees();ag(e,!1,t=>{Lr(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Lr(e))return e;let n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number",r=null;return ag(n,!1,o=>{if(Lr(o)){let s=o,a;i?a=e===s.getGroupId()&&t===s.getPartId():a=e===s.getGroupId(),a&&(r=s)}}),r}createColumnGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:o}=e,s=this.mapOldGroupsById(r),a=[],l=t;for(;l.length;){let c=l;l=[];let d=0,u=h=>{let p=d;d=h;let f=c[p],C=(Lr(f)?f.getProvidedColumnGroup():f).getOriginalParent();if(C==null){for(let w=p;w<h;w++)a.push(c[w]);return}let m=this.createColumnGroup(C,n,s,i,o);for(let w=p;w<h;w++)m.addChild(c[w]);l.push(m)};for(let h=1;h<c.length;h++){let p=c[h],g=(Lr(p)?p.getProvidedColumnGroup():p).getOriginalParent(),C=c[d],w=(Lr(C)?C.getProvidedColumnGroup():C).getOriginalParent();g!==w&&u(h)}d<c.length&&u(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,n,i,r,o,s){let a=r.getUniqueKey(t.groupId||null,null),l=rk(this.beans,t,a),c=new rg(l,a,!1,n);this.createBean(c);let d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);let u=d?.group;u&&c.setExpanded(u.isExpanded());let h=qW(this.beans,l.children,n+1,e,i,r,o,s);return c.setChildren(h),c}balanceColumnTree(e,t,n,i){let r=[];for(let o=0;o<e.length;o++){let s=e[o];if(Qn(s)){let a=s,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),r.push(a)}else{let a,l;for(let c=t;c<n;c++){let d=i.getUniqueKey(null,null),u=rk(this.beans,null,d),h=new rg(u,d,!0,c);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),e.some(d=>Qn(d))){l.setChildren([s]);continue}else{l.setChildren(e);break}r.push(s)}}return r}findDepth(e){let t=0,n=e;for(;n?.[0]&&Qn(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){let r=e[i];if(Qn(r)){let o=r,s=this.findMaxDepth(o.getChildren(),t+1);n<s&&(n=s)}}return n}balanceTreeForAutoCols(e,t){let n=[];for(let i of e){let r=i;for(let o=t-1;o>=0;o--){let s=new rg(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(s),s.setChildren([r]),r.originalParent=s,r=s}t===0&&(i.originalParent=null),n.push(r)}return n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let r=t[i];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:i,group:r}}}createColumnGroup(e,t,n,i,r){let o=e.getGroupId(),s=t.getInstanceIdForKey(o),a=I$(o,s),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),_e(l)?l.reset():(l=new ny(e,o,s,i),r||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{for(let r of i)if(Lr(r)){let o=r;t[r.getUniqueId()]=o,n(o.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(let n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,Lr(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}}},A5={moduleName:"ColumnGroup",version:Je,dynamicBeans:{headerGroupCellCtrl:qCe},beans:[abe],apiFunctions:{getAllDisplayedColumnGroups:rbe,getCenterDisplayedColumnGroups:nbe,getColumnGroup:YCe,getColumnGroupState:QCe,getDisplayNameForColumnGroup:XCe,getLeftDisplayedColumnGroups:tbe,getProvidedColumnGroup:ZCe,getRightDisplayedColumnGroups:ibe,resetColumnGroupState:ebe,setColumnGroupOpened:KCe,setColumnGroupState:JCe}},lbe={tag:"div",cls:"ag-skeleton-container"},cbe=class extends pe{constructor(){super(lbe)}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Fc(e.eParentOfValue)),Fc(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Ut(this.getGui(),t)}setupLoading(e){let t=bt({tag:"div",cls:"ag-skeleton-effect"}),n=e.node.rowIndex;if(n!=null){let o=75+25*(n%2===0?Math.sin(n):Math.cos(n));t.style.width=`${o}%`}this.getGui().appendChild(t);let i=this.getLocaleTextFunc(),r=e.deferRender?i("ariaDeferSkeletonCellLoading","Cell is loading"):i("ariaSkeletonCellLoading","Row data is loading");Ut(this.getGui(),r)}refresh(e){return!1}},dbe={moduleName:"CheckboxCellRenderer",version:Je,userComponents:{agCheckboxCellRenderer:l0e}},ube={moduleName:"SkeletonCellRenderer",version:Je,userComponents:{agSkeletonCellRenderer:cbe}};function hbe(e,t){let n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function pbe(e){return e.colModel.getColumnDefs(!0)}function fbe(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function gbe(e,t){return e.colModel.getColDefCol(t)}function mbe(e){return e.colModel.getColDefCols()}function vbe(e,t){return go(e,t,"api")}function Cbe(e){return $D(e)}function bbe(e){Wk(e,"api")}function wbe(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function ybe(e){return e.visibleCols.isPinningLeft()}function Sbe(e){return e.visibleCols.isPinningRight()}function xbe(e,t){return e.visibleCols.getColAfter(t)}function Ebe(e,t){return e.visibleCols.getColBefore(t)}function Dbe(e,t,n){e.colModel.setColsVisible(t,n,"api")}function _be(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function Abe(e){return e.colModel.getCols()}function Rbe(e){return e.visibleCols.leftCols}function Fbe(e){return e.visibleCols.centerCols}function Mbe(e){return e.visibleCols.rightCols}function Ibe(e){return e.visibleCols.allCols}function Tbe(e){return e.colViewport.getViewportColumns()}function bk(e,t){if(!e)return;let n=e,i={};for(let r of Object.keys(n)){if(t&&t.indexOf(r)>=0||yW.has(r))continue;let o=n[r];typeof o=="object"&&o!==null&&o.constructor===Object?i[r]=bk(o):i[r]=o}return i}var Pbe=class extends K{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i,r=!1){let o=e.slice();t?o.sort((l,c)=>n.indexOf(l)-n.indexOf(c)):(n||r)&&o.sort((l,c)=>i.indexOf(l)-i.indexOf(c));let s=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,s,a)}buildColumnDefs(e,t=[],n=[]){let i=[],r={};for(let o of e){let s=this.createDefFromColumn(o,t,n),a=!0,l=s,c=o.getOriginalParent(),d=null;for(;c;){let u=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=r[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(u=this.createDefFromGroup(c),u&&(u.children=[l],r[u.groupId]=u,l=u,c=c.getOriginalParent()),c!=null&&d===c){a=!1;break}d=c}a&&i.push(l)}return i}createDefFromGroup(e){let t=bk(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=bk(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSortDef(),i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},kbe=class extends K{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){let t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);let n=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:r}=this.beans,o=i.centerCols,s=-1;if(e.resizingCols){let g=new Set(e.resizingCols);for(let C=o.length-1;C>=0;C--)if(g.has(o[C])){s=C;break}}let a=!1,l=o.map((g,C)=>{let m=g.getFlex(),w=m!=null&&m>0&&C>s;return a||(a=w),{col:g,isFlex:w,flex:Math.max(0,m??0),initialSize:g.getActualWidth(),min:g.getMinWidth(),max:g.getMaxWidth(),targetSize:0}});if(a?(r?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(r),!n||!a)return[];let c=l.length,d=l.reduce((g,C)=>g+C.flex,0),u=n,h=(g,C)=>{g.frozenSize=C,g.col.setActualWidth(C,t),u-=C,d-=g.flex,c-=1},p=g=>g.frozenSize!=null;for(let g of l)g.isFlex||h(g,g.initialSize);for(;c>0;){let g=Math.round(d<1?u*d:u),C,m=0,w=0;for(let F of l){if(p(F))continue;C=F,w+=g*(F.flex/d);let L=w-m,V=Math.round(L);F.targetSize=V,m+=V}C&&(C.targetSize+=g-m);let x=0;for(let F of l){if(p(F))continue;let L=F.targetSize,V=Math.min(Math.max(L,F.min),F.max);x+=V-L,F.violationType=V===L?void 0:V<L?"max":"min",F.targetSize=V}let D=x===0?"all":x>0?"min":"max";for(let F of l)p(F)||(D==="all"||F.violationType===D)&&h(F,F.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();let f=l.filter(g=>g.isFlex&&!g.violationType).map(g=>g.col);if(e.fireResizedEvent){let g=l.filter(m=>m.initialSize!==m.frozenSize).map(m=>m.col),C=l.filter(m=>m.flex).map(m=>m.col);s0(this.eventSvc,g,!0,t,C)}return this.revealColumns(r),f}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){let{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function Yw(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),r=e;for(let o=0;o<i.length;o++){if(r==null)return;r=r[i[o]]}return r}var Lbe=["dateTimeString","dateString","text","number","boolean","date"],Obe=class extends K{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===$.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,r)=>{let o=t.getColDefCol(n),s=o?.getColDef();if(!o||!s)return 0;let a=i==null?"":e({column:o,node:null,value:i}),l=r==null?"":e({column:o,node:null,value:r});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes(),t={},n={},i=d=>u=>{let{column:h,node:p,value:f}=u,g=h.getColDef().valueFormatter;return g===d.groupSafeValueFormatter&&(g=d.valueFormatter),this.beans.valueSvc.formatValue(h,p,f,g)};for(let d of Object.keys(e)){let u=e[d],h=ce(T({},u),{groupSafeValueFormatter:TU(u,this.gos)});t[d]=h,n[d]=i(h)}let r=this.gos.get("dataTypeDefinitions")??{},o={};for(let d of Object.keys(r)){let u=r[d],h=this.processDataTypeDefinition(u,r,[d],e);h&&(t[d]=h,u.dataTypeMatcher&&(o[d]=u.dataTypeMatcher),n[d]=i(h))}let{valueParser:s,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==s,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){let n=T({},e);for(let i of Lbe)delete n[i],n[i]=e[i]??t[i].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,i){let r,o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let s=i[o],a=t[o];if(s&&a&&(s=a),!IU(e,s,o))return;r=MU(s,e)}else{if(n.includes(o)){X(44);return}let s=t[o];if(!IU(e,s,o))return;let a=this.processDataTypeDefinition(s,t,[...n,o],i);if(!a)return;r=MU(a,e)}return ce(T({},r),{groupSafeValueFormatter:TU(r,this.gos)})}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:r}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(r,n):!1),!i){e.cellDataType=!1;return}let o=this.dataTypeDefinitions[i];if(!o){X(47,{cellDataType:i});return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,n),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){let{gos:n}=this;if(!nn(n))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if($3(t,i))return!1;let r=t.type===null?e.type:t.type;if(r){let o=n.get("columnTypes")??{};if(WD(r).some(a=>{let l=o[a.trim()];return l&&$3(l,i)}))return!1}return!$3(e,i)}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=Yw(i,e,o)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](n))??"object"}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);let[r]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{let{firstRowData:s}=o;s&&(r?.(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},r={};for(let o of Object.keys(this.columnStateUpdatesPendingInference)){let s=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;let l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let d=Bbe(a,s);d.rowGroup&&d.rowGroupIndex==null&&(i[o]=d),d.pivot&&d.pivotIndex==null&&(r[o]=d),n.push(d)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&go(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},{rowGroupColsSvc:i,pivotColsSvc:r}=this.beans;return i?.restoreColumnOrder(n,e),r?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=ku(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}getDateStringTypeDefinition(e){let{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!n||e.getColDef().allowFormula&&this.beans.formula?.isFormula(t)?!0:n(t)}validateColDef(e){let t=n=>X(48,{property:n});if(e.cellDataType==="object"){let{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){let t=e.cellDataType;if(!t||typeof t!="string")return;let{dataTypeDefinitions:n,beans:i,formatValueFuncs:r}=this,o=n[t];o&&i.colFilter?.setColDefPropsForDataType(e,o,r[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let r=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:r});Object.assign(e,o)}getDateObjectTypeDef(e){let t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>Br(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):as(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){let t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>Br(n)??void 0,dateFormatter:n=>as(n??null,t)??void 0,valueParser:n=>PD(String(n.newValue))?n.newValue:null,valueFormatter:n=>PD(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&PD(n)}}getDefaultDataTypes(){let e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:Xr(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:ce(T({},this.getDateStringTypeDef("dateTimeString")),{dataTypeMatcher:t=>typeof t=="string"&&zge(t)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>Xr(t.value)??""}}}destroyColumnStateUpdateListeners(){for(let e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function MU(e,t){let n=T(T({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...WD(e.columnTypes),...WD(t.columnTypes)]),n}function IU(e,t,n){return t?t.baseDataType!==e.baseDataType?(X(46),!1):!0:(X(45,{parentCellDataType:n}),!1)}function TU(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){let i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(ce(T({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(ce(T({},n),{value:n.value.value}))}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function Nbe(e,t,n,i){if(!t[n])return!1;let r=e[n];return r===null?(t[n]=!1,!1):i===void 0?!!r:r===i}function $3(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>Nbe(e,t,n,i))}function Bbe(e,t){let n=i$(e);for(let i of t)delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex;return n}var Vbe={moduleName:"DataType",version:Je,beans:[Obe],dependsOn:[dbe]},Gbe={moduleName:"ColumnFlex",version:Je,beans:[kbe]},O_={moduleName:"ColumnApi",version:Je,beans:[Pbe],apiFunctions:{getColumnDef:hbe,getDisplayNameForColumn:fbe,getColumn:gbe,getColumns:mbe,applyColumnState:vbe,getColumnState:Cbe,resetColumnState:bbe,isPinning:wbe,isPinningLeft:ybe,isPinningRight:Sbe,getDisplayedColAfter:xbe,getDisplayedColBefore:Ebe,setColumnsVisible:Dbe,setColumnsPinned:_be,getAllGridColumns:Abe,getDisplayedLeftColumns:Rbe,getDisplayedCenterColumns:Fbe,getDisplayedRightColumns:Mbe,getAllDisplayedColumns:Ibe,getAllDisplayedVirtualColumns:Tbe,getColumnDefs:pbe}};function Hbe(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}var zbe=class extends K{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:r}=this.beans;return n&&r?r.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,r){let o=e.headerValueGetter;if(o){let s=Oe(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:r});return typeof o=="function"?o(s):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,s)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return Hbe(e.field)}return""}},jbe=class extends K{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let{visibleCols:i}=this,r=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!r)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){let s=i.bodyWidth;this.viewportLeft=s-t-e,this.viewportRight=s-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){let e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||Ube(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,o=t<i&&n<i,s=t>r&&n>r;return!o&&!s}getViewportColumns(){let{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let t=o=>{let s=o.getLeft();return _e(s)&&s>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,r=i.centerCols;return i.getColsForRow(e,r,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){let{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;let n=i=>{let r=new Set,o={};for(let s of i){let a=s.getParent(),l=s.isSpanHeaderHeight();for(;a&&!r.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}let d=a.getProvidedColumnGroup().getLevel();o[d]??(o[d]=[]),o[d].push(a),r.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function Ube(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var Wbe=class extends K{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(r){let o=t(r),s=typeof o;if(s==="string"||s==="number"||s==="boolean"){this.eGui=Tk("<span>"+o+"</span>");return}if(o==null){this.eGui=bt({tag:"span"});return}this.eGui=o}}return n}},$be={moduleName:"CellRendererFunction",version:Je,beans:[Wbe]},qbe=class extends Tme{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){let e=this.gos.get("components");if(e!=null)for(let t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){let{icons:t,userComponents:n,dynamicBeans:i,selectors:r}=e;if(n){let o=(s,a,l,c)=>{this.agGridDefaults[s]=a,(l||c)&&(this.agGridDefaultOverrides[s]={params:l,processParams:c})};for(let s of Object.keys(n)){let a=n[s];if(_ge(a)&&(a=a.getComp(this.beans)),typeof a=="object"){let{classImp:l,params:c,processParams:d}=a;o(s,l,c,d)}else o(s,a)}}this.registerDynamicBeans(i);for(let o of r??[])this.selectors[o.selector]=o;if(t)for(let o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){let n=(a,l,c,d)=>({componentFromFramework:l,component:a,params:c,processParams:d}),{frameworkOverrides:i}=this.beans,r=i.frameworkComponent(t,this.gos.get("components"));if(r!=null)return n(r,!0);let o=this.jsComps[t];if(o){let a=i.isFrameworkComponent(o);return n(o,a)}let s=this.agGridDefaults[t];if(s){let a=this.agGridDefaultOverrides[t];return n(s,!1,a?.params,a?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?Bo(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??Bo(256)}},Kbe=23,Ybe=class extends K{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(let e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let e=Object.values(this.params);this.ready=e.length===Kbe&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},Zbe='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}:where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}}:where(.ag-ltr) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{right:-1px}}:where(.ag-rtl) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{left:-1px}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',Xbe={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:aa,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Fu,rangeSelectionBackgroundColor:xd(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:xd(.5),rangeHeaderHighlightColor:ume(.08),rowNumbersSelectedColor:xd(.5),rowHoverColor:xd(.08),columnHoverColor:xd(.05),selectedRowBackgroundColor:xd(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:aa,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:yl(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:yl(.1),iconButtonActiveColor:Fu,iconButtonActiveBackgroundColor:xd(.28),iconButtonActiveIndicatorColor:Fu,menuBorder:{color:yl(.2)},menuBackgroundColor:El(.03),menuTextColor:El(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:yl(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Fu},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:yl(.2)},panelBackgroundColor:aa,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:yl(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:yl(.13)},selectCellBackgroundColor:yl(.07),selectCellBorder:{color:yl(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:aa,filterPanelApplyButtonBackgroundColor:Fu,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Uv,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Uv,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:yl(.15),statusBarLabelColor:Uv,statusBarLabelFontWeight:500,statusBarValueColor:Uv,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},Qbe=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",sq={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},Jbe=ce(T({},sq),{cellBatchEditTextColor:"#f3d0b3"}),ewe=()=>Id({feature:"batchEditStyle",params:sq,css:Qbe}),twe=ewe(),nwe=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",iwe={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};var rwe=()=>Id({feature:"buttonStyle",params:ce(T({},iwe),{buttonBackgroundColor:aa,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Fu}}),css:nwe}),owe=rwe();var swe=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}";var awe=()=>Id({feature:"columnDropStyle",css:swe}),aq=awe();var lwe={warn:(...e)=>{X(e[0],e[1])},error:(...e)=>{mt(e[0],e[1])},preInitErr:(...e)=>{jw(e[0],e[2],e[1])}},cwe=()=>Sme(lwe).withParams(Xbe).withPart(owe).withPart(aq).withPart(twe),dwe='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',uwe=()=>Id({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:aa,checkboxUncheckedBorderColor:El(.3),checkboxCheckedBackgroundColor:Fu,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:aa,checkboxIndeterminateBackgroundColor:El(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:aa,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:dwe}),hwe=uwe();var lq=()=>ce(T(T({},YD),Jbe),{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:El(.05),rowHoverColor:xd(.15),selectedRowBackgroundColor:xd(.2),menuBackgroundColor:El(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Uv,findMatchColor:aa,findActiveMatchColor:aa,checkboxUncheckedBorderColor:El(.4),toggleButtonOffBackgroundColor:El(.4),rowBatchEditBackgroundColor:El(.1)});var pwe=()=>ce(T({},lq()),{backgroundColor:"#1f2836"});var fwe=()=>Id({feature:"colorScheme",params:YD,modeParams:{light:YD,dark:lq(),"dark-blue":pwe()}}),gwe=fwe();var cq={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},dq={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},mwe=(e={})=>{let t="";for(let n of[...Object.keys(cq),...Object.keys(dq)]){let i=vwe(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},vwe=(e,t=1.5)=>{let n=dq[e];if(n)return n;let i=cq[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},Cwe=(e={})=>Id({feature:"iconSet",css:()=>mwe(e)});var bwe=Cwe();var wwe=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',ywe=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}";var Swe={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4};var xwe=()=>Id({feature:"inputStyle",params:ce(T({},Swe),{inputBackgroundColor:aa,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Fu},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:El(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>wwe+ywe}),Ewe=xwe();var Dwe='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}';var _we={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};var Awe=()=>Id({feature:"tabStyle",params:ce(T({},_we),{tabBarBorder:!0,tabBarBackgroundColor:yl(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:aa}),css:Dwe}),Rwe=Awe();var Fwe=()=>cwe().withPart(hwe).withPart(gwe).withPart(bwe).withPart(Rwe).withPart(Ewe).withPart(aq).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),R5=Fwe();var Mwe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},Iwe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},Twe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},PU={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},kU={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},q3={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},LU={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function Pwe(e,t){for(let n of t.sort((i,r)=>i.moduleName.localeCompare(r.moduleName))){let i=n.css;i&&e.set(`module-${n.moduleName}`,i)}}var kwe=class extends Mme{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(PU),this.getSizeEl(kU),this.getSizeEl(q3),this.getSizeEl(LU),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(LU)}getRowBorderWidth(){return this.getCSSVariablePixelValue(q3)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(PU)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(kU)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Mwe)}getCellPaddingLeft(){let e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(Iwe),n=this.getCSSVariablePixelValue(Twe);return e-1+n*t}getCellPadding(){let e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){let{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;let i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?Number.parseFloat(t):-1}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){let e=this.getCSSVariablePixelValue(q3);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&mt(t?106:239)}getAdditionalCss(){let e=new Map;return e.set("core",[Zbe]),Pwe(e,Array.from(mfe())),e}getDefaultTheme(){return R5}varError(e){X(9,{variable:e})}themeError(e){mt(240,{theme:e})}shadowRootError(){mt(293)}},Lwe=class extends Pme{postConstruct(){let{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function uq(e,t,n){let i=e.visibleCols.headerGroupRowCount;if(n>=i)return{column:t,headerRowIndex:n};let r=t.getParent();for(;r&&r.getProvidedColumnGroup().getLevel()>n;)r=r.getParent();let o=t.isSpanHeaderHeight();return!r||o&&r.isPadding()?{column:t,headerRowIndex:i}:{column:r,headerRowIndex:r.getProvidedColumnGroup().getLevel()}}var Owe=class extends K{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});let t=vi(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n,{colModel:i,colGroupSvc:r,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=r?.getColumnGroup(e)??null)):n=e,!n)return null;let a=o.getHeaderRowContainerCtrl()?.getAllCtrls(),l=Qe(a||[]).type==="filter",c=Dd(this.beans)-1,d=-1,u=n;for(;u;)d++,u=u.getParent();let h=d;return t&&l&&h===c-1&&h++,h===-1?null:{headerRowIndex:h,column:n}}navigateVertically(e,t){let{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:r}=n;if(!r)return!1;let{headerRowIndex:o}=r,s=r.column,a=Dd(this.beans),l=this.getHeaderRowType(o),c=i.headerGroupRowCount,{headerRowIndex:d,column:u,headerRowIndexWithoutSpan:h}=e==="UP"?Nwe(l,s,o):Bwe(s,o,c),p=!1;return d<0&&(d=0,u=s,p=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):h!==void 0&&(this.currentHeaderRowWithoutSpan=h),!p&&!u?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:u},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){let{focusSvc:i,gos:r}=this.beans,o=T({},i.focusedHeader),s,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==r.get("enableRtl")?(a="Before",s=this.findHeader(o,a)):(a="After",s=this.findHeader(o,a));let l=r.getCallback("tabToNextHeader");if(t&&l){let c=i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a});if(c){let{headerRowIndex:d}=i.focusedHeader||{};d!=null&&d!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=d)}return c}return s||!t?i.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,a,n)}focusNextHeaderRow(e,t,n){let i=this.beans,r=e.headerRowIndex,o=null,s,a=Dd(i),l=this.beans.visibleCols.allCols;if(t==="Before"){if(r<=0)return!1;o=Qe(l),s=r-1,this.currentHeaderRowWithoutSpan-=1}else o=l[0],s=r+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:d}=uq(this.beans,o,s);return d>=a&&(d=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Lr(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?Qe(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){let{colGroupSvc:n,visibleCols:i}=this.beans,r=e.column;if(r instanceof ny){let l=r.getDisplayedLeafColumns();r=t==="Before"?l[0]:l[l.length-1]}let o=t==="Before"?i.getColBefore(r):i.getColAfter(r);if(!o)return;let s=i.headerGroupRowCount;if(e.headerRowIndex>=s)return{headerRowIndex:e.headerRowIndex,column:o};let a=n?.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof da&&o.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){let t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function Nwe(e,t,n){let i=n-1;if(e!=="filter"){let r=t instanceof da&&t.isSpanHeaderHeight(),o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>i||r&&o.isPadding());)o=o.getParent();if(o)return r?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:o,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function Bwe(e,t,n){let i=t+1,r={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof ny){if(i>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let s=e.getDisplayedChildren()[0];if(s instanceof ny&&s.isPadding()){let l=s.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(s=l)}r.column=s,s instanceof da&&s.isSpanHeaderHeight()&&(r.headerRowIndex=n,r.headerRowIndexWithoutSpan=i)}return r}var Vwe=class extends K{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){let e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(Nge(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;let e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){let{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(wt(this.beans),Q$)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){let e=wt(this.beans);return this.isDomDataPresentInHierarchy(e,XD)?!0:this.isDomDataPresentInHierarchy(e,QD)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(kW(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){let{rowIndex:t,rowPinned:n,column:i}=e,r={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.focusedCell==null)return;let e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(T({type:"cellFocusCleared"},e))}setFocusedCell(e){this.setFocusRecovered();let{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:s}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:hi(i),column:a};let l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent(ce(T(T({type:"cellFocused"},l),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o,sourceEvent:s})),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:Eg(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;let{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:r,headerRowIndex:o}=this.focusedHeader;return t===r&&n===o&&i==r.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),og(this.beans))return!1;let{direction:t,fromTab:n,allowUserOverride:i,event:r,fromCell:o,rowWithoutSpanValue:s,scroll:a=!0}=e,{headerPosition:l}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(i){let c=this.focusedHeader,d=Dd(this.beans);if(n){let u=this.gos.getCallback("tabToNextHeader");u&&(l=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:c,headerPosition:l,headerRowCount:d}))}else{let u=this.gos.getCallback("navigateToNextHeader");if(u&&r){let h={key:r.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:d,event:r};l=u(h)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:r,fromCell:o,rowWithoutSpanValue:s,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(og(this.beans))return!1;let{userFunc:t,headerPosition:n,direction:i,event:r}=e,o=this.focusedHeader,s=Dd(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:o,headerPosition:n,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:r})}getHeaderPositionFromUserFunc(e){let{userFunc:t,direction:n,currentPosition:i,headerPosition:r,headerRowCount:o}=e,a=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:r,headerRowCount:o});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(e){let{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:r,event:o,scroll:s=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:d,headerNavigation:u}=this.beans;if(this.focusedHeader&&Lve(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});s&&u?.scrollToColumn(a,n);let p=d.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(t.headerRowIndex,a,o)||!1;return u&&p&&(r!=null||i)&&(u.currentHeaderRowWithoutSpan=r??-1),p}focusFirstHeader(){if(this.overlays?.exclusive&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;let t=uq(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.exclusive&&this.focusOverlay(!0))return!0;let t=Dd(this.beans)-1,n=Qe(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===hi(t)}focusOverlay(e){let t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&qn(t,e)}focusGridView(e){let{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if(this.overlays?.exclusive)return n&&this.focusOverlay(t);if(T_(this.beans))return t&&!og(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:za(this.beans,t);let r=t?_g(this.beans):Dg(this.beans);if(r){let o=e.column??this.focusedHeader?.column,{rowIndex:s,rowPinned:a}=r,l=Mi(this.beans,r);if(!o||!l||s==null)return!1;if(o.isSuppressNavigable(l)){let c=this.gos.get("enableRtl"),d;return!i||i.key===$.TAB?d=c?$.LEFT:$.RIGHT:d=i.key,this.beans.navigation?.navigateToNextCell(null,d,{rowIndex:s,column:o,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:s,column:o,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(r)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(r,t)||(this.setFocusedCell({rowIndex:s,column:o,rowPinned:hi(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:s,rowPinned:a,column:o})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){let n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Dd(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},Gwe=class extends K{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:kge();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Hwe=class extends K{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},OD=new Set(["gridPreDestroyed","fillStart","pasteStart"]),zwe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"];var F5=zwe.reduce((e,t)=>(e[t]=Ife(t),e),{}),e0={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function OU(e){return`"${e}"`}var jwe=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),Uwe={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?e0[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:e0[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?e0[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},Wwe=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},allowFormula:{supportedRowModels:["clientSide"]},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{let n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Bo(262);if(t.smallLeft)return Bo(263);if(t.smallRight)return Bo(264)}return null}},sort:{validate:t=>Qv(t.sort)||Jh(t.sort)?null:`sort must be of type (SortDirection | SortDef), currently it is ${typeof t.sort=="object"?JSON.stringify(t.sort):MD(t.sort)}`},initialSort:{validate:t=>Qv(t.initialSort)||Jh(t.initialSort)?null:`initialSort must be of non-null type (SortDirection | SortDef), currently it is ${typeof t.initialSort=="object"?JSON.stringify(t.initialSort):MD(t.initialSort)}`},sortingOrder:{validate:t=>{let n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){let i=n.filter(r=>!(Qv(r)||Jh(r)));if(i.length>0)return`sortingOrder must be an array of type non-null (SortDirection | SortDef)[], incorrect items are: [${i.map(r=>typeof r=="string"||r==null?MD(r):JSON.stringify(r)).join(", ")}]`}else if(!Array.isArray(n)||!n.length)return`sortingOrder must be an array with at least one element, currently it is [${n}]`;return null}},type:{validate:t=>{let n=t.type;return n instanceof Array?n.some(r=>typeof r!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:i,suppressRowTransform:r,enableCellSpan:o,rowDragEntireRow:s,enableCellTextSelection:a})=>typeof n=="object"&&n?.mode==="singleRow"&&n?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":r?"colDef.spanRows is not supported with suppressRowTransform.":o?s?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:n={}},i){let r=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(let s of t.groupHierarchy??[]){if(typeof s=="object"){i.validation?.validateColDef(s);continue}!r.has(s)&&!(s in n)&&o.push(OU(s))}if(o.length>0){let s=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,a=`Choose one of ${[...r].map(OU).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${s}
${a}`}return null}}}),$we={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0,allowFormula:void 0},qwe=()=>Object.keys($we),Kwe=()=>({objectName:"colDef",allProperties:qwe(),docsUrl:"column-properties/",deprecations:jwe(),validations:Wwe()}),Ywe=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],Zwe=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","activeOverlayParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","formulaDataSource","formulaFuncs","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],Xwe=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","suppressOverlays"],hq=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],Qwe=["theme","rowSelection"],M5=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],pq=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","refreshAfterGroupEdit","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows","animateColumnResizing"],Jwe=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","overlayComponent","loadingOverlayComponent","noRowsOverlayComponent","overlayComponentSelector","activeOverlay","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],eye=()=>[...Xwe,...Zwe,...Ywe,...hq,...Jwe,...pq,...M5,...Qwe],tye=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function Sd(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var nye={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},iye=()=>{let e={autoSizePadding:{validate({autoSizePadding:n}){return Sd("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return Sd("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return Sd("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{let i=n.domLayout,r=["autoHeight","normal","print"];return i&&!r.includes(i)?`domLayout must be one of [${r.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:i,pinnedBottomRowData:r}){return n&&(i||r)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:i,pinnedTopRowData:r,pinnedBottomRowData:o}){return i&&(r||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:i,pinnedTopRowData:r,pinnedBottomRowData:o}){return i&&(r||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:n={}},i,r){for(let o of Object.keys(n))r.validation?.validateColDef(n[o]);return null}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return Bo(262);if(n.smallLeft)return Bo(263);if(n.smallRight)return Bo(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return Sd("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:n=>{if(typeof n.ssrmExpandAllAffectsAllRows=="boolean"){if(n.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(n.ssrmExpandAllAffectsAllRows&&typeof n.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return Sd("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return Sd("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{let i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return Sd("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{let i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return Sd("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{let i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){let r=i.filter(o=>!Ac(o));if(r.length>0)return`sortingOrder must be an array of type (SortDirection | SortDef)[], incorrect items are: ${r.map(o=>typeof o=="string"||o==null?MD(o):JSON.stringify(o))}]`}else if(!Array.isArray(i)||!i.length)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{let i=n.rowModelType??"clientSide";switch(i){case"clientSide":{let{treeDataChildrenField:r,treeDataParentIdField:o,getDataPath:s,getRowId:a}=n;if(!r&&!o&&!s)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(r){if(s)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(s)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{let r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:r}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return Sd("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return Sd("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:i}){return n?.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n?.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{let i=n.renderingMode,r=["default","legacy"];return i&&!r.includes(i)?`renderingMode must be one of [${r.join()}], currently it's ${i}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:n})=>{if(!n)return null;let i=["fitCellContents","fitGridWidth","fitProvidedWidth"],r=n.type;return r!=="fitCellContents"&&r!=="fitGridWidth"&&r!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${i.map(o=>'"'+o+'"').join(", ")}, currently it's ${r}`:r==="fitProvidedWidth"&&typeof n.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${n.width}`:null}}},t={};for(let n of pq)t[n]={expectedType:"boolean"};for(let n of hq)t[n]={expectedType:"number"};return ji(t,e),t},rye=()=>({objectName:"gridOptions",allProperties:[...eye(),...Object.values(F5)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:tye(),validations:iye()}),oye=0,sye=0,NU="__ag_grid_instance",aye=class extends K{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=sye++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Rc,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;let i=OD.has(t);if(i&&!e||!i&&e||!lye(t))return;let r=(o,s)=>{let a=F5[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(s))};if(this.gridReadyFired)r(t,n);else if(t==="gridReady"){r(t,n),this.gridReadyFired=!0;for(let o of this.queueEvents)r(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??dfe[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return _e(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addCommon(n)))}updateGridOptions({options:e,force:t,source:n="api"}){let i={id:oye++,properties:[]},r=[],{gridOptions:o,validation:s}=this;for(let a of Object.keys(e)){let l=Nk.applyGlobalGridOption(a,e[a]);s?.warnOnInitialPropertyUpdate(n,a);let c=t||typeof l=="object"&&n==="api",d=o[a];if(c||d!==l){o[a]=l;let u={type:a,currentValue:l,previousValue:d,changeSet:i,source:n};r.push(u)}}this.validateGridOptions(this.gridOptions),i.properties=r.map(a=>a.type);for(let a of r)tp(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(let n of Object.keys(e)){let i=e[n];if(i==null||i===!1)continue;let r=t[n];typeof r=="function"&&(r=r(e,this.gridOptions,this.beans)),r&&this.assertModuleRegistered(r,n)}}validateGridOptions(e){this.validateOptions(e,nye),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,Uwe),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){let n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||mt(200,ce(T({},this.getModuleErrorParams()),{moduleName:e,reasonOrId:t})),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Bk(),rowModelType:this.get("rowModelType"),isUmd:Vk()}}isModuleRegistered(e){return ek(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[NU]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){let n=t[NU];if(_e(n))return n===this.instanceId;t=t.parentElement}return!1}};function lye(e){return!!F5[e]}var cye=class extends K{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){let{sortSvc:t,rangeSvc:n,gos:i}=this.beans;if(!(Qh(i)?e.altKey:!0))n?.handleColumnSelection(this.column,e);else if(this.column.isSortable()){let o=this.column.isMoving(),a=Date.now()-this.lastMovingChanged<50;o||a||t?.progressSortFromEvent(this.column,e)}}};function dye(e,t){let n={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:n},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:n},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:n},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var uye=class extends pe{constructor(){super(...arguments),this.eFilter=q,this.eFilterButton=q,this.eSortIndicator=q,this.eMenu=q,this.eLabel=q,this.eText=q,this.eColRef=q,this.eSortOrder=q,this.eSortAsc=q,this.eSortDesc=q,this.eSortMixed=q,this.eSortNone=q,this.eSortAbsoluteAsc=q,this.eSortAbsoluteDesc=q,this.isLoadingInnerComponent=!1}refresh(e){let t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){let n=T({},e);ji(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){let{formula:n}=this.beans,i=e.template;return i?i?.trim?i.trim():i:dye(!!n?.active,t)}init(e){this.params=e;let{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:r}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new cye(e.column,this.eLabel)))),n?.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(r,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){let n=vge(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){let{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=ca(t))}addInIcon(e,t,n){let i=$e(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Bt(this.eMenu),this.eMenu=void 0;return}let{gos:e,eMenu:t,params:n}=this,i=Yr(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);let r=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=r,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(r)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){let{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){let{params:t,gos:n,beans:i,eMenu:r,eFilterButton:o}=this,s=t.column,a=Yr(n);if(e&&!a){if(i.menuSvc?.isFilterMenuInHeaderEnabled(s))return t.showFilter(o??r??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(r??o??this.getGui()),!0;return!1}setupSort(){let{sortSvc:e}=this.beans;if(!e)return;let{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));let{eSortIndicator:i,eSortOrder:r,eSortAsc:o,eSortDesc:s,eSortMixed:a,eSortNone:l,eSortAbsoluteAsc:c,eSortAbsoluteDesc:d}=this;i.attachCustomElements(r,o,s,a,l,c,d)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n)}setupColumnRefIndicator(){let{eColRef:e,beans:{editModelSvc:t},params:n}=this;e&&(this.currentRef=n.column.formulaRef,e.textContent=this.currentRef,Ie(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{let i=t?.getEditPositions(),r=!!this.currentRef&&!!i?.some(o=>o.column.isAllowFormula());Ie(e,r)},cellEditingStopped:()=>{Ie(e,!1)}}))}setupFilterIcon(){let{eFilter:e,params:t}=this;if(!e)return;let n=()=>{let i=t.column.isFilterActive();Ie(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){let{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return Bt(t),!1;let r=this.params.column;return this.addInIcon(i,t,r),this.addManagedListeners(r,{filterChanged:n}),n(),!0}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){let{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},hye={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},pye=class extends pe{constructor(){super(hye),this.agOpened=q,this.agClosed=q,this.agLabel=q,this.isLoadingInnerComponent=!1}init(e){let{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&X(89)}workOutInnerHeaderGroupComponent(e,t){let n=bge(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){let{agOpened:e,agClosed:t,params:{columnGroup:n},beans:{colGroupSvc:i}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);let r=l=>{if(Fs(l))return;let c=!n.isExpanded();i.setColumnGroupOpened(n.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(t,r),this.addTouchAndClickListeners(e,r);let o=l=>{ei(l)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:r}),this.updateIconVisibility();let s=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t){this.beans.touchSvc?.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){let{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){let i=n.isExpanded();Ie(e,i),Ie(t,!i)}else Ie(e,!1),Ie(t,!1)}addInIcon(e,t){let n=$e(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){let{agOpened:t,agClosed:n}=this;Ie(t,!1),Ie(n,!1)}}setupLabel(e){let{displayName:t,columnGroup:n}=e,{innerHeaderGroupComponent:i,isLoadingInnerComponent:r}=this,o=i||r;_e(t)&&!o&&(this.agLabel.textContent=ca(t)),this.toggleCss("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},fye={moduleName:"ColumnHeaderComp",version:Je,userComponents:{agColumnHeader:uye},icons:{menu:"menu",menuAlt:"menu-alt"}},gye={moduleName:"ColumnGroupHeaderComp",version:Je,userComponents:{agColumnGroupHeader:pye},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},mye=class extends K{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&X(92)}createTask(e,t,n,i,r=!1){this.verify();let o=n;i&&this.batchFrameworkComps&&(o="f1");let s={task:e,index:t,createOrder:++this.taskCount,deferred:r};this.addTaskToList(this[o],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){let{p1:t,p2:n,f1:i,destroyTasks:r,beans:o}=this,{ctrlsSvc:s,frameworkOverrides:a}=o,l=t.list,c=n.list,d=i.list,u=Date.now(),h=0,p=e<=0,f=s.getScrollFeature();for(;p||h<e;){if(!f.scrollGridIfNeeded()){let C;if(l.length)this.sortTaskList(t),C=l.pop().task;else if(c.length)this.sortTaskList(n),C=c.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(p||h<e)&&!f.scrollGridIfNeeded();){if(d.length)this.sortTaskList(i),C=d.pop().task,C();else break;h=Date.now()-u}}),C=()=>{};else if(r.length)C=r.pop();else break;C()}h=Date.now()-u}l.length||c.length||d.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);ks(this.beans,e)}isQueueEmpty(){return!this.ticking}},vye={moduleName:"AnimationFrame",version:Je,beans:[mye]},Cye=class extends K{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return $e(e,this.beans,t?.column)}},bye=class extends K{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Tu())return;let t=(n,i,r)=>{let{rowCtrl:o,cellCtrl:s}=e.getControlsForEventTarget(r?.target??null);s?.column&&s.dispatchCellContextMenuEvent(r??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,r,o,s)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Tu()||CW("dblclick"))return!1;let i=Date.now(),r=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,r})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){let{gos:t,sortSvc:n,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;let{params:r,eMenu:o,eFilterButton:s}=e,a=new oa(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());let l=e.shouldSuppressMenuHide(),c=l&&_e(o)&&r.enableMenu,d=a;if(c&&(d=new oa(o,!0),e.addDestroyFunc(()=>d.destroy())),r.enableMenu||i?.isHeaderContextMenuEnabled(r.column)){let u=c?"tap":"longTap",h=p=>r.showColumnMenuAfterMouseClick(p.touchStart);e.addManagedListeners(d,{[u]:h}),e.addManagedListeners(a,{longTap:h})}if(r.enableSorting){let u=h=>{let p=h.touchStart.target;l&&(o?.contains(p)||s?.contains(p))||n?.progressSort(r.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:u})}if(r.enableFilterButton&&s){let u=new oa(s,!0);e.addManagedListeners(u,{tap:()=>r.showFilter(s)}),e.addDestroyFunc(()=>u.destroy())}}setupForHeaderGroup(e){let t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){let n=new oa(t.eGridHeader,!0),i=r=>t.showColumnMenuAfterMouseClick(r.touchStart);e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){let i=new oa(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!Tu())return;let i=new oa(t),r=o=>{Qw(this.beans,o.touchEvent)&&n(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(i,{longTap:r}),e.addDestroyFunc(()=>i.destroy())}},wye={moduleName:"Touch",version:Je,beans:[bye]},yye=class extends K{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===$.UP,i=e===$.DOWN,r=e===$.LEFT,o,s,{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:d}=this.beans,{rowPinned:u}=t;if(n||i)u&&d?n?s=0:s=u==="top"?d.getPinnedTopRowCount()-1:d.getPinnedBottomRowCount()-1:s=n?a.getFirstRow():a.getLastRow(),o=t.column;else{let h=l.get("enableRtl");s=t.rowIndex,o=(r!==h?c.allCols:[...c.allCols].reverse()).find(f=>this.isCellGoodToFocusOn({rowIndex:s,rowPinned:null,column:f}))}return o?{rowIndex:s,rowPinned:u,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case $.UP:n=this.getCellAbove(n);break;case $.DOWN:n=this.getCellBelow(n);break;case $.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case $.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,X(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n,{pinnedRowModel:i,rowModel:r}=this.beans;switch(e.rowPinned){case"top":n=i?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(e.rowIndex);break;default:n=r.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;let t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;let t=this.rowSpanSvc?.getCellEnd(e)??e,n=Vr(this.beans,t,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;let t=this.rowSpanSvc?.getCellStart(e)??e,n=la(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let{visibleCols:t,pagination:n}=this.beans,i=t.allCols,r=e.rowIndex,o=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=i[0];let a=Vr(this.beans,e,!0);if(jt(a)||!a.rowPinned&&!(n?.isRowInPage(a.rowIndex)??!0))return null;r=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:r,column:s,rowPinned:o}}getNextTabbedCellBackwards(e){let{beans:t}=this,{visibleCols:n,pagination:i}=t,r=n.allCols,o=e.rowIndex,s=e.rowPinned,a=n.getColBefore(e.column);if(!a){a=Qe(r);let l=la(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(jt(l)||!l.rowPinned&&!(i?.isRowInPage(l.rowIndex)??!0))return null;o=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:s}}isSuppressNavigable(e,t){let{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){let i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function Sye(e){return e.focusSvc.getFocusedCell()}function xye(e){return e.focusSvc.clearFocusedCell()}function Eye(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function Dye(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function _ye(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function Aye(e,t,n=!1){let i=e.headerNavigation?.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var Rye=class extends K{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new fq,this.rowValidations=new gq,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;let n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;let n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){let i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;let n=this.getEditRow(e),i=e.pinnedSibling,r=t&&i&&this.getEditRow(i);if(!n&&!r)return;let o=Object.assign({},e.data),s=(a,l)=>a.forEach(({pendingValue:c},d)=>{c!==Tl&&(l[d.getColId()]=c)});return n&&s(n,o),r&&s(r,o),o}getEdit(e,t){let n=this._getEdit(e);return t&&n?T({},n):n}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;let t=new Map;return this.edits.forEach((n,i)=>{let r=new Map;n.forEach((l,a)=>{var c=l,{editorState:o}=c,s=so(c,["editorState"]);return r.set(a,T({},s))}),t.set(i,r)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{let i=new Map;t.forEach((r,o)=>i.set(o,T({},r))),this.edits.set(n,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);let n=this._getEdit(e),i=Object.assign(T(T({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}},n),t));return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){let{rowNode:t,column:n}=e;if(t)if(n){let i=this._getEdit(e);i&&(i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed")}else this.getEditRow(t)?.forEach(i=>{i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];let t=[];return(e??this.edits).forEach((n,i)=>{for(let o of n.keys()){let r=n.get(o),{editorState:s}=r,a=so(r,["editorState"]);t.push(T({rowNode:i,column:o},a))}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;let{rowNode:n,column:i}=e,{withOpenEditor:r}=t;if(n){let o=this.getEditRow(n,t);return o?i?r?this.getEdit(e)?.state==="editing":o.has(i)??!1:o.size!==0?r?Array.from(o.values()).some(({state:s})=>s==="editing"):!0:!1:!1}return r?this.getEditPositions().some(({state:o})=>o==="editing"):this.edits.size>0}start(e){let t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:Tl,sourceValue:this.beans.valueSvc.getValue(i,n,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(let e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},fq=class{constructor(){this.cellValidations=new Map}getCellValidation(e){let{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){let{rowNode:n,column:i}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,t)}clearCellValidation(e){let{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},gq=class{constructor(){this.rowValidations=new Map}getRowValidation(e){let{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function I5(e,t={}){let{rowIndex:n,rowId:i,rowCtrl:r,rowPinned:o}=t;if(r)return r;let{rowModel:s,rowRenderer:a}=e,{rowNode:l}=t;return l||(i?l=Mve(e,i,o):n!=null&&(l=s.getRow(n))),a.getRowCtrls(l?[l]:[])?.[0]}function Xi(e,t={}){let{cellCtrl:n,colId:i,columnId:r,column:o}=t;if(n)return n;let s=e.colModel.getCol(i??r??wk(o)),a=t.rowCtrl??I5(e,t),l=a?.getCellCtrl(s)??void 0;if(l)return l;let c=t.rowNode??a?.rowNode;if(c)return e.rowRenderer.getCellCtrls([c],[s])?.[0]}function BU(e){let{editSvc:t}=e;t?.isBatchEditing()?(Zh(e,{persist:!0}),t0(e)):t?.stopEditing(void 0,{source:"api"})}function Fye(e,t,n){let{gos:i,popupSvc:r}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;let o=s=>{let a=s.relatedTarget;if(ak(a)===null){BU(t);return}let l=n.some(c=>c.contains(a))&&i.isElementInThisInstance(a);l||(l=!!r&&(r.getActivePopups().some(c=>c.contains(a))||r.isElementWithinCustomPopup(a))),l||BU(t)};for(let s of n)e.addManagedElementListeners(s,{focusout:o})}function wk(e){if(e)return typeof e=="string"?e:e.getColId()}var Tl=Symbol("unedited");function mq(e,t={}){let n=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(let r of i){let o=r.comp?.getCellEditor();o&&n.push({ctrl:r,editor:Lu(o)})}return n}var Mye=(e,t={})=>mq(e,t).map(n=>n.editor);function Iye(e,t,n,i,r,o){t.length===0&&n?.rowNode&&n?.column&&c0(e,n,{key:i,event:r,cellStartedEdit:o});let{valueSvc:s,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:d}=n??{};for(let u of t){let{rowNode:h,column:p}=u,f=Xi(e,u);if(!f){if(h&&p){let C=s.getValue(p,h,void 0,"api"),x=(n?.rowNode===h&&n?.column===p&&i||void 0)??a?.getCellDataValue(u,!1)??s.getValueForDisplay({column:p,node:h})?.value??C??Tl;l?.setEdit(u,{pendingValue:d0(e,x,!1,p),sourceValue:C,state:"editing"})}continue}let g=o&&c===f.rowNode&&f.column===d;c0(e,{rowNode:c,column:f.column},{key:g?i:null,event:g?r:null,cellStartedEdit:g&&o})}}function _d({pendingValue:e,sourceValue:t}){return e===Tl&&(e=t),e!==t}function c0(e,t,n){let{key:i,event:r,cellStartedEdit:o,silent:s}=n??{},{editModelSvc:a,editSvc:l,gos:c,userCompFactory:d}=e,u=Xi(e,t),h=u?.comp?.getCellEditor(),p=Cq(e,t,i,o&&!s),f=t.column.isAllowFormula(),g=a?.getEdit(t),C=p.value??g?.sourceValue;if(h){a?.setEdit(t,{editorValue:d0(e,C,!0,t.column),state:"editing"}),h.refresh?.(p);return}let m=t.column.getColDef(),w=c$(d,f?ce(T({},m),{cellEditor:"agTextCellEditor"}):m,p);if(!w)return;let{popupFromSelector:x,popupPositionFromSelector:D}=w,F=x??!!m.cellEditorPopup,L=D??m.cellEditorPopupPosition;if(bq(w.params,r),!u)return;let{rangeFeature:V,rowCtrl:B,comp:P,onEditorAttachedFuncs:U}=u;a?.setEdit(t,{editorValue:d0(e,C,!0,t.column),state:"editing"}),u.editCompDetails=w,U.push(()=>V?.unsetComp()),P?.setEditDetails(w,F,L,c.get("reactiveCustomComponents")),B?.refreshRow({suppressFlash:!0});let A=a?.getEdit(t,!0);!s&&!A?.editorState?.cellStartedEditing&&(l?.dispatchCellEvent(t,r,"cellEditingStarted",{value:C}),a?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}function vq(e,t,n){let i={editorValueExists:!1};if(T5(e)&&(t.getValidationErrors?.()?.length??0)>0||n?.isCancelling)return i;if(n?.isStopping){let o=t?.isCancelAfterEnd?.();if(o)return ce(T({},i),{isCancelAfterEnd:o})}return{editorValue:t.getValue(),editorValueExists:!0}}function Cq(e,t,n,i){let{valueSvc:r,gos:o,editSvc:s}=e,a=e.gos.get("enableGroupEdit"),l=Xi(e,t),c=t.rowNode?.rowIndex??void 0,d=s?.isBatchEditing(),u=e.colModel.getCol(t.column.getId()),{rowNode:h,column:p}=t,f=l.comp?.getCellEditor(),g=s?.getCellDataValue(t,!1),C=g===void 0?f?vq(e,f)?.editorValue:void 0:g,m=C===Tl?r.getValueForDisplay({column:u,node:h})?.value:C,w=a?C:m;return p.isAllowFormula()&&e.formula?.isFormula(w)&&(w=e.formula?.normaliseFormula(w,!0)??w),Oe(o,{value:w,eventKey:n??null,column:p,colDef:p.getColDef(),rowIndex:c,node:h,data:h.data,cellStartedEdit:i??!1,onKeyDown:l?.onKeyDown.bind(l),stopEditing:x=>{s.stopEditing(t,{source:d?"ui":"api",suppressNavigateAfterEdit:x}),JD(e,t)},eGridCell:l?.eGui,parseValue:x=>r.parseValue(u,h,x,l?.value),formatValue:l?.formatValue.bind(l),validate:()=>{s?.validateEdit()}})}function ND(e,t){let{editModelSvc:n}=e;n?.getEditMap().forEach((i,r)=>{i.forEach((o,s)=>{!t&&(o.state==="editing"||o.pendingValue===Tl)||!_d(o)&&(o.state!=="editing"||t)&&n?.removeEdits({rowNode:r,column:s})})})}function Tye(e,t){let n=t.comp?.getCellEditor();if(!n?.refresh)return;let{eventKey:i,cellStartedEdit:r}=t.editCompDetails.params,{column:o}=t,s=Cq(e,t,i,r),a=o.getColDef(),l=c$(e.userCompFactory,a,s);n.refresh(bq(l.params,i))}function bq(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function Zh(e,t){for(let n of e.editModelSvc?.getEditPositions()??[]){let i=Xi(e,n);if(!i)continue;let r=i.comp?.getCellEditor();if(!r)continue;let{editorValue:o,editorValueExists:s,isCancelAfterEnd:a}=vq(e,r,t);a&&e.editModelSvc?.setEdit(n,{editorState:{isCancelAfterEnd:a}}),BD(e,n,o,void 0,!s,t)}}function BD(e,t,n,i,r,o){let{editModelSvc:s,valueSvc:a}=e;if(!s)return;let{rowNode:l,column:c}=t;if(!(l&&c))return;let d=s.getEdit(t,!0);if(!d?.sourceValue){let u={sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:d?d0(e,d.editorValue,!1,c):Tl};o?.persist&&(u.state="changed"),d=s.setEdit(t,u)}s.setEdit(t,{editorValue:r?d0(e,d.sourceValue,!0,c):n}),o?.persist&&Pye(e,t)}function d0(e,t,n,i){let{formula:r}=e;return i.isAllowFormula()&&r?.isFormula(t)?r?.normaliseFormula(t,n)??t:t}function Pye(e,t){let{editModelSvc:n}=e,i=n?.getEdit(t,!0);n?.setEdit(t,{pendingValue:d0(e,i?.editorValue,!1,t.column)})}function t0(e,t,n){t||(t=e.editModelSvc?.getEditPositions());for(let i of t??[])JD(e,i,n)}function JD(e,t,n){let i=e.gos.get("enableGroupEdit"),{editModelSvc:r}=e,o=Xi(e,t),s=r?.getEdit(t,!0);if(!o){s&&r?.setEdit(t,{state:"changed"});return}let{comp:a}=o;if(a&&!a.getCellEditor()){if(o?.refreshCell(),s){r?.setEdit(t,{state:"changed"});let c=i?VU(n,s):{valueChanged:!1,newValue:void 0,oldValue:s.sourceValue};GU(e,t,c,n)}return}if(T5(e)){let c=a?.getCellEditor()?.getValidationErrors?.(),d=r?.getCellValidationModel();c?.length?d?.setCellValidation(t,{errorMessages:c}):d?.clearCellValidation(t)}r?.setEdit(t,{state:"changed"}),a?.setEditDetails(),a?.refreshEditStyles(!1,!1),o?.refreshCell({force:!0,suppressFlash:!0});let l=r?.getEdit(t);if(l&&l.state==="changed"){let c=i?VU(n,l):{valueChanged:_d(l)&&!n?.cancel,newValue:n?.cancel||l.editorState.isCancelAfterEnd?void 0:l?.editorValue??s?.pendingValue,oldValue:l?.sourceValue};GU(e,t,c,n)}}function VU(e,t){return e?.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:_d(t),oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function GU(e,t,n,{silent:i,event:r}={}){let{editSvc:o,editModelSvc:s}=e,a=s?.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!i&&!c&&(o?.dispatchCellEvent(t,r,"cellEditingStopped",n),s?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function T5(e){let{gos:t,colModel:n}=e,i=!!t.get("getFullRowEditValidationErrors"),r=n.getColumnDefs()?.filter(s=>s.editable).some(({cellEditorParams:s})=>{let{minLength:a,maxLength:l,getValidationErrors:c,min:d,max:u}=s||{};return a!==void 0||l!==void 0||c!==void 0||d!==void 0||u!==void 0}),o=e.gridApi.getCellEditorInstances().some(s=>s.getValidationElement||s.getValidationErrors);return r||i||o}function fg(e,t){if(!(t||T5(e)))return;let n=mq(e),i=new fq,{ariaAnnounce:r,localeSvc:o,editModelSvc:s,gos:a}=e,l=a.get("editType")==="fullRow",d=wW(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(let h of n){let{ctrl:p,editor:f}=h,{rowNode:g,column:C}=p,m=f.getValidationErrors?.()??[],w=f.getValidationElement?.(!1)||!f.isPopup?.()&&p.eGui;if(w){let x=m!=null&&m.length>0,D=x?m.join(". "):"";Rk(w,x),x&&r.announceValue(`${d} ${m}`,"editorValidation"),w instanceof HTMLInputElement?w.setCustomValidity(D):w.classList.toggle("invalid",x)}m?.length>0&&i.setCellValidation({rowNode:g,column:C},{errorMessages:m})}Zh(e,{persist:!1}),s?.setCellValidationModel(i);let u=new Set;for(let{ctrl:h}of n)u.add(h.rowCtrl);if(l){let h=kye(e);s?.setRowValidationModel(h)}for(let h of u.values()){h.rowEditStyleFeature?.applyRowStyles();for(let p of h.getAllCellCtrls())p.tooltipFeature?.refreshTooltip(!0),p.editorTooltipFeature?.refreshTooltip(!0),p.editStyleFeature?.applyCellStyles?.()}}var kye=e=>{let t=new gq,n=e.gos.get("getFullRowEditValidationErrors"),i=e.editModelSvc?.getEditMap();if(!i)return t;for(let r of i.keys()){let o=i.get(r);if(!o)continue;let s=[],{rowIndex:a,rowPinned:l}=r;for(let d of o.keys()){let u=o.get(d);if(!u)continue;let{editorValue:h,pendingValue:p,sourceValue:f}=u,g=h??(p===Tl?void 0:p)??f;s.push({column:d,colId:d.getColId(),rowIndex:a,rowPinned:l,oldValue:f,newValue:g})}let c=n?.({editorsState:s})??[];c.length>0&&t.setRowValidation({rowNode:r},{errorMessages:c})}return t};function Lye(e){fg(e,!0);let t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;let n=[];return t.forEach((i,r)=>{i.forEach(({errorMessages:o},s)=>{n.push({column:s,rowIndex:r.rowIndex,rowPinned:r.rowPinned,messages:o??null})})}),n}function Oye(e,t,n,{rowNode:i,column:r},o){return Oe(e.gos,{type:n,node:i,data:i.data,value:o,column:r,colDef:r.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function Nye(e,t=!1){return e===$.DELETE?!0:!t&&e===$.BACKSPACE?h$():!1}var Bye=class extends K{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){let t=e.key;switch(t){case $.ENTER:this.onEnterKeyDown(e);break;case $.F2:this.onF2KeyDown(e);break;case $.ESCAPE:this.onEscapeKeyDown(e);break;case $.TAB:this.onTabKeyDown(e);break;case $.BACKSPACE:case $.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case $.DOWN:case $.UP:case $.RIGHT:case $.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){let{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{let r=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(e,t,r,!0)}e.preventDefault()}}onShiftRangeSelect(e){let{rangeSvc:t,navigation:n}=this.beans;if(!t)return;let i=t.extendLatestRangeInDirection(e);i&&(e.key===$.LEFT||e.key===$.RIGHT?n?.ensureColumnVisible(i.column):n?.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:r}=this,{gos:o,rangeSvc:s,eventSvc:a,editSvc:l}=i;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),Nye(e,o.get("enableCellEditingOnBackspace"))&&!l?.isEditing(n,{withOpenEditor:!0})){if(s&&Vo(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let{column:c}=n,d=this.beans.valueSvc.getDeleteValue(c,r);r.setDataValue(c,d,"cellClear")}}else l?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){let{cellCtrl:t,beans:n}=this,{editSvc:i,navigation:r}=n,o=i?.isEditing(t,{withOpenEditor:!0}),s=t.rowNode,a=i?.isRowEditing(s,{withOpenEditor:!0}),l=c=>{i?.startEditing(c,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){i?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(fg(n),i?.checkNavWithValidation(void 0,e)==="block-stop")return;i?.isEditing(t,{withOpenEditor:!0})?i?.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?i?.stopEditing({rowNode:s},{event:e,source:"edit"}):l(t)}else if(n.gos.get("enterNavigatesVertically")){let c=e.shiftKey?$.UP:$.DOWN;r?.navigateToNextCell(null,c,t.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===$.ENTER}onF2KeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(fg(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),setTimeout(()=>{n?.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){let n=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:r}=this;if(n||i?.isEditing(r,{withOpenEditor:!0}))return;if(e.key===$.SPACE)this.onSpaceKeyDown(e);else if(i?.isCellEditable(r,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(r))return;i?.startEditing(r,{startedEdit:!0,event:e,source:"api"}),!r.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){let{gos:t,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&ss(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,i,"spaceKey"),e.preventDefault()}},Vye=class extends K{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!Fs(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;let{eventSvc:t,rangeSvc:n,editSvc:i,editModelSvc:r,frameworkOverrides:o,gos:s}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:d,rowNode:u}=l,h=kD(s,c,u,e);n&&a&&!h&&n.getCellRangeCount(d)>1&&n.intersectLastRange(!0);let p=l.createEvent(e,"cellClicked");p.isEventHandlingSuppressed=h,t.dispatchEvent(p);let f=c.getColDef();if(f.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{f.onCellClicked(p)})},0),!h&&r?.getState(l)!=="editing"){let g=i?.isEditing(),C=r?.getCellValidationModel().getCellValidationMap().size??0,m=r?.getRowValidationModel().getRowValidationMap().size??0;if(g&&(C>0||m>0))return;i?.shouldStartEditing(l,e)?i?.startEditing(l,{event:e}):i?.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?i?.stopEditing(l,{event:e,source:"edit"}):i?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventSvc:r,frameworkOverrides:o,editSvc:s,editModelSvc:a,gos:l}=n,c=kD(l,i.column,i.rowNode,e),d=t.getColDef(),u=i.createEvent(e,"cellDoubleClicked");if(u.isEventHandlingSuppressed=c,r.dispatchEvent(u),typeof d.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{d.onCellDoubleClicked(u)})},0),!c&&s?.shouldStartEditing(i,e)&&a?.getState(i)!=="editing"){let h=s?.isEditing(),p=a?.getCellValidationModel().getCellValidationMap().size??0,f=a?.getRowValidationModel().getRowValidationMap().size??0;if(h&&(p>0||f>0))return;s?.startEditing(i,{event:e})}}onMouseDown(e){let{shiftKey:t}=e,n=e.target,{cellCtrl:i,beans:r}=this,{eventSvc:o,rangeSvc:s,rowNumbersSvc:a,focusSvc:l,gos:c,editSvc:d}=r,{column:u,rowNode:h,cellPosition:p}=i,f=kD(c,u,h,e),g=()=>{let x=i.createEvent(e,"cellMouseDown");x.isEventHandlingSuppressed=f,o.dispatchEvent(x)};if(f){g();return}if(this.isRightClickInExistingRange(e))return;let C=s&&!s.isEmpty(),m=this.containsWidget(n),w=Or(u);if(!(a&&w&&!a.handleMouseDownOnCell(p,e))){if(!t||!C){let x=d?.isEditing(i),F=c.get("enableCellTextSelection")&&e.defaultPrevented,L=(Od()||F)&&!x&&!Ww(n)&&!m;i.focusCell(L,e)}if(t&&C&&!l.isCellFocused(p)){e.preventDefault();let x=l.getFocusedCell();if(x){let{column:D,rowIndex:F,rowPinned:L}=x;d?.isEditing(x)&&d?.stopEditing(x),l.setFocusedCell({column:D,rowIndex:F,rowPinned:L,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}m||(s?.handleCellMouseDown(e,p),g())}}isRightClickInExistingRange(e){let{rangeSvc:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=fy(this.beans,e);if(n&&i)return!0}return!1}containsWidget(e){return ng(e,"ag-selection-checkbox",3)||ng(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}},Gye=class extends K{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){let t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){let t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();Hr(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let r=e,o=e.getPinned();for(let s=0;r&&s<n&&(i.push(r),r=this.beans.visibleCols.getColAfter(r),!(!r||jt(r)||o!==r.getPinned()));s++);}return i}onLeftChanged(){if(!this.eSetLeft)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Qe(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;let{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=fo(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},Hye="ag-cell",zye="ag-cell-auto-height",jye="ag-cell-normal-height",Uye="ag-cell-focus",Wye="ag-cell-first-right-pinned",$ye="ag-cell-last-left-pinned",qye="ag-cell-not-inline-editing",Kye="ag-cell-wrap-text",Yye=0,n0=class extends K{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.formulaTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;let{colId:r}=e;this.instanceId=r+"-"+Yye++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){let{beans:e}=this;this.positionFeature=new Gye(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this),this.mouseListener=new Vye(this,e,this.column),this.keyboardListener=new Bye(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature(),this.enableFormulaTooltipFeature();let{rangeSvc:t}=e;t&&Vo(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(this)),Or(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature(),this.disableFormulaTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}enableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.tooltipSvc?.setupFormulaTooltip(this)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}disableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.context.destroyBean(this.formulaTooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),fg(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,i,r,o,s){if(this.comp=e,this.eGui=t,this.printLayout=r,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0})?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(let a of this.onCompAttachedFuncs)a();this.onCompAttachedFuncs=[]}}checkFormulaError(){let e=!!this.beans.formula?.getFormulaError(this.column,this.rowNode);this.eGui.classList.toggle("formula-error",e),this.formulaTooltipFeature?.refreshTooltip(),e?this.disableTooltipFeature():this.enableTooltipFeature()}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){let{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:r}=e,o=t.getColDef(),s=this.createCellRendererParams();s.deferRender=!0;let a=tU(n,o,s);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l,c=new tt(u=>{l=u}),[d]=this.addManagedListeners(r,{bodyScrollEnd:()=>{l(),d()}});return{loadingComp:a,onReady:c}}return{loadingComp:a,onReady:tt.resolve()}}showValue(e,t){let{beans:n,column:i,rowNode:r,rangeFeature:o}=this,{userCompFactory:s}=n,a=this.getValueToDisplay(),l,c=r.stub&&r.groupData?.[i.getId()]==null,d=i.getColDef();if(c||this.isCellRenderer()){let u=this.createCellRendererParams();!c||Or(i)?l=ip(s,d,u):l=tU(s,d,u)}if(!l&&!c&&n.findSvc?.isMatch(r,i)){let u=this.createCellRendererParams();l=ip(s,ce(T({},i.getColDef()),{cellRenderer:"agFindCellRenderer"}),u)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(r,{checkSiblings:!0})){let u=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});u&&(u.compDetails?l=u.compDetails:u.valueToDisplay&&(a=u.valueToDisplay))}this.comp.setRenderDetails(l,a,e),this.customRowDragComp?.refreshVisibility(),!t&&o&&ks(n,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer",n="";return t&&(n=" ag-allow-overflow"),`${e}${n}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&My(this.rowNode))&&!!e}isCheckboxSelection(e){let{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,i=o0(t),r=Ld(this.column);return n==="custom"&&i!=="selectionColumn"&&r?!1:e.checkboxSelection||r&&typeof t=="object"&&Xh(t)}refreshShouldDestroy(){let e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||r}onPopupEditorClosed(){let{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){let{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){let{value:e,valueFormatted:t,column:n,rowNode:i,comp:r,eGui:o,beans:{valueSvc:s,gos:a,editSvc:l}}=this;return Oe(a,{value:e,valueFormatted:t,getValue:()=>s.getValueForDisplay({column:n,node:i}).value,setValue:d=>l?.setDataValue({rowNode:i,column:n},d)||i.setDataValue(n,d),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:r.getParentOfValue(),registerRowDragger:(d,u,h,p)=>this.registerRowDragger(d,u,p),setTooltip:(d,u)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,u),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){let{editSvc:t,comp:n}=this;!n?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){let{editStyleFeature:i,customStyleFeature:r,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:s,filterManager:a},column:l,comp:c,suppressRefreshCell:d,tooltipFeature:u}=this;if(d)return;let{field:h,valueGetter:p,showRowGroup:f,enableCellChangeFlash:g}=l.getColDef(),C=h==null&&p==null&&f==null,m=e||C||n,w=!!c,x=this.updateAndFormatValue(w),D=m||x;if(w){if(D){this.showValue(!!n,!1);let F=a?.isSuppressFlashingCellsBecauseFiltering();!t&&!F&&g&&s?.flashCell(this),i?.applyCellStyles?.(),r?.applyUserStyles(),r?.applyClassesFromColDef(),o?.applyRowStyles(),this.checkFormulaError()}u?.refreshTooltip(),r?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let t=this.value,n=this.valueFormatted,{value:i,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0});return this.value=i,this.valueFormatted=r,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){let n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){let t=this.eGui;cg(this.beans.gos,t,XD,this),e.addDestroyFunc(()=>cg(this.beans.gos,t,XD,null))}createEvent(e,t){let{rowNode:n,column:i,value:r,beans:o}=this;return Oye(o,e,t,{rowNode:n,column:i},r)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:e,column:t,beans:n}=this;q$(e,t,n.visibleCols)}refreshAriaColIndex(){let e=this.beans.visibleCols.getAriaColIndex(this.column);l_(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){let n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell(ce(T({},this.getFocusedCellPosition()),{forceBrowserFocus:e,sourceEvent:t}))}restoreFocus(e=!1){let{beans:{editSvc:t,focusSvc:n},comp:i}=this;if(!i||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;let r=()=>{if(!this.isAlive())return;let o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(r,0);return}r()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){let t=this.eGui;t&&(Or(this.column)&&(e=!0),sa(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let e=this.column.isFirstRightPinned();this.comp.toggleCss(Wye,e)}onLastLeftPinnedChanged(){if(!this.comp)return;let e=this.column.isLastLeftPinned();this.comp.toggleCss($ye,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){let e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){let{beans:t}=this;if(T_(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}let n=this.isCellFocused(),i=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(Uye,n),n&&e?.forceBrowserFocus){let r=this.comp.getFocusableElement();if(i){let o=Rs(r,null,!0);o.length&&(r=o[0])}r.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:hi(t),column:this.column}}applyStaticCssClasses(){let{comp:e}=this;e.toggleCss(Hye,!0),e.toggleCss(qye,!0);let t=this.column.isAutoHeight()==!0;e.toggleCss(zye,t),e.toggleCss(jye,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(Kye,e)}dispatchCellContextMenuEvent(e){let t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(wt(this.beans))??!1}createSelectionCheckbox(){let e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}let i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(e,t,n){let i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){for(let e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function P5(e,t,n,i,r,o){if(n==null&&t==null)return;let s={},a={},l=(c,d)=>{for(let u of c.split(" "))u.trim()!=""&&d(u)};if(n){let c=Object.keys(n);for(let d=0;d<c.length;d++){let u=c[d],h=n[u],p;typeof h=="string"?p=e?e.evaluate(h,i):!0:typeof h=="function"&&(p=h(i)),l(u,f=>{p?s[f]=!0:a[f]=!0})}}if(t&&o)for(let c of Object.keys(t))l(c,d=>{s[d]||(a[d]=!0)});o&&Object.keys(a).forEach(o),Object.keys(s).forEach(r)}function HU(e){if(e.group)return e.level;let t=e.parent;return t?t.level+1:0}var Zye=class extends K{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){let n=this.gos,i=s=>{if(typeof s=="string")e.push(s);else if(Array.isArray(s))for(let a of s)e.push(a)},r=n.get("rowClass");r&&i(r);let o=n.getCallback("getRowClass");if(o){let s={data:t.data,node:t,rowIndex:t.rowIndex},a=o(s);i(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){let{gos:i,expressionSvc:r}=this.beans,o=Oe(i,{data:e.data,node:e,rowIndex:e.rowIndex});P5(r,void 0,i.get("rowClassRules"),o,t,n)}processStylesFromGridOptions(e){let t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle"),r;if(i){let o={data:e.data,node:e,rowIndex:e.rowIndex};r=i(o)}if(r||n)return Object.assign({},n,r)}},Xye=0,e_=class extends K{constructor(e,t,n,i,r){super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=r,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Xye++,this.rowId=Zr(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=HU(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Zr(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){let{context:r,focusSvc:o}=this.beans;i=vy(this,r,i);let s={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(s),this.updateGui(n,s),this.initialiseRowComp(s);let a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();let d=this.fullWidthGui?.element;d&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let t=e?"none":"";for(let n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){let t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),ss(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=e.rowComp,i=this.getInitialRowClasses(e.containerType);for(let r of i)n.toggleCss(r,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Fi(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),cg(t,e.element,QD,this),e.compBean.addDestroyFunc(()=>cg(t,e.element,QD,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){let t=Zr(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){let{containerType:t}=e;this.slideInAnimation[t]&&(Jw(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(Jw(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){let t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;let n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){let t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){let{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,r=!!e||!i.isPinningLeft(),o=!!t,s=!!n||!i.isPinningRight();return r&&o&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){let{rowNode:e,gos:t,beans:{colModel:n}}=this,i=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),r=this.isNodeFullWidthCell(),o=t.get("masterDetail")&&e.detail,s=n.isPivotMode(),a=C_(t,e,s);i?this.rowType="FullWidthLoading":o?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":a?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;let{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new n0(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){let i={list:[],map:{}},r=(c,d,u)=>{u!=null?i.list.splice(u,0,d):i.list.push(d),i.map[c]=d},o=[];for(let c of t){let d=c.getInstanceId(),u=e.map[d];u&&!this.isCorrectCtrlForSpan(u)&&(u.destroy(),u=void 0),u||(u=this.getNewCellCtrl(c)),u&&r(d,u)}for(let c of e.list){let d=c.column.getInstanceId();if(i.map[d]!=null)continue;!this.isCellEligibleToBeRemoved(c,n)?o.push([d,c]):c.destroy()}if(o.length)for(let[c,d]of o){let u=i.list.findIndex(p=>p.column.getLeft()>d.column.getLeft()),h=u===-1?void 0:Math.max(u-1,0);r(c,d,h)}let{focusSvc:s,visibleCols:a}=this.beans,l=s.getFocusedCell();if(l&&l.column.getPinned()==n){let c=l.column.getInstanceId();if(!i.map[c]&&a.allCols.includes(l.column)){let u=this.createFocusedCellCtrl();if(u){let h=i.list.findIndex(f=>f.column.getLeft()>u.column.getLeft()),p=h===-1?void 0:Math.max(h-1,0);r(c,u,p)}}}return i}createFocusedCellCtrl(){let{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;let i=t?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(let t of this.allRowGuis){let n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");let r=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){let{column:r}=e;if(r.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;let{visibleCols:o,editSvc:s}=this.beans,a=s?.isEditing(e),l=e.isCellFocused();return a||l?!(o.allCols.indexOf(r)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||po(this.gos,"print")}listenOnDomOrder(e){let t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;let t=_e(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),r=n.isPinningRight();if(t){let{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}else{let{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(s,a)=>s?s.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(s.element,a).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),r=e(this.rightGui,"right");return t&&n&&i&&r}addListeners(){let{beans:e,gos:t,rowNode:n}=this,{expansionSvc:i,eventSvc:r,context:o,rowSpanSvc:s}=e;this.addManagedListeners(this.rowNode,T({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},i?.getRowExpandedListeners(this)??{})),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(r,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:a})=>{a&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(let l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(let e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(let t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(let e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(let n of this.getAllCellCtrls())n.refreshCell(e);for(let n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",i=t==="inside",r=t==="below",o=t!=="none",s=n||r,a=this.rowNode.uiLevel,l=s&&a>0,c=l?a.toString():"0";for(let d of this.allRowGuis){let u=d.rowComp;u.toggleCss("ag-row-highlight-above",n),u.toggleCss("ag-row-highlight-inside",i),u.toggleCss("ag-row-highlight-below",r),u.toggleCss("ag-row-highlight-indent",l),o?d.element.style.setProperty("--ag-row-highlight-level",c):d.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){let e=this.rowNode.dragging;for(let t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:hi(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let t=this.findFullWidthInfoForEvent(e);if(!t)return;let{rowGui:n,column:i}=t;if(!(n.element===e.target))return;let s=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),d={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:c?.column??i};l?.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Fs(e))return;let t=this.allRowGuis.find(a=>a.element.contains(e.target)),n=t?t.element:null,i=n===e.target,r=wt(this.beans),o=!1;n&&r&&(o=n.contains(r)&&r.classList.contains("ag-cell"));let s=null;!i&&!o&&(s=Wi(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(t=>Dr(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){let t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(let n of this.allRowGuis)sa(n.element,"tabindex",t)}onFullWidthRowFocused(e){let t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1,i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{let o=this.beans.colModel.getCol(e?.column)?.pinned;o?i=o==="right"?this.rightGui?.element:this.leftGui?.element:i=this.centerGui?.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&e?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){let n={list:[],map:{}};for(let i of e.list)i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){let{rowNode:n}=this;return Oe(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){let n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(Fs(e))return;let t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;let t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){let{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=ng(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;let{rangeSvc:t,focusSvc:n}=this.beans;t?.removeAllCellRanges();let i=this.findFullWidthInfoForEvent(e);if(!i)return;let{rowGui:r,column:o}=i,s=r.element,a=e.target,l=this.rowNode,c=e.defaultPrevented||Od();s&&s.contains(a)&&Ww(a)&&(c=!1),n.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){let{gos:t,rowNode:n}=this;if(this.isFullWidth()){let r=this.findFullWidthRowGui(e.target);return rve(t,r?.rowComp.getFullWidthCellRendererParams(),n,e)}let i=Ay(t,e.target);return i!=null&&kD(t,i.column,n,e)}onRowClick(e){if(Fs(e)||this.lastMouseDownOnDragger)return;let n=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:r}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=n,i.dispatchEvent(o),!n&&r?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){let{gos:n,rowNode:i}=this,r=Oe(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,a,l,c)=>this.addFullWidthRowDragging(s,a,l,c),setTooltip:(s,a)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(s,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return xge(o,r);case"FullWidthGroup":{let{value:s,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0});return r.value=s,r.valueFormatted=a,Sge(o,r)}case"FullWidthLoading":return yge(o,r);default:return wge(o,r)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){let{rowDragSvc:r,context:o}=this.beans;if(!r||!this.isFullWidth())return;let s=r.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(s,o),this.addDestroyFunc(()=>{this.destroyBean(s,o)})}onUiLevelChanged(){let e=HU(this.rowNode);if(this.rowLevel!=e){let t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(let i of this.allRowGuis)i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(let n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(let n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(let t of e)for(let n of this.allRowGuis)n.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){let t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:r}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),r.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),n&&o.push("ag-full-width-row"),r.expansionSvc?.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");let{rowStyleSvc:s}=r;return s&&(s.processClassesFromGridOptions(o,i),s.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),n&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;let{element:t,compBean:n}=e,{rowNode:i,beans:r,gos:o}=this;n.addManagedListeners(t,{pointerenter:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{!r.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){let t=e?[e]:this.allRowGuis.map(n=>n.element);for(let n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){let t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){if(e)t(e);else for(let n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=m_(this.gos)?Nr(this.beans,this.rowNode).height:void 0,o=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(e,s=>{s.element.style.height=`${t}px`,o&&s.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;let{rowNode:t}=this;if(!e&&Xv(this.gos)&&!t.sticky)if(t.rowTop!=null){let r=this.roundRowTopToBounds(t.rowTop);this.setRowTop(r)}else for(let r of this.allRowGuis)r.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(wt(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;let e=t=>{for(let n of t.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){let e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&_e(e)){let t=this.applyPaginationOffset(e),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(r)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t=this.rowNode,n;if(t.sticky)n=t.stickyRowTop;else{let i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,r=this.applyPaginationOffset(i);n=t.isRowPinned()?r:this.beans.rowContainerHeight.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(e){for(let t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(let i of this.getAllCellCtrls())i.column==e&&(n=i);if(n!=null||t)return n;for(let i of this.getAllCellCtrls())i?.getColSpanningList().indexOf(e)>=0&&(n=i);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){let t=this.rowNode.getRowIndexString();if(t===null)return;let n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",i),o.rowComp.toggleCss("ag-row-odd",!i),r0(o.element,r)})}},Qye=class extends K{constructor(){super(),this.beanName="navigation",this.onPageDown=Kj(this.onPageDown,100),this.onPageUp=Kj(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,r=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,s=p5(this.gos,e),a=!1;switch(n){case $.PAGE_HOME:case $.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case $.LEFT:case $.RIGHT:case $.UP:case $.DOWN:if(!s)return!1;r&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case $.PAGE_DOWN:case $.PAGE_UP:!r&&!i&&(a=this.handlePageUpDown(n,s,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===$.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:i,focusColumn:r,isAsync:o,rowPinned:s}){let{scrollFeature:a}=this.gridBodyCon;_e(n)&&!n.isPinned()&&a.ensureColumnVisible(n),_e(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(i);let{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:i,column:r,rowPinned:s,forceBrowserFocus:!0}),c?.setRangeToCell({rowIndex:i,rowPinned:s,column:r})}onPageDown(e){let t=this.beans,n=K3(t),i=this.getViewportHeight(),{pageBounds:r,rowModel:o,rowAutoHeight:s}=t,a=r.getPixelOffset(),l=n.top+i,c=o.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){let t=this.beans,n=K3(t),{pageBounds:i,rowModel:r,rowAutoHeight:o}=t,s=i.getPixelOffset(),a=n.top,l=r.getRowIndexAtPixel(a+s);o?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,n=!1){let{pageBounds:i,rowModel:r}=this.beans,o=this.getViewportHeight(),s=i.getFirstRow(),a=i.getLastRow(),l=i.getPixelOffset(),c=r.getRow(e.rowIndex),d=n?c?.rowHeight-o-l:o-l,u=c?.rowTop+d,h=r.getRowIndexAtPixel(u+l);if(h===e.rowIndex){let f=n?-1:1;t=h=e.rowIndex+f}let p;n?(p="bottom",h<s&&(h=s),t<s&&(t=s)):(p="top",h>a&&(h=a),t>a&&(t=a)),this.isRowTallerThanView(r.getRow(h))&&(t=h,p="top"),this.navigateTo({scrollIndex:t,scrollType:p,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),{pageBounds:r,rowModel:o}=this.beans,s=r.getLastRow(),a=0,l=e.rowIndex;for(;l>=0&&l<=s;){let c=o.getRow(l);if(c){let d=c.rowHeight??0;if(a+d>i)break;a+=d}l+=n}return Math.max(0,Math.min(l,s))}getViewportHeight(){let e=this.beans,t=K3(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth(),i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;let t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),i=this.getNormalisedPosition(n),{rowIndex:r,rowPinned:o,column:s}=i??n,a=s;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:a,focusIndex:r,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){let t=e===$.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:r}=this.beans,o=n.allCols,s=t?i.getFirstRow():i.getLastRow(),a=r.getRow(s);if(!a)return;let l=(t?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:l,focusIndex:s,focusColumn:l})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),r=this.beans,{ctrlsSvc:o,pageBounds:s,focusSvc:a,gos:l}=r;if(i!==!1){i?t.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){let{rowIndex:c,rowPinned:d}=e.getRowPosition();(d?c===0:c===s.getFirstRow())&&(l.get("headerHeight")===0||og(r)?za(r,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof n0&&e.focusCell(!0),(a.focusOverlay(!1)||za(r,n))&&t.preventDefault()}tabToNextCell(e,t){let n=this.beans,{focusSvc:i,rowRenderer:r}=n,o=i.getFocusedCell();if(!o)return!1;let s=Ha(n,o);return!s&&(s=r.getRowByPosition(o),!s?.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t,"api")}tabToNextCellCommon(e,t,n,i="ui"){let{editSvc:r,focusSvc:o}=this.beans,s,a=e instanceof n0?e:e.getAllCellCtrls()?.[0];return r?.isEditing()?s=r?.moveToNextCell(a,t,n,i):s=this.moveToNextCellNotEditing(e,t,n),s===null?s:s||!!o.focusedHeader}moveToNextCellNotEditing(e,t,n){let i=this.beans.visibleCols.allCols,r;if(e instanceof e_){if(r=ce(T({},e.getRowPosition()),{column:t?i[0]:Qe(i)}),this.gos.get("embedFullWidthRows")&&n){let s=e.findFullWidthInfoForEvent(n);s&&(r.column=s.column)}}else r=e.getFocusedCellPosition();let o=this.findNextCellToFocusOn(r,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof n0)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return _e(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:i}){let r=e,o=this.beans,{cellNavigation:s,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:d}=o;for(;;){e!==r&&(e=r),t||(r=this.getLastCellOfColSpan(r)),r=s.getNextTabbedCell(r,t);let u=a.getCallback("tabToNextCell");if(_e(u)){let g=u({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:r||null});if(g===!0)r=e;else{if(g===!1)return!1;r={rowIndex:g.rowIndex,column:g.column,rowPinned:g.rowPinned}}}if(!r)return null;if(r.rowIndex<0){let f=Dd(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:f+r.rowIndex,column:r.column},fromCell:!0}),null}let h=a.get("editType")==="fullRow";if(n&&(!h||i)&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);let p=Ha(o,r);if(!p){let f=c.getRowByPosition(r);if(!f||!f.isFullWidth()||n)continue;return ce(T({},f.getRowPosition()),{column:r?.column})}if(!s.isSuppressNavigable(p.column,p.rowNode))return p.setFocusedCellPosition(r),d?.setRangeToCell(r),p}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){let{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let r=n,o=!1,s=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=s;for(;r&&(r===n||!this.isValidNavigateCell(r));)c.get("enableRtl")?t===$.LEFT&&(r=this.getLastCellOfColSpan(r)):t===$.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=a.getNextCellToFocus(t,r),o=jt(r);if(o&&e&&e.key===$.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){let u=c.getCallback("navigateToNextCell");if(_e(u)){let p=u({key:t,previousCellPosition:n,nextCellPosition:r||null,event:e});_e(p)?r={rowPinned:p.rowPinned,rowIndex:p.rowIndex,column:p.column}:r=null}}if(!r)return;if(r.rowIndex<0){let u=Dd(s);l.focusHeaderPosition({headerPosition:{headerRowIndex:u+r.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let d=this.getNormalisedPosition(r);d?this.focusPosition(d):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);let n=Ha(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let{visibleCols:n,rowRenderer:i,focusSvc:r,eventSvc:o}=this.beans,s=n.allCols;if(!i.getRowByPosition(e)?.isFullWidth())return!1;let l=r.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Qe(s):s[0])};this.focusPosition(c);let d=t??(l!=null&&lr(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(e){let{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!Mi(this.beans,e)}getLastCellOfColSpan(e){let t=Ha(this.beans,e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Qe(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=v0(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&n?.sticky,{scrollFeature:r}=this.gridBodyCon;!i&&jt(e.rowPinned)&&r.ensureIndexVisible(e.rowIndex),e.column.isPinned()||r.ensureColumnVisible(e.column)}ensureColumnVisible(e){let t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function K3(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var Ag={moduleName:"KeyboardNavigation",version:Je,beans:[Qye,yye,Owe],apiFunctions:{getFocusedCell:Sye,clearFocusedCell:xye,setFocusedCell:Eye,setFocusedHeader:Aye,tabToNextCell:Dye,tabToPreviousCell:_ye}},Jye=class extends K{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},e1e=class extends K{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){let{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){let{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;let r=n.getRowBounds(t);r&&(r.rowIndex=t),this.bottomRowBounds=r,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},t1e=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",n1e=class extends K{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let e=this.getWidth(),t=e>0;for(let n of this.elements)n&&(Ie(n,t),_l(n,e))}},i1e=class extends K{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=po(e,"print"),r=i?0:t.getColsLeftWidth(),o=i?0:t.getDisplayedColumnsRightWidth();r!=this.leftWidth&&(this.leftWidth=r,n.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.eBodyViewport,t=lg(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:o}=n,s=r;!s.length&&!o||(i&&(s=i({columns:s,viewportWidth:t})),s?.length&&(s=s.filter(a=>!Or(a)),this.setColsPinned(s,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new n1e(e,t)}setColsPinned(e,t,n){let{colModel:i,colAnimation:r,visibleCols:o,gos:s}=this.beans;if(!i.cols||!e?.length)return;if(po(s,"print")){X(37);return}r?.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;let l=[];for(let c of e){if(!c)continue;let d=i.getCol(c);d&&d.getPinned()!==a&&(this.setColPinned(d,a),l.push(d))}l.length&&(o.refresh(n),e$(this.eventSvc,l,n)),r?.finish()}initCol(e){let{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){let{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;let n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;let r=()=>{let o=n?this.leftWidth:this.rightWidth;if(o==null)return;let s=o==0,a=e.hidden!==s,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),u=t.verticalScrollShowing&&(l&&n||!l&&i)?o+c:o;e.comp.setPinnedContainerWidth(`${u}px`),e.comp.setDisplayed(!s),a&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}getHeaderResizeDiff(e,t){if(t.getPinned()){let{leftWidth:i,rightWidth:r}=this,o=lg(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+r+e>o)if(o>i+r)e=o-i-r;else return 0}return e}getPinnedColumnsOverflowingViewport(e){let t=this.rightWidth??0,n=this.leftWidth??0,i=t+n,r=!1;if(i<e)return{columns:[],hasLockedPinned:r};let{visibleCols:o}=this.beans,s=[...o.leftCols],a=[...o.rightCols],l=0,c=0,d=0,u=[],h=i-d-e;for(;(c<s.length||l<a.length)&&h>0;){if(l<a.length){let p=a[l++];if(p.colDef.lockPinned){r=!0;continue}h-=p.getActualWidth(),u.push(p)}if(c<s.length&&h>0){let p=s[c++];if(p.colDef.lockPinned){r=!0;continue}h-=p.getActualWidth(),u.push(p)}}return{columns:u,hasLockedPinned:r}}},r1e={moduleName:"PinnedColumn",version:Je,beans:[i1e],css:[t1e]},o1e=class extends Gr{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=$n(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let e=this.beans,t=vi(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),dW(n,"polite"),Vpe(n,"additions text"),Bpe(n,!0),e.eRootDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}\u200B`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(at(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},s1e=class extends o1e{},a1e={moduleName:"Aria",version:Je,beans:[s1e]},l1e=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",zU="ag-delay-render",c1e=class extends K{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(zU)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;let{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(zU),this.alreadyRevealed=!0}},d1e={moduleName:"ColumnDelayRender",version:Je,beans:[c1e],css:[l1e]};function u1e(e){e.overlays?.showLoadingOverlay()}function h1e(e){e.overlays?.showNoRowsOverlay()}function p1e(e){e.overlays?.hideOverlay()}var f1e=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}",g1e={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},wq=class extends pe{constructor(){super(g1e),this.eOverlayWrapper=q,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(f1e)}handleKeyDown(e){if(e.key!==$.TAB||e.defaultPrevented||Fs(e))return;let{beans:t,eOverlayWrapper:n}=this;if(n&&Wi(t,n,!1,e.shiftKey))return;let r=!1;e.shiftKey?r=t.focusSvc.focusGridView({column:Qe(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):r=za(t,!1),r&&e.preventDefault()}updateLayoutClasses(e,t){let n=this.eOverlayWrapper;if(!n)return;let i=n.classList,{AUTO_HEIGHT:r,NORMAL:o,PRINT:s}=_c;i.toggle(r,t.autoHeight),i.toggle(o,t.normal),i.toggle(s,t.print)}postConstruct(){this.createManagedBean(new c5(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper?.classList;if(!t){this.activeCssClass=null;return}this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=n,!e)return this.refreshWrapperPadding(),tt.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),n&&this.isGridFocused()){let i=wt(this.beans);i&&!Ts(this.beans)&&(this.elToFocusAfter=i)}return e.then(i=>{let r=this.eOverlayWrapper;if(!r){this.destroyBean(i);return}if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}this.activePromise=null,i&&(this.activeOverlay!==i&&(r.appendChild(i.getGui()),this.activeOverlay=i),n&&this.isGridFocused()&&qn(r))}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}let e=!!this.activeOverlay||!!this.activePromise,t=0;e&&!this.overlayExclusive&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),t!==this.oldWrapperPadding&&(this.oldWrapperPadding=t,this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`))}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let t=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,t&&!this.isGridFocused()&&(t=null),this.destroyBean(e);let n=this.eOverlayWrapper;n&&at(n),t?.focus?.({preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let e=wt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},m1e={selector:"AG-OVERLAY-WRAPPER",component:wq},v1e=["refresh"],Ty=e=>({name:e,optionalMethods:v1e}),tg={id:"agLoadingOverlay",overlayType:"loading",comp:Ty("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{let t=e.get("loading");return t===!1||e.get("suppressLoadingOverlay")===!0&&t!==!0}},qv={id:"agNoRowsOverlay",overlayType:"noRows",comp:Ty("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},k5={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:Ty("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},t_={id:"agExportingOverlay",overlayType:"exporting",comp:Ty("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},VD={id:"activeOverlay",comp:Ty("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},C1e=e=>e?{agLoadingOverlay:tg,agNoRowsOverlay:qv,agNoMatchingRowsOverlay:k5,agExportingOverlay:t_}[e]??VD:null,b1e=e=>e?{loading:tg,noRows:qv,noMatchingRows:k5,exporting:t_}[e]:null,w1e=class extends K{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){let e=this.gos;this.showInitialOverlay=nn(e);let t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[n,i,r,o]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),i()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=n,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],s=>this.onPropChange(new Set(s.changeSet?.properties)))}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos;if(!this.eWrapper||e.get("activeOverlay")||this.isDisabled(tg))return;let t=e.get("loading");!t&&t!==void 0||this.doShowOverlay(tg)}showNoRowsOverlay(){this.showInitialOverlay=!1;let e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(qv)||(this.userForcedNoRows=!0,this.doShowOverlay(qv))}async showExportOverlay(e){let{gos:t,beans:n}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(t_)||this.userForcedNoRows&&this.currentDef===qv){e();return}let i=this.getDesiredDefWithOverride(t_);if(!i){e();return}this.exportsInProgress++,this.focusedCell=n.focusSvc.getFocusedCell(),await this.doShowOverlay(i),await new Promise(o=>setTimeout(()=>o()));let r=Date.now();try{e()}finally{let o=Date.now()-r,s=Math.max(0,300-o),a=()=>{this.exportsInProgress--,this.exportsInProgress===0&&(this.updateOverlay(!1),v5(n,this.focusedCell),this.focusedCell=null)};s>0?setTimeout(()=>a(),s):a()}}hideOverlay(){let e=this.gos;this.showInitialOverlay=!1;let t=this.userForcedNoRows;if(this.userForcedNoRows=!1,e.get("loading")){X(99);return}if(e.get("activeOverlay")){X(296);return}if(this.currentDef===k5){X(297);return}this.doHideOverlay(),t&&this.getOverlayDef()!==qv&&this.updateOverlay(!1)}getOverlayWrapperSelector(){return m1e}getOverlayWrapperCompClass(){return wq}onPropChange(e){let t=e.has("activeOverlay");if((t||e.has("loading"))&&this.updateOverlay(t))return;let n=this.currentDef,i=this.eWrapper?.activeOverlay;if(i&&n){let r=e.has("activeOverlayParams");if(n===VD)r&&i.refresh?.(this.makeCompParams(!0));else{let o=n.paramsKey;(e.has("overlayComponentParams")||o&&e.has(o))&&i.refresh?.(this.makeCompParams(!1,o,n.overlayType))}}}updateOverlay(e){let t=this.eWrapper;if(!t)return this.currentDef=null,!1;let n=this.getDesiredDefWithOverride(),i=this.currentDef,r=n===VD&&e;return n!==i?n?(this.doShowOverlay(n),!0):(this.disableInitialOverlay(),this.doHideOverlay()):r&&n?(t.hideOverlay(),this.doShowOverlay(n),!0):(n||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){let{gos:t}=this,n=C1e(t.get("activeOverlay"));return n||(n=e??this.getOverlayDef(),n&&this.isDisabled(n)&&(n=null)),n}getOverlayDef(){let{gos:e,beans:t}=this,{colModel:n,rowModel:i}=t,r=e.get("loading");if(r!==void 0){if(this.disableInitialOverlay(),r)return tg}else if(this.showInitialOverlay){if(!this.isDisabled(tg)&&(!e.get("columnDefs")||!n.ready||!e.get("rowData")))return tg;this.disableInitialOverlay()}else this.disableInitialOverlay();let s=i.getOverlayType();return b1e(s)}disableInitialOverlay(){this.showInitialOverlay=!1,this.newColumnsLoadedCleanup?.(),this.newColumnsLoadedCleanup=null}doShowOverlay(e){let{gos:t,beans:n}=this,{userCompFactory:i}=n;this.currentDef=e;let r=e!==VD,o=!!e.exclusive;this.exclusive=o;let s;(e.paramsKey&&t.get(e.paramsKey)||e.compKey&&t.get(e.compKey))&&(s=e.paramsKey);let a;r&&(t.get("overlayComponent")||t.get("overlayComponentSelector"))&&(a=i.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),a??(a=i.getCompDetailsFromGridOptions(e.comp,r?e.id:void 0,this.makeCompParams(!r,s,e.overlayType),!1));let l=a?.newAgStackInstance()??null,c=this.eWrapper?this.eWrapper.showOverlay(l,e.wrapperCls,o):tt.resolve();return this.eWrapper?.refreshWrapperPadding(),this.setExclusive(o),c}makeCompParams(e,t,n){let{gos:i}=this,r=e?i.get("activeOverlayParams"):ce(T(T({},i.get("overlayComponentParams")),t&&i.get(t)||null),{overlayType:n});return Oe(i,r??{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;let t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){let{gos:t}=this;return e.overlayType&&t.get("suppressOverlays")?.includes(e.overlayType)||e.isSuppressed?.(t)===!0}},y1e={moduleName:"Overlay",version:Je,userComponents:{agLoadingOverlay:Zve,agNoRowsOverlay:e0e,agNoMatchingRowsOverlay:n0e,agExportingOverlay:Qve},apiFunctions:{showLoadingOverlay:u1e,showNoRowsOverlay:h1e,hideOverlay:p1e},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[w1e]},S1e=class extends K{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=Pge(),tp(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;tp(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},x1e=400,E1e=class extends K{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{for(let o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(let o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Vo(this.gos)?n():i()}),Vo(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:r})=>{(!r&&i||r&&!i)&&this.redrawRows()});let{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{let i=n.columns;i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=po(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new D1e(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){let n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(let t of this.getAllCellCtrls())t.onCellFocused(e);for(let t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){let t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(let t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(let t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{let{cellFlashSvc:t}=this.beans;if(t)for(let n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(let e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(let e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(let e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(let e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();let e=this.colModel.getCols();for(let t of e){let n=l=>{for(let c of this.getAllCellCtrls())c.column===t&&l(c)},i=()=>{n(l=>l.onLeftChanged())},r=()=>{n(l=>l.onWidthChanged())},o=()=>{n(l=>l.onFirstRightPinnedChanged())},s=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",r),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",s),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",r),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",s),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){let e=po(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){let t=[];for(let n of this.getAllRowCtrls()){let i=n.getCellCtrl(e,!0)?.eGui;i&&t.push(i)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){let{pinnedRowModel:i,beans:r,printLayout:o}=this,s=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));i?.forEachPinnedRow(t,(l,c)=>{let d=e[c];d&&i.getPinnedRowById(d.rowNode.id,t)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in s&&n?(e[c]=s[l.id],delete s[l.id]):e[c]=new e_(l,r,!1,!1,o)});let a=(t==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let r=i[e.rowIndex];r&&r.rowNode===e&&(r.destroyFirstPass(),r.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){let{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(let i of e??[])this.redrawRow(i,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Xv(this.gos),r=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:o,gos:s}=this;if(o){o.checkStickyRows();let a=o.extraTopHeight+o.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(s.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){let{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(Bo(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;let t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:Dd(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell(ce(T({},n),{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0}));return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Oe(this.gos,ce(T({},n),{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"})))}findPositionToFocus(e){let{pagination:t,pageBounds:n}=this.beans,i=e;for(i.rowPinned==null&&t&&n&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=la(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});let r=this.getRowByPosition(i);if(r?.isAlive())return ce(T({},r.getRowPosition()),{column:e.column});i=la(this.beans,i)}return null}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let r=t[i].getAllCellCtrls(),o=r.length;for(let s=0;s<o;s++)e.push(r[s])}return e}getAllRowCtrls(){let{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:i}={}){let r={force:n,newData:!1,suppressFlash:i};for(let o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(r);this.refreshFullWidth(e)}refreshRows(e={}){for(let t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){let t=yk(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let r=i.rowNode;return Sk(r,t)})}getCellCtrls(e,t){let n;_e(t)&&(n={},t.forEach(r=>{let o=this.colModel.getCol(r);_e(o)&&(n[o.getId()]=!0)}));let i=[];for(let r of this.getRowCtrls(e))for(let o of r.getAllCellCtrls()){let s=o.column.getId();n&&!n[s]||i.push(o)}return i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let e=[];for(let n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);let t={};for(let n of Object.values(this.rowCtrlsByRowIndex)){let i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(let n of e){let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:i}=e,r,o=this.stickyRowFeature;o&&(r=t?.getFocusCellToUseAfterRefresh()||void 0);let s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();let d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}let c=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if(!(i&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!l),r!=null)){let d=t?.getFocusCellToUseAfterRefresh();r!=null&&d==null&&(n?.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(e,t){let n={};for(let o of e)n[o]=!0;let r=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){let t=[];for(let s=this.firstRenderedRow;s<=this.lastRenderedRow;s++)t.push(s);let n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);let r=s=>{let a=s.rowNode.rowIndex;a==null||a===i||(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&t.push(a)};for(let s of Object.values(this.rowCtrlsByRowIndex))r(s);if(e)for(let s of Object.values(e))r(s);t.sort((s,a)=>s-a);let o=[];for(let s=0;s<t.length;s++){let a=t[s],l=this.rowModel.getRow(a);l&&!l.sticky&&o.push(a)}return o}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);for(let r of i)this.createOrUpdateRowCtrl(r,e,t,n);if(e){let{animationFrameSvc:r}=this.beans;r?.active&&n&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];for(let t of this.getFullWidthRowCtrls()){let n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=yk(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.rowNode;return!(t!=null&&!Sk(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let r,o=this.rowCtrlsByRowIndex[e];if(o||(r=this.rowModel.getRow(e),_e(r)&&_e(t)&&t[r.id]&&r.alreadyRendered&&(o=t[r.id],t[r.id]=null)),!o)if(r||(r=this.rowModel.getRow(e)),_e(r))o=this.createRowCon(r,n,i);else return;r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){let n=[];if(e){for(let i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){let r=i.instanceId;this.zombieRowCtrls[r]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[r]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(let i of n)i()},x1e))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=fo(this.beans);return e*t}workOutFirstAndLastRowsToRender(){let{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,r;if(!n.isRowsToRender())i=0,r=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),r=t.getLastRow();else{let d=this.getRowBufferInPixels(),u=this.ctrlsSvc.getScrollFeature(),h=this.gos.get("suppressRowVirtualisation"),p=!1,f,g;do{let D=t.getPixelOffset(),{pageFirstPixel:F,pageLastPixel:L}=t.getCurrentPagePixelRange(),V=e.divStretchOffset,B=u.getVScrollPosition(),P=B.top,U=B.bottom;h?(f=F+V,g=L+V):(f=Math.max(P+D-d,F)+V,g=Math.min(U+D+d,L)+V),this.firstVisibleVPixel=Math.max(P+D,F)+V,this.lastVisibleVPixel=Math.min(U+D,L)+V,p=this.ensureAllRowsInRangeHaveHeightsCalculated(f,g)}while(p);let C=n.getRowIndexAtPixel(f),m=n.getRowIndexAtPixel(g),w=t.getFirstRow(),x=t.getLastRow();C<w&&(C=w),m>x&&(m=x),i=C,r=m}let o=po(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!s&&r-i>a&&(r=i+a);let l=i!==this.firstRenderedRow,c=r!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=i,this.lastRenderedRow=r,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:r}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,ks(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:r,rowModel:o}=this,s=o.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(s||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){let i=e.rowNode,r=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=this.editSvc?.isEditing(e),s=i.detail;return r||o||s?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?.getRow(e)??null;if(i)return i;let r=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new e_(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},D1e=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Ci(this.entriesList,n)}removeFromCache(e){let t=e.rowNode.id;delete this.entriesMap[t],Ci(this.entriesList,e)}getEntries(){return this.entriesList}};function yk(e){if(!e)return;let t={top:{},bottom:{},normal:{}};for(let n of e){let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}return t}function Sk(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var _1e=class extends K{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){let{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=xl(e),this.firstLeaf=nn(e)?Ou:A1e,this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=xl(e))}doFullSort(e,t){let n=e.map((i,r)=>({currentPos:r,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,r=n.rowNode;for(let o=0,s=e.length;o<s;o++){let a=e[o],l=a.sort==="desc",c=this.getValue(i,a.column),d=this.getValue(r,a.column),u,h=this.getComparator(a,i);if(h)u=h(c,d,i,r,l);else{let f={accentedCompare:this.isAccentedSort};a.type==="absolute"&&(f.transform=R1e),u=u0(c,d,f)}if(!isNaN(u)&&u!==0)return a.sort==="asc"?u:u*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column.getColDef(),i=this.getComparatorFromColDef(n,e);if(i)return i;if(!n.showRowGroup)return;let r=!t.group&&n.field;if(!r)return;let o=this.beans.colModel.getColDefCol(r);if(o)return this.getComparatorFromColDef(o.getColDef(),e)}getComparatorFromColDef(e,t){let n=e.comparator;if(n!=null)return typeof n=="object"?n[Ms(t.type)]:n}getValue(e,t){if(this.primaryColumnsSortGroups&&e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return;let{valueSvc:n,formula:i}=this.beans,r=n.getValue(t,e,!1);return t.isAllowFormula()&&i?.isFormula(r)?i.resolveValue(t,e):r}getGroupDataValue(e,t){let{gos:n,valueSvc:i,colModel:r,showRowGroupCols:o}=this.beans;if(v_(n,r.isPivotActive())){let l=this.firstLeaf(e);return l&&i.getValue(t,l,!1)}let a=o?.getShowRowGroupCol(t.getId());if(a)return e.groupData?.[a.getId()]}},A1e=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;t?.length;){let n=t[0];if(n.data)return n;t=n.childrenAfterGroup}};function R1e(e){if(!e)return e;let t=Number(e);return isNaN(t)?e:Math.abs(t)}function F1e(e){e.sortSvc?.onSortChanged("api")}var eg=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),M1e={tag:"span",cls:"ag-sort-indicator-container",children:[eg("Order","order"),eg("Asc","ascending-icon"),eg("Desc","descending-icon"),eg("Mixed","mixed-icon"),eg("AbsoluteAsc","absolute-ascending-icon"),eg("AbsoluteDesc","absolute-descending-icon"),eg("None","none-icon")]},L5=class extends pe{constructor(e){super(),this.eSortOrder=q,this.eSortAsc=q,this.eSortDesc=q,this.eSortMixed=q,this.eSortNone=q,this.eSortAbsoluteAsc=q,this.eSortAbsoluteDesc=q,e||this.setTemplate(M1e)}attachCustomElements(e,t,n,i,r,o,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r,this.eSortAbsoluteAsc=o,this.eSortAbsoluteDesc=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);let n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;let i=$e(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:n,eSortAbsoluteDesc:i,eSortNone:r,column:o,gos:s,beans:a}=this,l=a.sortSvc.getDisplaySortForColumn(o),c=Ms(l?.type),d=w0(l?.direction),u=o.getAvailableSortTypes(),h=u.has("default"),p=u.has("absolute"),f=c==="absolute",g=c==="default",C=d==="asc",m=d==="desc";if(e&&Ie(e,C&&g&&h,{skipAriaHidden:!0}),t&&Ie(t,m&&g&&h,{skipAriaHidden:!0}),r){let w=!o.getColDef().unSortIcon&&!s.get("unSortIcon");Ie(r,!w&&!d,{skipAriaHidden:!0})}n&&Ie(n,C&&f&&p,{skipAriaHidden:!0}),i&&Ie(i,m&&f&&p,{skipAriaHidden:!0})}setupMultiSortIndicator(){let{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);let i=t.getColDef().showRowGroup;xl(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:e,beans:t,column:n}=this;if(e){let i=t.sortSvc.getDisplaySortForColumn(n)?.direction==="mixed";Ie(e,i,{skipAriaHidden:!0})}}updateSortOrder(){let{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;let i=n.getColumnsWithSortingOrdered(),r=n.getDisplaySortIndexForColumn(t)??-1,o=i.some(a=>n.getDisplaySortIndexForColumn(a)??!1),s=r>=0&&o;Ie(e,s,{skipAriaHidden:!0}),r>=0?e.textContent=(r+1).toString():at(e)}},I1e={selector:"AG-SORT-INDICATOR",component:L5},T1e=class extends K{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){let i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){let{gos:r,showRowGroupCols:o}=this.beans,s=xl(r),a=[e];if(s&&e.getColDef().showRowGroup){let u=o?.getSourceColumnsForGroupColumn?.(e)?.filter(h=>h.isSortable());u&&(a=[e,...u])}for(let d of a)this.setColSort(d,t,i);let l=(n||r.get("alwaysMultiSort"))&&!r.get("suppressMultiSort"),c=[];if(!l){let d=this.clearSortBarTheseColumns(a,i);c.push(...d)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(i,c)}updateSortIndex(e){let{gos:t,colModel:n,showRowGroupCols:i}=this.beans,r=xl(t),o=i?.getShowRowGroupCol(e.getId()),s=r&&o||e,a=this.getColumnsWithSortingOrdered();n.forAllCols(d=>this.setColSortIndex(d,null));let l=a.filter(d=>r&&d.getColDef().showRowGroup?!1:d!==s);(s.getSortDef()?[...l,s]:l).forEach((d,u)=>this.setColSortIndex(d,u))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSortDef()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){let t=e.getSortingOrder(),n=e.getSortDef(),r=t.findIndex(o=>TD(o,n))+1;return r>=t.length&&(r=0),Ac(t[r])}getIndexedSortMap(){let{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans,r=[];if(t.forAllCols(c=>{c.getSortDef()&&r.push(c)}),t.isPivotMode()){let c=xl(e);r=r.filter(d=>{let u=!!d.getAggFunc(),h=!d.isPrimary(),p=c?n?.getShowRowGroupCol(d.getId()):d.getColDef().showRowGroup;return u||h||p})}let o=i?.columns.filter(c=>!!c.getSortDef())??[],s={};r.forEach((c,d)=>s[c.getId()]=d),r.sort((c,d)=>{let u=c.getSortIndex(),h=d.getSortIndex();if(u!=null&&h!=null)return u-h;if(u==null&&h==null){let p=s[c.getId()],f=s[d.getId()];return p>f?1:-1}else return h==null?-1:1});let a=xl(e)&&!!o.length;a&&(r=[...new Set(r.map(c=>n?.getShowRowGroupCol(c.getId())??c))]);let l=new Map;if(r.forEach((c,d)=>l.set(c,d)),a)for(let c of o){let d=n.getShowRowGroupCol(c.getId());l.set(c,l.get(d))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}collectSortItems(e=!1){let t=[],n=this.getColumnsWithSortingOrdered();for(let i of n){let r=i.getSortDef()?.direction;if(!r)continue;let o=Ms(i.getSortDef()?.type),s={sort:r,type:o};e?s.colId=i.getId():s.column=i,t.push(s)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){let t=xl(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSortDef();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,r=i[0].getSortDef();return i.every(s=>TD(s.getSortDef(),r))?r:{type:Ms(e.getSortDef()?.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){let n=()=>{let{type:i,direction:r}=Ac(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc",r==="asc"),e.toggleCss("ag-header-cell-sorted-desc",r==="desc"),e.toggleCss("ag-header-cell-sorted-abs-asc",i==="absolute"&&r==="asc"),e.toggleCss("ag-header-cell-sorted-abs-desc",i==="absolute"&&r==="desc"),e.toggleCss("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){let a=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(l=>r==l.getSortDef()?.direction);e.toggleCss("ag-header-cell-sorted-mixed",a)}};e.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(e){let{sortIndex:t,initialSortIndex:n}=e.colDef,i=jW(e.colDef);i&&e.setSortDef(i,!0),t!==void 0?t!==null&&(e.sortIndex=t):n!==null&&(e.sortIndex=n)}updateColSort(e,t,n){t!==void 0&&this.setColSort(e,Ac(t),n)}setColSort(e,t,n){TD(e.getSortDef(),t)||(e.setSortDef(Ac(t),t===void 0),e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new L5(e)}getSortIndicatorSelector(){return I1e}},N_={moduleName:"Sort",version:Je,beans:[T1e,_1e],apiFunctions:{onSortChanged:F1e},userComponents:{agSortIndicator:L5},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},P1e=class extends K{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){let{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){let{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),tp(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Rl(e.source))}}};function k1e(e){e.valueCache?.expire()}function L1e(e,t){let{colKey:n,rowNode:i,useFormatter:r}=t,o=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(jt(o))return null;let s=e.valueSvc.getValueForDisplay({column:o,node:i,includeValueFormatted:r});return r?s.valueFormatted??ca(s.value):s.value}var O1e="paste",N1e=class extends K{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){let{gos:e,rowModel:t}=this.beans;nn(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){let{gos:t,rowRenderer:n}=this.beans;if(e.source===O1e||t.get("suppressChangeDetection"))return;let i=e.node,r=[i],o=this.clientSideRowModel,s=o?.rootNode;if(s&&!i.isRowPinned()){let a=t.get("aggregateOnlyChangedColumns"),l=new Nu(a,s);l.addParentNode(i.parent,[e.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{r.push(c),c.sibling&&r.push(c.sibling)})}n.refreshCells({rowNodes:r})}},B1e=class extends K{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);mt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return mt(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){let t=this.cache;if(t[e])return t[e];let n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},V1e=class extends K{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){let e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){let i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},G1e={moduleName:"ValueCache",version:Je,beans:[V1e],apiFunctions:{expireValueCache:k1e}},H1e={moduleName:"Expression",version:Je,beans:[B1e]},z1e={moduleName:"ChangeDetection",version:Je,beans:[N1e]},j1e={moduleName:"CellApi",version:Je,apiFunctions:{getCellValue:L1e}},U1e=class extends K{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){let{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Ui(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;let n=i=>this.callColumnCellValueChangedHandler(i);this.eventSvc.addListener("cellValueChanged",n,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",n,!0)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e){let{column:t,node:n,includeValueFormatted:i,useRawFormula:r,exporting:o,source:s="ui"}=e,{showRowGroupColValueSvc:a}=this.beans,l=!t&&n.group,c=t?.colDef.showRowGroup,d=!this.isTreeData||n.footer;if(a&&d&&(l||c)){let x=a.getGroupValue(n,t);if(x==null)return{value:null,valueFormatted:null};if(!i)return{value:x.value,valueFormatted:null};let D=a.formatAndPrefixGroupColValue(x,t,o);return{value:x.value,valueFormatted:D}}if(!t)return{value:n.key,valueFormatted:null};let u=n.leafGroup&&this.colModel.isPivotMode(),h=n.group&&n.expanded&&!n.footer&&!u,p=this.gos.get("groupSuppressBlankHeader")||!n.sibling,f=h&&!p,g=this.getValue(t,n,f,s),C=g,{formula:m}=this.beans,w=i&&!(o&&t.colDef.useValueFormatterForExport===!1);return t.isAllowFormula()&&m?.isFormula(g)&&(r?(g=m.normaliseFormula(g,!0),C=m.resolveValue(t,n)):(g=m.resolveValue(t,n),C=g)),{value:g,valueFormatted:w?this.formatValue(t,n,C):null}}getValue(e,t,n=!1,i="ui"){if(this.initialised||this.init(),!t)return;if(this.hasEditSvc&&i==="ui"){let a=this.editSvc;if(a.isEditing()){let l=a.getCellDataValue({rowNode:t,column:e},!0);if(l!==void 0)return l}}let o=e.getColDef().showRowGroup;if(typeof o=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(o)??-1)>t.level)return null;let s=this.resolveValue(e,t,n);if(this.cellExpressions&&Fd(s)){let a=s.substring(1);s=this.executeValueGetter(a,t.data,e,t)}return s}getFormulaFromDataSource(e,t){let n=this.formulaDataSvc;if(!n?.hasDataSource()||!e.isAllowFormula())return;let i=n.getFormula({column:e,rowNode:t});return Fd(i)?i:void 0}resolveValue(e,t,n){let i=e.getColDef(),r=e.getColId(),o=this.isTreeData,s=this.getFormulaFromDataSource(e,t);if(s!==void 0)return s;let a=!n&&t.aggData&&t.aggData[r]!==void 0;if(o&&a)return t.aggData[r];let l=t.data,c=i.field;if(o&&i.valueGetter)return this.executeValueGetter(i.valueGetter,l,e,t);if(o&&c&&l)return Yw(l,c,e.isFieldContainsDots());let d=t.groupData;if(d&&r in d)return t.groupData[r];if(a)return t.aggData[r];let h=i.showRowGroup,p=typeof h!="string"||!t.group,f=this.isSsrm&&n&&!!i.aggFunc,g=this.isSsrm&&t.footer&&t.field&&(h===!0||h===t.field);if(i.valueGetter&&!f)return p?this.executeValueGetter(i.valueGetter,l,e,t):void 0;if(g)return Yw(l,t.field,e.isFieldContainsDots());if(c&&l&&!f)return p?Yw(l,c,e.isFieldContainsDots()):void 0}parseValue(e,t,n,i){let r=e.getColDef();if(r.allowFormula&&this.beans.formula?.isFormula(n))return n;let o=r.valueParser;if(_e(o)){let s=Oe(this.gos,{node:t,data:t?.data,oldValue:i,newValue:n,colDef:r,column:e});return typeof o=="function"?o(s):this.expressionSvc?.evaluate(o,s)}return n}getDeleteValue(e,t){return _e(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t}).value)??null:null}formatValue(e,t,n,i,r=!0){let{expressionSvc:o}=this.beans,s=null,a,l=e.getColDef();if(i?a=i:r&&(a=l.valueFormatter),a){let c=t?t.data:null,d=Oe(this.gos,{value:n,node:t,data:c,colDef:l,column:e});typeof a=="function"?s=a(d):s=o?o.evaluate(a,d):null}else if(l.refData)return l.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}setValue(e,t,n,i){let r=this.colModel.getColDefCol(t);if(!e||!r)return!1;this.ensureRowData(e);let o=r.getColDef();if(!this.isSetValueSupported({column:r,newValue:n,colDef:o}))return!1;let s=Oe(this.gos,{node:e,data:e.data,oldValue:this.getValue(r,e,void 0,i),newValue:n,colDef:o,column:r});s.newValue=n;let a=this.handleExternalFormulaChange({column:r,eventSource:i,newValue:n,setterParams:s,rowNode:e});if(a!==null)return a;let l=this.computeValueChange({column:r,newValue:n,params:s,rowData:e.data,valueSetter:o.valueSetter,field:o.field});return l===void 0&&(l=!0),l?this.finishValueChange(e,r,s,i):!1}finishValueChange(e,t,n,i){e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let r=this.getValue(t,e);return this.dispatchCellValueChangedEvent(e,n,r,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,n,r,i),!0}ensureRowData(e){jt(e.data)&&(e.data={})}isSetValueSupported(e){let{column:t,newValue:n,colDef:i}=e,{field:r,valueSetter:o}=i,s=this.beans.formula,a=t.isAllowFormula()&&s?.isFormula(n),l=!!this.formulaDataSvc?.hasDataSource();return jt(r)&&jt(o)&&!(l&&a)?(X(17),!1):this.dataTypeSvc&&!this.dataTypeSvc.checkType(t,n)?(X(135),!1):!0}handleExternalFormulaChange(e){let{column:t,rowNode:n,newValue:i,eventSource:r,setterParams:o}=e,s=this.beans.formula,a=this.formulaDataSvc;if(!a?.hasDataSource()||!t.isAllowFormula())return null;let l=s?.isFormula(i),c=a.getFormula({column:t,rowNode:n});if(l){if(!(c!==i))return!1;a.setFormula({column:t,rowNode:n,formula:i});let u=s?.resolveValue(t,n),h=t.getColDef();if(_e(h.valueSetter)||!jt(h.field)){let p=ce(T({},o),{newValue:u});this.computeValueChange({column:t,newValue:u,params:p,rowData:n.data,valueSetter:h.valueSetter,field:h.field})}return this.finishValueChange(n,t,o,r)}return c!==void 0&&a.setFormula({column:t,rowNode:n,formula:void 0}),null}computeValueChange(e){let{valueSetter:t,params:n,rowData:i,field:r,column:o,newValue:s}=e;return _e(t)?typeof t=="function"?t(n):this.expressionSvc?.evaluate(t,n):this.setValueUsingField(i,r,s,o.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let r=!1;if(!i)r=e[t]===n,r||(e[t]=n);else{let o=t.split("."),s=e;for(;o.length>0&&s;){let a=o.shift();o.length===0?(r=s[a]===n,r||(s[a]=n)):s=s[a]}}return!r}executeValueGetterWithValueCache(e,t,n,i){let r=n.getColId(),o=this.valueCache.getValue(i,r);if(o!==void 0)return o;let s=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,r,s),s}executeValueGetterWithoutValueCache(e,t,n,i){let r=Oe(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),o;return typeof e=="function"?o=e(r):o=this.expressionSvc?.evaluate(e,r),o}getValueCallback(e,t){let n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,r=n;if(i){let o=Oe(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});r=i(o)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&X(121)),r}},W1e={moduleName:"CommunityCore",version:Je,beans:[Hwe,W0e,qbe,Xfe,S1e,sbe,Lwe,aye,qfe,e1e,Jye,E1e,U1e,Vwe,kwe,Gwe,Ybe,P1e,zbe,jbe,Cye],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:$0e,destroy:q0e,isDestroyed:K0e,getGridOption:Y0e,setGridOption:Z0e,updateGridOptions:nq,isModuleRegistered:X0e},dependsOn:[Vbe,Iy,WCe,N_,fye,A5,gye,y1e,z1e,vye,Ag,r1e,a1e,wye,$be,Gbe,H1e,ube,d1e]},yq={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1,Formula:1},Y3=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],$1e={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:Y3,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...Y3,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...Y3,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},q1e={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function K1e(e,t){let n=[];for(let i of Array.isArray(e)?e:[e]){let r=$1e[i];if(r)for(let o of r){let s=q1e[o];(!s||s===t)&&n.push(o)}else n.push(i)}return n}var Sq=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,Y1e=e=>{let t=e.map(i=>`import { ${Zw(i)} } from '${yq[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>Zw(i,!0)).join(", ")} ]); 

For more info see: ${Zv}/modules/`};function Zw(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function Z1e(e,t){let n=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines"),i="";return!globalThis?.agCharts&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>yq[o])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function xq({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var jU=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:r,additionalText:o,isUmd:s})=>{let a=K1e(t,r),l=typeof e=="string"?e:eSe[e];if(s)return Z1e(l,a);let c=a.filter(h=>h==="IntegratedCharts"||h==="Sparklines"),d=c.length>0?`${c.map(h=>Zw(h)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(h=>Zw(h)).join(", "):Zw(a[0])} is not registered${n?" for gridId: "+i:""}. ${d} Check if you have registered the module:
`}
${Y1e(a)}`+(o?` 

${o}`:"")},UU=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,X1e=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,Q1e={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${X1e(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{let r=[],o=[...Object.keys(n??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(i??[]).filter(a=>!!i[a])],s=pg({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return r.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),s.length>0&&r.push(`         Did you mean: [${s.slice(0,3)}]?
`),r.push("If using a custom component check it has been registered correctly."),r},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Zv}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{let n=pg({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:jU,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Zv}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>UU("IntegratedChartsModule"),258:()=>UU("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:r})=>jU({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:e0[t],gridId:i,gridScoped:n,rowModelType:r}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Zv}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>Sq(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:xq,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`,293:()=>"The grid was initialised detached from the DOM and was then inserted into a Shadow Root. Theme styles are probably broken. Pass the themeStyleContainer grid option to let the grid know where in the document to insert theme CSS.",294:()=>"When using the `agRichSelectCellEditor` setting `filterListAsync = true` requires `allowTyping = true` and the `values()` callback must return a Promise of filtered values.",295:({blockedService:e})=>`colDef.allowFormula is not supported with ${e}. Formulas has been turned off.`,296:()=>"Since v35, `api.hideOverlay()` does not hide the overlay when `activeOverlay` is set. Set `activeOverlay=null` instead.",297:()=>'`api.hideOverlay()` does not hide the no matching rows overlay as it is only controlled by grid state. Set `suppressOverlays=["noMatchingRows"] to not show it.'};function J1e(e,t){let n=Q1e[e];if(!n)return[`Missing error text for error id ${e}!`];let i=n(t),o=`
See ${MW(e,t)}`;return Array.isArray(i)?i.concat(o):[i,o]}var eSe={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},WU=new WeakMap,$U=new WeakMap;function B_(e,t,n){if(!t)return mt(11),{};let i=n,r;if(!i?.setThemeOnGridDiv){let s=bt({tag:"div"});s.style.height="100%",e.appendChild(s),e=s,r=()=>e.remove()}return new nSe().create(e,t,s=>{let a=new j0e(e);s.createBean(a)},void 0,n,r)}var tSe=1,nSe=class{create(e,t,n,i,r,o){let s=Nk.applyGlobalGridOptions(t),a=s.gridId??String(tSe++),l=this.getRegisteredModules(r,a,s.rowModelType),c=this.createBeansList(s.rowModelType,l,a),d=this.createProvidedBeans(e,s,r);if(!c)return;let h={providedBeanInstances:d,beanClasses:c,id:a,beanInitComparator:_0e,beanDestroyComparator:A0e,derivedBeans:[E0e],destroyCallback:()=>{$U.delete(f),WU.delete(e),ffe(a),o?.()}},p=new Rme(h);this.registerModuleFeatures(p,l),n(p),p.getBean("syncSvc").start(),i?.(p);let f=p.getBean("gridApi");return WU.set(e,f),$U.set(f,e),f}getRegisteredModules(e,t,n){return ey(W1e,void 0,!0),e?.modules?.forEach(i=>ey(i,t)),gfe(t,qU(n))}registerModuleFeatures(e,t){let n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");for(let r of t){n.registerModule(r);let o=r.apiFunctions;if(o){let s=Object.keys(o);for(let a of s)i?.addFunction(a,o[a])}}}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;jt(i)&&(i=new D5);let r={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n?.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(e,t,n){let i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},r=qU(e),o=i[r];if(!o){jw(201,{rowModelType:r},`Unknown rowModelType ${r}.`);return}if(!vfe()){jw(272,void 0,Sq());return}if(!e){let a=Object.entries(i).filter(([l,c])=>ek(c,n,l));if(a.length==1){let[l,c]=a[0];if(l!==r){let d={moduleName:c,rowModelType:l};jw(275,d,xq(d));return}}}if(!ek(o,n,r)){let a=Vk(),l=`rowModelType = '${r}'`,c=a?`Unable to use ${l} as that requires the ag-grid-enterprise script to be included.
`:`Missing module ${o}Module for rowModelType ${r}.`;jw(200,{reasonOrId:l,moduleName:o,gridScoped:Bk(),gridId:n,rowModelType:r,isUmd:a},c);return}let s=new Set;for(let a of t)for(let l of a.beans??[])s.add(l);return Array.from(s)}};function qU(e){return e??"clientSide"}function Ro(e){let t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function V_(e){let t=e.rowModel;return t.getType()==="infinite"?t:void 0}function R0(e){let t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var iSe=class extends K{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){let e=this.gos,t=e.getCallback("getLocaleText");return t?tfe(t):nfe(e.get("localeText"))}};function rSe(e,t=!1){let n=[],i=[],r=[],o=[],s=[],a=[],l=[],c=[],d=[],u=0;for(let h=0;h<e.length;h++){let{colId:p,sort:f,sortType:g,sortIndex:C,rowGroup:m,rowGroupIndex:w,aggFunc:x,pivot:D,pivotIndex:F,pinned:L,hide:V,width:B,flex:P}=e[h];d.push(p),f&&(n[C??u++]={colId:p,sort:f,type:g}),m&&(i[w??0]=p),typeof x=="string"&&r.push({colId:p,aggFunc:x}),D&&(o[F??0]=p),L&&(L==="right"?a:s).push(p),V&&l.push(p),(P!=null||B)&&c.push({colId:p,flex:P??void 0,width:B===null?void 0:B})}return{sort:n.length?{sortModel:Z3(n)}:void 0,rowGroup:i.length?{groupColIds:Z3(i)}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:Z3(o)}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}function Z3(e){return e.filter(t=>t!=null)}function oSe(e){let t=[];for(let{groupId:n,open:i}of e)i&&t.push(n);return t.length?{openColumnGroupIds:t}:void 0}var Eq=class{wrap(e,t,n,i){let r=this.createWrapper(e,i);for(let o of t??[])this.createMethod(r,o,!0);for(let o of n??[])this.createMethod(r,o,!1);return r}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&X(49,{methodName:t}),null)}}};function i0(e){return e.get("tooltipShowMode")==="whenTruncated"}function lp(e,t){return i0(e)?Iu(t):void 0}function Bl(e,t){if(typeof e!="number")return"";let n=t(),i=n("thousandSeparator",","),r=n("decimalSeparator",".");return e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var O5=class extends K{getFileName(e){let t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},N5=class{constructor(e){let{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:r,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=r,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e){let{column:t,node:n,currentColumnIndex:i,accumulatedRowIndex:r,type:o,useRawFormula:s}=e,a=i===0&&C_(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(t.isRowGroupDisplayed(n.rowGroupColumn?.getColId()??"")||a))return{value:this.processRowGroupCallback(Oe(this.gos,{column:t,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Oe(this.gos,{accumulatedRowIndex:r,column:t,node:n,value:this.valueSvc.getValueForDisplay({column:t,node:n}).value,type:o,parseValue:f=>this.valueSvc.parseValue(t,n,f,this.valueSvc.getValue(t,n,void 0)),formatValue:f=>this.valueSvc.formatValue(t,n,f)??f}))??""};let l=this.gos.get("treeData"),c=this.valueSvc,d=n.level===-1&&n.footer,u=t.colDef.showRowGroup===!0&&(n.group||l);if(!d&&(a||u)){let f="",g=n;for(;g&&g.level!==-1;){let{value:C,valueFormatted:m}=c.getValueForDisplay({column:a?void 0:t,node:g,includeValueFormatted:!0,exporting:!0});f=` -> ${m??C??""}${f}`,g=g.parent}return{value:f,valueFormatted:f}}let{value:h,valueFormatted:p}=c.getValueForDisplay({column:t,node:n,includeValueFormatted:!0,exporting:!0,useRawFormula:s});return{value:h??"",valueFormatted:p}}getHeaderName(e,t){return e?e(Oe(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function G_(e,t){let n=document.defaultView||window;if(!n){X(52);return}let i=document.createElement("a"),r=n.URL.createObjectURL(t);i.setAttribute("href",r),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),i.remove(),n.setTimeout(()=>{n.URL.revokeObjectURL(r)},0)}var sSe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,overlayComponent:!0,suppressOverlays:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},ia="clientSide",os="serverSide",Gv="infinite",aSe={onGroupExpandedOrCollapsed:[ia],refreshClientSideRowModel:[ia],isRowDataEmpty:[ia],forEachLeafNode:[ia],forEachNodeAfterFilter:[ia],forEachNodeAfterFilterAndSort:[ia],resetRowHeights:[ia,os],applyTransaction:[ia],applyTransactionAsync:[ia],flushAsyncTransactions:[ia],getBestCostNodeSelection:[ia],getServerSideSelectionState:[os],setServerSideSelectionState:[os],applyServerSideTransaction:[os],applyServerSideTransactionAsync:[os],applyServerSideRowData:[os],retryServerSideLoads:[os],flushServerSideAsyncTransactions:[os],refreshServerSide:[os],getServerSideGroupLevelState:[os],refreshInfiniteCache:[Gv],purgeInfiniteCache:[Gv],getInfiniteRowCount:[Gv],isLastRowIndexKnown:[Gv,os],expandAll:[ia,os],collapseAll:[ia,os],onRowHeightChanged:[ia,os],setRowCount:[Gv,os],getCacheBlockState:[Gv,os]},lSe={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function cSe(e,t,n){let i=lSe[e];if(i){let{version:o,new:s,old:a,message:l}=i,c=a??e;return(...d)=>{let u=s?`Please use ${s} instead. `:"";return Al(`Since ${o} api.${c} is deprecated. ${u}${l??""}`),t.apply(t,d)}}let r=aSe[e];return r?(...o)=>{let s=n.rowModel.getType();if(!r.includes(s)){Yv(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`);return}return t.apply(t,o)}:t}var dSe={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},uSe={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,aasc:1,adesc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},hSe={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",overlayLoading:"Overlay",overlayExporting:"Overlay",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",richSelectLoading:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortAbsoluteAscending:["MenuCore","Sort"],sortAbsoluteDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},pSe=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),fSe=class extends K{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Cfe(J1e)}warnOnInitialPropertyUpdate(e,t){e==="api"&&sSe[t]&&X(22,{key:t})}processGridOptions(e){this.processOptions(e,rye())}validateApiFunction(e,t){return cSe(e,t,this.beans)}missingUserComponent(e,t,n,i){let r=e0[t];r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):X(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}missingDynamicBean(e){let t=dSe[e];return t?Bo(200,ce(T({},this.gos.getModuleErrorParams()),{moduleName:t,reasonOrId:e})):void 0}checkRowEvents(e){mSe.has(e)&&X(10,{eventType:e})}validateIcon(e){if(pSe.has(e)&&X(43,{iconName:e}),uSe[e])return;let t=hSe[e];if(t){mt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:Bk(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}X(134,{iconName:e})}isProvidedUserComp(e){return!!e0[e]}validateColDef(e){this.processOptions(e,Kwe())}processOptions(e,t){let{validations:n,deprecations:i,allProperties:r,propertyExceptions:o,objectName:s,docsUrl:a}=t;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],r,s,a);let l=new Set;if(Object.keys(e).forEach(d=>{let u=i[d];if(u){let{message:w,version:x}=u;l.add(`As of v${x}, ${String(d)} is deprecated. ${w??""}`)}let h=e[d];if(h==null||h===!1)return;let p=n[d];if(!p)return;let{dependencies:f,validate:g,supportedRowModels:C,expectedType:m}=p;if(m){let w=typeof h;if(w!==m){l.add(`${String(d)} should be of type '${m}' but received '${w}' (${h}).`);return}}if(C){let w=this.gridOptions.rowModelType??"clientSide";if(!C.includes(w)){l.add(`${String(d)} is not supported with the '${w}' row model. It is only valid with: ${C.join(", ")}.`);return}}if(f){let w=this.checkForRequiredDependencies(d,f,e);if(w){l.add(w);return}}if(g){let w=g(e,this.gridOptions,this.beans);if(w){l.add(w);return}}}),l.size>0)for(let d of l)Al(d)}checkForRequiredDependencies(e,t,n){let r=Object.entries(t).filter(([o,s])=>{let a=n[o];return!s.required.includes(a)});return r.length===0?null:r.map(([o,s])=>`'${String(e)}' requires '${o}' to be one of [${s.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${s.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,r){let o=["__ob__","__v_skip","__metadata__"],s=gSe(Object.getOwnPropertyNames(e),[...o,...t,...n],n),a=Object.keys(s);for(let l of a){let c=s[l],d=`invalid ${i} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;n.includes("context")&&(d+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),Al(d)}if(a.length>0&&r){let l=this.beans.frameworkOverrides.getDocLink(r);Al(`to see all the valid ${i} properties please check: ${l}`)}}};function gSe(e,t,n){let i={},r=e.filter(o=>!t.some(s=>s===o));if(r.length>0)for(let o of r)i[o]=pg({inputValue:o,allSuggestions:n}).values;return i}var mSe=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),vSe={moduleName:"Validation",version:Je,beans:[fSe]};function xk(e){let t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var CSe=class extends K{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){let t=!!this.filterManager?.isChildFilterPresent();this.beans.formula?.active?this.softFilter(t,e):this.filterNodes(t,e)}filterNodes(e,t){let n=(i,r)=>{i.hasChildren()&&e&&!r?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{let s=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return s||a}):i.childrenAfterFilter=i.childrenAfterGroup,xk(i)};if(this.doingTreeDataFiltering()){let i=(o,s)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){let l=o.childrenAfterGroup[a],c=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(o.childrenAfterGroup[a],c):n(l,c)}n(o,s)},r=o=>i(o,!1);t.executeFromRootNode(r)}else{let i=r=>n(r,!1);t.forEachChangedNodeDepthFirst(i,!0)}}softFilter(e,t){let n=i=>{if(i.childrenAfterFilter=i.childrenAfterGroup,i.hasChildren())for(let r of i.childrenAfterGroup)r.softFiltered=e&&!(r.data&&this.filterManager.doesRowPassFilter({rowNode:r}));xk(i)};t.forEachChangedNodeDepthFirst(n,!0)}doingTreeDataFiltering(){let{gos:e}=this;return e.get("treeData")&&!e.get("excludeChildrenWhenTreeDataFiltering")}},bSe=class extends S5{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,n,i,r){this.comp=e;let o=vy(this,this.beans.context,r);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);let s=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:s}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&s()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return Oe(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=$e("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Gu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.getLocaleTextFunc();Ut(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){let{beans:t}=this;if(wt(t)===this.eGui)return;let r=Wi(t,this.eGui,null,e.shiftKey);if(r){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),r.focus();return}let o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleCols,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case $.UP:case $.DOWN:case $.LEFT:case $.RIGHT:if(t)return;ei(e);case $.ENTER:t&&qn(this.eGui)&&e.preventDefault();break;case $.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&ng(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===$.TAB);if(r&&o){let s=r.shiftKey;qn(this.eGui,s)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){let t=new y5(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Yr(this.gos)}setupUserComp(){if(!this.active)return;let e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{beans:{colFilter:t},column:n,gos:i}=this,r=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;let s=this.comp.getFloatingFilterComp();s&&s.then(a=>{if(a){if(i.get("enableFilterHandlers")){let d=o,u="filter";d?.afterFloatingFilter?u="ui":d?.afterDataChange?u="dataChanged":o?.source==="api"&&(u="api"),this.updateFloatingFilterParams(this.userCompDetails,u);return}let l=t?.getCurrentFloatingFilterParentModel(n),c=o?ce(T({},o),{columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}):null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:r}),t?.isFilterActive(n)&&r(null)}setupWidth(e){let t=()=>{let n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.beans.colFilter,r=this.active?i?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!r?this.updateCompDetails(e,r,n):o.then(s=>{!s||i?.areFilterCompsDifferent(this.userCompDetails??null,r)?this.updateCompDetails(e,r,n):this.updateFloatingFilterParams(r,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(i=>{typeof i?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n=ce(T({},n),{model:Kr(this.beans.colFilter?.model??{},this.column.getColId()),source:t})),i.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function wSe(e,t){let n=e.colModel.getCol(t);if(!n){mt(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function ySe(e){e.menuSvc?.hidePopupMenu()}var B5={moduleName:"SharedMenu",version:Je,beans:[Kve],apiFunctions:{showColumnMenu:wSe,hidePopupMenu:ySe}},SSe=class extends Vme{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,n,i,r){let o=this.gos.getCallback("postProcessPopup");if(o){let{column:s,rowNode:a}=e??{};o({column:s,rowNode:a,ePopup:n,type:t,eventSource:i,mouseEvent:r})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return Fs(e)}},ua={moduleName:"Popup",version:Je,beans:[SSe]},xSe=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function ESe(e){let t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function DSe(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function _Se(e,t){let n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,"api")}function ASe(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function RSe(e){return e.filterManager?.getFilterModel()??{}}function FSe(e,t,n){let{gos:i,colModel:r,colFilter:o}=e;n&&!i.get("enableFilterHandlers")&&(X(288),n=!1);let s=r.getColDefCol(t);return s?o?.getModelForColumn(s,n)??null:null}function MSe(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function ISe(e,t){let n=e.colModel.getCol(t);if(!n){mt(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function TSe(e){e.menuSvc?.hideFilterMenu()}function PSe(e,t){let n=e.colModel.getCol(t);if(!n){mt(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function kSe(e,t){let{colModel:n,colFilter:i,gos:r}=e;if(!r.get("enableFilterHandlers")){X(287);return}let{colId:o,action:s}=t;if(o){let a=n.getColById(o);a&&i?.updateModel(a,s)}else i?.updateAllModels(s)}var LSe={filterHandler:()=>({doesFilterPass:()=>!0})},OSe=class extends K{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap=T({},T$),this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});let e=this.gos,t=T({},e.get("initialState")?.filter?.filterModel??{});this.initialModel=t,this.model=T({},t),e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",n){let{colModel:i,dataTypeSvc:r,filterManager:o}=this.beans;if(r?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}let s=[],a=this.getModel(!0);if(e){let l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,d)=>{let u=e[d];s.push(this.setModelOnFilterWrapper(c,u)),l.delete(d)}),l.forEach(c=>{let d=i.getColDefCol(c)||i.getCol(c);if(!d){X(62,{colId:c});return}if(!d.isFilterAllowed()){X(63,{colId:c});return}let u=this.getOrCreateFilterWrapper(d,!0);if(!u){X(64,{colId:c});return}s.push(this.setModelOnFilterWrapper(u,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{s.push(this.setModelOnFilterWrapper(l,null))});tt.all(s).then(()=>{let l=this.getModel(!0),c=[];this.allColumnFilters.forEach((d,u)=>{let h=a?a[u]:null,p=l?l[u]:null;Pu(h,p)||c.push(d.column)}),c.length>0?o?.onFilterChanged({columns:c,source:t}):n&&this.updateActive("filterChanged")})}getModel(e){let t={},{allColumnFilters:n,initialModel:i,beans:{colModel:r}}=this;if(n.forEach((o,s)=>{let a=this.getModelFromFilterWrapper(o);_e(a)&&(t[s]=a)}),!e)for(let o of Object.keys(i)){let s=i[o];_e(s)&&!n.has(o)&&r.getCol(o)?.isFilterAllowed()&&(t[o]=s)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(let i of Object.keys(t)){let r=t[i];this.state.set(i,{model:Kr(this.model,i),state:r})}this.setModel(e,n,!0)}getState(){let e=this.state;if(!e.size)return;let t={},n=!1;return e.forEach((i,r)=>{let o=i.state;o!=null&&(n=!0,t[r]=o)}),n?t:void 0}getModelFromFilterWrapper(e){let n=e.column.getColId();if(e.isHandler)return Kr(this.model,n);let i=e.filter;return i?typeof i.getModel!="function"?(X(66),null):i.getModel():Kr(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};let{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){let e=c=>c?c.isFilterActive?c.isFilterActive():(X(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!dg(n),r=c=>{if(!c.isPrimary())return!0;let u=!t.isPivotActive();return!c.isValueActive()||!u?!1:t.isPivotMode()?!0:i},o=[],s=[],a=(c,d,u)=>{d&&(r(c)?o.push(u):s.push(u))},l=[];return this.allColumnFilters.forEach(c=>{let d=c.column,u=d.getColId();if(c.isHandler)l.push(tt.resolve().then(()=>{a(d,this.isHandlerActive(d),{colId:u,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{let h=$h(c);h&&l.push(h.then(p=>{a(d,e(p),{colId:u,isHandler:!1,comp:p})}))}}),tt.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){let n=[];return this.allColumnFilters.forEach(i=>{let r=i.column;if(i.isHandler)n.push(tt.resolve().then(()=>{this.setColFilterActive(r,this.isHandlerActive(r),e,t)}));else{let o=$h(i);o&&n.push(o.then(s=>{this.setColFilterActive(r,s.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),tt.all(n)}doFiltersPass(e,t,n){let{data:i,aggData:r}=e,o=n?this.activeAggregateFilters:this.activeColumnFilters,s=n?r:i,a=this.model;for(let l=0;l<o.length;l++){let c=o[l],{colId:d,isHandler:u}=c;if(d!==t)if(u){let{handler:h,handlerParams:p}=c;if(!h.doesFilterPass({node:e,data:s,model:Kr(a,d),handlerParams:p}))return!1}else{let h=c.comp;if(typeof h.doesFilterPass!="function"){mt(91);continue}if(!h.doesFilterPass({node:e,data:s}))return!1}}return!0}getHandlerParams(e){let t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){let{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){let{column:t,additionalEventAttributes:n}=e,i=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(r=>{let{column:o,isHandler:s}=r;i!==o.getColId()&&(s&&r.handler.onAnyFilterChanged?.(),$h(r,s)?.then(a=>{typeof a?.onAnyFilterChanged=="function"&&a.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){let t=[];this.allColumnFilters.forEach(n=>{let i=n.isHandler;i&&n.handler.onNewRowsLoaded?.();let r=$h(n,i);r&&t.push(r.then(o=>{o.onNewRowsLoaded?.()}))}),tt.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){let{filterValueSvc:n,colModel:i}=this.beans;return(r,o)=>{let s=o?i.getCol(o):e;return s?n.getValue(s,r,t):void 0}}isFilterActive(e){let t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);let n=t?.filter;return n?n.isFilterActive():Kr(this.initialModel,e.getColId())!=null}isHandlerActive(e){let t=_e(Kr(this.model,e.getColId()));if(t)return t;let n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){let t=this.getOrCreateFilterWrapper(e,!0);return t?$h(t):null}getFilterUiForDisplay(e){let t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;let n=$h(t);return n?n.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){let n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return Hk(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":Dy(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,i,r,o){let s=()=>{let c=this.createFilterCompParams(e,r,o),d=i(c,r);return qk(this.beans.userCompFactory,t,d,n)},a=s();return a?{compDetails:a,createFilterUi:c=>(c?s():a).newAgStackInstance()}:null}createFilterInstance(e,t,n,i){let r=this.beans.selectableFilter;r?.isSelectable(t)&&(t=r.getFilterDef(e,t));let{handler:o,handlerParams:s,handlerGenerator:a}=this.createHandler(e,t,n)??{},l=this.createFilterComp(e,t,n,i,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:s};let{compDetails:c,createFilterUi:d}=l;return this.isGlobalButtons&&(c.params?.buttons?.length||X(281,{colId:e.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:s,createFilterUi:d}}createBaseFilterParams(e,t){let{filterManager:n,rowModel:i}=this.beans;return Oe(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:r=>n?.doesRowPassOtherFilters(e.getColId(),r)??!0,rowModel:i})}createFilterCompParams(e,t,n,i){let r=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,i);if(o.filterChangedCallback=r,o.filterModifiedCallback=i?()=>{}:s=>this.filterModified(e,s),t){let s=o,a=e.getColId(),l=Kr(this.model,a);s.model=l,s.state=this.state.get(a)??{model:l},s.onModelChange=(c,d)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,d).then(()=>{r(ce(T({},d),{source:"columnFilter"}))})},s.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},s.onAction=(c,d,u)=>{this.updateModel(e,c,d),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:u})},s.getHandler=()=>this.getHandler(e,!0),s.onUiChange=c=>this.filterUiChanged(e,c),s.source=n}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){let i=t(),r={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(n),r}createFilterWrapper(e){let{compDetails:t,handler:n,handlerGenerator:i,handlerParams:r,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),a=>a),s=e.getColId();if(n)return delete this.initialModel[s],n.init?.(ce(T({},r),{source:"init",model:Kr(this.model,s)})),{column:e,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:r,filterUi:this.createFilterUiForHandler(t,o)};if(o){let a={column:e,filterUi:null,isHandler:!1};return a.filterUi=this.createFilterUiLegacy(t,o,l=>{a.filter=l??void 0}),a}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,n){let{gos:i,frameworkOverrides:r,registry:o}=this.beans,s,a=p=>{let f=p.filter;if(s$(f)){let g=f.handler;return g||(s=f.doesFilterPass,s?()=>({doesFilterPass:s}):void 0)}return typeof f=="string"?f:void 0},l=i.get("enableFilterHandlers"),c=l?a(t):void 0,d=p=>()=>this.createBean(o.createDynamicBean(p,!0)),u,h;if(typeof c=="string"){let p=i.get("filterHandlers")?.[c];p!=null?u=p:Yme.has(c)&&(u=d(c),h=c)}else u=c;if(!u){let p,{compName:f,jsComp:g,fwComp:C}=d$(r,t);f?p=f:g==null&&C==null&&t.filter===!0&&(p=n),h=this.handlerMap[p],h&&(u=d(h))}return u?{filterHandler:u,handlerNameOrCallback:s??h}:l?(nn(i)&&X(277,{colId:e.getColId()}),LSe):void 0}createHandler(e,t,n){let i=this.createHandlerFunc(e,t,n);if(!i)return;let r=S3(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:s}=i,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,s,r);return{handler:a,handlerParams:l,handlerGenerator:o??s}}createHandlerFromFunc(e,t,n){let i=e.getColDef(),r=t(Oe(this.gos,{column:e,colDef:i})),o=this.createHandlerParams(e,n);return{handler:r,handlerParams:o}}createHandlerParams(e,t){let n=e.getColDef(),i=e.getColId(),r=this.filterChangedCallbackFactory(e);return Oe(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(i,o)??!0,onModelChange:(o,s)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(e,o,"handler",!1,s).then(()=>{r(ce(T({},s),{source:"columnFilter"}))})},filterParams:t})}onColumnsChanged(){let e=[],{colModel:t,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,s)=>{let a;o.column.isPrimary()?a=t.getColDefCol(s):a=t.getCol(s),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(s))});let r=i&&e.every(o=>i.isGroupFilter(o));e.length>0&&!r&&n?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){let{userCompFactory:n,frameworkOverrides:i,selectableFilter:r,gos:o}=this.beans,s=p=>{this.getOrCreateFilterUi(e)?.then(g=>{p(Lu(g))})},a=e.getColDef(),l=r?.isSelectable(a)?r.getFilterDef(e,a):a,c=l5(i,l,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",d=o.get("enableFilterHandlers"),u=S3(n,l,this.createFilterCompParams(e,d,"init",!0)),h=Oe(o,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:s,showParentFilter:t});if(d){let p=h,f=e.getColId(),g=this.filterChangedCallbackFactory(e);p.onUiChange=C=>this.floatingFilterUiChanged(e,C),p.model=Kr(this.model,f),p.onModelChange=(C,m)=>{this.updateStoredModel(f,C),this.refreshHandlerAndUi(e,C,"floating",!0,m).then(()=>{g(ce(T({},m),{source:"columnFilter"}))})},p.getHandler=()=>this.getHandler(e,!0),p.source="init"}return Kk(n,a,h,c)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,i){let r="paramsUpdated";if(e.isHandler){let o=t.getColId();delete this.initialModel[o],this.state.delete(o);let s=e.filterUi,a=this.createFilterUiForHandler(n,i);e.filterUi=a;let l=this.eventSvc;s?.created?s.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:r,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:r,column:t})}else this.destroyFilter(t,r)}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,t).then(r=>{r&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1,{column:i,isHandler:r,filterUi:o}=e,s=i.getColId();r&&(n=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[s],this.state.delete(s));let a=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(s),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(o){if(o.created)return o.promise.then(l=>(n=r?n:!!l?.isFilterActive(),this.destroyBean(l),a(),n));a()}return tt.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){let n=this.allColumnFilters.get(e);if(!n)return;let i=this.beans,r=n.column,o=r.getColDef(),s=r.isFilterAllowed(),a=this.getDefaultFilter(r),l=i.selectableFilter,c=l?.isSelectable(o)?l.getFilterDef(r,o):o,d=s?this.createHandlerFunc(r,c,this.getDefaultFilter(r)):void 0,u=!!d,h=n.isHandler;if(h!=u){this.destroyFilter(r,"paramsUpdated");return}let{compDetails:p,createFilterUi:f}=(s?this.createFilterComp(r,c,a,C=>C,u,"colDef"):null)??{compDetails:null,createFilterUi:null},g=p?.params??S3(i.userCompFactory,c,this.createFilterCompParams(r,u,"colDef"));if(h){let C=d?.handlerNameOrCallback??d?.filterHandler,m=Kr(this.model,e);if(n.handlerGenerator!=C){let w=n.handler,{handler:x,handlerParams:D}=this.createHandlerFromFunc(r,d.filterHandler,g);n.handler=x,n.handlerParams=D,n.handlerGenerator=C,delete this.model[e],x.init?.(ce(T({},D),{source:"init",model:null})),this.destroyBean(w),m!=null&&this.beans.filterManager?.onFilterChanged({columns:[r],source:t})}else{let w=this.createHandlerParams(r,p?.params);n.handlerParams=w,n.handler.refresh?.(ce(T({},w),{source:"colDef",model:m}))}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,p)||!n.filterUi||!p){this.destroyFilterUi(n,r,p,f);return}n.filterUi.filterParams=g,$h(n,h)?.then(C=>{(C?.refresh?C.refresh(g):!0)===!1?this.destroyFilterUi(n,r,p,f):this.dispatchLocalEvent({type:"filterParamsChanged",column:r,params:g})})}refreshHandlerAndUi(e,t,n,i,r){let o=this.cachedFilter(e);if(!o)return i&&this.getOrCreateFilterWrapper(e,!0),tt.resolve();if(!o.isHandler)return tt.resolve();let{filterUi:s,handler:a,handlerParams:l}=o;return F_(()=>{if(s){let{created:c,filterParams:d}=s;if(c)return s.promise.then(u=>u?{filter:u,filterParams:d}:void 0);s.refreshed=!0}return tt.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},n,r)}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){let t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);let n=this.getOrCreateFilterUi(t);return n?new Promise(i=>{n.then(r=>{i(Lu(r))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){let{state:i,model:r}=this,o=e.getColId(),s=i.get(o);return s?s.model??null:Kr(r,o)}let n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{},i=new Promise(r=>{n=r});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),i}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(i=>n(i))})}getStateForColumn(e){return this.state.get(e)??{model:Kr(this.model,e)}}setModelForColumnLegacy(e,t){let n=this.beans.colModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,t):tt.resolve()}setColDefPropsForDataType(e,t,n){let i=e.filter,r=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof r!="string")return;let o,s,a=this.beans,{filterParams:l,filterValueGetter:c}=e;r==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:s}=a.multiFilter?.getParamsForDataType(l,c,t,n)??{}:{filterParams:o,filterValueGetter:s}=Ey(r,l,c,t,n,a,this.getLocaleTextFunc()),e.filterParams=o,s&&(e.filterValueGetter=s)}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(e,t,n){return new tt(i=>{if(e.isHandler){let o=e.column,s=o.getColId(),a=this.model[s];if(this.updateStoredModel(s,t),n&&t===a){i();return}this.refreshHandlerAndUi(o,t,"api").then(()=>i());return}let r=$h(e);if(r){r.then(o=>{if(typeof o?.setModel!="function"){X(65),i();return}(o.setModel(t)||tt.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){_e(t)?this.model[e]=t:delete this.model[e];let n=this.state.get(e),i={model:t,state:n?.state};this.state.set(e,i)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent(T({type:"filterModified",column:e,filterInstance:n},t))})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(T({type:"filterUiChanged",column:e},t))}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(T({type:"floatingFilterUiChanged",column:e},t))}updateModel(e,t,n){let i=e.getColId(),r=this.cachedFilter(e),o=()=>r?.filterUi;ZD({action:t,filterParams:r?.filterUi?.filterParams,getFilterUi:o,getModel:()=>Kr(this.model,i),getState:()=>this.state.get(i),updateState:s=>this.updateState(e,s),updateModel:s=>o()?.filterParams?.onModelChange(s,ce(T({},n),{fromAction:t})),processModelToApply:r?.isHandler?r.handler.processModelToApply?.bind(r.handler):void 0})}updateAllModels(e,t){let n=[];this.allColumnFilters.forEach((i,r)=>{let o=this.beans.colModel.getColDefCol(r);o&&ZD({action:e,filterParams:i.filterUi?.filterParams,getFilterUi:()=>i.filterUi,getModel:()=>Kr(this.model,r),getState:()=>this.state.get(r),updateState:s=>this.updateState(o,s),updateModel:s=>{this.updateStoredModel(r,s),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),n.push(this.refreshHandlerAndUi(o,s,"ui"))},processModelToApply:i?.isHandler?i.handler.processModelToApply?.bind(i.handler):void 0})}),n.length&&tt.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){let t=e.getColId();P$(()=>this.cachedFilter(e)?.filterUi,()=>Kr(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){let{state:e,model:t,activeFilterComps:n}=this;for(let r of n)if(r.source==="COLUMN_MENU")return!1;let i=!1;for(let r of e.keys()){let o=e.get(r);if(o.valid===!1)return!1;(o.model??null)!==Kr(t,r)&&(i=!0)}return i}hasUnappliedModel(e){let{model:t,state:n}=this;return(n.get(e)?.model??null)!==Kr(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;let n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function NSe(e){return!!e.filterManager?.isAnyFilterPresent()}function BSe(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var VSe=class extends K{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});let{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){dg(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):tt.resolve()).then(()=>{let r={source:t,type:"filterChanged",columns:i};n&&ji(r,n),this.eventSvc.dispatchEvent(r),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!dg(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){X(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(let e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},GSe=class extends K{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,i){e&&!e.isColumn||this.showPopup(e,r=>{this.popupSvc?.positionPopupUnderMouseEvent({additionalParams:{column:e},type:n,mouseEvent:t,ePopup:r})},n,t.target,Yr(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){if(e&&!e.isColumn)return;let r=-1,o="left",s=Yr(this.gos);!s&&this.gos.get("enableRtl")&&(r=1,o="right");let a=s?void 0:4*r,l=s?void 0:4;this.showPopup(e,c=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",additionalParams:{column:e}})},n,t,s,i)}showPopup(e,t,n,i,r,o){let s=e?this.createBean(new Vu(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!e){mt(57);return}let a=bt({tag:"div",cls:`ag-menu${r?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:g=>this.trapFocusWithin(g,a)}),a.appendChild(s?.getGui());let l,c=()=>s?.afterGuiDetached(),d=zk(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,u=g=>{oy(e,!1,"contextMenu");let C=g instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),C&&i&&Dr(i)&&__(i)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),o?.()},h=this.getLocaleTextFunc(),p=r&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),f=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(a),anchorToElement:d,ariaLabel:p});f&&(this.hidePopup=l=f.hideFunc),s.afterInit().then(()=>{t(a),s.afterGuiAttached({container:n,hidePopup:l})}),oy(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==$.TAB||e.defaultPrevented||Wi(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),qn(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},HSe=class extends K{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;let i=e.getColDef(),{selectableFilter:r,valueSvc:o,formula:s}=this.beans,a=n??r?.getFilterValueGetter(e.getColId())??i.filterValueGetter;if(a)return this.executeFilterValueGetter(a,t.data,e,t,i);let l=o.getValue(e,t);return e.isAllowFormula()&&s?.isFormula(l)?s.resolveValue(e,t):l}executeFilterValueGetter(e,t,n,i,r){let{expressionSvc:o,valueSvc:s}=this.beans,a=Oe(this.gos,{data:t,node:i,column:n,colDef:r,getValue:s.getValueCallback.bind(s,i)});return typeof e=="function"?e(a):o?.evaluate(e,a)}},zSe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},jSe=class extends pe{constructor(){super(zSe,[Jr]),this.eFloatingFilterText=q}init(e){this.params=e;let t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){let n=e,i=n.getHandler();if(i.getModelAsString){let r=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(r)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},V5=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){let n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){let{filterOptions:e}=this;if(e)for(let t of e){if(typeof t=="string")continue;let n=[["displayKey"],["displayName"],["predicate","test"]],i=r=>r.some(o=>t[o]!=null)?!0:(X(72,{keys:r}),!1);if(!n.every(i)){this.filterOptions=e.filter(r=>r===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){let{filterOptions:t}=this;if(e)return e;if(t.length>=1){let n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;X(73)}else X(74)}getCustomOption(e){return this.customFilterOptions[e]}};function Xw(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function n_(e){return e==null||typeof e=="string"&&e.trim().length===0}function USe(e){return e==="AND"||e==="OR"?e:"AND"}function WSe(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(r=>r==null))return i(t,n)}function $Se(e,t){let n=e.length;return n>t&&(e.splice(t),X(78),n=t),n}function sy(e,t){let n=t.getCustomOption(e);if(n){let{numberOfInputs:r}=n;return r??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var G5=class extends xg{constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);let t=new V5;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=USe(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions(),sa(this.getGui(),"tabindex",this.isReadOnly()?"-1":null)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{let i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){let{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let o;if(n){let s=e,a=t;o=this.areSimpleModelsEqual(s,a)}else{let s=e,a=t;o=s.operator===a.operator&&Hr(s.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),tt.resolve();if(e.operator){let i=e,r=i.conditions;r==null&&(r=[],X(77));let o=$Se(r,this.maxNumConditions),s=this.getNumConditions();if(o<s)this.removeConditionsAndOperators(o);else if(o>s)for(let l=s;l<o;l++)this.createJoinOperatorPanel(),this.createOption();let a=i.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),r.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{let i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),tt.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(X(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(X(80),n=1),n>t&&(X(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){let e=this.getGui(),t=this.createManagedBean(new Ji);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());let n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);let i=this.getNumConditions()-1;this.forEachPositionInput(i,r=>this.resetInput(r)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){let e=bt({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);let t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);let i=this.eJoinPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new $ge);e.push(i);let r="ag-filter-condition-operator";return i.addCss(r),i.addCss(`${r}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){let{filterListOptions:t}=this;for(let n of t)e.addOption(n);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,r=n-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,r)=>{let o=this.isConditionDisabled(r,e);i.setDisabled(o||this.filterListOptions.length<=1),r===1&&(ep(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,r)=>{Ie(i,this.isConditionBodyVisible(r))});let n=(t??this.getJoinOperator())==="OR";for(let i of this.eJoinAnds)i.setValue(!n,!0);for(let i of this.eJoinOrs)i.setValue(n,!0);this.forEachInput((i,r,o,s)=>{this.setElementDisplayed(i,r<s),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;let{eTypes:n,eConditionBodies:i,eJoinPanels:r,eJoinAnds:o,eJoinOrs:s}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);let a=Math.max(e-1,0);this.removeElements(r,a,t),this.removeComponents(o,a,t),this.removeComponents(s,a,t)}removeElements(e,t,n){let i=Xw(e,t,n);for(let r of i)Bt(r)}removeComponents(e,t,n){let i=Xw(e,t,n);for(let r of i)Bt(r.getGui()),this.destroyBean(r)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){let n=this.getInputs(0)[0];n instanceof Mu&&this.isConditionBodyVisible(0)?t=n.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}shouldKeepInvalidInputState(){return!1}afterGuiDetached(){super.afterGuiDetached();let e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column)||this.shouldKeepInvalidInputState())return;e.onStateChange({model:e.model});let t=-1,n=-1,i=!1,r=this.getJoinOperator();for(let s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))t===-1&&(t=s,n=s);else{let a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<t;(a||l)&&(this.removeConditionsAndOperators(s,1),i=!0,l&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}resetPlaceholder(){let e=this.getLocaleTextFunc(),{filterPlaceholder:t,eTypes:n}=this;this.forEachInput((i,r,o,s)=>{if(!(i instanceof Mu))return;let a=r===0&&s>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",l=r===0&&s>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value"),c=n[o].getValue(),d=L$(this,t,a,c);i.setInputPlaceholder(d),i.setInputAriaLabel(l)})}setElementValue(e,t,n){e instanceof Mu&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){a0(e)&&Ie(e.getGui(),t)}setElementDisabled(e,t){a0(e)&&ep(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Mu&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=sy(t,this.optionsFactory),r=this.getInputs(e);for(let o=0;o<r.length;o++){let s=r[o];s!=null&&n(s,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return sy(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null)||this.positionHasInvalidInputs(e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){let n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,r){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(i),t)}updateJoinOperatorsDisabled(){let e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,r,o)=>{o===t&&this.setElementValue(i,n[r]!=null?n[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}positionHasInvalidInputs(e){return!1}isReadOnly(){return!!this.params.readOnly}},KU=".ag-input-field-input",Dq=class{constructor(e,t,n,i,r,o){this.context=e,this.eParent=r,this.alive=!0,this.debouncedReport=$n({isAlive:()=>this.alive},YU,500),this.timeoutHandle=null,Ege(t,n,i)?.newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;r.appendChild(a.getGui()),a?.afterGuiAttached?.();let{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&a.setDisabled?.(c),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){let t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){let t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){Ie(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}setCustomValidity(e,t=!1){let n=this.dateComp?.getGui().querySelector(KU);if(n&&"setCustomValidity"in n){let i=e.length>0;n.setCustomValidity(e),i?t?this.timeoutHandle=this.debouncedReport(n):YU(n):this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),Rk(n,i)}}getValidity(){return this.dateComp?.getGui().querySelector(KU)?.validity}};function YU(e){e.reportValidity()}var H5=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function _q(e,t){let{dateFrom:n,dateTo:i,type:r}=e||{};return[n&&Br(n,void 0,!0)||null,i&&Br(i,void 0,!0)||null].slice(0,sy(r,t))}var ZU=1e3,XU=1/0,qSe=class extends G5{constructor(){super("dateFilter",_q,H5),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=ZU,this.maxValidYear=XU,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!hg()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);let t=(l,c)=>{let d=e[l];if(d!=null)if(isNaN(d))X(82,{param:l});else return d==null?c:Number(d);return c},n=t("minValidYear",ZU),i=t("maxValidYear",XU);this.minValidYear=n,this.maxValidYear=i,n>i&&X(83);let{minValidDate:r,maxValidDate:o}=e,s=r instanceof Date?r:Br(r);this.minValidDate=s;let a=o instanceof Date?o:Br(o);this.maxValidDate=a,s&&a&&s>a&&X(84)}refreshInputValidation(){for(let e=0;e<this.dateConditionFromComps.length;e++)this.refreshInputPairValidation(e,!1,!0)}refreshInputPairValidation(e,t=!1,n=!1){let{dateConditionFromComps:i,dateConditionToComps:r,beans:o}=this,s=i[e],a=r[e],l=s.getDate(),c=a.getDate(),d=KSe(l,c,t),u=d?this.translate(d,[String(t?c:l)]):"",h=!hg()&&!n;(t?s:a).setCustomValidity(u,h),(t?a:s).setCustomValidity("",h),u.length>0&&o.ariaAnnounce.announceValue(u,"dateFilter")}createDateCompWrapper(e,t,n){let{beans:{userCompFactory:i,context:r,gos:o},params:s}=this,a=n==="from",l=new Dq(r,i,s.colDef,Oe(o,{onDateChanged:()=>{this.refreshInputPairValidation(t,a),this.onUiChanged()},onFocusIn:()=>this.refreshInputPairValidation(t,a),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>l.destroy()),l}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}setElementValue(e,t){e.setDate(t),t||e.setCustomValidity("")}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){let e=bt({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){let r=bt({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r,t.length-1,i))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),Xw(this.eConditionPanelsFrom,e,t),Xw(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){let i=Xw(e,t,n);for(let r of i)r.destroy()}isValidDateValue(e){if(e===null)return!1;let{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:r}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>r)return!1;return!0}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=t.getDate()!=null&&!(t.getValidity()?.valid??!0))),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!(n.getValidity()?.valid??!0))),t}canApply(e){return!this.hasInvalidInputs()}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachPositionInput(e,(n,i,r,o)=>{!t||i>=o||t&&(t=this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e),r=this.params.useIsoSeparator?"T":" ";return i.length>0&&(n.dateFrom=as(i[0],!0,r)),i.length>1&&(n.dateTo=as(i[1],!0,r)),T({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},n)}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}resetPlaceholder(){let e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){let{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(n.getDate())}),t}translate(e,t){let n=e;return e==="lessThan"?n="before":e==="greaterThan"&&(n="after"),super.translate(n,t)}};function KSe(e,t,n){return e!=null&&t!=null&&e>=t?`${n?"max":"min"}DateValidation`:null}var Aq=class extends K{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){let t=e.filterParams,n=new V5;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){let t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){let t=e.model;if(t==null)return!0;let{operator:n}=t,i=[];if(n){let s=t;i.push(...s.conditions??[])}else i.push(t);let r=n&&n==="OR"?"some":"every",o=this.params.getValue(e.node);return i[r](s=>this.individualConditionPasses(e,s,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){let{model:t,filterParams:{filterOptions:n,maxNumConditions:i}}=e;if(t==null)return;let o=N$(t)?t.conditions:[t],s=n?.map(d=>typeof d=="string"?d:d.displayKey)??this.defaultOptions;if(!(!o||o.every(d=>s.find(u=>u===d.type)!==void 0))){this.params=ce(T({},e),{model:null}),e.onModelChange(null);return}let l=!1,c=this.filterType;if((o&&!o.every(d=>d.filterType===c)||t.filterType!==c)&&(o=o.map(d=>ce(T({},d),{filterType:c})),l=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),l=!0),l){let d=o.length>1?ce(T({},t),{filterType:c,conditions:o}):ce(T({},o[0]),{filterType:c});this.params=ce(T({},e),{model:d}),e.onModelChange(d)}}individualConditionPasses(e,t,n){let i=this.optionsFactory,r=this.mapValuesFromModel(t,i),o=i.getCustomOption(t.type),s=WSe(o,r,n);return s??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(r,n,t,e))}},Rq=class extends Aq{evaluateNullValue(e){let{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:r,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(r)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";let r=this.comparator(),o=e[0]!=null?r(e[0],t):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{let s=r(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&s<=0:o>0&&s<0}case"blank":return n_(t);case"notBlank":return!n_(t);default:return X(76,{filterModelType:i}),!0}}},Fq={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},YSe={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},z5=class extends K{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){let n=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?Dl(this,"filterSummaryInactive"):null;if(e.operator!=null){let o=e,a=(o.conditions??[]).map(c=>this.getModelAsString(c,t)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${Dl(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?Dl(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{let o=e,s=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=s||{};return a&&l&&c===0?n(a,l):this.conditionToString(o,i,o.type==="inRange"||c===2,a,l)}}}updateParams(e){let{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,i,r,o){let s,a=this.getTypeKey(e);return a&&(s=Dl(this,a)),r&&o&&(s=this.getLocaleTextFunc()(r,o)),s!=null?t?`${s} ${Dl(this,"filterSummaryInRangeValues",[n(),i()])}`:`${s} ${n()}`:null}getTypeKey(e){let t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){let t=this.valueFormatter;return t?t(e??null)??"":String(e)}},Mq=class extends z5{constructor(e,t){super(e,t,n=>{let{dataTypeSvc:i,valueSvc:r}=this.beans,o=t.column,s=i?.getDateFormatterFunction(o),a=s?s(n??void 0):n;return r.formatValue(o,null,a)}),this.filterTypeKeys=Fq}conditionToString(e,t,n,i,r){let{type:o}=e,s=Br(e.dateFrom),a=Br(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):h=>ck(h,l),d=()=>s!==null?c(s):"null",u=()=>a!==null?c(a):"null";if(t){let h=this.conditionForToolPanel(o,n,d,u,i,r);if(h!=null)return h}return n?`${d()}-${u()}`:s!=null?c(s):`${o}`}};function ZSe(e,t){let n=t;return n<e?-1:n>e?1:0}var XSe=class extends Rq{constructor(){super(_q,H5),this.filterType="date",this.FilterModelFormatterClass=Mq}comparator(){return this.params.filterParams.comparator??ZSe}isValid(e){let t=this.params.filterParams.isValidDate;return!t||t(e)}},Iq=class extends pe{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;let t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){let n=e;this.onModelUpdated(n.model)}}setParams(e){let t=new V5;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){let n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;let i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.params=e;let t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){let{source:i,model:r}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(r)}}updateParams(e){let t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){let t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},QSe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},JSe=class extends Iq{constructor(){super(QSe,[Jr]),this.eReadOnlyText=q,this.eDateWrapper=q,this.FilterModelFormatterClass=Mq,this.filterType="date",this.defaultOptions=H5}setParams(e){super.setParams(e),this.createDateComponent();let t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){let n=e?Br(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ie(this.eDateWrapper,e),Ie(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){let e=this.dateComp.getDate();if(this.reactive){let t=this.params;t.onUiChange();let n=t.model,i=as(e),r=i==null?null:ce(T({},n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption}),{dateFrom:i});t.onModelChange(r,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){let{filterParams:e}=this.params,t=s5(e,this.defaultDebounceMs);return Oe(this.gos,{onDateChanged:$n(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){let{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:{column:i}}=this;this.dateComp=new Dq(e,t,i.getColDef(),this.getDateComponentParams(),n,r=>{r.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},exe={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},txe=class extends pe{constructor(){super(exe,[Jr]),this.eDateInput=q,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this),focusin:this.handleFocusIn.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}handleFocusIn(){this.params.onFocusIn?.()}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Od();let{minValidYear:i,maxValidYear:r,minValidDate:o,maxValidDate:s,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},d=this.beans.dataTypeSvc,u=l??d?.getDateIncludesTimeFlag?.(c.cellDataType)??!1;if(n?u?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&i&&X(85),s&&r&&X(86),o&&s){let[h,p]=[o,s].map(f=>f instanceof Date?f:Br(f));h&&p&&h.getTime()>p.getTime()&&X(87)}o?o instanceof Date?t.min=ck(o):t.min=o:i&&(t.min=`${i}-01-01`),s?s instanceof Date?t.max=ck(s):t.max=s:r&&(t.max=`${r}-12-31`),this.isApply=e.location==="floatingFilter"&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return Br(this.eDateInput.getValue())}setDate(e){let t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(as(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},j5=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function Ek(e){return e?.allowedCharPattern??null}function i_(e){return e==null||isNaN(e)?null:e}function Tq(e,t){let{filter:n,filterTo:i,type:r}=e||{};return[i_(n),i_(i)].slice(0,sy(r,t))}var nxe=class extends G5{constructor(){super("numberFilter",Tq,j5),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!hg()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){let t=this.eValuesFrom[e],n=this.eValuesTo[e];this.refreshInputPairValidation(t,n)}}refreshInputPairValidation(e,t,n=!1){let i=this.params.numberParser,r=QU(i,e),o=QU(i,t),s=ixe(r,o,n),a=s?this.translate(s,[String(n?o:r)]):"";(n?e:t).setCustomValidity(a),(n?t:e).setCustomValidity(""),a.length>0&&this.beans.ariaAnnounce.announceValue(a,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}refresh(e){let t=super.refresh(e),{state:n,additionalEventAttributes:i}=e,r=this.state,o=i?.fromAction;return(o&&o!="apply"||n.model!==r.model||!this.areStatesEqual(n.state,r.state))&&this.refreshInputValidation(),t}setElementValue(e,t,n){let{numberFormatter:i}=this.params,r=!n&&i?i(t??null):t;super.setElementValue(e,r),r===null&&e.setCustomValidity("")}createEValue(){let{params:e,eValuesFrom:t,eValuesTo:n}=this,i=Ek(e),r=bt({tag:"div",cls:"ag-filter-body",role:"presentation"}),o=this.createFromToElement(r,t,"from",i),s=this.createFromToElement(r,n,"to",i),a=(d,u,h)=>()=>this.refreshInputPairValidation(d,u,h),l=a(o,s,!0);o.onValueChange(l),o.addGuiEventListener("focusin",l);let c=a(o,s,!1);return s.onValueChange(c),s.addGuiEventListener("focusin",c),r}createFromToElement(e,t,n,i){let r=this.createManagedBean(i?new Go({allowedCharPattern:i}):new Sy);return r.addCss(`ag-filter-${n}`),r.addCss("ag-filter-filter"),t.push(r),e.appendChild(r.getGui()),r}removeEValues(e,t){let n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(i_(Pq(this.params.numberParser,n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!n.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}};function Pq(e,t){if(typeof t=="number")return t;let n=hi(t);return n!=null&&n.trim()===""&&(n=null),e?e(n):n==null||n.trim()==="-"?null:Number.parseFloat(n)}function QU(e,t){return i_(Pq(e,t.getValue(!0)))}function ixe(e,t,n){return e!=null&&t!=null&&e>=t?`strict${n?"Max":"Min"}ValueValidation`:null}var kq=class extends z5{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=Fq}conditionToString(e,t,n,i,r){let{filter:o,filterTo:s,type:a}=e,l=this.formatValue.bind(this);if(t){let c=this.conditionForToolPanel(a,n,()=>l(o),()=>l(s),i,r);if(c!=null)return c}return n?`${l(o)}-${l(s)}`:o!=null?l(o):`${a}`}},rxe=class extends Rq{constructor(){super(Tq,j5),this.filterType="number",this.FilterModelFormatterClass=kq}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},Lq=class extends K{constructor(e){super(),this.params=e,this.eInput=q,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new Go(this.params?.config));let t=this.eInput.getGui();e.appendChild(t);let n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){let{eInput:i}=this;i.setInputAriaLabel(e),t!==void 0&&i.setAutoComplete(t),i.toggleCss("ag-floating-filter-search-icon",!!n),i.setInputPlaceholder(n)}};function Dk(e){let t=e?.trim();return t===""?e:t}function Oq(e,t){let{filter:n,filterTo:i,type:r}=e||{};return[n||null,i||null].slice(0,sy(r,t))}var oxe={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},Nq=class extends Iq{constructor(){super(...arguments),this.eFloatingFilterInputContainer=q,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(oxe)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){let{inputSvc:t,defaultDebounceMs:n,readOnly:i}=this,{filterPlaceholder:r,column:o,browserAutoComplete:s,filterParams:a}=e,l=this.lastType??this.optionsFactory.defaultOption,c=e.filterParams.filterPlaceholder,d=r===!0?L$(this,c,"filterOoo",l):r||void 0;if(t.setParams({ariaLabel:this.getAriaLabel(o),autoComplete:s??!1,placeholder:d}),this.applyActive=_0(a),!i){let u=s5(a,n);t.setValueChangedListener($n(this,this.syncUpWithParentFilter.bind(this),u))}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let{inputSvc:t}=this,n=t.getValue();at(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){let t=e.key===$.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;let{inputSvc:i,params:r,lastType:o}=this,s=i.getValue();if(r.filterParams.trimInput&&(s=Dk(s),i.setValue(s,!0)),n){let a=r,l=a.model,c=this.convertValue(s),d=c==null?null:ce(T({},l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption}),{filter:c});a.onModelChange(d,{afterFloatingFilter:!0})}else r.parentFilterInstance(a=>{a?.onFloatingFilterChanged(o||null,s||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},sxe=class extends K{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new Sy),this.eTextInput=this.createManagedBean(new Go),this.eTextInput.setDisabled(!0);let t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){this.setAriaLabel(e),t!==void 0&&this.setAutoComplete(t),this.setPlaceholder(this.eNumberInput,n),this.setPlaceholder(this.eTextInput,n)}setPlaceholder(e,t){e.toggleCss("ag-floating-filter-search-icon",!!t),e.setInputPlaceholder(t)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},axe=class extends Nq{constructor(){super(...arguments),this.FilterModelFormatterClass=kq,this.filterType="number",this.defaultOptions=j5}updateParams(e){Ek(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=Ek(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Lq({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new sxe)}convertValue(e){return e?Number(e):null}},U5=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],lxe=class extends G5{constructor(){super("textFilter",Oq,U5),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(hi(n.getValue()))}),t}createEValue(){let e=bt({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new Go);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){let n=o=>this.removeComponents(o,e,t),{eValuesFrom:i,eValuesTo:r}=this;n(i),n(r)}},Bq=class extends z5{constructor(){super(...arguments),this.filterTypeKeys=YSe}conditionToString(e,t,n,i,r){let{filter:o,filterTo:s,type:a}=e;if(t){let l=d=>()=>Dl(this,"filterSummaryTextQuote",[d]),c=this.conditionForToolPanel(a,n,l(o),l(s),i,r);if(c!=null)return c}return n?`${o}-${s}`:o!=null?`${o}`:`${a}`}},cxe=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.includes(n);case"notContains":return!t.includes(n);case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},dxe=e=>e,uxe=e=>e==null?null:e.toString().toLowerCase(),hxe=class extends Aq{constructor(){super(Oq,U5),this.filterType="text",this.FilterModelFormatterClass=Bq}updateParams(e){super.updateParams(e);let t=e.filterParams;this.matcher=t.textMatcher??cxe,this.formatter=t.textFormatter??(t.caseSensitive?dxe:uxe)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let r=e.map(h=>this.formatter(h))||[],o=this.formatter(t),{api:s,colDef:a,column:l,context:c,filterParams:{textFormatter:d}}=this.params;if(n.type==="blank")return n_(t);if(n.type==="notBlank")return!n_(t);let u={api:s,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:d};return r.some(h=>this.matcher(ce(T({},u),{filterText:h})))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){let t=n=>{let i=T({},n),{filter:r,filterTo:o}=n;return r&&(i.filter=Dk(r)??null),o&&(i.filterTo=Dk(o)??null),i};return N$(e)?ce(T({},e),{conditions:e.conditions.map(t)}):t(e)}return e}},pxe=class extends Nq{constructor(){super(...arguments),this.FilterModelFormatterClass=Bq,this.filterType="text",this.defaultOptions=U5}createFloatingFilterInputService(){return this.createManagedBean(new Lq)}};function fxe(e){return!!e.quickFilter?.isFilterPresent()}function gxe(e){return e.quickFilter?.getText()}function mxe(e){e.quickFilter?.resetCache()}var vxe=class extends K{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){let e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){let{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,r=t.isPivotMode(),o=e?.getColumns(),s=t.getColDefCols(),a=(r&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:s)??[];o&&(a=a.concat(o)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return _e(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){X(70,{newFilter:e});return}let t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{let i=this.getTextForColumn(n,e);return _e(i)&&i.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);let{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t),i=e.getColDef();if(i.getQuickFilterText){let r=Oe(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(r)}return _e(n)?n.toString().toUpperCase():null}getAggText(e){let t=[];for(let n of this.colsToUse){let i=this.getTextForColumn(n,e);_e(i)&&t.push(i)}return t.join(`
`)}},Cxe={moduleName:"ClientSideRowModelFilter",version:Je,rowModels:["clientSide"],beans:[CSe]},Py={moduleName:"FilterCore",version:Je,beans:[VSe],apiFunctions:{isAnyFilterPresent:NSe,onFilterChanged:BSe},css:[xSe],dependsOn:[Cxe]},H_={moduleName:"FilterValue",version:Je,beans:[HSe]},Wa={moduleName:"ColumnFilter",version:Je,beans:[OSe,GSe],dynamicBeans:{headerFilterCellCtrl:bSe},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:ESe,getColumnFilterInstance:DSe,destroyFilter:_Se,setFilterModel:ASe,getFilterModel:RSe,getColumnFilterModel:FSe,setColumnFilterModel:MSe,showColumnFilter:ISe,hideColumnFilter:TSe,getColumnFilterHandler:PSe,doFilterAction:kSe},dependsOn:[Py,ua,H_,B5]},bxe={moduleName:"CustomFilter",version:Je,userComponents:{agReadOnlyFloatingFilter:jSe},dependsOn:[Wa]},wxe={moduleName:"TextFilter",version:Je,dependsOn:[Wa],userComponents:{agTextColumnFilter:{classImp:lxe,params:{useForm:!0}},agTextColumnFloatingFilter:pxe},dynamicBeans:{agTextColumnFilterHandler:hxe}},yxe={moduleName:"NumberFilter",version:Je,dependsOn:[Wa],userComponents:{agNumberColumnFilter:{classImp:nxe,params:{useForm:!0}},agNumberColumnFloatingFilter:axe},dynamicBeans:{agNumberColumnFilterHandler:rxe}},Sxe={moduleName:"DateFilter",version:Je,dependsOn:[Wa],userComponents:{agDateColumnFilter:{classImp:qSe,params:{useForm:!0}},agDateInput:txe,agDateColumnFloatingFilter:JSe},dynamicBeans:{agDateColumnFilterHandler:XSe}},xxe={moduleName:"QuickFilterCore",version:Je,rowModels:["clientSide"],beans:[vxe],dependsOn:[Py,H_]},Exe={moduleName:"QuickFilter",version:Je,apiFunctions:{isQuickFilterPresent:fxe,getQuickFilter:gxe,resetQuickFilter:mxe},dependsOn:[xxe]},Dxe={moduleName:"ExternalFilter",version:Je,dependsOn:[Py]},_xe=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",X3=(e,t,n)=>{let{editModelSvc:i}=e,r=i?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=i?.getRowValidationModel().getRowValidation(t)?.errorMessages,s=r||o;return s?.length?s.join(n("tooltipValidationErrorSeparator",". ")):void 0},Axe=class extends K{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);let r=this.gos,o=i0(r),{column:s,eGui:a}=t,l=s.getColDef();!i&&o&&!l.headerComponent&&(i=Iu(()=>a.querySelector(".ag-header-cell-text")));let c="header",u=this.beans.colNames.getDisplayNameForColumn(s,"header",!0),h=n??u,p={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>n??l?.headerTooltipValueGetter?.(Oe(r,{location:c,colDef:l,column:s,value:h,valueFormatted:u}))??l?.headerTooltip,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:s,colDef:s.getColDef()})},f=this.createTooltipFeature(p);return f&&(f=t.createBean(f),t.setRefreshFunction("tooltip",()=>f.refreshTooltip())),f}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);let r=this.gos,o=i0(r),{column:s,eGui:a}=t,l=s.getColGroupDef();!i&&o&&!l?.headerGroupComponent&&(i=Iu(()=>a.querySelector(".ag-header-group-text")));let c="headerGroup",u=this.beans.colNames.getDisplayNameForColumnGroup(s,"header"),h=n??u,p={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>n??l?.headerTooltipValueGetter?.(Oe(r,{location:c,colDef:l,column:s,value:h,valueFormatted:u}))??l?.headerTooltip,shouldDisplayTooltip:i,getAdditionalParams:()=>{let g={column:s};return l&&(g.colDef=l),g}},f=this.createTooltipFeature(p);return f&&t.createBean(f)}enableCellTooltipFeature(e,t,n){let{beans:i}=this,{gos:r,editSvc:o}=i,{column:s,rowNode:a}=e,l="cell",c=()=>{let p=!!!o?.isEditing(e)&&X3(i,e,this.getLocaleTextFunc());if(p)return l="cellEditor",p;l="cell";let f=s.getColDef(),g=a.data;if(f.tooltipField&&_e(g))return Yw(g,f.tooltipField,s.isTooltipFieldContainsDots());let C=f.tooltipValueGetter;return C?C(Oe(r,{location:"cell",colDef:s.getColDef(),column:s,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},d=i0(r);n||(d&&!e.isCellRenderer()?n=()=>{let h=!!o?.isEditing(e);if(!h&&X3(i,e,this.getLocaleTextFunc()))return!0;if(!s.isTooltipEnabled())return!1;let g=Iu(()=>{let C=e.eGui;return C.children.length===0?C:C.querySelector(".ag-cell-value")});return!h&&g()}:n=()=>!o?.isEditing(e));let u={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:n,getAdditionalParams:()=>({column:s,colDef:s.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(u,i)}setupFullWidthRowTooltip(e,t,n,i){let r={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,s=o.context;e&&t.destroyBean(e,s);let a=this.createTooltipFeature(r,o);if(a)return t.createBean(a,s)}setupFormulaTooltip(e){let{beans:t}=this,{context:n,formula:i}=t;if(!this.beans.formula?.active||!e.column.isAllowFormula())return;let r={getGui:()=>e.eGui,getTooltipValue:()=>{let s=i?.getFormulaError(e.column,e.rowNode);return s?s.message:void 0},getLocation:()=>"cellFormula",shouldDisplayTooltip:()=>!!i?.getFormulaError(e.column,e.rowNode)},o=this.createTooltipFeature(r,t);if(o)return e.createBean(o,n)}setupCellEditorTooltip(e,t){let{beans:n}=this,{context:i}=n,r=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!r)return;let o={getGui:()=>r,getTooltipValue:()=>X3(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{let{editModelSvc:a}=n,l=a?.getRowValidationModel()?.getRowValidationMap(),c=a?.getCellValidationModel()?.getCellValidationMap(),d=!!l&&l.size>0,u=!!c&&c.size>0;return d||u}},s=this.createTooltipFeature(o,n);if(s)return e.createBean(s,i)}initCol(e){let{colDef:t}=e;e.tooltipEnabled=_e(t.tooltipField)||_e(t.tooltipValueGetter)||_e(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},Rxe=class extends Ome{createTooltipComp(e,t){Dge(this.beans.userCompFactory,e)?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}},z_={moduleName:"Tooltip",version:Je,beans:[Axe],dynamicBeans:{tooltipFeature:R$,highlightTooltipFeature:Nme,tooltipStateManager:Rxe},userComponents:{agTooltipComponent:Gme},dependsOn:[ua],css:[_xe]},zv=class{constructor(e){this.cellValueChanges=e}},Q3=class extends zv{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},Fxe=10,JU=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Fxe,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Mxe=class extends K{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&Eg(this.activeCellEdit,t),i=this.activeRowEdit!==null&&Hn(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:o,rowIndex:s,column:a,oldValue:l,value:c}=e,d={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){let{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;let n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new JU(n),this.redoStack=new JU(n),this.addListeners();let i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:r=>{r.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,r=>{this.gridBodyCtrl=r.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});let r=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:r})}redo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});let r=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:r})}undoRedo(e,t,n,i,r){if(!e)return!1;let o=e.pop();return o?.cellValueChanges?(this.processAction(o,s=>s[i],r),o instanceof Q3?this.processRange(o.ranges||[o[n]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,n){for(let i of e.cellValueChanges){let{rowIndex:r,rowPinned:o,columnId:s}=i,a={rowIndex:r,rowPinned:o},l=Mi(this.beans,a);l.displayed&&l.setDataValue(s,t(i),n)}}processRange(e){let t,n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,r)=>{if(!i)return;let o=i.startRow,s=i.endRow;r===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));let a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,r={rowIndex:n,rowPinned:i},o=Mi(this.beans,r),s={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s)}setLastFocusedCell(e){let{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:r,focusSvc:o,rangeSvc:s}=this.beans,a=r.getCol(n);if(!a)return;let{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);let c={rowIndex:t,column:a,rowPinned:i};o.setFocusedCell(ce(T({},c),{forceBrowserFocus:!0})),s?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new zv(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new zv(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new zv(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new Q3(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e,{rangeSvc:t,gos:n}=this.beans;t&&Vo(n)?e=new Q3(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new zv(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;let n=new zv(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},Ixe=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",Txe={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},Pxe=class extends A0{constructor(){super(Txe,[mo]),this.eEditor=q}initialiseEditor(e){let t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:r=>this.setAriaLabel(r.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.getLocaleTextFunc(),n=u_(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},j_=class extends A0{constructor(e){super(),this.cellEditorInput=e,this.eEditor=q}initialiseEditor(e){let{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());let{eEditor:n}=this,{cellStartedEdit:i,eventKey:r,suppressPreventDefault:o}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let s,a=!0;i?(this.focusAfterAttached=!0,r===$.BACKSPACE||r===$.DELETE?s="":r&&r.length===1?o?a=!1:s=r:(s=t.getStartValue(),r!==$.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=t.getStartValue()),a&&s!=null&&n.setStartValue(s),this.addGuiEventListener("keydown",l=>{let{key:c}=l;(c===$.PAGE_UP||c===$.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){let e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Od()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},kxe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Lxe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return kxe}getAgComponents(){return[b$]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:i,step:r,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),r!=null&&e.setStep(r),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:i,max:r,getValidationErrors:o}=n,s=[],a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){let l=i instanceof Date?i:new Date(i);if(t<l){let c=l.toLocaleDateString();s.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(r){let l=r instanceof Date?r:new Date(r);if(t>l){let c=l.toLocaleDateString();s.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return s.length||(s=null),o?o({value:t,cellEditorParams:n,internalErrors:s}):s}getValue(){let{eEditor:e,params:t}=this,n=e.getDate();return!_e(n)&&!_e(t.value)?t.value:n??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return as(e,this.includeTime??!1)}},Oxe=class extends j_{constructor(){super(new Lxe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Nxe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Bxe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Nxe}getAgComponents(){return[b$]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:i,step:r,colDef:o}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),r!=null&&e.setStep(r),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let{eEditor:e,params:t}=this,n=e.getInputElement().value,i=this.formatDate(this.parseDate(n??void 0)),{min:r,max:o,getValidationErrors:s}=t,a=[];if(i){let l=new Date(i),c=this.getLocaleTextFunc();if(r){let d=new Date(r);if(l<d){let u=d.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${u}`,[u]))}}if(o){let d=new Date(o);if(l>d){let u=d.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${u}`,[u]))}}}return a.length||(a=null),s?s({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){let{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!_e(n)&&!_e(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return as(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Br(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):as(e??null,this.includeTime??!1)??void 0}},Vxe=class extends j_{constructor(){super(new Bxe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Gxe={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},Hxe=class extends A0{constructor(){super(Gxe,[Yge]),this.eEditor=q}initialiseEditor(e){let{eEditor:t}=this,{cellStartedEdit:n,eventKey:i,maxLength:r,cols:o,rows:s}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(r||200).setCols(o||60).setRows(s||10);let a;n?(this.focusAfterAttached=!0,i===$.BACKSPACE||i===$.DELETE?a="":i&&i.length===1?a=i:(a=this.getStartValue(e),i!==$.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){let{value:t}=e;return t?.toString()??t}onKeyDown(e){let t=e.key;(t===$.LEFT||t===$.UP||t===$.RIGHT||t===$.DOWN||e.shiftKey&&t===$.ENTER)&&e.stopPropagation()}afterGuiAttached(){let{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){let{eEditor:e,params:t}=this,{value:n}=t,i=e.getValue();return!_e(i)&&!_e(n)?n:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getLocaleTextFunc(),r=this.getValue(),o=[];return typeof r=="string"&&t!=null&&r.length>t&&o.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:r,internalErrors:o,cellEditorParams:e}):o}},zxe={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},jxe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return zxe}getAgComponents(){return[Sg]}init(e,t){this.eEditor=e,this.params=t;let{max:n,min:i,precision:r,step:o}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),r!=null&&e.setPrecision(r),o!=null&&e.setStep(o);let s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}getValidationErrors(){let{params:e}=this,{min:t,max:n,getValidationErrors:i}=e,o=this.eEditor.getInputElement().valueAsNumber,s=this.getLocaleTextFunc(),a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(s("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&o>n&&a.push(s("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),a.length||(a=null),i?i({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===$.UP||e.key===$.DOWN)&&e.preventDefault()}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();if(!_e(n)&&!_e(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){Od()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},Uxe=class extends j_{constructor(){super(new jxe(()=>this.getLocaleTextFunc()))}},Wxe={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},$xe=class extends A0{constructor(){super(Wxe,[Ua]),this.eEditor=q,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;let{eEditor:t,valueSvc:n,gos:i}=this,{values:r,value:o,eventKey:s}=e;if(jt(r)){X(58);return}this.startedByEnter=s!=null?s===$.ENTER:!1;let a=!1;r.forEach(u=>{let h={value:u},p=n.formatValue(e.column,null,u),f=p!=null;h.text=f?p:u,t.addOption(h),a=a||o===u}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:d}=e;l!=null&&t.setPickerGap(l),d!=null&&t.setPickerMaxHeight(d),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){let{params:e}=this,{values:t,getValidationErrors:n}=e,i=this.getValue(),r=[];if(t&&!t.includes(i)){let o=this.getLocaleTextFunc();r.push(o("invalidSelectionValidation","Invalid selection."))}else r=null;return n?n({value:i,internalErrors:r,cellEditorParams:e}):r}},qxe={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},Kxe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return qxe}getAgComponents(){return[Jr]}init(e,t){this.eEditor=e,this.params=t;let n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getValue(),r=this.getLocaleTextFunc(),o=[];return t!=null&&typeof i=="string"&&i.length>t&&o.push(r("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),n?n({value:i,cellEditorParams:e,internalErrors:o}):o}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();return!_e(n)&&!_e(t.value)?t.value:t.parseValue(n)}getStartValue(){let e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){Od()&&this.eEditor.getInputElement().focus({preventScroll:!0});let e=this.eEditor,t=e.getValue(),n=_e(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},eW=class extends j_{constructor(){super(new Kxe(()=>this.getLocaleTextFunc()))}};function Yxe(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function Zxe(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function Vq(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function Gq(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Xxe(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Qxe(e){e.undoRedo?.undo("api")}function Jxe(e){e.undoRedo?.redo("api")}function e2e(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})}function t2e(e){let t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((i,r)=>{let{rowIndex:o,rowPinned:s}=r;i.forEach((a,l)=>{let{editorValue:c,pendingValue:d,sourceValue:u,state:h}=a,p=_d(a),f=c??d;f===Tl&&(f=void 0);let g={newValue:f,oldValue:u,state:h,column:l,colId:l.getColId(),colKey:l.getColId(),rowIndex:o,rowPinned:s};(h==="editing"||h==="changed"&&p)&&n.push(g)})}),n}function n2e(e,t=!1){let{editSvc:n}=e;if(n?.isBatchEditing()){if(t)for(let i of e.editModelSvc?.getEditPositions()??[])i.state==="editing"&&n.revertSingleCellEdit(i);else Zh(e,{persist:!0});t0(e,void 0,{cancel:t})}else n?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function i2e(e,t){let n=Xi(e,t);return e.editSvc?.isEditing(n)??!1}function r2e(e,t){let{key:n,colKey:i,rowIndex:r,rowPinned:o}=t,{editSvc:s,colModel:a}=e,l=a.getCol(i);if(!l){X(12,{colKey:i});return}let d=Mi(e,{rowIndex:r,rowPinned:o||null,column:l});if(!d){X(290,{rowIndex:r,rowPinned:o});return}if(!s?.isCellEditable({rowNode:d,column:l},"api"))return;o==null&&Gq(e,r),Vq(e,i),s?.startEditing({rowNode:d,column:l},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api"})}function o2e(e){return e.editSvc?.validateEdit()||null}function s2e(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function a2e(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var l2e={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},c2e=class extends by{constructor(e){super(l2e),this.params=e}postConstruct(){cg(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{fk(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}};function d2e(e,{column:t},n,i,r="ui"){if(n instanceof KeyboardEvent&&(n.key===$.TAB||n.key===$.ENTER||n.key===$.F2||n.key===$.BACKSPACE&&i))return!0;if(n?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;let s=t?.getColDef(),a=u2e(e.gos,s),l=n?.type;return l==="click"&&n?.detail===1&&a===1||l==="dblclick"&&n?.detail===2&&a===2?!0:r==="api"?i??!1:!1}function u2e(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t?.singleClickEdit?1:2}function _k(e,{rowNode:t,column:n},i="ui"){let r=n.getColDef().editable,o=e.editModelSvc;return n.isColumnFunc(t,r)||!!o&&o.hasEdits({rowNode:t,column:n},{withOpenEditor:!0})}function h2e(e,t,n="ui"){let i=_k(e,t,n);return i===!0||n==="ui"?i:e.colModel.getCols().some(o=>_k(e,{rowNode:t.rowNode,column:o},n))}var r_=(e,t=!1)=>{if(e!==void 0)return _d(e)||t&&e.state==="editing"};function Hq(e,t,n=!1){return r_(e.editModelSvc?.getEdit(t),n)}var zq=(e,t,n)=>{if(e)for(let i=0,r=e.length;i<r;++i){let o=e[i];if(o.data&&(r_(t?.getEdit({rowNode:o,column:n}))||r_(t?.getEdit({rowNode:o.pinnedSibling,column:n})))||zq(o.childrenAfterGroup,t,n))return!0}};function jq(e,t){let{column:n,rowNode:i}=t;return e.gos.get("groupTotalRow")&&!i?.footer?!1:zq(i?.childrenAfterGroup,e.editModelSvc,n)}function Uq(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,!!t)return r_(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var p2e=class extends K{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){let{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){let r=Hq(n,e)||jq(n,e)||Uq(n,e);this.applyBatchingStyle(r)}else this.applyBatchingStyle(!1);let i=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},f2e=class extends K{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){let{rowCtrl:e,editModelSvc:t,beans:n}=this,i=e.rowNode,r=t?.getEditRow(i),o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:i});if(!r&&i.pinnedSibling&&(i=i.pinnedSibling,r=t?.getEditRow(i)),r){let s=Array.from(r.keys()).some(a=>{let l={rowNode:i,column:a};return Hq(n,l,!0)||jq(n,l)||Uq(n,l)});this.applyStyle(o,s);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){let n=this.editSvc?.isBatchEditing()??!1,i=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:r})=>{r.toggleCss("ag-row-editing",i&&t),r.toggleCss("ag-row-batch-edit",i&&t&&n),r.toggleCss("ag-row-inline-editing",t),r.toggleCss("ag-row-not-inline-editing",!t),r.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},g2e=({rowModel:e,pinnedRowModel:t,editModelSvc:n},i)=>{let r=new Set;e.forEachNode(o=>i.has(o)&&r.add(o)),t?.forEachPinnedRow("top",o=>i.has(o)&&r.add(o)),t?.forEachPinnedRow("bottom",o=>i.has(o)&&r.add(o));for(let o of i)r.has(o)||n.removeEdits({rowNode:o});return r},m2e=({editModelSvc:e},t,n)=>{for(let i of t)e?.getEditRow(i)?.forEach((r,o)=>!n.has(o)&&e.removeEdits({rowNode:i,column:o}))},v2e=e=>()=>{let t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),i=new Set(n.keys());m2e(e,g2e(e,i),t)},C2e=new Set(["undo","redo","paste","bulk","rangeSvc"]),b2e=new Set(["ui","api"]),Wq={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},w2e=new Set(Object.keys(Wq)),y2e=new Set(["paste","rangeSvc","cellClear","redo","undo"]),AD={cancel:!0,source:"api"},S2e={cancel:!1,source:"api"},Vw={checkSiblings:!0},Gw={force:!0,suppressFlash:!0},x2e=class extends K{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){let{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,AD),this.createStrategy(i)});let t=v2e(e),n=()=>{let i=this.model.getCellValidationModel().getCellValidationMap().size>0,r=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||r?this.stopEditing(void 0,AD):this.isEditing()&&(this.batch?t0(e,this.model.getEditPositions()):this.stopEditing(void 0,S2e)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,AD)):(this.stopEditing(void 0,AD),this.batch=!1)}createStrategy(e){let{beans:t,gos:n,strategy:i}=this,r=tW(n,e);if(i){if(i.beanName===r)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(r,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,i="ui"){let r=d2e(this.beans,e,t,n,i);return r&&(this.strategy??(this.strategy=this.createStrategy())),r}shouldStopEditing(e,t,n="ui"){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n="ui"){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return Lye(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??Vw)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){let{startedEdit:n=!0,event:i=null,source:r="ui",ignoreEventKey:o=!1,silent:s}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;let a=Xi(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}let l=this.shouldStartEditing(e,i,n,r);if(l===!1&&r!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,r)&&!t.continueEditing&&this.stopEditing(void 0,{source:r}),l&&this.batch&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:i,source:r,ignoreEventKey:o,startedEdit:n,silent:s})}stopEditing(e,t){let n=this.prepareStopContext(e,t);if(!n)return!1;this.stopping=!0;let i=!1,{edits:r}=n;try{let o=this.processStopRequest(n);return i||(i=o.res),r=o.edits,this.finishStopEditing(ce(T({},n),{edits:r,params:t,position:e,res:i})),i}finally{this.stopping=!1}}prepareStopContext(e,t){let{event:n,cancel:i,source:r="ui",forceCancel:o,forceStop:s}=t||{};if(w2e.has(r)&&this.batch)return this.bulkRefresh(e),null;let a=this.committing?Wq[r]:r;if(!(this.committing||this.isEditing(e)||this.batch&&this.model.hasEdits(e,Vw))||!this.strategy||this.stopping)return null;let c=Xi(this.beans,e);c&&(c.onEditorAttachedFuncs=[]);let d=!i&&(!!this.shouldStopEditing(e,n,a)||(this.committing||r==="paste")&&!this.batch)||(s??!1),u=i&&!!this.shouldCancelEditing(e,n,a)||(o??!1);return{cancel:i,cellCtrl:c??void 0,edits:this.model.getEditMap(!0),event:n,forceCancel:o,forceStop:s,position:e,source:r,treatAsSource:a,willCancel:u,willStop:d}}processStopRequest(e){let{event:t,position:n,willCancel:i,willStop:r}=e;return r||i?this.handleStopOrCancel(e):this.shouldHandleMidBatchKey(t,n)?{res:!1,edits:this.handleMidBatchKey(t,n,e)}:(Zh(this.beans,{persist:!0}),this.batch&&this.strategy?.cleanupEditors(n),{res:!1,edits:this.model.getEditMap()})}handleStopOrCancel(e){let{beans:t,model:n}=this,{cancel:i,edits:r,event:o,source:s,willCancel:a,willStop:l}=e;Zh(t,{persist:!0,isCancelling:a||i,isStopping:l});let c=n.getEditMap(),d=this.processEdits(c,i,s);this.strategy?.stop(i,o),this.clearValidationIfNoOpenEditors();for(let u of d)n.clearEditValue(u);this.bulkRefresh(void 0,r);for(let u of n.getEditPositions(c)){let h=Xi(t,u),p=_d(u);h?.refreshCell({force:!0,suppressFlash:!p})}return{res:l,edits:c}}shouldHandleMidBatchKey(e,t){return e instanceof KeyboardEvent&&this.batch&&!!this.strategy?.midBatchInputsAllowed(t)&&this.isEditing(t,{withOpenEditor:!0})}handleMidBatchKey(e,t,n){let{beans:i,model:r}=this,{cellCtrl:o,edits:s}=n,{key:a}=e,l=a===$.ENTER,c=a===$.ESCAPE,d=a===$.TAB;return l||d||c?(l||d?Zh(i,{persist:!0}):c&&this.revertSingleCellEdit(o),this.batch?this.strategy?.cleanupEditors():t0(i,r.getEditPositions(),{event:e,cancel:c}),e.preventDefault(),this.bulkRefresh(t,s,{suppressFlash:!0}),r.getEditMap()):s}finishStopEditing({cellCtrl:e,edits:t,params:n,position:i,res:r,willCancel:o,willStop:s}){let a=this.beans;r&&i&&this.model.removeEdits(i),this.navigateAfterEdit(n,e?.cellPosition),ND(a),this.clearValidationIfNoOpenEditors(),this.bulkRefresh();let{rowRenderer:l,formula:c}=a;o&&l.refreshRows({rowNodes:Array.from(t.keys())}),this.batch&&(c?c.refreshFormulas(!0):l.refreshRows({suppressFlash:!0,force:!0}),r&&s&&this.dispatchBatchEvent("batchEditingStopped",t))}clearValidationIfNoOpenEditors(){this.model.hasEdits(void 0,{withOpenEditor:!0})||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap())}navigateAfterEdit(e,t){if(!e||!t)return;let{event:n,suppressNavigateAfterEdit:i}=e;if(!(n instanceof KeyboardEvent)||i)return;let{key:o,shiftKey:s}=n,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==$.ENTER||!a)return;let l=s?$.UP:$.DOWN;this.beans.navigation?.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,n){let i=Array.from(e.keys()),r=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(let s of i){let a=e.get(s);for(let l of a.keys()){let c=a.get(l),d={rowNode:s,column:l},u=_d(c);!t&&u&&!r&&(this.setNodeDataValue(s,l,c.pendingValue,void 0,n)||o.push(d))}}return o}setNodeDataValue(e,t,n,i,r="edit"){let{beans:o}=this,s=Xi(o,{rowNode:e,column:t}),a=b2e.has(r)?"edit":r;s&&(s.suppressRefreshCell=!0),this.committing=!0;let l=e.setDataValue(t,n,a);return this.committing=!1,s&&(s.suppressRefreshCell=!1),i&&s?.refreshCell(Gw),l}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let n=Gw;t?.forceRefreshOfEditCellsOnly&&(n=T(T({},E2e(e)),Gw)),this.beans.rowRenderer.refreshCells(n)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;let{pendingValue:i,sourceValue:r}=n,{rowIndex:o,rowPinned:s,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:s,column:t,source:"api",data:a,newValue:i,oldValue:r,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){let{beans:i,gos:r}=this,{editModelSvc:o,rowModel:s}=i;nn(r,s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&o?.getEditMap(!1)?.forEach((a,l)=>{for(let c of a.keys())this.refCell({rowNode:l,column:c},a.get(c),n)}))}refCell({rowNode:e,column:t},n,i={}){let{beans:r,gos:o}=this,s=new Set([e]),a=new Set,l=e.pinnedSibling;l&&s.add(l);let c=e.sibling;c&&a.add(c);let d=e.parent;for(;d;)d.sibling?.footer&&o.get("groupTotalRow")||!d.parent&&d.sibling&&o.get("grandTotalRow")?a.add(d.sibling):a.add(d),d=d.parent;for(let u of s)this.dispatchEditValuesChanged({rowNode:u,column:t},n);for(let u of s)Xi(r,{rowNode:u,column:t})?.refreshCell(i);for(let u of a)Xi(r,{rowNode:u,column:t})?.refreshCell(i)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){let{rowNode:n}=e,{gos:i,beans:r}=this;if(n.group){if(i.get("treeData")){if(!n.data&&!i.get("enableGroupEdit"))return!1}else if(!i.get("enableGroupEdit"))return!1}let o=tW(i)==="fullRow"?h2e(r,e,t):_k(r,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){let i=Xi(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(!i?.hasBrowserFocus()&&i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(i&&this.revertSingleCellEdit(i),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){let n=Xi(this.beans,e);n?.comp?.getCellEditor()&&(t0(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),c0(this.beans,e,{silent:!0}),fg(this.beans),n?.refreshCell(Gw),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){fg(this.beans);let t=Xi(this.beans,e);t&&(t.refreshCell(Gw),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,i="ui"){let r,o=this.isEditing(),s=o&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof n0&&o&&(r=this.strategy?.moveToNextEditingCell(e,t,n,i,s)),r===null||(r=r||!!this.beans.focusSvc.focusedHeader,r===!1&&!s&&this.stopEditing()),r}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t}),r=e.pinnedSibling;if(r){let s=this.model.getEdit({rowNode:r,column:t});s&&(i=s)}let o=n?i?.editorValue??i?.pendingValue:i?.pendingValue;return o===Tl||!i?i?.sourceValue??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){Fye(this,this.beans,e)}createPopupEditorWrapper(e){return new c2e(e)}setDataValue(e,t,n){try{if((!this.isEditing()||this.committing)&&!y2e.has(n))return;let{beans:i}=this;this.strategy??(this.strategy=this.createStrategy());let r=this.batch?"ui":this.committing?n??"api":"api";if(!n||C2e.has(n))return BD(i,e,t,n,void 0,{persist:!0}),this.batch?(this.cleanupEditors(),ND(i),this.bulkRefresh(),!0):this.setNodeDataValue(e.rowNode,e.column,t,!0,n);let o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return BD(i,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:r,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return i.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,ce(T({},o),{pendingValue:t})),!0}return BD(i,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:r,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){Tye(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){let{model:n}=this;if(!this.batch||!n.hasRowEdits(e.rowNode,Vw))return;let{rowNode:r}=e,{compDetails:o,valueToDisplay:s}=t;if(o){let{params:a}=o;return a.data=n.getEditRowDataValue(r,Vw),{compDetails:o}}return{valueToDisplay:s}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,i){this.strategy?.dispatchCellEvent(e,t,n,i)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Oe(this.gos,T({type:e},e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}))}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;let{beans:i,rangeSvc:r,valueSvc:o}=this,{formula:s}=i;Zh(i,{persist:!0});let a=this.model.getEditMap(!0),l=a.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"});let c=s?.isFormula(l)??!1;n.forEach(u=>{let h=u.columns.some(p=>p?.isAllowFormula());if(r?.forEachRowInRange(u,p=>{let f=Mi(i,p);if(f===void 0)return;let g=a.get(f)??new Map,C=l;for(let m of u.columns){if(!m)continue;let w=!!c&&m.isAllowFormula();if(this.isCellEditable({rowNode:f,column:m},"api")){let x=o.getValue(m,f,!0,"api"),D=o.parseValue(m,f??null,C,x);Number.isNaN(D)&&(D=null),g.set(m,{editorValue:void 0,pendingValue:D,sourceValue:x,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}w&&(C=s?.updateFormulaByOffset({value:C,columnDelta:1}))}g.size>0&&a.set(f,g),c&&h&&(l=s?.updateFormulaByOffset({value:l,rowDelta:1}))}),this.setEditMap(a),this.batch){this.cleanupEditors(),ND(i),this.bulkRefresh();return}this.committing=!0,this.stopEditing(void 0,{source:"bulk"}),this.committing=!1,this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(a)})}),this.bulkRefresh();let d=Xi(i,{rowNode:e,column:t});d&&d.focusCell(!0)}createCellStyleFeature(e){return new p2e(e,this.beans)}createRowStyleFeature(e){return new f2e(e,this.beans)}setEditingCells(e,t){let{beans:n}=this,{colModel:i,valueSvc:r}=n,o=new Map;for(let{colId:s,column:a,colKey:l,rowIndex:c,rowPinned:d,newValue:u,state:h}of e){let p=s?i.getCol(s):l?i.getCol(l):a;if(!p)continue;let f=Mi(n,{rowIndex:c,rowPinned:d});if(!f)continue;let g=r.getValue(p,f,!0,"api");if(!t?.forceRefreshOfEditCellsOnly&&!_d({pendingValue:u,sourceValue:g})&&h!=="editing")continue;let C=o.get(f);C||(C=new Map,o.set(f,C)),u===void 0&&(u=Tl),C.set(p,{editorValue:void 0,pendingValue:u,sourceValue:g,state:h??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){let t=Xi(this.beans,e);if(!t||!this.isEditing(t,Vw))return;let n=this.model.getEdit(t);if(!n||!_d(n))return;let r=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(r,"pendingChange")}allowedFocusTargetOnValidation(e){return Xi(this.beans,e)}};function E2e(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function tW(e,t){return t??e.get("editType")??"singleCell"}var $q=class extends K{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t,n=e.previousParams,{editSvc:i,beans:r}=this,o=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=Xi(r,n));let{gos:s,editModelSvc:a}=r,l=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){let{column:c,rowIndex:d,rowPinned:u}=e,h={column:c,rowNode:Mi(r,{rowIndex:d,rowPinned:u})},p=s.get("invalidEditValueMode")==="block";if(p)return;let f=!p,g=!!a?.getCellValidationModel().hasCellValidation(h),C=f&&g;(n||l?i.stopEditing(void 0,{cancel:C,source:l&&f?"api":void 0,event:o}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){let n=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};for(let r of n){if(i.all.push(r),(this.model.getCellValidationModel().getCellValidation(r)?.errorMessages?.length??0)>0){i.fail.push(r);continue}i.pass.push(r)}if(e)for(let r of n)JD(this.beans,r,{cancel:e}),this.model.stop(r);else{let r=this.processValidationResults(i);if(r.destroy.length>0)for(let o of r.destroy)JD(this.beans,o,{event:t,cancel:e}),this.model.stop(o);if(r.keep.length>0)for(let o of r.keep){let s=Xi(this.beans,o);this.editSvc?.cellEditingInvalidCommitBlocks()||s&&this.editSvc.revertSingleCellEdit(s)}}return!0}cleanupEditors({rowNode:e}={},t){Zh(this.beans,{persist:!1});let n=this.model.getEditPositions(),i=[];if(e)for(let r of n)r.rowNode!==e&&i.push(r);else for(let r of n)i.push(r);t0(this.beans,i),ND(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){let t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{let i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){let{event:t,ignoreEventKey:n=!1,startedEdit:i,position:r,cells:o=this.model.getEditPositions()}=e,s=t instanceof KeyboardEvent&&!n&&t.key||void 0;Iye(this.beans,o,r,s,t,i)}dispatchCellEvent(e,t,n,i){let r=Xi(this.beans,e);r&&this.eventSvc.dispatchEvent(T(T({},r.createEvent(t??null,n)),i))}dispatchRowEvent(e,t,n){if(n)return;let i=I5(this.beans,e);i&&this.eventSvc.dispatchEvent(i.createRowEvent(t))}shouldStop(e,t,n="ui"){let i=this.editSvc.isBatchEditing();return i&&n==="api"?!0:i&&(n==="ui"||n==="edit")?!1:n==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===$.ENTER:null}shouldCancel(e,t,n="ui"){let i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===$.ESCAPE||i&&n==="api"||n==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});let n=[];if(e.forEach((i,r)=>{i.forEach((o,s)=>{o.state==="editing"&&n.push(ce(T({},o),{rowNode:r,column:s}))})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){let i=n.at(-1),r=i.pendingValue===Tl?void 0:i.pendingValue;this.start({position:i,event:new KeyboardEvent("keydown",{key:r}),source:"api"});let o=Xi(this.beans,i);o&&this.setFocusInOnEditor(o)}}destroy(){this.cleanupEditors(),super.destroy()}},D2e=class extends $q{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,n="ui"){let{rowNode:i}=e||{};if(!I5(this.beans,{rowNode:this.rowNode}))return!0;let o=super.shouldStop({rowNode:this.rowNode},t,n);return o!==null?o:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){let{position:t,silent:n,startedEdit:i,event:r,ignoreEventKey:o}=e,{rowNode:s}=t;this.rowNode!==s&&super.cleanupEditors(t);let a=this.beans.visibleCols.allCols,l=[],c=[];for(let d of a)d.isCellEditable(s)&&c.push(d);if(c.length!=0){this.dispatchRowEvent({rowNode:s},"rowEditingStarted",n),this.startedRows.push(s);for(let d of c){let u={rowNode:s,column:d};l.push(u),this.model.hasEdits(u)||this.model.start(u)}this.rowNode=s,this.setupEditors({cells:l,position:t,startedEdit:i,event:r,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){let{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;let i=[];if(e||this.model.getEditMap().forEach((r,o)=>{if(!(!r||r.size===0)){for(let s of r.values())if(_d(s)){i.push(o);break}}}),fg(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:n})==="block-stop")return!1;super.stop(e,t);for(let r of i)this.dispatchRowEvent({rowNode:r},"rowValueChanged");return this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){let{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;let i=Xi(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(let n of this.startedRows)this.dispatchRowEvent({rowNode:n},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,n,i="ui",r=!1){let o=e.cellPosition,s;this.model.suspend(!0);try{s=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(s===!1)return null;if(s==null)return!1;let a=s.cellPosition,l=e.isCellEditable(),c=s.isCellEditable(),d=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();let u=this.gos.get("suppressStartEditOnTab");return c&&!r?u?s.focusCell(!0,n):(s.comp?.getCellEditor()||c0(this.beans,s,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(s),s.focusCell(!1,n)):(c&&r&&this.setFocusInOnEditor(s),s.focusCell(!0,n)),!d&&!r&&(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:n}),this.cleanupEditors(s,!0),u?s.focusCell(!0,n):this.editSvc.startEditing(s,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},i)=>{if(n!=="editing")return;let r=Xi(this.beans,{rowNode:t,column:i});r&&!r.comp?.getCellEditor()&&c0(this.beans,r,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},_2e=class extends $q{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){let i=super.shouldStop(e,t,n);if(i!==null)return i;let{rowNode:r,column:o}=e||{};return(!this.rowNode||!this.column)&&r&&o?null:this.rowNode!==r||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){let{position:t,startedEdit:n,event:i,ignoreEventKey:r}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:n,event:i,ignoreEventKey:r})}dispatchRowEvent(e,t,n){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){let{colModel:t,editSvc:n}=this.beans,{rowIndex:i,column:r,rowPinned:o}=e,s=Mi(this.beans,{rowIndex:i,rowPinned:o}),a=wk(r),l=t.getCol(a),c=e.previousParams;if(c){let d=wk(c.column);if(c?.rowIndex===i&&d===a&&c?.rowPinned===o)return}n?.isEditing({rowNode:s,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,i="ui",r=!1){let o=this.beans.focusSvc.getFocusedCell();o&&(e=Ha(this.beans,o)??e);let s=e.cellPosition,a,l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),r||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:n}));try{a=this.beans.navigation?.findNextCellToFocusOn(s,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;let c=a.cellPosition,d=e.isCellEditable(),u=a.isCellEditable(),h=c&&s.rowIndex===c.rowIndex&&s.rowPinned===c.rowPinned;d&&!r&&this.setFocusOutOnEditor(e);let p=this.gos.get("suppressStartEditOnTab");if(!h&&!r&&(super.cleanupEditors(a,!0),p?a.focusCell(!0,n):this.editSvc.startEditing(a,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),u&&!r){if(a.focusCell(!1,n),p)a.focusCell(!0,n);else if(!a.comp?.getCellEditor()){let f=this.editSvc?.isEditing(a,{withOpenEditor:!0});c0(this.beans,a,{event:n,cellStartedEdit:!0,silent:f}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else u&&r&&this.setFocusInOnEditor(a),a.focusCell(!0,n);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},Vl={moduleName:"EditCore",version:Je,beans:[Rye,x2e],apiFunctions:{getEditingCells:t2e,getEditRowValues:e2e,getCellEditorInstances:Mye,startEditingCell:r2e,stopEditing:n2e,isEditing:i2e,validateEdit:o2e},dynamicBeans:{singleCell:_2e,fullRow:D2e},dependsOn:[ua,z_],css:[Ixe]},A2e={moduleName:"UndoRedoEdit",version:Je,beans:[Mxe],apiFunctions:{undoCellEditing:Qxe,redoCellEditing:Jxe,getCurrentUndoSize:s2e,getCurrentRedoSize:a2e},dependsOn:[Vl]},R2e={moduleName:"TextEditor",version:Je,userComponents:{agCellEditor:eW,agTextCellEditor:eW},dependsOn:[Vl]},F2e={moduleName:"NumberEditor",version:Je,userComponents:{agNumberCellEditor:{classImp:Uxe}},dependsOn:[Vl]},M2e={moduleName:"DateEditor",version:Je,userComponents:{agDateCellEditor:Oxe,agDateStringCellEditor:Vxe},dependsOn:[Vl]},I2e={moduleName:"CheckboxEditor",version:Je,userComponents:{agCheckboxCellEditor:Pxe},dependsOn:[Vl]},T2e={moduleName:"SelectEditor",version:Je,userComponents:{agSelectCellEditor:$xe},dependsOn:[Vl]},P2e={moduleName:"LargeTextEditor",version:Je,userComponents:{agLargeTextCellEditor:Hxe},dependsOn:[Vl]},k2e={moduleName:"CustomEditor",version:Je,dependsOn:[Vl]},L2e=class extends K{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Rl(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){let t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),yg(e))}createColumns(e,t){let n=()=>{Is(this.beans,this.columns?.tree),this.columns=null},i=e.treeDepth,o=(this.columns?.treeDepth??-1)==i,s=this.generateSelectionCols();if(wg(s,this.columns?.list??[])&&o)return;n();let{colGroupSvc:l}=this.beans,c=l?.findDepth(e.tree)??0,d=l?.balanceTreeForAutoCols(s,c)??[];this.columns={list:s,tree:d,treeDepth:c,map:{}},t(h=>{if(!h)return null;let p=h.filter(f=>!Ld(f));return[...s,...p]})}updateColumns(e){let t=Rl(e.source),{beans:n}=this;for(let i of this.columns?.list??[]){let r=this.createSelectionColDef(e.currentValue);i.setColDef(r,null,t),go(n,{state:[my(r,i.colId)]},t)}}getColumn(e){return this.columns?.list.find(t=>Ad(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!ss(e))return!1;let i=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;let r=!!Xh(n),o=ID(n);return r||o}createSelectionColDef(e){let{gos:t}=this,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),a=n??{},{rowSpan:r,spanRows:o}=a,s=so(a,["rowSpan","spanRows"]);return ce(T({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(l,c,d,u){let h=d.isSelected(),p=u.isSelected();return h===p?0:h?1:-1},editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,pinned:null},s),{colId:HW,chartDataType:"excluded"})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);let n=new da(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){let i=t&&typeof t!="string"?Xh(t):void 0,r=e&&typeof e!="string"?Xh(e):void 0,o=i!==r,s=t&&typeof t!="string"?ID(t):void 0,a=e&&typeof e!="string"?ID(e):void 0,l=s!==a,c=o0(e),d=o0(t);(o||l||c!==d)&&this.beans.colModel.refreshAll(n)}destroy(){Is(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;let i=e.length+t.length+n.length;if(i===0)return;let r=this.columns.list[0];if(!r.isVisible())return;let o=()=>{let l;switch(r.pinned){case"left":case!0:l=e;break;case"right":l=n;break;default:l=t}l&&Ci(l,r)};(this.beans.rowNumbersSvc?.getColumn(x_)?2:1)===i&&o()}},O2e=':where(.ag-selection-checkbox) .ag-checkbox-input-wrapper{&:before{content:"";cursor:pointer;inset:-8px;position:absolute}}';function N2e(e,t){if(!t.nodes.every(s=>s.rowPinned&&!My(s)?(X(59),!1):s.id===void 0?(X(60),!1):!0))return;let{nodes:i,source:r,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:r??"api",newValue:o})}function B2e(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function V2e(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function G2e(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function H2e(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function z2e(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function j2e(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function U2e(e){return e.selectionSvc?.getSelectedNodes()??[]}function W2e(e){return e.selectionSvc?.getSelectedRows()??[]}var $2e=class extends E5{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:e}=this;this.mode=ug(e),this.groupSelectsDescendants=np(e),this.groupSelectsFiltered=UD(e)==="filteredDescendants",this.masterSelectsDetail=Qj(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{let t=np(e),n=ug(e),i=UD(e)==="filteredDescendants";this.masterSelectsDetail=Qj(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;let i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);if(i==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in i)return i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n);{let r=i.checkFilteredNodes?Kq(i.node):i.newValue;return this.setNodesSelected({nodes:[i.node],newValue:r,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:n})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:r,source:o,keepDescendants:s=!1}){if(i.length===0)return 0;let{gos:a}=this;if(!ss(a)&&e)return X(132),0;if(i.length>1&&!this.isMultiSelect())return X(130),0;let l=0;for(let c=0;c<i.length;c++){let d=i[c],u=Hv(d);if(u.rowPinned&&!My(u)){X(59);continue}if(u.id===void 0){X(60);continue}if(e&&d.destroyed)continue;this.groupSelectsFiltered&&u.group&&!a.get("treeData")||this.selectRowNode(u,e,r,o)&&(this.detailSelection.delete(u.id),l++),this.groupSelectsDescendants&&u.childrenAfterGroup?.length&&(l+=this.selectChildren(u,e,o))}return n||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(Hv(i[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(Hv(i[0]),s,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,n){let i=0;return e.forEach(r=>{let o=Hv(r);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){let i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;let{gos:n,rowModel:i}=this.beans;if(!nn(n,i))return!1;let r=i.rootNode;if(!r)return!1;t||(t=new Nu(!0,r),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(s=>{if(s!==r){let a=this.calculateSelectedFromChildren(s);o=this.selectRowNode(s,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,n){let i=new Map,r=0;return this.selectedNodes.forEach(o=>{let s=o.id==e.id;if((t?!K2e(e,o):!0)&&!s){let l=this.selectedNodes.get(o.id);r+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{let s=this.calculateSelectedFromChildren(o);this.selectRowNode(o,s===null?!1:s,void 0,n)}),r}onRowSelected(e){let t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;let t=new ar(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:e,rowModel:t}=this.beans;if(!nn(e,t))return;let n=t.getTopLevelNodes();if(n===null)return;let i=[];function r(o){for(let s=0,a=o.length;s<a;s++){let l=o[s];l.isSelected()?i.push(l):l.group&&l.childrenAfterGroup&&r(l.childrenAfterGroup)}}return r(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){let n=nn(this.gos),i=!1,r=o=>{let s=this.selectRowNode(Hv(o),!1,void 0,e);i||(i=s)};if(t==="currentPage"||t==="filtered"){if(!n){mt(102);return}this.getNodesToSelect(t).forEach(r)}else this.selectedNodes.forEach(r),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){let o=this.updateGroupsFromChildrenSelections(e);i||(i=o)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){let{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return qq(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];let t=[],n=r=>t.push(r);if(e==="currentPage")return this.forEachNodeOnPage(r=>{if(!r.group){n(r);return}if(!r.expanded&&!r.footer){let o=s=>{n(s),s.childrenAfterFilter?.forEach(o)};o(r);return}this.groupSelectsDescendants||n(r)}),t;let i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(n),t):(i.forEachNode(n),t)}forEachNodeOnPage(e){let{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),r=t.getLastRow();for(let o=i;o<=r;o++){let s=n.getRow(o);s&&e(s)}}selectAllRowNodes(e){let{gos:t,selectionCtx:n}=this;if(!ss(t)){X(132);return}if(py(t)&&!Ml(t)){X(130);return}if(!this.canSelectAll())return;let{source:i,selectAll:r}=e,o=!1;if(this.getNodesToSelect(r).forEach(s=>{let a=this.selectRowNode(Hv(s),!0,void 0,i);o||(o=a)}),n.selectAll=!0,nn(t)&&this.groupSelectsDescendants){let s=this.updateGroupsFromChildrenSelections(i);o||(o=s)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){mt(103);return}let i=new Set(e),r=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&r.push(o)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:r,source:t})}canSelectAll(){return nn(this.beans.gos)}updateSelectable(e){let{gos:t,rowModel:n}=this.beans;if(!ss(t))return;let i="selectableChanged",r=e!==void 0,o=nn(t)&&this.groupSelectsDescendants,s=[],a=l=>{if(r&&!l.group)return;if(o&&l.group){let d=l.childrenAfterGroup?.some(u=>u.selectable)??!1;this.setRowSelectable(l,d,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&s.push(l)};if(o){if(e===void 0){let l=n.rootNode;e=l?new Nu(!1,l):void 0}e?.forEachChangedNodeDepthFirst(a,!r,!r)}else n.forEachNode(a);s.length&&this.setNodesSelected({nodes:s,newValue:!1,source:i}),!r&&o&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;let n=e.detailNode?.detailGridInfo?.api;if(!n)return;let i=q2e(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){let o=this.detailSelection.get(e.id)??new Set;for(let s of n.getSelectedNodes())o.add(s.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!Ml(t)){X(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{let i=this.detailSelection.get(e.id);if(i){let r=[];for(let o of i){let s=n.getRowNode(o);s&&r.push(s)}n.setNodesSelected({nodes:r,newValue:!0,source:"masterDetail"})}break}default:break}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function Hv(e){return My(e)?e.pinnedSibling:e.footer?e.sibling:e}function q2e(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),qq(t,n)}function qq(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function K2e(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}function Kq(e){let t=e.isSelected()===!1,n=e.childrenAfterFilter?.some(Kq)??!1;return t||n}var W5={moduleName:"SharedRowSelection",version:Je,beans:[L2e],css:[O2e],apiFunctions:{setNodesSelected:N2e,selectAll:B2e,deselectAll:V2e,selectAllFiltered:G2e,deselectAllFiltered:H2e,selectAllOnCurrentPage:z2e,deselectAllOnCurrentPage:j2e,getSelectedNodes:U2e,getSelectedRows:W2e}},Y2e={moduleName:"RowSelection",version:Je,rowModels:["clientSide","infinite","viewport"],beans:[$2e],dependsOn:[W5]};function Z2e(e){e.expansionSvc?.expandAll(!0)}function X2e(e){e.expansionSvc?.expandAll(!1)}function U_(e){e.rowModel?.onRowHeightChanged()}function W_(e){if(e.rowAutoHeight?.active){X(3);return}e.rowModel?.resetRowHeights()}function Q2e(e,t,n){let i=R0(e);if(i){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){mt(238);return}i.setRowCount(t,n);return}mt(28);return}V_(e)?.setRowCount(t,n)}function J2e(e){return Ui(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function eEe(e){return e.rowModel.isLastRowIndexKnown()}var $5={moduleName:"CsrmSsrmSharedApi",version:Je,apiFunctions:{expandAll:Z2e,collapseAll:X2e}},q5={moduleName:"RowModelSharedApi",version:Je,apiFunctions:{onRowHeightChanged:U_,resetRowHeights:W_}},K5={moduleName:"SsrmInfiniteSharedApi",version:Je,apiFunctions:{setRowCount:Q2e,getCacheBlockState:J2e,isLastRowIndexKnown:eEe}},tEe=class extends K{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{if(!i){mt(18),t||mt(20);return}if(this.isGridApi(i))return i;let r=i;return"current"in r?r.current?.api:(r.api||mt(19),r.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(let t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":X(21);break}})}processGroupOpenedEvent(e){let{colGroupSvc:t}=this.beans;if(t)for(let n of e.columnGroups){let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){let t=e.column,n=null,i=this.beans,{colResize:r,ctrlsSvc:o,colModel:s}=i;if(t&&(n=s.getColDefCol(t.getColId())),t&&!n)return;let a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let u=e.api.getColumnState().map(h=>({colId:h.colId}));go(i,{state:u,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let u=e.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));go(i,{state:u},"alignedGridChanged")}break;case"columnPinned":{let u=e.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));go(i,{state:u},"alignedGridChanged")}break;case"columnResized":{let d=e,u={};for(let h of a)u[h.getId()]={key:h.getColId(),newWidth:h.getActualWidth()};for(let h of d.flexColumns??[])u[h.getId()]&&delete u[h.getId()];r?.setColumnWidths(Object.values(u),!1,d.finished,"alignedGridChanged");break}}let c=o.getGridBodyCtrl().isVerticalScrollShowing();for(let d of this.getAlignedGridApis())d.setGridOption("alwaysShowVerticalScroll",c)}},nEe={moduleName:"AlignedGrids",version:Je,beans:[tEe],dependsOn:[O_]},iEe=class extends K{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},nW(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();let t=nW(this.rootNode),n=new Array(e.length);t._leafs=n;let i=0,r=this.beans.groupStage?.getNestedDataGetter(),o=r?new Set:null,s=(a,l)=>{let c=a.level+1;for(let d=0,u=l.length;d<u;++d){let h=l[d];if(!h)continue;let p=this.createRowNode(h,c);if(p.sourceRowIndex=i,n[i++]=p,o&&!o.has(h)){o.add(h),p.treeParent=a;let f=r(h);f&&s(p,f)}}};s(t,e),n.length=i}destroyAllNodes(){let{selectionSvc:e,pinnedRowModel:t,groupStage:n}=this.beans;e?.reset("rowDataChanged"),t?.isManual()&&t.reset(),n?.clearNonLeafs();let i=this.rootNode._leafs;if(i)for(let r=0,o=i.length;r<o;++r)i[r]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){let{rootNode:n,gos:i}=this;this.dispatchRowDataUpdateStarted(t);let r=Fl(i),o=e.changedRowNodes,{adds:s,updates:a}=o,l=new Set,c=[],d=this.beans.groupStage?.getNestedDataGetter(),u=i.get("suppressMaintainUnsortedOrder")?void 0:!1,h=-1,p=!1,f=(m,w)=>{if(!u&&u!==void 0){let x=m.sourceRowIndex;u=x<=h,h=x}m.data!==w&&(m.updateData(w),s.has(m)||a.add(m),!m.selectable&&m.isSelected()&&c.push(m))},g=(m,w,x)=>{for(let D=0,F=w.length;D<F;++D){let L=w[D];if(!L)continue;let V=this.getRowNode(r({data:L,level:x}));if(V?(f(V,L),p||(p=!!d&&V.treeParent!==m)):(V=this.createRowNode(L,x),s.add(V)),!d||l.has(V)){l.add(V);continue}l.add(V),V.treeParent=m;let B=d(L);B&&g(V,B,x+1)}};g(n,t,0);let C=this.deleteUnusedNodes(l,o,c,!!e.animate)||u||s.size>0;if(C){let m=n._leafs??(n._leafs=[]);u===void 0?lEe(m,l,o):aEe(m,l)&&(o.reordered=!0)}(C||p||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},n,i){let r=this.rootNode._leafs;for(let o=0,s=r.length;o<s;o++){let a=r[o];e.has(a)||this.destroyNode(a,i)&&(t.push(a),a.isSelected()&&n.push(a))}return t.length>0}updateRowData(e,t,n){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return X(268),{remove:[],update:[],add:[]};let i=[],r=Fl(this.gos),o=this.executeRemove(r,e,t,i,n),s=this.executeUpdate(r,e,t,i),a=this.executeAdd(e,t);return this.deselect(i),{remove:o,update:s,add:a}}executeRemove(e,{remove:t},{adds:n,updates:i,removals:r},o,s){let a=this.rootNode._leafs,l=a?.length,c=t?.length;if(!c||!l)return[];let d=0,u=l,h=0,p=new Array(c);for(let f=0;f<c;++f){let g=this.lookupNode(e,t[f]);if(!g)continue;let C=g.sourceRowIndex;C<u&&(u=C),C>h&&(h=C),p[d++]=g,this.destroyNode(g,s)&&(g.isSelected()&&o.push(g),n.delete(g)||(i.delete(g),r.push(g)))}return p.length=d,d&&sEe(a,u,h),p}executeUpdate(e,{update:t},{adds:n,updates:i},r){let o=t?.length;if(!o)return[];let s=new Array(o),a=0;for(let l=0;l<o;l++){let c=t[l],d=this.lookupNode(e,c);d&&(d.updateData(c),!d.selectable&&d.isSelected()&&r.push(d),s[a++]=d,n.has(d)||i.add(d))}return s.length=a,s}executeAdd(e,t){var n;let i=(n=this.rootNode)._leafs??(n._leafs=[]),r=i.length,o=e.add,s=o?.length;if(!s)return[];let a=r+s,l=this.sanitizeAddIndex(i,e.addIndex);if(l<r){for(let u=r-1,h=a-1;u>=l;--u){let p=i[u];p.sourceRowIndex=h,i[h--]=p}t.reordered=!0}i.length=a;let c=new Array(s),d=t.adds;for(let u=0;u<s;u++){let h=this.createRowNode(o[u],0);d.add(h),h.sourceRowIndex=l,i[l]=h,c[u]=h,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){let t="rowDataChanged",n=this.beans.selectionSvc;e.length&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t){let n=new ar(this.beans);n.parent=this.rootNode,n.level=t,n.group=!1,n.expanded=!1,n.setDataAndId(e,String(this.nextId++));let i=n.id,r=this.allNodesMap;return r[i]&&X(2,{nodeId:i}),r[i]=n,n}destroyNode(e,t){if(!e._destroy(t))return!1;let n=e.id,i=this.allNodesMap;i[n]===e&&delete i[n];let r=e.pinnedSibling;return r&&this.beans.pinnedRowModel?.pinRow(r,null),!0}lookupNode(e,t){if(!e)return oEe(this.rootNode._leafs,t);let n=e({data:t,level:0}),i=this.allNodesMap[n];return i||(mt(4,{id:n}),null)}sanitizeAddIndex(e,t){let n=e.length;if(typeof t!="number"||t<0||t>=n||Number.isNaN(t))return n;t=Math.ceil(t);let i=this.gos;return t>0&&i.get("treeData")&&i.get("getDataPath")&&(t=rEe(e,t)),t}},rEe=(e,t)=>{for(let n=0,i=e.length;n<i;n++)if(e[n]?.rowIndex==t-1)return n+1;return t},nW=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);let t=[],n=[],i=[],r=[];e.childrenAfterGroup=t,e.childrenAfterSort=n,e.childrenAfterAggFilter=i,e.childrenAfterFilter=r;let o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=n,o.childrenAfterAggFilter=i,o.childrenAfterFilter=r,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},oEe=(e,t)=>{if(e)for(let n=0,i=e.length;n<i;n++){let r=e[n];if(r.data===t)return r}return mt(5,{data:t}),null},sEe=(e,t,n)=>{t=Math.max(0,t);for(let i=t,r=e.length;i<r;++i){let o=e[i];i<=n&&o.destroyed||(o.sourceRowIndex=t,e[t++]=o)}e.length=t},aEe=(e,t)=>{let n=t.size;e.length=n;let i=0,r=!1,o=!1;for(let s of t){let a=s.sourceRowIndex;a===i?o||(o=r):(a>=0?o=!0:r=!0,s.sourceRowIndex=i,e[i]=s),++i}return o},lEe=(e,t,{adds:n})=>{let i=e.length,r=t.size;r>i&&(e.length=r);let o=0;for(let s=0;s<i;++s){let a=e[s];a.destroyed||(o!==s&&(a.sourceRowIndex=o,e[o]=a),++o)}for(let s of n)s.sourceRowIndex<0&&(s.sourceRowIndex=o,e[o++]=s);e.length=o},Yq=e=>{let t=e.childrenAfterSort,n=e.sibling;if(n&&(n.childrenAfterSort=t),!!t)for(let i=0,r=t.length-1;i<=r;i++){let o=t[i],s=i===0,a=i===r;o.firstChild!==s&&(o.firstChild=s,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==i&&(o.childIndex=i,o.dispatchRowEvent("childIndexChanged"))}},cEe=class extends K{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){let n=this.beans.sortSvc.getSortOptions(),i=n.length>0&&!!t&&this.gos.get("deltaSort"),{gos:r,colModel:o,rowGroupColsSvc:s,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,d=r.get("groupMaintainOrder"),u=o.getCols().some(w=>w.isRowGroupActive()),h=s?.columns,p=o.isPivotMode(),f=r.getCallback("postSortRows"),g=!1,C,m=w=>{let x=p&&w.leafGroup,D=d&&u&&!w.leafGroup;D&&(C??(C=this.shouldSortContainsGroupCols(n)),D&&(D=!C));let F=null;if(D){let L=!1;if(h){let V=w.level+1;V<h.length&&(L=h[V].wasSortExplicitlyRemoved)}L||(F=hEe(w))}else!n.length||x||(i&&t?F=dEe(a,w,t,e,n):F=a.doFullSort(w.childrenAfterAggFilter,n));if(F||(F=w.childrenAfterAggFilter?.slice(0)??[]),g||(g=w.childrenAfterSort?.[0]!==F[0]),w.childrenAfterSort=F,Yq(w),f){let L={nodes:w.childrenAfterSort};f(L)}};if(e?.forEachChangedNodeDepthFirst(m),g&&r.get("groupHideOpenParents")){let w=c?.columns;w?.length&&l.refreshCells({columns:w,force:!0})}}shouldSortContainsGroupCols(e){let t=e.length;if(!t)return!1;if(xl(this.gos)){for(let n=0;n<t;++n){let i=e[n].column;if(i.isPrimary()&&i.isRowGroupActive())return!0}return!1}for(let n=0;n<t;++n)if(e[n].column.getColDef().showRowGroup)return!0;return!1}},dEe=(e,t,n,i,r)=>{let o=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(o,r);let a=new Set,l=[],{updates:c,adds:d}=n;for(let h=0,p=o.length;h<p;++h){let f=o[h];c.has(f)||d.has(f)||i&&!i.canSkip(f)?l.push({currentPos:l.length,rowNode:f}):a.add(f)}let u=s.filter(h=>a.has(h)).map((h,p)=>({currentPos:p,rowNode:h}));return l.sort((h,p)=>e.compareRowNodes(r,h,p)),uEe(e,r,l,u)},uEe=(e,t,n,i)=>{let r=0,o=0,s=n.length,a=i.length,l=new Array(s+a),c=0;for(;r<s&&o<a;){let d=n[r],u=i[o];e.compareRowNodes(t,d,u)<0?(l[c++]=d.rowNode,++r):(l[c++]=u.rowNode,++o)}for(;r<s;)l[c++]=n[r++].rowNode;for(;o<a;)l[c++]=i[o++].rowNode;return l},hEe=e=>{let t=e.childrenAfterSort,n=e.childrenAfterAggFilter,i=t?.length,r=n?.length;if(!i||!r)return null;let o=new Array(r),s=new Set;for(let l=0;l<r;++l)s.add(n[l]);let a=0;for(let l=0;l<i;++l){let c=t[l];s.delete(c)&&(o[a++]=c)}if(s.size===0&&a===i)return t;for(let l of s)o[a++]=l;return o.length=a,o},pEe=class extends K{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=null,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=$n(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){let e=this.beans,t=new ar(e);this.rootNode=t,this.nodeManager=this.createBean(new iEe(t));let n=()=>{this.beans.groupStage?.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:n,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){let{beans:e,stagesRefreshProps:t}=this,n=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(i=>!!i);this.stages=n;for(let i=n.length-1;i>=0;--i){let r=n[i];for(let o of r.refreshProps)t.set(o,i)}this.addManagedPropertyListeners([...t.keys(),"rowData"],i=>{let r=i.changeSet?.properties;r&&this.onPropChange(r)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let r,o=!1;do{r=!1;let s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,n),c=Math.min(a,i);for(let d=l;d<=c;d++){let u=this.getRow(d);if(u.rowHeightEstimated){let h=Nr(this.beans,u);u.setRowHeight(h.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}onPropChange(e){let{nodeManager:t,gos:n,beans:i}=this,r=i.groupStage;if(!t)return;let o=new Set(e),s=r?.onPropChange(o),a;o.has("rowData")?a=n.get("rowData"):s&&(a=r?.extractData()),a&&!Array.isArray(a)&&(a=null,X(1));let l={step:"nothing",changedProps:o};a&&(!s&&!this.isEmpty()&&a.length>0&&n.exists("getRowId")&&!n.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!n.get("suppressAnimationFrame"),l.changedRowNodes=new sg,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));let c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){let{stages:t,stagesRefreshProps:n}=this;if(!t)return null;let i=t.length,r=i;for(let o=0,s=e.length;o<s&&r;++o)r=Math.min(r,n.get(e[o])??r);return r<i?t[r].step:null}setRowTopAndRowIndex(e){let{beans:t,rowsToDisplay:n}=this,i=t.environment.getDefaultRowHeight(),r=0,o=po(this.gos,"normal");for(let s=0,a=n.length;s<a;++s){let l=n[s],c=l.id;if(c!=null&&e?.add(c),l.rowHeight==null){let d=Nr(t,l,o,i);l.setRowHeight(d.height,d.estimated)}l.setRowTop(r),l.setRowIndex(s),r+=l.rowHeight}if(this.beans.formula?.active){let s=this.formulaRows;for(let a=0,l=s.length;a<l;++a){let c=s[a];c.formulaRowIndex=a}}}clearRowTopAndRowIndex(e,t){let n=e.active,i=s=>{s?.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},r=s=>{i(s),i(s.detailNode),i(s.sibling);let a=s.childrenAfterGroup;if(!s.hasChildren()||!a)return;let l=s.level==-1;if(!(n&&!l&&!s.expanded))for(let d=0,u=a.length;d<u;++d)r(a[d])},o=this.rootNode;o&&r(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){let{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;let i=e.sibling?.displayed?1:0;return(e.childrenAfterSort?.length??0)+i}getTopLevelRowDisplayedIndex(e){let{beans:t,rootNode:n,rowsToDisplay:i}=this;if(!n||!i.length||i[0]===n)return e;let o=n.childrenAfterSort,s=l=>{let c=o[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a?.getTopDisplayIndex(i,e,o,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){let{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let r=this.getRow(e);r.footer&&(r=r.sibling);let o=r.parent;for(;o&&o!==t;)r=o,o=r.parent;let s=t.childrenAfterSort?.indexOf(r)??-1;return s>=0?s:e}getRowBounds(e){let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Xv(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){let i=t.length===0||t.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:Xv(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Xv(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){let t=new Nu(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;let{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.length||t.adds.size)}refreshModel(e){let{nodeManager:t,beans:n,eventSvc:i,started:r,refreshingModel:o}=this;if(!t)return;let s=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&s));if(r&&s&&i.dispatchEvent({type:"rowDataUpdated"}),!r||o||n.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=s);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,n.masterDetailSvc?.refreshModel(e),s&&e.step!=="group"&&n.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(a,e.changedRowNodes);case"map":this.doRowsToDisplay()}let l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,i.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){return this.isEmpty()?"noRows":this.beans.filterManager?.isAnyFilterPresent()&&this.getRowCount()===0?"noMatchingRows":null}getNodesInRangeForSelection(e,t){let n=!1,i=!1,r=[],o=np(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(i)return;if(n&&(s===t||s===e)&&(i=!0,o&&s.group)){Zq(r,s);return}if(!n){if(s!==t&&s!==e)return;n=!0,t===e&&(i=!0)}(!s.group||!o)&&r.push(s)}),r}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){let t=this.rowsToDisplay,n=t.length;if(this.isEmpty()||n===0)return-1;let i=0,r=n-1;if(e<=0)return 0;if(t[r].rowTop<=e)return r;let s=-1,a=-1;for(;;){let l=Math.floor((i+r)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?i=l+1:c.rowTop>e&&(r=l-1),s===i&&a===r))return l;s=i,a=r}}isRowInPixel(e,t){let n=e.rowTop,i=n+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){let t=this.rootNode?._leafs;if(t)for(let n=0,i=t.length;n<i;++n)e(t[n],n)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){let t=this.rowsToDisplay;for(let n=0,i=t.length;n<i;++n)e(t[n],n)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t,n){let{colModel:i,rowGroupColsSvc:r}=this.beans;if(!i.isPivotMode())return;if(!r?.columns.length){e(this.rootNode,0);return}let o=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,s=>s.leafGroup?null:s[o])}depthFirstSearchRowNodes(e,t=!1,n=o=>o.childrenAfterGroup,i=this.rootNode,r=0){let o=r;if(!i)return o;let s=i===this.rootNode;if(s||e(i,o++),i.hasChildren()&&!i.footer){let a=n(i);if(a){let l=this.beans.footerSvc;o=l?.addTotalRows(o,i,e,t,s,"top")??o;for(let c of a)o=this.depthFirstSearchRowNodes(e,t,n,c,o);return l?.addTotalRows(o,i,e,t,s,"bottom")??o}}return o}doAggregate(e){this.rootNode&&this.beans.aggStage?.execute(e)}doFilterAggregates(e){let t=this.rootNode,n=this.beans.filterAggStage;if(n){n.execute(e);return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){let n=this.beans.sortStage;if(n){n.execute(e,t);return}e.forEachChangedNodeDepthFirst(i=>{i.childrenAfterSort=i.childrenAfterAggFilter.slice(0),Yq(i)})}doGrouping(e){let t=this.rootNode;if(!t)return;let i=this.beans.groupStage?.execute(e);if(i===void 0){let r=t._leafs;t.childrenAfterGroup=r,t.updateHasChildren();let o=t.sibling;o&&(o.childrenAfterGroup=r)}(i||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){let t=this.beans.filterStage;if(t){t.execute(e);return}e.forEachChangedNodeDepthFirst(n=>{n.childrenAfterFilter=n.childrenAfterGroup,xk(n)},!0)}doPivot(e){this.beans.pivotStage?.execute(e)}getRowNode(e){let t=this.nodeManager?.getRowNode(e);return typeof t=="object"?t:this.beans.groupStage?.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];let n=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),n)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){let e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){let{nodeManager:e,beans:t,eventSvc:n,asyncTransactions:i}=this;if(!e)return;t.valueCache?.onDataChanged();let r=[],o=[],s=new sg,a=!this.gos.get("suppressAnimationFrame");for(let{rowDataTransaction:l,callback:c}of i??[]){this.rowNodesCountReady=!0;let d=e.updateRowData(l,s,a);r.push(d),c&&o.push(c.bind(null,d))}this.commitTransactions(s,a),o.length>0&&setTimeout(()=>{for(let l=0,c=o.length;l<c;l++)o[l]()},0),r.length>0&&n.dispatchEvent({type:"asyncTransactionsFlushed",results:r}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){let t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let n=new sg,i=!this.gos.get("suppressAnimationFrame"),r=t.updateRowData(e,n,i);return this.commitTransactions(n,i),r}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{rootNode:e,beans:t}=this;if(t.formula?.active){let r=e?.childrenAfterSort??[];this.formulaRows=r,this.rowsToDisplay=r.filter(o=>!o.softFiltered);for(let o of this.rowsToDisplay)o.setUiLevel(0);return}let n=t.flattenStage;if(n){this.rowsToDisplay=n.execute();return}let i=this.rootNode.childrenAfterSort??[];for(let r of i)r.setUiLevel(0);this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let e=this.rootNode;if(!e)return;let t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);let n=e.sibling;n?.setRowHeight(n.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n?.setRowHeight(n.rowHeight,!0);let i=t.sibling;i?.setRowHeight(i.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},Zq=(e,t)=>{let n=t.childrenAfterGroup;if(n)for(let i=0,r=n.length;i<r;++i){let o=n[i];o.data&&e.push(o),o.group&&Zq(e,o)}};function fEe(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function gEe(e,t){let n=Ro(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function mEe(e){return Ro(e)?.isEmpty()??!0}function vEe(e,t){Ro(e)?.forEachLeafNode(t)}function CEe(e,t){Ro(e)?.forEachNodeAfterFilter(t)}function bEe(e,t){Ro(e)?.forEachNodeAfterFilterAndSort(t)}function wEe(e,t){return e.frameworkOverrides.wrapIncoming(()=>Ro(e)?.updateRowData(t))}function yEe(e,t,n){e.frameworkOverrides.wrapIncoming(()=>Ro(e)?.batchUpdateRowData(t,n))}function SEe(e){e.frameworkOverrides.wrapIncoming(()=>Ro(e)?.flushAsyncTransactions())}function xEe(e){return e.selectionSvc?.getBestCostNodeSelection()}var EEe={moduleName:"ClientSideRowModel",version:Je,rowModels:["clientSide"],beans:[pEe,cEe],dependsOn:[N_]},DEe={moduleName:"ClientSideRowModelApi",version:Je,apiFunctions:{onGroupExpandedOrCollapsed:fEe,refreshClientSideRowModel:gEe,isRowDataEmpty:mEe,forEachLeafNode:vEe,forEachNodeAfterFilter:CEe,forEachNodeAfterFilterAndSort:bEe,applyTransaction:wEe,applyTransactionAsync:yEe,flushAsyncTransactions:SEe,getBestCostNodeSelection:xEe,resetRowHeights:W_,onRowHeightChanged:U_},dependsOn:[$5,q5]},_Ee=class extends K{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:r,exportRowNumbers:o}=t,s=this.getColumnsToExport({allColumns:n,skipRowGroups:r,columnKeys:i,exportRowNumbers:o});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,n,i){let r=t.shouldRowBeSkipped||(()=>!1),s=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!s,l=this.colModel.isPivotMode()?i.leafGroup:!i.group,c=!!i.footer,d=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&_fe(this.gos,i);if(!l&&!c&&(t.skipRowGroups||d||a)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!l&&!c||r(Oe(this.gos,{node:i})))return;let p=e.onNewBodyRow(i);if(n.forEach((f,g)=>{p.onColumn(f,g,i)}),t.getCustomContentBelowRow){let f=t.getCustomContentBelowRow(Oe(this.gos,{node:i}));f&&e.addCustomContent(f)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new r$,{colGroupSvc:r}=this.beans,o=r?r.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((r,o)=>{i.onColumn(r,o,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel?.getPinnedTopRow(r.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{let i=this.rowModel,r=nn(this.gos,i),o=Ui(this.gos,i),s=!r&&e.onlySelected,a=this.processRow.bind(this,n,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,d)=>c.rowIndex-d.rowIndex).map(c=>i.getRow(c.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())r?i.forEachPivotNode(a,!0,l==="filteredAndSorted"):o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);else if(e.onlySelectedAllPages||s){let c=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?i.forEachNode(a):r||o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return n}}replicateSortedOrder(e){let{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;let i=t.getSortOptions(),r=(o,s)=>o.rowIndex!=null&&s.rowIndex!=null?o.rowIndex-s.rowIndex:o.level===s.level?o.parent?.id===s.parent?.id?n.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):r(o.parent,s.parent):o.level>s.level?r(o.parent,s):r(o,s.parent);e.sort(r)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel?.getPinnedBottomRow(r.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){let{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:r}=e,{colModel:o,gos:s,visibleCols:a}=this,l=o.isPivotMode(),c=h=>Ld(h)?!1:!Or(h)||i;if(r?.length)return o.getColsForKeys(r).filter(c);let d=s.get("treeData"),u=[];return t&&!l?u=o.getCols():u=a.allCols,u=u.filter(h=>c(h)&&(n&&!d?!bg(h):!0)),u}recursivelyAddHeaderGroups(e,t,n){let i=[];for(let r of e){let o=r;if(o.getChildren)for(let s of o.getChildren()??[])i.push(s)}e.length>0&&Lr(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),r=0;for(let o of t){let s=o,a;n?a=n(Oe(this.gos,{columnGroup:s})):a=this.beans.colNames.getDisplayNameForColumnGroup(s,"header");let c=(s.isExpandable()?s.getLeafColumns():[]).reduce((d,u,h,p)=>{let f=Qe(d);return u.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[h],d.push(f)):f&&f[1]==null&&(f[1]=h-1),h===p.length-1&&f&&f[1]==null&&(f[1]=h),d},[]);i.onColumn(s,a||"",r++,s.getLeafColumns().length-1,c)}}},Y5={moduleName:"SharedExport",version:Je,beans:[_Ee]},iW=`\r
`,AEe=class extends N5{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,iW),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue({column:e,node:n,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(X(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=iW),this.isFirstLine=!1}},REe=class extends O5{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){X(51);return}let t=()=>{let i=this.getMergedParams(e),r=this.getData(i),o=new Blob(["\uFEFF",r],{type:"text/plain"}),s=i.fileName,a=typeof s=="function"?s(Oe(this.gos,{})):s;G_(this.getFileName(a),o)},{overlays:n}=this.beans;n?n.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:r,gos:o}=this.beans,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:d,columnSeparator:u}=e;return new AEe({colModel:t,colNames:n,valueSvc:r,gos:o,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:d||!1,columnSeparator:u||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function FEe(e,t){return e.csvCreator?.getDataAsCsv(t)}function MEe(e,t){e.csvCreator?.exportDataAsCsv(t)}var Z5={moduleName:"CsvExport",version:Je,beans:[REe],apiFunctions:{getDataAsCsv:FEe,exportDataAsCsv:MEe},dependsOn:[Y5]},IEe=class extends K{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];let{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:r}=this;for(let o=0;o<e;o++){let s=n+o,a=new ar(i);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(s),a.setRowTop(t*s),r.push(a)}}getBlockStateJson(){let{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){_e(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(jt(this.params.datasource.getRows)){X(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){let{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:r},gos:o}=this;return Oe(o,{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:r})}forEachNode(e,t,n){this.rowNodes.forEach((i,r)=>{this.startRow+r<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);let n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){let{rowNodes:t,beans:n}=this;t.forEach((r,o)=>{let s=e.rowData?e.rowData[o]:void 0;!r.id&&r.alreadyRendered&&s&&(t[o]=new ar(n),t[o].setRowIndex(r.rowIndex),t[o].setRowTop(r.rowTop),t[o].setRowHeight(r.rowHeight),r._destroy(!0)),this.setDataAndId(t[o],s,this.startRow+o)});let i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){let e=this.rowNodes;for(let t=0,n=e.length;t<n;t++)e[t]._destroy(!1);e.length=0,super.destroy()}},TEe=2,PEe=class extends K{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.params,n=this.createBean(new IEe(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(let t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(let e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(tp(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(s=>s!=e),n=(s,a)=>a.lastAccessed-s.lastAccessed;t.sort(n);let i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null,o=TEe-1;t.forEach((s,a)=>{let l=s.state==="needsLoading"&&a>=o,c=i?a>=r:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(s)||this.isBlockFocused(s))return;this.removeBlockFromCache(s)}})}isBlockFocused(e){let t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let{blockSize:n,overflowSize:i}=this.params,o=(e.id+1)*n+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,_e(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t={value:0};for(let n of this.getBlocksInOrder())n.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){let e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];for(let t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(let t of e)this.destroyBlock(t)}purgeCache(){for(let e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,r=!1,o={value:0},s=!1;for(let l of this.getBlocksInOrder())if(!s){if(r&&i+1!==l.id){s=!0;continue}i=l.id,l.forEachNode(c=>{let d=c===e||c===t;(r||d)&&n.push(c),d&&(r=!r)},o,this.rowCount)}return s||r?[]:n}},kEe=class extends K{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;let e=this.beans,t=new ar(e);this.rootNode=t,t.level=-1,this.rowHeight=fo(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=fo(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!Pu(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getOverlayType(){return this.infiniteCache?.getRowCount()===0?this.beans.filterManager?.isAnyFilterPresent()?"noMatchingRows":"noRows":null}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;Fl(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();let e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:r,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:i,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:fo(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new PEe(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){let t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function LEe(e){V_(e)?.refreshCache()}function OEe(e){V_(e)?.purgeCache()}function NEe(e){return V_(e)?.getRowCount()}var BEe=class extends K{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Gk(this.gos);let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=$n(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ci(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){tp(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(let n of t)n.load();this.printCacheStatus()}getBlockState(){let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){tp(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},VEe={moduleName:"InfiniteRowModelCore",version:Je,rowModels:["infinite"],beans:[kEe,BEe]},GEe={moduleName:"InfiniteRowModel",version:Je,apiFunctions:{refreshInfiniteCache:LEe,purgeInfiniteCache:OEe,getInfiniteRowCount:NEe},dependsOn:[VEe,K5]},HEe="\u2191",zEe="\u2193",jEe={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},UEe=class extends pe{constructor(){super(jEe),this.eValue=q,this.eDelta=q,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),r=_e(i)?i:n,o=t>=0,s=this.eDelta;o?s.textContent=HEe+r:s.textContent=zEe+r,s.classList.toggle("ag-value-change-delta-up",o),s.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),at(this.eDelta)}refresh(e,t=!1){let{value:n,valueFormatted:i}=e,{eValue:r,lastValue:o,beans:s}=this;if(n===o||(_e(i)?r.textContent=i:_e(n)?r.textContent=n:at(r),s.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;let a=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,l=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){let c=a-l;this.showDelta(e,c)}return o&&r.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},WEe=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",$Ee={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},qEe=class extends pe{constructor(){super($Ee),this.eCurrent=q,this.refreshCount=0,this.registerCSS(WEe)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious?.remove();let{beans:t,eCurrent:n}=this,i=bt({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(jt(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;let i=this.eCurrent;return _e(e.valueFormatted)?i.textContent=e.valueFormatted:_e(e.value)?i.textContent=n:at(i),!0}},KEe=class extends K{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){let r=this.animations[t];r.delete(e);let o=Date.now(),s=o+n,a=o+n+i,l={phase:"flash",flashEndTime:s,fadeEndTime:a};r.set(e,l);let c=`ag-cell-${t}`,d=`${c}-animation`,{comp:u,eGui:{style:h}}=e;u.toggleCss(c,!0),u.toggleCss(d,!1),h.removeProperty("transition"),h.removeProperty("transition-delay"),this.nextAnimationTime&&s+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=s)}advanceAnimations(){let e=Date.now(),t=null;for(let n of Object.keys(this.animations)){let i=this.animations[n],r=`ag-cell-${n}`,o=`${r}-animation`;for(let[s,a]of i){if(!s.isAlive()||!s.comp){i.delete(s);continue}let{phase:l,flashEndTime:c,fadeEndTime:d}=a,u=l==="flash"?c:d;if(!(e+15>=u)){t=Math.min(u,t??1/0);continue}let{comp:p,eGui:{style:f}}=s;switch(l){case"flash":p.toggleCss(r,!1),p.toggleCss(o,!0),f.transition=`background-color ${d-c}ms`,f.transitionDelay=`${c-e}ms`,t=Math.min(d,t??1/0),a.phase="fade";break;case"fade":p.toggleCss(r,!1),p.toggleCss(o,!1),f.removeProperty("transition"),f.removeProperty("transition-delay"),i.delete(s);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;let n=Bd(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(let e of Object.keys(this.animations))this.animations[e].clear()}};function YEe(e,t={}){let{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{for(let i of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))n.flashCell(i,t)})}var X5={moduleName:"HighlightChanges",version:Je,beans:[KEe],userComponents:{agAnimateShowChangeCellRenderer:UEe,agAnimateSlideCellRenderer:qEe},apiFunctions:{flashCells:YEe}};function ZEe(e){return e.stateSvc?.getState()??{}}function XEe(e,t,n){return e.stateSvc?.setState(t,n)}function rW(e){return e=T({},e),e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=QEe(e)),e.version=Je,e}function QEe(e){return e.cellSelection=JEe(e,"rangeSelection"),e}function JEe(e,t){if(e&&typeof e=="object")return e[t]}var eDe=class extends K{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=$n(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=$n(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=$n(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){let{gos:e,ctrlsSvc:t,colDelayRenderSvc:n}=this.beans;this.isClientSideRowModel=nn(e);let i=rW(e.get("initialState")??{}),r=i.partialColumnState;delete i.partialColumnState,this.cachedState=i;let o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(i))),(i.columnOrder||i.columnVisibility||i.columnSizing||i.columnPinning||i.columnGroup)&&n?.hideColumns("columnState");let[s,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(s(),o(()=>{this.setupStateOnColumnsInitialised(i,!!r),n?.revealColumns("columnState")}))},rowCountReady:()=>{a?.(),o(()=>this.setupStateOnRowCountReady(i))},firstDataRendered:()=>{l?.(),o(()=>this.setupStateOnFirstDataRendered(i))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){let n=rW(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();let i="api",r=t?new Set(t):void 0;this.setGridReadyState(n,i,r),this.setColumnsInitialisedState(n,i,!!r,r),this.setRowCountState(n,i,r),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,i,r),this.stopSuppressEvents(i)})}setGridReadyState(e,t,n){t==="api"&&!n?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");let t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,i){this.setColumnState(e,t,n,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);let n=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){let{filter:i,rowGroupExpansion:r,ssrmRowGroupExpansion:o,rowSelection:s,pagination:a,rowPinning:l}=e,c=(u,h)=>!n?.has(u)&&(h||t==="api");c("filter",i)&&this.setFilterState(i),c("rowGroupExpansion",r)&&this.setRowGroupExpansionState(o,r,t),c("rowSelection",s)&&this.setRowSelectionState(s,t),c("pagination",a)&&this.setPaginationState(a,t),c("rowPinning",l)&&this.setRowPinningState(l);let d=this.updateCachedState.bind(this);d("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(d("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),d("rowGroupExpansion",void 0)):(d("rowGroupExpansion",this.getRowGroupExpansionState()),d("ssrmRowGroupExpansion",void 0)),d("rowSelection",this.getRowSelectionState()),d("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");let t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},i=()=>t("filter",this.getFilterState()),{gos:r,colFilter:o,selectableFilter:s}=this.beans;this.addManagedEventListeners({filterChanged:i,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(r.get("groupDefaultExpanded")!==0||r.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&t("pagination",this.getPaginationState())},pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())}),o&&this.addManagedListeners(o,{filterStateChanged:i}),s&&this.addManagedListeners(s,{selectedFilterChanged:i})}setFirstDataRenderedState(e,t,n){let{scroll:i,cellSelection:r,focusedCell:o,columnOrder:s}=e,a=(d,u)=>!n?.has(d)&&(u||t==="api");a("focusedCell",o)&&this.setFocusedCellState(o),a("cellSelection",r)&&this.setCellSelectionState(r),a("scroll",i)&&this.setScrollState(i),this.setColumnPivotState(!!s?.orderedColIds,t);let l=this.updateCachedState.bind(this);l("sideBar",this.getSideBarState()),l("focusedCell",this.getFocusedCellState());let c=this.getRangeSelectionState();l("rangeSelection",c),l("cellSelection",c),l("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");let t=this.updateCachedState.bind(this),n=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:n,cellFocusCleared:n,cellSelectionChanged:i=>{if(i.finished){let r=this.getRangeSelectionState();t("rangeSelection",r),t("cellSelection",r)}},bodyScrollEnd:()=>t("scroll",this.getScrollState())})}getColumnState(){let e=this.beans;return rSe($D(e),e.colModel.isPivotMode())}setColumnState(e,t,n,i){let{sort:r,rowGroup:o,aggregation:s,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:d,columnOrder:u}=e,h=!1,p=(A,I)=>{let j=!i?.has(A)&&!!(I||t==="api");return h||(h=j),j},f={},g=A=>{let I=f[A];return I||(I={colId:A},f[A]=I,I)},C={},m=p("sort",r);m&&r?.sortModel.forEach(({colId:A,sort:I},j)=>{let G=g(A);G.sort=I,G.sortIndex=j}),(m||!n)&&(C.sort=null,C.sortIndex=null);let w=p("rowGroup",o);w&&o?.groupColIds.forEach((A,I)=>{let j=g(A);j.rowGroup=!0,j.rowGroupIndex=I}),(w||!n)&&(C.rowGroup=null,C.rowGroupIndex=null);let x=p("aggregation",s);x&&s?.aggregationModel.forEach(({colId:A,aggFunc:I})=>{g(A).aggFunc=I}),(x||!n)&&(C.aggFunc=null);let D=p("pivot",a);D&&(a?.pivotColIds.forEach((A,I)=>{let j=g(A);j.pivot=!0,j.pivotIndex=I}),this.gos.updateGridOptions({options:{pivotMode:!!a?.pivotMode},source:t})),(D||!n)&&(C.pivot=null,C.pivotIndex=null);let F=p("columnPinning",l);if(F){for(let A of l?.leftColIds??[])g(A).pinned="left";for(let A of l?.rightColIds??[])g(A).pinned="right"}(F||!n)&&(C.pinned=null);let L=p("columnVisibility",c);if(L)for(let A of c?.hiddenColIds??[])g(A).hide=!0;(L||!n)&&(C.hide=null);let V=p("columnSizing",d);if(V)for(let{colId:A,flex:I,width:j}of d?.columnSizingModel??[]){let G=g(A);G.flex=I??null,G.width=j}(V||!n)&&(C.flex=null);let B=u?.orderedColIds,P=!!B?.length&&!i?.has("columnOrder"),U=P?B.map(A=>g(A)):Object.values(f);(U.length||h)&&(this.columnStates=U,go(this.beans,{state:U,applyOrder:P,defaultState:C},t))}setColumnPivotState(e,t){let n=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;this.columnGroupStates=void 0;let r=this.beans,{pivotResultCols:o,colGroupSvc:s}=r;if(o?.isPivotResultColsPresent()){if(n){let a=[];for(let l of n)o.getPivotResultCol(l.colId)&&a.push(l);go(r,{state:a,applyOrder:e},t)}i&&s?.setColumnGroupState(i,t)}}getColumnGroupState(){let e=this.beans.colGroupSvc;if(!e)return;let t=e.getColumnGroupState();return oSe(t)}setColumnGroupState(e,t,n){let i=this.beans.colGroupSvc;if(!i||n?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let r=new Set(e.columnGroup?.openColumnGroupIds),s=i.getColumnGroupState().map(({groupId:a})=>{let l=r.has(a);return l&&r.delete(a),{groupId:a,open:l}});for(let a of r)s.push({groupId:a,open:!0});s.length&&(this.columnGroupStates=s),i.setColumnGroupState(s,t)}getFilterState(){let{filterManager:e,selectableFilter:t}=this.beans,n=e?.getFilterModel();n&&Object.keys(n).length===0&&(n=void 0);let i=e?.getFilterState(),r=e?.getAdvFilterModel()??void 0,o=t?.getState();return n||r||i||o?{filterModel:n,columnFilterState:i,advancedFilterModel:r,selectableFilters:o}:void 0}setFilterState(e){let{filterManager:t,selectableFilter:n}=this.beans,{filterModel:i,columnFilterState:r,advancedFilterModel:o,selectableFilters:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};s!==void 0&&n?.setState(s??{}),(i!==void 0||r!==void 0)&&t?.setFilterState(i??null,r??null,"columnFilter"),o!==void 0&&t?.setAdvFilterModel(o??null,"advancedFilter")}getRangeSelectionState(){let e=this.beans.rangeSvc?.getCellRanges().map(t=>{let{id:n,type:i,startRow:r,endRow:o,columns:s,startColumn:a}=t;return{id:n,type:i,startRow:r,endRow:o,colIds:s.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeSvc:n,colModel:i,visibleCols:r}=this.beans;if(!Vo(t)||!n)return;let o=[];for(let s of e?.cellRanges??[]){let a=[];for(let c of s.colIds){let d=i.getCol(c);d&&a.push(d)}if(!a.length)continue;let l=i.getCol(s.startColId);if(!l){let c=r.allCols,d=new Set(a);l=c.find(u=>d.has(u))}o.push(ce(T({},s),{columns:a,startColumn:l}))}n.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:r,animationFrameSvc:o,ctrlsSvc:s}=this.beans;i.wrapIncoming(()=>{s.get("center").setCenterViewportScrollLeft(n),s.getScrollFeature()?.setVerticalScrollPosition(t),r.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.beans.focusSvc.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}let{colId:i,rowIndex:r,rowPinned:o}=e;t.setFocusedCell({column:n.getCol(i),rowIndex:r,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let{pagination:e,gos:t}=this.beans;if(!e)return;let n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e,t){let{pagination:n,gos:i}=this.beans;if(!n)return;let{pageSize:r,page:o}=e??{page:0,pageSize:i.get("paginationPageSize")},s=t==="gridInitializing";r&&!i.get("paginationAutoPageSize")&&n.setPageSize(r,s?"initialState":"pageSizeSelector"),typeof o=="number"&&(s?n.setPage(o):n.goToPage(o))}getRowSelectionState(){let e=this.beans.selectionSvc;if(!e)return;let t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){let{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){let t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,n){let i=this.beans.expansionSvc;if(!i)return;let r=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};i.setExpansionState(r,n)}updateColumnState(e){let t=this.getColumnState(),n=!1,i=this.cachedState;for(let r of Object.keys(t)){let o=t[r];Pu(o,i[r])||(n=!0)}this.cachedState=T(T({},i),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),Pu(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=ce(T({},this.cachedState),{[e]:t})}refreshStaleState(){let e=this.staleStateKeys;for(let t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(let t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){let e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},tDe={moduleName:"GridState",version:Je,beans:[eDe],apiFunctions:{getState:ZEe,setState:XEe}};function nDe(e){return e.rowModel.isLastRowIndexKnown()}function iDe(e){return e.pagination?.getPageSize()??100}function rDe(e){return e.pagination?.getCurrentPage()??0}function oDe(e){return e.pagination?.getTotalPages()??1}function sDe(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function aDe(e){e.pagination?.goToNextPage()}function lDe(e){e.pagination?.goToPreviousPage()}function cDe(e){e.pagination?.goToFirstPage()}function dDe(e){e.pagination?.goToLastPage()}function uDe(e,t){e.pagination?.goToPage(t)}var hDe=class extends K{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){let t=this.beans,n=()=>{let i=Math.max(fo(t),1),r=Math.floor(e/i);t.pagination.setPageSize(r,"autoCalculated")};this.isBodyRendered?$n(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Hw="paginationPageSizeSelector",pDe={tag:"span",cls:"ag-paging-page-size"},fDe=class extends pe{constructor(){super(pDe),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Hw,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){at(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Hw)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){let r=this.gos.exists("paginationPageSize"),o=this.gos.get(Hw)!==!0;X(94,{pageSizeSet:r,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||X(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Hw}),e.unshift("")}let i=String(n?"":t);this.selectPageSizeComp?(Hr(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),r=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Ji).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(Hw);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},gDe={selector:"AG-PAGE-SIZE-SELECTOR",component:fDe},mDe=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",vDe=class extends Vd{constructor(){super(),this.btFirst=q,this.btPrevious=q,this.btNext=q,this.btLast=q,this.lbRecordCount=q,this.lbFirstRowOnPage=q,this.lbLastRowOnPage=q,this.lbCurrent=q,this.lbTotal=q,this.pageSizeComp=q,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(mDe)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[gDe]);let{btFirst:t,btPrevious:n,btNext:i,btLast:r}=this;this.activateTabIndex([t,n,i,r]),t.insertAdjacentElement("afterbegin",$e(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",$e(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",$e(e?"previous":"next",this.beans)),r.insertAdjacentElement("afterbegin",$e(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):m5(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(let e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===$.ENTER||i.key===$.SPACE)&&(i.preventDefault(),n())}})}g5(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):Bl(e,this.getLocaleTextFunc.bind(this))}getTemplate(){let e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){let e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),r=e===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){h0(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null,r=this.pagination.getCurrentPage(),o=this.pagination.getPageSize(),s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*r+1,a=s+o-1,e&&a>i&&(a=i));let l=s+o-1,c=!e&&n<l,d=this.formatNumber(s);this.lbFirstRowOnPage.textContent=d;let u,h=this.getLocaleTextFunc();c?u=h("pageLastRowUnknown","?"):u=this.formatNumber(a),this.lbLastRowOnPage.textContent=u;let f=t>0?r+1:0,g=this.formatNumber(f);this.lbCurrent.textContent=g;let C,m;if(e)C=this.formatNumber(t),m=this.formatNumber(i);else{let w=h("more","more");C=w,m=w}this.lbTotal.textContent=C,this.lbRecordCount.textContent=m,this.announceAriaStatus(d,u,m,g,C)}announceAriaStatus(e,t,n,i,r){let o=this.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${n}`,d=`${s} ${i} ${l} ${r}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}},CDe={selector:"AG-PAGINATION",component:vDe},bDe=class extends K{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){let e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return CDe}isPaginateChildRows(){let e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){let t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;let{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return _e(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:_e(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:_e(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:_e(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){let e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);let t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){let e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}let n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();let r=this.currentPage,o=n*r,s=n*(r+1)-1;if(s>i&&(s=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),s===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{let a=e.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){let e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}let{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},wDe={moduleName:"Pagination",version:Je,beans:[bDe,hDe],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:nDe,paginationGetPageSize:iDe,paginationGetCurrentPage:rDe,paginationGetTotalPages:oDe,paginationGetRowCount:sDe,paginationGoToNextPage:aDe,paginationGoToPreviousPage:lDe,paginationGoToFirstPage:cDe,paginationGoToLastPage:dDe,paginationGoToPage:uDe},dependsOn:[ua]};function yDe(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function Xq(e,t,n,i,r){t&&(i&&t.parent&&t.parent.level!==-1&&Xq(e,t.parent,n,i,r),t.setExpanded(n,void 0,r))}function SDe(e,t){return e.rowModel.getRowNode(t)}function xDe(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function EDe(e){return e.rowRenderer.getRenderedNodes()}function DDe(e,t,n){e.rowModel.forEachNode(t,n)}function _De(e){return e.rowRenderer.firstRenderedRow}function ADe(e){return e.rowRenderer.lastRenderedRow}function RDe(e,t){return e.rowModel.getRow(t)}function FDe(e){return e.rowModel.getRowCount()}var MDe={moduleName:"RowApi",version:Je,apiFunctions:{redrawRows:yDe,setRowNodeExpanded:Xq,getRowNode:SDe,addRenderedRowListener:xDe,getRenderedNodes:EDe,forEachNode:DDe,getFirstDisplayedRowIndex:_De,getLastDisplayedRowIndex:ADe,getDisplayedRowAtIndex:RDe,getDisplayedRowCount:FDe}},IDe={moduleName:"ScrollApi",version:Je,apiFunctions:{getVerticalPixelRange:Yxe,getHorizontalPixelRange:Zxe,ensureColumnVisible:Vq,ensureIndexVisible:Gq,ensureNodeVisible:Xxe}};function TDe(e,t,n){if(!t)return;let i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,r=`aria-${t}`;n===null?i.removeAttribute(r):i.setAttribute(r,n)}function PDe(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function kDe(e){e.frameworkOverrides.wrapIncoming(()=>{for(let t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function LDe(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function ODe(e){e.animationFrameSvc?.flushAllFrames()}function NDe(e){return{rowHeight:fo(e),headerHeight:Fy(e)}}function BDe(e,t={}){let n=[];for(let o of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){let s=o.getCellRenderer();s!=null&&n.push(Lu(s))}if(t.columns?.length)return n;let i=[],r=yk(t.rowNodes);for(let o of e.rowRenderer.getAllRowCtrls()){if(r&&!Sk(o.rowNode,r)||!o.isFullWidth())continue;let s=o.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){let l=s[a];l!=null&&i.push(Lu(l))}}return[...i,...n]}var VDe={moduleName:"RenderApi",version:Je,apiFunctions:{setGridAriaProperty:TDe,refreshCells:PDe,refreshHeader:kDe,isAnimationFrameQueueEmpty:LDe,flushAllAnimationFrames:ODe,getSizesForCurrentTheme:NDe,getCellRendererInstances:BDe}},GDe=":where(.ag-ltr) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,left .2s ease-in-out}}:where(.ag-rtl) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,right .2s ease-in-out}}";function HDe(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function Qq({colAutosize:e,visibleCols:t},n,i){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:i,source:"api"}):e?.autoSizeCols(ce(T({},n),{colKeys:n.colIds??t.allCols,source:"api"}))}function zDe(e,t){t&&typeof t=="object"?Qq(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var jDe=class extends K{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){let{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let n=!1,i=t.type;if(i==="fitGridWidth"||i==="fitProvidedWidth")n=!0;else if(i==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});let r=e.get("rowData");n=r!=null&&r.length>0&&nn(e)}n&&this.beans.colDelayRenderSvc?.hideColumns(i)}}autoSizeCols(e){let{eventSvc:t,visibleCols:n,colModel:i}=this.beans;zw(this.beans,!0),this.innerAutoSizeCols(e).then(r=>{let o=d=>s0(t,Array.from(d),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return zw(this.beans,!1),o(r);let s=oW(this.beans),a=d=>n.leftCols.some(u=>Ad(u,d)),l=d=>n.rightCols.some(u=>Ad(u,d)),c=e.colKeys.filter(d=>!i.getCol(d)?.getColDef().suppressAutoSize&&!Or(d)&&!a(d)&&!l(d));this.sizeColumnsToFit(s,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(d=>ce(T({},d),{key:d.colId})),colKeys:c,onlyScaleUp:!0,animate:!1}),zw(this.beans,!1),o(r)})}innerAutoSizeCols(e){return new Promise((t,n)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,n));let{colKeys:i,skipHeader:r,skipHeaderGroups:o,stopAtGroup:s,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:d="api"}=e,{animationFrameSvc:u,renderStatus:h,colModel:p,autoWidthCalc:f,visibleCols:g}=this.beans;if(u?.flushAllFrames(),this.timesDelayed<5&&h&&(!h.areHeaderCellsRendered()||!h.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,n)});return}this.timesDelayed=0;let C=new Set,m=-1,w=Object.fromEntries(c.map(V=>{var B=V,{colId:F}=B,L=so(B,["colId"]);return[F,L]})),x=r??this.gos.get("skipHeaderOnAutoSize"),D=o??x;for(;m!==0;){m=0;let F=[];for(let L of i){if(!L||gy(L))continue;let V=p.getCol(L);if(!V||C.has(V)||V.getColDef().suppressAutoSize)continue;let B=f.getPreferredWidthForColumn(V,x);if(B>0){let P=w[V.colId]??{};P.minWidth??(P.minWidth=l),P.maxWidth??(P.maxWidth=a);let U=UDe(V,B,P);V.setActualWidth(U,d),C.add(V),m++}F.push(V)}F.length&&g.refresh(d)}D||this.autoSizeColumnGroupsByColumns(i,d,s),t(C)})}autoSizeColumn(e,t,n){this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let{colModel:i,ctrlsSvc:r}=this.beans,o=new Set,s=i.getColsForKeys(e);for(let l of s){let c=l.getParent();for(;c&&c!=n;)c.isPadding()||o.add(c),c=c.getParent()}let a;for(let l of o){for(let c of r.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols(T({colKeys:this.beans.visibleCols.allCols},e))}addColumnAutosizeListeners(e,t){let n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);let r=new oa(e);return r.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),r.destroy()}}addColumnGroupResize(e,t,n){let i=this.gos.get("skipHeaderOnAutoSize"),r=()=>{let o=[],s=t.getDisplayedLeafColumns();for(let a of s)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",r),()=>e.removeEventListener("dblclick",r)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;let n=oW(this.beans);if(n>0){this.sizeColumnsToFit(n,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):X(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let{beans:r}=this,o=i?.animate??!0;o&&zw(r,!0);let s={};for(let C of i?.columnLimits??[]){let m=C,{key:w}=m,x=so(m,["key"]);s[typeof w=="string"?w:w.getColId()]=x}let a=r.visibleCols.allCols;if(e<=0||!a.length)return;let l=Ru(a);if(i?.onlyScaleUp&&l>e||e===l&&a.every(x=>{if(x.colDef.suppressSizeToFit)return!0;let D=s?.[x.getId()],F=D?.minWidth??i?.defaultMinWidth,L=D?.maxWidth??i?.defaultMaxWidth,V=x.getActualWidth();return(F==null||V>=F)&&(L==null||V<=L)}))return;let d=[],u=[];for(let w of a){let x=i?.colKeys?.some(D=>Ad(w,D))??!0;w.getColDef().suppressSizeToFit||!x?u.push(w):d.push(w)}let h=d.slice(0),p=!1,f=w=>{Ci(d,w),u.push(w)};for(let w of d){w.resetActualWidth(t);let x=s?.[w.getId()],D=x?.minWidth??i?.defaultMinWidth,F=x?.maxWidth??i?.defaultMaxWidth,L=w.getActualWidth();typeof D=="number"&&L<D?w.setActualWidth(D,t,!0):typeof F=="number"&&L>F&&w.setActualWidth(F,t,!0)}for(;!p;){p=!0;let w=e-Ru(u);if(w<=0)for(let x of d){let D=s?.[x.getId()]?.minWidth??i?.defaultMinWidth??x.minWidth;x.setActualWidth(D,t,!0)}else{let x=w/Ru(d),D=w;for(let F=d.length-1;F>=0;F--){let L=d[F],V=s?.[L.getId()],B=V?.minWidth??i?.defaultMinWidth,P=V?.maxWidth??i?.defaultMaxWidth,U=L.getMinWidth(),A=L.getMaxWidth(),I=typeof B=="number"&&B>U?B:U,j=typeof P=="number"&&P<A?P:A,G=Math.round(L.getActualWidth()*x);G<I?(G=I,f(L),p=!1):G>j?(G=j,f(L),p=!1):F===0&&(G=D),L.setActualWidth(G,t,!0),D-=G}}}for(let w of h)w.fireColumnWidthChangedEvent(t);let g=r.visibleCols;g.setLeftValues(t),g.updateBodyWidths(),!n&&(s0(this.eventSvc,h,!0,t),o&&zw(r,!1))}applyAutosizeStrategy(){let{gos:e,colDelayRenderSvc:t}=this.beans,n=e.get("autoSizeStrategy");n?.type!=="fitGridWidth"&&n?.type!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;let i=n.type;if(i==="fitGridWidth"){let{columnLimits:r,defaultMinWidth:o,defaultMaxWidth:s}=n,a=r?.map(({colId:l,minWidth:c,maxWidth:d})=>({key:l,minWidth:c,maxWidth:d}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:s,columnLimits:a})}else i==="fitProvidedWidth"&&this.sizeColumnsToFit(n.width,"sizeColumnsToFit");t?.revealColumns(i)})}onFirstDataRendered(n){var i=n,{colIds:e}=i,t=so(i,["colIds"]);setTimeout(()=>{if(!this.isAlive())return;let r="autosizeColumns";e?this.autoSizeCols(ce(T({},t),{source:r,colKeys:e})):this.autoSizeAllColumns(ce(T({},t),{source:r})),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(let e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function UDe(e,t,n={}){let i=n.minWidth??e.getMinWidth();t<i&&(t=i);let r=n.maxWidth??e.getMaxWidth();return t>r&&(t=r),t}function oW({ctrlsSvc:e,scrollVisibleSvc:t}){let n=e.getGridBodyCtrl(),r=n.isVerticalScrollShowing()?t.getScrollbarWidth():0;return lg(n.eGridBody)-r}var sW="ag-animate-autosize";function zw({ctrlsSvc:e,gos:t},n){if(!t.get("animateColumnResizing")||t.get("enableRtl")||!e.isAlive())return;let i=e.getGridBodyCtrl().eGridBody.classList;n?i.add(sW):i.remove(sW)}var WDe={moduleName:"ColumnAutoSize",version:Je,beans:[jDe],apiFunctions:{sizeColumnsToFit:HDe,autoSizeColumns:Qq,autoSizeAllColumns:zDe},dependsOn:[oq],css:[GDe]},$De=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function qDe(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function KDe(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function YDe(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function ZDe(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function XDe(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var QDe={moduleName:"PinnedRow",version:Je,beans:[m0e],css:[$De],apiFunctions:{getPinnedTopRowCount:qDe,getPinnedBottomRowCount:KDe,getPinnedTopRow:YDe,getPinnedBottomRow:ZDe,forEachPinnedRow:XDe},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},JDe=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){let e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;for(let n of this.spannedNodes)n!==this.lastNode&&(t+=n.rowHeight);return e-t}},e_e=class extends K{constructor(e){super(),this.column=e}buildCache(e){let{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:r,valueSvc:o,pagination:s}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,d=n.getCallback("isFullWidthRow"),u=a.equals,h=a.spanRows,p=typeof h=="function",f=null,g=null,C,m=(x,D)=>{f=x,g=null,C=D},w=x=>{let D=!x.isExpandable()&&!x.group&&!x.detail&&(d?!d({rowNode:x}):!0);if(x.rowIndex==null||!D){m(null,null);return}if(f==null||x.level!==f.level||x.footer||g&&x.rowIndex-1!==g?.getLastNode().rowIndex){m(x,o.getValue(t,x));return}let F=o.getValue(t,x);if(p){let L=Oe(n,{valueA:C,nodeA:f,valueB:F,nodeB:x,column:t,colDef:a});if(!h(L)){m(x,F);return}}else if(u?!u(C,F):C!==F){m(x,F);return}if(!g){let L=l?.get(f);L?.firstNode===f?(L.reset(),g=L):g=new JDe(t,f),c.set(f,g)}g.addSpannedNode(x),c.set(x,g)};switch(e){case"center":r.forEachDisplayedNode?.(x=>{(!s||s.isRowInPage(x.rowIndex))&&w(x)}),this.centerValueNodeMap=c;break;case"top":i?.forEachPinnedRow("top",w),this.topValueNodeMap=c;break;case"bottom":i?.forEachPinnedRow("bottom",w),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},t_e=class extends K{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=$n(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=$n(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){let e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){let{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;let n=this.createManagedBean(new e_e(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){let{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){let n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){let{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,r=e.rowIndex,o=this.spanningColumns.get(i);if(!o)return;let s;switch(e.rowPinned){case"top":s=t?.getPinnedTopRow(r);break;case"bottom":s=t?.getPinnedBottomRow(r);break;default:s=n.getRow(r)}if(s)return o.getCellSpan(s)}getCellStart(e){let t=this.getCellSpanByPosition(e);return t?ce(T({},e),{rowIndex:t.firstNode.rowIndex}):e}getCellEnd(e){let t=this.getCellSpanByPosition(e);return t?ce(T({},e),{rowIndex:t.getLastNode().rowIndex}):e}getCellSpan(e,t){let n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(let[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){let r=i.getCellSpan(e);t(n,r)}}destroy(){super.destroy(),this.spanningColumns.clear()}},n_e=class extends n0{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,r,o,s){this.eWrapper=n,super.setComp(e,t,n,i,r,o,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){let{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||r0(e,t.rowIndex)}setAriaRowSpan(){zpe(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){let e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){let{beans:t}=this;if(T_(t)){this.focusedCellPosition=void 0;return}let n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},i_e=class extends e_{onRowIndexChanged(){super.onRowIndexChanged();for(let e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){let t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new n_e(t,this,this.beans)}isCorrectCtrlForSpan(e){let t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},r_e=class extends K{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){let{rowSpanSvc:t}=this.beans,n=this.getCtrlsMap(e),i=n.size,r=this.getAllRelevantRowControls(e),o=new Map,s=!1;for(let l of r)l.isAlive()&&t?.forEachSpannedColumn(l.rowNode,(c,d)=>{if(o.has(d.firstNode))return;let u=n.get(d.firstNode);if(u){o.set(d.firstNode,u),n.delete(d.firstNode);return}s=!0;let h=new i_e(d.firstNode,this.beans,!1,!1,!1);o.set(d.firstNode,h)});this.setCtrlsMap(e,o);let a=o.size===i;if(!(!s&&a)){for(let l of n.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){let{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){let{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;let i=this.getCtrlsMap(e.rowPinned).get(n.firstNode);if(i)return i.getAllCellCtrls().find(r=>r.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(let t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},o_e={moduleName:"CellSpan",version:Je,beans:[t_e,r_e]},s_e=class extends K{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,r=this.getCellClassParams(e,n);P5(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,r,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){let e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){let r=this.getCellClassParams(e,t);i=n(r)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){let{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);for(let o of this.staticClasses)t.toggleCss(o,!1);let r=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=r;for(let o of r)t.toggleCss(o,!0)}getCellClassParams(e,t){let{value:n,rowNode:i}=this.cellCtrl;return Oe(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},a_e=class extends K{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){P5(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e){return new s_e(e,this.beans)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(r=>{n(r)})}},Q5={moduleName:"CellStyle",version:Je,beans:[a_e]},l_e={moduleName:"RowStyle",version:Je,beans:[Zye]};function c_e(e,t){return!!e.colHover?.isHovered(t)}var d_e=class extends K{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{let{beans:i,gos:r,element:o,columns:s}=this,a=i.colHover;if(n??!!r.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,s),mouseout:a.clearMouseOver.bind(a)});else{for(let c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},u_e="ag-column-hover",h_e=class extends K{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;let t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){let i=()=>{let r=this.isHovered(n);t.toggleCss("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;let n=this.isHovered(e);t.toggleCss(u_e,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);let r=()=>{let o=this.isHovered(n);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:r}),r()}createHoverFeature(e,t,n){e.createManagedBean(new d_e(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},p_e={moduleName:"ColumnHover",version:Je,beans:[h_e],apiFunctions:{isColumnHovered:c_e}},f_e=class extends K{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){let n=this.wrapSvc?.wrap(e,t)??t,i=!OD.has(e),r=i?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(n),this.eventSvc.addListener(e,n,i)}removeListener(e,t){let n=this.wrapSvc?.unwrap(e,t)??t,r=!!this.asyncListeners.get(e)?.delete(n);r||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeListener(e,n,r)}addGlobalListener(e){let t=this.wrapSvc?.wrapGlobal(e)??e,n=(o,s)=>{OD.has(o)&&t(o,s)},i=(o,s)=>{OD.has(o)||t(o,s)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});let r=this.eventSvc;r.addGlobalListener(n,!1),r.addGlobalListener(i,!0)}removeGlobalListener(e){let{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,r=n?.unwrapGlobal(e)??e;if(i.has(r)){let{syncListener:s,asyncListener:a}=i.get(r);t.removeGlobalListener(s,!1),t.removeGlobalListener(a,!0),i.delete(e)}else this.syncGlobalListeners.delete(r),t.removeGlobalListener(r,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(r=>this.eventSvc.removeListener(i,r,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){for(let n of e)this.eventSvc.removeGlobalListener(n,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);let{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function g_e(e,t,n){e.apiEventSvc?.addListener(t,n)}function m_e(e,t,n){e.apiEventSvc?.removeListener(t,n)}function v_e(e,t){e.apiEventSvc?.addGlobalListener(t)}function C_e(e,t){e.apiEventSvc?.removeGlobalListener(t)}var J5={moduleName:"EventApi",version:Je,apiFunctions:{addEventListener:g_e,addGlobalListener:v_e,removeEventListener:m_e,removeGlobalListener:C_e},beans:[f_e]},b_e={moduleName:"Locale",version:Je,beans:[iSe]},w_e=class extends K{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=$n(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){let{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:i}=this.beans,r=e.autoHeightCols,o=!1,s=a=>{let l=a.__autoHeights,c=Nr(this.beans,a).height;for(let d of r){let u=l?.[d.getColId()],h=n?.getCellSpan(d,a);if(h){if(h.getLastNode()!==a)continue;if(u=n?.getCellSpan(d,a)?.getLastNodeAutoHeight(),!u)return}if(u==null){if(this.colSpanSkipCell(d,a))continue;return}c=Math.max(u,c)}c!==a.rowHeight&&(a.setRowHeight(c),o=!0)};i?.forEachPinnedRow?.("top",s),i?.forEachPinnedRow?.("bottom",s),t.forEachDisplayedNode?.(s),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}let i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){let{colModel:n,colViewport:i,visibleCols:r}=this.beans;if(!n.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=r.getLeftColsForRow(t);break;case"right":o=r.getRightColsForRow(t);break;case null:o=i.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;let i=t.parentElement,{rowNode:r,column:o}=e,s=this.beans,a=d=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!n.isAlive())return;let{paddingTop:u,paddingBottom:h,borderBottomWidth:p,borderTopWidth:f}=vg(i),g=u+h+p+f,m=t.offsetHeight+g;if(d<5){let x=!vi(s)?.contains(t),D=m==0;if(x||D){window.setTimeout(()=>a(d+1),0);return}}this.setRowAutoHeight(r,m,o)},l=()=>a(0);l();let c=Pl(s,t,l);return n.addDestroyFunc(()=>{c(),this.setRowAutoHeight(r,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;let e=this.beans.rowRenderer.getAllRowCtrls(),t=null;for(let{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(r=>r.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(let i of t){let r=n.__autoHeights[i.getColId()];if(!r||n.rowHeight<r)return!1}}return!0}},y_e={moduleName:"RowAutoHeight",version:Je,beans:[w_e]},F0={moduleName:"AllCommunity",version:Je,dependsOn:[EEe,Z5,GEe,vSe,R2e,F2e,M2e,I2e,T2e,P2e,k2e,A2e,wxe,yxe,Sxe,bxe,Exe,Dxe,tDe,nEe,wDe,O_,MDe,IDe,VDe,WDe,vCe,QDe,Y2e,G1e,Q5,p_e,l_e,J5,j1e,X5,z_,b_e,y_e,mCe,DEe,o_e]};var S_e=(()=>{class e{constructor(){this.vcr=Z(qr)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Kt({type:e,selectors:[["ag-component-container"]],standalone:!1,decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})(),tK=16,eL=0;function x_e(e){let t=new Map;for(let n=0;n<tK;n++){let i=e.createComponent(S_e);t.set(n,i),Bt(i.location.nativeElement)}return t}var E_e=new Set(["doesFilterPass","isFilterActive"]),Jq=(()=>{class e extends Eq{setViewContainerRef(n,i){this.viewContainerRef=n,this.angularFrameworkOverrides=i}createWrapper(n){let i=this.angularFrameworkOverrides,r=this;r.compShards??=x_e(this.viewContainerRef);class o extends tL{init(l){i.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return r.createComponent(n)}hasMethod(l){return s.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let d=this.getFrameworkComponentInstance(),u=d[l];return E_e.has(l)?u.apply(d,c):i.runInsideAngular(()=>u.apply(d,c))}addMethod(l,c){s[l]=c}}let s=new o;return s}createComponent(n){return eL=(eL+1)%tK,this.compShards.get(eL).instance.vcr.createComponent(n)}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=xs(e)))(r||e)}})()}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),tL=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Bt(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef?.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},$_=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t,n){let{frameworkOverrides:i,wrappedListeners:r}=this,o=n;if(i.shouldWrapOutgoing){o=a=>{i.wrapOutgoing(()=>n(a))};let s=r.get(t);s||(s=new Map,r.set(t,s)),s.set(n,o)}return o}wrapGlobal(t){let{frameworkOverrides:n,wrappedGlobalListeners:i}=this,r=t;return n.shouldWrapOutgoing&&(r=(o,s)=>{n.wrapOutgoing(()=>t(o,s))},i.set(t,r)),r}unwrap(t,n){let{wrappedListeners:i}=this,r=i.get(t);if(r){let o=r.get(n);if(o)return r.delete(n),r.size===0&&i.delete(t),o}return n}unwrapGlobal(t){let{wrappedGlobalListeners:n}=this,i=n.get(t);return i?(n.delete(t),i):t}},eK=(()=>{class e extends D5{constructor(n){super("angular"),this._ngZone=n,this.batchFrameworkComps=!0,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,r)=>this.runOutside(i,r),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(i,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(i):i():this.runOutside=i=>this._ngZone.runOutsideAngular(i):this.runOutside=i=>i()}get shouldWrapOutgoing(){return this._ngZone&&It.isInAngularZone()}createLocalEventListenerWrapper(n,i){if(this.shouldWrapOutgoing)return n??(i.setFrameworkOverrides(this),new $_(this))}createGlobalEventListenerWrapper(){return new $_(this)}isFrameworkComponent(n){if(!n)return!1;let i=n.prototype;return i&&"agInit"in i}runInsideAngular(n){return!this._ngZone||It.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n,i){return this.runOutside(n,i)}static{this.\u0275fac=function(i){return new(i||e)(Tt(It))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),nK=(()=>{class e{constructor(n,i,r,o){this._viewContainerRef=i,this._angularFrameworkOverrides=r,this._frameworkCompWrapper=o,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(s=>{this._resolveFullyReady=s}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.hidePaddedHeaderRows=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressGroupChangesColumnVisibility=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.animateColumnResizing=void 0,this.components=void 0,this.editType=void 0,this.suppressStartEditOnTab=void 0,this.getFullRowEditValidationErrors=void 0,this.invalidEditValueMode=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.findSearchValue=void 0,this.findOptions=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.alwaysPassFilter=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.advancedFilterParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableFilterHandlers=void 0,this.filterHandlers=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.suppressOverlays=void 0,this.overlayComponent=void 0,this.overlayComponentParams=void 0,this.overlayComponentSelector=void 0,this.activeOverlay=void 0,this.activeOverlayParams=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.formulaDataSource=void 0,this.formulaFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.cellFlashDuration=void 0,this.cellFadeDuration=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableCellSpan=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.refreshAfterGroupEdit=void 0,this.rowDragInsertDelay=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupHideParentOfSingleChild=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.treeData=void 0,this.treeDataChildrenField=void 0,this.treeDataParentIdField=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.groupHierarchyConfig=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.enableRowPinning=void 0,this.isRowPinnable=void 0,this.isRowPinned=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.rowNumbers=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.themeCssLayer=void 0,this.styleNonce=void 0,this.themeStyleContainer=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.ssrmExpandAllAffectsAllRows=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.isRowValidDropPosition=void 0,this.toolPanelVisibleChanged=new Ee,this.toolPanelSizeChanged=new Ee,this.columnMenuVisibleChanged=new Ee,this.contextMenuVisibleChanged=new Ee,this.cutStart=new Ee,this.cutEnd=new Ee,this.pasteStart=new Ee,this.pasteEnd=new Ee,this.columnVisible=new Ee,this.columnPinned=new Ee,this.columnResized=new Ee,this.columnMoved=new Ee,this.columnValueChanged=new Ee,this.columnPivotModeChanged=new Ee,this.columnPivotChanged=new Ee,this.columnGroupOpened=new Ee,this.newColumnsLoaded=new Ee,this.gridColumnsChanged=new Ee,this.displayedColumnsChanged=new Ee,this.virtualColumnsChanged=new Ee,this.columnEverythingChanged=new Ee,this.columnsReset=new Ee,this.columnHeaderMouseOver=new Ee,this.columnHeaderMouseLeave=new Ee,this.columnHeaderClicked=new Ee,this.columnHeaderContextMenu=new Ee,this.componentStateChanged=new Ee,this.cellValueChanged=new Ee,this.cellEditRequest=new Ee,this.rowValueChanged=new Ee,this.cellEditingStarted=new Ee,this.cellEditingStopped=new Ee,this.rowEditingStarted=new Ee,this.rowEditingStopped=new Ee,this.bulkEditingStarted=new Ee,this.bulkEditingStopped=new Ee,this.batchEditingStarted=new Ee,this.batchEditingStopped=new Ee,this.undoStarted=new Ee,this.undoEnded=new Ee,this.redoStarted=new Ee,this.redoEnded=new Ee,this.cellSelectionDeleteStart=new Ee,this.cellSelectionDeleteEnd=new Ee,this.rangeDeleteStart=new Ee,this.rangeDeleteEnd=new Ee,this.fillStart=new Ee,this.fillEnd=new Ee,this.filterOpened=new Ee,this.filterChanged=new Ee,this.filterModified=new Ee,this.filterUiChanged=new Ee,this.floatingFilterUiChanged=new Ee,this.advancedFilterBuilderVisibleChanged=new Ee,this.findChanged=new Ee,this.chartCreated=new Ee,this.chartRangeSelectionChanged=new Ee,this.chartOptionsChanged=new Ee,this.chartDestroyed=new Ee,this.cellKeyDown=new Ee,this.gridReady=new Ee,this.firstDataRendered=new Ee,this.gridSizeChanged=new Ee,this.modelUpdated=new Ee,this.virtualRowRemoved=new Ee,this.viewportChanged=new Ee,this.bodyScroll=new Ee,this.bodyScrollEnd=new Ee,this.dragStarted=new Ee,this.dragStopped=new Ee,this.dragCancelled=new Ee,this.stateUpdated=new Ee,this.paginationChanged=new Ee,this.rowDragEnter=new Ee,this.rowDragMove=new Ee,this.rowDragLeave=new Ee,this.rowDragEnd=new Ee,this.rowDragCancel=new Ee,this.rowResizeStarted=new Ee,this.rowResizeEnded=new Ee,this.columnRowGroupChanged=new Ee,this.rowGroupOpened=new Ee,this.expandOrCollapseAll=new Ee,this.pivotMaxColumnsExceeded=new Ee,this.pinnedRowDataChanged=new Ee,this.pinnedRowsChanged=new Ee,this.rowDataUpdated=new Ee,this.asyncTransactionsFlushed=new Ee,this.storeRefreshed=new Ee,this.headerFocused=new Ee,this.cellClicked=new Ee,this.cellDoubleClicked=new Ee,this.cellFocused=new Ee,this.cellMouseOver=new Ee,this.cellMouseOut=new Ee,this.cellMouseDown=new Ee,this.rowClicked=new Ee,this.rowDoubleClicked=new Ee,this.rowSelected=new Ee,this.selectionChanged=new Ee,this.cellContextMenu=new Ee,this.rangeSelectionChanged=new Ee,this.cellSelectionChanged=new Ee,this.tooltipShow=new Ee,this.tooltipHide=new Ee,this.sortChanged=new Ee,this._nativeElement=n.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this._angularFrameworkOverrides.runOutsideAngular(()=>{this._frameworkCompWrapper.setViewContainerRef(this._viewContainerRef,this._angularFrameworkOverrides);let n=Object.keys(this).filter(a=>!(a.startsWith("_")||a=="gridOptions"||a=="modules"||this[a]instanceof Ee)),i={};for(let a of n){let l=__e(a,this[a]);i[a]=l}let r=BW(this.gridOptions,i,n),o={globalListener:this.globalListener.bind(this),frameworkOverrides:this._angularFrameworkOverrides,providedBeanInstances:{frameworkCompWrapper:this._frameworkCompWrapper},modules:this.modules||[],setThemeOnGridDiv:!0},s=B_(this._nativeElement,r,o);s&&(this.api=s),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(n){this._initialised&&this._angularFrameworkOverrides.runOutsideAngular(()=>{let i={};for(let r of Object.keys(n)){let o=n[r];i[r]=o.currentValue}VW(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(n){let r=this[n],o=r?.observed??r?.observers?.length>0,s=`on${n.charAt(0).toUpperCase()}${n.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[s];return o||a}globalListener(n,i){if(this._destroyed)return;let r=this[n];if(r&&this.isEmitterUsed(n)){let o=()=>this._angularFrameworkOverrides.runInsideAngular(()=>r.emit(i));this._holdEvents?this._fullyReady.then(()=>o()):o()}}static{this.\u0275fac=function(i){return new(i||e)(Pt(sn),Pt(qr),Pt(eK),Pt(Jq))}}static{this.\u0275cmp=Kt({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:[2,"suppressContextMenu","suppressContextMenu",Se],preventDefaultOnContextMenu:[2,"preventDefaultOnContextMenu","preventDefaultOnContextMenu",Se],allowContextMenuWithControlKey:[2,"allowContextMenuWithControlKey","allowContextMenuWithControlKey",Se],columnMenu:"columnMenu",suppressMenuHide:[2,"suppressMenuHide","suppressMenuHide",Se],enableBrowserTooltips:[2,"enableBrowserTooltips","enableBrowserTooltips",Se],tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:[2,"tooltipMouseTrack","tooltipMouseTrack",Se],tooltipShowMode:"tooltipShowMode",tooltipInteraction:[2,"tooltipInteraction","tooltipInteraction",Se],popupParent:"popupParent",copyHeadersToClipboard:[2,"copyHeadersToClipboard","copyHeadersToClipboard",Se],copyGroupHeadersToClipboard:[2,"copyGroupHeadersToClipboard","copyGroupHeadersToClipboard",Se],clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:[2,"suppressCopyRowsToClipboard","suppressCopyRowsToClipboard",Se],suppressCopySingleCellRanges:[2,"suppressCopySingleCellRanges","suppressCopySingleCellRanges",Se],suppressLastEmptyLineOnPaste:[2,"suppressLastEmptyLineOnPaste","suppressLastEmptyLineOnPaste",Se],suppressClipboardPaste:[2,"suppressClipboardPaste","suppressClipboardPaste",Se],suppressClipboardApi:[2,"suppressClipboardApi","suppressClipboardApi",Se],suppressCutToClipboard:[2,"suppressCutToClipboard","suppressCutToClipboard",Se],columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:[2,"maintainColumnOrder","maintainColumnOrder",Se],enableStrictPivotColumnOrder:[2,"enableStrictPivotColumnOrder","enableStrictPivotColumnOrder",Se],suppressFieldDotNotation:[2,"suppressFieldDotNotation","suppressFieldDotNotation",Se],headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",hidePaddedHeaderRows:[2,"hidePaddedHeaderRows","hidePaddedHeaderRows",Se],allowDragFromColumnsToolPanel:[2,"allowDragFromColumnsToolPanel","allowDragFromColumnsToolPanel",Se],suppressMovableColumns:[2,"suppressMovableColumns","suppressMovableColumns",Se],suppressColumnMoveAnimation:[2,"suppressColumnMoveAnimation","suppressColumnMoveAnimation",Se],suppressMoveWhenColumnDragging:[2,"suppressMoveWhenColumnDragging","suppressMoveWhenColumnDragging",Se],suppressDragLeaveHidesColumns:[2,"suppressDragLeaveHidesColumns","suppressDragLeaveHidesColumns",Se],suppressGroupChangesColumnVisibility:"suppressGroupChangesColumnVisibility",suppressMakeColumnVisibleAfterUnGroup:[2,"suppressMakeColumnVisibleAfterUnGroup","suppressMakeColumnVisibleAfterUnGroup",Se],suppressRowGroupHidesColumns:[2,"suppressRowGroupHidesColumns","suppressRowGroupHidesColumns",Se],colResizeDefault:"colResizeDefault",suppressAutoSize:[2,"suppressAutoSize","suppressAutoSize",Se],autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:[2,"skipHeaderOnAutoSize","skipHeaderOnAutoSize",Se],autoSizeStrategy:"autoSizeStrategy",animateColumnResizing:[2,"animateColumnResizing","animateColumnResizing",Se],components:"components",editType:"editType",suppressStartEditOnTab:[2,"suppressStartEditOnTab","suppressStartEditOnTab",Se],getFullRowEditValidationErrors:"getFullRowEditValidationErrors",invalidEditValueMode:"invalidEditValueMode",singleClickEdit:[2,"singleClickEdit","singleClickEdit",Se],suppressClickEdit:[2,"suppressClickEdit","suppressClickEdit",Se],readOnlyEdit:[2,"readOnlyEdit","readOnlyEdit",Se],stopEditingWhenCellsLoseFocus:[2,"stopEditingWhenCellsLoseFocus","stopEditingWhenCellsLoseFocus",Se],enterNavigatesVertically:[2,"enterNavigatesVertically","enterNavigatesVertically",Se],enterNavigatesVerticallyAfterEdit:[2,"enterNavigatesVerticallyAfterEdit","enterNavigatesVerticallyAfterEdit",Se],enableCellEditingOnBackspace:[2,"enableCellEditingOnBackspace","enableCellEditingOnBackspace",Se],undoRedoCellEditing:[2,"undoRedoCellEditing","undoRedoCellEditing",Se],undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:[2,"suppressCsvExport","suppressCsvExport",Se],defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:[2,"suppressExcelExport","suppressExcelExport",Se],excelStyles:"excelStyles",findSearchValue:"findSearchValue",findOptions:"findOptions",quickFilterText:"quickFilterText",cacheQuickFilter:[2,"cacheQuickFilter","cacheQuickFilter",Se],includeHiddenColumnsInQuickFilter:[2,"includeHiddenColumnsInQuickFilter","includeHiddenColumnsInQuickFilter",Se],quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:[2,"applyQuickFilterBeforePivotOrAgg","applyQuickFilterBeforePivotOrAgg",Se],excludeChildrenWhenTreeDataFiltering:[2,"excludeChildrenWhenTreeDataFiltering","excludeChildrenWhenTreeDataFiltering",Se],enableAdvancedFilter:[2,"enableAdvancedFilter","enableAdvancedFilter",Se],alwaysPassFilter:"alwaysPassFilter",includeHiddenColumnsInAdvancedFilter:[2,"includeHiddenColumnsInAdvancedFilter","includeHiddenColumnsInAdvancedFilter",Se],advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",advancedFilterParams:"advancedFilterParams",suppressAdvancedFilterEval:[2,"suppressAdvancedFilterEval","suppressAdvancedFilterEval",Se],suppressSetFilterByDefault:[2,"suppressSetFilterByDefault","suppressSetFilterByDefault",Se],enableFilterHandlers:[2,"enableFilterHandlers","enableFilterHandlers",Se],filterHandlers:"filterHandlers",enableCharts:[2,"enableCharts","enableCharts",Se],chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:[2,"masterDetail","masterDetail",Se],keepDetailRows:[2,"keepDetailRows","keepDetailRows",Se],keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:[2,"detailRowAutoHeight","detailRowAutoHeight",Se],context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:[2,"valueCache","valueCache",Se],valueCacheNeverExpires:[2,"valueCacheNeverExpires","valueCacheNeverExpires",Se],enableCellExpressions:[2,"enableCellExpressions","enableCellExpressions",Se],suppressTouch:[2,"suppressTouch","suppressTouch",Se],suppressFocusAfterRefresh:[2,"suppressFocusAfterRefresh","suppressFocusAfterRefresh",Se],suppressBrowserResizeObserver:[2,"suppressBrowserResizeObserver","suppressBrowserResizeObserver",Se],suppressPropertyNamesCheck:[2,"suppressPropertyNamesCheck","suppressPropertyNamesCheck",Se],suppressChangeDetection:[2,"suppressChangeDetection","suppressChangeDetection",Se],debug:[2,"debug","debug",Se],loading:[2,"loading","loading",Se],overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:[2,"suppressLoadingOverlay","suppressLoadingOverlay",Se],overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:[2,"suppressNoRowsOverlay","suppressNoRowsOverlay",Se],suppressOverlays:"suppressOverlays",overlayComponent:"overlayComponent",overlayComponentParams:"overlayComponentParams",overlayComponentSelector:"overlayComponentSelector",activeOverlay:"activeOverlay",activeOverlayParams:"activeOverlayParams",pagination:[2,"pagination","pagination",Se],paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:[2,"paginationAutoPageSize","paginationAutoPageSize",Se],paginateChildRows:[2,"paginateChildRows","paginateChildRows",Se],suppressPaginationPanel:[2,"suppressPaginationPanel","suppressPaginationPanel",Se],pivotMode:[2,"pivotMode","pivotMode",Se],pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:[2,"pivotSuppressAutoColumn","pivotSuppressAutoColumn",Se],suppressExpandablePivotGroups:[2,"suppressExpandablePivotGroups","suppressExpandablePivotGroups",Se],functionsReadOnly:[2,"functionsReadOnly","functionsReadOnly",Se],aggFuncs:"aggFuncs",formulaDataSource:"formulaDataSource",formulaFuncs:"formulaFuncs",suppressAggFuncInHeader:[2,"suppressAggFuncInHeader","suppressAggFuncInHeader",Se],alwaysAggregateAtRootLevel:[2,"alwaysAggregateAtRootLevel","alwaysAggregateAtRootLevel",Se],aggregateOnlyChangedColumns:[2,"aggregateOnlyChangedColumns","aggregateOnlyChangedColumns",Se],suppressAggFilteredOnly:[2,"suppressAggFilteredOnly","suppressAggFilteredOnly",Se],removePivotHeaderRowWhenSingleValueColumn:[2,"removePivotHeaderRowWhenSingleValueColumn","removePivotHeaderRowWhenSingleValueColumn",Se],animateRows:[2,"animateRows","animateRows",Se],cellFlashDuration:"cellFlashDuration",cellFadeDuration:"cellFadeDuration",allowShowChangeAfterFilter:[2,"allowShowChangeAfterFilter","allowShowChangeAfterFilter",Se],domLayout:"domLayout",ensureDomOrder:[2,"ensureDomOrder","ensureDomOrder",Se],enableCellSpan:[2,"enableCellSpan","enableCellSpan",Se],enableRtl:[2,"enableRtl","enableRtl",Se],suppressColumnVirtualisation:[2,"suppressColumnVirtualisation","suppressColumnVirtualisation",Se],suppressMaxRenderedRowRestriction:[2,"suppressMaxRenderedRowRestriction","suppressMaxRenderedRowRestriction",Se],suppressRowVirtualisation:[2,"suppressRowVirtualisation","suppressRowVirtualisation",Se],rowDragManaged:[2,"rowDragManaged","rowDragManaged",Se],refreshAfterGroupEdit:[2,"refreshAfterGroupEdit","refreshAfterGroupEdit",Se],rowDragInsertDelay:"rowDragInsertDelay",suppressRowDrag:[2,"suppressRowDrag","suppressRowDrag",Se],suppressMoveWhenRowDragging:[2,"suppressMoveWhenRowDragging","suppressMoveWhenRowDragging",Se],rowDragEntireRow:[2,"rowDragEntireRow","rowDragEntireRow",Se],rowDragMultiRow:[2,"rowDragMultiRow","rowDragMultiRow",Se],rowDragText:"rowDragText",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:[2,"embedFullWidthRows","embedFullWidthRows",Se],groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:[2,"groupMaintainOrder","groupMaintainOrder",Se],groupSelectsChildren:[2,"groupSelectsChildren","groupSelectsChildren",Se],groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:[2,"groupSuppressBlankHeader","groupSuppressBlankHeader",Se],groupSelectsFiltered:[2,"groupSelectsFiltered","groupSelectsFiltered",Se],showOpenedGroup:[2,"showOpenedGroup","showOpenedGroup",Se],groupHideParentOfSingleChild:"groupHideParentOfSingleChild",groupRemoveSingleChildren:[2,"groupRemoveSingleChildren","groupRemoveSingleChildren",Se],groupRemoveLowestSingleChildren:[2,"groupRemoveLowestSingleChildren","groupRemoveLowestSingleChildren",Se],groupHideOpenParents:[2,"groupHideOpenParents","groupHideOpenParents",Se],groupAllowUnbalanced:[2,"groupAllowUnbalanced","groupAllowUnbalanced",Se],rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",treeData:[2,"treeData","treeData",Se],treeDataChildrenField:"treeDataChildrenField",treeDataParentIdField:"treeDataParentIdField",rowGroupPanelSuppressSort:[2,"rowGroupPanelSuppressSort","rowGroupPanelSuppressSort",Se],suppressGroupRowsSticky:[2,"suppressGroupRowsSticky","suppressGroupRowsSticky",Se],groupHierarchyConfig:"groupHierarchyConfig",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",enableRowPinning:"enableRowPinning",isRowPinnable:"isRowPinnable",isRowPinned:"isRowPinned",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:[2,"suppressModelUpdateAfterUpdateTransaction","suppressModelUpdateAfterUpdateTransaction",Se],datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideFullWidthLoadingRow:[2,"suppressServerSideFullWidthLoadingRow","suppressServerSideFullWidthLoadingRow",Se],cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:[2,"purgeClosedRowNodes","purgeClosedRowNodes",Se],serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:[2,"serverSideSortAllLevels","serverSideSortAllLevels",Se],serverSideEnableClientSideSort:[2,"serverSideEnableClientSideSort","serverSideEnableClientSideSort",Se],serverSideOnlyRefreshFilteredGroups:[2,"serverSideOnlyRefreshFilteredGroups","serverSideOnlyRefreshFilteredGroups",Se],serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:[2,"alwaysShowHorizontalScroll","alwaysShowHorizontalScroll",Se],alwaysShowVerticalScroll:[2,"alwaysShowVerticalScroll","alwaysShowVerticalScroll",Se],debounceVerticalScrollbar:[2,"debounceVerticalScrollbar","debounceVerticalScrollbar",Se],suppressHorizontalScroll:[2,"suppressHorizontalScroll","suppressHorizontalScroll",Se],suppressScrollOnNewData:[2,"suppressScrollOnNewData","suppressScrollOnNewData",Se],suppressScrollWhenPopupsAreOpen:[2,"suppressScrollWhenPopupsAreOpen","suppressScrollWhenPopupsAreOpen",Se],suppressAnimationFrame:[2,"suppressAnimationFrame","suppressAnimationFrame",Se],suppressMiddleClickScrolls:[2,"suppressMiddleClickScrolls","suppressMiddleClickScrolls",Se],suppressPreventDefaultOnMouseWheel:[2,"suppressPreventDefaultOnMouseWheel","suppressPreventDefaultOnMouseWheel",Se],scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:[2,"rowMultiSelectWithClick","rowMultiSelectWithClick",Se],suppressRowDeselection:[2,"suppressRowDeselection","suppressRowDeselection",Se],suppressRowClickSelection:[2,"suppressRowClickSelection","suppressRowClickSelection",Se],suppressCellFocus:[2,"suppressCellFocus","suppressCellFocus",Se],suppressHeaderFocus:[2,"suppressHeaderFocus","suppressHeaderFocus",Se],selectionColumnDef:"selectionColumnDef",rowNumbers:"rowNumbers",suppressMultiRangeSelection:[2,"suppressMultiRangeSelection","suppressMultiRangeSelection",Se],enableCellTextSelection:[2,"enableCellTextSelection","enableCellTextSelection",Se],enableRangeSelection:[2,"enableRangeSelection","enableRangeSelection",Se],enableRangeHandle:[2,"enableRangeHandle","enableRangeHandle",Se],enableFillHandle:[2,"enableFillHandle","enableFillHandle",Se],fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:[2,"suppressClearOnFillReduction","suppressClearOnFillReduction",Se],sortingOrder:"sortingOrder",accentedSort:[2,"accentedSort","accentedSort",Se],unSortIcon:[2,"unSortIcon","unSortIcon",Se],suppressMultiSort:[2,"suppressMultiSort","suppressMultiSort",Se],alwaysMultiSort:[2,"alwaysMultiSort","alwaysMultiSort",Se],multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:[2,"suppressMaintainUnsortedOrder","suppressMaintainUnsortedOrder",Se],icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:[2,"suppressRowHoverHighlight","suppressRowHoverHighlight",Se],suppressRowTransform:[2,"suppressRowTransform","suppressRowTransform",Se],columnHoverHighlight:[2,"columnHoverHighlight","columnHoverHighlight",Se],gridId:"gridId",deltaSort:[2,"deltaSort","deltaSort",Se],treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:[2,"enableGroupEdit","enableGroupEdit",Se],initialState:"initialState",theme:"theme",loadThemeGoogleFonts:[2,"loadThemeGoogleFonts","loadThemeGoogleFonts",Se],themeCssLayer:"themeCssLayer",styleNonce:"styleNonce",themeStyleContainer:"themeStyleContainer",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",ssrmExpandAllAffectsAllRows:[2,"ssrmExpandAllAffectsAllRows","ssrmExpandAllAffectsAllRows",Se],initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:[2,"resetRowDataOnUpdate","resetRowDataOnUpdate",Se],processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow",isRowValidDropPosition:"isRowValidDropPosition"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnsReset:"columnsReset",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",bulkEditingStarted:"bulkEditingStarted",bulkEditingStopped:"bulkEditingStopped",batchEditingStarted:"batchEditingStarted",batchEditingStopped:"batchEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",filterUiChanged:"filterUiChanged",floatingFilterUiChanged:"floatingFilterUiChanged",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",findChanged:"findChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",rowResizeStarted:"rowResizeStarted",rowResizeEnded:"rowResizeEnded",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",pinnedRowsChanged:"pinnedRowsChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},features:[uo([eK,Jq]),$r],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})(),D_e=new Set(M5);function __e(e,t){return D_e.has(e)?t===""?!0:t==="false"?!1:t:t}var S4=nR(g3());var A_e=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,t){let n=e[0],i=e[1],r=e[2],o=e[3];n=this.ff(n,i,r,o,t[0],7,-680876936),o=this.ff(o,n,i,r,t[1],12,-389564586),r=this.ff(r,o,n,i,t[2],17,606105819),i=this.ff(i,r,o,n,t[3],22,-1044525330),n=this.ff(n,i,r,o,t[4],7,-176418897),o=this.ff(o,n,i,r,t[5],12,1200080426),r=this.ff(r,o,n,i,t[6],17,-1473231341),i=this.ff(i,r,o,n,t[7],22,-45705983),n=this.ff(n,i,r,o,t[8],7,1770035416),o=this.ff(o,n,i,r,t[9],12,-1958414417),r=this.ff(r,o,n,i,t[10],17,-42063),i=this.ff(i,r,o,n,t[11],22,-1990404162),n=this.ff(n,i,r,o,t[12],7,1804603682),o=this.ff(o,n,i,r,t[13],12,-40341101),r=this.ff(r,o,n,i,t[14],17,-1502002290),i=this.ff(i,r,o,n,t[15],22,1236535329),n=this.gg(n,i,r,o,t[1],5,-165796510),o=this.gg(o,n,i,r,t[6],9,-1069501632),r=this.gg(r,o,n,i,t[11],14,643717713),i=this.gg(i,r,o,n,t[0],20,-373897302),n=this.gg(n,i,r,o,t[5],5,-701558691),o=this.gg(o,n,i,r,t[10],9,38016083),r=this.gg(r,o,n,i,t[15],14,-660478335),i=this.gg(i,r,o,n,t[4],20,-405537848),n=this.gg(n,i,r,o,t[9],5,568446438),o=this.gg(o,n,i,r,t[14],9,-1019803690),r=this.gg(r,o,n,i,t[3],14,-187363961),i=this.gg(i,r,o,n,t[8],20,1163531501),n=this.gg(n,i,r,o,t[13],5,-1444681467),o=this.gg(o,n,i,r,t[2],9,-51403784),r=this.gg(r,o,n,i,t[7],14,1735328473),i=this.gg(i,r,o,n,t[12],20,-1926607734),n=this.hh(n,i,r,o,t[5],4,-378558),o=this.hh(o,n,i,r,t[8],11,-2022574463),r=this.hh(r,o,n,i,t[11],16,1839030562),i=this.hh(i,r,o,n,t[14],23,-35309556),n=this.hh(n,i,r,o,t[1],4,-1530992060),o=this.hh(o,n,i,r,t[4],11,1272893353),r=this.hh(r,o,n,i,t[7],16,-155497632),i=this.hh(i,r,o,n,t[10],23,-1094730640),n=this.hh(n,i,r,o,t[13],4,681279174),o=this.hh(o,n,i,r,t[0],11,-358537222),r=this.hh(r,o,n,i,t[3],16,-722521979),i=this.hh(i,r,o,n,t[6],23,76029189),n=this.hh(n,i,r,o,t[9],4,-640364487),o=this.hh(o,n,i,r,t[12],11,-421815835),r=this.hh(r,o,n,i,t[15],16,530742520),i=this.hh(i,r,o,n,t[2],23,-995338651),n=this.ii(n,i,r,o,t[0],6,-198630844),o=this.ii(o,n,i,r,t[7],10,1126891415),r=this.ii(r,o,n,i,t[14],15,-1416354905),i=this.ii(i,r,o,n,t[5],21,-57434055),n=this.ii(n,i,r,o,t[12],6,1700485571),o=this.ii(o,n,i,r,t[3],10,-1894986606),r=this.ii(r,o,n,i,t[10],15,-1051523),i=this.ii(i,r,o,n,t[1],21,-2054922799),n=this.ii(n,i,r,o,t[8],6,1873313359),o=this.ii(o,n,i,r,t[15],10,-30611744),r=this.ii(r,o,n,i,t[6],15,-1560198380),i=this.ii(i,r,o,n,t[13],21,1309151649),n=this.ii(n,i,r,o,t[4],6,-145523070),o=this.ii(o,n,i,r,t[11],10,-1120210379),r=this.ii(r,o,n,i,t[2],15,718787259),i=this.ii(i,r,o,n,t[9],21,-343485551),e[0]=this.add32(n,e[0]),e[1]=this.add32(i,e[1]),e[2]=this.add32(r,e[2]),e[3]=this.add32(o,e[3])}cmn(e,t,n,i,r,o){return t=this.add32(this.add32(t,e),this.add32(i,o)),this.add32(t<<r|t>>>32-r,n)}ff(e,t,n,i,r,o,s){return this.cmn(t&n|~t&i,e,t,r,o,s)}gg(e,t,n,i,r,o,s){return this.cmn(t&i|n&~i,e,t,r,o,s)}hh(e,t,n,i,r,o,s){return this.cmn(t^n^i,e,t,r,o,s)}ii(e,t,n,i,r,o,s){return this.cmn(n^(t|~i),e,t,r,o,s)}md51(e){let t=e.length,n=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=e.length;i+=64)this.md5cycle(n,this.md5blk(e.substring(i-64,i)));e=e.substring(i-64);let r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(n,r),i=0;i<16;i++)r[i]=0;return r[14]=t*8,this.md5cycle(n,r),n}md5blk(e){let t=[];for(let n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}rhex(e){let t="0123456789abcdef".split(""),n="",i=0;for(;i<4;i++)n+=t[e>>i*8+4&15]+t[e>>i*8&15];return n}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){let n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}},q_={"01":"GRID","02":"CHARTS","0102":"BOTH"},iK="https://www.ag-grid.com/licensing/",R_e=(()=>{let e=class ha{constructor(n){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=n,this.md5=new A_e,this.md5.init()}validateLicense(){let n=this.getLicenseDetails(ha.licenseKey),i=`AG Grid ${n.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,r=n.suppliedLicenseType===void 0?"":`AG ${n.suppliedLicenseType==="BOTH"?"Grid and AG Charts":n.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(n.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(n.expired){let o=ha.getGridReleaseDate(),s=ha.formatDate(o);this.outputExpiredKey(n.expiry,s,i,r)}else n.valid?n.isTrial&&n.trialExpired&&this.outputExpiredTrialKey(n.expiry,i,r):this.outputInvalidLicenseKey(!!n.incorrectLicenseType,i,r)}static extractExpiry(n){let i=n.substring(n.lastIndexOf("_")+1,n.length);return new Date(parseInt(ha.decode(i),10))}static extractLicenseComponents(n){let i=n.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),n.length<=32)return{md5:null,license:n,version:null,isTrial:null};let r=i.length-32,o=i.substring(r),s=i.substring(0,r),[a,l,c]=ha.extractBracketedInformation(i);return{md5:o,license:s,version:a,isTrial:l,type:c}}getLicenseDetails(n){let i=ha.chartsLicenseManager?"BOTH":"GRID";if(!n?.length)return{licenseKey:n,valid:!1,missing:!0,currentLicenseType:i};let r=ha.getGridReleaseDate(),{md5:o,license:s,version:a,isTrial:l,type:c}=ha.extractLicenseComponents(n),d=o===this.md5.md5(s)&&!n.includes("For_Trialing_ag-Grid_Only"),u,h,p=null,f=!1,g;function C(){u=p<new Date,h=void 0}if(d&&(p=ha.extractExpiry(s),d=!isNaN(p.getTime()),d))switch(h=r>p,a){case"legacy":case"2":{l&&C();break}case"3":c?.length?(g=c,c!==q_["01"]&&c!==q_["0102"]||i==="BOTH"&&g!=="BOTH"?(d=!1,f=!0):l&&C()):d=!1}return d?{licenseKey:n,valid:d,expiry:ha.formatDate(p),expired:h,version:a,isTrial:l,trialExpired:u,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:g}:{licenseKey:n,valid:d,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:g}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!!this.watermarkMessage?.length}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){let i=(this.document.defaultView||window).location,{hostname:r=""}=i;return r}isForceWatermark(){let i=(this.document.defaultView||window).location,{pathname:r}=i;return r?r.includes("forceWatermark"):!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(n){let i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=n.getDate(),o=n.getMonth(),s=n.getFullYear();return r+" "+i[o]+" "+s}static getGridReleaseDate(){return new Date(parseInt(ha.decode(ha.RELEASE_INFORMATION),10))}static decode(n){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",o,s,a,l,c,d,u,h=0,p=n.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<p.length;)l=i.indexOf(p.charAt(h++)),c=i.indexOf(p.charAt(h++)),d=i.indexOf(p.charAt(h++)),u=i.indexOf(p.charAt(h++)),o=l<<2|c>>4,s=(c&15)<<4|d>>2,a=(d&3)<<6|u,r=r+String.fromCharCode(o),d!=64&&(r=r+String.fromCharCode(s)),u!=64&&(r=r+String.fromCharCode(a));return r=ha.utf8_decode(r),r}static utf8_decode(n){n=n.replace(/rn/g,"n");let i="";for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?i+=String.fromCharCode(o):o>127&&o<2048?(i+=String.fromCharCode(o>>6|192),i+=String.fromCharCode(o&63|128)):(i+=String.fromCharCode(o>>12|224),i+=String.fromCharCode(o>>6&63|128),i+=String.fromCharCode(o&63|128))}return i}static setChartsLicenseManager(n){this.chartsLicenseManager=n,this.chartsLicenseManager?.setLicenseKey(this.licenseKey,!0)}static setLicenseKey(n){_e(this.licenseKey)&&this.licenseKey!==n&&IW(291,void 0,"AG Grid: License Key being set multiple times with different values. This can result in an incorrect license key being used."),this.licenseKey=n,this.chartsLicenseManager?.setLicenseKey(n,!0)}static extractBracketedInformation(n){if(!n.includes("["))return["legacy",!1,void 0];let i=n.match(/\[(.*?)\]/g).map(l=>l.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];let r=i.filter(l=>l==="TRIAL").length===1,o=i.filter(l=>l.indexOf("v")===0)[0],s=o?o.replace("v",""):"legacy",a=q_[i.filter(l=>q_[l])[0]];return[s,r,a]}centerPadAndOutput(n){let i=this.totalMessageLength-n.length;console.error(n.padStart(i/2+n.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(n,i="*",r=""){console.error(n.padEnd(this.totalMessageLength-r.length,i)+r)}outputInvalidLicenseKey(n,i,r){n?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${r} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${iK}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${iK}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(n,i,r){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${r} expired on ${n}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(n){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${n} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(n,i,r,o){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${r} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions${o==""?"":` of ${o}`} released before ${n}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};return e.RELEASE_INFORMATION="MTc2NTM1OTQ2ODIzOA==",e})(),zy=R_e,F_e='.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5YjliOWIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOWI5YjliIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}',M_e={tag:"div",cls:"ag-watermark",children:[{tag:"div",ref:"eLicenseTextRef",cls:"ag-watermark-text"}]},I_e=class extends pe{constructor(){super(M_e),this.eLicenseTextRef=q,this.registerCSS(F_e)}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){let e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCss("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}},T_e={selector:"AG-WATERMARK",component:I_e},P_e=class extends K{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new zy(vi(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new zy(null).getLicenseDetails(e)}getWatermarkSelector(){return T_e}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){zy.setLicenseKey(e)}static setChartsLicenseManager(e){zy.setChartsLicenseManager(e)}},k_e=9525,rK={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},K_=`\r
`;function oK(e,t,n){if(!t&&t!==""&&t!==0)return"";let i=t;return typeof t=="boolean"&&n&&(i=n(t)),` ${e}="${i}"`}function L_e(e={}){let i=["version"];return e.version||(e.version="1.0"),e.encoding&&i.push("encoding"),e.standalone&&i.push("standalone"),`<?xml ${i.map(o=>`${o}="${e[o]}"`).join(" ")} ?>`}function xY(e,t){let n="";if(e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(r=>{for(let o of Object.keys(r.map))n+=oK(r.prefix+o,r.map[o],t)}),e.properties.rawMap))for(let r of Object.keys(e.properties.rawMap))n+=oK(r,e.properties.rawMap[r],t);let i="<"+e.name+n;if(!e.children&&e.textNode==null)return i+"/>"+K_;if(e.textNode!=null)return i+">"+e.textNode+"</"+e.name+">"+K_;if(i+=">"+K_,e.children)for(let r of e.children)i+=xY(r,t);return i+"</"+e.name+">"+K_}var O_e=e=>Math.round(e*96/72),M0=e=>Math.ceil(e*k_e),N_e=e=>{if(e===void 0)return;let n=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(n,0)},oA=(e,t)=>{if(!t)return;let n;return typeof t=="number"?n=t:n=t({rowIndex:e}),n},B_e=(e,t)=>{let{colSpan:n,column:i}=e.position;if(e.width)if(n){let r=t.slice(i-1,i+n-1),o=0;for(let s=0;s<r.length;s++){let a=r[s].getActualWidth();if(e.width<o+a){e.position.colSpan=s+1,e.totalWidth=e.width,e.width=e.totalWidth-o;break}o+=a}}else e.totalWidth=e.width},V_e=(e,t)=>{let{rowSpan:n,row:i}=e.position;if(e.height)if(n){let r=0,o=0;for(let s=i;s<i+n;s++){let a=O_e(oA(s,t)||20);if(e.height<r+a){e.position.rowSpan=o+1,e.totalHeight=e.height,e.height=e.totalHeight-r;break}r+=a,o++}}else e.totalHeight=e.height},Os=(e,t)=>{let n=L_e({encoding:"UTF-8",standalone:"yes"}),i=xY(e);return t?i:`${n}${i}`},kg=e=>{let i=String.fromCharCode,r=Math.floor(e/26),o=e%26;return!r||e===26?i(65+e-1):o?r<26?i(65+r-1)+i(65+o-1):kg(r)+i(65+o-1):kg(r-1)+"Z"},G_e=e=>e.replaceAll(`
`,"_x000a_"),SL=e=>{if(e==null)return null;let t="";for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i>=0&&i<=31&&i!==10){let s=`_x${i.toString(16).toUpperCase().padStart(4,"0")}_`;t+=s}else t+=e[n]}return t},H_e=e=>{let t=[];for(let n of e.keys()){let i=n.toString(),r={name:"t",textNode:Zr(SL(i))};i.trim().length!==i.length&&(r.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[r]})}return t},z_e={getTemplate(e){let{name:t,ContentType:n,Extension:i,PartName:r}=e;return{name:t,properties:{rawMap:{Extension:i,PartName:r,ContentType:n}}}}},j_e=z_e,SA=e=>e==="jpg"?"jpeg":e,U_e={getTemplate(e){let t=new Array(e).fill(void 0).map((c,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${d+1}.xml`})),n=Og.size,i=yp.size,r={};O0.forEach(c=>{r[SA(c.type)]=!0});let o=new Array(n).fill(void 0).map((c,d)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${d+1}.xml`})),s=[];$u.forEach(({name:c})=>{s.push({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${c}.xml`})});let a=Object.keys(r).map(c=>({name:"Default",ContentType:`image/${c}`,Extension:c}));i&&a.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});let l=[...a,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...o,...s,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(c=>j_e.getTemplate(c));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:l}}},W_e=U_e,$_e={getTemplate(e){let n=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:n},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:n}]}}},q_e=$_e,sK=(e,t)=>({name:`xdr:${e}`,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),K_e=e=>{let t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor?.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},Y_e=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:e.altText!=null?e.altText:void 0}},children:[K_e(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),aK=e=>{if(!e.saturation&&!e.tint)return;let t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:e.saturation*1e3}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:e.tint*1e3}}}),t},Z_e=(e,t)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:e.color}},children:aK(e)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:aK(t)}]}),X_e=(e,t)=>{let n;if(e.transparency){let i=Math.min(Math.max(e.transparency,0),100);n=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(i*1e3)}}}]}if(e.recolor)switch(n||(n=[]),e.recolor.toLocaleLowerCase()){case"grayscale":n.push({name:"a:grayscl"});break;case"sepia":n.push(Z_e({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":n.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break;default:}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${t}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:n},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},Q_e=(e,t)=>{let n={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){let o=e.rotation;n.properties={rawMap:{rot:Math.min(Math.max(o,0),360)*6e4}}}return{name:"xdr:spPr",children:[n,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},J_e=e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;let{position:t={},fitCell:n,width:i=0,height:r=0,totalHeight:o,totalWidth:s}=e,{offsetX:a=0,offsetY:l=0,row:c=1,rowSpan:d=1,column:u=1,colSpan:h=1}=t;return{from:{row:c-1,col:u-1,offsetX:M0(a),offsetY:M0(l)},to:{row:c-1+(n?1:d-1),col:u-1+(n?1:h-1),offsetX:M0(i+a),offsetY:M0(r+l)},height:M0(o||r),width:M0(s||i)}},eAe=(e,t,n,i)=>({name:"xdr:pic",children:[Y_e(e,t+1),X_e(e,n+1),Q_e(e,i)]}),tAe={getTemplate(e){let{sheetIndex:t}=e,n=Og.get(t),i=Ky.get(t),r=n.map((o,s)=>{let a=J_e(o);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[sK("from",a.from),sK("to",a.to),eAe(o,s,i.get(o.id).index,a),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:r}}},nAe=tAe,iAe={getTemplate(e){let{Id:t,Type:n,Target:i}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:n,Target:i}}}}},rAe=iAe,oAe={getTemplate(e){let t=e.map(n=>rAe.getTemplate(n));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}},Qy=oAe,sAe={getTemplate(e){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:H_e(e)}}},aAe=sAe,lAe=e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},cAe={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},dAe=["Dashed","DashDot","DashDotDot"],uAe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},hAe={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},pAe={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},fAe=e=>e?uAe[e]||e:"none",vp=e=>e==null?e:(e.charAt(0)==="#"&&(e=e.substring(1)),e.length===6?"FF"+e:e),Y_=(e,t)=>{if(!e)return"thin";let n=lAe(t);if(e==="Continuous")return n;let i=cAe[e];return n==="medium"&&dAe.some(r=>r===i)?`medium${i}`:`${i.charAt(0).toLowerCase()}${i.substring(1)}`},gAe=e=>hAe[e]||"general",mAe=e=>pAe[e]||void 0,ky=e=>({name:"color",properties:{rawMap:{rgb:vp(e||"#000000")}}}),vAe={getTemplate(e){let{left:t,right:n,top:i,bottom:r,diagonal:o}=e,s=t?[ky(t.color)]:void 0,a=n?[ky(n.color)]:void 0,l=i?[ky(i.color)]:void 0,c=r?[ky(r.color)]:void 0,d=o?[ky(o.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t?.style}},children:s},{name:"right",properties:{rawMap:{style:n?.style}},children:a},{name:"top",properties:{rawMap:{style:i?.style}},children:l},{name:"bottom",properties:{rawMap:{style:r?.style}},children:c},{name:"diagonal",properties:{rawMap:{style:o?.style}},children:d}]}}},CAe=vAe,bAe={getTemplate(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map(t=>CAe.getTemplate(t))}}},wAe=bAe,yAe=e=>{let n=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(n,0)},SAe={getTemplate(e){let{horizontal:t,indent:n,readingOrder:i,rotate:r,shrinkToFit:o,vertical:s,wrapText:a}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&gAe(t),indent:n,readingOrder:i&&yAe(i),textRotation:r,shrinkToFit:o,vertical:s&&mAe(s),wrapText:a}}}}},xAe=SAe,EAe={getTemplate(e){let t=e.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:e.hideFormula===!0?1:0,locked:t}}}}},DAe=EAe,_Ae={getTemplate(e){let{alignment:t,borderId:n,fillId:i,fontId:r,numFmtId:o,protection:s,quotePrefix:a,xfId:l}=e,c=[];return t&&c.push(xAe.getTemplate(t)),s&&c.push(DAe.getTemplate(s)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:s?1:void 0,applyBorder:n?1:void 0,applyFill:i?1:void 0,borderId:n,fillId:i,applyFont:r?1:void 0,fontId:r,applyNumberFormat:o?1:void 0,numFmtId:o,quotePrefix:a?1:void 0,xfId:l}},children:c.length?c:void 0}}},EY=_Ae,AAe={getTemplate(e){return{name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>EY.getTemplate(t))}}},RAe=AAe,FAe={getTemplate(e){let{builtinId:t,name:n,xfId:i}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:n,xfId:i}}}}},MAe=FAe,IAe={getTemplate(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(t=>MAe.getTemplate(t))}}},TAe=IAe,PAe={getTemplate(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>EY.getTemplate(t))}}},kAe=PAe,LAe={getTemplate(e){let{patternType:t,fgTheme:n,fgTint:i,fgRgb:r,bgRgb:o,bgIndexed:s}=e,a={name:"patternFill",properties:{rawMap:{patternType:t}}};return(n||i||r)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:n,tint:i,rgb:r}}}]),(s||o)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:s,rgb:o}}})),{name:"fill",children:[a]}}},OAe=LAe,NAe={getTemplate(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map(t=>OAe.getTemplate(t))}}},BAe=NAe,VAe={getTemplate(e){let{size:t,colorTheme:n,color:i="FF000000",fontName:r="Calibri",family:o,scheme:s,italic:a,bold:l,strikeThrough:c,outline:d,shadow:u,underline:h,verticalAlign:p}=e,f=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:n,rgb:i}}},{name:"name",properties:{rawMap:{val:r}}}];return o&&f.push({name:"family",properties:{rawMap:{val:o}}}),s&&f.push({name:"scheme",properties:{rawMap:{val:s}}}),a&&f.push({name:"i"}),l&&f.push({name:"b"}),c&&f.push({name:"strike"}),d&&f.push({name:"outline"}),u&&f.push({name:"shadow"}),h&&f.push({name:"u",properties:{rawMap:{val:h}}}),p&&f.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:f}}},GAe=VAe,HAe={getTemplate(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(t=>GAe.getTemplate(t))}}},zAe=HAe;function jAe(e){let t=e.split(/(\[[^\]]*\])/);for(let n=0;n<t.length;n++){let i=t[n];i.length&&(i.startsWith("[")||(i=i.replace(/\$/g,'"$"')),t[n]=Zr(i))}return t.join("")}var UAe={getTemplate(e){let{formatCode:t,numFmtId:n}=e;return t.length&&(t=jAe(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:n}}}}},WAe=UAe,$Ae={getTemplate(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(t=>WAe.getTemplate(t))}}},qAe=$Ae,uA,I0,Uy,Wy,$y,DY,hA,_Y,xL,AY=(e,t)=>(e.includes("mixedStyle")&&t>1&&(e+=`_${t}`),e),RY=()=>{uA={base:0},I0=[],Uy=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Wy=[{patternType:"none"},{patternType:"gray125"}],$y=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],DY=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],hA=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],_Y=[{builtinId:0,name:"Normal",xfId:0}]},KAe=e=>{let t=fAe(e.pattern),n=vp(e.color),i=vp(e.patternColor),r=Wy.findIndex(o=>{let{patternType:s,fgRgb:a,bgRgb:l}=o;return!(s!=t||a!=n||l!=i)});return r===-1&&(r=Wy.length,Wy.push({patternType:t,fgRgb:n,bgRgb:i})),r},YAe=e=>{if(rK[e])return rK[e];let t=I0.findIndex(n=>n.formatCode===e);return t===-1?(t=I0.length+164,I0.push({formatCode:e,numFmtId:t})):t=I0[t].numFmtId,t},ZAe=e=>{let{borderBottom:t,borderTop:n,borderLeft:i,borderRight:r}=e,o,s,a,l,c,d,u,h;i&&(a=Y_(i.lineStyle,i.weight),u=vp(i.color)),r&&(l=Y_(r.lineStyle,r.weight),h=vp(r.color)),t&&(o=Y_(t.lineStyle,t.weight),c=vp(t.color)),n&&(s=Y_(n.lineStyle,n.weight),d=vp(n.color));let p=$y.findIndex(f=>{let{left:g,right:C,top:m,bottom:w}=f;if(!g&&(a||u)||!C&&(l||h)||!m&&(s||d)||!w&&(o||c))return!1;let{style:x,color:D}=g||{},{style:F,color:L}=C||{},{style:V,color:B}=m||{},{style:P,color:U}=w||{};return!(x!=a||D!=u||F!=l||L!=h||V!=s||B!=d||P!=o||U!=c)});return p===-1&&(p=$y.length,$y.push({left:{style:a,color:u},right:{style:l,color:h},top:{style:s,color:d},bottom:{style:o,color:c},diagonal:{style:void 0,color:void 0}})),p},XAe=e=>{let{fontName:t="Calibri",color:n,size:i,bold:r,italic:o,outline:s,shadow:a,strikeThrough:l,underline:c,family:d,verticalAlign:u}=e,h=vp(n),p=N_e(d),f=c?c.toLocaleLowerCase():void 0,g=u?u.toLocaleLowerCase():void 0,C=Uy.findIndex(m=>!(m.fontName!=t||m.color!=h||m.size!=i||m.bold!=r||m.italic!=o||m.outline!=s||m.shadow!=a||m.strikeThrough!=l||m.underline!=f||m.verticalAlign!=g||m.family!=p));return C===-1&&(C=Uy.length,Uy.push({fontName:t,color:h,size:i,bold:r,italic:o,outline:s,shadow:a,strikeThrough:l,underline:f,verticalAlign:g,family:p?.toString()})),C},QAe=e=>{let{alignment:t,borders:n,font:i,interior:r,numberFormat:o,protection:s,quotePrefix:a}=e,{id:l}=e,c=0,d=0,u=0,h=0;l&&(l=AY(l,xL),uA[l]==null&&(r&&(c=KAe(r)),n&&(d=ZAe(n)),i&&(u=XAe(i)),o&&(h=YAe(o.format)),uA[l]=hA.length,hA.push({alignment:t,borderId:d||0,fillId:c||0,fontId:u||0,numFmtId:h||0,protection:s,quotePrefix:a,xfId:0})))},JAe={getTemplate(e){let t=qAe.getTemplate(I0),n=zAe.getTemplate(Uy.map(l=>ce(T({},l),{size:l.size!=null?l.size:e}))),i=BAe.getTemplate(Wy),r=wAe.getTemplate($y),o=RAe.getTemplate(DY),s=kAe.getTemplate(hA),a=TAe.getTemplate(_Y);return RY(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,n,i,r,o,s,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},eRe=(e,t)=>uA[AY(e,t)]||0,tRe=(e,t)=>{xL=t,xL===1&&RY(),e.forEach(QAe)},nRe=JAe,iRe={getTemplate(e,t){let{name:n,columns:i,rowRange:r,displayName:o,showRowStripes:s,showColumnStripes:a,showFilterButtons:l,highlightFirstColumn:c,highlightLastColumn:d}=e||{},u=!r||r[0]-r[1]===0;if(!e||!n||!Array.isArray(i)||!i.length||u)return{name:"table"};let h=i.map((w,x)=>({name:"filterColumn",properties:{rawMap:{colId:x.toString(),hiddenButton:l[x]?0:1}}})),p=`A${r[0]}`,f=`${kg(i.length)}${r[1]}`,g=`${p}:${f}`,C=`${t+1}`,m=t?`${o}_${C}`:o;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:m,displayName:m,ref:g,totalsRowShown:0,id:C}},children:[{name:"autoFilter",properties:{rawMap:{ref:g}},children:h},{name:"tableColumns",properties:{rawMap:{count:i.length}},children:i.map((w,x)=>({name:"tableColumn",properties:{rawMap:{id:(x+1).toString(),name:Zr(G_e(w)),dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:c?1:0,showLastColumn:d?1:0,showRowStripes:s?1:0,showColumnStripes:a?1:0}}}]}}},rRe=iRe,Gl=e=>{let[t,n,i,r]=e;return{name:`a:${t}`,children:[{name:`a:${n}`,properties:{rawMap:{val:i,lastClr:r}}}]}},oRe={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Gl(["dk1","sysClr","windowText","000000"]),Gl(["lt1","sysClr","window","FFFFFF"]),Gl(["dk2","srgbClr","44546A"]),Gl(["lt2","srgbClr","E7E6E6"]),Gl(["accent1","srgbClr","4472C4"]),Gl(["accent2","srgbClr","ED7D31"]),Gl(["accent3","srgbClr","A5A5A5"]),Gl(["accent4","srgbClr","FFC000"]),Gl(["accent5","srgbClr","5B9BD5"]),Gl(["accent6","srgbClr","70AD47"]),Gl(["hlink","srgbClr","0563C1"]),Gl(["folHlink","srgbClr","954F72"])]}}},sRe=oRe,qe=e=>{let[t,n,i,r]=e;return{name:`a:${t}`,properties:{rawMap:{script:i,typeface:n,panose:r}}}},aRe={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[qe(["latin","Calibri Light",void 0,"020F0302020204030204"]),qe(["ea",""]),qe(["cs",""]),qe(["font","\u6E38\u30B4\u30B7\u30C3\u30AF Light","Jpan"]),qe(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),qe(["font","\u7B49\u7EBF Light","Hans"]),qe(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),qe(["font","Times New Roman","Arab"]),qe(["font","Times New Roman","Hebr"]),qe(["font","Tahoma","Thai"]),qe(["font","Nyala","Ethi"]),qe(["font","Vrinda","Beng"]),qe(["font","Shruti","Gujr"]),qe(["font","MoolBoran","Khmr"]),qe(["font","Tunga","Knda"]),qe(["font","Raavi","Guru"]),qe(["font","Euphemia","Cans"]),qe(["font","Plantagenet Cherokee","Cher"]),qe(["font","Microsoft Yi Baiti","Yiii"]),qe(["font","Microsoft Himalaya","Tibt"]),qe(["font","MV Boli","Thaa"]),qe(["font","Mangal","Deva"]),qe(["font","Gautami","Telu"]),qe(["font","Latha","Taml"]),qe(["font","Estrangelo Edessa","Syrc"]),qe(["font","Kalinga","Orya"]),qe(["font","Kartika","Mlym"]),qe(["font","DokChampa","Laoo"]),qe(["font","Iskoola Pota","Sinh"]),qe(["font","Mongolian Baiti","Mong"]),qe(["font","Times New Roman","Viet"]),qe(["font","Microsoft Uighur","Uigh"]),qe(["font","Sylfaen","Geor"]),qe(["font","Arial","Armn"]),qe(["font","Leelawadee UI","Bugi"]),qe(["font","Microsoft JhengHei","Bopo"]),qe(["font","Javanese Text","Java"]),qe(["font","Segoe UI","Lisu"]),qe(["font","Myanmar Text","Mymr"]),qe(["font","Ebrima","Nkoo"]),qe(["font","Nirmala UI","Olck"]),qe(["font","Ebrima","Osma"]),qe(["font","Phagspa","Phag"]),qe(["font","Estrangelo Edessa","Syrn"]),qe(["font","Estrangelo Edessa","Syrj"]),qe(["font","Estrangelo Edessa","Syre"]),qe(["font","Nirmala UI","Sora"]),qe(["font","Microsoft Tai Le","Tale"]),qe(["font","Microsoft New Tai Lue","Talu"]),qe(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[qe(["latin","Calibri",void 0,"020F0502020204030204"]),qe(["ea",""]),qe(["cs",""]),qe(["font","\u6E38\u30B4\u30B7\u30C3\u30AF","Jpan"]),qe(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),qe(["font","\u7B49\u7EBF","Hans"]),qe(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),qe(["font","Arial","Arab"]),qe(["font","Arial","Hebr"]),qe(["font","Tahoma","Thai"]),qe(["font","Nyala","Ethi"]),qe(["font","Vrinda","Beng"]),qe(["font","Shruti","Gujr"]),qe(["font","DaunPenh","Khmr"]),qe(["font","Tunga","Knda"]),qe(["font","Raavi","Guru"]),qe(["font","Euphemia","Cans"]),qe(["font","Plantagenet Cherokee","Cher"]),qe(["font","Microsoft Yi Baiti","Yiii"]),qe(["font","Microsoft Himalaya","Tibt"]),qe(["font","MV Boli","Thaa"]),qe(["font","Mangal","Deva"]),qe(["font","Gautami","Telu"]),qe(["font","Latha","Taml"]),qe(["font","Estrangelo Edessa","Syrc"]),qe(["font","Kalinga","Orya"]),qe(["font","Kartika","Mlym"]),qe(["font","DokChampa","Laoo"]),qe(["font","Iskoola Pota","Sinh"]),qe(["font","Mongolian Baiti","Mong"]),qe(["font","Arial","Viet"]),qe(["font","Microsoft Uighur","Uigh"]),qe(["font","Sylfaen","Geor"]),qe(["font","Arial","Armn"]),qe(["font","Leelawadee UI","Bugi"]),qe(["font","Microsoft JhengHei","Bopo"]),qe(["font","Javanese Text","Java"]),qe(["font","Segoe UI","Lisu"]),qe(["font","Myanmar Text","Mymr"]),qe(["font","Ebrima","Nkoo"]),qe(["font","Nirmala UI","Olck"]),qe(["font","Ebrima","Osma"]),qe(["font","Phagspa","Phag"]),qe(["font","Estrangelo Edessa","Syrn"]),qe(["font","Estrangelo Edessa","Syrj"]),qe(["font","Estrangelo Edessa","Syre"]),qe(["font","Nirmala UI","Sora"]),qe(["font","Microsoft Tai Le","Tale"]),qe(["font","Microsoft New Tai Lue","Talu"]),qe(["font","Ebrima","Tfng"])]}]}}},lRe=aRe,Hd=(e,t,n)=>({name:`a:${e}`,properties:{rawMap:{val:t}},children:n}),nL=e=>{let[t,n,i,r,o,s]=e,a=[];return a.push(Hd("satMod",i)),r&&a.push(Hd("lumMod",r)),o&&a.push(Hd("tint",o)),s&&a.push(Hd("shade",s)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:a}]}},pA=(e,t)=>({name:"a:solidFill",children:[Hd("schemeClr",e,t)]}),EL=e=>{let[t,n,i,r,o]=e,[s,a]=o;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[nL(n),nL(i),nL(r)]},{name:"a:lin",properties:{rawMap:{ang:s,scaled:a}}}]}},iL=e=>{let[t,n,i,r]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:n,cmpd:i,algn:r}},children:[pA("phClr"),Hd("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},rL=e=>{let t=[];if(e){let[n,i,r,o,s]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:i,dir:r,algn:o,rotWithShape:s}},children:[Hd("srgbClr","000000",[Hd("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},cRe=()=>({name:"a:fillStyleLst",children:[pA("phClr"),EL(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),EL(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),dRe=()=>({name:"a:lnStyleLst",children:[iL(["6350","flat","sng","ctr"]),iL(["12700","flat","sng","ctr"]),iL(["19050","flat","sng","ctr"])]}),uRe=()=>({name:"a:effectStyleLst",children:[rL(),rL(),rL(["57150","19050","5400000","ctr","0"])]}),hRe=()=>({name:"a:bgFillStyleLst",children:[pA("phClr"),pA("phClr",[Hd("tint","95000"),Hd("satMod","170000")]),EL(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),pRe={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[cRe(),dRe(),uRe(),hRe()]}}},fRe=pRe,gRe={getTemplate(){return{name:"a:themeElements",children:[sRe.getTemplate(),lRe.getTemplate(),fRe.getTemplate()]}}},mRe=gRe,vRe={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[mRe.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},CRe=vRe,bRe=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),wRe=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),yRe=e=>({name:"v:formulas",children:e.map(t=>({name:"v:f",properties:{rawMap:{eqn:t}}}))}),SRe=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),FY=e=>{let{aspectratio:t,rotation:n}=e||{},i={};return t&&(i.aspectratio="t"),n&&(i.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:i}}};function xRe(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i}var ERe=(e,t)=>{let n,{recolor:i,brightness:r,contrast:o,id:s}=e;if(i&&(n={},(i==="Washout"||i==="Grayscale")&&(n.gain="19661f",n.blacklevel="22938f"),(i==="Black & White"||i==="Grayscale")&&(n.grayscale="t",i==="Black & White"&&(n.bilevel="t"))),!i||i==="Grayscale"){if(n||(n={}),o!=null&&o!==50){let a="1";o>=0&&(o<50?a=String(o/50):o<100?a=String(50/(100-o)):o===100&&(a="2147483647f")),n.gain=a}r!=null&&r!==50&&(n.blacklevel=xRe(r,0,100,-.5,.5).toString())}return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${t}`,title:s}}],rawMap:n}}},DRe=()=>{let e=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[wRe(),yRe(e),SRe(),FY({aspectratio:!0})]}},lK=e=>Math.floor((e??0)*.74999943307122),_Re=(e,t)=>{let{width:n=0,height:i=0,altText:r}=e,o=lK(n),s=lK(i);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${o}pt; height: ${s}pt; z-index: ${t+1}`,type:"#_x0000_t75",alt:r}},children:[ERe(e,t+1),FY({rotation:!0})]}},ARe={getTemplate(e){let t=yp.get(e.sheetIndex)||[],n=[bRe(),DRe(),...t.map((i,r)=>_Re(i,r))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:n}}},RRe=ARe,FRe={getTemplate(e,t){let n=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:n,"r:id":`rId${n}`}}}}},MRe=FRe,IRe={getTemplate(e){return{name:"sheets",children:e.map((t,n)=>MRe.getTemplate(t,n))}}},TRe=IRe,PRe={getTemplate(e,t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[{name:"bookViews",children:[{name:"workbookView",properties:{rawMap:{activeTab:t}}}]},TRe.getTemplate(e)]}}},kRe=PRe,LRe=e=>Math.ceil((e-12)/7+1),ORe={getTemplate(e){let{min:t,max:n,outlineLevel:i,s:r,width:o,hidden:s,bestFit:a}=e,l=1,c="0";return o>1&&(l=LRe(o),c="1"),{name:"col",properties:{rawMap:{min:t,max:n,outlineLevel:i??void 0,width:l,style:r,hidden:s?"1":"0",bestFit:a?"1":"0",customWidth:c}}}}},NRe=ORe,BRe={getTemplate(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}}},VRe=BRe,GRe=e=>{let t=e.charAt(0).toLowerCase();return t==="s"?"inlineStr":t},HRe={getTemplate(e,t,n){let{ref:i,data:r,styleId:o}=e,{type:s,value:a}=r||{type:"empty",value:null},l=s;s==="f"?l="str":s.charAt(0)===s.charAt(0).toUpperCase()&&(l=GRe(s));let c={name:"c",properties:{rawMap:{r:i,t:l==="empty"?void 0:l,s:o?eRe(o,n):void 0}}};if(l==="empty")return c;let d;return l==="str"&&s==="f"?d=[{name:"f",textNode:Zr(SL(a))}]:l==="inlineStr"?d=[{name:"is",children:[{name:"t",textNode:Zr(SL(a))}]}]:d=[{name:"v",textNode:a}],Object.assign({},c,{children:d})}},zRe=HRe,jRe=(e,t)=>{let n=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];o.mergeAcross&&(n.push({pos:r,excelPos:i}),i+=o.mergeAcross),i++}if(n.length)for(let r=n.length-1;r>=0;r--){let o=[],s=e[n[r].pos];for(let a=1;a<=s.mergeAcross;a++)o.push({ref:`${kg(n[r].excelPos+1+a)}${t+1}`,styleId:s.styleId,data:{type:"empty",value:null}});o.length&&e.splice(n[r].pos+1,0,...o)}},URe=e=>e.data?.value!==""||e.styleId!==void 0,WRe={getTemplate(e,t,n){let{collapsed:i,hidden:r,height:o,outlineLevel:s,cells:a=[]}=e;jRe(a,t);let l=a.filter(URe).map((c,d)=>zRe.getTemplate(c,d,n));return{name:"row",properties:{rawMap:{r:t+1,collapsed:i?"1":"0",hidden:r?"1":"0",ht:o,customHeight:o!=null?"1":"0",spans:"1:1",outlineLevel:s||void 0}},children:l}}},$Re=WRe,qRe=(e,t,n)=>{let i=[],r=[];e.forEach((a,l)=>{let c=a.cells,d=0,u;c.forEach((h,p)=>{let f=p+d+1,g=kg(f),C=l+1;if(h.mergeAcross){d+=h.mergeAcross;let w=kg(p+d+1);i.push(`${g}${C}:${w}${C}`)}t[f-1]||(t[f-1]={});let{collapsibleRanges:m}=h;m&&m.forEach(w=>{r.push([f+w[0],f+w[1]])}),u=t[f-1],u.min=f,u.max=f,h.ref=`${g}${C}`})}),r.sort((a,l)=>a[0]!==l[0]?a[0]-l[0]:l[1]-a[1]);let o=new Map,s=new Map;return r.filter(a=>{let l=a.toString();return o.get(l)?!1:(o.set(l,!0),!0)}).forEach(a=>{let l=t.find(d=>d.min==a[0]&&d.max==a[1]),c=s.get(a[0]);t.push({min:a[0],max:a[1],outlineLevel:n?void 0:c||1,width:(l||{width:100}).width}),s.set(a[0],(c||0)+1)}),i},KRe=e=>!e||e!=="Portrait"&&e!=="Landscape"?"portrait":e.toLocaleLowerCase(),YRe=e=>{if(e==null)return 1;let n=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return n===-1?1:n+1},ZRe=e=>{let t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};for(let n of Object.keys(t))e=e.replace(n,t[n]);return e},XRe=e=>e==="Center"?"C":e==="Right"?"R":"L",QRe=(e,t)=>(t&&(e+="&amp;&quot;",e+=t.fontName||"Calibri",t.bold!==t.italic?e+=t.bold?",Bold":",Italic":t.bold?e+=",Bold Italic":e+=",Regular",e+="&quot;",t.size&&(e+=`&amp;${t.size}`),t.strikeThrough&&(e+="&amp;S"),t.underline&&(e+=`&amp;${t.underline==="Double"?"E":"U"}`),t.color&&(e+=`&amp;K${t.color.replace("#","").toUpperCase()}`)),e),JRe=(e,t,n)=>e.reduce((i,r,o)=>{let s=XRe(r.position),a=QRe(`${i}&amp;${s}`,r.font),l=["Left","Center","Right"];r.position||(r.position=l[o]);let{image:c}=r;if(r.value==="&[Picture]"&&c){let d=`${s}${t}${n}`;xFe(c,d)}return`${a}${Zr(ZRe(r.value))}`},""),eFe=e=>{let t=["all","first","even"],n=[];return t.forEach(i=>{let r=e[i],o=i==="all"?"odd":i;if(r)for(let s of Object.keys(r)){let a=r[s],l=`${s.charAt(0).toUpperCase()}${s.slice(1)}`,c=s[0].toUpperCase();if(a){let d=i==="all"?"":i.toUpperCase();n.push({name:`${o}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:JRe(a,c,d)})}}}),n},tFe=e=>t=>(e.length&&t.children.push({name:"cols",children:e.map(n=>NRe.getTemplate(n))}),t),nFe=(e,t)=>n=>(e.length&&n.children.push({name:"sheetData",children:e.map((i,r)=>$Re.getTemplate(i,r,t))}),n),iFe=e=>t=>(e.length&&t.children.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map(n=>VRe.getTemplate(n))}),t),rFe=e=>t=>{let{top:n=.75,right:i=.7,bottom:r=.75,left:o=.7,header:s=.3,footer:a=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:r,footer:a,header:s,left:o,right:i,top:n}}}),t},oFe=e=>t=>(e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:KRe(e.orientation),paperSize:YRe(e.pageSize)}}}),t),sFe=e=>t=>{if(!e)return t;let n=e.first!=null?1:0,i=e.even!=null?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:n,differentOddEven:i}},children:eFe(e)}),t},aFe=e=>t=>(e&&t.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}]}),t),lFe=e=>t=>(Og.get(e)?.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t),cFe=e=>t=>(yp.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t),dFe=(e=0,t=0)=>{let n=e>0||t>0;return n?[{name:"pane",properties:{rawMap:{state:n?"frozen":void 0,topLeftCell:n?`${kg(e+1)}${t+1}`:void 0,xSplit:e===0?void 0:e,ySplit:t===0?void 0:t}}}]:void 0},uFe=(e=!1,t,n)=>i=>(i.children.push({name:"sheetViews",children:[{name:"sheetView",properties:{rawMap:{rightToLeft:e===!0?"1":"0",workbookViewId:"0"}},children:dFe(t,n)}]}),i),hFe=()=>e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),pFe=e=>t=>{let n=e.reduce((i,r)=>r.outlineLevel&&r.outlineLevel>i?r.outlineLevel:i,0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:n||void 0}}}),t},fFe={getTemplate(e){let{worksheet:t,currentSheet:n,config:i}=e,{margins:r={},pageSetup:o,headerFooterConfig:s,suppressColumnOutline:a,rightToLeft:l,frozenRowCount:c,frozenColumnCount:d}=i,{table:u}=t,{rows:h,columns:p}=u,f=p?.length?qRe(h,p,!!a):[],g=$u.get(n),{children:C}=[hFe(),uFe(l,d,c),pFe(h),tFe(p),nFe(h,n+1),iFe(f),rFe(r),oFe(o),sFe(s),lFe(n),cFe(n),aFe(g)].reduce((m,w)=>w(m),{children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:C}}},gFe=fFe,Mg=new Map,Wu=[],Lg=new Map,Og=new Map,yp=new Map,O0=new Map,Ky=new Map,$u=new Map,mFe="AG-GRID-TABLE",WL="SINGLE_SHEET";function vFe(){return WL}function CFe(e){WL=e}function bFe(e,t,n){DFe(t),tRe(e,Wu.length);let i=Object.assign({},n);return n.exportAsExcelTable&&n.colModel.isPivotActive()&&(X(163,{featureName:"pivot mode"}),i.exportAsExcelTable=!1),SFe(t,i),GFe(t,i)}function wFe(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}function yFe(e,t){if($u.has(e)){X(164);return}$u.set(e,t)}function SFe(e,t){let{exportAsExcelTable:n,prependContent:i,appendContent:r,colModel:o}=t;if(!n)return;let s=typeof n=="boolean"?{}:n,{name:a,showColumnStripes:l,showRowStripes:c,showFilterButton:d,highlightFirstColumn:u,highlightLastColumn:h}=s,p=wFe(a||mFe),f=Wu.length-1,{table:g}=e,{rows:C,columns:m}=g,w=Z$(o),x=i?i.length:0,D=r?r.length:0,F=C.length,L=m.length,V=[],B=[];for(let P=0;P<L;P++){let U=m[P];V.push(U.displayName||""),B.push(d==="match"||d===void 0?U.filterAllowed??!1:d)}if(!V?.length||!F||!p){X(165);return}yFe(f,{name:`table${$u.size+1}`,displayName:p,columns:V,showFilterButtons:B,rowRange:[w+x,w+(F-w)-D],showRowStripes:c??!0,showColumnStripes:l??!1,highlightFirstColumn:u??!1,highlightLastColumn:h??!1})}function xFe(e,t){let n=Wu.length-1,i=e;i.headerFooterPosition=t,MY({imageToAdd:i,idx:n});let r=yp.get(n);r||(r=[],yp.set(n,r)),r.find(o=>o.id===e.id)||r.push(e)}function EFe(e,t,n,i,r){let o=Wu.length,{row:s,column:a}=e.position||{},l=e;i&&(t!=null&&n!=null&&(!s||!a)&&(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:i.indexOf(n)+1})),B_e(l,i),V_e(l,r)),MY({imageToAdd:l,idx:o});let c=Ky.get(o);c||(c=new Map,Ky.set(o,c));let d=Og.get(o);d?d.push(l):Og.set(o,[l]),c.get(e.id)||c.set(e.id,{index:c.size,type:e.imageType})}function MY(e){let{imageToAdd:t,idx:n}=e,i=Lg.get(t.id);if(i){let r=i.find(o=>o.sheetId===n);r?r.image.push(t):i.push({sheetId:n,image:[t]})}else Lg.set(t.id,[{sheetId:n,image:[t]}]),O0.set(t.id,{type:t.imageType,index:O0.size})}function DFe(e){let t=Zr(e.name)||"",n="";for(;Wu.indexOf(`${t}${n}`)!==-1;)n===""?n="_1":n=`_${parseInt(n.slice(1),10)+1}`;e.name=`${t}${n}`,Wu.push(e.name)}function cK(e){return Mg.has(e)?Mg.get(e):(Mg.set(e,Mg.size),Mg.size-1)}function dK(){Mg.clear(),Lg.clear(),Og.clear(),yp.clear(),O0.clear(),Ky.clear(),$u.clear(),Wu=[],WL="SINGLE_SHEET"}function _Fe(e){return Os(kRe.getTemplate(Wu,e))}function AFe(e){return Os(nRe.getTemplate(e))}function RFe(){return Os(aAe.getTemplate(Mg))}function FFe(e){return Os(q_e.getTemplate(e))}function MFe(e){return Os(W_e.getTemplate(e))}function IFe(){let e=Qy.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Os(e)}function TFe(){return Os(CRe.getTemplate())}function PFe(e,t){return Os(rRe.getTemplate(e,t))}function kFe(e){let t=new Array(e).fill(void 0).map((i,r)=>({Id:`rId${r+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${r+1}.xml`})),n=Qy.getTemplate([...t,{Id:`rId${e+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${e+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${e+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return Os(n)}function LFe(e){return Os(nAe.getTemplate({sheetIndex:e}))}function OFe(e){let t=Ky.get(e)||[],n=[];for(let[i,r]of t){let{index:o,type:s}=r;n.push({Id:`rId${o+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${O0.get(i).index+1}.${SA(s)}`})}return Os(Qy.getTemplate(n))}function NFe(e){return Os(RRe.getTemplate({sheetIndex:e}),!0)}function BFe(e){let t=yp.get(e)||[],n=[];for(let i=0;i<t.length;i++){let r=t[i],o=O0.get(r.id);if(!o)continue;let{index:s,type:a}=o;n.push({Id:`rId${i+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${s+1}.${SA(a)}`})}return Os(Qy.getTemplate(n))}function VFe({drawingIndex:e,vmlDrawingIndex:t,tableName:n}={}){if(e===void 0&&t===void 0&&n===void 0)return"";let i=[];e!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${e+1}.xml`}),t!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${t+1}.vml`}),n!=null&&i.push({Id:`rId${i.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${n}.xml`});let r=Qy.getTemplate(i);return Os(r)}function GFe(e,t){return Os(gFe.getTemplate({worksheet:e,currentSheet:Wu.length-1,config:t}))}var HFe=class extends N5{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.frozenRowCount=0,this.skipFrozenRows=!1,this.frozenColumnCount=0,this.skipFrozenColumns=!1,this.formulaSvc=e.formulaSvc,this.config=Object.assign({},e),this.stylesByIds={};for(let t of this.config.baseExcelStyles)this.stylesByIds[t.id]=t;this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){for(let t of e){let n=this.rows.length+1,i;!this.config.suppressRowOutline&&t.outlineLevel!=null&&(i=t.outlineLevel);let r={height:oA(n,t.height||this.config.rowHeight),cells:(t.cells||[]).map((o,s)=>{let a=this.addImage(n,this.columnsToExport[s],o.data?.value),l=null;o.styleId&&(l=typeof o.styleId=="string"?[o.styleId]:o.styleId);let c=this.getStyleId(l);if(a)return this.createCell(c,this.getDataTypeForValue(a.value),a.value==null?"":a.value);let d=o.data?.value??"",u=this.getDataTypeForValue(d);return o.mergeAcross?this.createMergedCell(c,u,d,o.mergeAcross):this.createCell(c,u,d)}),outlineLevel:i};t.collapsed!=null&&(r.collapsed=t.collapsed),t.hidden!=null&&(r.hidden=t.hidden),this.rows.push(r)}}onNewHeaderGroupingRow(){let e=[],{freezeRows:t,headerRowHeight:n}=this.config;return this.rows.push({cells:e,height:oA(this.rows.length+1,n)}),t&&this.frozenRowCount++,{onColumn:(i,r,o,s,a)=>{let l=this.config.styleLinker({rowType:"HEADER_GROUPING",rowIndex:1,value:`grouping-${r}`,columnGroup:i});e.push(ce(T({},this.createMergedCell(this.getStyleId(l),this.getDataTypeForValue("string"),r,s)),{collapsibleRanges:a}))}}}onNewHeaderRow(){let{freezeRows:e,headerRowHeight:t}=this.config;return e&&this.frozenRowCount++,this.onNewRow(this.onNewHeaderColumn,t)}onNewBodyRow(e){let{freezeRows:t,rowHeight:n}=this.config;this.skipFrozenRows||(t==="headersAndPinnedRows"&&e?.rowPinned==="top"?this.frozenRowCount++:typeof t=="function"?t(Oe(this.gos,{node:e}))?this.frozenRowCount++:this.skipFrozenRows=!0:this.skipFrozenRows=!0);let i=this.onNewRow(this.onNewBodyColumn,n);return e&&this.addRowOutlineIfNecessary(e),i}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((t,n)=>this.convertColumnToExcel(t,n))}parse(){let e=this.rows.reduce((r,o)=>Math.max(r,o.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));let{config:t}=this,n;if(t.sheetName!=null){let{sheetName:r}=t,o=typeof r=="function"?r(Oe(this.gos,{})):r;n=String(o).substring(0,31)}else n="ag-grid";let i={name:n,table:{columns:this.cols,rows:this.rows}};return this.createExcel(i)}addRowOutlineIfNecessary(e){let{gos:t,suppressRowOutline:n,rowGroupExpandState:i="expanded"}=this.config;if(t.get("groupHideOpenParents")||n||e.level==null)return;let o=e.footer?1:0,s=Qe(this.rows);if(e.uiLevel==null||e.level===e.uiLevel){let l=Math.min(e.level+o,7);s.outlineLevel=l}if(i==="expanded")return;let a=i==="collapsed";if(e.isExpandable()){let l=!a&&e.expanded;s.collapsed=!l}s.hidden=!!e.parent&&e.parent.level!==-1&&(a||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){let n=this.config.columnWidth,r=(e?this.extractHeaderValue(e):void 0)??"",o=e?e.isFilterAllowed():!1;return n?typeof n=="number"?{width:n,displayName:r,filterAllowed:o}:{width:n({column:e,index:t}),displayName:r,filterAllowed:o}:e?{width:Math.max(e.getActualWidth(),75),displayName:r,filterAllowed:o}:{displayName:r,filterAllowed:o}}onNewHeaderColumn(e,t){return n=>{let i=this.extractHeaderValue(n),r=this.config.styleLinker({rowType:"HEADER",rowIndex:e,value:i,column:n});t.push(this.createCell(this.getStyleId(r),this.getDataTypeForValue("string"),i))}}onNewBodyColumn(e,t){let n=0,{freezeColumns:i,rightToLeft:r}=this.config;return(o,s,a)=>{if(n>0){n-=1;return}if(!this.skipFrozenColumns){let f=o.getPinned();i==="pinned"&&f&&(f===!0||f==="left")!==r?this.frozenColumnCount++:typeof i=="function"&&i(Oe(this.gos,{column:o}))?this.frozenColumnCount++:this.skipFrozenColumns=!0}let{value:l,valueFormatted:c}=this.extractRowCellValue({column:o,node:a,currentColumnIndex:s,accumulatedRowIndex:e,type:"excel",useRawFormula:!0}),d=this.config.styleLinker({rowType:"BODY",rowIndex:e,value:l,column:o,node:a}),u=this.getStyleId(d),h=o.getColSpan(a),p=this.addImage(e,o,l);if(p)t.push(this.createCell(u,this.getDataTypeForValue(p.value),p.value==null?"":p.value));else if(h>1)n=h-1,t.push(this.createMergedCell(u,this.getDataTypeForValue(l),l,h-1));else{let f=o.isAllowFormula()&&this.formulaSvc?.isFormula(l),g=this.createCell(u,f?"f":this.getDataTypeForValue(l),f?this.formulaSvc?.updateFormulaByOffset({value:l,rowDelta:e-(a.formulaRowIndex+1),useRefFormat:!1}):l,c);t.push(g)}}}onNewRow(e,t){let n=[];return this.rows.push({cells:n,height:oA(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,n)()}}createExcel(e){let{excelStyles:t,config:n}=this;return this.frozenColumnCount&&(n.frozenColumnCount=this.frozenColumnCount),this.frozenRowCount&&(n.frozenRowCount=this.frozenRowCount),bFe(t,e,n)}getDataTypeForValue(e){if(e===void 0)return"empty";let t="s";try{this.isNumerical(e)&&(t="n")}catch{}return t}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(e?.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:X(162,{id:e.id,dataType:e.dataType})}return null}addImage(e,t,n){if(!this.config.addImageToCell)return;let i=this.config.addImageToCell(e,t,n);if(i)return EFe(i.image,e,t,this.columnsToExport,this.config.rowHeight),i}createCell(e,t,n,i){let r=this.getStyleById(e);!r?.dataType&&t==="s"&&i!=null&&(n=i);let o=this.getTypeFromStyle(r,n)||t,{value:s,escaped:a}=this.getCellValue(o,n),l=[];return r&&l.push(e),a&&l.push("_quotePrefix"),e=this.getStyleId(l)||void 0,{styleId:e,data:{type:o,value:s}}}createMergedCell(e,t,n,i){let r=n??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:t==="s"?cK(r).toString():n},mergeAcross:i}}getCellValue(e,t){let n=!1;if(t==null||e==="s"&&t==="")return{value:"",escaped:!1};if(e==="s")t&&t[0]==="'"&&(n=!0,t=t.slice(1)),t=cK(t).toString();else if(e==="f")t=this.addXlfnPrefix(t).slice(1);else if(e==="n"){let i=Number(t);isNaN(i)?t="":t!==""&&(t=i.toString())}return{value:t,escaped:n}}addXlfnPrefix(e){if(!e)return e;let t=/(^|[^A-Z0-9._])(CONCAT)(\s*\()/gi;return e.replace(t,(n,i,r,o)=>`${i}_xlfn.${r}${o}`)}getStyleId(e){if(!e?.length)return null;if(e.length===1)return e[0];let t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;let t=`mixedStyle${this.mixedStyleCounter}`,n={};for(let r of e)for(let o of this.excelStyles)o.id===r&&ji(n,this.deepCloneObject(o));n.id=t;let i=e.join("-");this.mixedStyles[i]={excelID:t,key:i,result:n},this.excelStyles.push(n),this.stylesByIds[t]=n}isFormula(e){if(e==null)return!1;let t=String(e);return this.config.autoConvertFormulas&&Fd(t)}isNumerical(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))}getStyleById(e){return e==null?null:this.stylesByIds[e]||null}},zFe=async e=>{let t=0,n=[],i=new WritableStream({write:s=>{n.push(s),t+=s.length}}),r=new ReadableStream({start:s=>{let a=new FileReader;a.onload=l=>{l.target?.result&&s.enqueue(l.target.result),s.close()},a.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return await r.pipeThrough(o).pipeTo(i),{size:t,content:new Blob(n)}},jFe=async e=>{let t=new Blob([e]),{size:n,content:i}=await zFe(t),r=new Uint8Array(await i.arrayBuffer());return{size:n,content:r}},UFe=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},WFe=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function ds(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e&255),e>>>=8;return n}var uK=e=>{if(!e.length)return 0;let t=-1,n=0,i=0,r=0;for(let o=0;o<e.length;o++)n=e[o],i=(t^n)&255,r=$Fe[i],t=t>>>8^r;return t^-1},hK=e=>e.length?uK(typeof e=="string"?new TextEncoder().encode(e):e):0,$Fe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function qFe(e){let t=String.fromCharCode;function n(u){let h=[];if(!u)return[];let p=u.length,f=0,g,C;for(;f<p;)g=u.charCodeAt(f++),g>=55296&&g<=56319&&f<p?(C=u.charCodeAt(f++),(C&64512)==56320?h.push(((g&1023)<<10)+(C&1023)+65536):(h.push(g),f--)):h.push(g);return h}function i(u){if(u>=55296&&u<=57343)throw Error(Bo(255,{point:u}))}function r(u,h){return t(u>>h&63|128)}function o(u){if((u&4294967168)==0)return t(u);let h="";return(u&4294965248)==0?h=t(u>>6&31|192):(u&4294901760)==0?(i(u),h=t(u>>12&15|224),h+=r(u,6)):(u&4292870144)==0&&(h=t(u>>18&7|240),h+=r(u,12),h+=r(u,6)),h+=t(u&63|128),h}let s=n(e),a=s.length,l=-1,c,d="";for(;++l<a;)c=s[l],d+=o(c);return d}var IY=(e,t,n,i,r,o)=>{let{content:s,path:a,created:l}=e,c=UFe(l),d=WFe(l),u=hK(r),h=o!==void 0?o:i,p=qFe(a),f=p!==a,g="";if(f){let x=ds(1,1)+ds(hK(p),4)+p;g="up"+ds(x.length,2)+x}let C="\0"+(f?"\0\b":"\0\0")+ds(t?8:0,2)+ds(c,2)+ds(d,2)+ds(h?u:0,4)+ds(o??i,4)+ds(i,4)+ds(p.length,2)+ds(g.length,2),m="PK"+C+p+g,w="PK\0"+C+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\0\0\0")+ds(n,4)+p+g;return{localFileHeader:Uint8Array.from(m,x=>x.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(w,x=>x.charCodeAt(0))}},TY=e=>{let t;if(typeof e=="string"){let n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},KFe=async(e,t)=>{let{content:n}=e,{size:i,content:r}=n?TY(n):{size:0,content:Uint8Array.from([])},o,s,a=!1;if(e.type==="file"&&r&&i>0){let d=await jFe(r);o=d.content,s=d.size,a=!0}let c=IY(e,a,t,i,r,s);return ce(T({},c),{content:o||r,isCompressed:a})},YFe=(e,t)=>{let{content:n}=e,{content:i}=n?TY(n):{content:Uint8Array.from([])},r=IY(e,!1,t,i.length,i,void 0);return ce(T({},r),{content:i,isCompressed:!1})},ZFe=(e,t,n)=>{let i="PK\0\0\0\0"+ds(e,2)+ds(e,2)+ds(t,4)+ds(n,4)+"\0\0";return Uint8Array.from(i,r=>r.charCodeAt(0))},PY=class{constructor(){this.folders=[],this.files=[]}addFolders(e){e.forEach(this.addFolder.bind(this))}addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}async getZipFile(e="application/zip"){let t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}clearStream(){this.folders=[],this.files=[]}packageFiles(e){let t=0,n=0;for(let c of e){let{localFileHeader:d,centralDirectoryHeader:u,content:h}=c;t+=d.length+h.length,n+=u.length}let i=new Uint8Array(t),r=new Uint8Array(n),o=0,s=0;for(let c of e){let{localFileHeader:d,centralDirectoryHeader:u,content:h}=c;i.set(d,o),o+=d.length,i.set(h,o),o+=h.length,r.set(u,s),s+=u.length}let a=ZFe(e.length,n,t),l=new Uint8Array(i.length+r.length+a.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l}async buildCompressedFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let r=await KFe(i,n),{localFileHeader:o,content:s}=r;t.push(r),n+=o.length+s.length}return this.packageFiles(t)}buildFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let r=YFe(i,n),{localFileHeader:o,content:s}=r;t.push(r),n+=o.length+s.length}return this.packageFiles(t)}},XFe=e=>{if(e.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),!Lg.size)return;e.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;Lg.forEach(n=>{let i=n[0].image[0],{base64:r,imageType:o}=i;e.addFile(`xl/media/image${++t}.${SA(o)}`,r,!0)})},QFe=(e,t)=>{let n=0,i=0;for(let r=0;r<t.length;r++){let o=t[r];e.addFile(`xl/worksheets/sheet${r+1}.xml`,o,!1);let s=Lg.size>0&&Og.has(r),a=$u.size>0&&$u.get(r),l=Lg.size&&yp.has(r);if(!s&&!a&&!l)continue;let c,d,u;s&&(JFe(e,r,n),d=n,n++),l&&(eMe(e,r,i),u=i,i++),a&&(c=a.name);let h=`xl/worksheets/_rels/sheet${r+1}.xml.rels`;e.addFile(h,VFe({tableName:c,drawingIndex:d,vmlDrawingIndex:u}))}},JFe=(e,t,n)=>{let i="xl/drawings",r=`${i}/drawing${n+1}.xml`,o=`${i}/_rels/drawing${n+1}.xml.rels`;e.addFile(o,OFe(t)),e.addFile(r,LFe(t))},eMe=(e,t,n)=>{let i="xl/drawings",r=`${i}/vmlDrawing${n+1}.vml`,o=`${i}/_rels/vmlDrawing${n+1}.vml.rels`;e.addFile(r,NFe(t)),e.addFile(o,BFe(t))},tMe=e=>{let t=$u,n=Array.from(t.keys());for(let i=0;i<n.length;i++){let r=n[i],o=t.get(r);o&&e.addFile(`xl/tables/${o.name}.xml`,PFe(o,i))}},nMe=(e,t,n,i,r)=>{e.addFile("xl/workbook.xml",_Fe(r)),e.addFile("xl/styles.xml",AFe(t)),e.addFile("xl/sharedStrings.xml",RFe()),e.addFile("xl/theme/theme1.xml",TFe()),e.addFile("xl/_rels/workbook.xml.rels",kFe(i)),e.addFile("docProps/core.xml",FFe(n)),e.addFile("[Content_Types].xml",MFe(i)),e.addFile("_rels/.rels",IFe())},kY=(e,t,n={})=>{if(!t||t.length===0)return X(159),dK(),!1;let{fontSize:i=11,author:r="AG Grid",activeTab:o=0}=n,s=t.length,a=Math.max(Math.min(o,s-1),0);return XFe(e),tMe(e),QFe(e,t),nMe(e,i,r,s,a),dK(),!0},LY=e=>{let{data:t,fontSize:n,author:i,activeSheetIndex:r}=e,o=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",s=new PY;return kY(s,t,{author:i,fontSize:n,activeTab:r})?s.getZipFile(o):Promise.resolve(void 0)},pK=e=>{let{data:t,fontSize:n,author:i,activeSheetIndex:r}=e,o=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",s=new PY;if(kY(s,t,{author:i,fontSize:n,activeTab:r}))return s.getUncompressedZipFile(o)},iMe=e=>{let{fileName:t="export.xlsx"}=e;LY(e).then(n=>{if(n){let i=typeof t=="function"?t():t;G_(i,n)}})},rMe=class extends O5{constructor(){super(...arguments),this.beanName="excelCreator"}getMergedParams(e){let t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){X(160);return}let t=()=>{let i=this.getMergedParams(e),o={data:[this.getData(i)],fontSize:i.fontSize,author:i.author,mimeType:i.mimeType};this.packageCompressedFile(o).then(s=>{if(s){let{fileName:a}=i,l=typeof a=="function"?a(Oe(this.gos,{})):a;G_(this.getFileName(l),s)}})},{overlays:n}=this.beans;n?n.showExportOverlay(t):t()}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){let t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(i)}setFactoryMode(e){CFe(e)}getFactoryMode(){return vFe()}getSheetDataForExcel(e){let t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return pK(e)}exportMultipleSheetsAsExcel(e){iMe(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){let{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:r,formula:o,gos:s}=this.beans,a=ce(T({},e),{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:r,formulaSvc:o,gos:s,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:s.get("excelStyles")||[],rightToLeft:e.rightToLeft??s.get("enableRtl"),styleLinker:this.styleLinker.bind(this)});return new HFe(a)}styleLinker(e){let{rowType:t,rowIndex:n,value:i,column:r,columnGroup:o,node:s}=e,a=t==="HEADER",l=t==="HEADER_GROUPING",c=a?r:o,d=[],{gos:u,cellStyles:h}=this.beans;if(a||l)return d.push("header"),l&&d.push("headerGroup"),c&&(d=d.concat(M_(c.getDefinition(),u,r||null,o||null))),d;let p=u.get("excelStyles"),f=["cell"];if(!p?.length)return f;let g=p.map(m=>m.id),C=r.getDefinition();return h?.processAllCellClasses(C,Oe(u,{value:i,data:s.data,node:s,colDef:C,column:r,rowIndex:n}),m=>{g.indexOf(m)>-1&&f.push(m)}),f.sort((m,w)=>g.indexOf(m)<g.indexOf(w)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return LY(e)}packageFile(e){return pK(e)}},oMe=":where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:auto;position:relative;width:100%}.ag-virtual-list-container{overflow:hidden;position:relative}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}";function sMe(e){return{tag:"div",cls:`ag-virtual-list-viewport ag-${e}-virtual-list-viewport`,role:"presentation",children:[{tag:"div",ref:"eContainer",cls:`ag-virtual-list-container ag-${e}-virtual-list-container`}]}}var aMe=class extends Bu{constructor(e,t){super(sMe(t?.cssIdentifier||"default")),this.stopPropagationCallbacks=e,this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=q,this.awaitStableCallbacks=[],this.registerCSS(oMe);let{cssIdentifier:n="default",ariaRole:i="listbox",listName:r,moveItemCallback:o}=t||{};this.cssIdentifier=n,this.ariaRole=i,this.listName=r,this.moveItemCallback=o}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)},this.stopPropagationCallbacks),this.refreshAriaProperties(),this.addManagedEventListeners({stylesChanged:this.onStylesChanged.bind(this)})}onStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}refreshAriaProperties(){let t=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),n=this.eContainer;Jn(n,this.model?.getRowCount()>0?this.ariaRole:"presentation"),Ut(n,t)}addResizeObserver(){let e=()=>ks(this.beans,()=>this.drawVirtualRows()),t=Pl(this.beans,this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){let t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=cW(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){let{key:t,shiftKey:n}=e;switch(t){case $.UP:case $.DOWN:{let i=t===$.UP;e.preventDefault(),n?this.moveItem(i):this.navigate(i)}break;case $.PAGE_HOME:case $.PAGE_END:case $.PAGE_UP:case $.PAGE_DOWN:this.navigateToPage(t)!==null&&e.preventDefault();break}}onTabKeyDown(e){this.stopPropagationCallbacks?.stopPropagation(e),this.forceFocusOutOfContainer(e.shiftKey)}getNextRow(e){if(this.lastFocusedRowIndex==null)return;let t=this.lastFocusedRowIndex+(e?-1:1);if(!(t<0||t>=this.model.getRowCount()))return t}moveItem(e){if(!this.moveItemCallback)return;let t=this.getComponentAt(this.lastFocusedRowIndex);t&&this.moveItemCallback(t,e)}navigate(e){let t=this.getNextRow(e);t!==void 0&&this.focusRow(t)}navigateToPage(e,t="focused"){let n=!1;t==="focused"&&(t=this.getLastFocusedRow(),n=!0);let i=this.model.getRowCount()-1,r=-1;return e===$.PAGE_HOME?r=0:e===$.PAGE_END?r=i:e===$.PAGE_DOWN?r=Math.min(t+this.pageSize,i):e===$.PAGE_UP&&(r=Math.max(t-this.pageSize,0)),r===-1?null:(n?this.focusRow(r):this.ensureIndexVisible(r),r)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),ks(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;let t=this.renderedRows.get(e);t&&t.eDiv.focus()}))}getComponentAt(e){let t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,n)=>e(t.rowComponent,n))}getItemHeight(){return this.isHeightFromTheme?this.beans.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e,t=!0){let n=this.model.getRowCount();if(typeof e!="number"||e<0||e>=n)return!1;let i=e*this.rowHeight,r=i+this.rowHeight,o=this.getGui(),s=o.scrollTop,a=o.offsetHeight,l=s+a,c=t?0:this.rowHeight,d=s>i+c,u=l<r-c;if(d)return o.scrollTop=i,!0;if(u){let h=r-a;return o.scrollTop=h,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;let t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,this.refreshAriaProperties(),this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;let t=this.model.getRowCount();Ok(this,()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{if(!this.isAlive())return;let n=this.awaitStableCallbacks;this.awaitStableCallbacks=[];for(let i of n)i()})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;let t=this.getGui(),n=t.scrollTop,i=n+t.offsetHeight;if(n===i)this.clearVirtualRows();else{let r=Math.floor(n/this.rowHeight),o=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-n)/this.rowHeight),this.ensureRowsRendered(r,o,e)}}ensureRowsRendered(e,t,n){this.renderedRows.forEach((i,r)=>{(r<e||r>t)&&r!==this.lastFocusedRowIndex&&this.removeRow(r)}),n&&this.refreshRows();for(let i=e;i<=t;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(e){let t=this.model.getRow(e),n=this.ariaRole==="tree"?"treeitem":"option",i=Qi({tag:"div",cls:`ag-virtual-list-item ag-${this.cssIdentifier}-virtual-list-item`,role:n,attrs:{tabindex:"-1"}});gg(i,this.model.getRowCount()),mg(i,e+1),i.style.height=`${this.rowHeight}px`,i.style.top=`${this.rowHeight*e}px`;let r=this.componentCreator(t,i);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:r,eDiv:i,value:t})}removeRow(e){let t=this.renderedRows.get(e);t.eDiv.remove(),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){let e=this.model.getRowCount();this.renderedRows.forEach((t,n)=>{if(n>=e)this.removeRow(n);else{let i=this.model.getRow(n);this.model.areRowsEqual?.(t.value,i)?this.componentUpdater(i,t.rowComponent):this.removeRow(n)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}},lMe='.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}',oL="ag-list-item-hovered",cMe=class extends Gr{constructor(e,t,n){super(),this.comp=e,this.virtualList=t,this.params=n,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.beans.environment.addGlobalCSS(lMe,"component-AgVirtualListDragFeature"),this.params.addListeners(this,this.listItemDragStart.bind(this),this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};this.beans.dragAndDrop?.addDropTarget(e)}createAutoScrollService(){let e=this.virtualList.getGui();this.autoScrollService=new wy({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;let t=this.getListDragItem(e),n=this.virtualList.getComponentAt(t.rowIndex);if(!n)return;let i=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,f0(i,oL),f0(i,`ag-item-highlight-${t.position}`))}getListDragItem(e){let t=this.virtualList.getGui(),n=Number.parseFloat(window.getComputedStyle(t).paddingTop),i=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),o=Math.max(0,(e.y-n+r)/i),s=this.params.getNumRows(this.comp)-1,a=Math.min(s,o)|0;return{rowIndex:a,position:Math.round(o)>o||o>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){let e=this.virtualList.getGui();for(let t of e.querySelectorAll(`.${oL}`))for(let n of[oL,"ag-item-highlight-top","ag-item-highlight-bottom"])t.classList.remove(n);this.lastHoveredListItem=null}},dMe=class extends Mu{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();let{min:e,max:t,step:n}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),this.setStep(n||1)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>{let t=e.target.value;this.setValue(t)}})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());let n=super.setValue(e,t);return this.eInput.value=e,n}},uMe={selector:"AG-INPUT-RANGE",component:dMe},Ka=class extends yy{constructor(e){super(e,`<div class="ag-slider">
            <label data-ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range data-ref="eSlider"></ag-input-range>
                <ag-input-number-field data-ref="eText"></ag-input-number-field>
            </div>
        </div>`,[uMe,Sg]),this.eLabel=q,this.eSlider=q,this.eText=q,this.labelAlignment="top"}postConstruct(){super.postConstruct(),this.eSlider.addCss("ag-slider-field");let{minValue:e,maxValue:t,textFieldWidth:n,step:i,value:r,onValueChange:o}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),n!=null&&this.setTextFieldWidth(n),i!=null&&this.setStep(i),r!=null&&this.setValue(r),o!=null&&this.onValueChange(o)}onValueChange(e){return this.addManagedListeners(this.eText,{fieldValueChanged:()=>{let t=parseFloat(this.eText.getValue());this.eSlider.setValue(t.toString(),!0),e(t||0)}}),this.addManagedListeners(this.eSlider,{fieldValueChanged:()=>{let t=this.eSlider.getValue();this.eText.setValue(t,!0),e(parseFloat(t))}}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}},fa={selector:"AG-SLIDER",component:Ka},hMe=class extends Go{constructor(){super({template:{tag:"div",cls:"ag-color-input",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:"input",ref:"eInput",cls:"ag-input-field-input"},{tag:"div",ref:"eColor",cls:"ag-color-input-color"}]}]}}),this.eColor=q}wireBeans(e){this.color=e.agChartsExports._Util.Color}setColor(e){let t=e.toRgbaString();this.setValue(this.color.fromString(t).toHexString().toUpperCase(),!0),this.eColor.style.backgroundColor=t}setValue(e,t){let n=this.color.validColorString(e??"");return this.eInput.setCustomValidity(n?"":this.getLocaleTextFunc()("invalidColor","Color value is invalid")),super.setValue(e,t),n&&!t&&this.dispatchLocalEvent({type:"colorChanged"}),this}onColorChanged(e){this.addManagedListeners(this,{colorChanged:()=>e(this.color.fromString(this.value))})}},pMe={selector:"AG-COLOR-INPUT",component:hMe},fK=8,Z_=[],fMe=class extends Qr{constructor(e){super(`<div class="ag-color-panel" tabindex="-1">
            <div data-ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div data-ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div data-ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div data-ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div data-ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div data-ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div data-ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <ag-color-input data-ref="colorInput"></ag-color-input>
                <div data-ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,[pMe]),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.spectrumColor=q,this.spectrumVal=q,this.spectrumDragger=q,this.spectrumHue=q,this.spectrumHueSlider=q,this.spectrumAlpha=q,this.spectrumAlphaSlider=q,this.colorInput=q,this.recentColors=q,this.picker=e.picker}wireBeans(e){this._Color=e.agChartsExports._Util.Color}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===$.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListeners(this.spectrumColor,{keydown:e=>this.moveDragger(e)}),this.addManagedListeners(this.spectrumAlphaSlider,{keydown:e=>this.moveAlphaSlider(e)}),this.addManagedListeners(this.spectrumHueSlider,{keydown:e=>this.moveHueSlider(e)}),this.addManagedListeners(this.spectrumVal,{mousedown:this.onSpectrumDraggerDown.bind(this)}),this.addManagedListeners(this.spectrumHue,{mousedown:this.onSpectrumHueDown.bind(this)}),this.addManagedListeners(this.spectrumAlpha,{mousedown:this.onSpectrumAlphaDown.bind(this)}),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListeners(document,{mouseup:this.onMouseUp.bind(this)}),this.colorInput.onColorChanged(this.setColor.bind(this)),this.addManagedListeners(this.recentColors,{click:this.onRecentColorClick.bind(this),keydown:e=>{(e.key===$.ENTER||e.key===$.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))}})}initTabIndex(){let e=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){e.preventDefault(),this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){let t=this.spectrumValRect;if(!t)return;let n,i;if(e instanceof MouseEvent)n=e.clientX-t.left,i=e.clientY-t.top;else{let r=e.key===$.LEFT,o=e.key===$.RIGHT,s=e.key===$.UP,a=e.key===$.DOWN,l=s||a,c=r||o;if(!l&&!c)return;e.preventDefault();let{x:d,y:u}=this.getSpectrumValue();n=d+(c?r?-5:5:0),i=u+(l?s?-5:5:0)}n=Math.max(n,0),n=Math.min(n,t.width),i=Math.max(i,0),i=Math.min(i,t.height),this.setSpectrumValue(n/t.width,1-i/t.height)}moveHueSlider(e){let t=this.spectrumHueRect;if(!t)return;let n=this.moveSlider(this.spectrumHueSlider,e);n!=null&&(this.H=1-n/t.width,this.update())}moveAlphaSlider(e){let t=this.spectrumAlphaRect;if(!t)return;let n=this.moveSlider(this.spectrumAlphaSlider,e);n!=null&&(this.A=n/t.width,this.update())}moveSlider(e,t){let n=e.getBoundingClientRect(),i=e.parentElement?.getBoundingClientRect();if(!e||!i)return null;let r=n.width/2,o;if(t instanceof MouseEvent)o=Math.floor(t.clientX-i.left);else{let s=t.key===$.LEFT,a=t.key===$.RIGHT;if(!s&&!a)return null;t.preventDefault();let l=s?-5:5;o=parseFloat(e.style.left)+r+l}return o=Math.max(o,0),o=Math.min(o,i.width),e.style.left=o-r+"px",o}update(e){let{A:t,S:n,B:i,H:r,_Color:o}=this,s=r*360,a=o.fromHSB(s,n,i,t),l=a.toRgbaString(),d=o.fromHSB(s,n,i).toRgbaString(),h=o.fromHSB(s,1,1).toRgbaString(),p=this.picker;o.fromString(p.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),p.setValue(l),this.spectrumColor.style.backgroundColor=h,this.spectrumDragger.style.backgroundColor=d,this.spectrumHueSlider.style.backgroundColor=h,this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-from",o.fromHSB(s,n,i,0).toRgbaString()),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-to",d),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color",l),e||this.colorInput.setColor(a)}setSpectrumValue(e,t,n){let i=this.spectrumValRect||this.refreshSpectrumRect();if(i==null)return;let r=this.spectrumDragger,o=r.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,r.style.left=e*i.width-o.width/2+"px",r.style.top=(1-t)*i.height-o.height/2+"px",this.update(n)}getSpectrumValue(){let e=this.spectrumDragger,t=e.getBoundingClientRect(),n=parseFloat(e.style.left)+t.width/2,i=parseFloat(e.style.top)+t.height/2;return{x:n,y:i}}initRecentColors(){let e=Z_,t=e.map((n,i)=>`<div class="ag-recent-color" id=${i} style="background-color: ${n}; width: 15px; height: 15px;" recent-color="${n}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=t.join(""),Ie(this.recentColors,!!e.length)}setValue(e){let t=this._Color.fromString(e);this.setColor(t,!0)}setColor(e,t){let[n,i,r]=e.toHSB();this.H=(isNaN(n)?0:n)/360,this.A=e.a;let o=this.spectrumHueRect||this.refreshHueRect(),s=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-o.width-this.spectrumHueSlider.getBoundingClientRect().width/2}px`,this.spectrumAlphaSlider.style.left=`${this.A*s.width-this.spectrumAlphaSlider.getBoundingClientRect().width/2}px`,this.setSpectrumValue(i,r,!t)}onRecentColorClick(e){let t=e.target;if(!_e(t.id))return;let n=parseInt(t.id,10);this.setValue(Z_[n]),this.destroy()}addRecentColor(){let t=this._Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString(),n=Z_;!this.colorChanged||n[0]===t||(n=n.filter(i=>i!=t),n=[t].concat(n),n.length>fK&&(n=n.slice(0,fK)),Z_=n)}destroy(){this.addRecentColor(),super.destroy()}},gMe=".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-panel-title-bar-text-color);cursor:default;display:flex;flex:none;font-weight:var(--ag-panel-title-bar-font-weight);height:var(--ag-panel-title-bar-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{cursor:pointer;:where(.ag-icon){color:var(--ag-panel-title-bar-icon-color)}}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{flex:1 1 auto}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}";function mMe(e){return e??(e=e||"default"),{tag:"div",cls:`ag-panel ag-${e}-panel`,attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eTitleBar",cls:`ag-panel-title-bar ag-${e}-panel-title-bar ag-unselectable`,children:[{tag:"span",ref:"eTitle",cls:`ag-panel-title-bar-title ag-${e}-panel-title-bar-title`},{tag:"div",ref:"eTitleBarButtons",cls:`ag-panel-title-bar-buttons ag-${e}-panel-title-bar-buttons`}]},{tag:"div",ref:"eContentWrapper",cls:`ag-panel-content-wrapper ag-${e}-panel-content-wrapper`}]}}var OY=class extends Qr{constructor(e){super(mMe(e.cssIdentifier)),this.config=e,this.closable=!0,this.eContentWrapper=q,this.eTitleBar=q,this.eTitleBarButtons=q,this.eTitle=q,this.registerCSS(gMe)}postConstruct(){let{component:e,closable:t,hideTitleBar:n,title:i,minWidth:r=250,width:o,minHeight:s=250,height:a,centered:l,popup:c,x:d,y:u,postProcessPopupParams:h}=this.config,p=this.beans,f=this.createManagedBean(new Zk(this.getGui(),{minWidth:r,width:o,minHeight:s,height:a,centered:l,x:d,y:u,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}));this.positionableFeature=f;let g=this.getGui();if(e&&this.setBodyComponent(e),n?Ie(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(t??this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:m=>{if(g.contains(m.relatedTarget)||g.contains(wt(p))||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}let w=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");w&&w.focus()}}),c&&f.isPositioned())return;this.renderComponent&&this.renderComponent();let C;if(h){let{type:m,eventSource:w,mouseEvent:x}=h;C=()=>p.popupSvc?.callPostProcessPopup(h,m,g,w,x)}f.initialisePosition(C),this.eContentWrapper.style.height="0"}renderComponent(){let e=this.getGui();e.focus(),this.close=()=>{e.remove(),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){let t=this.closeButtonComp=new Qr({tag:"div",cls:"ag-button"});this.createBean(t);let n=t.getGui(),i=this.beans.iconSvc.createIconNoSpan("close",this.beans);i.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(i),this.addTitleBarButton(t),t.addManagedElementListeners(n,{click:this.onBtClose.bind(this)})}else this.closeButtonComp&&(this.closeButtonComp.getGui().remove(),this.closeButtonComp=this.destroyBean(this.closeButtonComp))}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){let n=this.eTitleBarButtons,i=n.children,r=i.length;t==null&&(t=r),t=Math.max(0,Math.min(t,r)),e.addCss("ag-panel-title-bar-button");let o=e.getGui();t===0?n.insertAdjacentElement("afterbegin",o):t===r?n.insertAdjacentElement("beforeend",o):i[t-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return ly(this.eContentWrapper)}getBodyWidth(){return lg(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let e=this.getGui();e&&Dr(e)&&this.close(),super.destroy()}},NY=class extends OY{constructor(e,t){super(ce(T({},e),{popup:!0})),this.callbacks=t,this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){let e=this.getGui(),{movable:t,resizable:n,maximizable:i,modal:r}=this.config;this.addCss("ag-dialog"),super.postConstruct(),this.tabGuardFeature=this.createManagedBean(new t5(this,this.callbacks?.stopPropagationCallbacks)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{this.popupSvc?.bringPopupToFront(e)},onTabKeyDown:o=>{if(r)return;let s=o.shiftKey,a=Wi(this.beans,e,!1,s);(!a||this.tabGuardFeature.getTabGuardCtrl().isTabGuard(a))&&this.callbacks?.focusNextContainer(this.beans,s)&&o.preventDefault()}}),t&&this.setMovable(t),i&&this.setMaximizable(i),n&&this.setResizable(n),this.config.modal||this.callbacks?.configureFocusableContainer(this.beans,this)}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){let e=this.getGui(),{alwaysOnTop:t,modal:n,title:i,afterGuiAttached:r}=this.config,o=this.getLocaleTextFunc(),s=this.popupSvc?.addPopup({modal:n,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:i||o("ariaLabelDialog","Dialog"),afterGuiAttached:r});s&&(this.close=s.hideFunc)}onClosed(e){this.destroy(),this.config.closedCallback?.(e)}setMaximized(e){this.isMaximizable&&e!==this.isMaximized&&this.toggleMaximize()}toggleMaximize(){let e=this.positionableFeature.getPosition();if(this.isMaximized){let{x:t,y:n,width:i,height:r}=this.lastPosition;this.setWidth(i),this.setHeight(r),this.positionableFeature.offsetElement(t,n)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){Ie(this.maximizeIcon,!this.isMaximized),Ie(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){if(this.maximizeListeners.length){for(let e of this.maximizeListeners)e();this.maximizeListeners.length=0}this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let t=this.eTitleBar;if(!t||e===this.isMaximizable)return;this.isMaximizable=e;let n=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),n.addManagedElementListeners(n.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(n,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){let e=this.maximizeButtonComp=this.createBean(new Qr({tag:"div",cls:"ag-dialog-button"})),t=e.getGui(),n=this.beans.iconSvc;return this.maximizeIcon=n.createIconNoSpan("maximize"),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=n.createIconNoSpan("minimize"),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}},vMe=class extends xy{constructor(e){super(T({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"chartsColorPicker"},e))}postConstruct(){this.eDisplayFieldColor=bt({tag:"span",cls:"ag-color-picker-color"}),this.eDisplayFieldText=bt({tag:"span",cls:"ag-color-picker-value"}),this.eDisplayField.append(this.eDisplayFieldColor,this.eDisplayFieldText),super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){let e=this.eWrapper.getBoundingClientRect(),t=this.beans.popupSvc.getParentRect();return this.createBean(new NY({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-t.left-190,y:e.top-t.top-250-(this.config.pickerGap??0),postProcessPopupParams:{type:"colorPicker",eventSource:this.eWrapper}},this.config.dialogCallbacks))}renderAndPositionPicker(){let e=this.pickerComponent,t=this.createBean(new fMe({picker:this}));return e.addCss("ag-color-dialog"),t.addDestroyFunc(()=>{e.isAlive()&&this.destroyBean(e)}),e.setParentComponent(this),e.setBodyComponent(t),t.setValue(this.getValue()),t.getGui().focus(),e.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,t.isAlive()&&this.destroyBean(t),this.isAlive()&&this.getFocusableElement().focus())}),()=>this.pickerComponent?.close()}setValue(e){return this.value===e?this:(this.eDisplayFieldColor.style.backgroundColor=e,this.eDisplayFieldText.textContent=this.beans.agChartsExports._Util.Color.fromString(e).toHexString().toUpperCase(),super.setValue(e))}getValue(){return this.value}};var CMe=class extends Bu{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===$.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){let e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}},DL=class extends Gr{constructor(e){super(),this.callbacks=e,this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){let{menuItemDef:t,isAnotherSubMenuOpen:n,level:i,childComponent:r,contextParams:o}=e;return this.params=e.menuItemDef,this.level=i,this.isAnotherSubMenuOpen=n,this.childComponent=r,this.contextParams=o,this.cssClassPrefix=this.params.menuItemParams?.cssClassPrefix??"ag-menu-option",this.callbacks.getMenuItemComp(this.beans,this.params,ce(T({},t),{level:i,isAnotherSubMenuOpen:n,openSubMenu:s=>this.openSubMenu(s),closeSubMenu:()=>this.closeSubMenu(),closeMenu:s=>this.closeMenu(s),updateTooltip:(s,a)=>this.refreshTooltip(s,a),onItemActivated:()=>this.onItemActivated()})).then(s=>{if(!s)return;this.menuItemComp=s;let a=s.configureDefaults?.();a&&this.configureDefaults(a===!0?void 0:a)})}addListeners(e,t){t?.suppressClick||this.addManagedElementListeners(e,{click:n=>this.onItemSelected(n)}),t?.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:n=>{(n.key===$.ENTER||n.key===$.SPACE)&&(n.preventDefault(),this.onItemSelected(n))}}),t?.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:n=>{n.stopPropagation(),n.preventDefault()}}),t?.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1,t){if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;let n=bt({tag:"div",cls:"ag-menu",role:"presentation"});this.eSubMenuGui=n;let i,r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){let c=this.createBean(new CMe(this.childComponent));c.setParentComponent(this);let d=c.getGui(),u="mouseenter",h=()=>this.cancelDeactivate();d.addEventListener(u,h),i=()=>{d.removeEventListener(u,h),this.destroyBean(c)},n.appendChild(d),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){let c=this.createBean(new $L(this.level+1,this.contextParams,this.callbacks));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),n.appendChild(c.getGui()),this.addManagedListeners(c,{closeMenu:d=>this.dispatchLocalEvent(d)}),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(c),e&&(r=()=>{c.activateFirstItem(),this.subMenuIsOpening=!1})}let o=this.beans.popupSvc,s=()=>{let c=this.eGui;o?.positionPopupForMenu({eventSource:c,ePopup:n,event:t instanceof MouseEvent?t:void 0,additionalParams:this.callbacks.getPostProcessPopupParams(this.contextParams)})},a=this.getLocaleTextFunc(),l=o?.addPopup({modal:!0,eChild:n,positionCallback:s,anchorToElement:this.eGui,ariaLabel:a("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{l&&l.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),i(),this.menuItemComp.setExpanded?.(!1),this.eSubMenuGui=void 0},this.menuItemComp.setExpanded?.(!0)}setAriaExpanded(e){this.suppressAria||Fi(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,t){this.cancelActivate(),!(this.params.disabled&&!t)&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!0),this.suppressFocus||this.callbacks.preserveRangesWhile(this.beans,()=>this.eGui.focus({preventScroll:!t})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),this.menuItemComp.setActive?.(!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){this.menuItemComp.select?.(),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action(this.gos.addCommon(T({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown",e),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){let t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){let e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}refreshRootElementGui(e){let t=this.menuItemComp.getGui(),{cssClassPrefix:n,params:{cssClasses:i,disabled:r}}=this,o=this.menuItemComp.getRootElement?.();if(o&&(e||t.classList.add("ag-menu-option-custom"),t=o),this.suppressRootStyles=!!e,!this.suppressRootStyles){t.classList.add(n);for(let s of i??[])t.classList.add(s);r&&t.classList.add(`${n}-disabled`)}return t}applyAriaProperties(e){let{params:{checked:t,subMenu:n,subMenuRole:i,disabled:r}}=this,o=t!=null;Jn(e,o?"menuitemcheckbox":"menuitem"),n&&uW(e,i??"menu"),r&&h0(e,!0)}configureDefaults(e){if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let{suppressRootStyles:t,suppressTooltip:n,suppressAria:i,suppressTabIndex:r,suppressFocus:o}=e||{},{params:{tooltip:s,disabled:a}}=this,l=this.eGui=this.refreshRootElementGui(!!t);this.suppressAria=!!i,i||this.applyAriaProperties(l),r||l.setAttribute("tabindex","-1"),n||this.refreshTooltip(s),a||this.addListeners(l,e),this.suppressFocus=!!o}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;let n=this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});n&&(this.tooltipFeature=this.createBean(n))}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),this.menuItemComp?.destroy?.(),super.destroy()}},$L=class extends Bu{constructor(e=0,t,n){super({tag:"div",cls:"ag-menu-list",role:"menu"}),this.level=e,this.menuActionParams=t,this.callbacks=n,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.callbacks.preserveRangesWhile(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){this.getParentComponent()?.getGui()?.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case $.UP:case $.RIGHT:case $.DOWN:case $.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case $.ESCAPE:this.closeIfIsChild()&&this.callbacks.stopPropagationCallbacks.stopPropagation(e);break}}handleFocusIn(e){let t=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(t)&&(this.getGui().contains(t)||this.activeMenuItem?.getSubMenuGui()?.contains(t))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){let t=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(t)||this.activeMenuItem.getSubMenuGui()?.contains(t)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&tt.all(e.map(t=>t==="separator"?tt.resolve({eGui:this.createSeparator()}):typeof t=="string"?(this.callbacks.warnNoItem?.(t),tt.resolve({eGui:null})):this.addItem(t))).then(t=>{for(let n of t??[])n?.eGui&&(this.appendChild(n.eGui),n.comp&&this.menuItems.push(n.comp))})}addItem(e){let t=this.createManagedBean(new DL(this.callbacks));return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(n=>n.isSubMenuOpen()),level:this.level,contextParams:this.menuActionParams}).then(()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:n=>{this.dispatchLocalEvent(n)},menuItemActivated:n=>{this.activeMenuItem&&this.activeMenuItem!==n.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=n.menuItem}}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){let e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}createSeparator(){let e={tag:"div",cls:"ag-menu-separator-part"};return Qi({tag:"div",cls:"ag-menu-separator",attrs:{"aria-hidden":"true"},children:[e,e,e,e]})}handleNavKey(e){switch(e){case $.UP:case $.DOWN:{let n=this.findNextItem(e===$.UP);n&&n!==this.activeMenuItem&&n.activate(!1,!0);return}}let t=this.gos.get("enableRtl")?$.RIGHT:$.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){let t=this.getParentComponent();return t&&t instanceof DL?(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){let t=[...this.menuItems];if(!t.length)return;if(!this.activeMenuItem)return e?Qe(t):t[0];e&&t.reverse();let n,i=!1;for(let r of t){if(!i){r===this.activeMenuItem&&(i=!0);continue}n=r;break}return i&&!n?t[0]:n||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},bMe="ag-menu",wMe="ag-context-menu-loading-icon",yMe=class extends Gr{constructor(e){super(),this.params=e,this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenu(e,t,n){let{getMenuItems:i,shouldBlockMenuOpen:r}=this.params,o=i(e,t);if(a$(o)){let s=this.lastPromise+1;return this.lastPromise=s,this.destroyLoadingSpinner||this.createLoadingIcon(t),o.then(a=>{if(this.lastPromise!==s)return;let{target:l}=t,c=!l;a?.length&&(c||Dr(l))&&!r?.()&&this.createContextMenu({menuItems:a,menuActionParams:e,mouseEvent:t,anchorToElement:n}),this.destroyLoadingSpinner?.()}),!0}return o?.length?(this.createContextMenu({menuItems:o,menuActionParams:e,mouseEvent:t,anchorToElement:n}),!0):!1}createLoadingIcon(e){let{beans:t}=this,n=this.getLocaleTextFunc(),i=t.iconSvc.createIconNoSpan("loadingMenuItems"),r=Qi({tag:"div",cls:wMe});r.appendChild(i);let o=ra(t),s=rp(t);if(!s)return;s.appendChild(r),t.ariaAnnounce?.announceValue(n("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),t.environment.applyThemeClasses(r),p_(r,e,t);let a=l=>{p_(r,l,t)};o.addEventListener("mousemove",a),this.destroyLoadingSpinner=()=>{o.removeEventListener("mousemove",a),r.remove(),this.destroyLoadingSpinner=null}}createContextMenu(e){let{mapMenuItems:t,menuItemCallbacks:n,beforeMenuOpen:i,onMenuClose:r,afterMenuDestroyed:o,onVisibleChanged:s,onMenuOpen:a}=this.params,{menuItems:l,menuActionParams:c,mouseEvent:d,anchorToElement:u}=e,h=this.beans.popupSvc,p=t?D=>t(l,c,D):()=>l,f=new SMe(p,c,n);this.createBean(f);let g=f.getGui();i?.(c);let C={additionalParams:n.getPostProcessPopupParams(c),type:"contextMenu",mouseEvent:d,ePopup:g,nudgeY:1},m=this.getLocaleTextFunc(),w=h?.addPopup({modal:!0,eChild:g,closeOnEsc:!0,closedCallback:D=>{n.preserveRangesWhile(this.beans,()=>{r?.(),this.destroyBean(f),o?.(),s?.(!1,D===void 0?"api":"ui")})},click:d,positionCallback:()=>{let D=this.gos.get("enableRtl");h?.positionPopupUnderMouseEvent(ce(T({},C),{nudgeX:D?(g.offsetWidth+1)*-1:1}))},anchorToElement:u,ariaLabel:m("ariaLabelContextMenu","Context Menu")});w&&(a?.(),f.afterGuiAttached({container:"contextMenu",hidePopup:w.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=f,f.addEventListener("destroyed",()=>{this.activeMenu===f&&(this.activeMenu=null)}),w&&f.addEventListener("closeMenu",D=>w.hideFunc({mouseEvent:D.mouseEvent??void 0,keyboardEvent:D.keyboardEvent??void 0,forceHide:!0}));let x=d&&d instanceof MouseEvent&&d.type==="mousedown";s?.(!0,x?"api":"ui")}destroy(){this.destroyLoadingSpinner?.(),super.destroy()}},SMe=class extends Qr{constructor(e,t,n){super({tag:"div",cls:bMe,role:"presentation"}),this.getMenuItems=e,this.menuActionParams=t,this.callbacks=n,this.menuList=null}postConstruct(){let e=this.createManagedBean(new $L(0,this.menuActionParams,this.callbacks)),t=this.getMenuItems(()=>this.getGui());e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",n=>this.dispatchLocalEvent(n))}afterGuiAttached({hidePopup:e}){e&&this.addDestroyFunc(e);let t=this.menuList;t&&this.callbacks.preserveRangesWhile(this.beans,()=>qn(t.getGui()))}},xMe=class extends Qr{constructor(e){super({tag:"div"}),this.callbacks=e}init(e){this.params=e,this.cssClassPrefix=this.params.cssClassPrefix??"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){let{checked:e,subMenu:t}=this.params,n=this.getGui();e&&c_(n,e),t&&Fi(n,!1)}addIcon(){if(this.params.isCompact)return;let e=Qi({tag:"span",ref:"eIcon",cls:`${this.getClassName("part")} ${this.getClassName("icon")}`,role:"presentation"}),{checked:t,icon:n}=this.params;t?e.appendChild(this.beans.iconSvc.createIconNoSpan("check")):n&&(dy(n)?e.appendChild(n):typeof n=="string"?e.innerHTML=n:this.callbacks?.warnNoIcon?.()),this.getGui().appendChild(e)}addName(){let e=Qi({tag:"span",ref:"eName",cls:`${this.getClassName("part")} ${this.getClassName("text")}`,children:this.params.name||""});this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;let e=Qi({tag:"span",ref:"eShortcut",cls:`${this.getClassName("part")} ${this.getClassName("shortcut")}`,children:this.params.shortcut||""});this.getGui().appendChild(e)}addSubMenu(){let e=Qi({tag:"span",ref:"ePopupPointer",cls:`${this.getClassName("part")} ${this.getClassName("popup-pointer")}`}),t=this.getGui();if(this.params.subMenu){let n=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(this.beans.iconSvc.createIconNoSpan(n))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}};function _L(e,t){if(!t)return null;let n=Rs(e),i=n.indexOf(t);if(i===-1)return null;let r=-1;for(let o=i-1;o>=0;o--)if(n[o].classList.contains(qw.TAB_GUARD_TOP)){r=o;break}return r<=0?null:n[r-1]}function BY(e,t){if(!t)return!1;let n=e.querySelectorAll(`.${Yk}`);if(!n.length)return!1;for(let i=0;i<n.length;i++)if(n[i].contains(t))return!0;return!1}function EMe(e){return{tag:"div",cls:`ag-tabs ${e}`,children:[{tag:"div",ref:"eHeader"},{tag:"div",ref:"eBody",role:"presentation",cls:"ag-tabs-body"+e?` ${e}-body`:""}]}}var VY=class extends Bu{constructor(e){super(EMe(e.cssClass)),this.eHeader=q,this.eBody=q,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){if(this.setupHeader(),this.params.items)for(let e of this.params.items)this.addItem(e);this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>this.activeItem?.tabbedItem?.afterDetachedCallback?.())}setupHeader(){let{enableCloseButton:e,cssClass:t}=this.params,n=(i,r)=>{i.classList.add(`ag-tabs-${r}`),t&&i.classList.add(`${t}-${r}`)};e?(this.setupCloseButton(n),this.eTabHeader=Qi({tag:"div",role:"presentation"}),n(this.eHeader,"header-wrapper"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Jn(this.eTabHeader,"tablist"),n(this.eTabHeader,"header")}setupCloseButton(e){let t=Qi({tag:"button"});e(t,"close-button");let n=this.beans.iconSvc.createIconNoSpan("close");Ut(t,this.params.closeButtonAriaLabel),t.appendChild(n),this.addManagedElementListeners(t,{click:()=>this.params.onCloseClicked?.()});let i=Qi({tag:"div",role:"presentation"});e(i,"close-button-wrapper"),i.appendChild(t),this.eHeader.appendChild(i),this.eCloseButton=t}handleKeyDown(e){switch(e.key){case $.RIGHT:case $.LEFT:{if(!this.eTabHeader.contains(wt(this.beans)))return;let t=e.key===$.RIGHT,n=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),r=t!==n?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===r)return;e.preventDefault();let o=this.items[r];this.showItemWrapper(o),o.eHeaderButton.focus();break}case $.UP:case $.DOWN:e.stopPropagation();break}}onTabKeyDown(e){if(e.defaultPrevented)return;let{beans:t,eHeader:n,eBody:i,activeItem:r,params:o}=this,{suppressTrapFocus:s,enableCloseButton:a}=o,l=wt(t),c=e.target,d=e.shiftKey;if(n.contains(l)){e.preventDefault(),a&&d&&!this.eCloseButton?.contains(l)?this.eCloseButton?.focus():s&&d?_L(vi(t).body,c)?.focus():this.focusBody(e.shiftKey);return}let u=null;if(BY(i,c)&&(d&&(u=_L(i,c)),!u&&!s&&(u=r.eHeaderButton)),!u&&i.contains(l)&&(u=Wi(t,i,!1,d),!u)){s&&!d?this.forceFocusOutOfContainer(d):a&&!d?(e.preventDefault(),this.eCloseButton?.focus()):(e.preventDefault(),this.focusHeader());return}u&&(e.preventDefault(),u.focus())}focusInnerElement(e){return e?this.focusBody(!0):(this.focusHeader(),!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){return qn(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){let t=Qi({tag:"span",cls:"ag-tab",role:"tab",attrs:{tabindex:"-1"}});t.appendChild(e.title),this.eTabHeader.appendChild(t),Ut(t,e.titleLabel);let n={tabbedItem:e,eHeaderButton:t};this.items.push(n),t.addEventListener("click",this.showItemWrapper.bind(this,n))}showItem(e){let t=this.items.find(n=>n.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){let{tabbedItem:t,eHeaderButton:n}=e;if(this.params.onItemClicked?.({item:t}),this.activeItem===e){this.params.onActiveItemClicked?.();return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),at(this.eBody),t.bodyPromise.then(i=>{this.eBody.appendChild(i);let r=!S0();if(this.params.suppressFocusBodyOnOpen||qn(this.eBody,!1,r),t.afterAttachedCallback&&t.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let o=t.getScrollableContainer?.()||i;[this.lastScrollListener]=this.addManagedElementListeners(o,{scroll:()=>{this.tabbedItemScrollMap.set(t.name,o.scrollTop)}});let s=this.tabbedItemScrollMap.get(t.name);s!==void 0&&setTimeout(()=>{o.scrollTop=s},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),this.activeItem.tabbedItem.afterDetachedCallback?.()),n.classList.add("ag-tab-selected"),this.activeItem=e}},DMe=".ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}";function _Me(e){let t=e.cssIdentifier||"default",n=e.direction||"vertical";return{tag:"div",cls:`ag-group ag-${t}-group`,role:"presentation",children:[{tag:"div",ref:"eToolbar",cls:`ag-group-toolbar ag-${t}-group-toolbar`,children:[{tag:"ag-checkbox",ref:"cbGroupEnabled"}]},{tag:"div",ref:"eContainer",cls:`ag-group-container ag-group-container-${n} ag-${t}-group-container`}]}}var qu=class extends Qr{constructor(e={}){super(_Me(e),[mo]),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1,this.eToolbar=q,this.cbGroupEnabled=q,this.eContainer=q,this.registerCSS(DMe);let{enabled:t,items:n,suppressEnabledCheckbox:i,expanded:r,suppressToggleExpandOnEnableChange:o,useToggle:s}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=t??!0,this.items=n||[],this.useToggle=s??!1,this.alignItems=e.alignItems||"center",this.expanded=r??!0,i!=null&&(this.suppressEnabledCheckbox=i),o!=null&&(this.suppressToggleExpandOnEnableChange=o)}postConstruct(){if(this.setupTitleBar(),this.items.length){let r=this.items;this.items=[],this.addItems(r)}let e=this.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);let{onEnableChange:t,onExpandedChange:n,suppressOpenCloseIcons:i}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(i??!1),this.refreshChildDisplay(),Ie(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),t!=null&&this.onEnableChange(t),n!=null&&this.onExpandedChange(n)}refreshChildDisplay(){Ie(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),this.eTitleBar?.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCss(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;let t=`ag-group-item-alignment-${this.alignItems}`;return this.addCss(t),this}toggleGroupExpand(e,t){if(this.eTitleBar?.isSuppressCollapse()&&!this.useToggle)e=!0,t=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),Ie(this.eContainer,e),t||this.dispatchLocalEvent({type:e?"expanded":"collapsed"}),this}addItems(e){for(let t of e)this.addItem(t)}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}updateItems(e){let t=this.items,n=0;for(let i=0;i<t.length;++i){let r=t[i];if(r===e[n])n++;else{let o=a0(r)?r.getGui():r;Bt(o)}}for(;n<e.length;)this.insertItem(e[n++]);this.items=e}insertItem(e,t){let n=this.eContainer,i=a0(e)?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t?(n.insertAdjacentElement("afterbegin",i),this.items.unshift(i)):(n.appendChild(i),this.items.push(i))}hideItem(e,t){let n=this.items[t];Ie(n,!e)}getItemIndex(e){let t=a0(e)?e.getGui():e;return this.items.indexOf(t)}setTitle(e){return this.eTitleBar?.setTitle(e),this}addTitleBarWidget(e){return this.eTitleBar?.addWidget(e),this}addCssClassToTitleBar(e){this.eTitleBar?.addCss(e)}dispatchEnableChangeEvent(e){let t={type:"enableChange",enabled:e};this.dispatchLocalEvent(t)}setEnabled(e,t,n){return this.enabled=e,this.refreshDisabledStyles(),n||this.toggleGroupExpand(e),t||(this.cbGroupEnabled.setValue(e),this.eToggle?.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListeners(this,{enableChange:t=>e(t.enabled)}),this}onExpandedChange(e){return this.addManagedListeners(this,{expanded:()=>e(!0),collapsed:()=>e(!1)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.eTitleBar?.hideOpenCloseIcons(e),this}refreshDisabledStyles(){let e=!this.enabled;this.eContainer.classList.toggle("ag-disabled",e),this.eTitleBar?.refreshDisabledStyles(this.suppressEnabledCheckbox&&e),this.eContainer.classList.toggle("ag-disabled-group-container",e)}setupTitleBar(){let e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){let e=this.createManagedBean(new RMe(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListeners(e,{expandedChanged:t=>this.toggleGroupExpand(t.expanded)}),e}createToggleTitleBar(){let e=this.createManagedBean(new Ic({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:t=>{this.setEnabled(t,!0),this.dispatchEnableChangeEvent(t)}}));return e.addCss("ag-group-title-bar"),e.addCss(`ag-${this.params.cssIdentifier??"default"}-group-title-bar ag-unselectable`),this.eToggle=e,this.toggleGroupExpand(this.enabled),e}},sL="ag-disabled-group-title-bar";function AMe(e){let t=e.cssIdentifier??"default";return{tag:"div",cls:`ag-group-title-bar ag-${t}-group-title-bar ag-unselectable`,role:e.suppressKeyboardNavigation?"presentation":"group",children:[{tag:"span",ref:"eGroupOpenedIcon",cls:`ag-group-title-bar-icon ag-${t}-group-title-bar-icon`,role:"presentation"},{tag:"span",ref:"eGroupClosedIcon",cls:`ag-group-title-bar-icon ag-${t}-group-title-bar-icon`,role:"presentation"},{tag:"span",ref:"eTitle",cls:`ag-group-title ag-${t}-group-title`}]}}var RMe=class extends Qr{constructor(e={}){super(AMe(e)),this.suppressOpenCloseIcons=!1,this.suppressKeyboardNavigation=!1,this.eGroupOpenedIcon=q,this.eGroupClosedIcon=q,this.eTitle=q;let{title:t,suppressOpenCloseIcons:n,suppressKeyboardNavigation:i}=e;t&&t.length>0&&(this.title=t),n!=null&&(this.suppressOpenCloseIcons=n),this.suppressKeyboardNavigation=i??!1}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){let e=this.beans.iconSvc;this.eGroupClosedIcon.appendChild(e.createIconNoSpan("accordionClosed")),this.eGroupOpenedIcon.appendChild(e.createIconNoSpan("accordionOpen")),this.addManagedElementListeners(this.getGui(),{click:()=>this.dispatchExpandChanged(),keydown:t=>{switch(t.key){case $.ENTER:case $.SPACE:t.preventDefault(),this.dispatchExpandChanged();break;case $.RIGHT:case $.LEFT:t.preventDefault(),this.dispatchExpandChanged(t.key===$.RIGHT);break}}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||Fi(this.getGui(),e)}refreshOpenCloseIcons(e){let t=!this.suppressOpenCloseIcons;Ie(this.eGroupOpenedIcon,t&&e),Ie(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){let t={type:"expandedChanged",expanded:e};this.dispatchLocalEvent(t)}setTitle(e){let t=this.getGui(),n=!!e&&e.length>0;e=n?e:void 0,this.eTitle.textContent=e??"",Ie(t,n),e!==this.title&&(this.title=e);let i=t.classList.contains(sL);return this.refreshDisabledStyles(i),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){let t=this.getGui();e?(t.classList.add(sL),t.removeAttribute("tabindex"),Jn(t,"presentation")):(t.classList.remove(sL),typeof this.title=="string"&&!this.suppressKeyboardNavigation?(this.activateTabIndex([t]),Jn(t,"group")):(t.removeAttribute("tabindex"),Jn(t,"presentation")))}},Ii={selector:"AG-GROUP-COMPONENT",component:qu},Lt="35.0.0",ti={moduleName:"EnterpriseCore",version:Lt,beans:[P_e],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]},FMe='.ag-advanced-filter-header{align-items:center;background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);display:flex;position:relative}.ag-advanced-filter{align-items:center;display:flex;width:100%}.ag-advanced-filter-buttons{display:contents}.ag-advanced-filter-header-cell{height:100%;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding)}.ag-advanced-filter-apply-button,.ag-advanced-filter-builder-button{align-items:center;background-color:unset;border:0;display:flex;font-size:var(--ag-font-size);font-weight:600;line-height:normal;padding:var(--ag-spacing);white-space:nowrap;&:where(:not(:disabled)){cursor:pointer;&:hover{background-color:var(--ag-row-hover-color)}}}:where(.ag-ltr) .ag-advanced-filter-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-button{margin-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-advanced-filter-builder-button-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-advanced-filter-builder-button-label{margin-right:var(--ag-spacing)}.ag-advanced-filter-builder{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-advanced-filter-builder-list{flex:1;overflow:auto}.ag-advanced-filter-builder-button-panel{border-top:var(--ag-advanced-filter-builder-button-bar-border);display:flex;justify-content:flex-end;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-advanced-filter-builder-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-cancel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-builder-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-cancel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-advanced-filter-builder-item-wrapper{align-items:center;display:flex;flex:1 1 auto;justify-content:space-between;overflow:hidden}:where(.ag-ltr) .ag-advanced-filter-builder-item-wrapper{padding-left:calc(var(--ag-icon-size)/2);padding-right:var(--ag-icon-size)}:where(.ag-rtl) .ag-advanced-filter-builder-item-wrapper{padding-left:var(--ag-icon-size);padding-right:calc(var(--ag-icon-size)/2)}:where(.ag-virtual-list-viewport) .ag-advanced-filter-builder-item-wrapper .ag-tab-guard{position:absolute}.ag-advanced-filter-builder-item-tree-lines>*{width:var(--ag-advanced-filter-builder-indent-size)}.ag-advanced-filter-builder-item-tree-line-root{width:var(--ag-icon-size);&:before{height:50%;top:50%}}.ag-advanced-filter-builder-item-tree-line-horizontal,.ag-advanced-filter-builder-item-tree-line-vertical,.ag-advanced-filter-builder-item-tree-line-vertical-bottom,.ag-advanced-filter-builder-item-tree-line-vertical-top{align-items:center;display:flex;height:100%;position:relative;&:after,&:before{content:"";height:100%;position:absolute}}.ag-advanced-filter-builder-item-tree-line-horizontal:after{border-bottom:var(--ag-border-width) solid var(--ag-border-color);height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size))}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-horizontal:after{left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-horizontal:after{right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical:before{top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-top:before{height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{height:calc(50% - var(--ag-icon-size)*1.5/2);top:calc(50% + var(--ag-icon-size)*1.5/2);width:calc(var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-condition{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing)}.ag-advanced-filter-builder-item,.ag-advanced-filter-builder-item-buttons,.ag-advanced-filter-builder-item-condition,.ag-advanced-filter-builder-item-tree-lines,.ag-advanced-filter-builder-pill,.ag-advanced-filter-builder-pill-wrapper{align-items:center;display:flex;height:100%}.ag-advanced-filter-builder-pill-wrapper{margin:0 var(--ag-spacing)}.ag-advanced-filter-builder-pill{border-radius:var(--ag-border-radius);min-height:calc(100% - var(--ag-spacing)*3);min-width:calc(var(--ag-spacing)*2);padding:var(--ag-spacing) calc(var(--ag-spacing)*2);position:relative}:where(.ag-advanced-filter-builder-pill){.ag-advanced-filter-builder-value-number{font-family:monospace;font-weight:700}.ag-advanced-filter-builder-value-empty{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-left:var(--ag-spacing)}}.ag-advanced-filter-builder-pill-display{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-advanced-filter-builder-join-pill{background-color:var(--ag-advanced-filter-builder-join-pill-color);cursor:pointer}.ag-advanced-filter-builder-column-pill{background-color:var(--ag-advanced-filter-builder-column-pill-color);cursor:pointer}.ag-advanced-filter-builder-option-pill{background-color:var(--ag-advanced-filter-builder-option-pill-color);cursor:pointer}.ag-advanced-filter-builder-value-pill{background-color:var(--ag-advanced-filter-builder-value-pill-color);cursor:text;max-width:140px;:where(.ag-advanced-filter-builder-pill-display){display:block}}.ag-advanced-filter-builder-item-buttons>*{margin:0 calc(var(--ag-spacing)*.5)}.ag-advanced-filter-builder-item-button{color:var(--ag-subtle-text-color);cursor:pointer;position:relative}.ag-advanced-filter-builder-item-button,.ag-advanced-filter-builder-pill{&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-advanced-filter-builder-item-button-disabled{cursor:default;opacity:.5}.ag-advanced-filter-builder-virtual-list-container{top:var(--ag-spacing)}.ag-advanced-filter-builder-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:hover{background-color:var(--ag-row-hover-color);:where(.ag-advanced-filter-builder-item-button){opacity:1}}}.ag-advanced-filter-builder-invalid{color:var(--ag-subtle-text-color);cursor:default;margin:0 var(--ag-spacing)}:where(.ag-advanced-filter-builder-validation) .ag-advanced-filter-builder-invalid{color:var(--ag-invalid-color)}:where(.ag-advanced-filter-builder-virtual-list-item-highlight) .ag-advanced-filter-builder-item-button:focus-visible{opacity:1}';function MMe(e){return e.filterManager?.getAdvFilterModel()??null}function IMe(e,t){e.filterManager?.setAdvFilterModel(t)}function TMe(e){e.filterManager?.toggleAdvFilterBuilder(!0,"api")}function PMe(e){e.filterManager?.toggleAdvFilterBuilder(!1,"api")}var kMe={ariaAdvancedFilterBuilderItem:e=>`${e[0]}. Level ${e[1]}. Press ENTER to edit`,ariaAdvancedFilterBuilderItemValidation:e=>`${e[0]}. Level ${e[1]}. ${e[2]} Press ENTER to edit`,ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterReset:"Reset",advancedFilterCancel:"Cancel",advancedFilterClear:"Clear",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:e=>`Expression has an error. ${e[0]} - ${e[1]}.`,advancedFilterValidationMessageAtEnd:e=>`Expression has an error. ${e[0]} at end of expression.`,advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderClear:"Clear",advancedFilterBuilderReset:"Reset",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function AL(e,t,n){if(!e)return"";let i=n-t;return i?e.slice(0,e.length-i):e}function bp(e,t,n,i,r,o,s){let a=n+(!e.length||s?0:1),l=0;return r&&(e[a]===" "?l=1:(i+=" ",o&&(i+='"'))),{updatedValue:e.slice(0,t)+i+e.slice(a),updatedPosition:t+i.length+l}}function LMe(e,t,n){let i=t;for(;i<n&&e[i]===" ";)i++;return i}function RL(e,t,n,i){let r=t,o=!1;for(;r<e.length;){let s=e[r];if(s==="("){i&&e[r-1]===" "?o=!0:r=r-1;break}else if(s===" "||n&&s===")"){r=r-1;break}r++}return{endPosition:r,isEmpty:o}}function qL(e,t,n,i){n!==t&&(e.expression=bp(e.expression,i-t.length+1,i,n).updatedValue)}var OMe=class{constructor(e,t){this.params=e,this.startPosition=t,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(e,t){if(e===FL&&!this.colName)this.hasStartChar=!0;else if(e===ML&&this.hasStartChar){if(this.parseColumn(!1,t))return this.hasEndChar=!0,!1;this.colName+=e}else this.colName+=e}getDisplayValue(){return(this.hasStartChar?FL:"")+this.colName+(this.hasEndChar?ML:"")}getColId(){return this.colId}complete(e){this.parseColumn(!0,e)}getValidationError(){return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:this.endPosition??this.params.expression.length-1}}parseColumn(e,t){this.endPosition=t;let n=this.params.advFilterExpSvc.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,qL(this.params,this.colName,n.columnName,t-1),this.colName=n.columnName,this.column=this.params.colModel.getColDefCol(this.colId),this.column)?(this.baseCellDataType=this.params.dataTypeSvc?.getBaseDataType(this.column)??"text",!0):(e&&(this.valid=!1),this.baseCellDataType="text",!1)}},NMe=class{constructor(e,t,n){this.params=e,this.startPosition=t,this.baseCellDataType=n,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(e,t){if(e===" "||e===")"){if(this.parseOperator(!1,t-1))return!0;this.operator+=e}else this.operator+=e}complete(e){this.parseOperator(!0,e)}getValidationError(){return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:this.endPosition??this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(e,t){let n=this.params.advFilterExpSvc.getDataTypeExpressionOperator(this.baseCellDataType),i=n.findOperator(this.operator);if(this.endPosition=t,i){this.parsedOperator=i;let o=n.operators[i];this.expectedNumOperands=o.numOperands;let s=o.displayValue;return qL(this.params,this.operator,s,t),this.operator=s,!0}return(e||!(i===null))&&(this.valid=!1),!1}},BMe=class{constructor(e,t,n,i){this.params=e,this.startPosition=t,this.baseCellDataType=n,this.column=i,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null,this.filterValidationSetters={number:()=>{(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=this.params.advFilterExpSvc.translate("advancedFilterValidationNotANumber"))},date:r=>{r==null&&(this.valid=!1,this.validationMessage=this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidDate"))},dateString:(...r)=>this.filterValidationSetters.date(...r),dateTime:(...r)=>this.filterValidationSetters.date(...r),dateTimeString:(...r)=>this.filterValidationSetters.date(...r),boolean(){},object(){},text(){}}}parse(e,t){if(e===" ")if(this.quotes)this.operand+=e;else return this.parseOperand(!1,t),!0;else if(e===")"){if(this.baseCellDataType==="number"||!this.quotes)return this.parseOperand(!1,t-1),!0;this.operand+=e}else if(!this.operand&&!this.quotes&&(e==="'"||e==='"'))this.quotes=e;else{if(this.quotes&&e===this.quotes)return this.parseOperand(!1,t),!1;this.operand+=e}}complete(e){this.parseOperand(!0,e)}getValidationError(){return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:this.endPosition??this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(e,t){let{advFilterExpSvc:n}=this.params;if(this.endPosition=t,this.modelValue=this.operand,e&&this.quotes)this.valid=!1,this.validationMessage=n.translate("advancedFilterValidationMissingQuote");else if(this.modelValue==="")this.valid=!1,this.validationMessage=n.translate("advancedFilterValidationMissingValue");else{let i=n.getOperandModelValue(this.operand,this.baseCellDataType,this.column);i!=null&&(this.modelValue=i),this.filterValidationSetters[this.baseCellDataType](i)}}},FL="[",ML="]",VMe=class{constructor(e,t){this.params=e,this.startPosition=t,this.isAwaiting=!0,this.operandValueGetters={number:Number,date:n=>this.params.valueSvc.parseValue(this.columnParser.column,null,n,void 0),dateString:(...n)=>this.operandValueGetters.date(...n),dateTime:(...n)=>this.operandValueGetters.date(...n),dateTimeString:(...n)=>this.operandValueGetters.date(...n),boolean:n=>n,object:n=>n,text:n=>n}}parseExpression(){let e=this.startPosition,{expression:t}=this.params;for(;e<t.length;){let n=t[e];if(!(n===" "&&this.isAwaiting)){if(this.isAwaiting=!1,!this.parser){let r;this.columnParser?this.operatorParser?(this.operandParser=new BMe(this.params,e,this.columnParser.baseCellDataType,this.columnParser.column),r=this.operandParser):(this.operatorParser=new NMe(this.params,e,this.columnParser.baseCellDataType),r=this.operatorParser):(this.columnParser=new OMe(this.params,e),r=this.columnParser),this.parser=r}let i=this.parser.parse(n,e);if(i!=null){if(this.isComplete())return this.returnEndPosition(i?e-1:e,!0);this.parser=void 0,this.isAwaiting=!0}}e++}return this.parser?.complete?.(e-1),this.returnEndPosition(e)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){let e=this.columnParser?.getValidationError()??this.operatorParser?.getValidationError()??this.operandParser?.getValidationError();if(e)return e;let t=this.params.expression.length,n;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(n="advancedFilterValidationMissingValue"):n="advancedFilterValidationMissingOption":n="advancedFilterValidationMissingColumn",n?{message:this.params.advFilterExpSvc.translate(n),startPosition:t,endPosition:t}:null}getFunction(e){return this.getFunctionCommon(e,(t,n,i,r)=>(o,s,a)=>a.operators[n].evaluator(o.getValue(i,s),s,a.evaluatorParams[r],t==null?void 0:a.operands[t]))}getAutocompleteListParams(e){if(this.isColumnPosition(e))return this.getColumnAutocompleteListParams(e);if(this.isOperatorPosition(e))return this.getOperatorAutocompleteListParams(e);if(!this.isBeyondEndPosition(e))return{enabled:!1}}updateExpression(e,t,n){let{expression:i}=this.params;if(this.isColumnPosition(e))return bp(this.params.expression,this.startPosition,this.columnParser?.getColId()?this.columnParser.endPosition:RL(i,e).endPosition,this.params.advFilterExpSvc.getColumnValue(t),!0);if(this.isOperatorPosition(e)){let r=this.getBaseCellDataTypeFromOperatorAutocompleteType(n),o=this.hasOperand(r,t.key),s=o&&this.doesOperandNeedQuotes(r),a;if(this.operatorParser?.startPosition!=null&&e<this.operatorParser.startPosition)a=bp(i,e,e,t.displayValue??t.key,o,s);else{let l,c=!1;if(this.operatorParser?.getOperatorKey())l=this.operatorParser.endPosition;else{let{endPosition:d,isEmpty:u}=RL(i,e,!0,!0);l=d,c=u}a=bp(i,LMe(i,this.columnParser.endPosition+1,l),l,t.displayValue??t.key,o,s,c)}return ce(T({},a),{hideAutocomplete:!o})}return null}getModel(){let e=this.columnParser.getColId(),t={filterType:this.columnParser.baseCellDataType,colId:e,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(t.filter=this.operandParser.getModelValue()),t}getFunctionCommon(e,t){let n=this.columnParser.getColId(),i=this.operatorParser?.getOperatorKey(),{operators:r,evaluatorParams:o,operands:s}=e,a=this.params.advFilterExpSvc.getExpressionOperator(this.columnParser.baseCellDataType,i),l=this.addToListAndGetIndex(r,a),c=this.params.advFilterExpSvc.getExpressionEvaluatorParams(n),d=this.addToListAndGetIndex(o,c),u=this.operatorParser?.expectedNumOperands===0?void 0:this.addToListAndGetIndex(s,this.getOperandValue());return t(u,l,n,d)}getOperandValue(){let{baseCellDataType:e,column:t}=this.columnParser,n=this.operandValueGetters[e](this.operandParser.getRawValue());return e==="dateString"||e==="dateTimeString"?this.params.dataTypeSvc?.getDateParserFunction(t)(n)??n:n}isComplete(){return!!(this.operatorParser&&(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(e){return this.columnParser?.endPosition==null||e<=this.columnParser.endPosition+1}isOperatorPosition(e){return this.operatorParser?.endPosition==null||e<=this.operatorParser.endPosition+1}isBeyondEndPosition(e){return this.isComplete()&&this.endPosition!=null&&e>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(e,t){return this.endPosition=t?e:e-1,e}getColumnAutocompleteListParams(e){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(e))}getColumnSearchString(e){let t=this.columnParser?.getDisplayValue()??"",n=AL(t,e,this.columnParser?.endPosition==null?this.params.expression.length:this.columnParser.endPosition+1),i=this.columnParser?.hasStartChar&&n.length>0,r=this.columnParser?.hasEndChar&&n.length===t.length+2;return i?n.slice(1,r?-1:void 0):n}getOperatorAutocompleteListParams(e){let t=this.columnParser?.column;if(!t)return{enabled:!1};let n=this.columnParser.baseCellDataType,i=this.operatorParser?.startPosition!=null&&e<this.operatorParser.startPosition?"":AL(this.operatorParser?.getDisplayValue()??"",e,this.operatorParser?.endPosition==null?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getOperatorAutocompleteEntries(t,n),`operator-${n}`,i)}getBaseCellDataTypeFromOperatorAutocompleteType(e){return e?.replace("operator-","")}hasOperand(e,t){return!e||!t||(this.params.advFilterExpSvc.getExpressionOperator(e,t)?.numOperands??0)>0}doesOperandNeedQuotes(e){return e!=="number"}addToListAndGetIndex(e,t){let n=e.length;return e.push(t),n}};function xA(e,t,n){let i=!1,r=e.toLocaleLowerCase(),o=r+" ",s=Object.keys(t).find(a=>{let l=t[a],c=n(l).toLocaleLowerCase();return c.startsWith(o)&&(i=!0),c===r});return s||(i?null:void 0)}function KL(e,t){return(t??Object.keys(e)).map(i=>({key:i,displayValue:e[i].displayValue}))}var gK=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return KL(this.operators,e)}findOperator(e){return xA(e,this.operators,({displayValue:t})=>t)}initOperators(){let{translate:e}=this.params;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!1,(o,s)=>o.includes(s)),numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!0,(o,s)=>!o.includes(s)),numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!1,(o,s)=>o===s),numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!0,(o,s)=>o!=s),numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!1,(o,s)=>o.startsWith(s)),numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:(t,n,i,r)=>this.evaluateExpression(t,n,i,r,!1,(o,s)=>o.endsWith(s)),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:t=>t==null||typeof t=="string"&&t.trim().length===0,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:t=>t!=null&&(typeof t!="string"||t.trim().length>0),numOperands:0}}}evaluateExpression(e,t,n,i,r,o){return e==null?r:n.caseSensitive?o(n.valueConverter(e,t),i):o(n.valueConverter(e,t).toLocaleLowerCase(),i.toLocaleLowerCase())}},Ly=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return KL(this.operators,e)}findOperator(e){return xA(e,this.operators,({displayValue:t})=>t)}initOperators(){let{translate:e,equals:t}=this.params;this.operators={equals:{displayValue:e("advancedFilterEquals"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInEquals,t),numOperands:1},notEqual:{displayValue:e("advancedFilterNotEqual"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInEquals,(s,a)=>!t(s,a)),numOperands:1},greaterThan:{displayValue:e("advancedFilterGreaterThan"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInGreaterThan,(s,a)=>s>a),numOperands:1},greaterThanOrEqual:{displayValue:e("advancedFilterGreaterThanOrEqual"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInGreaterThan,(s,a)=>s>=a),numOperands:1},lessThan:{displayValue:e("advancedFilterLessThan"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInLessThan,(s,a)=>s<a),numOperands:1},lessThanOrEqual:{displayValue:e("advancedFilterLessThanOrEqual"),evaluator:(n,i,r,o)=>this.evaluateSingleOperandExpression(n,i,r,o,!!r.includeBlanksInLessThan,(s,a)=>s<=a),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:n=>n==null,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:n=>n!=null,numOperands:0}}}evaluateSingleOperandExpression(e,t,n,i,r,o){return e==null?r:o(n.valueConverter(e,t),i)}},GMe=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return KL(this.operators,e)}findOperator(e){return xA(e,this.operators,({displayValue:t})=>t)}initOperators(){let{translate:e}=this.params;this.operators={true:{displayValue:e("advancedFilterTrue"),evaluator:t=>!!t,numOperands:0},false:{displayValue:e("advancedFilterFalse"),evaluator:t=>t===!1,numOperands:0},blank:{displayValue:e("advancedFilterBlank"),evaluator:t=>t==null,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:t=>t!=null,numOperands:0}}}},HMe=class extends K{constructor(){super(...arguments),this.beanName="advFilterExpSvc",this.filterOperandGetters={number:e=>Xr(e.filter)??"",date:e=>{let t=this.colModel.getColDefCol(e.colId);return t?this.valueSvc.formatValue(t,null,Br(e.filter)):null},dateTime:e=>this.filterOperandGetters.date(e),dateString:e=>{let t=this.colModel.getColDefCol(e.colId);if(!t)return null;let{filter:n}=e,r=this.dataTypeSvc?.getDateFormatterFunction(t)?.(Br(n)??void 0)??n;return this.valueSvc.formatValue(t,null,r)},dateTimeString:e=>this.filterOperandGetters.dateString(e),boolean:()=>null,object:()=>null,text:()=>null},this.operandModelValueGetters={number:e=>_e(e)?Number(e):null,date:(e,t,n)=>as(this.valueSvc.parseValue(t,null,e,void 0),!!this.dataTypeSvc?.getDateIncludesTimeFlag(n)),dateTime:(...e)=>this.operandModelValueGetters.date(...e),dateString:(e,t,n)=>{let i=this.valueSvc.parseValue(t,null,e,void 0);return this.dataTypeSvc?as(this.dataTypeSvc.getDateParserFunction(t)(i)??null,this.dataTypeSvc.getDateIncludesTimeFlag(n)):i},dateTimeString:(...e)=>this.operandModelValueGetters.dateString(...e),boolean:e=>e,object:e=>e,text:e=>e},this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.colNames=e.colNames,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(e){let{type:t}=e;return this.expressionJoinOperators[t]??t}getColumnDisplayValue(e){let{colId:t}=e,i=this.getColumnAutocompleteEntries().find(({key:o})=>o===t),r;return i?(r=i.displayValue,this.columnNameToIdMap[r.toLocaleUpperCase()]={colId:t,columnName:r}):r=t,r}getOperatorDisplayValue(e){return this.getExpressionOperator(e.filterType,e.type)?.displayValue??e.type}getOperandModelValue(e,t,n){return this.operandModelValueGetters[t](e,n,t)}getOperandDisplayValue(e,t){let{filter:n}=e;if(n==null)return"";let i=this.filterOperandGetters[e.filterType](e);return e.filterType!=="number"&&(i??(i=Xr(n)??""),t||(i=`"${i}"`)),t?i:` ${i}`}parseColumnFilterModel(e){let t=this.getColumnDisplayValue(e)??"",n=this.getOperatorDisplayValue(e)??"",i=this.getOperandDisplayValue(e);return`[${t}] ${n}${i}`}updateAutocompleteCache(e,t){if(t==="column"){let{key:n,displayValue:i}=e;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:n,columnName:i}}}translate(e,t){let n=kMe[e];return typeof n=="function"&&(n=n(t)),this.getLocaleTextFunc()(e,n,t)}generateAutocompleteListParams(e,t,n){return{enabled:!0,type:t,searchString:n,entries:e}}getColumnAutocompleteEntries(){if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;let e=this.colModel.getColDefCols()??[],t=[],n=this.gos.get("includeHiddenColumnsInAdvancedFilter");for(let i of e)i.getColDef().filter&&(n||i.isVisible()||i.isRowGroupActive())&&t.push({key:i.getColId(),displayValue:this.colNames.getDisplayNameForColumn(i,"advancedFilter")});return t.sort((i,r)=>{let o=i.displayValue??"",s=r.displayValue??"";return o<s?-1:s>o?1:0}),t}getOperatorAutocompleteEntries(e,t){let n=this.getActiveOperators(e);return this.getDataTypeExpressionOperator(t).getEntries(n)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map(([e,t])=>({key:e,displayValue:t}))}getDefaultAutocompleteListParams(e){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",e)}getDataTypeExpressionOperator(e){return this.expressionOperators[e]}getExpressionOperator(e,t){return this.getDataTypeExpressionOperator(e)?.operators?.[t]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(e){let t=e.toLocaleUpperCase(),n=this.columnNameToIdMap[t];if(n)return n;let r=this.getColumnAutocompleteEntries().find(({displayValue:o})=>o.toLocaleUpperCase()===t);if(r){let{key:o,displayValue:s}=r,a={colId:o,columnName:s};return this.columnNameToIdMap[t]=a,a}return null}getExpressionEvaluatorParams(e){let t=this.expressionEvaluatorParams[e];if(t)return t;let n=this.colModel.getColDefCol(e);if(!n)return{valueConverter:o=>o};switch(this.dataTypeSvc?.getBaseDataType(n)){case"dateTimeString":case"dateString":t={valueConverter:this.dataTypeSvc?.getDateParserFunction(n)??(o=>o)};break;case"object":n.getColDef().filterValueGetter?t={valueConverter:o=>o}:t={valueConverter:(o,s)=>this.valueSvc.formatValue(n,s,o)??(typeof o.toString=="function"?o.toString():"")};break;case"text":case void 0:t={valueConverter:o=>Xr(o)};break;default:t={valueConverter:o=>o};break}let{filterParams:r}=n.getColDef();return r&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(o=>{let s=r[o];s&&(t[o]=s)}),this.expressionEvaluatorParams[e]=t,t}getColumnDetails(e){let t=this.colModel.getColDefCol(e)??void 0,n=(t?this.dataTypeSvc?.getBaseDataType(t):void 0)??"text";return{column:t,baseCellDataType:n}}generateExpressionOperators(){let e=(n,i)=>this.translate(n,i),t={translate:e,equals:(n,i)=>n.getTime()===i.getTime()};return{text:new gK({translate:e}),boolean:new GMe({translate:e}),object:new gK({translate:e}),number:new Ly({translate:e,equals:(n,i)=>n===i}),date:new Ly(t),dateString:new Ly(t),dateTime:new Ly(t),dateTimeString:new Ly(t)}}getColumnValue({displayValue:e}){return`${FL}${e}${ML}`}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(e){let t=e.getColDef().filterParams?.filterOptions;return t&&t.every(i=>typeof i=="string")?t:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}},GY={stopPropagationCallbacks:ap,focusNextContainer:(e,t)=>za(e,t),configureFocusableContainer:(e,t)=>{let n=e.ctrlsSvc.get("gridCtrl");n.addFocusableContainer(t),t.addDestroyFunc(()=>n.removeFocusableContainer(t))}},EA=class extends NY{constructor(e){super(e,GY)}},zMe=".ag-autocomplete{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}}.ag-autocomplete-list-popup{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-autocomplete-list{height:calc(var(--ag-row-height)*6.5);min-width:200px;position:relative;width:100%}.ag-autocomplete-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:focus-visible:after{content:none}&:hover{background-color:var(--ag-row-hover-color)}}.ag-autocomplete-row{align-items:center;display:flex;flex:1 1 auto;overflow:hidden}.ag-autocomplete-row-label{margin:0 var(--ag-widget-container-horizontal-padding);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-autocomplete-row-selected{background-color:var(--ag-selected-row-background-color)}",B0=class extends aMe{constructor(e){super(ap,e)}},jMe={tag:"div",cls:"ag-autocomplete-row",role:"presentation",children:[{tag:"div",cls:"ag-autocomplete-row-label"}]},UMe=class extends pe{constructor(){super(jMe),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.toggleCss("ag-autocomplete-row-selected",e)}setSearchString(e){let t=!1,{value:n}=this;if(n&&_e(e)){let i=n.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){t=!0,this.hasHighlighting=!0;let r=i+e.length,o=this.getGui().lastElementChild;at(o),o.append(n.slice(0,i),bt({tag:"b",children:n.slice(i,r)}),n.slice(r))}}!t&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){this.getGui().lastElementChild.textContent=this.value??"\xA0"}},WMe={tag:"div",cls:"ag-autocomplete-list-popup",children:[{tag:"div",ref:"eList",cls:"ag-autocomplete-list"}]},$Me=class extends by{constructor(e){super(WMe),this.params=e,this.eList=q,this.searchString=""}postConstruct(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new B0({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:t=>this.autocompleteEntries[t]});let e=this.virtualList.getGui();this.addManagedListeners(e,{click:()=>this.params.onConfirmed(),mousemove:this.onMouseMove.bind(this),mousedown:t=>t.preventDefault()}),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();let n=this.autocompleteEntries.indexOf(this.selectedValue),i=t===$.UP?n-1:n+1;this.checkSetSelectedValue(i)}setSearch(e){this.searchString=e,_e(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let n,i=!1,r=e.toLocaleLowerCase(),o=t.filter(s=>{let l=s.toLocaleLowerCase().indexOf(r),c=l===0,d=l>=0;return d&&(!n||!i&&c||i===c&&s.length<n.length)&&(n=s,i=c),d});return!n&&o.length&&(n=o[0]),{topMatch:n,allMatches:o}}runSearch(){let{autocompleteEntries:e,useFuzzySearch:t,forceLastSelection:n}=this.params,i=e.map(l=>l.displayValue??l.key),r,o;if(t)r=pg({inputValue:this.searchString,allSuggestions:i,hideIrrelevant:!0}).values,o=r.length?r[0]:void 0;else{let l=this.runContainsSearch(this.searchString,i);r=l.allMatches,o=l.topMatch}let s=e.filter(({key:l,displayValue:c})=>r.includes(c??l));if(!s.length&&this.selectedValue&&n?.(this.selectedValue,this.searchString)&&(s=[this.selectedValue]),this.autocompleteEntries=s,this.virtualList.refresh(),!o)return;let a=r.indexOf(o);this.checkSetSelectedValue(a)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){let t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((n,i)=>{n.updateSelected(e===i)}))}createRowComponent(e){let t=new UMe;return this.createBean(t),t.setState(e.displayValue??e.key,e===this.selectedValue),t}onMouseMove(e){let t=this.virtualList,n=t.getGui().getBoundingClientRect(),i=t.getScrollTop(),r=e.clientY-n.top+i,o=Math.floor(r/t.getRowHeight());this.checkSetSelectedValue(o)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){return this.autocompleteEntries.length?this.selectedValue??null:null}},qMe={tag:"div",cls:"ag-autocomplete",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eAutocompleteInput"}]},KMe=class extends pe{constructor(){super(qMe,[Jr]),this.eAutocompleteInput=q,this.isListOpen=!1,this.lastPosition=0,this.valid=!0,this.registerCSS(zMe)}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){let t=hi(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchLocalEvent({type:"eventValueChanged",value:e}),this.validate(e)}updateAutocompleteList(e){let t=this.listGenerator?.(e,this.lastPosition)??{enabled:!1};(!t.type||t.type!==this.autocompleteListParams?.type)&&this.isListOpen&&this.closeList();let n=this.isListOpen;if(this.autocompleteListParams=t,t?.enabled){n||this.openList();let{searchString:i}=t;this.autocompleteList.setSearch(i??"")}else n&&this.closeList()}onKeyDown(e){let t=e.key;switch(this.updateLastPosition(),t){case $.ENTER:this.onEnterKeyDown(e);break;case $.TAB:this.onTabKeyDown(e);break;case $.DOWN:case $.UP:this.onUpDownKeyDown(e,t);break;case $.LEFT:case $.RIGHT:case $.PAGE_HOME:case $.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case $.ESCAPE:this.onEscapeKeyDown(e);break;case $.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){let e=this.autocompleteList?.getSelectedValue();e&&(this.closeList(),this.dispatchLocalEvent({type:"eventOptionSelected",value:this.getValue(),position:this.lastPosition,updateEntry:e,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){e.preventDefault(),this.isListOpen?this.autocompleteList?.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){this.updateLastPosition(),this.updateAutocompleteList(this.eAutocompleteInput.getValue()??null)}setCaret(e,t){(t||Ts(this.beans))&&this.eAutocompleteInput.getFocusableElement().focus();let n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(e,e),e===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){this.lastPosition=this.eAutocompleteInput.getInputElement().selectionStart??0}validate(e){if(!this.validator)return;let t=this.validationMessage=this.validator(e);this.eAutocompleteInput.getInputElement().setCustomValidity(t??""),this.valid=!t,this.dispatchLocalEvent({type:"eventValidChanged",isValid:this.valid,validationMessage:t})}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new $Me({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));let e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},n=this.popupSvc.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupSvc.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=n.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchLocalEvent({type:"eventValueConfirmed",value:this.getValue(),isValid:this.isValid()})}getValue(){return hi(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){let{value:t,position:n,silent:i,updateListOnlyIfOpen:r,restoreFocus:o}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(n??this.lastPosition,o),i||this.updateValue(t),(!r||this.isListOpen)&&this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}},YMe={selector:"AG-AUTOCOMPLETE",component:KMe},aL={buttons:["apply"],suppressBuilderButton:!1},mK={apply:"advancedFilterApply",clear:"advancedFilterClear",cancel:"advancedFilterCancel",reset:"advancedFilterReset"},ZMe={tag:"div",cls:"ag-advanced-filter",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"ag-autocomplete",ref:"eAutocomplete"},{tag:"ag-filter-button",ref:"eButtons",cls:"ag-advanced-filter-buttons"},{tag:"button",ref:"eBuilderFilterButton",cls:"ag-button ag-advanced-filter-builder-button",children:[{tag:"span",ref:"eBuilderFilterButtonIcon",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eBuilderFilterButtonLabel",cls:"ag-advanced-filter-builder-button-label"}]}]},HY=class extends pe{constructor(){super(ZMe,[YMe,k$]),this.eAutocomplete=q,this.eButtons=q,this.eBuilderFilterButton=q,this.eBuilderFilterButtonIcon=q,this.eBuilderFilterButtonLabel=q,this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.advancedFilter=e.advancedFilter,this.filterManager=e.filterManager,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipShowDelayOverride:()=>1e3,getLocation:()=>"advancedFilter"})),this.eAutocomplete.setListGenerator((n,i)=>this.generateAutocompleteListParams(i)).setValidator(()=>this.validateValue()).setForceLastSelection((n,i)=>this.forceLastSelection(n,i)).setInputAriaLabel(this.advFilterExpSvc.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advFilterExpSvc.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListeners(this.eAutocomplete,{eventValueChanged:({value:n})=>this.onValueChanged(n),eventValueConfirmed:({isValid:n})=>this.onValueConfirmed(n),eventOptionSelected:({position:n,updateEntry:i,autocompleteType:r})=>this.onOptionSelected(n,i,r),eventValidChanged:({isValid:n,validationMessage:i})=>this.onValidChanged(n,i)});let{buttons:e,suppressBuilderButton:t}=T(T({},aL),this.gos.get("advancedFilterParams"));this.setupButtons(e),this.setupBuilderButton(t),this.beans.gos.addManagedPropertyListener("advancedFilterParams",n=>{let i=T(T({},aL),n.currentValue),r=T(T({},aL),n.previousValue);if(i.buttons!==r.buttons){let o=i.buttons.map(s=>({type:s,label:this.advFilterExpSvc.translate(mK[s])}));this.eButtons.updateButtons(o)}i.suppressBuilderButton!==r.suppressBuilderButton&&Ie(this.eBuilderFilterButton,!i.suppressBuilderButton)})}refresh(){let e=this.advancedFilter.getExpressionDisplayValue();this.eAutocomplete.setValue({value:e??"",position:e?.length,updateListOnlyIfOpen:!0})}setInputDisabled(e){this.eAutocomplete.setInputDisabled(e),this.eButtons.updateValidity(!e&&!this.isApplyDisabled&&!this.advancedFilter.isCurrentExpressionApplied())}setupButtons(e){let t=e.map(i=>({type:i,label:this.advFilterExpSvc.translate(mK[i])})),n=i=>()=>{this.updateModel(i)};this.eButtons.addManagedListeners(this.eButtons,{apply:n("apply"),clear:n("clear"),reset:n("reset"),cancel:n("cancel")}),this.eButtons.updateButtons(t)}updateModel(e){switch(e){case"apply":this.onValueConfirmed(this.eAutocomplete.isValid());break;case"reset":this.advancedFilter.setModel(null),this.filterManager?.onFilterChanged({source:"advancedFilter"});break;case"cancel":this.advancedFilter.setModel(this.advancedFilter.getModel()),this.filterManager?.onFilterChanged({source:"advancedFilter"});break;case"clear":this.eAutocomplete.setValue({value:"",restoreFocus:!0});break}}setupBuilderButton(e){this.eBuilderFilterButtonIcon.appendChild($e("advancedFilterBuilder",this.beans)),this.eBuilderFilterButtonLabel.textContent=this.advFilterExpSvc.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedElementListeners(this.eBuilderFilterButton,{click:()=>this.openBuilder()}),this.addManagedListeners(this.advancedFilter.getCtrl(),{advancedFilterBuilderClosed:()=>this.closeBuilder()}),Ie(this.eBuilderFilterButton,!e)}onValueChanged(e){e=hi(e),this.advancedFilter.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilter.createExpressionParser(e);let t=this.expressionParser?.parseExpression();t&&t!==e&&this.eAutocomplete.setValue({value:t,silent:!0,restoreFocus:!0})}onValueConfirmed(e){!e||this.isApplyDisabled||(this.eButtons?.updateValidity(!1),this.advancedFilter.applyExpression(),this.filterManager?.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(e,t,n){let{updatedValue:i,updatedPosition:r,hideAutocomplete:o}=this.updateExpression(e,t,n);this.eAutocomplete.setValue({value:i,position:r,updateListOnlyIfOpen:o,restoreFocus:!0})}validateValue(){return this.expressionParser?.isValid()?null:this.expressionParser?.getValidationMessage()??null}onValidChanged(e,t){this.isApplyDisabled=!e||this.advancedFilter.isCurrentExpressionApplied(),this.eButtons.updateValidity(!this.isApplyDisabled),this.tooltipFeature?.setTooltipAndRefresh(t)}generateAutocompleteListParams(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advFilterExpSvc.getDefaultAutocompleteListParams("")}updateExpression(e,t,n){return this.advFilterExpSvc.updateAutocompleteCache(t,n),this.expressionParser?.updateExpression(e,t,n)??this.advancedFilter.getDefaultExpression(t)}forceLastSelection({key:e,displayValue:t},n){return!!n.toLocaleLowerCase().match(`^${(t??e).toLocaleLowerCase()}\\s*$`)}openBuilder(){this.builderOpen||(this.builderOpen=!0,ep(this.eBuilderFilterButton,!0),this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui",eventSource:this.eBuilderFilterButton}))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,ep(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}},XMe={tag:"div",cls:"ag-advanced-filter-header",role:"row"},QMe=class extends pe{constructor(e){super(XMe),this.enabled=e}wireBeans(e){this.colModel=e.colModel,this.focusSvc=e.focusSvc,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(()=>this.destroyBean(this.eAdvancedFilter));let e=()=>{this.enabled&&this.setEnabledHeight()};this.addManagedEventListeners({gridColumnsChanged:()=>this.onGridColumnsChanged(),columnHeaderHeightChanged:e,stylesChanged:e}),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addGuiEventListener("keydown",t=>this.onKeyDown(t)),this.addGuiEventListener("focusout",t=>{this.getFocusableElement().contains(t.relatedTarget)||this.focusSvc.clearAdvancedFilterColumn()})}getFocusableElement(){return this.eAdvancedFilter?.getGui()??this.getGui()}setEnabled(e){e!==this.enabled&&this.setupAdvancedFilter(e)}refresh(){this.eAdvancedFilter?.refresh()}getHeight(){return this.height}setInputDisabled(e){this.eAdvancedFilter?.setInputDisabled(e)}setupAdvancedFilter(e){let t=this.getGui();if(e){this.eAdvancedFilter=this.createBean(new HY);let n=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCss("ag-advanced-filter-header-cell"),this.setEnabledHeight(),this.setAriaRowIndex(),Jn(n,"gridcell"),l_(n,1),this.setAriaColumnCount(n),t.appendChild(n)}else at(t),this.destroyBean(this.eAdvancedFilter),this.height=0;Ie(t,e),this.enabled=e}setEnabledHeight(){let e=this.getGui();this.height=P_(this.beans);let t=`${this.height}px`;e.style.height=t,e.style.minHeight=t}setAriaColumnCount(e){Fk(e,this.colModel.getCols().length)}setAriaRowIndex(){r0(this.getGui(),this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)}onGridColumnsChanged(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())}onKeyDown(e){switch(e.key){case $.ENTER:{this.hasFocus()&&qn(this.getFocusableElement())&&e.preventDefault();break}case $.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case $.UP:this.navigateUpDown(!0,e);break;case $.DOWN:this.navigateUpDown(!1,e);break;case $.TAB:if(this.hasFocus())this.navigateLeftRight(e);else{let t=Wi(this.beans,this.getFocusableElement(),null,e.shiftKey);t?(e.preventDefault(),t.focus()):this.navigateLeftRight(e)}break}}navigateUpDown(e,t){this.hasFocus()&&this.focusSvc.focusNextFromAdvancedFilter(e)&&t.preventDefault()}navigateLeftRight(e){(e.shiftKey?this.focusSvc.focusLastHeader():this.focusSvc.focusNextFromAdvancedFilter(!1,!0))&&e.preventDefault()}hasFocus(){return wt(this.beans)===this.getFocusableElement()}},zY=class extends cMe{},JMe=class extends K{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new zY(this.comp,this.virtualList,{dragSourceType:vo.AdvancedFilterBuilder,addListeners:(e,t,n)=>{e.addManagedListeners(this,{advancedFilterBuilderDragStarted:t,advancedFilterBuilderDragEnded:n})},getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:()=>!1,getNumRows:e=>e.getNumItems(),moveItem:(e,t)=>this.moveItem(e,t)}))}getCurrentDragValue(e){return e.item}moveItem(e,t){this.comp.moveItem(e,t)}},eIe={tag:"div",cls:"ag-pill",role:"option",children:[{tag:"span",ref:"eText",cls:"ag-pill-text"},{tag:"span",ref:"eButton",cls:"ag-button ag-pill-button",role:"presentation"}]},tIe=class extends pe{constructor(e){super(eIe),this.config=e,this.eText=q,this.eButton=q}postConstruct(){let{config:e,eButton:t}=this,{onKeyDown:n,onButtonClick:i}=e;this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),this.addGuiEventListener("focus",()=>{this.eButton.focus()}),n&&this.addGuiEventListener("keydown",n),i&&this.addManagedElementListeners(t,{click:i})}toggleCloseButtonClass(e,t){this.eButton.classList.toggle(e,t)}setText(e){this.eText.textContent=e}getText(){return this.eText.textContent}},nIe={tag:"div",cls:"ag-pill-container"},iIe=class extends pe{constructor(){super(nIe),this.pills=[]}init(e){this.params=e,this.getKey=e.valueFormatter??(t=>String(t)),this.refresh()}refresh(){this.clearPills();let{params:e,onPillKeyDown:t,getKey:n}=this,i=e.getValue();if(!Array.isArray(i)){if(i==null)return;i=[i]}let r=e.valueFormatter??(s=>String(s)),o=i.length;Jn(this.getGui(),o===0?"presentation":"listbox");for(let s=0;s<o;s++){let a=i[s],l=this.createBean(new tIe({onButtonClick:()=>this.onPillButtonClick(l),onKeyDown:t.bind(this)})),c=l.getGui();mg(c,s+1),gg(c,o),e.onPillMouseDown&&l.addGuiEventListener("mousedown",e.onPillMouseDown),e.announceItemFocus&&l.addGuiEventListener("focus",e.announceItemFocus),l.setText(r(a)??""),l.toggleCloseButtonClass("ag-icon-cancel",!0),this.appendChild(c),this.pills.push({key:n(a)??s.toString(),pill:l})}}onNavigationKeyDown(e){let{key:t}=e;if(!this.pills.length||t!==$.LEFT&&t!==$.RIGHT)return;e.preventDefault();let{params:n,beans:i}=this,r=wt(i),o=this.getGui();if(o.contains(r)){let s=Wi(i,o,!1,t===$.LEFT);s?s.focus():n.eWrapper&&n.eWrapper.focus()}else{let s=Rs(o);s.length>0&&s[t===$.RIGHT?0:s.length-1].focus()}}clearPills(){let e=this.getGui();e.contains(wt(this.beans))&&this.params.eWrapper&&this.params.eWrapper.focus(),at(e),this.destroyBeans(this.pills.map(({pill:t})=>t)),this.pills=[]}onPillButtonClick(e){this.deletePill(e)}onPillKeyDown(e){let t=e.key;if(t!==$.DELETE&&t!==$.BACKSPACE)return;e.preventDefault();let n=vi(this.beans),i=this.pills.findIndex(({pill:o})=>o.getGui().contains(n.activeElement));if(i===-1)return;let r=this.pills[i];r?.pill&&this.deletePill(r.pill,i)}deletePill(e,t){let{getKey:n,pills:i,params:r}=this,o=(i[t??-1]??i.find(({pill:a})=>a===e))?.key,s=(r.getValue()||[]).filter(a=>n(a)!==o);if(r.setValue(s),!s.length&&r.eWrapper)r.eWrapper.focus();else if(t!=null){let{pill:a}=i[Math.min(t,i.length-1)];a&&a.getFocusableElement().focus()}}destroy(){this.clearPills(),super.destroy()}},rIe=".ag-rich-select{cursor:default;height:100%}.ag-rich-select-value{align-items:center;background-color:var(--ag-picker-button-background-color);display:flex;height:100%;padding:var(--ag-spacing);:where(.ag-picker-field-display){overflow:hidden;text-overflow:ellipsis;&:where(.ag-display-as-placeholder){opacity:.5}}}.ag-virtual-list-viewport.ag-rich-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-input-border-radius);box-shadow:var(--ag-dropdown-shadow);height:auto;position:relative;width:100%;:where(.ag-rich-select-loading){display:flex;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}}.ag-rich-select-row{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;padding:0 var(--ag-spacing);white-space:nowrap}.ag-rich-select-row-selected{background-color:var(--ag-selected-row-background-color)}.ag-rich-select-row-highlighted,.ag-rich-select-row:hover{background-image:linear-gradient(var(--ag-row-hover-color),var(--ag-row-hover-color))}.ag-rich-select-row-text-highlight{font-weight:700}.ag-rich-select-field-input{flex:1 1 auto;:where(.ag-input-field-input){border:none!important;box-shadow:none!important;padding:0!important;text-overflow:ellipsis;&::-moz-placeholder{opacity:.8}&::placeholder{opacity:.8}}}:where(.ag-ltr) .ag-rich-select-field-input{left:var(--ag-spacing)}:where(.ag-rtl) .ag-rich-select-field-input{right:var(--ag-spacing)}:where(.ag-popup-editor) .ag-rich-select-value{height:var(--ag-row-height);min-width:200px}.ag-rich-select-virtual-list-item{cursor:default;height:var(--ag-list-item-height)}.ag-pill-container{display:flex;flex-wrap:nowrap;gap:.25rem}.ag-pill{align-items:center;background:var(--ag-select-cell-background-color);border:var(--ag-select-cell-border);border-radius:var(--ag-border-radius);display:flex;padding:0 .25rem;white-space:nowrap}.ag-pill-button{border:none;padding:0;&:hover{color:var(--ag-accent-color);cursor:pointer}}:where(.ag-ltr) .ag-pill-button{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-pill-button{margin-right:var(--ag-spacing)}",oIe={tag:"div",cls:"ag-rich-select-row",role:"presentation"},sIe=class extends pe{constructor(e){super(oIe),this.params=e}wireBeans(e){this.userCompFactory=e.userCompFactory,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("highlightTooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>this.shouldDisplayTooltip?.()??!0},this))}setState(e){let{params:t}=this,n=t.valueFormatter?.(e)??"";this.populateWithRenderer(e,n)||this.populateWithoutRenderer(e,n),this.value=e}highlightString(e){let{parsedValue:t,params:n}=this;if(n.cellRenderer||!_e(t))return;let i=_e(e);if(i){let r=t?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(r>=0){let o=r+e.length,s=this.getGui().querySelector("span");s&&(at(s),s.append(t.slice(0,r),bt({tag:"span",cls:"ag-rich-select-row-text-highlight",children:t.slice(r,o)}),t.slice(o)))}else i=!1}i||this.renderValueWithoutRenderer(t)}updateSelected(e){let t=this.getGui();p0(t.parentElement,e),this.toggleCss("ag-rich-select-row-selected",e)}getValue(){return this.value}toggleHighlighted(e){this.toggleCss("ag-rich-select-row-highlighted",e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}populateWithoutRenderer(e,t){let n=this.getGui(),i=bt({tag:"span"});i.style.overflow="hidden",i.style.textOverflow="ellipsis";let r=ca(_e(t)?t:e);this.parsedValue=_e(r)?r:null,n.appendChild(i),this.renderValueWithoutRenderer(r),this.shouldDisplayTooltip=Iu(()=>i),this.tooltipFeature?.setTooltipAndRefresh(this.parsedValue)}renderValueWithoutRenderer(e){let t=this.getGui().querySelector("span");t&&(t.textContent=_e(e)?e:"\xA0")}populateWithRenderer(e,t){let n,i,{cellRenderer:r,cellRendererParams:o}=this.params;if(r){let s=this.getParentComponent()?.getParentComponent();i=D_(this.userCompFactory,this.params,Oe(this.gos,{value:e,valueFormatted:t,cellRendererParams:o,getValue:()=>s?.getValue(),setValue:a=>{s?.setValue(a,!0)},setTooltip:(a,l)=>{this.gos.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=l,this.tooltipFeature?.setTooltipAndRefresh(a)}}))}return i&&(n=i.newAgStackInstance()),n&&jY(n,this.getGui()),n?(n.then(s=>{this.addDestroyFunc(()=>{this.destroyBean(s)})}),!0):!1}},vK="ag-rich-select-list",CK="ag-rich-select-row",bK=0,aIe=1,IL=2,TL=3,lIe=class extends B0{constructor(e,t,n){super({cssIdentifier:"rich-select"}),this.params=e,this.richSelectWrapper=t,this.getSearchString=n,this.lastRowHovered=-1,this.selectedItems=new Set,this.loadingState=TL,this.params=e,this.setComponentCreator(this.createRowComponent.bind(this)),this.setComponentUpdater(()=>{})}postConstruct(){super.postConstruct();let e=this.getLocaleTextFunc();this.loadingLabel=e("loadingOoo","Loading..."),this.noMatchesLabel=e("noMatches","No matches to show"),this.eLoadingIcon=$e("richSelectLoading",this.beans,null),this.eStateCompLabel=bt({tag:"span",cls:"ag-loading-text",children:this.loadingLabel}),this.eStateComp=bt({tag:"div",cls:"ag-rich-select-loading",children:[{tag:"span",cls:"ag-loading-icon",children:[this.eLoadingIcon?()=>this.eLoadingIcon:void 0]},{tag:"span",cls:"ag-loading-text",children:[()=>this.eStateCompLabel]}]}),this.appendChild(this.eStateComp);let{cellRowHeight:t,pickerAriaLabelKey:n,pickerAriaLabelValue:i}=this.params;t&&this.setRowHeight(t);let r=this.getGui(),o=this.getAriaElement();this.addManagedListeners(r,{mousemove:this.onMouseMove.bind(this),mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),click:this.onClick.bind(this)}),r.classList.add(vK);let s=`${vK}-${this.getCompId()}`;o.setAttribute("id",s);let l=this.getLocaleTextFunc()(n,i);Ut(o,l),ay(this.richSelectWrapper,o)}setIsLoading(){this.setLoadingState(bK)}setLoadingState(e){this.loadingState=e,this.toggleStateComp(),this.toggleVisibility()}toggleStateComp(){let{eStateComp:e,eStateCompLabel:t,eLoadingIcon:n,loadingState:i,loadingLabel:r,noMatchesLabel:o,params:s}=this;if(e){if(i===bK){t.textContent=r,n&&Ie(n,!0),Ie(e,!0);return}if(i===IL&&s.allowNoResultsCopy){t.textContent=o,n&&Ie(n,!1),Ie(e,!0);return}Ie(e,!1)}}shouldBeVisible(){return this.loadingState===IL?!!this.params.allowNoResultsCopy:this.loadingState!==TL}toggleVisibility(e){let t=this.getGui();e===void 0?Ie(t,this.shouldBeVisible()):Ie(t,e)}navigateToPage(e){let t=super.navigateToPage(e,this.lastRowHovered);return t!=null&&ks(this.beans,()=>{if(!this.isAlive())return null;this.highlightIndex(t)}),t}drawVirtualRows(e){super.drawVirtualRows(e),this.refreshSelectedItems()}highlightFilterMatch(e){this.forEachRenderedRow(t=>{t.highlightString(e)})}onNavigationKeyDown(e,t){ks(this.beans,()=>{if(!this.currentList||!this.isAlive())return;let n=this.currentList.length,i=this.lastRowHovered,r=e===$.DOWN?1:-1,o=Math.min(Math.max(i===-1?0:i+r,0),n-1);this.highlightIndex(o),t()})}selectValue(e){if(!this.currentList||e==null)return!1;let t=this.getIndicesForValues(e),n=t.length>0;return n&&(this.refresh(),this.ensureIndexVisible(t[0]),this.refresh(!0)),this.selectListItems(Array.isArray(e)?e:[e]),n}selectListItems(e,t=!1){t||this.selectedItems.clear();for(let n=0;n<e.length;n++){let i=e[n];this.findItemInSelected(i)===void 0&&this.selectedItems.add(i)}this.refreshSelectedItems()}getCurrentList(){return this.currentList}setCurrentList(e){let t=cIe(e);this.setLoadingState(t),e||(e=[]),this.currentList=e,this.setModel({getRowCount:()=>e.length,getRow:n=>e[n],areRowsEqual:(n,i)=>n===i})}getSelectedItems(){return this.selectedItems}getLastItemHovered(){return this.currentList?.[this.lastRowHovered]}highlightIndex(e,t){this.currentList&&(e<0||e>=this.currentList.length?this.lastRowHovered=-1:(this.lastRowHovered=e,this.ensureIndexVisible(e,!t)&&!t&&this.refresh(!0)),this.forEachRenderedRow((n,i)=>{let r=e===i;if(n.toggleHighlighted(r),r){let o=`${CK}-${n.getCompId()}`;s_(this.richSelectWrapper,o),this.richSelectWrapper.setAttribute("data-active-option",o)}}))}getIndicesForValues(e){let{currentList:t}=this;if(!t||t.length===0||e==null)return[];if(Array.isArray(e)||(e=[e]),e.length===0)return[];let{valueFormatter:n}=this.params,i=[],r=typeof e[0]=="object",o=t.map(n);for(let s of e){let a=-1;r?a=o.indexOf(n(s)):a=t.indexOf(s),a>=0&&i.push(a)}return i}toggleListItemSelection(e){let t=this.findItemInSelected(e);t!==void 0?this.selectedItems.delete(t):this.selectedItems.add(e),this.refreshSelectedItems(),this.dispatchValueSelected()}refreshSelectedItems(){this.forEachRenderedRow(e=>{let t=this.findItemInSelected(e.getValue())!==void 0;e.updateSelected(t)})}findItemInSelected(e){if(typeof e=="object"){let t=this.params.valueFormatter,n=t(e);for(let i of this.selectedItems)if(t(i)===n)return i}else return this.selectedItems.has(e)?e:void 0}createRowComponent(e,t){let n=new sIe(this.params);t.setAttribute("id",`${CK}-${n.getCompId()}`),n.setParentComponent(this),this.createBean(n),n.setState(e);let{highlightMatch:i,searchType:r="fuzzy"}=this.params;return i&&r!=="fuzzy"&&n.highlightString(this.getSearchString()),n}getRowForMouseEvent(e){if(!this.model)return-1;let n=this.getGui().getBoundingClientRect(),i=this.getScrollTop(),r=e.clientY-n.top+i;return Math.min(Math.floor(r/this.getRowHeight()),this.model.getRowCount()-1)}onMouseMove(e){let t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.highlightIndex(t,!0))}onMouseDown(e){e.preventDefault()}onMouseOut(e){this.getGui().contains(e.relatedTarget)||this.highlightIndex(-1)}onClick(e){let{multiSelect:t}=this.params;if(!this.currentList?.length)return;let n=this.getRowForMouseEvent(e),i=this.currentList[n];t?this.toggleListItemSelection(i):(this.selectListItems([i]),this.dispatchValueSelected())}dispatchValueSelected(){this.dispatchLocalEvent({type:"richSelectListRowSelected",fromEnterKey:!1,value:this.selectedItems})}destroy(){super.destroy(),this.eStateComp=void 0}};function cIe(e){return e?e.length?aIe:IL:TL}var dIe=300,uIe={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed",children:[{tag:"span",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"span",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},DA=class extends xy{constructor(e){super(ce(T({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"richSelectOpen",ariaRole:"combobox",template:e?.template??uIe,agComponents:[Jr],modalPicker:!1},e),{maxPickerHeight:e?.maxPickerHeight??"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.searchStringCreator=null,this.eInput=q,this.eDeselect=q,this.skipWrapperAnnouncement=!1;let{value:t,valueList:n,searchStringCreator:i,onSearch:r}=e||{};t!==void 0&&(this.value=t),i&&(this.searchStringCreator=i),n!=null&&this.setValueList({valueList:n,isInitial:!0});let{searchDebounceDelay:o=dIe}=this.config;r&&(this.onSearchCallbackDebounced=$n(this,r,o)),this.registerCSS(rIe)}wireBeans(e){this.userCompFactory=e.userCompFactory,this.ariaAnnounce=e.ariaAnnounce,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>this.shouldDisplayTooltip?.()??!0})),super.postConstruct(),this.createListComponent(),this.eDeselect.appendChild($e("richSelectRemove",this.beans));let{allowTyping:e,placeholder:t,suppressDeselectAll:n}=this.config;this.eDeselect.classList.add("ag-hidden"),e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.setupAriaProperties();let{searchDebounceDelay:i=300}=this.config;this.clearSearchString=$n(this,this.clearSearchString.bind(this),i),this.renderSelectedValue(),e&&this.eInput.onValueChange(r=>this.searchTextFromString(r)),this.addManagedElementListeners(this.eWrapper,{focus:this.onWrapperFocus.bind(this)}),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)}),n||this.addManagedElementListeners(this.eDeselect,{mousedown:this.onDeselectAllMouseDown.bind(this),click:this.onDeselectAllClick.bind(this)})}setupAriaProperties(){let{eWrapper:e,gos:t}=this;e.tabIndex=t.get("tabIndex");let n=this.getLocaleTextFunc();this.ariaDeleteSelection=n("ariaLabelRichSelectDeleteSelection","Press DELETE to deselect item"),this.ariaDeselectAllItems=n("ariaLabelRichSelectDeselectAllItems","Press DELETE to deselect all items"),this.ariaToggleSelection=n("ariaLabelRichSelectToggleSelection","Press SPACE to toggle selection")}createListComponent(){this.listComponent=this.createBean(new lIe(this.config,this.getFocusableElement(),()=>this.searchString)),this.listComponent.setParentComponent(this),this.addManagedListeners(this.listComponent,{richSelectListRowSelected:e=>{this.onListValueSelected(e.value,e.fromEnterKey)}})}renderSelectedValue(e){let{value:t,eDisplayField:n,config:i,gos:r}=this,{allowTyping:o,cellRenderer:s,cellRendererParams:a,initialInputValue:l,multiSelect:c,suppressDeselectAll:d,suppressMultiSelectPillRenderer:u,valueFormatter:h,onSearch:p}=i,f=wK(t,h);if(o){this.eInput.setValue(l??f,!!e&&!!p);return}if(c&&!d){let m=t==null||Array.isArray(t)&&t.length===0;this.eDeselect.classList.toggle("ag-hidden",m)}let g;if(c&&!u){this.createOrUpdatePillContainer(n);return}s&&(g=D_(this.userCompFactory,i,Oe(this.gos,{value:t,valueFormatted:f,cellRendererParams:a,getValue:()=>this.getValue(),setValue:m=>{this.setValue(m,!0)},setTooltip:(m,w)=>{r.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=w,this.tooltipFeature?.setTooltipAndRefresh(m)}})));let C;if(g&&(C=g.newAgStackInstance()),C)at(n),jY(C,n),C.then(m=>{this.addDestroyFunc(()=>this.destroyBean(m))});else{if(_e(this.value))n.innerText=f,n.classList.remove("ag-display-as-placeholder");else{let{placeholder:m}=i;_e(m)?(n.textContent=m,n.classList.add("ag-display-as-placeholder")):at(n)}this.shouldDisplayTooltip=Iu(()=>this.eDisplayField),this.tooltipFeature?.setTooltipAndRefresh(f??null)}}createPickerComponent(){let{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueListInternal(e){let{listComponent:t,isPickerDisplayed:n,value:i}=this,{valueList:r,refresh:o,isInitial:s}=e;s&&this.setValues(r),t&&(this.listComponent?.setCurrentList(r),o&&(this.values?t.refresh(!0):n&&(t.selectValue(i)||t.refresh()),this.alignPickerToComponent()))}setValueList(e){let{valueList:t}=e;if(!t||Array.isArray(t)){this.setValueListInternal(e);return}this.listComponent?.setIsLoading(),t.then(n=>{n&&this.setValueListInternal(ce(T({},e),{valueList:n}))})}setValues(e){this.values=e,this.searchStrings=this.getSearchStringsFromValues(e||[])}showPicker(){let{listComponent:e,value:t}=this;if(!e)return;super.showPicker();let n=t;t===void 0&&(n=null),e.selectValue(n);let i=e.getIndicesForValues(Array.isArray(n)?n:[n])[0];i!=null?(this.tooltipFeature?.attemptToHideTooltip(),e.highlightIndex(i)):e.refresh()}createOrUpdatePillContainer(e){if(!this.pillContainer){let t=this.pillContainer=this.createBean(new iIe);this.addDestroyFunc(()=>{this.destroyBean(this.pillContainer),this.pillContainer=null}),at(e),e.appendChild(t.getGui());let{config:n,eWrapper:i,ariaDeleteSelection:r}=this,{valueFormatter:o}=n;t.init({eWrapper:i,valueFormatter:o,onPillMouseDown:s=>{s.stopImmediatePropagation()},announceItemFocus:()=>{this.announceAriaValue(r)},getValue:()=>this.getValue(),setValue:s=>this.setValue(s,!0)})}this.doWhileBlockingAnnouncement(()=>this.pillContainer?.refresh())}doWhileBlockingAnnouncement(e){this.skipWrapperAnnouncement=!0,e(),this.skipWrapperAnnouncement=!1}onWrapperFocus(){let{eInput:e,config:t}=this,{allowTyping:n,multiSelect:i,suppressDeselectAll:r}=t;if(n){let o=e.getFocusableElement();o.focus(),o.select()}else i&&!r&&!this.skipWrapperAnnouncement&&this.announceAriaValue(this.ariaDeselectAllItems)}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}onDeselectAllMouseDown(e){e.stopImmediatePropagation()}onDeselectAllClick(){this.setValue([],!0)}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===$.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!A_(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){e==null&&(e=""),this.searchString=e,this.runSearch()}getSearchStringsFromValues(e){let{config:{valueFormatter:t}}=this;return typeof e[0]=="object"&&this.searchStringCreator?this.searchStringCreator(e):e.map(n=>wK(n,t))}filterListModel(e){let{filterList:t}=this.config;t&&this.setValueList({valueList:e,refresh:!0})}runSearch(){if(!this.listComponent)return;if(this.onSearchCallbackDebounced){this.onSearchCallbackDebounced(this.searchString);return}let e=this.searchStrings;if(!e){this.listComponent.highlightIndex(-1);return}let{suggestions:t,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,e),{filterList:i,highlightMatch:r,searchType:o="fuzzy"}=this.config,s=!!(i&&this.searchString!=="");this.filterListModel(s?n:this.values||[]),this.highlightEmptyValue()||this.highlightListValue(t,n,s),r&&o!=="fuzzy"&&this.listComponent?.highlightFilterMatch(this.searchString),this.listComponent?.toggleVisibility()}highlightEmptyValue(){if(this.searchString===""){let e=this.searchStrings?.indexOf("");if(e!==void 0&&e!==-1)return this.listComponent?.highlightIndex(e),!0}return!1}highlightListValue(e,t,n){if(e.length){let i=n?0:this.searchStrings?.indexOf(e[0]);i!==void 0&&this.listComponent?.highlightIndex(i)}else if(this.listComponent?.highlightIndex(-1),!n||t.length)this.listComponent?.ensureIndexVisible(0);else if(n){this.getAriaElement().removeAttribute("data-active-option");let i=this.listComponent?.getAriaElement();i&&s_(i,null)}}getSuggestionsAndFilteredValues(e,t){let n=[],i=[];if(!e.length)return{suggestions:n,filteredValues:i};let{searchType:r="fuzzy",filterList:o}=this.config,s=this.values||[];if(r==="fuzzy"){let a=pg({inputValue:e,allSuggestions:t,hideIrrelevant:!0});n=a.values;let l=a.indices;if(o&&l.length)for(let c=0;c<l.length;c++)i.push(s[l[c]])}else n=t.filter((a,l)=>{let c=a.toLocaleLowerCase(),d=this.searchString.toLocaleLowerCase(),u=r==="match"?c.startsWith(d):c.includes(d);return o&&u&&i.push(s[l]),u});return{suggestions:n,filteredValues:i}}clearSearchString(){this.searchString=""}setValue(e,t,n,i){if(this.value===e)return this;let r=Array.isArray(e);if(e!=null){if(!r){let o=this.listComponent?.getCurrentList();if((o?o.indexOf(e):-1)===-1)return this}n||this.listComponent?.selectValue(e)}return super.setValue(e,t),i||this.renderSelectedValue(n),this}onNavigationKeyDown(e,t,n){e.preventDefault();let i=t===$.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}this.listComponent?.onNavigationKeyDown(t,n)}onEnterKeyDown(e){if(this.isPickerDisplayed&&(e.preventDefault(),this.listComponent?.getCurrentList())){let t=this.listComponent.getLastItemHovered();this.config.multiSelect||t===void 0?this.dispatchPickerEventAndHidePicker(this.value,!0):this.onListValueSelected(new Set([t]),!0)}}onDeleteKeyDown(e){let{eWrapper:t,beans:n}=this;wt(n)===t&&(e.preventDefault(),this.setValue([],!0))}onTabKeyDown(){let{config:e,isPickerDisplayed:t,listComponent:n}=this,{multiSelect:i}=e;if(!(!t||!n)){if(i){let r=this.getValueFromSet(n.getSelectedItems());r&&this.setValue(r,!1,!0,!0)}else{let r=n.getLastItemHovered();r!==void 0&&this.setValue(r,!1,!0)}this.hidePicker()}}getValueFromSet(e){let{multiSelect:t}=this.config,n=null;for(let i of e){if(e.size===1&&!t){n=i;break}n||(n=[]),n.push(i)}return Array.isArray(n)&&n.sort(),n}onListValueSelected(e,t){let n=this.getValueFromSet(e);this.setValue(n,!1,!0),this.config.multiSelect||this.dispatchPickerEventAndHidePicker(n,t)}dispatchPickerEventAndHidePicker(e,t){let n={type:"fieldPickerValueSelected",fromEnterKey:t,value:e};this.dispatchLocalEvent(n),this.hidePicker()}getFocusableElement(){let{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){let{key:t,isComposing:n}=e,{isPickerDisplayed:i,config:{allowTyping:r,multiSelect:o,suppressDeselectAll:s},listComponent:a,pickerComponent:l}=this;switch(t){case $.LEFT:case $.RIGHT:(!r||this.pillContainer)&&(e.preventDefault(),this.pillContainer&&(this.listComponent?.highlightIndex(-1),this.pillContainer.onNavigationKeyDown(e)));break;case $.PAGE_HOME:case $.PAGE_END:if(r){e.preventDefault();let c=this.eInput.getInputElement(),d=t===$.PAGE_HOME?0:c.value.length;c.setSelectionRange(d,d);break}case $.PAGE_UP:case $.PAGE_DOWN:e.preventDefault(),l&&a?.navigateToPage(t);break;case $.DOWN:case $.UP:n||this.onNavigationKeyDown(e,t,()=>{o&&(this.doWhileBlockingAnnouncement(()=>this.eWrapper.focus()),this.announceAriaValue(this.ariaToggleSelection))});break;case $.ESCAPE:i&&(Dr(this.listComponent.getGui())&&(e.preventDefault(),ei(e)),this.hidePicker());break;case $.ENTER:n?e.preventDefault():this.onEnterKeyDown(e);break;case $.SPACE:if((!r||n)&&e.preventDefault(),!n&&i&&o&&a){let c=a.getLastItemHovered();c!==void 0&&a.toggleListItemSelection(c)}break;case $.TAB:this.onTabKeyDown();break;case $.DELETE:o&&!s&&this.onDeleteKeyDown(e);break;default:r||this.buildSearchStringFromKeyboardEvent(e)}}announceAriaValue(e){this.ariaAnnounce?.announceValue(e,"richSelect")}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),this.searchStrings=void 0,super.destroy()}},wK=(e,t)=>t?.(e)??String(e??"");function jY(e,t){e.then(n=>{let i=n.getGui();i!=null&&t.appendChild(i)})}var hIe={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},UY=class extends DA{constructor(e){super(ce(T({},e),{template:hIe,agComponents:[Jr]})),this.params=e}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();let{wrapperClassName:e,ariaLabel:t}=this.params;Ie(this.eDisplayField,!1),e&&this.eWrapper.classList.add(e),Fc(this.eWrapper,""),Ut(this.eWrapper,t)}onEnterKeyDown(e){ei(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},WY=class extends K{constructor(e,t,n){super(),this.eGui=e,this.focusWrapper=t,this.eFocusableComp=n}postConstruct(){this.addManagedElementListeners(this.eGui,{keydown:t=>{switch(t.key){case $.TAB:t.defaultPrevented||ei(t);break;case $.UP:case $.DOWN:ei(t);break;case $.ESCAPE:if(Fs(t))return;this.eGui.contains(wt(this.beans))&&(t.preventDefault(),ei(t),this.focusWrapper.focus());break}}});let e="ag-advanced-filter-builder-virtual-list-item-highlight";this.addManagedListeners(this.focusWrapper,{keydown:t=>{if(t.key===$.ENTER){if(Fs(t))return;wt(this.beans)===this.focusWrapper&&(t.preventDefault(),ei(t),this.eFocusableComp.getFocusableElement().focus())}},focusin:()=>{this.focusWrapper.classList.add(e)},focusout:t=>{this.focusWrapper.contains(t.relatedTarget)||this.focusWrapper.classList.remove(e)}})}};function $Y(e,t){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:e("advancedFilterBuilderAddCondition")},{key:"join",displayValue:e("advancedFilterBuilderAddJoin")}],valueFormatter:n=>n==null?"":n.displayValue??n.key,pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:`${t??120}px`,wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:e("advancedFilterBuilderAddButtonTooltip")}}var pIe={tag:"div",cls:"ag-advanced-filter-builder-item-wrapper",role:"presentation",children:[{tag:"div",ref:"eItem",cls:"ag-advanced-filter-builder-item",role:"presentation",children:[{tag:"div",cls:"ag-advanced-filter-builder-item-tree-lines",attrs:{"aria-hidden":"true"},children:[{tag:"div",cls:"ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"}]}]}]},fIe=class extends pe{constructor(e,t){super(pIe),this.item=e,this.focusWrapper=t,this.eItem=q}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){sp(this.focusWrapper,2);let e=$Y(n=>this.advFilterExpSvc.translate(n),this.gos.get("advancedFilterBuilderParams")?.addSelectWidth),t=this.createManagedBean(new UY(e));this.addManagedListeners(t,{fieldPickerValueSelected:({value:n})=>{this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:n.key==="join"})}}),this.eItem.appendChild(t.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>t.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new WY(this.getGui(),this.focusWrapper,t)),Ut(this.focusWrapper,this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip"),`${this.item.level+1}`]))}afterAdd(){}},gIe=class extends pe{constructor(){super({tag:"div",cls:"ag-advanced-filter-builder-item-condition",role:"presentation"}),this.validationMessage=null}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}init(e){let{item:t,createPill:n}=e;this.item=t,this.createPill=n,this.filterModel=t.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc(()=>this.destroyBeans([this.eColumnPill,this.eOperatorPill,this.eOperandPill]))}getDragName(){return this.filterModel.colId?this.advFilterExpSvc.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()}getAriaLabel(){return`${this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderFilterItem")} ${this.getDragName()}`}getValidationMessage(){return this.validationMessage}getFocusableElement(){return this.eColumnPill.getFocusableElement()}setupColumnCondition(e){let t=this.advFilterExpSvc.getColumnDetails(e.colId);this.baseCellDataType=t.baseCellDataType,this.column=t.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:this.getColumnDisplayValue()??this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getColumnAutocompleteEntries()}),update:n=>this.setColumnKey(n),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),_e(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())}createOperatorPill(){this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:this.getOperatorDisplayValue()??this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:()=>({values:this.getOperatorAutocompleteEntries()}),update:e=>this.setOperatorKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())}createOperandPill(){let{filter:e}=this.filterModel,t=(typeof e=="number"?Xr(e):e)??"";this.eOperandPill=this.createPill({key:t,valueFormatter:n=>this.advFilterExpSvc.getOperandDisplayValue(ce(T({},this.filterModel),{filter:n}),!0),baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:n=>this.setOperand(n),ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())}getColumnKey(){return this.filterModel.colId}getColumnDisplayValue(){return this.advFilterExpSvc.getColumnDisplayValue(this.filterModel)}getOperatorKey(){return this.filterModel.type}getOperatorDisplayValue(){return this.advFilterExpSvc.getOperatorDisplayValue(this.filterModel)}getOperandDisplayValue(){return this.advFilterExpSvc.getOperandDisplayValue(this.filterModel,!0)}hasOperand(){return this.numOperands>0}getOperatorAutocompleteEntries(){return this.column?this.advFilterExpSvc.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]}setColumnKey(e){this.eOperatorPill||this.createOperatorPill();let t=this.advFilterExpSvc.getColumnDetails(e);this.column=t.column;let n=t.baseCellDataType;this.baseCellDataType!==n&&(this.baseCellDataType=n,this.setOperatorKey(void 0),this.eOperatorPill&&(Bt(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=e,this.filterModel.filterType=this.baseCellDataType}setOperatorKey(e){let t=this.getNumOperands(e);t!==this.numOperands&&(this.numOperands=t,t===0?this.destroyOperandPill():(this.createOperandPill(),this.baseCellDataType!=="number"&&this.setOperand(""))),this.filterModel.type=e,this.validate()}setOperand(e){let t=e;this.baseCellDataType==="number"&&(t=_e(e)?Number(e):""),this.filterModel.filter=t,this.validate()}getNumOperands(e){return this.advFilterExpSvc.getExpressionOperator(this.baseCellDataType,e)?.numOperands??0}destroyOperandPill(){delete this.filterModel.filter,this.eOperandPill?.getGui().remove(),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0}validate(){let e=null;_e(this.getColumnKey())?_e(this.getOperatorKey())?this.numOperands>0&&!_e(this.getOperandDisplayValue())&&(e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationEnterValue")):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectOption"):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!e,e!==this.validationMessage&&(this.validationMessage=e,this.dispatchLocalEvent({type:"advancedFilterBuilderValidChanged"}))}getDefaultColumnDisplayValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectColumn")}getDefaultOptionSelectValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectOption")}},mIe={number:[Sy],boolean:[Go],object:[Go],text:[Go],date:[x0],dateString:[x0],dateTime:[x0,e=>e.setIncludeTime(!0)],dateTimeString:[x0,e=>e.setIncludeTime(!0)]},vIe={tag:"div",cls:"ag-advanced-filter-builder-pill-wrapper",role:"presentation",children:[{tag:"div",ref:"ePill",cls:"ag-advanced-filter-builder-pill",role:"button",children:[{tag:"span",ref:"eLabel",cls:"ag-advanced-filter-builder-pill-display"}]}]},CIe=class extends pe{constructor(e){super(vIe),this.params=e,this.ePill=q,this.eLabel=q;let{value:t,valueFormatter:n}=e;this.value=t,this.displayValue=n(t)}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}postConstruct(){let{cssClass:e,ariaLabel:t}=this.params;this.ePill.classList.add(e),this.activateTabIndex([this.ePill]),this.eLabel.id=`${this.getCompId()}`,op(this.ePill,this.eLabel.id),Ut(this.ePill,t),this.renderValue(),this.addManagedListeners(this.ePill,{click:n=>{n.preventDefault(),this.showEditor()},keydown:n=>{n.key===$.ENTER&&(n.preventDefault(),ei(n),this.showEditor())}}),this.addDestroyFunc(()=>this.destroyBean(this.eEditor))}getFocusableElement(){return this.ePill}showEditor(){if(this.eEditor)return;Ie(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);let e=this.eEditor.getGui();this.eEditor.addManagedElementListeners(e,{keydown:t=>{switch(t.key){case $.ENTER:t.preventDefault(),ei(t),this.updateValue(!0);break;case $.ESCAPE:t.preventDefault(),ei(t),this.hideEditor(!0);break}},focusout:()=>this.updateValue(!1)}),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}createEditorComp(e){let[t,n]=mIe[e],i=this.createBean(new t);return n?.(i),i}hideEditor(e){let{eEditor:t}=this;t&&(this.eEditor=void 0,t.getGui().remove(),this.destroyBean(t),Ie(this.ePill,!0),e&&this.ePill.focus())}renderValue(){let e,{displayValue:t,eLabel:n}=this,{classList:i}=n;i.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),_e(t)?this.params.type==="number"?(e=t,i.add("ag-advanced-filter-builder-value-number")):(e=`"${t}"`,i.add("ag-advanced-filter-builder-value-text")):(e=this.advFilterExpSvc.translate("advancedFilterBuilderEnterValue"),i.add("ag-advanced-filter-builder-value-empty")),n.textContent=e}updateValue(e){if(!this.eEditor)return;let t=this.eEditor.getValue()??"";this.dispatchLocalEvent({type:"fieldValueChanged",value:t}),this.value=t,this.displayValue=this.params.valueFormatter(t),this.renderValue(),this.hideEditor(e)}},bIe=class extends pe{wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}constructor(){super({tag:"div",cls:"ag-advanced-filter-builder-item-condition",role:"presentation"})}init(e){let{item:t,createPill:n}=e,i=t.filterModel;this.filterModel=i,this.ePill=n({key:i.type,displayValue:this.advFilterExpSvc.parseJoinOperator(i),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getJoinOperatorAutocompleteEntries()}),update:r=>i.type=r,pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc(()=>this.destroyBean(this.ePill))}getDragName(){return this.advFilterExpSvc.parseJoinOperator(this.filterModel)}getAriaLabel(){return`${this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderGroupItem")} ${this.getDragName()}`}getValidationMessage(){return null}getFocusableElement(){return this.ePill.getFocusableElement()}},wIe={tag:"div",cls:"ag-picker-field ag-advanced-filter-builder-pill-wrapper",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display ag-advanced-filter-builder-pill-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},yIe=class extends DA{constructor(e){super(ce(T({},e),{template:wIe,agComponents:[Jr]})),this.params=e}getFocusableElement(){return this.eWrapper}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();let{wrapperClassName:e,ariaLabel:t}=this.params;this.eWrapper.classList.add(e),Fc(this.eWrapper,""),Ut(this.eWrapper,t)}createPickerComponent(){if(!this.values){let{values:e}=this.params.getEditorParams();this.values=e;let t=this.value.key,n=e.find(i=>i.key===t)??{key:t,displayValue:this.value.displayValue};this.value=n}return super.createPickerComponent()}onEnterKeyDown(e){ei(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},SIe={tag:"div",cls:"ag-advanced-filter-builder-item-wrapper",role:"presentation",children:[{tag:"div",cls:"ag-advanced-filter-builder-item",role:"presentation",children:[{tag:"div",ref:"eTreeLines",cls:"ag-advanced-filter-builder-item-tree-lines",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eValidation",cls:"ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid",attrs:{"aria-hidden":"true"}}]},{tag:"div",ref:"eButtons",cls:"ag-advanced-filter-builder-item-buttons",children:[{tag:"span",ref:"eMoveUpButton",cls:"ag-advanced-filter-builder-item-button",role:"button"},{tag:"span",ref:"eMoveDownButton",cls:"ag-advanced-filter-builder-item-button",role:"button"},{tag:"div",ref:"eAddButton",role:"presentation"},{tag:"span",ref:"eRemoveButton",cls:"ag-advanced-filter-builder-item-button",role:"button"}]}]},lL=class extends Vd{constructor(e,t,n){super(SIe),this.item=e,this.dragFeature=t,this.focusWrapper=n,this.eTreeLines=q,this.eDragHandle=q,this.eButtons=q,this.eValidation=q,this.eMoveUpButton=q,this.eMoveDownButton=q,this.eAddButton=q,this.eRemoveButton=q,this.moveUpDisabled=!1,this.moveDownDisabled=!1}wireBeans(e){this.dragAndDrop=e.dragAndDrop,this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){let{filterModel:e,level:t,showMove:n}=this.item,i=e.filterType==="join";if(this.ePillWrapper=this.createManagedBean(i?new bIe:new gIe),this.ePillWrapper.init({item:this.item,createPill:r=>this.createPill(r)}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),t===0){let r=bt({tag:"div",cls:"ag-advanced-filter-builder-item-tree-line-vertical-bottom ag-advanced-filter-builder-item-tree-line-root"});this.eTreeLines.appendChild(r),Ie(this.eDragHandle,!1),Ie(this.eButtons,!1),Fi(this.focusWrapper,!0)}else this.setupTreeLines(t),this.eDragHandle.appendChild($e("advancedFilterBuilderDrag",this.beans)),this.setupValidation(),this.setupMoveButtons(n),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();sp(this.focusWrapper,t+1),this.initialiseTabGuard({}),this.createManagedBean(new WY(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListeners(this.ePillWrapper,{advancedFilterBuilderValueChanged:()=>this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}),advancedFilterBuilderValidChanged:()=>this.updateValidity()})}setState(e){let{level:t}=this.item;if(t===0)return;let{showMove:n}=this.item,{disableMoveUp:i,disableMoveDown:r,treeLines:o,showStartTreeLine:s}=e;this.updateTreeLines(o,s),this.updateAriaExpanded(),n&&(this.moveUpDisabled=!!i,this.moveDownDisabled=!!r,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",i),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",r),h0(this.eMoveUpButton,!!i),h0(this.eMoveDownButton,!!r),this.moveUpTooltipFeature?.refreshTooltip(),this.moveDownTooltipFeature?.refreshTooltip())}focusMoveButton(e){(e?this.eMoveUpButton:this.eMoveDownButton).focus()}afterAdd(){this.ePillWrapper.getFocusableElement().focus()}setupTreeLines(e){for(let t=0;t<e;t++)this.eTreeLines.appendChild(bt({tag:"div"}))}updateTreeLines(e,t){let n=e.length-1,{children:i}=this.eTreeLines;for(let o=0;o<n;o++){let s=i.item(o);s&&s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!e[o])}let r=i.item(n);if(r){r.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");let o=e[n];r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",o),r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!o)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",t)}setupValidation(){this.eValidation.appendChild($e("advancedFilterBuilderInvalid",this.beans)),this.validationTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eValidation,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.ePillWrapper.getValidationMessage(),getTooltipShowDelayOverride:()=>1e3})),this.updateValidity()}setupAddButton(){let e=$Y(n=>this.advFilterExpSvc.translate(n),this.gos.get("advancedFilterBuilderParams")?.addSelectWidth),t=this.createManagedBean(new UY(e));this.addManagedListeners(t,{fieldPickerValueSelected:({value:n})=>this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:n.key==="join"})}),this.eAddButton.appendChild(t.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eAddButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")}))}setupRemoveButton(){this.eRemoveButton.appendChild($e("advancedFilterBuilderRemove",this.beans)),this.addManagedListeners(this.eRemoveButton,{click:()=>this.removeItem(),keydown:e=>{e.key===$.ENTER&&(e.preventDefault(),ei(e),this.removeItem())}}),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eRemoveButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")})),Ut(this.eRemoveButton,this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])}setupMoveButtons(e){e?(this.eMoveUpButton.appendChild($e("advancedFilterBuilderMoveUp",this.beans)),this.addManagedListeners(this.eMoveUpButton,{click:()=>this.moveItem(!0),keydown:t=>{t.key===$.ENTER&&(t.preventDefault(),ei(t),this.moveItem(!0))}}),this.moveUpTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveUpButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveUpDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")})),Ut(this.eMoveUpButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild($e("advancedFilterBuilderMoveDown",this.beans)),this.addManagedListeners(this.eMoveDownButton,{click:()=>this.moveItem(!1),keydown:t=>{t.key===$.ENTER&&(t.preventDefault(),ei(t),this.moveItem(!1))}}),this.moveDownTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveDownButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveDownDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")})),Ut(this.eMoveDownButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(Ie(this.eMoveUpButton,!1),Ie(this.eMoveDownButton,!1))}updateValidity(){Mk(this.eValidation,!this.item.valid),this.validationTooltipFeature?.refreshTooltip(),this.updateAriaLabel()}createPill(e){let{key:t,cssClass:n,update:i,ariaLabel:r}=e,o=s=>{s!=null&&(i(s),this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}))};if(e.isSelect){let{getEditorParams:s,pickerAriaLabelKey:a,pickerAriaLabelValue:l,displayValue:c}=e,d=this.gos.get("advancedFilterBuilderParams"),u=`${d?.pillSelectMinWidth??140}px`,h=`${d?.pillSelectMaxWidth??200}px`,p=this.createBean(new yIe({pickerAriaLabelKey:a,pickerAriaLabelValue:l,pickerType:"ag-list",value:{key:t,displayValue:c},valueFormatter:f=>f==null?"":f.displayValue??f.key,variableWidth:!0,minPickerWidth:u,maxPickerWidth:h,getEditorParams:s,wrapperClassName:n,ariaLabel:r,pickerIcon:"advancedFilterBuilderSelectOpen"}));return this.addManagedListeners(p,{fieldPickerValueSelected:({value:f})=>o(f?.key)}),p}else{let{baseCellDataType:s,valueFormatter:a}=e,l=this.createBean(new CIe({value:t,valueFormatter:a,cssClass:n,type:s,ariaLabel:r}));return this.addManagedListeners(l,{fieldValueChanged:({value:c})=>o(c)}),l}}setupDragging(){let e={type:vo.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:()=>this.ePillWrapper.getDragName(),getDefaultIconName:()=>"notAllowed",getDragItem:()=>({}),onDragStarted:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragStarted",item:this.item}),onDragStopped:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragEnded"})};this.dragAndDrop.addDragSource(e,!0),this.addDestroyFunc(()=>this.dragAndDrop.removeDragSource(e))}updateAriaLabel(){let e=this.ePillWrapper.getAriaLabel(),t=`${this.item.level+1}`,n=this.ePillWrapper.getValidationMessage(),i;n?i=this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItemValidation",[e,t,n]):i=this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[e,t]),Ut(this.focusWrapper,i)}updateAriaExpanded(){a_(this.focusWrapper);let{filterModel:e}=this.item;e?.filterType==="join"&&e.conditions.length&&Fi(this.focusWrapper,!0)}removeItem(){this.dispatchLocalEvent({type:"advancedFilterBuilderRemoved",item:this.item})}moveItem(e){this.dispatchLocalEvent({type:"advancedFilterBuilderMoved",item:this.item,backwards:e})}},xIe={apply:"advancedFilterBuilderApply",clear:"advancedFilterBuilderClear",cancel:"advancedFilterBuilderCancel",reset:"advancedFilterBuilderReset"},EIe={tag:"div",cls:"ag-advanced-filter-builder",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eList",cls:"ag-advanced-filter-builder-list",role:"presentation"}]},DIe=class extends pe{constructor(){super(EIe),this.eList=q}wireBeans(e){this.filterManager=e.filterManager,this.advancedFilter=e.advancedFilter,this.advFilterExpSvc=e.advFilterExpSvc}postConstruct(){let e=this.gos.get("advancedFilterBuilderParams");this.params=T({buttons:["apply","cancel"]},e),this.addManagedPropertyListener("advancedFilterBuilderParams",({currentValue:t})=>{this.params.showMoveButtons=!!t?.showMoveButtons,this.params.buttons=t?.buttons??["apply","cancel"],this.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new JMe(this,this.virtualList)),this.resetButtonsPanel(this.params.buttons)}refresh(){let e=this.virtualList,t=e.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),t!=null&&(e.getComponentAt(t)||(t=0),e.focusRow(t))}getNumItems(){return this.items.length}moveItem(e,t){!t||!e||this.moveItemToIndex(e,t.rowIndex,t.position)}afterGuiAttached(){this.virtualList.awaitStable(()=>this.virtualList.focusRow(0))}setupVirtualList(){let e=this.virtualList=this.createManagedBean(new B0({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderList"),moveItemCallback:this.virtualListMoveItemCallback.bind(this)}));e.setComponentCreator(this.createItemComponent.bind(this)),e.setComponentUpdater(this.updateItemComponent.bind(this)),e.setRowHeight(40),this.eList.appendChild(e.getGui()),e.setModel({getRowCount:()=>this.items?.length||0,getRow:t=>this.items[t],areRowsEqual:(t,n)=>t===n}),this.buildList(),e.refresh()}resetButtonsPanel(e){let t=e&&e.length>0,n=this.eButtons;if(t){let i=e.map(o=>({type:o,label:this.advFilterExpSvc.translate(xIe[o])}));if(!n){n=this.createBean(new D0),this.appendChild(n.getGui());let o=s=>({event:a})=>{this.updateModel(s),this.afterAction(s,a)};n.addManagedListeners(n,{apply:o("apply"),clear:o("clear"),reset:o("reset"),cancel:o("cancel")}),this.eButtons=n}n.updateButtons(i);let r=n.getApplyButton();if(r){let o=s=>this.toggleCss("ag-advanced-filter-builder-validation",s);this.addManagedElementListeners(r,{mouseenter:()=>o(!0),mouseleave:()=>o(!1)})}}else n&&(Bt(n.getGui()),this.eButtons=this.destroyBean(n))}updateModel(e){switch(e){case"apply":this.advancedFilter.setModel(this.filterModel),this.filterManager?.onFilterChanged({source:"advancedFilter"});break;case"reset":this.advancedFilter.setModel(null),this.filterManager?.onFilterChanged({source:"advancedFilter"});break;case"cancel":break;case"clear":this.filterModel=this.formatFilterModel(null),this.refreshList(!1);break}}afterAction(e,t){switch(e){case"apply":{t?.preventDefault(),this.close();break}case"reset":{this.close();break}case"cancel":{this.close();break}}}removeItemFromParent(e){let t=e.parent.conditions.indexOf(e.filterModel);return e.parent.conditions.splice(t,1),t}moveItemToIndex(e,t,n){let i=this.items[t],r=i.filterModel?.filterType==="join"&&n==="bottom",o=r?i.filterModel:i.parent;if(!o||this.isChildOrSelf(o,e.filterModel)||i===e)return;this.removeItemFromParent(e);let s;r?s=0:(s=o.conditions.indexOf(i.filterModel),s===-1?s=o.conditions.length:n==="bottom"&&(s+=1)),o.conditions.splice(s,0,e.filterModel),this.refreshList(!1)}isChildOrSelf(e,t){return e===t||t.filterType==="join"&&t.conditions.some(n=>this.isChildOrSelf(e,n))}setupFilterModel(){let e=this.formatFilterModel(this.advancedFilter.getModel());return this.stringifiedModel=JSON.stringify(e),e}formatFilterModel(e){return e=e??{filterType:"join",type:"AND",conditions:[]},e.filterType!=="join"&&(e={filterType:"join",type:"AND",conditions:[e]}),e}buildList(){let e=(t,n,i,r)=>{if(n.push({filterModel:t,level:i,parent:r,valid:!0,showMove:this.params.showMoveButtons}),t.filterType==="join"){for(let o of t.conditions)e(o,n,i+1,t);i===0&&n.push({filterModel:null,level:i+1,parent:t,valid:!0})}};this.items=[],e(this.filterModel,this.items,0)}refreshList(e){if(!e){let t=[];for(let n of this.items)n.valid||t.push(n.filterModel);if(this.buildList(),t.length)for(let n of this.items)n.filterModel&&t.includes(n.filterModel)&&(n.valid=!1)}this.virtualList.refresh(e),this.validate()}updateItemComponent(e,t){let n=this.items.indexOf(e),i=(a,l)=>{let d=this.items.find(u=>u.filterModel===a)?.parent;if(d){let{conditions:u}=d;i(d,l),l.push(u[u.length-1]===a)}},r=[],{filterModel:o}=e;o&&(i(o,r),r[0]=!1);let s=o?.filterType==="join"&&!!o.conditions.length;t.setState({disableMoveUp:n===1,disableMoveDown:!this.canMoveDown(e,n),treeLines:r,showStartTreeLine:s})}createItemComponent(e,t){let n=this.createBean(e.filterModel?new lL(e,this.dragFeature,t):new fIe(e,t));return n.addManagedListeners(n,{advancedFilterBuilderRemoved:({item:i})=>this.removeItem(i),advancedFilterBuilderValueChanged:()=>this.validate(),advancedFilterBuilderAdded:({item:i,isJoin:r})=>this.addItem(i,r),advancedFilterBuilderMoved:({item:i,backwards:r})=>this.moveItemUpDown(i,r)}),n instanceof lL&&this.updateItemComponent(e,n),n}addItem(e,t){let{parent:n,level:i,filterModel:r}=e,o=r?.filterType==="join",s=t?{filterType:"join",type:"AND",conditions:[]}:{},a=o?r:n,l=o?0:a.conditions.indexOf(r);l>=0?(o||(l+=1),a.conditions.splice(l,0,s)):a.conditions.push(s);let c=this.items.indexOf(e),d=c>=0;if(d){e.filterModel&&c++;let u=[{filterModel:s,level:o?i+1:i,parent:a,valid:t,showMove:this.params.showMoveButtons}];this.items.splice(c,0,...u)}this.refreshList(d),d&&this.virtualList.getComponentAt(c)?.afterAdd()}removeItem(e){let t=e.parent,{filterModel:n}=e,i=t.conditions.indexOf(n);t.conditions.splice(i,1);let r=e.filterModel?.filterType==="join",o=this.items.indexOf(e),s=!r&&o>=0;s&&this.items.splice(o,1),this.refreshList(s),o>=0&&this.virtualList.focusRow(o)}moveItemUpDown(e,t,n){let i=this.items.indexOf(e),r=t?i-1:i+1;if(r===0||!t&&!this.canMoveDown(e,i))return;let o=this.items[r],s=this.removeItemFromParent(e),{level:a,filterModel:l,parent:c}=e,{level:d,filterModel:u,parent:h}=o;if(t)if(d===a&&u.filterType==="join")u.conditions.push(l);else if(d<=a){let g=h.conditions.indexOf(u);h.conditions.splice(g,0,l)}else c.conditions[s-1].conditions.push(l);else if(d===a)if(u.filterType==="join")u.conditions.splice(0,0,l);else{let g=h.conditions.indexOf(u);h.conditions.splice(g+1,0,l)}else if(s<c.conditions.length)c.conditions.splice(s+1,0,l);else{let g=this.items.find(m=>m.filterModel===c),C=g.parent.conditions.indexOf(g.filterModel)+1;g.parent.conditions.splice(C,0,l)}this.refreshList(!1);let p=this.items.findIndex(({filterModel:g})=>g===l);if(p<0)return;let f=this.virtualList.getComponentAt(p);f instanceof lL&&(n||f.focusMoveButton(t))}virtualListMoveItemCallback(e,t){let n=e.item,i=this.items.indexOf(n);i<=0||i===this.items.length-1||t&&i===1||!t&&!this.canMoveDown(n,i)||(this.moveItemUpDown(n,t,!0),this.virtualList.focusRow(i+(t?-1:1)))}canMoveDown(e,t){return!(e.level===1&&t===this.items.length-2||e.level===1&&e.parent.conditions[e.parent.conditions.length-1]===e.filterModel)}close(){this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui"})}validate(){let e=this.items.every(({valid:n})=>n),t=null;e?(e=JSON.stringify(this.filterModel)!==this.stringifiedModel,e||(t=this.advFilterExpSvc.translate("advancedFilterBuilderValidationAlreadyApplied"))):t=this.advFilterExpSvc.translate("advancedFilterBuilderValidationIncomplete"),this.eButtons?.updateValidity(e,t)}validateItems(){let e=n=>{n.type=void 0},t=n=>{delete n.filter};for(let n of this.items){if(!n.valid||!n.filterModel||n.filterModel.filterType==="join")continue;let{filterModel:i}=n,{colId:r}=i,o=this.advFilterExpSvc.getColumnAutocompleteEntries().find(({key:c})=>c===r),s=this.advFilterExpSvc.getColumnDetails(i.colId);if(!o||!s.column){n.valid=!1,i.colId=void 0,e(i),t(i);continue}let l=this.advFilterExpSvc.getDataTypeExpressionOperator(s.baseCellDataType).operators[i.type];if(!l){n.valid=!1,e(i),t(i);continue}l.numOperands>0&&!_e(i.filter)&&(n.valid=!1)}}},_Ie=class extends K{constructor(e){super(),this.enabled=e}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.popupSvc=e.popupSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.environment=e.environment}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsSvc.whenReady(this,()=>this.setAdvancedFilterComp()),this.addManagedEventListeners({advancedFilterEnabledChanged:({enabled:e})=>this.onEnabledChanged(e)}),this.addManagedPropertyListener("advancedFilterParent",()=>this.updateComps()),this.addManagedPropertyListener("advancedFilterBuilderParams",e=>{e.currentValue?.suppressFullScreenButton!==e.previousValue?.suppressFullScreenButton&&this.eBuilderDialog?.setMaximizable(e.currentValue?.suppressFullScreenButton??!0)}),this.addDestroyFunc(()=>{this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),this.eBuilderDialog?.isAlive()&&this.destroyBean(this.eBuilderDialog)})}setupHeaderComp(e){this.eHeaderComp&&(this.eHeaderComp?.getGui().remove(),this.destroyBean(this.eHeaderComp)),this.eHeaderComp=this.createManagedBean(new QMe(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return this.eHeaderComp?(this.eHeaderComp.getFocusableElement().focus(),!0):!1}refreshComp(){this.eFilterComp?.refresh(),this.eHeaderComp?.refresh()}refreshBuilderComp(){this.eBuilderComp?.refresh()}getHeaderHeight(){return this.eHeaderComp?.getHeight()??0}setInputDisabled(e){this.eFilterComp?.setInputDisabled(e),this.eHeaderComp?.setInputDisabled(e)}toggleFilterBuilder(e){let{source:t,force:n,eventSource:i}=e;if(n&&this.eBuilderDialog||n===!1&&!this.eBuilderDialog)return;if(this.eBuilderDialog){this.builderDestroySource=t,this.destroyBean(this.eBuilderDialog);return}this.setInputDisabled(!0);let{width:r,height:o,minWidth:s}=this.getBuilderDialogSize(),{suppressFullScreenButton:a}=T({suppressFullScreenButton:!1},this.gos.get("advancedFilterBuilderParams"));this.eBuilderComp=this.createBean(new DIe),this.eBuilderDialog=this.createBean(new EA({title:this.advFilterExpSvc.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:r,height:o,resizable:!0,movable:!0,maximizable:!a,centered:!0,closable:!0,minWidth:s,afterGuiAttached:()=>this.eBuilderComp?.afterGuiAttached(),postProcessPopupParams:{type:"advancedFilterBuilder",eventSource:i}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener("destroyed",()=>{this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchLocalEvent({type:"advancedFilterBuilderClosed"}),this.dispatchFilterBuilderVisibleChangedEvent(this.builderDestroySource??"ui",!1),this.builderDestroySource=void 0})}dispatchFilterBuilderVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"advancedFilterBuilderVisibleChanged",source:e,visible:t})}getBuilderDialogSize(){let e=this.gos.get("advancedFilterBuilderParams")?.minWidth??500,t=this.popupSvc.getPopupParent(),n=Math.round(Md(t))-2,i=Math.round(g0(t)*.75)-2,r=Math.min(Math.max(700,e),n),o=Math.min(600,i);return{width:r,height:o,minWidth:e}}onEnabledChanged(e){this.enabled=e,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;let e=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){let t=this.createBean(new HY),n=t.getGui();this.environment.applyThemeClasses(n),n.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(n),this.eFilterComp=t}}setHeaderCompEnabled(){this.eHeaderComp?.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&(Bt(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}},AIe=class{constructor(e){this.params=e,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(e){this.operators.push(""),this.operatorStartPositions.push(e),this.operatorEndPositions.push(void 0);let{expression:t}=this.params;for(;e<t.length;){let n=t[e];if(n===" "){if(this.parseOperator(e-1))return this.activeOperator++,e-1;this.operators[this.activeOperator]+=n}else this.operators[this.activeOperator]+=n;e++}return this.parseOperator(e-1),e}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return this.parsedOperator==="OR"?"||":"&&"}getModel(){return this.parsedOperator==="OR"?"OR":"AND"}getAutocompleteListParams(e,t){let n;if(t==null)n="";else{let r=this.operators[t],o=this.operatorEndPositions[t];n=AL(r,e,o==null?this.params.expression.length:o+1)}let i=this.params.advFilterExpSvc.getJoinOperatorAutocompleteEntries();return(t||t==null&&this.activeOperator)&&(i=i.filter(({key:r})=>r===this.parsedOperator)),this.params.advFilterExpSvc.generateAutocompleteListParams(i,"join",n)}updateExpression(e,t,n){let{expression:i}=this.params,r=t.displayValue??t.key;if(n===0)for(let a=this.operatorEndPositions.length-1;a>0;a--){let l=this.operatorEndPositions[a];l!=null&&(i=bp(i,this.operatorStartPositions[a],l,r).updatedValue)}let o=this.operatorStartPositions.length>n?this.operatorStartPositions[n]:e,s=(this.operatorEndPositions.length>n?this.operatorEndPositions[n]:void 0)??RL(i,e,!0).endPosition;return bp(i,o,s,r,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(e){let t=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",n=this.params.advFilterExpSvc.getExpressionJoinOperators(),i=xA(t,n,r=>r);if(i){this.operatorEndPositions[this.activeOperator]=e;let r=n[i];if(this.activeOperator){if(i!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:e-t.length+1,endPosition:e}),!1}else this.parsedOperator=i;return t!==r&&(qL(this.params,t,r,e),this.operators[this.activeOperator]=r),!0}else return i===null?!1:(this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:e-t.length+1,endPosition:e}),!0)}},RIe=class qY{constructor(t,n){this.params=t,this.startPosition=n,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new AIe(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let t=this.startPosition,{expression:n}=this.params;for(;t<n.length;){let i=n[t];if(i==="("&&!this.expectingOperator){let r=new qY(this.params,t+1);t=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else{if(i===")")return this.endPosition=t-1,this.startPosition===0&&(this.extraEndBracket=!0),t;if(i!==" ")if(this.expectingExpression){let r=new VMe(this.params,t);t=r.parseExpression(),this.expressionParsers.push(r),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0)}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(t=>t.isValid())}getValidationError(){let t=this.operatorParser.getValidationError();for(let i=0;i<this.expressionParsers.length;i++){let r=this.expressionParsers[i].getValidationError();if(r)return t&&t.startPosition<r.startPosition?t:r}if(t)return t;if(this.extraEndBracket)return{message:this.params.advFilterExpSvc.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let n;return this.expressionParsers.length===this.operatorParser.getNumOperators()?n="advancedFilterValidationMissingCondition":this.missingEndBracket&&(n="advancedFilterValidationMissingEndBracket"),n?{message:this.params.advFilterExpSvc.translate(n),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunction(t){let n=this.operatorParser.getFunction(),i=this.expressionParsers.map(o=>o.getFunction(t)),r=n==="&&"?"every":"some";return(o,s,a)=>i[r](l=>l(o,s,a))}getAutocompleteListParams(t){if(this.endPosition!=null&&t>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();let n=this.getExpressionParserIndex(t);if(n==null)return this.params.expression[t]==="("?{enabled:!1}:this.getColumnAutocompleteListParams();let r=this.expressionParsers[n].getAutocompleteListParams(t);if(!r){if(n<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,n);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){let o=this.operatorParser.getLastOperatorEndPosition();return o==null||t<=o+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return this.params.expression[t-1]===")"?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return r}updateExpression(t,n,i){let r=this.params.expression,o=this.getExpressionParserIndex(t);if(o==null){let l=i==="column"?this.params.advFilterExpSvc.getColumnValue(n):n.displayValue??n.key;return bp(r,this.startPosition,this.startPosition,l,!0)}let a=this.expressionParsers[o].updateExpression(t,n,i);return a??(i==="column"?bp(r,t,r.length-1,this.params.advFilterExpSvc.getColumnValue(n),!0):this.endPosition!=null&&t>this.endPosition+1?null:this.operatorParser.updateExpression(t,n,o))}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(t=>t.getModel())}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(t){let n;for(let i=0;i<this.expressionParsers.length&&!(this.expressionParsers[i].startPosition>t);i++)n=i;return n}},FIe=class{constructor(e){this.params=e,this.valid=!1}parseExpression(){this.joinExpressionParser=new RIe(this.params,0);let e=this.joinExpressionParser.parseExpression();return this.valid=e>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){let e=this.joinExpressionParser.getValidationError();if(!e)return null;let{message:t,startPosition:n,endPosition:i}=e;return n<this.params.expression.length?this.params.advFilterExpSvc.translate("advancedFilterValidationMessage",[t,this.params.expression.slice(n,i+1).trim()]):this.params.advFilterExpSvc.translate("advancedFilterValidationMessageAtEnd",[t])}getFunction(){let e=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunction(e),params:e}}getAutocompleteListParams(e){return this.joinExpressionParser.getAutocompleteListParams(e)??{enabled:!1}}updateExpression(e,t,n){return this.joinExpressionParser.updateExpression(e,t,n)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},MIe=class extends K{constructor(){super(...arguments),this.beanName="advancedFilter",this.appliedExpression=null,this.expression=null,this.isValid=!0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.dataTypeSvc=e.dataTypeSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.filterValueSvc=e.filterValueSvc,this.filterManager=e.filterManager}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new _Ie(this.enabled)),this.expressionProxy={getValue:(e,t)=>{let n=this.colModel.getColDefCol(e);return n?this.filterValueSvc.getValue(n,t):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",e=>this.setEnabled(!!e.currentValue)),this.addManagedEventListeners({newColumnsLoaded:e=>this.onNewColumnsLoaded(e)}),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",()=>{this.updateValidity()&&this.filterManager?.onFilterChanged({source:"advancedFilter"})})}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(e){return this.expressionFunction(this.expressionProxy,e,this.expressionParams)}getModel(){let e=this.createExpressionParser(this.appliedExpression);return e?.parseExpression(),e?.getModel()??null}setModel(e){let t=(i,r)=>{if(i.filterType==="join"){let o=this.advFilterExpSvc.parseJoinOperator(i),s=i.conditions.map(a=>t(a)).filter(a=>_e(a)).join(` ${o} `);return r||i.conditions.length<=1?s:`(${s})`}else return this.advFilterExpSvc.parseColumnFilterModel(i)},n=e?t(e,!0):null;this.setExpressionDisplayValue(n),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(e){this.expression=e}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(e){return e?new FIe({expression:e,colModel:this.colModel,dataTypeSvc:this.dataTypeSvc,valueSvc:this.valueSvc,advFilterExpSvc:this.advFilterExpSvc}):null}getDefaultExpression(e){let t=this.advFilterExpSvc.getColumnValue(e)+" ";return{updatedValue:t,updatedPosition:t.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(e,t){let n=this.enabled,i=nn(this.gos)||Ui(this.gos);e&&!i&&X(123),this.enabled=e&&i,!t&&this.enabled!==n&&this.eventSvc.dispatchEvent({type:"advancedFilterEnabledChanged",enabled:this.enabled})}applyExpression(){let e=this.createExpressionParser(this.expression);e?.parseExpression(),this.applyExpressionFromParser(e)}getAppliedExpressionDisplayValue(){return this.appliedExpression}applyExpressionFromParser(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid){this.expressionFunction=null,this.expressionParams=null,this.appliedExpression=null;return}let{expressionFunction:t,params:n}=e.getFunction();this.expressionFunction=t,this.expressionParams=n,this.appliedExpression=this.expression}updateValidity(){this.advFilterExpSvc.resetColumnCaches();let e=this.createExpressionParser(this.expression);e?.parseExpression();let n=(!e||e.isValid())!==this.isValid;return this.applyExpressionFromParser(e),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),n}onNewColumnsLoaded(e){if(e.source!=="gridInitializing"||!this.dataTypeSvc?.isPendingInference)return;this.ctrl.setInputDisabled(!0);let[t]=this.addManagedEventListeners({dataTypesInferred:()=>{t?.(),this.ctrl.setInputDisabled(!1)}})}},IIe={moduleName:"AdvancedFilter",version:Lt,beans:[MIe,HMe],icons:{advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",advancedFilterBuilderSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading"},apiFunctions:{getAdvancedFilterModel:MMe,setAdvancedFilterModel:IMe,showAdvancedFilterBuilder:TMe,hideAdvancedFilterBuilder:PMe},dependsOn:[ti,Py,Nl,ua,H_,z_],css:[FMe]},V0=class{constructor(e){this._defs={},this._nullable=!1,this.description=e}_collectNestedDefs(e){let t=T({},this._defs);for(let n of e)n&&typeof n=="object"&&"$defs"in n&&(Object.assign(t,n.$defs),delete n.$defs);return t}_toJSON(e={}){let t=T({type:this._nullable?[this.type,"null"]:this.type,description:this.description},e);return Object.keys(this._defs).length>0&&(t.$defs=this._defs),t}nullable(){return this._nullable=!0,this}define(e,t){return this._defs[e]=t,this}},TIe=class extends V0{constructor(e){super(typeof e=="string"?e:e?.description),this.type="string",typeof e=="object"&&e&&(this._pattern=e.pattern,this._format=e.format)}pattern(e){return this._pattern=e,this}format(e){return this._format=e,this}toJSON(){return this._toJSON({pattern:this._pattern,format:this._format})}},PIe=class extends V0{constructor(e){super(typeof e=="string"?e:e?.description),this.type="number",typeof e=="object"&&e&&(this._minimum=e.minimum,this._maximum=e.maximum,this._exclusiveMinimum=e.exclusiveMinimum,this._exclusiveMaximum=e.exclusiveMaximum,this._multipleOf=e.multipleOf)}minimum(e){return this._minimum=e,this}exclusiveMinimum(e){return this._exclusiveMinimum=e,this}maximum(e){return this._maximum=e,this}exclusiveMaximum(e){return this._exclusiveMaximum=e,this}multipleOf(e){return this._multipleOf=e,this}toJSON(){return this._toJSON({minimum:this._minimum,exclusiveMinimum:this._exclusiveMinimum,maximum:this._maximum,exclusiveMaximum:this._exclusiveMaximum,multipleOf:this._multipleOf})}},KY=class extends V0{constructor(e,t){super(t),this._enum=e,this.type="string"}toJSON(){return this._toJSON({enum:this._enum})}},kIe=class extends KY{constructor(e,t){super([e],t)}},LIe=class extends V0{constructor(e){super(e),this.type="boolean"}toJSON(){return this._toJSON()}},OIe=class extends V0{constructor(e,t){super(typeof t=="string"?t:t?.description),this.items=e,this.type="array",typeof t=="object"&&t&&(this._minItems=t.minItems,this._maxItems=t.maxItems)}minItems(e){return this._minItems=e,this}maxItems(e){return this._maxItems=e,this}toJSON(){let e=this.items.toJSON(),t=this._collectNestedDefs([e]);return this._defs=t,this._toJSON({items:e,minItems:this._minItems,maxItems:this._maxItems})}},NIe=class extends V0{constructor(e,t){super(t),this.properties=e,this.type="object"}toJSON(){let e=Object.fromEntries(Object.keys(this.properties).map(n=>[n,this.properties[n].toJSON()])),t=this._collectNestedDefs(Object.values(e));return this._defs=t,this._toJSON({required:Object.keys(this.properties),additionalProperties:!1,properties:e})}},BIe=class{constructor(e,t){this.schemas=e,this._nullable=!1,this._defs={},this.description=t}nullable(){return this._nullable=!0,this}define(e,t){return this._defs[e]=t,this}_collectNestedDefs(e){let t=this._defs;for(let n of e)n&&typeof n=="object"&&"$defs"in n&&(Object.assign(t,n.$defs),delete n.$defs);return t}toJSON(){let e=this.schemas.map(i=>i.toJSON()),t=this._collectNestedDefs(e),n={anyOf:this._nullable?[...e,{type:"null"}]:e};return this.description&&(n.description=this.description),Object.keys(t).length>0&&(n.$defs=t),n}},VIe=class{constructor(e){this.id=e}nullable(){return this}toJSON(){return{$ref:`#/$defs/${this.id}`}}},Ge={string:e=>new TIe(e),number:e=>new PIe(e),enum:(e,t)=>new KY(e,t),boolean:e=>new LIe(e),array:(e,t)=>new OIe(e,t),object:(e,t)=>new NIe(e,t),union:(e,t)=>new BIe(e,t),literal:(e,t)=>new kIe(e,t),ref:e=>new VIe(e)},GIe=e=>{let{aggFuncSvc:t}=e;if(!t)return;let i=e.colModel.getCols().filter(r=>r.isAllowValue()&&t.getFuncNames(r).length>0);if(i.length!==0)return Ge.object({aggregationModel:Ge.array(Ge.union(i.map(r=>Ge.object({colId:Ge.literal(r.getColId(),"Column identifier"),aggFunc:Ge.enum(e.aggFuncSvc?.getFuncNames(r)||[],"Aggregation function")}))),"Array of column aggregations")},"Aggregation configuration for the grid").nullable()},HIe=e=>{let n=e.colModel.getCols().filter(r=>r.isResizable());if(n.length===0)return;let i=n.map(r=>r.getColId());return Ge.object({columnSizingModel:Ge.array(Ge.union([Ge.object({colId:Ge.ref("resizableColumnId"),width:Ge.number("Fixed width in pixels").minimum(20)}),Ge.object({colId:Ge.ref("resizableColumnId"),flex:Ge.number("Flex sizing ratio").minimum(0)})]),"Array of column sizing configurations")},"Column sizing configuration for the grid").define("resizableColumnId",Ge.enum(i,"Column ID that supports resizing"))},zIe=()=>Ge.object({hiddenColIds:Ge.array(Ge.ref("allColumnIds"),"Array of column IDs to hide")},"Column visibility configuration for the grid").nullable(),jIe=({colModel:e,dataTypeSvc:t})=>{if(!t)return;let n=e.getCols(),i={boolean:[],object:[],date:[],dateString:[],dateTime:[],dateTimeString:[],number:[],text:[]};for(let s of n){let a=t.getBaseDataType(s);a&&i[a].push(s.colId)}let r=[],o={};for(let s of Object.keys(i))if(i[s].length>0){let a=`${s}AdvancedFilterModel`,l=QIe[s];o[a]=l(i[s]),r.push({$ref:`#/$defs/${a}`})}return o.joinAdvancedFilterModel=Ge.object({filterType:Ge.literal("join","Filter type identifier for joining multiple advanced filter conditions"),type:Ge.enum(["AND","OR"],"Logical operator to combine multiple advanced filter conditions"),conditions:Ge.array(Ge.ref("advancedFilterModel"),"Array of advanced filter conditions to be combined")}),o.advancedFilterModel={anyOf:[...r,{$ref:"#/$defs/joinAdvancedFilterModel"}]},Ge.object({advancedFilterModel:Ge.ref("advancedFilterModel")},"Advanced filter configuration for the grid").nullable()},UIe=e=>Ge.object({filterType:Ge.literal("boolean","Filter type identifier for boolean column filters"),colId:Ge.enum(e,"Column identifier for the boolean column to filter"),type:Ge.enum(["true","false"],"Boolean value to filter by")}),WIe=e=>Ge.object({filterType:Ge.literal("object","Filter type identifier for object column filters"),colId:Ge.enum(e,"Column identifier for the object column to filter"),filter:Ge.string("Filter value to compare against object column values").nullable(),type:Ge.enum(["equals","notEqual","contains","notContains","startsWith","endsWith","blank","notBlank"],"Object filter operation type")}),$Ie=e=>Ge.object({filterType:Ge.literal("date","Filter type identifier for date column filters"),colId:Ge.enum(e,"Column identifier for the date column to filter"),filter:Ge.string({pattern:"^\\d{4}-\\d{2}-\\d{2}$",description:"Date value in YYYY-MM-DD format"}).nullable(),type:Ge.enum(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Date filter operation type")}),qIe=e=>Ge.object({filterType:Ge.literal("date","Filter type identifier for date string column filters"),colId:Ge.enum(e,"Column identifier for the date string column to filter"),filter:Ge.string({pattern:"^\\d{4}-\\d{2}-\\d{2}$",description:"Date value in YYYY-MM-DD format"}).nullable(),type:Ge.enum(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Date string filter operation type")}),KIe=e=>Ge.object({filterType:Ge.literal("dateTime","Filter type identifier for datetime column filters"),colId:Ge.enum(e,"Column identifier for the datetime column to filter"),filter:Ge.string({pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$",description:"DateTime value in YYYY-MM-DDTHH:mm:ss format"}).nullable(),type:Ge.enum(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"DateTime filter operation type")}),YIe=e=>Ge.object({filterType:Ge.literal("dateTimeString","Filter type identifier for datetime string column filters"),colId:Ge.enum(e,"Column identifier for the datetime string column to filter"),filter:Ge.string({pattern:"^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$",description:"DateTime value in YYYY-MM-DD HH:mm:ss format"}).nullable(),type:Ge.enum(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"DateTime string filter operation type")}),ZIe=e=>Ge.object({filterType:Ge.literal("number","Filter type identifier for number column filters"),colId:Ge.enum(e,"Column identifier for the number column to filter"),filter:Ge.number("Numeric value to filter by").nullable(),type:Ge.enum(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Number filter operation type")}),XIe=e=>Ge.object({filterType:Ge.literal("text","Filter type identifier for text column filters"),colId:Ge.enum(e,"Column identifier for the text column to filter"),filter:Ge.string("Text value to filter by").nullable(),type:Ge.enum(["equals","notEqual","contains","notContains","startsWith","endsWith","blank","notBlank"],"Text filter operation type")}),QIe={boolean:UIe,object:WIe,date:$Ie,dateString:qIe,dateTime:KIe,dateTimeString:YIe,number:ZIe,text:XIe},JIe="agTextColumnFilter",YY="agNumberColumnFilter",ZY="agDateColumnFilter",eTe="agSetColumnFilter",tTe="agMultiColumnFilter",nTe=[JIe,YY,ZY],iTe=(e,t)=>{let{advancedFilter:n}=e;return n?.isEnabled()?jIe(e):rTe(e,t)},rTe=(e,t)=>{let{gos:n,colFilter:i,colModel:r}=e;if(!i)return;let s=r.getCols().filter(c=>c.isFilterAllowed());if(s.length===0)return;let a={},l=n.get("enableFilterHandlers");for(let c of s){let d=t?.columns?t.columns[c.getColId()]:void 0,u=c.getColDef(),h=i.getDefaultFilter(c),p=d?.includeSetValues??!1,f=XY(u.filter,u.filterParams,h,(g=!1,C=0)=>{if(!p)return[];let m;return g?l&&(m=i.getHandler(c,!0).getHandler(C)):m=i.getHandler(c,!0),m?m.getFilterKeys():[]});f&&(a[c.colId]=f.nullable())}return Ge.object({filterModel:Ge.object(a)}).nullable()};function XY(e,t,n,i){let r;if(typeof e=="string"?r=e:typeof e=="object"&&typeof e.component=="string"?r=e.component:(e===!0||typeof e=="object"&&e.component===!0)&&(r=n),!r)return null;if(nTe.includes(r)){let o=t?.maxNumConditions,s=t?.filterOptions?t.filterOptions.map(l=>typeof l=="string"?l:typeof l=="object"&&l.displayKey?l.displayKey:null).filter(Boolean):void 0,a=t?.useIsoSeparator||!1;return oTe(r,{maxConditions:o,filterOptions:s,useIsoSeparator:a})}else{if(r===eTe)return cTe(i);if(r===tTe)return dTe(t.filters,n,i)}return null}var oTe=(e,t)=>e===ZY?lTe(t):e===YY?aTe(t):sTe(t),YL=(e,t,n=2)=>n===1?e:Ge.object({filterType:Ge.literal(t,`Filter type identifier for ${t} filters with multiple conditions`),operator:Ge.enum(["AND","OR"],"Logical operator to combine multiple filter conditions. Must be included even with a single filter to adhere to the API."),conditions:Ge.array(e,"Array of filter conditions to be combined").minItems(2).maxItems(n)}),sTe=e=>{let t=e.filterOptions??["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],n=Ge.object({filterType:Ge.literal("text","Filter type identifier for text filters"),type:Ge.enum(t,"Text filter operation type"),filter:Ge.string("Primary filter value").nullable(),filterTo:Ge.string("Secondary filter value for range operations").nullable()});return YL(n,"text",e.maxConditions)},aTe=e=>{let t=e.filterOptions??["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],n=Ge.object({filterType:Ge.literal("number","Filter type identifier for number filters"),type:Ge.enum(t,"Number filter operation type"),filter:Ge.number("Primary filter value").nullable(),filterTo:Ge.number("Secondary filter value for range operations").nullable()});return YL(n,"number",e.maxConditions)},lTe=e=>{let t=e.filterOptions??["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],n=e.useIsoSeparator?"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$":"^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$",i=Ge.object({filterType:Ge.literal("date","Filter type identifier for date filters"),type:Ge.enum(t,"Date filter operation type"),dateFrom:Ge.string({pattern:n,description:"Primary date filter value in YYYY-MM-DD HH:mm:ss format"}).nullable(),dateTo:Ge.string({pattern:n,description:"Secondary date filter value for range operations in YYYY-MM-DD HH:mm:ss format"}).nullable()});return YL(i,"date",e.maxConditions)},cTe=e=>{let t=e?e().filter(Boolean):[];return Ge.object({filterType:Ge.literal("set","Filter type identifier for set filters"),values:Ge.array(t.length>0?Ge.enum(t,"Available values to filter by"):Ge.string("Filter values"),"Array of values to include in the filter")})},dTe=(e,t,n=()=>[])=>Ge.object({filterType:Ge.literal("multi","Filter type identifier for multi-condition filters"),filterModels:Ge.array(Ge.union(e.map((i,r)=>XY(i.filter,i.filterParams,t,()=>n(!0,r))),"Union of different filter types that can be combined").nullable(),"Array of filter conditions to be combined with AND/OR logic")}),uTe=e=>{let n=e.colModel.getCols().filter(i=>i.isAllowPivot()).map(i=>i.getColId());if(n.length!==0)return Ge.object({pivotMode:Ge.boolean("Whether pivot mode is enabled"),pivotColIds:Ge.array(Ge.enum(n,"Column ID that supports pivoting"),"Array of column IDs to use as pivot columns")},"Pivot configuration for the grid").nullable()},hTe=e=>{let n=e.colModel.getCols().filter(r=>r.isAllowRowGroup());if(n.length===0)return;let i=n.map(r=>r.getColId());return Ge.object({groupColIds:Ge.array(Ge.enum(i,"Column ID that supports row grouping"),"Array of column IDs to group by")},"Row grouping configuration for the grid")},pTe=e=>{let{sortSvc:t}=e;if(!t)return;let i=e.colModel.getCols().filter(o=>o.isSortable());if(i.length===0)return;let r=i.map(o=>o.getColId());return Ge.object({sortModel:Ge.array(Ge.object({colId:Ge.enum(r,"Column ID that supports sorting"),sort:Ge.enum(["asc","desc"],"Sort direction: ascending or descending"),type:Ge.enum(["default","absolute"],"Sort type: default or absolute values")}),"Array of sort configurations")},"Sort configuration for the grid").nullable()},fTe={aggregation:GIe,filter:iTe,sort:pTe,pivot:uTe,columnVisibility:zIe,columnSizing:HIe,rowGroup:hTe};function gTe(e,t){let n=e.colModel.getCols().map(a=>a.getColId()),i={};for(let a of B$){if(t?.exclude?.includes(a))continue;let l=fTe[a],c=l(e,t);c&&(i[a]=c.nullable())}let r=t?.columns??{},o=n.map(a=>r[a]?.description?`${a}: ${r[a].description}`:a).filter(Boolean).join(`
`);return Ge.object(i).define("allColumnIds",Ge.enum(n,o)).toJSON()}var mTe={moduleName:"AiToolkit",version:Lt,beans:[],dependsOn:[O_],apiFunctions:{getStructuredSchema:gTe}};function vTe(e){return e.sideBar?.comp.isDisplayed()??!1}function CTe(e,t){e.sideBar?.comp.setDisplayed(t)}function bTe(e,t){e.sideBar?.comp.setSideBarPosition(t)}function wTe(e,t,n){e.sideBar?.comp.openToolPanel(t,"api",n)}function yTe(e){e.sideBar?.comp.close("api")}function STe(e){return e.sideBar?.comp.openedItem()??null}function xTe(e){e.sideBar?.comp.refresh()}function ETe(e){return e.sideBar?.comp.isToolPanelShowing()??!1}function DTe(e,t){let n=e.sideBar?.comp.getToolPanelInstance(t);return Lu(n)}function _Te(e){return e.sideBar?.comp.getDef()}var ATe='.ag-tool-panel-wrapper{display:flex;overflow:hidden auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-side-bar-panel-width)}.ag-tool-panel-external{display:flex;flex-direction:row}:where(.ag-tool-panel-external) .ag-tool-panel-wrapper{flex-grow:1}.ag-select-agg-func-item{align-items:center;display:flex;flex:1 1 auto;flex-flow:row nowrap;height:100%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;>*{flex:none}}.ag-tool-panel-horizontal-resize{cursor:ew-resize;height:100%;position:absolute;top:0;width:5px;z-index:1}.ag-side-bar{background-color:var(--ag-side-bar-background-color);display:flex;flex-direction:row-reverse;position:relative}:where(.ag-ltr) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{right:-3px}:where(.ag-rtl) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-ltr) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-rtl) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{right:-3px}.ag-side-bar-left{flex-direction:row;order:-1}.ag-side-buttons{background-color:var(--ag-side-button-bar-background-color);padding-top:var(--ag-side-button-bar-top-padding);position:relative}.ag-side-button{background-color:var(--ag-side-button-background-color);border-bottom:var(--ag-side-button-border);border-top:var(--ag-side-button-border);color:var(--ag-side-button-text-color);margin-top:-1px;position:relative;&:before{background-color:transparent;bottom:0;content:"";display:block;position:absolute;top:0;transition:background-color var(--ag-side-button-selected-underline-transition-duration);width:var(--ag-side-button-selected-underline-width)}&:hover{background-color:var(--ag-side-button-hover-background-color);color:var(--ag-side-button-hover-text-color)}&.ag-selected{background-color:var(--ag-side-button-selected-background-color);border-bottom:var(--ag-side-button-selected-border);border-top:var(--ag-side-button-selected-border);color:var(--ag-side-button-selected-text-color);&:before{background-color:var(--ag-side-button-selected-underline-color)}}}:where(.ag-ltr) .ag-side-button{&:before{left:0}}:where(.ag-rtl) .ag-side-button{&:before{right:0}}.ag-side-button-button{align-items:center;display:flex;flex-direction:column;gap:var(--ag-spacing);position:relative;white-space:nowrap;width:100%;&:focus{box-shadow:none}}:where(.ag-ltr) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding)}:where(.ag-rtl) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding)}.ag-side-button-button:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-side-button-label{writing-mode:vertical-lr}@media (resolution <= 1.5x){.ag-side-button-label{font-family:"Segoe UI",var(--ag-font-family)}:where(.ag-ltr) .ag-side-button-label{transform:rotate(.05deg)}:where(.ag-rtl) .ag-side-button-label{transform:rotate(-.05deg)}}:where(.ag-ltr) .ag-side-bar-left,:where(.ag-rtl) .ag-side-bar-right{border-right:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-left:var(--ag-side-panel-border)}}:where(.ag-ltr) .ag-side-bar-right,:where(.ag-rtl) .ag-side-bar-left{border-left:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-right:var(--ag-side-panel-border)}}',RTe={tag:"div",cls:"ag-side-button",role:"presentation",children:[{tag:"button",ref:"eToggleButton",cls:"ag-button ag-side-button-button",role:"tab",attrs:{type:"button",tabindex:"-1","aria-expanded":"false"},children:[{tag:"div",ref:"eIconWrapper",cls:"ag-side-button-icon-wrapper",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eLabel",cls:"ag-side-button-label"}]}]},FTe=class extends pe{constructor(e){super(),this.toolPanelDef=e,this.eToggleButton=q,this.eIconWrapper=q,this.eLabel=q}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){this.setTemplate(RTe,[]),this.setLabel(),this.setIcon(),this.addManagedElementListeners(this.eToggleButton,{click:this.onButtonPressed.bind(this)}),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}setLabel(){let e=this.toolPanelDef,t=this.getLocaleTextFunc()(e.labelKey,e.labelDefault);this.eLabel.textContent=t}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",$e(this.toolPanelDef.iconKey,this.beans))}onButtonPressed(){this.dispatchLocalEvent({type:"toggleButtonClicked"})}setSelected(e){this.toggleCss("ag-selected",e),Fi(this.eToggleButton,e)}},MTe={tag:"div",cls:"ag-side-buttons",role:"tablist"},ITe=class extends pe{constructor(){super(MTe),this.buttonComps=[]}postConstruct(){this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){if(!(e.key!==$.TAB||!e.shiftKey)){if(za(this.beans,!0)){e.preventDefault();return}ei(e)}}setActiveButton(e){for(let t of this.buttonComps)t.setSelected(e===t.getToolPanelId())}addButtonComp(e){let t=this.createBean(new FTe(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener("toggleButtonClicked",()=>{this.dispatchLocalEvent({type:"sideBarButtonClicked",toolPanelId:e.id})}),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),at(this.getGui())}destroy(){this.clearButtons(),super.destroy()}},TTe={selector:"AG-SIDE-BAR-BUTTONS",component:ITe},QY={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columnsToolPanel",toolPanel:"agColumnsToolPanel"},JY={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agFiltersToolPanel"},PTe={id:"filters-new",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agNewFiltersToolPanel"},qy={columns:QY,filters:JY,"filters-new":PTe};function PL(e){if(e){if(e===!0)return{toolPanels:[QY,JY],defaultToolPanel:"columns"};if(typeof e=="string")return PL([e]);if(Array.isArray(e)){let t=[];for(let n of e){let i=qy[n];if(!i){X(215,{key:n,defaultByKey:qy});continue}t.push(i)}return t.length===0?void 0:{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:kTe(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position,hideButtons:e.hideButtons}}}function kTe(e){let t=[];return e&&e.forEach(n=>{let i=eZ(n);i&&t.push(i)}),t}function eZ(e){return typeof e!="string"?e:qy[e]?qy[e]:(X(215,{key:e,defaultByKey:qy}),null)}var LTe=class extends pe{constructor(){super({tag:"div",cls:"ag-tool-panel-horizontal-resize"}),this.minWidth=100,this.maxWidth=null}postConstruct(){let e=this.beans.horizontalResizeSvc.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.inverted=this.gos.get("enableRtl")}dispatchResizeEvent(e,t,n){this.eventSvc.dispatchEvent({type:"toolPanelSizeChanged",width:n,started:e,ended:t})}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e,t=!1){let n=this.inverted?-1:1,i=Math.max(this.minWidth,Math.floor(this.startingWidth-e*n));this.maxWidth!=null&&(i=Math.min(this.maxWidth,i)),this.elementToResize.style.width=`${i}px`,this.dispatchResizeEvent(!1,t,i)}};function OTe(e,t,n){return e.getCompDetails(t,NTe,void 0,n,!0)}var NTe={name:"toolPanel",optionalMethods:["refresh","getState"]},BTe={tag:"div",cls:"ag-tool-panel-wrapper",role:"tabpanel"},VTe=class extends pe{constructor(){super(BTe)}postConstruct(){let e=this.getGui(),t=this.resizeBar=this.createManagedBean(new LTe);e.setAttribute("id",`ag-${this.getCompId()}`),t.elementToResize=e,this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){let{id:n,minWidth:i,maxWidth:r,width:o}=e;this.toolPanelId=n,this.width=o;let s=OTe(this.beans.userCompFactory,e,t);if(s==null)return!1;let a=s.newAgStackInstance();this.params=s.params,a.then(this.setToolPanelComponent.bind(this));let l=this.resizeBar;return i!=null&&(l.minWidth=i),r!=null&&(l.maxWidth=r),!0}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)});let t=this.width;t&&(this.getGui().style.width=`${t}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){let t=this.gos.get("enableRtl"),n=e==="left",i=t?n:!n;this.resizeBar.inverted=i}refresh(){this.toolPanelCompInstance?.refresh(this.params)}},GTe={tag:"div",cls:"ag-side-bar ag-unselectable",children:[{tag:"ag-side-bar-buttons",ref:"sideBarButtons"}]},HTe=class extends pe{constructor(){super(GTe,[TTe]),this.sideBarButtons=q,this.toolPanelWrappers=[],this.registerCSS(ATe)}postConstruct(){this.sideBarButtons.addEventListener("sideBarButtonClicked",this.onToolPanelButtonClicked.bind(this));let{beans:e,gos:t}=this,{sideBar:n}=t.get("initialState")??{};this.setSideBarDef({sideBarDef:PL(t.get("sideBar")),sideBarState:n}),this.addManagedPropertyListener("sideBar",()=>this.setState()),e.sideBar.comp=this;let i=this.getFocusableElement();this.createManagedBean(new Gu(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),g5(e,this,i),this.addManagedPropertyListener("enableAdvancedFilter",this.onAdvancedFilterChanged.bind(this))}onTabKeyDown(e){if(e.defaultPrevented)return;let{beans:t,sideBarButtons:n}=this,i=this.getGui(),r=n.getGui(),o=wt(t),s=i.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),a=e.target,l=e.shiftKey;if(!s)return za(t,l)?(e.preventDefault(),!0):za(t,l,!0);if(r.contains(o)){qn(s,l)&&e.preventDefault();return}if(!l)return;let c=null;s.contains(o)?c=Wi(t,s,void 0,!0):BY(s,a)&&(c=_L(s,a)),c||(c=r.querySelector(".ag-selected button"),c=Dr(c)?c:null),c&&c!==e.target&&(e.preventDefault(),c.focus())}handleKeyDown(e){let t=wt(this.beans),n=this.sideBarButtons;if(!n.getGui().contains(t))return;let i=n.getGui(),r=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),o=r.findIndex(l=>l.contains(t)),s=null;switch(e.key){case $.LEFT:case $.UP:s=Math.max(0,o-1);break;case $.RIGHT:case $.DOWN:s=Math.min(o+1,r.length-1);break}if(s===null)return;let a=r[s].querySelector("button");a&&(a.focus(),e.preventDefault())}onToolPanelButtonClicked(e){let t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtons.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:e,sideBarState:t,existingToolPanelWrappers:n}){if(this.setDisplayed(!1),this.sideBar=e,e&&this.sideBarButtons.setDisplayed(!e.hideButtons),e?.toolPanels){let i=e.toolPanels;if(this.createToolPanelsAndSideButtons(i,t,n),!this.toolPanelWrappers.length)return;let r=t?t.visible:!e.hiddenByDefault;if(this.setDisplayed(r),this.setSideBarPosition(t?t.position:e.position),r)if(t){let{openToolPanel:o}=t;o&&this.openToolPanel(o,"sideBarInitializing")}else this.openToolPanel(e.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;let t=e==="left",n=t?"right":"left";this.toggleCss("ag-side-bar-left",t),this.toggleCss("ag-side-bar-right",!t);for(let i of this.toolPanelWrappers)i.setResizerSizerSide(n);return this.dispatchSideBarUpdated(),this}setDisplayed(e,t){super.setDisplayed(e,t),this.dispatchSideBarUpdated()}getState(){let e={};for(let t of this.toolPanelWrappers)e[t.getToolPanelId()]=t.getToolPanelInstance()?.getState?.();return{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,n){for(let i of e)this.createToolPanelAndSideButton(i,t?.toolPanels?.[i.id],n?.[i.id])}validateDef(e){let{id:t,toolPanel:n}=e;return t==null?(X(212),!1):yK(n)&&this.beans.filterManager?.isAdvFilterEnabled()?(X(213),!1):!0}createToolPanelAndSideButton(e,t,n){if(!this.validateDef(e)){this.destroyBean(n);return}let i;if(n)i=n;else if(i=this.createBean(new VTe),!i.setToolPanelDef(e,Oe(this.gos,{initialState:t,onStateUpdated:()=>this.dispatchSideBarUpdated()})))return;i.setDisplayed(!1);let r=i.getGui(),o=e.parent instanceof HTMLElement?e.parent:this;o===e.parent&&(this.beans.environment.applyThemeClasses(o,["ag-external","ag-tool-panel-external"]),r.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr")),o.appendChild(r),this.toolPanelWrappers.push(i);let s=this.sideBarButtons.addButtonComp(e);ay(s.eToggleButton,r)}refresh(){for(let e of this.toolPanelWrappers)e.refresh()}renderToolPanelUnderParent(e,t){let n=this.sideBar?.toolPanels?.find(i=>(typeof i=="string"?i:i.id)===e);if(n){let i=eZ(n);if(i){let r=this.gos.get("initialState")?.sideBar?.toolPanels?.[i.id];i.parent=t;let o=this.toolPanelWrappers.find(s=>s.getToolPanelId()===e);this.createToolPanelAndSideButton(i,r,o)}}}openToolPanel(e,t="api",n){n&&e&&this.renderToolPanelUnderParent(e,n);let i=this.openedItem();if(i===e)return;for(let s of this.toolPanelWrappers){let a=e===s.getToolPanelId();s.setDisplayed(a)}let r=this.openedItem();i!==r&&(this.sideBarButtons.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,i??void 0,t))}getToolPanelInstance(e){let t=this.toolPanelWrappers.filter(n=>n.getToolPanelId()===e)[0];if(!t){X(214,{key:e});return}return t.getToolPanelInstance()}raiseToolPanelVisibleEvent(e,t,n){let i=!!e&&!!t,r=this.eventSvc;t&&r.dispatchEvent({type:"toolPanelVisibleChanged",source:n,key:t,visible:!1,switchingToolPanel:i}),e&&r.dispatchEvent({type:"toolPanelVisibleChanged",source:n,key:e,visible:!0,switchingToolPanel:i})}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;for(let t of this.toolPanelWrappers)t.isDisplayed()&&(e=t.getToolPanelId());return e}setState(e){let t=PL(this.gos.get("sideBar")),n={};t&&this.sideBar&&t.toolPanels?.forEach(i=>{let{id:r}=i;if(!r)return;let o=this.sideBar.toolPanels?.find(c=>c.id===r);if(!o||i.toolPanel!==o.toolPanel)return;let s=this.toolPanelWrappers.find(c=>c.getToolPanelId()===r);if(!s)return;let a=Oe(this.gos,ce(T({},i.toolPanelParams??{}),{initialState:e?.toolPanels?.[r],onStateUpdated:()=>this.dispatchSideBarUpdated()}));s.getToolPanelInstance()?.refresh(a)===!0&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(c=>c!==s),Bt(s.getGui()),n[r]=s)}),this.clearDownUi(),this.setSideBarDef({sideBarDef:t,sideBarState:e,existingToolPanelWrappers:n})}dispatchSideBarUpdated(){this.eventSvc.dispatchEvent({type:"sideBarUpdated"})}destroyToolPanelWrappers(){for(let e of this.toolPanelWrappers)Bt(e.getGui()),this.destroyBean(e);this.toolPanelWrappers.length=0}onAdvancedFilterChanged(){this.sideBar?.toolPanels?.some(t=>yK(typeof t=="string"?t:t.toolPanel))&&this.setState()}destroy(){this.destroyToolPanelWrappers(),super.destroy()}};function yK(e){return e==="agFiltersToolPanel"||e==="agNewFiltersToolPanel"}var zTe={selector:"AG-SIDE-BAR",component:HTe},jTe=class extends K{constructor(){super(...arguments),this.beanName="sideBar"}getSelector(){return zTe}},_A={moduleName:"SideBar",version:Lt,beans:[jTe],apiFunctions:{isSideBarVisible:vTe,setSideBarVisible:CTe,setSideBarPosition:bTe,openToolPanel:wTe,closeToolPanel:yTe,getOpenedToolPanel:STe,refreshToolPanel:xTe,isToolPanelShowing:ETe,getToolPanelInstance:DTe,getSideBar:_Te},dependsOn:[ti,_5]},UTe='.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:solid var(--ag-border-width) var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}',tZ=class extends xMe{constructor(){super({warnNoIcon:()=>X(227)})}},AA={moduleName:"MenuItem",version:Lt,userComponents:{agMenuItem:tZ},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:[UTe]},WTe=".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none;.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}",$Te=300,qTe={tag:"div",cls:"ag-column-select-header",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-column-select-header-icon"},{tag:"ag-checkbox",ref:"eSelect",cls:"ag-column-select-header-checkbox"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-column-select-header-filter-wrapper"}]},KTe=class extends pe{constructor(){super(qTe,[mo,Jr]),this.eExpand=q,this.eSelect=q,this.eFilterTextField=q}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:t=>{t.key===$.SPACE&&(t.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});let e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){let e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.toggleCss("ag-column-select-column-readonly",e)}init(e){this.params=e;let t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.toggleCss("ag-column-select-column-readonly",t),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){let e=this.beans;this.eExpand.appendChild(this.eExpandChecked=$e("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=$e("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=$e("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){let e=this.params,t=!e.suppressColumnFilter,n=!e.suppressColumnSelectAll,i=!e.suppressColumnExpandAll,r=!!this.beans.colModel.colDefCols?.treeDepth,o=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(o("searchOoo","Search...")),Ie(this.eFilterTextField.getGui(),t),Ie(this.eSelect.getGui(),n),Ie(this.eExpand,i&&r)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=$n(this,()=>{let e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})},$Te)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,Ie(this.eExpandChecked,e===0),Ie(this.eExpandUnchecked,e===1),Ie(this.eExpandIndeterminate,e===2)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}},YTe={selector:"AG-PRIMARY-COLS-HEADER",component:KTe};function T0(e){return!!e&&typeof e.children<"u"}function hp(e){return T0(e)?e.groupId:e.colId}function nZ(e,t,n){let i=(s,a)=>{let c=s.children.map(hp).includes(hp(a)),d=Qe(s.children),u=d&&hp(d)!==hp(a);return c&&u};if(!T0(e))return!0;let r=e,o=n;if(i(r,o)||r.groupId===t&&!r.children.map(hp).includes(hp(o)))return r.children.push(o),!0;for(let s=r.children.length-1;s>=0&&!nZ(r.children[s],t,n);s--);return!1}function ZTe(e){let t=(r,o)=>T0(r)&&T0(o)&&hp(r)===hp(o),n=(r,o)=>{if(!T0(o))return r;let s=r,a=o;if(a.children&&a.groupId&&nZ(s,a.groupId,a.children[0]))return s;for(let l of a.children)n(s,l);return s},i=[];for(let r=1;r<=e.length;r++){let o=e[r-1],s=e[r];t(o,s)?e[r]=n(o,s):i.push(o)}return i}function iZ(e,t){let n=[],i=(o,s)=>{if(T0(o)){let a=o,l=typeof a.groupId<"u"?a.groupId:a.headerName,c=new rg(a,l,!1,s),d=[];for(let u of a.children){let h=i(u,s+1);h&&d.push(h)}return c.setChildren(d),c}else{let a=o,l=a.colId?a.colId:a.field,c=e.getColDefCol(l);return c||n.push(a),c}},r=[];for(let o of t){let s=i(o,0);s&&r.push(s)}return n.length>0&&X(217,{invalidColIds:n}),r}function rZ(e,t){let n=XTe(e),i=ZTe(n);t(i)}function XTe(e){let t=(r,o)=>{let s;if(Qn(r))if(r.isPadding())s=o;else{let l=Object.assign({},r.getColGroupDef());l.groupId=r.getGroupId(),l.children=[o],s=l}else{let l=Object.assign({},r.getColDef());l.colId=r.getColId(),s=l}let a=r.getOriginalParent();return a?t(a,s):s};return e.getCols().filter(r=>{let o=r.getColDef();return r.isPrimary()&&!o.showRowGroup}).map(r=>t(r,r.getColDef()))}var SK=class{constructor(e,t,n,i=!1,r){this.displayName=e,this.depth=n,this.group=i,this.localEventService=new Rc,i?(this.columnGroup=t,this._expanded=r,this.children=[]):this.column=t}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};function oZ(e,t,n,i){let r=QTe(t);sZ(e,r,n,i)}function sZ(e,t,n,i){e.colModel.isPivotMode()?ePe(e,t,n,i):JTe(e,t,n,i)}function QTe(e){let t=[],n=i=>{for(let r of i)r.passesFilter&&(r.group?n(r.children):t.push(r.column))};return n(e),t}function JTe(e,t,n,i){let r=[];for(let o of t)o.getColDef().lockVisible||o.isVisible()!=n&&r.push({colId:o.getId(),hide:!n});r.length>0&&go(e,{state:r},i)}function ePe(e,t,n,i){tPe(e,t,n,i)}function tPe(e,t,n,i){let r=[],a=n?l=>{if(!l.isAnyFunctionActive())if(l.isAllowValue()){let c=typeof l.getAggFunc()=="string"?l.getAggFunc():e.aggFuncSvc?.getDefaultAggFunc(l);r.push({colId:l.getId(),aggFunc:c})}else l.isAllowRowGroup()?r.push({colId:l.getId(),rowGroup:!0}):l.isAllowPivot()&&r.push({colId:l.getId(),pivot:!0})}:l=>{(l.isPivotActive()||l.isRowGroupActive()||l.isValueActive())&&r.push({colId:l.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(a),r.length>0&&go(e,{state:r},i)}function aZ(e,t){let{columns:n,visibleState:i,pivotState:r,eventType:o}=t,s=n.map(a=>{let l=a.getColId();if(e.colModel.isPivotMode()){let c=r?.[l];return{colId:l,pivot:c?.pivot,rowGroup:c?.rowGroup,aggFunc:c?.aggFunc}}else return{colId:l,hide:!i?.[l]}});go(e,{state:s},o)}function lZ(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function xK(e,t,n,i){let r=t.getCol(n),o=e._groupData;o||(o={},e._groupData=o);let s=r.getColId(),a=o[s];a!==i&&(o[s]=i,e.dispatchCellChangedEvent(r,i,a))}function cZ(e,t,n){e.group!==n&&(e.group&&!n&&(e.expanded=!1),e.group=n,e.updateHasChildren(),t.selectionSvc?.updateRowSelectable(e),e.dispatchRowEvent("groupChanged"))}function Yy(e,t){let{gos:n,rowGroupColsSvc:i}=t;if(!i||!e)return!1;let r=n.get("groupLockGroupColumns");if(!e.isRowGroupActive()||r===0)return!1;if(r===-1)return!0;let o=i.columns.findIndex(s=>s.getColId()===e.getColId());return r>o}function nPe(e){let t=ra(e),n="getSelection"in t?t.getSelection():null,i=[];for(let r=0;r<(n?.rangeCount??0);r++){let o=n?.getRangeAt(r);o&&i.push(o)}return{selection:n,ranges:i}}function iPe(e,t){if(!e.gos.get("enableCellTextSelection")||!hg()&&!Od())return t();let{selection:i,ranges:r}=nPe(e);t(),i?.removeAllRanges();for(let o of r)i?.addRange(o)}var rPe={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},ZL={getMenuItemComp:(e,t,n)=>e.userCompFactory.getCompDetails(t,rPe,"agMenuItem",Oe(e.gos,n),!0)?.newAgStackInstance()??tt.resolve(),getPostProcessPopupParams:({column:e,node:t})=>({column:e,rowNode:t}),preserveRangesWhile:iPe,stopPropagationCallbacks:ap,warnNoItem:e=>{X(228,{menuItemOrString:e})}},oPe=class extends DL{constructor(){super(ZL)}},XL=class extends $L{constructor(e,t={column:null,node:null,value:null}){super(e,t,ZL)}},dZ=class extends pe{constructor(e,t,n){super({tag:"div",cls:"ag-menu"}),this.column=e,this.mouseEventOrTouch=t,this.parentEl=n,this.displayName=null}postConstruct(){let{column:e,beans:{colNames:t}}=this;this.initializeProperties(e);let n;if(Il(e)?n=t.getDisplayNameForColumn(e,"columnToolPanel"):n=t.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=n,this.buildMenuItemMap(),this.isActive()){let i=this.mouseEventOrTouch;"preventDefault"in i&&i.preventDefault();let r=this.getMappedMenuItems();if(r.length===0)return;this.displayContextMenu(r)}}initializeProperties(e){let t;Qn(e)?t=e.getLeafColumns():t=[e],this.columns=t;let n=this.beans.colModel.isPivotMode();this.allowScrollIntoView=!n&&t.some(this.isColumnValidForScrollIntoView),this.allowGrouping=t.some(i=>i.isPrimary()&&i.isAllowRowGroup()),this.allowValues=t.some(i=>i.isPrimary()&&i.isAllowValue()),this.allowPivoting=n&&t.some(i=>i.isPrimary()&&i.isAllowPivot())}buildMenuItemMap(){let e=this.getLocaleTextFunc(),{beans:t,displayName:n}=this,{rowGroupColsSvc:i,valueColsSvc:r,pivotColsSvc:o,colModel:s}=t,a=new Map;this.menuItemMap=a;let l=s.isPivotMode();a.set("scrollIntoView",{allowedFunction:h=>!h.isPinned()&&!l&&this.isColumnValidForScrollIntoView(h),activeFunction:()=>!1,activateLabel:()=>e("scrollColumnIntoView",`Scroll ${n} into View`,[n]),activateFunction:()=>{let h=this.columns.find(this.isColumnValidForScrollIntoView);h&&this.beans.ctrlsSvc.getScrollFeature().ensureColumnVisible(h)},deActivateFunction:()=>{},addIcon:"ensureColumnVisible"});let c=h=>h.isPrimary()&&h.isAllowRowGroup()&&!Yy(h,t);a.set("rowGroup",{allowedFunction:c,activeFunction:h=>h.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${n}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${n}`,activateFunction:()=>i?.setColumns(this.addColumnsToList(i.columns,c),"toolPanelUi"),deActivateFunction:()=>i?.setColumns(this.removeColumnsFromList(i.columns,c),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"});let d=h=>h.isPrimary()&&h.isAllowValue();a.set("value",{allowedFunction:d,activeFunction:h=>h.isValueActive(),activateLabel:()=>e("addToValues",`Add ${n} to values`,[n]),deactivateLabel:()=>e("removeFromValues",`Remove ${n} from values`,[n]),activateFunction:()=>r?.setColumns(this.addColumnsToList(r.columns,d),"toolPanelUi"),deActivateFunction:()=>r?.setColumns(this.removeColumnsFromList(r.columns,d),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"});let u=h=>l&&h.isPrimary()&&h.isAllowPivot();a.set("pivot",{allowedFunction:u,activeFunction:h=>h.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${n} to labels`,[n]),deactivateLabel:()=>e("removeFromLabels",`Remove ${n} from labels`,[n]),activateFunction:()=>o?.setColumns(this.addColumnsToList(o.columns,u),"toolPanelUi"),deActivateFunction:()=>o?.setColumns(this.removeColumnsFromList(o.columns,u),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}isColumnValidForScrollIntoView(e){if(!e.isVisible())return!1;let n=e.getParent();return n?n.getDisplayedChildren()?.includes(e)??!0:!0}addColumnsToList(e,t){return[...e].concat(this.columns.filter(n=>t(n)&&!e.includes(n)))}removeColumnsFromList(e,t){return e.filter(n=>t(n)&&this.columns.includes(n))}displayContextMenu(e){let t=this.getGui(),n=this.createBean(new XL),i=this.getLocaleTextFunc(),r=()=>{};t.appendChild(n.getGui()),n.addMenuItems(e),n.addManagedListeners(n,{closeMenu:()=>{this.parentEl.focus(),r()}});let o=this.beans.popupSvc,s=o.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>qn(n.getGui()),ariaLabel:i("ariaLabelContextMenu","Context Menu"),closedCallback:a=>{a instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(n)}});s&&(r=s.hideFunc),o.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEventOrTouch,ePopup:t})}isActive(){return this.allowScrollIntoView||this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){let e=[],{menuItemMap:t,columns:n,displayName:i,beans:r}=this;for(let o of t.values()){let s=n.some(l=>o.allowedFunction(l)&&!o.activeFunction(l)),a=n.some(l=>o.allowedFunction(l)&&o.activeFunction(l));s&&e.push({name:o.activateLabel(i),icon:$e(o.addIcon,r,null),action:()=>o.activateFunction()}),a&&o.removeIcon&&o.deactivateLabel&&e.push({name:o.deactivateLabel(i),icon:$e(o.removeIcon,r,null),action:()=>o.deActivateFunction?.()})}return e}},sPe={tag:"div",cls:"ag-column-select-column-group",children:[{tag:"span",ref:"eColumnGroupIcons",cls:"ag-column-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-column-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-column-group-opened-icon"}]},{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},uZ=class extends pe{constructor(e,t,n,i){super(),this.modelItem=e,this.allowDragging=t,this.eventType=n,this.focusWrapper=i,this.cbSelect=q,this.eLabel=q,this.eGroupOpenedIcon=q,this.eGroupClosedIcon=q,this.eColumnGroupIcons=q,this.processingColumnStateChange=!1;let{columnGroup:r,depth:o,displayName:s}=e;this.columnGroup=r,this.columnDepth=o,this.displayName=s}postConstruct(){this.setTemplate(sPe,[mo]);let{beans:e,cbSelect:t,eLabel:n,displayName:i,columnDepth:r,modelItem:o,focusWrapper:s,columnGroup:a}=this,{registry:l,gos:c}=e,d=$e("columnDrag",e);this.eDragHandle=d,d.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");let u=t.getGui(),h=t.getInputElement();u.after(d),h.setAttribute("tabindex","-1"),n.textContent=i??"",this.setupExpandContract(),this.addCss("ag-column-select-indent-"+r),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(l.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:lp(c,()=>n)})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(n,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(o,{expandedChanged:this.onExpandChanged.bind(this)});let p=new oa(this.getGui(),!1);this.addManagedListeners(p,{longTap:g=>this.onContextMenu(g.touchStart)}),this.addDestroyFunc(p.destroy.bind(p)),this.addManagedListeners(s,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();let f=I_(a.getColGroupDef(),c,null,a);for(let g of f)this.toggleCss(g,!0)}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){let e=this.columnGroup.getColGroupDef();if(!e)return;let t=()=>this.tooltipFeature?.setTooltipAndRefresh(e.headerTooltip);t(),this.addManagedEventListeners({newColumnsLoaded:t})}handleKeyDown(e){switch(e.key){case $.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case $.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case $.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){let{columnGroup:t,gos:n}=this;if(n.get("functionsReadOnly"))return;let i=this.createBean(new dZ(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}addVisibilityListenersToAllChildren(){let e=this.onColumnStateChanged.bind(this);for(let t of this.columnGroup.getLeafColumns())this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})}setupDragging(){if(!this.allowDragging){Ie(this.eDragHandle,!1);return}let e=this.beans,{gos:t,eventSvc:n,dragAndDrop:i}=e,r=!t.get("suppressDragLeaveHidesColumns"),o={type:vo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>r?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{r=!t.get("suppressDragLeaveHidesColumns"),n.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{n.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:s=>{r&&aZ(e,{columns:this.columnGroup.getLeafColumns(),visibleState:s?.visibleState,pivotState:s?.pivotState,eventType:this.eventType})},onGridExit:()=>{r&&this.onChangeCommon(!1)}};i.addDragSource(o,!0),this.addDestroyFunc(()=>i.removeDragSource(o))}createDragItem(){let e=this.columnGroup.getLeafColumns(),t={},n={};for(let i of e){let r=i.getId();t[r]=i.isVisible(),n[r]=lZ(i)}return{columns:e,visibleState:t,pivotState:n}}setupExpandContract(){let{beans:e,eGroupClosedIcon:t,eGroupOpenedIcon:n,eColumnGroupIcons:i}=this;t.appendChild(Ll("columnSelectClosed",e,null)),n.appendChild(Ll("columnSelectOpen",e,null));let r=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(t,{click:r}),this.addManagedElementListeners(n,{click:r});let o=new oa(i,!0);this.addManagedListeners(o,{tap:r}),this.addDestroyFunc(o.destroy.bind(o))}onLabelClicked(){let e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){let e=[],t=n=>{for(let i of n)i.passesFilter&&(i.group?t(i.children):e.push(i.column))};return t(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&oZ(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){let{cbSelect:e,focusWrapper:t,displayName:n}=this,i=this.getLocaleTextFunc(),r=i("ariaColumnGroup","Column Group"),o=e.getValue(),s=o===void 0?i("ariaIndeterminate","indeterminate"):o?i("ariaVisible","visible"):i("ariaHidden","hidden"),a=i("ariaToggleVisibility","Press SPACE to toggle visibility");Ut(t,`${n} ${r}`),e.setInputAriaLabel(`${a} (${s})`),op(t,e.getInputElement().id)}onColumnStateChanged(){let e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;let n=this.cbSelect;n.setValue(e),n.setReadOnly(t),this.toggleCss("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){let e=this.beans.colModel.isPivotMode(),t=this.getVisibleLeafColumns(),n=0,i=0;for(let r of t)(e||!r.getColDef().lockVisible)&&(this.isColumnChecked(r,e)?n++:i++);if(!(n>0&&i>0))return n>0}workOutReadOnlyValue(){let e=this.beans.colModel.isPivotMode(),t=0;for(let n of this.columnGroup.getLeafColumns())e?n.isAnyFunctionAllowed()&&t++:n.getColDef().lockVisible||t++;return t===0}isColumnChecked(e,t){if(t){let n=e.isPivotActive(),i=e.isRowGroupActive(),r=e.isValueActive();return n||i||r}return e.isVisible()}onExpandOrContractClicked(){let e=this.modelItem,t=e.expanded;e.expanded=!t}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){let e=this.modelItem.expanded;Ie(this.eGroupClosedIcon,!e),Ie(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){Fi(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){let t=this.cbSelect,n=t.getValue();!t.isReadOnly()&&(e&&!n||!e&&n)&&t.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},cL=e=>Qn(e)?e.getLeafColumns():e?[e]:[],aPe=(e,t,n,i)=>{if(!n||!t)return null;let r=e.colModel.getCols(),o=r.indexOf(n),s=i?o:o+1,a=lPe(r,t,s);return s-a},lPe=(e,t,n)=>{if(!t)return 0;let i=t[0],r=t.length;return e.indexOf(i)<n?r:0},EK=(e,t,n)=>e.get("suppressMovableColumns")||t.colModel.isPivotMode()?!0:!!n.find(({colDef:o})=>!!o.suppressMovable||!!o.lockPosition),DK=(e,t,n)=>{if(!n)return;let{component:i}=n,r=null,o=n.position==="top";if(i instanceof uZ?(r=i.getColumns()[0],o=!0):i&&(r=i.column),!r)return;let s=aPe(e,t,r,o);s!=null&&e.colMoves?.moveColumns(t,s,"toolPanelUi")},cPe=e=>e.column,dPe={tag:"div",cls:"ag-column-select-column",children:[{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},uPe=class extends pe{constructor(e,t,n,i){super(),this.modelItem=e,this.allowDragging=t,this.groupsExist=n,this.focusWrapper=i,this.eLabel=q,this.cbSelect=q,this.processingColumnStateChange=!1;let{column:r,depth:o,displayName:s}=e;this.column=r,this.columnDepth=o,this.displayName=s}postConstruct(){this.setTemplate(dPe,[mo]);let{beans:e,cbSelect:t,displayName:n,eLabel:i,columnDepth:r,groupsExist:o,column:s,gos:a,focusWrapper:l}=this,c=$e("columnDrag",e);this.eDragHandle=c,c.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");let d=t.getGui(),u=t.getInputElement();d.after(c),u.setAttribute("tabindex","-1"),i.textContent=n,o&&this.addCss("ag-column-select-add-group-indent"),this.addCss(`ag-column-select-indent-${r}`),this.getGui().style.setProperty("--ag-indentation-level",String(r)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"columnToolPanelColumn",shouldDisplayTooltip:lp(a,()=>i),getAdditionalParams:()=>({colDef:s.getColDef()})})),this.setupDragging();let h=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:h}),this.addManagedListeners(s,{columnValueChanged:h,columnPivotChanged:h,columnRowGroupChanged:h,visibleChanged:h}),this.addManagedListeners(l,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)});let p=new oa(l);this.addManagedListeners(p,{longTap:g=>this.onContextMenu(g.touchStart)}),this.addDestroyFunc(p.destroy.bind(p)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(i,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();let f=I_(s.getColDef(),a,s,null);for(let g of f)this.toggleCss(g,!0)}getColumn(){return this.column}setupTooltip(){let e=()=>this.tooltipFeature?.setTooltipAndRefresh(this.column.getColDef().headerTooltip);e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){let{column:t,gos:n}=this;if(n.get("functionsReadOnly"))return;let i=this.createBean(new dZ(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}handleKeyDown(e){e.key===$.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;let e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&sZ(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){let{cbSelect:e,focusWrapper:t,displayName:n}=this,i=this.getLocaleTextFunc(),r=i("ariaColumn","Column"),o=e.getValue()?i("ariaVisible","visible"):i("ariaHidden","hidden"),s=i("ariaToggleVisibility","Press SPACE to toggle visibility");Ut(t,`${n} ${r}`),this.cbSelect.setInputAriaLabel(`${s} (${o})`),op(t,e.getInputElement().id)}setupDragging(){let e=this.eDragHandle;if(!this.allowDragging){Ie(e,!1);return}let t=this.beans,{gos:n,eventSvc:i,dragAndDrop:r}=t,o=!n.get("suppressDragLeaveHidesColumns"),s={type:vo.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>o?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{o=!n.get("suppressDragLeaveHidesColumns"),i.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{i.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:a=>{o&&aZ(t,{columns:[this.column],visibleState:a?.visibleState,pivotState:a?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{o&&this.onChangeCommon(!1)}};r.addDragSource(s,!0),this.addDestroyFunc(()=>r.removeDragSource(s))}createDragItem(){let e=this.column.getColId(),t={[e]:this.column.isVisible()},n={[e]:lZ(this.column)};return{columns:[this.column],visibleState:t,pivotState:n}}onColumnStateChanged(){this.processingColumnStateChange=!0;let e=this.beans.colModel.isPivotMode();if(e){let i=this.column.isAnyFunctionActive();this.cbSelect.setValue(i)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,n=!0;if(e){let i=this.gos.get("functionsReadOnly"),r=!this.column.isAnyFunctionAllowed();t=!i&&!r,n=t}else{let{enableRowGroup:i,enableValue:r,lockPosition:o,suppressMovable:s,lockVisible:a}=this.column.getColDef(),l=!!i||!!r,c=!!o||!!s;t=!a,n=l||!c}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n),this.toggleCss("ag-column-select-column-readonly",!n&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){let t=this.cbSelect;e!==t.getValue()&&(t.isReadOnly()||t.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){X(158)}},hPe=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},pPe="ag-column-select-list",fPe=class extends pe{constructor(){super({tag:"div",cls:pPe,role:"presentation"}),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1,this.skipRefocus=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[];for(let e of this.destroyColumnItemFuncs)e();this.destroyColumnItemFuncs=[]}init(e,t,n){this.params=e;let{suppressSyncLayoutWithGrid:i,contractColumnSelection:r,suppressColumnMove:o}=e;this.allowDragging=t,this.eventType=n,i||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});let s=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:s,columnPivotModeChanged:s,columnRowGroupChanged:s,columnValueChanged:s,columnVisible:s,newColumnsLoaded:s}),this.expandGroupsByDefault=!r;let a=o||i,l=this.createManagedBean(new B0({cssIdentifier:"column-select",ariaRole:"tree",moveItemCallback:(c,d)=>{a||this.moveItems(c,d)}}));this.virtualList=l,this.appendChild(l.getGui()),l.setComponentCreator((c,d)=>(sp(d,c.depth+1),this.createComponentFromItem(c,d))),this.colModel.ready&&this.onColumnsChanged(),!a&&this.createItemDragFeature()}createItemDragFeature(){let{gos:e,beans:t,virtualList:n}=this;this.createManagedBean(new zY(this,n,{dragSourceType:vo.ToolPanel,addListeners:(i,r,o)=>{i.addManagedEventListeners({columnPanelItemDragStart:r,columnPanelItemDragEnd:o})},getCurrentDragValue:i=>cPe(i),isMoveBlocked:i=>EK(e,t,cL(i)),getNumRows:i=>i.getDisplayedColsList().length,moveItem:(i,r)=>DK(t,cL(i),r)}))}moveItems(e,t){let{gos:n,beans:i}=this,{modelItem:r}=e,{group:o,columnGroup:s,column:a,expanded:l}=r,c=cL(o?s:a);if(EK(n,i,c))return;let d=this.displayedColsList.indexOf(r),u=t?-1:1,h=0;if(t){let f=e.columnDepth>0?a.getParent()?.getChildren():null;f?.length&&a===f[0]&&(h=-1)}else o&&(h=l?r.children.length:0);let p=Math.min(Math.max(d+h+u,0),this.displayedColsList.length-1);this.skipRefocus=!0,DK(i,c,{rowIndex:p,position:t?"top":"bottom",component:this.virtualList.getComponentAt(p)}),this.focusRowIfAlive(p-h).then(()=>{this.skipRefocus=!1})}createComponentFromItem(e,t){let n=this.allowDragging;if(e.group){let r=new uZ(e,n,this.eventType,t);return this.createBean(r),r}let i=new uPe(e,n,this.groupsExist,t);return this.createBean(i),i}onColumnsChanged(){let e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);let t=this.getExpandedStates(),n=this.colModel.isPivotMode();!e.suppressSyncLayoutWithGrid&&!n?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){let e={};if(this.isInitialState){let{expandedGroupIds:t}=this.params.initialState;for(let n of t)e[n]=!0;return e}return this.allColsTree?(this.forEachItem(t=>{if(!t.group)return;let n=t.columnGroup;n&&(e[n.getId()]=t.expanded)}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;let{isInitialState:t}=this;this.forEachItem(n=>{if(!n.group)return;let i=n.columnGroup;if(i){let r=e[i.getId()];(r!=null||t)&&(n.expanded=!!r)}})}buildTreeFromWhatGridIsDisplaying(){rZ(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){let t=iZ(this.colModel,e);this.buildListModel(t),this.groupsExist=e.some(n=>n&&typeof n.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){let e=this.colModel;this.buildListModel(e.getColDefColTree()),this.groupsExist=!!e.colDefCols?.treeDepth}buildListModel(e){let t=this.onColumnExpanded.bind(this),n=a=>{a.addEventListener("expandedChanged",t);let l=a.removeEventListener.bind(a,"expandedChanged",t);this.destroyColumnItemFuncs.push(l)},i=this.beans.colNames,r=(a,l,c)=>{for(let d of a)Qn(d)?o(d,l,c):s(d,l,c)},o=(a,l,c)=>{if(a.getColGroupDef()?.suppressColumnsToolPanel)return;if(a.isPadding()){r(a.getChildren(),l,c);return}let h=i.getDisplayNameForProvidedColumnGroup(null,a,"columnToolPanel"),p=new SK(h,a,l,!0,this.expandGroupsByDefault);c.push(p),n(p),r(a.getChildren(),l+1,p.children)},s=(a,l,c)=>{if(a.getColDef()?.suppressColumnsToolPanel)return;let u=i.getDisplayNameForColumn(a,"columnToolPanel");c.push(new SK(u,a,l))};this.destroyColumnTree(),r(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];let e=i=>{i.passesFilter&&(this.displayedColsList.push(i),i.group&&i.expanded&&i.children.forEach(e))},t=this.virtualList;this.allColsTree.forEach(e),t.setModel(new hPe(this.displayedColsList));let n=null;this.skipRefocus||(n=t.getLastFocusedRow()),t.refresh(),n!=null&&this.focusRowIfAlive(n),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){let e=this.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),n=e("columns","Columns"),i=this.displayedColsList.length;Ut(this.virtualList.getAriaElement(),`${t} ${i} ${n}`)}focusRowIfAlive(e){return e===-1?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}forEachItem(e){let t=i=>{for(let r of i)e(r),r.group&&t(r.children)},n=this.allColsTree;n&&t(n)}doSetExpandedAll(e){this.forEachItem(t=>{t.group&&(t.expanded=e)})}setGroupsExpanded(e,t){if(!t){this.doSetExpandedAll(e);return}let n=[];this.forEachItem(r=>{if(!r.group)return;let o=r.columnGroup.getId();t.indexOf(o)>=0&&(r.expanded=e,n.push(o))});let i=t.filter(r=>!n.includes(r));i.length>0&&X(157,{unrecognisedGroupIds:i})}getExpandState(){let e=0,t=0;return this.forEachItem(n=>{n.group&&(n.expanded?e++:t++)}),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){oZ(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0,n=this.colModel.isPivotMode();if(this.forEachItem(i=>{if(i.group||!i.passesFilter)return;let r=i.column,o=r.getColDef(),s;if(n){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;s=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(o.lockVisible)return;s=r.isVisible()}s?e++:t++}),!(e>0&&t>0))return!(e===0||t>0)}setFilterText(e){this.filterText=_e(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){let e=n=>{if(!_e(this.filterText))return!0;let i=n.displayName;return i==null||i.toLowerCase().indexOf(this.filterText)!==-1},t=(n,i)=>{let r=!1;if(n.group){let s=e(n);for(let a of n.children){let l=t(a,s||i);l&&(r=l)}}let o=i||r?!0:e(n);return n.passesFilter=o,o};for(let n of this.allColsTree)t(n,!1)}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){let e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;let e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){let e=[];return this.allColsTree&&this.forEachItem(t=>{t.group&&t.expanded&&e.push(t.columnGroup.getId())}),e}},gPe={selector:"AG-PRIMARY-COLS-LIST",component:fPe},mPe={tag:"div",cls:"ag-column-select",children:[{tag:"ag-primary-cols-header",ref:"primaryColsHeaderPanel"},{tag:"ag-primary-cols-list",ref:"primaryColsListPanel"}]},hZ=class extends pe{constructor(){super(mPe,[YTe,gPe]),this.primaryColsHeaderPanel=q,this.primaryColsListPanel=q,this.registerCSS(WTe)}init(e,t,n){let{primaryColsHeaderPanel:i,primaryColsListPanel:r}=this;i.init(t);let o=t.suppressColumnFilter,s=t.suppressColumnSelectAll;t.suppressColumnExpandAll&&o&&s&&i.setDisplayed(!1),this.addManagedListeners(r,{groupExpanded:l=>{i.setExpandState(l.state),t.onStateUpdated()},selectionChanged:l=>i.setSelectionState(l.state)}),r.init(t,e,n),this.addManagedListeners(i,{expandAll:r.doSetExpandedAll.bind(r,!0),collapseAll:r.doSetExpandedAll.bind(r,!1),selectAll:r.doSetSelectedAll.bind(r,!0),unselectAll:r.doSetSelectedAll.bind(r,!1),filterChanged:l=>r.setFilterText(l.filterText)}),this.positionableFeature=this.createManagedBean(new _y(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},vPe=".ag-column-panel{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ag-pivot-mode-panel{display:flex;height:var(--ag-header-height)}.ag-pivot-mode-select{align-items:center;display:flex}:where(.ag-ltr) .ag-pivot-mode-select{margin-left:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-pivot-mode-select{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-column-panel-column-select{border-bottom:var(--ag-tool-panel-separator-border)}.ag-column-panel-column-select:where(:nth-child(n+2 of :not(.ag-hidden))){border-top:var(--ag-tool-panel-separator-border)}:where(.ag-column-panel) .ag-column-drop-vertical{flex:1 1 0px;min-height:50px;&:where(:not(.ag-last-column-drop)){border-bottom:var(--ag-tool-panel-separator-border)}}",CPe=class extends pe{constructor(){super({tag:"div",cls:"ag-column-panel"}),this.initialised=!1,this.childDestroyFuncs=[],this.registerCSS(vPe)}wireBeans(e){this.colToolPanelFactory=e.colToolPanelFactory}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){let t=Oe(this.gos,{suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1}),n=T(T({},t),e);this.params=n;let{childDestroyFuncs:i,colToolPanelFactory:r,gos:o}=this,s=o.isModuleRegistered("SharedPivot"),a=s||o.isModuleRegistered("SharedRowGrouping");!n.suppressPivotMode&&r&&s&&(this.pivotModePanel=r.createPivotModePanel(this,i));let l=this.createBean(new hZ);if(this.primaryColsPanel=l,i.push(()=>this.destroyBean(this.primaryColsPanel)),l.init(!0,n,"toolPanelUi"),l.addCss("ag-column-panel-column-select"),this.appendChild(l),r){!n.suppressRowGroups&&a&&(this.rowGroupDropZonePanel=r.createRowGroupPanel(this,i)),!n.suppressValues&&a&&(this.valuesDropZonePanel=r.createValuesPanel(this,i)),!n.suppressPivots&&s&&(this.pivotDropZonePanel=r.createPivotPanel(this,i)),this.setLastVisible();let[c]=this.addManagedEventListeners({columnPivotModeChanged:()=>{this.resetChildrenHeight(),this.setLastVisible()}});i.push(()=>c())}this.initialised=!0}setPivotModeSectionVisible(e){let t=this.colToolPanelFactory;t&&(this.pivotModePanel=t.setPanelVisible(this.pivotModePanel,e,t.createPivotModePanel.bind(t,this,this.childDestroyFuncs,!0)),this.setLastVisible())}setRowGroupsSectionVisible(e){let t=this.colToolPanelFactory;t&&(this.rowGroupDropZonePanel=t.setPanelVisible(this.rowGroupDropZonePanel,e,t.createRowGroupPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setValuesSectionVisible(e){let t=this.colToolPanelFactory;t&&(this.valuesDropZonePanel=t.setPanelVisible(this.valuesDropZonePanel,e,t.createValuesPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setPivotSectionVisible(e){let t=this.colToolPanelFactory;t&&(this.pivotDropZonePanel=t.setPanelVisible(this.pivotDropZonePanel,e,t.createPivotPanel.bind(t,this,this.childDestroyFuncs)),this.pivotDropZonePanel?.setDisplayed(e),this.setLastVisible())}setResizers(){for(let e of[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel]){if(!e)continue;let t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}}setLastVisible(){let e=this.getGui(),t=Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop"));for(let r of t)r.classList.remove("ag-last-column-drop");let n=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=Qe(n);i&&i.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){let t=this.getGui().children;for(let n=0;n<t.length;n++){let{style:i}=t[n];i.removeProperty("height"),i.removeProperty("flex")}}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){let e=this.childDestroyFuncs;for(let t of e)t();e.length=0,at(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}},bPe=".ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{align-items:center;background-color:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;color:var(--ag-column-drop-cell-text-color);display:flex;padding:calc(var(--ag-spacing)*.25);position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}:where(.ag-drag-handle){color:var(--ag-column-drop-cell-drag-handle-color)}}:where(.ag-ltr) .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}:where(.ag-rtl) .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-text{flex:1 1 auto;margin:0 var(--ag-spacing);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;min-height:75px;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none;padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing);position:relative;>*{flex:none}}:where(.ag-column-drop-empty) .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-cell-button{cursor:pointer;min-width:0;opacity:.75;&:hover{opacity:1}}:where(.ag-ltr) .ag-column-drop-cell-button{margin-right:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-button{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-ltr) .ag-column-drop-cell-drag-handle{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-drag-handle{margin-right:calc(var(--ag-spacing)/4)}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;white-space:nowrap}:where(.ag-ltr) .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-select-agg-func-popup{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}}:where(.ag-ltr) .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-left:solid var(--ag-border-width) var(--ag-border-color)}";function _K(e,t,n){e==null||t==null||e.splice(n,0,...t)}var wPe={tag:"div",cls:"ag-unselectable",role:"presentation"},pZ=class extends pe{constructor(e){super(wPe),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=bt({tag:"div"}),this.addElementClasses(this.ePillDropList,"list"),this.registerCSS(bPe)}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){let{dropZoneTarget:t,dragSource:n}=e;return t.contains(n.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){for(let e of this.guiDestroyFunctions)e();this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,at(this.getGui()),at(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new Gu(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new _y(this.getGui()),this.createManagedBean(this.positionableFeature),this.refreshGui(),Ut(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){let t=Rs(this.getFocusableElement(),null,!0),n=t.length;if(n===0)return;let{shiftKey:i}=e,r=wt(this.beans),o=r===t[0],s=r===Qe(t);n===1||o&&i||s&&!i||t[i?0:n-1].focus()}onKeyDown(e){let{key:t}=e,n=!this.horizontal,i=t===$.DOWN,r=t===$.UP;if(!n){let o=this.gos.get("enableRtl");i=!o&&t===$.RIGHT||o&&t===$.LEFT,r=!o&&t===$.LEFT||o&&t===$.RIGHT}if(!(!i&&!r))if(e.preventDefault(),e.shiftKey)this.moveFocusedItem(r);else{let o=Wi(this.beans,this.getFocusableElement(),!1,r);o&&o.focus()}}moveFocusedItem(e){let t=this.getFocusedItem();if(t===-1)return;let n=e?-1:1;if(!this.normalizeAndUpdateInsertIndex(t,t+n))return;let r=this.childPillComponents[t];if(!r.isMovable())return;let o=r.getItem();this.focusItemAtIndex(this.insertIndex),this.rearrangeItems([o],!0)}addElementClasses(e,t){t=t?`-${t}`:"";let n=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${t}`,`ag-column-drop-${n}${t}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDrop?.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){let t=this.getNewInsertIndex(e);return t<0?!1:this.normalizeAndUpdateInsertIndex(this.insertIndex,t)}normalizeAndUpdateInsertIndex(e,t){let n=this.minimumAllowedNewInsertIndex(),i=Math.max(n,t),r=i!==e;return r&&(this.insertIndex=i),r}getNewInsertIndex(e){let t=e.event,n=this.horizontal?t.clientX:t.clientY,i=this.childPillComponents.map(o=>o.getGui().getBoundingClientRect()),r=i.findIndex(o=>this.horizontal?o.right>n&&o.left<n:o.top<n&&o.bottom>n);if(r===-1){let o=this.gos.get("enableRtl");return i.every(l=>n>(this.horizontal?l.right:l.bottom))?o&&this.horizontal?0:this.childPillComponents.length:i.every(l=>n<(this.horizontal?l.left:l.top))?o&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=r?r+1:r}checkDragStartedBySelf(e){this.state==="notDragging"&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){let t=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";let n=t.filter(r=>this.isItemDroppable(r,e)),i=n.every(r=>this.childPillComponents.map(o=>o.getItem()).indexOf(r)!==-1);if(n.length!==0){if(this.potentialDndItems=n,i){this.state="notDragging";return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return!!this.potentialDndItems?.length}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state==="rearrangeItems"){let t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragCancel(e){this.isPotentialDndItems()&&(this.state==="newItemsIn"&&this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&(this.state==="newItemsIn"?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){let t=this.getExistingItems().filter(n=>!e.includes(n));this.updateItems(t)}addItems(e){if(!e)return;let t=this.getExistingItems().slice(),n=e.filter(i=>t.indexOf(i)<0);_K(t,n,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e,t){let n;return t?n=this.getExistingItems().filter(i=>e.indexOf(i)===-1):n=this.getNonGhostItems().slice(),_K(n,e,this.insertIndex),Hr(n,this.getExistingItems())?!1:(this.updateItems(n),!0)}refreshGui(){let e=0;this.horizontal||(e=this.ePillDropList.scrollTop);let t=this.resizeEnabled,n=this.getFocusedItem(),{eGridDiv:i}=this.beans,r=S0(),o=null;r&&(o=Wi(this.beans,i)??Wi(this.beans,i,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),e!==0&&(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),r&&this.restoreFocus(n,o)}getFocusedItem(){let e=this.getGui(),t=wt(this.beans);return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1}focusItemAtIndex(e){let t=this.getGui(),i=Array.from(t.querySelectorAll(".ag-column-drop-cell"))[e];i&&i.focus({preventScroll:!0})}restoreFocus(e,t){let n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;i.length===0&&t.focus();let r=Math.min(i.length-1,e),o=i[r];o&&o.focus()}focusList(e){let t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){let e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(t=>!this.potentialDndItems.includes(t)):e}addItemsToGui(){let t=this.getNonGhostItems().map(n=>this.createItemComponent(n,!1));if(this.isPotentialDndItems()){let n=this.potentialDndItems.map(i=>this.createItemComponent(i,!0));this.insertIndex>=t.length?t.push(...n):t.splice(this.insertIndex,0,...n)}this.appendChild(this.ePillDropList),t.forEach((n,i)=>{i>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(n.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){let{childPillComponents:e,ePillDropList:t}=this,n=e.length;Jn(t,n===0?"presentation":"listbox");for(let i=0;i<n;i++){let o=e[i].getGui();mg(o,i+1),gg(o,n)}}createItemComponent(e,t){let n=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return n.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(n),this.guiDestroyFunctions.push(()=>this.destroyBean(n)),t||this.childPillComponents.push(n),n}addIconAndTitleToGui(){let{title:e,icon:t}=this.params;if(!e||!t)return;let n=bt({tag:"div"});if(o_(n,!0),this.addElementClasses(n,"title-bar"),this.addElementClasses(t,"icon"),this.toggleCss("ag-column-drop-empty",this.isExistingItemsEmpty()),n.appendChild(t),!this.horizontal){let i=bt({tag:"span"});this.addElementClasses(i,"title"),i.textContent=e,n.appendChild(i)}this.appendChild(n)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){let{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;let t=bt({tag:"span"});t.textContent=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){let t=this.gos.get("enableRtl"),n=$e(t?"panelDelimiterRtl":"panelDelimiter",this.beans);this.addElementClasses(n,"cell-separator"),e.appendChild(n)}}},yPe={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},fZ=class extends pe{constructor(e,t,n,i,r){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=n,this.template=i,this.agComponents=r,this.eText=q,this.eDragHandle=q,this.eButton=q}postConstruct(){this.setTemplate(this.template??yPe,this.agComponents);let e=this.getGui(),{beans:t,eDragHandle:n,eText:i,eButton:r}=this;this.addElementClasses(e),this.addElementClasses(n,"drag-handle"),this.addElementClasses(i,"text"),this.addElementClasses(r,"button"),n.appendChild($e("columnDrag",t)),r.appendChild($e("cancel",t)),this.tooltipFeature=this.createOptionalManagedBean(t.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui()})),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){let e=this.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),Ut(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){let n=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(n)}}setupTooltip(){let e=()=>this.tooltipFeature?.setTooltipAndRefresh(this.getTooltip());e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){let{beans:{dragAndDrop:e},eDragHandle:t}=this,n=this.createGetDragItem(),i=this.getDefaultIconName(),r={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>i,getDragItem:n,dragItemName:this.getDisplayName()};e?.addDragSource(r,!0),this.addDestroyFunc(()=>e?.removeDragSource(r))}setupComponents(){this.eText.textContent=this.getDisplayValue(),this.setupRemove(),this.ghost&&this.addCss("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){Ie(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();let e={type:"columnRemove"};this.addGuiEventListener("keydown",n=>this.onKeyDown(n)),this.addManagedElementListeners(this.eButton,{click:n=>{this.dispatchLocalEvent(e),n.stopPropagation()}});let t=new oa(this.eButton);this.addManagedListeners(t,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===$.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}addElementClasses(e,t){t=t?`-${t}`:"";let n=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${t}`,`ag-column-drop-${n}-cell${t}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}},SPe=class extends fZ{constructor(e,t,n,i,r){super(t,n,r),this.column=e,this.dropZonePurpose=i,this.eSortIndicator=q,this.popupShowing=!1}postConstruct(){let{sortSvc:e,colNames:t}=this.beans;this.template={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:void 0,{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},e&&(this.agComponents=[e.getSortIndicatorSelector()]),this.displayName=t.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),e&&(this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}})),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){let n=this.gos.get("rowGroupPanelSuppressSort"),i=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!i){let r=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(r)}if(this.isGroupingZone()&&this.column.isSortable()&&!n){let r=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(r)}super.addAdditionalAriaInstructions(e,t)}isMovable(){return this.isDraggable()}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){let e=this.getLocaleTextFunc(),{name:t,aggFuncName:n}=this.getColumnAndAggFuncName(),i=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),r={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},o=this.column.getSort(),s=this.gos.get("rowGroupPanelSuppressSort");return[n&&`${n}${i}`,t,this.isGroupingZone()&&!s&&o&&`, ${r[o]}`].filter(a=>!!a).join("")}getColumnAndAggFuncName(){let e=this.displayName,t="";if(this.isAggregationZone()){let n=this.column.getAggFunc(),i=typeof n=="string"?n:"agg";t=this.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:t}}setupSort(){if(!(!this.column.isSortable()||!this.isGroupingZone())&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);let e=t=>{t.preventDefault(),this.beans.sortSvc.progressSortFromEvent(this.column,t)};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",t=>{t.key===$.ENTER&&this.isGroupingZone()&&e(t)})}}getDefaultIconName(){return"hide"}createGetDragItem(){let{column:e}=this;return()=>{let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e),e.key===$.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){let{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?`${t}(${e})`:e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;let{aggFuncSvc:e,popupSvc:t}=this.beans,n=new B0({cssIdentifier:"select-agg-func"}),i=e.getFuncNames(this.column),r=this.getGui(),o=n.getGui();n.setModel({getRow:function(h){return i[h]},getRowCount:function(){return i.length}}),this.createBean(n);let s=bt({tag:"div",cls:"ag-select-agg-func-popup"});s.style.top="0px",s.style.left="0px",s.appendChild(o),s.style.width=`${r.clientWidth}px`;let[a]=this.addManagedElementListeners(s,{focusout:h=>{!s.contains(h.relatedTarget)&&d&&d.hideFunc()}}),l=h=>{this.destroyBean(n),this.popupShowing=!1,h?.key==="Escape"&&r.focus(),a&&a()},c=this.getLocaleTextFunc(),d=t.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:l,ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});d&&n.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),n.addGuiEventListener("keydown",h=>{if(h.key===$.ENTER||h.key===$.SPACE){let p=n.getLastFocusedRow();if(p==null)return;let f=n.getComponentAt(p);f&&f.selectItem()}}),t.positionPopupByComponent({type:"aggFuncSelect",eventSource:r,ePopup:s,keepWithinBounds:!0,additionalParams:{column:this.column},position:"under"}),n.refresh();let u=i.findIndex(h=>h===this.column.getAggFunc());u===-1&&(u=0),n.focusRow(u)}createAggSelect(e,t){let n=()=>{e(),this.getGui().focus(),this.beans.valueColsSvc?.setColumnAggFunc?.(this.column,t,"toolPanelDragAndDrop")},i=this.getLocaleTextFunc(),r=t.toString(),o=i(r,r);return new xPe(n,o)}isGroupingAndLocked(){return this.isGroupingZone()&&Yy(this.column,this.beans)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}getDragSourceType(){return vo.ToolPanel}destroy(){super.destroy(),this.column=null}},xPe=class extends pe{constructor(e,t){super({tag:"div",cls:"ag-select-agg-func-item",children:t}),this.selectItem=e,this.addGuiEventListener("click",this.selectItem)}},QL=class extends pZ{constructor(e,t){super(e),this.dropZonePurpose=t,this.addElementClasses(this.getGui(),this.dropZonePurpose.toLowerCase())}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){return e.columns??[]}isInterestedIn(e){return e===vo.HeaderCell||e===vo.ToolPanel}minimumAllowedNewInsertIndex(){let{gos:e,rowGroupColsSvc:t}=this.beans,n=e.get("groupLockGroupColumns"),i=t?.columns.length??0;return n===-1?i:Math.min(n,i)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&b_(this.gos,!0)&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){let i=e.dragSource.getDragItem().columns;this.setColumnsVisible(i,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){let n=e.dragSource.getDragItem();this.setColumnsVisible(n.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,n){if(e){let i=e.filter(r=>!r.getColDef().lockVisible);this.beans.colModel.setColsVisible(i,t,n)}}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}createPillComponent(e,t,n,i){return new SPe(e,t,n,this.dropZonePurpose,i)}},gZ=class extends QL{constructor(e){super(e,"pivot")}postConstruct(){let e=this.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");super.init({icon:$e("pivotPanel",this.beans,null),emptyMessage:t,title:n}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){let e=this.beans.colModel,t=e.isPivotMode();if(this.horizontal)switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":{let n=e.isPivotActive();this.setDisplayed(t&&n);break}default:this.setDisplayed(!1);break}else this.setDisplayed(t)}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t))}updateItems(e){this.beans.pivotColsSvc?.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){return this.beans.pivotColsSvc?.columns??[]}},mZ=class extends QL{constructor(e){super(e,"rowGroup")}postConstruct(){let e=this.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");super.init({icon:$e("rowGroupPanel",this.beans,null),emptyMessage:t,title:n}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()||e.colDef.showRowGroup?!1:e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t))}updateItems(e){this.beans.rowGroupColsSvc?.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){return this.beans.rowGroupColsSvc?.columns??[]}},EPe=class extends QL{constructor(e){super(e,"aggregation")}postConstruct(){let e=this.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");super.init({icon:$e("valuePanel",this.beans,null),emptyMessage:t,title:n}),this.addManagedEventListeners({columnValueChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getIconName(){return this.isPotentialDndItems()?"aggregate":"notAllowed"}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t))}updateItems(e){this.beans.valueColsSvc?.setColumns(e,"toolPanelUi")}getExistingItems(){return this.beans.valueColsSvc?.columns??[]}},DPe={tag:"div",cls:"ag-pivot-mode-panel",children:[{tag:"ag-toggle-button",ref:"cbPivotMode",cls:"ag-pivot-mode-select"}]},_Pe=class extends pe{constructor(){super(...arguments),this.cbPivotMode=q}postConstruct(){this.setTemplate(DPe,[C$]);let e=this.cbPivotMode,{colModel:t,ctrlsSvc:n,gos:i}=this.beans;e.setValue(t.isPivotMode());let r=this.getLocaleTextFunc();e.setLabel(r("pivotMode","Pivot Mode"));let o=()=>{let a=!!e.getValue();if(a!==t.isPivotMode()){i.updateGridOptions({options:{pivotMode:a},source:"toolPanelUi"});for(let l of n.getHeaderRowContainerCtrls())l.refresh()}},s=()=>{let a=t.isPivotMode();e.setValue(a)};this.addManagedListeners(e,{fieldValueChanged:o}),this.addManagedEventListeners({newColumnsLoaded:s,columnPivotModeChanged:s})}},APe=class extends K{constructor(){super(...arguments),this.beanName="colToolPanelFactory"}setPanelVisible(e,t,n){return e?e.setDisplayed(t):t&&(e=n()),e}createRowGroupPanel(e,t){return this.createPanel(e,t,new mZ(!1))}createValuesPanel(e,t){return this.createPanel(e,t,new EPe(!1))}createPivotPanel(e,t){return this.createPanel(e,t,new gZ(!1))}createPivotModePanel(e,t,n){return this.createPanel(e,t,new _Pe,n)}createPanel(e,t,n,i){return n=e.createBean(n),t.push(()=>e.destroyBean(n)),i?e.prependChild(n):e.appendChild(n),n}},RPe={moduleName:"ColumnsToolPanel",version:Lt,beans:[APe],userComponents:{agColumnsToolPanel:CPe},icons:{ensureColumnVisible:"column-arrow",columnsToolPanel:"columns",menuAddRowGroup:"group",menuRemoveRowGroup:"group",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},dependsOn:[ti,_A,Iy,Nl,ua,AA]},FPe=class extends K{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){let t=this.beans,n=t.chartSvc,i=e==="pivotChart";if(!n)return null;let r=this.getLocaleTextFunc.bind(this),o=i?new MPe(t,n,r):new IPe(t,n,r),s=n.isEnterprise(),a=o.getMenuItem();if(a?.subMenu&&!s){let c=d=>ce(T({},d),{subMenu:d.subMenu?.filter(u=>!u._enterprise).map(u=>c(u))});a=c(a)}let l=this.gos.get("chartToolPanelsDef")?.settingsPanel?.chartGroupsDef;return l&&(a=this.filterAndOrderChartMenu(a,l,o.getConfigLookup())),this.cleanInternals(a)}cleanInternals(e){if(!e)return e;let t=n=>{delete n?._key,delete n?._enterprise;for(let i of n?.subMenu??[])t(i);return n};return t(e)}buildLookup(e){let t={},n=i=>{if(t[i._key]=i,i.subMenu)for(let r of i.subMenu)n(r)};return n(e),t}filterAndOrderChartMenu(e,t,n){let i=this.buildLookup(e),r=ce(T({},e),{subMenu:[]});for(let o of Object.keys(t)){let s=t[o],a=n[o];if(a===null)continue;if(a==null){X(173,{group:o});continue}let l=i[a._key];if(l)if(l.subMenu){let c=s.map(d=>{let u=a[d];if(u==null){X(174,{group:o,chartType:d});return}return i[u]}).filter(d=>d!==void 0);c.length>0&&(l.subMenu=c,r.subMenu?.push(l))}else r.subMenu?.push(l)}return r.subMenu?.length==0?null:r}},MPe=class{constructor(e,t,n){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=n}getMenuItem(){let e=this.getLocaleTextFunc(),t=(n,i,r,o,s=!1)=>({name:e(n,i+"\u200E"),action:()=>this.chartSvc.createPivotChart({chartType:r}),_key:o,_enterprise:s});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie","pie","pivotPie"),t("donut","Donut","donut","pivotDonut")]},{_key:"pivotLineChart",name:e("lineChart","Line"),subMenu:[t("lineChart","Line","line","pivotLineChart"),t("stackedLine","Stacked","stackedLine","pivotStackedLine"),t("normalizedLine","100% Stacked","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("areaChart","Area","area","pivotArea"),t("stackedArea","Stacked","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter","scatter","pivotScatter"),t("bubble","Bubble","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:e("statisticalChart","Statistical"),subMenu:[t("histogramChart","Histogram","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemapChart","Treemap","treemap","pivotTreemap",!0),t("sunburstChart","Sunburst","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel","funnel","pivotFunnel"),t("coneFunnel","Cone Funnel","coneFunnel","pivotConeFunnel"),t("pyramid","Pyramid","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column","areaColumnCombo","pivotAreaColumnCombo")]}],icon:$e("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},IPe=class{constructor(e,t,n){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=n}getMenuItem(){let e=this.getLocaleTextFunc(),t=(n,i,r,o,s=!1)=>({name:e(n,i),action:()=>this.chartSvc.createChartFromCurrentRange(r),_key:o,_enterprise:s});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie","pie","rangePie"),t("donut","Donut","donut","rangeDonut")],_key:"rangePieChart"},{name:e("lineChart","Line"),subMenu:[t("lineChart","Line","line","rangeLineChart"),t("stackedLine","Stacked","stackedLine","rangeStackedLine"),t("normalizedLine","100% Stacked","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:e("areaChart","Area"),subMenu:[t("areaChart","Area","area","rangeArea"),t("stackedArea","Stacked","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter","scatter","rangeScatter"),t("bubble","Bubble","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("polarChart","Polar"),subMenu:[t("radarLine","Radar Line","radarLine","rangeRadarLine"),t("radarArea","Radar Area","radarArea","rangeRadarArea"),t("nightingale","Nightingale","nightingale","rangeNightingale"),t("radialColumn","Radial Column","radialColumn","rangeRadialColumn"),t("radialBar","Radial Bar","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:e("statisticalChart","Statistical"),subMenu:[t("boxPlot","Box Plot","boxPlot","rangeBoxPlot",!0),t("histogramChart","Histogram","histogram","rangeHistogram",!1),t("rangeBar","Range Bar","rangeBar","rangeRangeBar",!0),t("rangeArea","Range Area","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemap","Treemap","treemap","rangeTreemap"),t("sunburst","Sunburst","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:e("specializedChart","Specialized"),subMenu:[t("heatmap","Heatmap","heatmap","rangeHeatmap"),t("waterfall","Waterfall","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:e("funnel","Funnel"),subMenu:[t("funnel","Funnel","funnel","rangeFunnel"),t("coneFunnel","Cone Funnel","coneFunnel","rangeConeFunnel"),t("pyramid","Pyramid","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:$e("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},TPe=class extends K{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,t,n,i){let r=e.createManagedBean(new hZ),o=i??t?.getColDef().columnChooserParams??{},{contractColumnSelection:s,suppressColumnExpandAll:a,suppressColumnFilter:l,suppressColumnSelectAll:c,suppressSyncLayoutWithGrid:d,columnLayout:u}=o;return r.init(!!n,Oe(this.gos,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!s,suppressColumnExpandAll:!!a,suppressColumnFilter:!!l,suppressColumnSelectAll:!!c,suppressSyncLayoutWithGrid:!!u||!!d,onStateUpdated:()=>{}}),"columnMenu"),u&&r.setColumnLayout(u),r}showColumnChooser({column:e,chooserParams:t,eventSource:n,headerPosition:i}){this.hideActiveColumnChooser();let r=this.createColumnSelectPanel(this,e,!0,t),o=this.getLocaleTextFunc(),s=this.beans,{visibleCols:a,focusSvc:l,menuUtils:c}=s,d=a.allCols.indexOf(e),u=e?l.focusedHeader??i??null:null;this.activeColumnChooserDialog=this.createBean(new EA({title:o("chooseColumns","Choose Columns"),component:r,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{Wi(s,r.getGui())?.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,e)},closedCallback:h=>{let p=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,e),e&&c.restoreFocusOnClose({column:e,headerPosition:u,columnIndex:d,eventSource:n},p,h,!0)},postProcessPopupParams:{type:"columnChooser",column:e,eventSource:n}})),this.activeColumnChooser=r}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:t??null})}},PPe={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",pinRowSubMenu:"PinnedRow",pinBottom:"PinnedRow",pinTop:"PinnedRow",unpinRow:"PinnedRow",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortAbsoluteAscending:"Sort",sortAbsoluteDescending:"Sort",sortUnSort:"Sort"};function kPe(e,t){let n=PPe[t];n&&e.assertModuleRegistered(n,`menu item '${t}'`)}var Rg="separator";function vZ(e,t){if(e)for(let n=e.length-2;n>=0;n--){let i=e[n]===t,r=e[n+1]===t;i&&r&&e.splice(n+1,1)}}var LPe={sortAscending:{fallback:"Sort Ascending",getSortDef:()=>({type:"default",direction:"asc"})},sortDescending:{fallback:"Sort Descending",getSortDef:()=>({type:"default",direction:"desc"})},sortAbsoluteAscending:{fallback:"Sort Absolute Ascending",getSortDef:()=>({type:"absolute",direction:"asc"})},sortAbsoluteDescending:{fallback:"Sort Absolute Descending",getSortDef:()=>({type:"absolute",direction:"desc"})},sortUnSort:{fallback:"Clear Sort",getSortDef:e=>({type:Ms(e.getSortDef()?.type),direction:null})}},OPe=class extends K{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,n,i,r){if(!e)return[];let o=[],s=this.getLocaleTextFunc(),{beans:a,gos:l}=this,{pinnedCols:c,colAutosize:d,aggFuncSvc:u,rowGroupColsSvc:h,colNames:p,colModel:f,clipboardSvc:g,expansionSvc:C,focusSvc:m,csvCreator:w,excelCreator:x,menuSvc:D,colChooserFactory:F,sortSvc:L,chartMenuItemMapper:V,valueColsSvc:B,pinnedRowModel:P}=a,U=(A,I,j,G)=>{switch(kPe(l,A),A){case"pinSubMenu":return c&&I?{name:s("pinColumn","Pin Column"),icon:$e("menuPin",a,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return c&&I?{name:s("pinLeft","Pin Left"),action:()=>c.setColsPinned([I],"left",G),checked:!!I&&I.isPinnedLeft()}:null;case"pinRight":return c&&I?{name:s("pinRight","Pin Right"),action:()=>c.setColsPinned([I],"right",G),checked:!!I&&I.isPinnedRight()}:null;case"clearPinned":return c&&I?{name:s("noPin","No Pin"),action:()=>c.setColsPinned([I],null,G),checked:!!I&&!I.isPinned()}:null;case"pinRowSubMenu":{let Q=l.get("enableRowPinning"),le=[],me=n?.rowPinned??n?.pinnedSibling?.rowPinned;return me&&le.push("unpinRow"),Q&&Q!=="bottom"&&me!="top"&&le.push("pinTop"),Q&&Q!=="top"&&me!="bottom"&&le.push("pinBottom"),P?.isManual()?{name:s("pinRow","Pin Row"),icon:$e("rowPin",a,I),subMenu:le}:null}case"pinTop":return P?.isManual()?{name:s("pinTop","Pin to Top"),icon:$e("rowPinTop",a,I),action:({node:Q,column:le})=>Q&&P.pinRow(Q,"top",le)}:null;case"pinBottom":return P?.isManual()?{name:s("pinBottom","Pin to Bottom"),icon:$e("rowPinBottom",a,I),action:({node:Q,column:le})=>Q&&P.pinRow(Q,"bottom",le)}:null;case"unpinRow":return P?.isManual()?{name:s("unpinRow","Unpin Row"),icon:$e("rowUnpin",a,I),action:({node:Q,column:le})=>Q&&P.pinRow(Q,null,le)}:null;case"valueAggSubMenu":return u&&B&&(I?.isPrimary()||I?.getColDef().pivotValueColumn)?{name:s("valueAggregation","Value Aggregation"),icon:$e("menuValue",a,null),subMenu:NPe(I,u,B,s),disabled:l.get("functionsReadOnly")}:null;case"autoSizeThis":return d?{name:s("autosizeThisColumn","Autosize This Column"),action:()=>I&&d.autoSizeColumn(I,G,l.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return d?{name:s("autosizeAllColumns","Autosize All Columns"),action:()=>d.autoSizeAllColumns({source:G,skipHeader:l.get("skipHeaderOnAutoSize")})}:null;case"rowGroup":return h?{name:s("groupBy","Group by")+" "+p.getDisplayNameForColumn(I,"header"),disabled:l.get("functionsReadOnly")||I?.isRowGroupActive()||!I?.getColDef().enableRowGroup,action:()=>h.addColumns([I],G),icon:$e("menuAddRowGroup",a,null)}:null;case"rowUnGroup":if(h&&l.isModuleRegistered("SharedRowGrouping")){let Q=I?.getColDef().showRowGroup,le=l.get("groupLockGroupColumns"),me,ge,se;if(Q===!0)me=s("ungroupAll","Un-Group All"),ge=l.get("functionsReadOnly")||le===-1||le>=(h.columns.length??0),se=()=>h.setColumns(h.columns.slice(0,le),G);else if(typeof Q=="string"){let de=f.getColDefCol(Q),he=de!=null?p.getDisplayNameForColumn(de,"header"):Q;me=s("ungroupBy","Un-Group by")+" "+he,ge=l.get("functionsReadOnly")||Yy(de,a),se=()=>{h.removeColumns([Q],G)}}else me=s("ungroupBy","Un-Group by")+" "+p.getDisplayNameForColumn(I,"header"),ge=l.get("functionsReadOnly")||!I?.isRowGroupActive()||!I?.getColDef().enableRowGroup||Yy(I,a),se=()=>h.removeColumns([I],G);return{name:me,disabled:ge,action:se,icon:$e("menuRemoveRowGroup",a,null)}}else return null;case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:()=>Wk(a,G)};case"expandAll":return C?{name:s("expandAll","Expand All Row Groups"),action:()=>C.expandAll(!0)}:null;case"contractAll":return C?{name:s("collapseAll","Collapse All Row Groups"),action:()=>C.expandAll(!1)}:null;case"copy":return g?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:$e("clipboardCopy",a,null),action:()=>g.copyToClipboard()}:null;case"copyWithHeaders":return g?{name:s("copyWithHeaders","Copy with Headers"),icon:$e("clipboardCopy",a,null),action:()=>g.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return g?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:$e("clipboardCopy",a,null),action:()=>g.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(g){let Q=m.getFocusedCell(),le=Q?Mi(a,Q):null,me=le?Q?.column.isCellEditable(le):!1;return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:$e("clipboardCut",a,null),disabled:!me||l.get("suppressCutToClipboard"),action:()=>g.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":if(g){let Q=l.get("suppressClipboardApi")||l.get("suppressClipboardPaste")||!I||!n||!I.isCellEditable(n)||I.isSuppressPaste(n);return{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),icon:$e("clipboardPaste",a,null),disabled:Q,action:()=>g.pasteFromClipboard()}}else return null;case"export":{let Q=[];return!l.get("suppressCsvExport")&&w&&Q.push("csvExport"),!l.get("suppressExcelExport")&&x&&Q.push("excelExport"),Q.length?{name:s("export","Export"),subMenu:Q,icon:$e("save",a,null)}:null}case"csvExport":return w?{name:s("csvExport","CSV Export"),icon:$e("csvExport",a,null),action:()=>w.exportDataAsCsv()}:null;case"excelExport":return x?{name:s("excelExport","Excel Export"),icon:$e("excelExport",a,null),action:()=>x.exportDataAsExcel()}:null;case"separator":return A;case"pivotChart":case"chartRange":return V.getChartItems(A);case"columnFilter":return D&&I?{name:s("columnFilter","Column Filter"),icon:$e("filter",a,null),action:()=>D.showFilterMenu({column:I,buttonElement:j(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{let Q=m.focusedHeader;return F?{name:s("columnChooser","Choose Columns"),icon:$e("columns",a,null),action:()=>F.showColumnChooser({column:I,eventSource:j(),headerPosition:Q})}:null}case"sortUnSort":case"sortAscending":case"sortDescending":case"sortAbsoluteAscending":case"sortAbsoluteDescending":{if(!L||!I)return null;let{fallback:Q,getSortDef:le}=LPe[A];return{name:s(A,Q),icon:$e(A,a,null),action:()=>L.setSortForColumn(I,le(I),!1,G)}}default:return X(176,{key:A}),null}};for(let A of e){let I;if(typeof A=="string"?I=U(A,t,i,r):I=T({},A),!I)continue;let j=I,{subMenu:G}=j;G&&G instanceof Array&&(j.subMenu=this.mapWithStockItems(G,t,n,i,r)),I!=null&&o.push(I)}return vZ(o,Rg),o}};function NPe(e,t,n,i){let r;if(e.isPrimary())r=e;else{let s=e.getColDef().pivotValueColumn;r=_e(s)?s:void 0}let o=[];if(r){let s=r.isValueActive(),a=t.getFuncNames(r);o.push({name:i("noAggregation","None"),action:()=>{n.removeColumns([r],"contextMenu"),n.setColumnAggFunc(r,void 0,"contextMenu")},checked:!s});for(let l of a)o.push({name:i(l,t.getDefaultFuncLabel(l)),action:()=>{n.setColumnAggFunc(r,l,"contextMenu"),n.addColumns([r],"contextMenu")},checked:s&&r.getAggFunc()===l})}return o}var BPe=class extends K{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,t,n,i){let r=e.createManagedBean(new XL(0,{column:n??null,node:null,value:null})),o=this.beans.menuItemMapper.mapWithStockItems(t,n??null,null,i,"columnMenu");return r.addMenuItems(o),r}getMenuItems(e=null,t=null){let n=this.getDefaultMenuOptions(e),i,r=(e?.getColDef()??t?.getColGroupDef())?.mainMenuItems;if(Array.isArray(r))i=r;else if(typeof r=="function")i=r(Oe(this.gos,{column:e,columnGroup:t,defaultItems:n}));else{let o=this.gos.getCallback("getMainMenuItems");o?i=o({column:e,columnGroup:t,defaultItems:n}):i=n}return vZ(i,Rg),i}getDefaultMenuOptions(e){let t=[],{beans:n,gos:i}=this,{colChooserFactory:r,rowGroupColsSvc:o,colModel:s,expansionSvc:a,sortSvc:l,menuSvc:c,pinnedCols:d,aggFuncSvc:u,colAutosize:h}=n,p=Yr(i),f=()=>{!p&&r&&t.push("columnChooser"),t.push("resetColumns")};if(!e)return f(),t;let{colDef:g}=e,C=d&&!g.lockPinned,m=o?.columns.length??0,w=m>0,x=kl(i),D=i.get("treeData"),F=e.isPrimary(),L=!F||u&&e.isAllowValue()&&(w||x||D);if(l&&!p&&e.isSortable()){let V=e.getSortDef(),B=Ms(V?.type),P=w0(V?.direction),U=e.getAvailableSortTypes(),A=U.has("default"),I=U.has("absolute"),j=B==="absolute",G=B==="default",Q=P==="asc",le=P==="desc";A&&!(Q&&G)&&t.push("sortAscending"),A&&!(le&&G)&&t.push("sortDescending"),I&&!(Q&&j)&&t.push("sortAbsoluteAscending"),I&&!(le&&j)&&t.push("sortAbsoluteDescending"),P&&t.push("sortUnSort"),t.push(Rg)}if(c?.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(Rg)),C&&t.push("pinSubMenu"),L&&t.push("valueAggSubMenu"),(C||L)&&t.push(Rg),h&&(g.suppressAutoSize||t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(Rg)),o&&i.isModuleRegistered("SharedRowGrouping")){let V=t.length;g.showRowGroup?t.push("rowUnGroup"):e.isAllowRowGroup()&&F&&(e.isRowGroupActive()?Yy(e,n)||t.push("rowUnGroup"):t.push("rowGroup")),t.length>V&&t.push(Rg)}return f(),a&&(nn(i)||i.get("ssrmExpandAllAffectsAllRows"))&&(D||m>(s.isPivotMode()?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}},AK="ag-context-menu-open",VPe=class extends K{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.focusedCell=null}postConstruct(){this.menu=this.createManagedBean(new yMe({menuItemCallbacks:ZL,getMenuItems:this.getMenuItems.bind(this),mapMenuItems:this.mapWithStockItems.bind(this),beforeMenuOpen:this.beforeMenuOpen.bind(this),onMenuOpen:this.onMenuOpen.bind(this),onMenuClose:this.onMenuClose.bind(this),afterMenuDestroyed:this.afterMenuDestroyed.bind(this),onVisibleChanged:this.dispatchVisibleChangedEvent.bind(this),shouldBlockMenuOpen:()=>!!this.beans.overlays?.exclusive}))}hideActiveMenu(){this.menu.hideActiveMenu()}getMenuItems(e,t){let{column:n,node:i,value:r}=e,o=[],{clipboardSvc:s,chartSvc:a,csvCreator:l,excelCreator:c,colModel:d,rangeSvc:u,gos:h}=this.beans;if(_e(i)&&s&&n&&(h.get("suppressCutToClipboard")||o.push("cut"),o.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),h.get("enableCharts")&&a&&(d.isPivotMode()&&o.push("pivotChart"),u&&!u.isEmpty()&&o.push("chartRange")),_e(i)){let C=h.get("enableRowPinning"),m=h.get("isRowPinnable");if(C){let L=i.level>-1&&i.footer,V=i.level===-1&&i.footer,B=kl(h);(V&&!(B==="pinnedBottom"||B==="pinnedTop")||!V&&!L)&&(m?.(i)??!0)&&o.push("pinRowSubMenu")}let w=h.get("suppressExcelExport")||!c,x=h.get("suppressCsvExport")||!l;!Tu()&&(!w||!x)&&o.push("export")}let p=o.length?o:void 0,f=n?.getColDef().contextMenuItems;return Array.isArray(f)?f:typeof f=="function"?f(Oe(h,{column:n,node:i,value:r,defaultItems:p,event:t})):h.getCallback("getContextMenuItems")?.({column:n,node:i,value:r,defaultItems:p,event:t})??o}getContextMenuPosition(e,t){let n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return{x:0,y:n?.getRowYPosition()??0};let r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){let t=e.rowNode??null,n=e.column??null,{anchorToElement:i,value:r,source:o}=e;t&&n&&r==null&&(r=this.beans.valueSvc.getValueForDisplay({column:n,node:t}).value),i==null&&(i=this.getContextMenuAnchorElement(t,n)),this.beans.menuUtils.onContextMenu({mouseEvent:e.mouseEvent??null,touchEvent:e.touchEvent??null,showMenuCallback:s=>this.menu.showMenu({node:t,column:n,value:r},s,i),source:o})}handleContextMenuMouseEvent(e,t,n,i){let r=i?.rowNode??n?.rowNode??null,o=i?.column??n?.findFullWidthInfoForEvent(e||t)?.column??null,{valueSvc:s,ctrlsSvc:a}=this.beans,l=o?s.getValue(o,r):null,c=a.getGridBodyCtrl(),d=i?i.eGui:c.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:o,value:l,anchorToElement:d,source:"ui"})}beforeMenuOpen(e){e.column||this.beans.focusSvc.clearFocusedCell()}onMenuOpen(){let{ctrlsSvc:e,focusSvc:t}=this.beans;e.getGridBodyCtrl().eGridBody.classList.add(AK),this.focusedCell=t.getFocusedCell()}onMenuClose(){this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.classList.remove(AK)}afterMenuDestroyed(){let{beans:e,focusedCell:t}=this;v5(e,t)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){let{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.eGui||void 0}getContextMenuAnchorElement(e,t){let n=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,i=this.getRowCtrl(e);if(!i)return n;let r=this.getCellGui(i,t);return r||(i.isFullWidth()?i.getFullWidthElement():n)}mapWithStockItems(e,t,n){let{column:i,node:r}=t;return this.beans.menuItemMapper.mapWithStockItems(e,i,r,n,"contextMenu")}},pp="filterMenuTab",fp="generalMenuTab",Fg="columnsMenuTab",sA=[fp,pp,Fg],GPe=class extends K{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,n,i,r){let{column:o,columnGroup:s}=this.splitColumnOrGroup(e),a=r?"filterMenuTab":void 0;this.showMenu(o,s,l=>{let c=l.getGui();this.beans.popupSvc.positionPopupUnderMouseEvent({type:n,additionalParams:{column:o},mouseEvent:t,ePopup:c}),a&&l.showTab?.(a),this.dispatchVisibleChangedEvent(!0,!1,o,s,a)},n,a,void 0,t.target,i)}splitColumnOrGroup(e){let t=e&&Il(e);return{column:t?e:void 0,columnGroup:t?void 0:e}}showMenuAfterButtonClick(e,t,n,i,r){let o=-1,s="left";this.gos.get("enableRtl")&&(o=1,s="right");let a=r?"filterMenuTab":void 0,l=a?[a]:void 0,c=Yr(this.gos),d=(c?9:4)*o,u=c?-23:4,{column:h,columnGroup:p}=this.splitColumnOrGroup(e);this.showMenu(h,p,f=>{let g=f.getGui();this.beans.popupSvc.positionPopupByComponent({type:n,additionalParams:{column:h},eventSource:t,ePopup:g,alignSide:s,nudgeX:d,nudgeY:u,position:"under",keepWithinBounds:!0}),a&&f.showTab?.(a),this.dispatchVisibleChangedEvent(!0,!1,h,p,a)},n,a,l,t,i)}showMenu(e,t,n,i,r,o,s,a){let l=this.getMenuParams(e,t,o,s);if(!l)return;let{menu:c,eMenuGui:d,anchorToElement:u,restoreFocusParams:h}=l,p=[],{menuUtils:f,popupSvc:g}=this.beans;p.push(m=>{let w=c.getGui();this.destroyBean(c),e&&(oy(e,!1,"contextMenu"),f.restoreFocusOnClose(h,w,m)),a?.()});let C=this.getLocaleTextFunc();if(g.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:m=>{for(let w of p)w(m);this.dispatchVisibleChangedEvent(!1,!1,e,t,r)},afterGuiAttached:m=>c.afterGuiAttached(Object.assign({},{container:i},m)),positionCallback:r?()=>n(c):void 0,ariaLabel:C("ariaLabelColumnMenu","Column Menu")}),r||(c.showTabBasedOnPreviousSelection?.(),n(c)),zk(this.gos)){let m=g.setPopupPositionRelatedToElement(d,u);m&&e&&this.addStopAnchoring(m,e,p)}c.addEventListener("tabSelected",m=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=m.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e&&oy(e,!0,"contextMenu"),this.activeMenu=c,c.addEventListener("destroyed",()=>{this.activeMenu===c&&(this.activeMenu=null)})}addStopAnchoring(e,t,n){e.then(i=>{t.__addEventListener("leftChanged",i),t.__addEventListener("visibleChanged",i),n.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("visibleChanged",i)})})}getMenuParams(e,t,n,i){let{focusSvc:r,visibleCols:o,ctrlsSvc:s}=this.beans,a={column:e,headerPosition:r.focusedHeader,columnIndex:o.allCols.indexOf(e),eventSource:i},l=this.createMenu(e,t,a,n,i);return l?{menu:l,eMenuGui:l.getGui(),anchorToElement:i||s.getGridBodyCtrl().eGridBody,restoreFocusParams:a}:void 0}createMenu(e,t,n,i,r){if(Yr(this.gos))return this.createBean(new HPe(e,n,this.lastSelectedTab,i,r));{let o=this.beans.colMenuFactory.getMenuItems(e,t);return o.length?this.createBean(new zPe(o,e,n,r)):void 0}}dispatchVisibleChangedEvent(e,t,n,i,r){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:this.lastSelectedTab??r??(Yr(this.gos)?fp:"columnMenu"),column:n??null,columnGroup:i??null})}isMenuEnabled(e){if(!Yr(this.gos))return!0;let t=!this.beans.filterManager?.isFilterAllowed(e),n=e.getColDef().menuTabs??sA;return(t&&n.includes(pp)?n.length-1:n.length)>0}showMenuAfterContextMenuEvent(e,t,n){this.beans.menuUtils.onContextMenu({mouseEvent:t,touchEvent:n,source:"ui",showMenuCallback:i=>(this.showMenuAfterMouseEvent(e,i,"columnMenu"),!0)})}},HPe=class extends K{constructor(e,t,n,i,r){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=n,this.restrictTo=i,this.sourceElement=r,this.tabFactories={},this.includeChecks={};let{tabFactories:o,includeChecks:s}=this;o[fp]=this.createMainPanel.bind(this),o[pp]=this.createFilterPanel.bind(this),o[Fg]=this.createColumnsPanel.bind(this),s[fp]=()=>!0,s[pp]=()=>e?!!this.beans.filterManager?.isFilterAllowed(e):!1,s[Fg]=()=>!0}postConstruct(){let e=this.getTabsToCreate().map(n=>this.createTab(n)),t=new VY({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(t),this.mainMenuList?.setParentComponent(t),this.addDestroyFunc(()=>this.destroyBean(t))}getTabsToCreate(){return this.restrictTo?this.restrictTo:(this.column?.getColDef().menuTabs??sA).filter(e=>this.isValidMenuTabItem(e)&&this.isNotSuppressed(e))}isValidMenuTabItem(e){let t=!0,n=sA;return this.restrictTo!=null&&(t=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),t=t&&sA.indexOf(e)>-1,t||X(175,{menuTabName:e,itemsToConsider:n}),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){let{tabItemColumns:t,tabbedLayout:n,tabItemFilter:i,tabItemGeneral:r}=this;t&&e===Fg?n.showItem(t):i&&e===pp?n.showItem(i):r&&e===fp?n.showItem(r):n.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=Fg;break;case this.tabItemFilter:t=pp;break;case this.tabItemGeneral:t=fp;break}t&&this.activateTab(t)}activateTab(e){let t={type:"tabSelected",key:e};this.dispatchLocalEvent(t)}createMainPanel(){let{beans:e,column:t}=this,n=e.colMenuFactory,i=n.createMenu(this,n.getMenuItems(t),this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=i,i.addEventListener("closeMenu",this.onHidePopup.bind(this));let r={title:$e("legacyMenu",e,t),titleLabel:fp.replace("MenuTab",""),bodyPromise:tt.resolve(i.getGui()),name:fp};return this.tabItemGeneral=r,r}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){let e=this.column?this.createBean(new Vu(this.column,"COLUMN_MENU")):null;this.filterComp=e,e?.hasFilter()||mt(119);let t=i=>e?.afterGuiAttached(i),n=()=>e?.afterGuiDetached();return this.tabItemFilter={title:$e("filterTab",this.beans,this.column),titleLabel:pp.replace("MenuTab",""),bodyPromise:tt.resolve(e?.getGui()),afterAttachedCallback:t,afterDetachedCallback:n,name:pp},this.tabItemFilter}createColumnsPanel(){let e=bt({tag:"div",cls:"ag-menu-column-select-wrapper"}),{beans:t,column:n}=this,r=t.colChooserFactory.createColumnSelectPanel(this,n).getGui();r.classList.add("ag-menu-column-select"),e.appendChild(r);let o={title:$e("columns",t,n),titleLabel:Fg.replace("MenuTab",""),bodyPromise:tt.resolve(e),name:Fg};return this.tabItemColumns=o,o}afterGuiAttached(e){let{container:t,hidePopup:n}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},zPe=class extends pe{constructor(e,t,n,i){super({tag:"div",ref:"eColumnMenu",cls:"ag-menu ag-column-menu",role:"presentation"}),this.menuItems=e,this.column=t,this.restoreFocusParams=n,this.sourceElement=i,this.eColumnMenu=q}postConstruct(){let e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,()=>this.sourceElement??this.getGui());this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),qn(this.mainMenuList.getGui())}};function jPe(e,t){let{contextMenuSvc:n}=e;if(!n)return;let{rowNode:i,column:r,value:o,x:s,y:a}=t||{},{x:l,y:c}=n.getContextMenuPosition(i,r);s!=null&&(l=s),a!=null&&(c=a),n.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:c}),rowNode:i,column:r,value:o,source:"api"})}function UPe(e,t){e.colChooserFactory?.showColumnChooser({chooserParams:t})}function WPe(e){e.colChooserFactory?.hideActiveColumnChooser()}var $Pe=class extends K{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,n,i){let{eventSource:r}=e,o=n instanceof KeyboardEvent;if(!i&&!o||!r)return;let s=wt(this.beans);!t.contains(s)&&!Ts(this.beans)||this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,n){let i;n?.keyboardEvent&&(i=n.keyboardEvent),e(i&&{keyboardEvent:i});let r=this.beans,o=r.focusSvc,s=o.getFocusedCell();if(Ts(r))if(s){let{rowIndex:a,rowPinned:l,column:c}=s;o.setFocusedCell({rowIndex:a,column:c,rowPinned:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e){let{mouseEvent:t,touchEvent:n,showMenuCallback:i,source:r}=e;if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),r==="ui"&&this.gos.get("suppressContextMenu")))return;let o=t??n.touches[0];if(i(o)){let s=t??n;s?.cancelable&&s.preventDefault()}}async focusHeaderCell(e){let{column:t,columnIndex:n,headerPosition:i,eventSource:r}=e,{visibleCols:o,headerNavigation:s,focusSvc:a}=this.beans,l=await o.allCols.some(c=>c===t);if(this.isAlive()){if(t?.isAlive()&&l&&r&&Dr(r)){let c=__(r);c&&(s?.scrollToColumn(t),c.focus())}else if(i&&n!==-1){let c=o.allCols,d=c[n]||Qe(c);d&&a.focusHeaderPosition({headerPosition:{headerRowIndex:i.headerRowIndex,column:d}})}}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&e.which===2&&e.preventDefault()}},CZ={moduleName:"MenuCore",version:Lt,beans:[OPe,FPe,$Pe],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc",sortUnSort:"none"},dependsOn:[ti,ua,B5,AA]},qPe={moduleName:"ColumnMenu",version:Lt,beans:[GPe,BPe,TPe],icons:{ensureColumnVisible:"column-arrow",legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:UPe,hideColumnChooser:WPe},dependsOn:[CZ,Nl,Iy]},KPe={moduleName:"ContextMenu",version:Lt,beans:[VPe],apiFunctions:{showContextMenu:jPe},dependsOn:[CZ]};var RK=class extends A0{constructor(){super({tag:"div",cls:"ag-cell-edit-wrapper"}),this.currentSearchRequest=0,this.onSearchCallback=e=>{let t=++this.currentSearchRequest,n=this.eEditor;n.setValueList({refresh:!0,valueList:void 0});let i=this.params;if(i.search=e,!i.search)return;if(typeof i.values!="function"){this.isFullAsync()&&X(294);return}let r=i.values(i);if(Array.isArray(r)){this.isFullAsync()&&X(294),n.setValueList({refresh:!0,valueList:r});return}n.setValueList({valueList:r.then(o=>{if(t===this.currentSearchRequest)return o}),refresh:!0})}}initialiseEditor(e){let{cellStartedEdit:t,values:n,eventKey:i}=this.params;jt(n)&&X(180);let{params:r,valueList:o}=this.buildRichSelectParams(),s=this.createManagedBean(new DA(r));this.eEditor=s,s.addCss("ag-cell-editor"),this.appendChild(s),this.isFullAsync()&&s.showPicker(),this.eEditor.setValueList({valueList:o,refresh:!0,isInitial:!0}),o&&!Array.isArray(o)&&o.then(l=>{let c=this.getSearchStringCallback(l);c&&s.setSearchStringCreator(c),this.processEventKey(i)}),this.addManagedListeners(s,{fieldPickerValueSelected:this.onEditorPickerValueSelected.bind(this)}),this.focusAfterAttached=t}onEditorPickerValueSelected(e){this.gos.get("editType")!=="fullRow"&&setTimeout(()=>this.params.stopEditing(!e.fromEnterKey))}getPlaceholderText(){let{valuePlaceholder:e}=this.params;if(e!==void 0)return e;let t=this.getLocaleTextFunc();return this.isFullAsync()?t("typeToSearchOoo","Type to search..."):t("advancedFilterBuilderSelectOption","Select an option...")}isFullAsync(){let{allowTyping:e,filterListAsync:t,values:n}=this.params;return!(typeof n=="function")&&t&&X(294),!!(e&&t&&typeof n=="function")}getInitialValueList(){let e=this.params,{values:t}=e,n=this.isFullAsync(),i=Array.isArray(t)||!t,r=typeof t=="function";if(i)return t??[];if(!r)return[];if(!n)return t(T({},e))}buildRichSelectParams(){let e=this.params,{cellRenderer:t,cellRendererParams:n,cellHeight:i,value:r,values:o,formatValue:s,searchDebounceDelay:a,valueListGap:l,valueListMaxHeight:c,valueListMaxWidth:d,allowTyping:u,filterList:h,searchType:p,highlightMatch:f,eventKey:g,multiSelect:C,suppressDeselectAll:m,suppressMultiSelectPillRenderer:w}=e,x={value:r,cellRenderer:t,cellRendererParams:n,cellRowHeight:i,searchDebounceDelay:a,valueFormatter:s,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:u,filterList:h,searchType:p,highlightMatch:f,maxPickerHeight:c,maxPickerWidth:d,placeholder:this.getPlaceholderText(),initialInputValue:g?.length===1?g:g===$.BACKSPACE?"":void 0,multiSelect:C,suppressDeselectAll:m,suppressMultiSelectPillRenderer:w},D=this.getInitialValueList(),F=this.isFullAsync();return Array.isArray(o)?(x.valueList=D,x.searchStringCreator=this.getSearchStringCallback(D)):typeof o=="function"&&F&&(x.onSearch=this.onSearchCallback,x.allowNoResultsCopy=!0,x.filterList=!0),C&&u&&(e.allowTyping=!1,x.allowTyping=!1,X(181)),{params:x,valueList:D}}getSearchStringCallback(e){if(typeof e[0]!="object")return;let t=this.params,{colDef:n,formatValue:i}=t;if(n.cellEditorParams?.formatValue)return o=>o.map(i);let{keyCreator:r}=n;if(r){X(266);let{column:o,node:s,data:a}=t;return l=>l.map(c=>{let d=Oe(this.gos,{value:c,colDef:n,column:o,node:s,data:a});return r(d)})}return o=>o.map(i)}afterGuiAttached(){let{focusAfterAttached:e,params:t}=this;setTimeout(()=>{if(!this.isAlive())return;let n=this.eEditor,{allowTyping:i,eventKey:r,cellStartedEdit:o}=t;if(e){let s=n.getFocusableElement();s.focus(),i&&(!r||r.length!==1)&&s.select()}o&&n.showPicker(),this.processEventKey(r)})}processEventKey(e){e&&(e===$.BACKSPACE?this.eEditor.searchTextFromString(null):e?.length===1&&this.eEditor.searchTextFromString(e))}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){let{params:e}=this,t=this.eEditor.getValue();return e.parseValue?.(t)??t}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){let{params:e}=this,{getValidationErrors:t}=e;return t?t({value:this.getValue(),internalErrors:null,cellEditorParams:e}):null}},YPe={moduleName:"RichSelect",version:Lt,beans:[],userComponents:{agRichSelect:RK,agRichSelectCellEditor:RK},icons:{richSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading"},dependsOn:[ti,Vl]},Ig="__AG_SELECT_ALL__",Tg="__AG_ADD_SELECTION_TO_FILTER__",ZPe=class{constructor(e,t,n,i){this.valueSvc=e,this.getValueFormatter=t,this.formatter=n,this.column=i,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,n){this.displayedKeys=Array.from(n)}updateDisplayedValuesToMatchMiniFilter(e,t,n,i,r){this.displayedKeys=[];let o=this.getValueFormatter();for(let s of n)if(s==null)r&&this.displayedKeys.push(s);else{let a=e(s),l=this.valueSvc.formatValue(this.column,null,a,o,!1),c=this.formatter(l);i(c)&&this.displayedKeys.push(s)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return Ig}getAddSelectionToFilterItem(){return Tg}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}},XPe={tag:"div",cls:"ag-set-filter-item",attrs:{"aria-hidden":"true"},children:[{tag:"span",cls:"ag-set-filter-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-set-filter-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-set-filter-group-opened-icon"},{tag:"span",ref:"eGroupIndeterminateIcon",cls:"ag-set-filter-group-indeterminate-icon"}]},{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},QPe={tag:"div",cls:"ag-set-filter-item",children:[{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},JPe=class extends pe{constructor(e){super(e.isGroup?XPe:QPe,[mo]),this.eCheckbox=q,this.eGroupOpenedIcon=q,this.eGroupClosedIcon=q,this.eGroupIndeterminateIcon=q,this.formattedValue=null,this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=e.depth??0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"setFilterValue",shouldDisplayTooltip:()=>this.shouldDisplayTooltip?.()??!0,getAdditionalParams:()=>{let{colDef:e,column:t}=this.params,n={colDef:e,column:t,valueFormatted:this.formattedValue??void 0};return this.isTree&&(n.level=this.depth),n}})),this.addDestroyFunc(()=>this.destroyCellRendererComponent?.()),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&(this.addCss("ag-set-filter-indent-"+this.depth),this.getGui().style.setProperty("--ag-indentation-level",String(this.depth))),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCss("ag-set-filter-add-group-indent"),sp(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){let{eGroupClosedIcon:e,eGroupOpenedIcon:t,eGroupIndeterminateIcon:n,hasIndeterminateExpandState:i,beans:r}=this;e.appendChild(Ll("setFilterGroupClosed",r,null)),t.appendChild(Ll("setFilterGroupOpen",r,null));let o=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(e,{click:o}),this.addManagedElementListeners(t,{click:o}),i&&(n.appendChild(Ll("setFilterGroupIndeterminate",r,null)),this.addManagedElementListeners(n,{click:o})),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;let n={type:"expandedChanged",isExpanded:!!e,item:this.item};t||this.dispatchLocalEvent(n),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){let{isExpanded:e,hasIndeterminateExpandState:t,eGroupClosedIcon:n,eGroupOpenedIcon:i,eGroupIndeterminateIcon:r}=this;Ie(n,t?e===!1:!e),Ie(i,e===!0),t&&Ie(r,e===void 0)}onCheckboxChanged(e){this.isSelected=e;let t={type:"selectionChanged",isSelected:e,item:this.item};this.dispatchLocalEvent(t),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(e,t),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;let e=this.getLocaleTextFunc(),t=this.eCheckbox.getValue(),n=t===void 0?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");Fc(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}setupFixedAriaLabels(e){if(!this.isTree)return;let n=this.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();Ut(i,`${e} ${n}`),op(i,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){let e=this.getAriaElement();c_(e,this.eCheckbox.getValue())}refreshAriaExpanded(){Fi(this.getAriaElement(),!!this.isExpanded)}refresh(e,t,n){this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(n,!0);let{cellRendererComponent:i,cellRendererParams:r,beans:o,params:s}=this;if(this.valueFunction){let a=this.valueFunction();this.setTooltipAndCellRendererParams(a,a),i||this.renderCellWithoutCellRenderer()}if(i){let a=ip(o.userCompFactory,s,r);if(!i.refresh?.(a?.params??r)){let c=i;this.renderCell(),this.destroyBean(c)}}}render(){let{params:{column:e}}=this,{value:t}=this,n=null;typeof t=="function"?(this.valueFunction=t,n=this.valueFunction(),t=n):this.isTree?n=Xr(t):n=this.getFormattedValue(e,t),this.formattedValue=n,this.setTooltipAndCellRendererParams(t,n),this.renderCell()}setTooltipAndCellRendererParams(e,t){let n=this.gos;if(this.params.showTooltips&&(!i0(n)||!this.params.cellRenderer)){let i=t??Xr(e);this.shouldDisplayTooltip=lp(n,()=>this.eCheckbox.getGui().querySelector(".ag-label")),this.tooltipFeature?.setTooltipAndRefresh(i)}this.cellRendererParams=Oe(n,{value:e,valueFormatted:t,colDef:this.params.colDef,column:this.params.column,setTooltip:(i,r)=>{n.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=r,this.tooltipFeature?.setTooltipAndRefresh(i)}})}getFormattedValue(e,t){return this.beans.valueSvc.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){let t=ip(this.beans.userCompFactory,this.params,this.cellRendererParams)?.newAgStackInstance();if(t==null){this.renderCellWithoutCellRenderer();return}t.then(n=>{n&&(this.cellRendererComponent=n,this.eCheckbox.setLabel(n.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(n))})}renderCellWithoutCellRenderer(){let{valueFormatted:e,value:t}=this.cellRendererParams,n=e??t??this.translate("blanks");typeof n!="string"&&(X(208),n=""),this.eCheckbox.setLabel(n),this.setupFixedAriaLabels(n)}getComponentHolder(){return this.params.column.getColDef()}},e3e={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches.",ariaSearchFilterValues:"Search filter values",ariaFilterList:"Filter List",filterSummaryListInactive:"is (All)",filterSummaryListSeparator:", ",filterSummaryListShort:e=>`is (${e[0]})`,filterSummaryListLong:e=>`is (${e[0]}) and ${e[1]} more`};function kL(e,t,n){let i=e;return i?(i=i.map(r=>Xr(hi(r))),!t&&n&&i.some(r=>r==null)?Qe(i)==null?null:i.filter(r=>r!=null):i):null}function pa(e,t,n){return uy(e,e3e,t,n)}function t3e(e){e.excelMode==="windows"?(e.buttons||(e.buttons=["apply","cancel"]),e.closeOnApply==null&&(e.closeOnApply=!0)):e.excelMode==="mac"&&(e.buttons||(e.buttons=["reset"]),e.applyMiniFilterWhileTyping==null&&(e.applyMiniFilterWhileTyping=!0),e.debounceMs==null&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,X(207))}function n3e(){return([e,t],[n,i])=>{if(t==null)return i==null?0:-1;if(i==null)return 1;for(let r=0;r<t.length;r++){if(r>=i.length)return 1;let o=u0(t[r],i[r]);if(o!==0)return o}return 0}}var FK=class{constructor(e,t,n,i){this.formatter=e,this.treeListPathGetter=t,this.treeListFormatter=n,this.treeDataOrGrouping=i,this.allDisplayedItemsTree=new Map,this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:Ig,children:this.allDisplayedItemsTree,expanded:!0,key:Ig,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Tg,expanded:!0,key:Tg,parentTreeKeys:[]}}updateParams(e,t){this.treeListPathGetter=e,this.treeListFormatter=t}updateDisplayedValuesToAllAvailable(e,t,n,i){i==="reload"?this.generateItemTree(e,t,n):i==="otherFilter"?(this.updateAvailable(n),this.updateExpandAll()):i==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,t,n,i,r,o){o==="reload"?this.generateItemTree(e,t,n):o==="otherFilter"&&this.updateAvailable(n),this.updateFilter(i,r),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,t,n){let i=new Map;this.allDisplayedItemsTree=i;let r=!1,o=this.getTreeListPathGetter(e,n);for(let s of t){let a=e(s),l=o(a)??[null],c=l.length;c>1&&(r=!0);let d=n.has(s),u=i,h,p=[];for(let f=0;f<c;f++){let g=l[f];u||(u=new Map,h.children=u);let C=g?.toUpperCase()??null;h=u.get(C),h||(h={treeKey:g,depth:f,filterPasses:!0,expanded:!1,available:d,parentTreeKeys:p},f===l.length-1&&(h.key=s),u.set(C,h)),u=h.children,p=[...p,g]}}this.groupsExist=r,this.updateAvailable(n),this.selectAllItem.children=i,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,t){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return i=>i;let n=!1;for(let i of t){let r=e(i);if(r instanceof Date){n=!0;break}else if(r!=null)break}return n?i=>Yh(i,!1):(X(211),i=>[String(i)])}flattenItems(){this.activeDisplayedItemsFlat=[];let e=t=>{for(let n of t.values())!n.filterPasses||!n.available||(this.activeDisplayedItemsFlat.push(n),n.children&&n.expanded&&e(n.children))};e(this.allDisplayedItemsTree)}resetFilter(){let e=t=>{let n=t.children;if(n)for(let i of n.values())e(i);t.filterPasses=!0};for(let t of this.allDisplayedItemsTree.values())e(t)}updateFilter(e,t){let n=i=>i.available?i.treeKey==null?t:e(this.formatter(this.treeListFormatter?this.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)):!1;for(let i of this.allDisplayedItemsTree.values())this.recursiveItemCheck(i,!1,n,"filterPasses")}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){let e=[];return this.forEachDisplayedKey(t=>e.push(t)),e}forEachDisplayedKey(e){let t=(n,i)=>{let r=n.children;if(r){if(!n.expanded||!i)for(let o of r.values())o.filterPasses&&t(o,!1)}else e(n.key)};for(let n of this.activeDisplayedItemsFlat)t(n,!0)}someDisplayedKey(e){let t=(n,i)=>{let r=n.children;if(r){if(!n.expanded||!i){for(let o of r.values())if(o.filterPasses&&t(o,!1))return!0;return!1}}else return e(n.key);return!1};return this.activeDisplayedItemsFlat.some(n=>t(n,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){let e=(n,i,r)=>{for(let o of n.values()){if(!o.filterPasses||!o.available||!o.children)continue;if(i=i||!!o.expanded,r=r||!o.expanded,i&&r)return;let s=e(o.children,i,r);if(s===void 0)return;s?i=!0:r=!0}return i&&r?void 0:i},t=this.getSelectAllItem();t.expanded=e(t.children,!1,!1)}recursiveItemCheck(e,t,n,i){let r=!1,o=e.children;if(o)for(let a of o.values()){let l=this.recursiveItemCheck(a,t||n(e),n,i);r=r||l}let s=t||r||n(e);return e[i]=s,s}updateAvailable(e){let t=n=>e.has(n.key);for(let n of this.allDisplayedItemsTree.values())this.recursiveItemCheck(n,!1,t,"available")}},bZ=class extends xg{constructor(){super("setFilter","set-filter"),this.filterType="set",this.eMiniFilter=q,this.eFilterLoading=q,this.eFilterLoadingIcon=q,this.eSetFilterList=q,this.eFilterNoMatches=q,this.hardRefreshVirtualList=!1,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.selectedKeys=new Set}setParams(e){super.setParams(e);let t=this.updateHandler(e.getHandler()),{column:n,textFormatter:i,treeList:r,treeListPathGetter:o,treeListFormatter:s}=e;this.formatter=i??(a=>a??null),this.displayValueModel=r?new FK(this.formatter,o,s,t.isTreeDataOrGrouping()):new ZPe(this.beans.valueSvc,()=>this.handler.valueFormatter,this.formatter,n),t.valueModel.allKeys.then(a=>{this.isAlive()&&(this.updateDisplayedValues("reload",a??[]),this.resetSelectionState(a??[]))}),t.valueModel.isLoading()&&this.setIsLoading(!0),this.initialiseFilterBodyUi()}refresh(e){return this.params.treeList!==e.treeList?!1:(this.updateHandler(e.getHandler()),super.refresh(e))}updateParams(e,t){super.updateParams(e,t),this.updateMiniFilter(),e.suppressSelectAll!==t.suppressSelectAll&&this.createVirtualListModel(e);let{textFormatter:n,treeListPathGetter:i,treeListFormatter:r}=e;this.formatter=n??(o=>o??null),this.displayValueModel instanceof FK&&this.displayValueModel.updateParams(i,r),this.handler.refreshFilterValues(!0)}updateHandler(e){if(this.handler!==e){for(let n of this.handlerDestroyFuncs??[])n();this.handlerDestroyFuncs=[...this.addManagedListeners(e,{anyFilterChanged:n=>{e.valueModel.allKeys.then(i=>{this.isAlive()&&(this.updateDisplayedValues("otherFilter",i??[]),n.updated&&(this.checkAndRefreshVirtualList(),this.showOrHideResults()))})},dataChanged:({hardRefresh:n})=>{e.valueModel.allKeys.then(i=>{this.isAlive()&&(this.updateDisplayedValues("reload",i??[]),this.setSelectedModel(this.state.model?.values??null),n&&(this.hardRefreshVirtualList=!0),this.checkAndRefreshVirtualList())})}}),...this.addManagedListeners(e.valueModel,{loadingStart:()=>this.setIsLoading(!0),loadingEnd:()=>this.setIsLoading(!1)})],this.handler=e}return e}updateUiVisibility(){}createBodyTemplate(){return{tag:"div",cls:"ag-set-filter",children:[{tag:"div",ref:"eFilterLoading",cls:"ag-filter-loading ag-loading ag-hidden",children:[{tag:"span",ref:"eFilterLoadingIcon",cls:"ag-loading-icon"},{tag:"span",cls:"ag-loading-text",children:pa(this,"loadingOoo")}]},{tag:"ag-input-text-field",ref:"eMiniFilter",cls:"ag-mini-filter"},{tag:"div",ref:"eFilterNoMatches",cls:"ag-filter-no-matches ag-hidden",children:pa(this,"noMatches")},{tag:"div",ref:"eSetFilterList",cls:"ag-set-filter-list",role:"presentation"}]}}getAgComponents(){return[Jr]}handleKeyDown(e){if(super.handleKeyDown(e),e.defaultPrevented)return;let t=()=>{if(!this.eSetFilterList.contains(wt(this.beans)))return;let n=this.virtualList.getLastFocusedRow();if(n==null)return;let i=this.virtualList.getComponentAt(n);if(i==null)return;e.preventDefault();let{readOnly:r}=this.params;if(!r)return i};switch(e.key){case $.SPACE:t()?.toggleSelected();break;case $.ENTER:this.handleKeyEnter(e);break;case $.LEFT:t()?.setExpanded(!1);break;case $.RIGHT:t()?.setExpanded(!0);break}}handleKeyEnter(e){e.preventDefault();let{excelMode:t,readOnly:n}=this.params;!t||n||(this.params.onAction("apply",void 0,e),this.params.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}setModelAndRefresh(e){return this.setSelectedModel(e).then(()=>{this.isAlive()&&this.checkAndRefreshVirtualList()})}setModelIntoUi(e){this.setMiniFilter(this.params.state.state?.miniFilterValue??null,!0);let t=e==null?null:e.values;return this.setModelAndRefresh(t)}getModelFromUi(){let e=this.getSelectedModel();return e?{values:e,filterType:this.filterType}:null}areNonNullModelsEqual(e,t){return Hr(e.values,t.values)}setIsLoading(e){Ie(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter(),this.initLoading()}initLoading(){let e=$e("setFilterLoading",this.beans,this.params.column);e&&this.eFilterLoadingIcon.appendChild(e)}initVirtualList(){let e=pa(this,"ariaFilterList"),t=!!this.params.treeList,n=this.virtualList=this.createBean(new B0({cssIdentifier:"filter",ariaRole:t?"tree":"listbox",listName:e})),i=this.eSetFilterList;t&&i.classList.add("ag-set-filter-tree-list"),i.appendChild(n.getGui());let{cellHeight:r}=this.params;r!=null&&n.setRowHeight(r);let o=(a,l)=>this.createSetListItem(a,t,l);n.setComponentCreator(o);let s=(a,l)=>this.updateSetListItem(a,l);n.setComponentUpdater(s),this.createVirtualListModel(this.params)}createVirtualListModel(e){let t;e.suppressSelectAll?t=new i3e(this.displayValueModel):t=new r3e(this.displayValueModel,this.showAddCurrentSelectionToFilter.bind(this)),e.treeList&&(t=new o3e(t)),this.virtualList.setModel(t)}getSelectAllLabel(){let e=this.miniFilterText==null||!this.params.excelMode?"selectAll":"selectAllSearchResults";return pa(this,e)}getAddSelectionToFilterLabel(){return pa(this,"addCurrentSelectionToFilter")}createSetListItem(e,t,n){let i=this.displayValueModel.hasGroups(),{isSelected:r,isExpanded:o}=this.isSelectedExpanded(e),{value:s,depth:a,isGroup:l,hasIndeterminateExpandState:c,selectedListener:d,expandedListener:u}=this.newSetListItemAttributes(e),h={focusWrapper:n,value:s,params:this.params,translate:f=>pa(this,f),valueFormatter:this.handler.valueFormatter,item:e,isSelected:r,isTree:t,depth:a,groupsExist:i,isGroup:l,isExpanded:o,hasIndeterminateExpandState:c},p=this.createBean(new JPe(h));return p.addEventListener("selectionChanged",d),u&&p.addEventListener("expandedChanged",u),p}newSetTreeItemAttributes(e){let t=this.displayValueModel.hasGroups();return e.key===Ig?{value:()=>this.getSelectAllLabel(),isGroup:t,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:n=>this.onSelectAll(n.isSelected),expandedListener:n=>this.onExpandAll(n.item,n.isExpanded)}:e.key===Tg?{value:()=>this.getAddSelectionToFilterLabel(),depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:n=>{this.addCurrentSelectionToFilter=n.isSelected,this.refreshAfterSelection()}}:e.children?{value:this.params.treeListFormatter?.(e.treeKey,e.depth,e.parentTreeKeys)??e.treeKey,depth:e.depth,isGroup:!0,selectedListener:n=>this.onGroupItemSelected(n.item,n.isSelected),expandedListener:n=>this.onExpandedChanged(n.item,n.isExpanded)}:{value:this.params.treeListFormatter?.(e.treeKey,e.depth,e.parentTreeKeys)??e.treeKey,depth:e.depth,selectedListener:n=>this.onItemSelected(n.item.key,n.isSelected)}}newSetListItemAttributes(e){return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e):e===Ig?{value:()=>this.getSelectAllLabel(),selectedListener:t=>this.onSelectAll(t.isSelected)}:e===Tg?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:t=>{this.addCurrentSelectionToFilter=t.isSelected,this.refreshAfterSelection()}}:{value:this.handler.valueModel.allValues.get(e)??null,selectedListener:t=>this.onItemSelected(t.item,t.isSelected)}}updateSetListItem(e,t){let{isSelected:n,isExpanded:i}=this.isSelectedExpanded(e);t.refresh(e,n,i)}isSelectedExpanded(e){let t,n;return this.isSetFilterModelTreeItem(e)?(n=e.expanded,e.key===Ig?t=this.isSelectAllSelected():e.key===Tg?t=this.isAddCurrentSelectionToFilterChecked():e.children?t=this.areAllChildrenSelected(e):t=this.selectedKeys.has(e.key)):e===Ig?t=this.isSelectAllSelected():e===Tg?t=this.isAddCurrentSelectionToFilterChecked():t=this.selectedKeys.has(e),{isSelected:t,isExpanded:n}}isSetFilterModelTreeItem(e){return e?.treeKey!==void 0}initMiniFilter(){let{eMiniFilter:e}=this;this.updateMiniFilter(),e.onValueChange(()=>this.onMiniFilterInput()),e.setInputAriaLabel(pa(this,"ariaSearchFilterValues")),this.addManagedElementListeners(e.getInputElement(),{keydown:t=>this.onMiniFilterKeyDown(t)})}updateMiniFilter(){let{eMiniFilter:e,miniFilterText:t,params:n}=this;e.setDisplayed(!n.suppressMiniFilter),e.setValue(t)}afterGuiAttached(e){super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();let{eMiniFilter:t}=this;t.setInputPlaceholder(pa(this,"searchOoo")),e?.suppressFocus||(t.isDisplayed()?t.getFocusableElement().focus():this.virtualList.awaitStable(()=>this.virtualList.focusRow(0)))}afterGuiDetached(){super.afterGuiDetached();let{column:e,excelMode:t,model:n,onStateChange:i}=this.params;this.beans.colFilter?.shouldKeepStateOnDetach(e)||(t&&this.resetMiniFilter(),(t||n!==this.state.model)&&(i({model:n,state:this.getState()}),this.showOrHideResults()))}canApply(e){return this.params.excelMode?e==null||e.values.length>0:!0}onNewRowsLoaded(){}setFilterValues(e){X(283),this.handler.setFilterValues(e)}resetFilterValues(){X(283),this.handler.resetFilterValues()}refreshFilterValues(){X(283),this.doRefreshFilterValues()}doRefreshFilterValues(){this.handler.refreshFilterValues()}onAnyFilterChanged(){}onMiniFilterInput(e){if(!this.doSetMiniFilter(this.eMiniFilter.getValue()))return;if(e){this.showOrHideResults();return}let{applyMiniFilterWhileTyping:t,readOnly:n,excelMode:i}=this.params,r=!n&&(t||!!i),o=t&&!n?"debounce":void 0;this.updateUiAfterMiniFilterChange(r,o)}updateUiAfterMiniFilterChange(e,t){if(e){let{excelMode:n,readOnly:i,model:r}=this.params;n&&!i&&this.miniFilterText==null?this.setModelAndRefresh(r?.values??null):this.selectAllMatchingMiniFilter(!0)}this.checkAndRefreshVirtualList(),this.onUiChanged(e?t:"prevent"),this.showOrHideResults()}showOrHideResults(){let e=this.miniFilterText!=null&&this.displayValueModel.getDisplayedValueCount()<1;Ie(this.eFilterNoMatches,e),Ie(this.eSetFilterList,!e)}resetMiniFilter(){this.eMiniFilter.setValue(null,!0),this.doSetMiniFilter(null)}onMiniFilterKeyDown(e){let{excelMode:t,readOnly:n}=this.params;e.key===$.ENTER&&!t&&!n&&this.updateUiAfterMiniFilterChange(!0,"immediately")}focusRowIfAlive(e){return e==null?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}onSelectAll(e){e?this.selectAllMatchingMiniFilter():this.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){let n=i=>{if(!i.filterPasses)return;let r=i.children;if(r)for(let o of r.values())n(o);else this.setKeySelected(i.key,t)};n(e),this.refreshAfterSelection()}onItemSelected(e,t){this.setKeySelected(e,t),this.refreshAfterSelection()}onExpandAll(e,t){let n=i=>{if(i.filterPasses&&i.available&&i.children){for(let r of i.children.values())n(r);i.expanded=t}};n(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){let e=this.virtualList.getLastFocusedRow();this.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(e)}refreshAfterSelection(){let e=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e,t){this.eMiniFilter.setValue(e,t),this.onMiniFilterInput(t)}doSetMiniFilter(e){return e=hi(e),this.miniFilterText===e?!1:(e===null&&(this.addCurrentSelectionToFilter=!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}getUiChangeEventParams(){return{miniFilterValue:this.miniFilterText}}getState(){let e=this.miniFilterText;return e?{miniFilterValue:e}:void 0}checkAndRefreshVirtualList(){this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return X(283),this.handler.getFilterKeys()}getFilterValues(){return X(283),this.handler.getFilterValues()}refreshVirtualList(){this.params.refreshValuesOnOpen?this.doRefreshFilterValues():this.checkAndRefreshVirtualList()}isSelectAllSelected(){if(this.params.defaultToNothingSelected){if(this.hasSelections()&&this.isEverythingVisibleSelected())return!0;if(this.isNothingVisibleSelected())return!1}else{if(this.hasSelections()&&this.isNothingVisibleSelected())return!1;if(this.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){let t=n=>{if(n.children){let i=!1,r=!1;for(let o of n.children.values()){if(!o.filterPasses||!o.available)continue;let s=t(o);if(s===void 0||(s?i=!0:r=!0,i&&r))return}return i}else return this.selectedKeys.has(n.key)};return this.params.defaultToNothingSelected?this.hasSelections()&&t(e):t(e)}resetExpansion(){if(!this.params.treeList)return;let e=this.displayValueModel.getSelectAllItem();if(this.isSetFilterModelTreeItem(e)){let t=n=>{let i=n.children;if(i){for(let r of i.values())t(r);n.expanded=!1}};t(e),this.updateDisplayedValues("expansion")}}getModelAsString(e){return this.handler.getModelAsString(e)}getPositionableElement(){return this.eSetFilterList}updateDisplayedValues(e,t){if(e==="expansion"){this.displayValueModel.refresh();return}let n=this.handler,i=n.valueModel;if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(a=>i.allValues.get(a)??null,t,i.availableKeys,e);return}let r=n.caseFormat(this.formatter(this.miniFilterText)||""),o=a=>a!=null&&n.caseFormat(a).includes(r),s=!!this.params.excelMode&&o(pa(this,"blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(a=>i.allValues.get(a)??null,t,i.availableKeys,o,s,e)}hasSelections(){return this.params.defaultToNothingSelected?this.selectedKeys.size>0:this.handler.valueModel.allValues.size!==this.selectedKeys.size}isInWindowsExcelMode(){return this.params.excelMode==="windows"}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&_e(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(e=!1){this.miniFilterText==null?this.selectedKeys=new Set(this.handler.valueModel.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(t=>this.selectedKeys.add(t)))}deselectAllMatchingMiniFilter(){this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}setKeySelected(e,t){t?this.selectedKeys.add(e):(this.params.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e))}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.selectedKeys.has(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.selectedKeys.has(e))}getSelectedModel(){if(!this.hasSelections())return null;let e=this.isAddCurrentSelectionToFilterChecked()?this.params.model?.values:void 0;if(e?.length){if(this.selectedKeys){let t=new Set([...e,...this.selectedKeys]);return Array.from(t)}return Array.from(e)}return Array.from(this.selectedKeys)}setSelectedModel(e){let t=this.handler,n=t.valueModel;return n.allKeys.then(i=>{if(e==null)this.resetSelectionState(i??[]);else{this.selectedKeys.clear();let r=new Map;n.allValues.forEach((o,s)=>{r.set(t.caseFormat(s),s)}),e.forEach(o=>{let s=t.caseFormat(hi(o)),a=r.get(s);a!==void 0&&this.selectedKeys.add(a)})}})}resetSelectionState(e){this.params.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}getFilterHandler(){return this.handler}destroy(){this.virtualList=this.destroyBean(this.virtualList);for(let e of this.handlerDestroyFuncs??[])e();this.handler=void 0,this.displayValueModel=void 0,this.selectedKeys.clear(),super.destroy()}},i3e=class{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}areRowsEqual(e,t){return e===t}},r3e=class{constructor(e,t){this.model=e,this.showAddCurrentSelectionToFilter=t}getRowCount(){let t=this.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t}getRow(e){if(e===0)return this.model.getSelectAllItem();let t=this.showAddCurrentSelectionToFilter(),n=t?2:1;return e===1&&t?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(e-n)}areRowsEqual(e,t){return e===t}},o3e=class{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return e==null&&t==null?!0:e!=null&&t!=null&&e.treeKey===t.treeKey&&e.depth===t.depth}},s3e=class extends K{constructor(e,t,n,i,r){super(),this.createKey=e,this.caseFormat=t,this.getValue=n,this.isTreeDataOrGrouping=i,this.isTreeData=r}extractUniqueValuesAsync(e,t){return new tt(n=>{if(this.beans.rowModel.rowCountReady)n(this.extractUniqueValues(e,t));else{let[i]=this.addManagedEventListeners({rowCountReady:()=>{i?.(),n(this.extractUniqueValues(e,t))}})}})}extractUniqueValues(e,t){let n=new Map,i=this.extractExistingFormattedKeys(t),r=new Set,o=this.isTreeData(),s=this.isTreeDataOrGrouping(),a=this.beans.rowGroupColsSvc?.columns,l=this.gos.get("groupAllowUnbalanced"),c=(d,u)=>{let h=this.caseFormat(d);if(!r.has(h)){r.add(h);let p=d,f=hi(u),g=i?.get(h);g!=null&&(p=g,f=t.get(g)),n.set(p,f)}};return this.beans.rowModel.forEachLeafNode(d=>{if(!d.data||!e(d))return;if(s){this.addValueForTreeDataOrGrouping(d,o,a,c,l);return}let u=this.getValue(d);if(u!=null&&Array.isArray(u)){for(let h of u)c(this.createKey(h,d),h);u.length===0&&c(null,null)}else c(this.createKey(u,d),u)}),n}addValueForTreeDataOrGrouping(e,t,n=[],i,r){let o;if(t){if(e.childrenAfterGroup?.length)return;o=e.getRoute()??[e.key??e.id]}else o=n.map(a=>this.beans.valueSvc.getKeyForNode(a,e)),o.push(this.getValue(e));let s=kL(o,t,r);i(this.createKey(s),s)}extractExistingFormattedKeys(e){if(!e)return null;let t=new Map;return e.forEach((n,i)=>{t.set(this.caseFormat(i),i)}),t}},a3e=class{constructor(e){this.caseFormat=e,this.keys=null}isNull(){return this.keys==null}isEmpty(){return!this.keys?.size}update(e){let t=new Set;this.keys=t;let n=e?.values;if(n){let i=this.caseFormat;for(let r=0,o=n.length;r<o;r++)t.add(i(n[r]))}}has(e){return!!this.keys?.has(this.caseFormat(e))}destroy(){this.keys=null}},wZ=(e=>(e[e.PROVIDED_LIST=0]="PROVIDED_LIST",e[e.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",e[e.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES",e))(wZ||{}),dL=wZ,l3e=class extends K{constructor(e,t,n,i,r){super(),this.clientSideValuesExtractor=e,this.caseFormat=t,this.createKey=n,this.isTreeDataOrGrouping=i,this.params=r,this.allValues=new Map,this.availableKeys=new Set,this.providedValues=null,this.initialised=!1}postConstruct(){let e=this.params,t=e.handlerParams.filterParams.values;this.updateParams(e),t==null?this.valuesType=2:(this.valuesType=Array.isArray(t)?0:1,this.providedValues=t),this.updateAllValues()}refresh(e){let t=e.handlerParams;if(t.source!=="colDef")return;let{values:n,suppressSorting:i}=t.filterParams,r=this.providedValues,o=this.params.handlerParams.filterParams.suppressSorting;this.params=e,this.updateParams(e),this.providedValues=n??null,(this.providedValues!==r||i!==o)&&(!n||n.length===0?(this.valuesType=2,this.providedValues=null):this.valuesType=Array.isArray(n)?0:1,this.updateAllValues())}updateParams(e){let{handlerParams:{colDef:t,filterParams:{comparator:n,treeList:i,treeListPathGetter:r}},usingComplexObjects:o}=e,s=n??t.comparator,a=this.isTreeDataOrGrouping(),l;a&&!s?l=n3e():i&&!r&&!s?l=([c,d],[u,h])=>u0(d,h):l=([c,d],[u,h])=>s(d,h),this.entryComparator=l,this.keyComparator=s??u0,this.compareByValue=!!(o&&s||a||i&&!r)}updateAllValues(){return this.allKeys=new tt(e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync().then(t=>e(this.processAllValues(t)));break;case 0:{e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break}case 1:{this.dispatchLocalEvent({type:"loadingStart"});let t=this.providedValues,{column:n,colDef:i}=this.params.handlerParams,r=Oe(this.gos,{success:o=>{this.dispatchLocalEvent({type:"loadingEnd"}),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(o))))},colDef:i,column:n});window.setTimeout(()=>t(r),0);break}}}),this.allKeys.then(e=>{this.updateAvailableKeys(e??[]),this.initialised=!0}),this.allKeys}getAvailableValues(e){return this.sortKeys(this.getValuesFromRows(e))}overrideValues(e){return this.allKeys.then(()=>{this.valuesType=0,this.providedValues=e})}refreshAvailable(){return new tt(e=>{if(this.showAvailableOnly()){this.allKeys.then(t=>{let n=t??[];this.updateAvailableKeys(n),e(!0)});return}e(!1)})}refreshAll(){return new tt(e=>{this.allKeys.then(()=>{this.updateAllValues().then(()=>{e()})})})}isLoading(){return!this.initialised&&this.valuesType===1}isInitialised(){return this.initialised}getValueForFormatter(e){return this.initialised?this.allValues.get(e):e}getAvailableKeys(e){return this.initialised?e.filter(t=>this.availableKeys.has(t)):e}getParamsForValuesFromRows(e){if(!this.clientSideValuesExtractor){mt(113);return}return e&&!this.params.handlerParams.filterParams.caseSensitive?this.allValues:void 0}getValuesFromRows(e){let t=this.getParamsForValuesFromRows(!0);return this.clientSideValuesExtractor?.extractUniqueValues(e,t)??null}getValuesFromRowsAsync(){let e=this.getParamsForValuesFromRows(!1);return this.clientSideValuesExtractor?.extractUniqueValuesAsync(()=>!0,e)??tt.resolve(null)}processAllValues(e){let t=this.sortKeys(e);return this.allValues=e??new Map,t}uniqueValues(e){let t=new Map,n=new Set,{caseFormat:i,createKey:r}=this;for(let o of e??[]){let s=hi(o),a=r(s),l=i(a);n.has(l)||(n.add(l),t.set(a,s))}return t}validateProvidedValues(e){if(this.params.usingComplexObjects&&e?.length){let t=e[0];t&&typeof t!="object"&&typeof t!="function"&&(this.createKey(t)==null?X(209):X(210))}return e}sortKeys(e){let t=e??new Map,n=this.params.handlerParams.filterParams;if(n.suppressSorting)return Array.from(t.keys());let i;return this.compareByValue?i=Array.from(t.entries()).sort(this.entryComparator).map(([r])=>r):i=Array.from(t.keys()).sort(this.keyComparator),n.excelMode&&t.has(null)&&(i=i.filter(r=>r!=null),i.push(null)),i}showAvailableOnly(){return this.valuesType===2}updateAvailableKeys(e){let t=this.showAvailableOnly()?this.getAvailableValues(n=>this.params.handlerParams.doesRowPassOtherFilter(n)):e;this.availableKeys=new Set(t),this.dispatchLocalEvent({type:"availableValuesChanged"})}},c3e=class extends K{constructor(){super(...arguments),this.filterType="set",this.treeDataTreeList=!1,this.groupingTreeList=!1,this.caseSensitive=!1,this.noValueFormatterSupplied=!1}init(e){this.updateParams(e);let t=this.isTreeDataOrGrouping.bind(this),n=()=>this.treeDataTreeList,i=this.createKey,r=this.caseFormat.bind(this),{gos:o,beans:s}=this,a=nn(o,s.rowModel)?this.createManagedBean(new s3e(i,r,e.getValue,t,n)):void 0;this.valueModel=this.createManagedBean(new l3e(a,r,i,t,{handlerParams:e,usingComplexObjects:!!(e.filterParams.keyCreator??e.colDef.keyCreator)})),this.appliedModel=new a3e(this.caseFormat.bind(this)),this.appliedModel.update(e.model),this.validateModel(e),this.addEventListenersForDataChanges()}refresh(e){this.updateParams(e),this.valueModel.refresh({handlerParams:e,usingComplexObjects:!!(e.filterParams.keyCreator??e.colDef.keyCreator)}),this.appliedModel.update(e.model),this.validateModel(e)}updateParams(e){this.params=e;let{colDef:t,filterParams:{caseSensitive:n,treeList:i,keyCreator:r,valueFormatter:o}}=e;this.caseSensitive=!!n;let s=!!t.showRowGroup;this.treeDataTreeList=this.gos.get("treeData")&&!!i&&s,this.groupingTreeList=!!this.beans.rowGroupColsSvc?.columns.length&&!!i&&s;let a=r??t.keyCreator;this.createKey=this.generateCreateKey(a,this.isTreeDataOrGrouping()),this.setValueFormatter(o,a,!!i,!!t.refData)}doesFilterPass(e){let{appliedModel:t,treeDataTreeList:n,groupingTreeList:i}=this;if(t.isNull())return!0;if(t.isEmpty())return!1;let{node:r}=e;if(n)return this.doesFilterPassForTreeData(r);if(i)return this.doesFilterPassForGrouping(r);let o=this.params.getValue(r);return o!=null&&Array.isArray(o)?o.length===0?t.has(null):o.some(s=>t.has(this.createKey(s,r))):t.has(this.createKey(o,r))}getFormattedValue(e){let t=this.valueModel.getValueForFormatter(e);this.noValueFormatterSupplied&&this.isTreeDataOrGrouping()&&Array.isArray(t)&&(t=Qe(t));let n=this.beans.valueSvc.formatValue(this.params.column,null,t,this.valueFormatter,!1);return n??Xr(t)??pa(this,"blanks")}getModelAsString(e,t){let{values:n}=e??{},i=t==="filterToolPanel";if(n==null)return i?pa(this,"filterSummaryListInactive"):"";let r=this.valueModel.getAvailableKeys(n),o=r.length,s=i?3:10,a=r.slice(0,s).map(l=>this.getFormattedValue(l));if(i){let l=a.join(pa(this,"filterSummaryListSeparator"));return o>3?pa(this,"filterSummaryListLong",[l,String(o-3)]):pa(this,"filterSummaryListShort",[l])}return`(${o}) ${a.join(",")}${o>10?",...":""}`}onAnyFilterChanged(){window.setTimeout(()=>{this.isAlive()&&this.valueModel.refreshAvailable().then(e=>{this.dispatchLocalEvent({type:"anyFilterChanged",updated:!!e})})})}onNewRowsLoaded(){this.syncAfterDataChange()}setFilterValues(e){this.valueModel.overrideValues(e).then(()=>{this.refreshFilterValues()})}resetFilterValues(){this.valueModel.valuesType=dL.TAKEN_FROM_GRID_VALUES,this.syncAfterDataChange()}refreshFilterValues(e){this.valueModel.isInitialised()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged",hardRefresh:!0}),this.validateModel(this.params,void 0,!e)})}getFilterKeys(){return Array.from(this.valueModel.allValues.keys())}getFilterValues(){return Array.from(this.valueModel.allValues.values())}isTreeDataOrGrouping(){return this.treeDataTreeList||this.groupingTreeList}caseFormat(e){return e==null||typeof e!="string"||this.caseSensitive?e:e.toUpperCase()}addEventListenersForDataChanges(){this.addManagedPropertyListeners(["groupAllowUnbalanced"],()=>this.syncAfterDataChange());let e=$n(this,this.syncAfterDataChange.bind(this),0);this.addManagedEventListeners({cellValueChanged:t=>{t.column===this.params.column&&e()}})}syncAfterDataChange(){this.isValuesTakenFromGrid()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged"}),this.validateModel(this.params,{afterDataChange:!0})})}validateModel(e,t,n){let i=this.valueModel;i.allKeys.then(()=>{let r=e.model;if(r==null)return;let o=new Map,s=p=>o.set(this.caseFormat(p),p);if(n)for(let p of i.availableKeys)s(p);else i.allValues.forEach((p,f)=>s(f));let a=[],l=!1;for(let p of r.values){let f=this.caseFormat(hi(p)),g=o.get(f);g!==void 0?(a.push(g),g!==p&&(l=!0)):l=!0}let c=a.length,d=e.filterParams;if(c===0&&d.excelMode){e.onModelChange(null,t);return}let h=!d.defaultToNothingSelected&&(this.valueModel.valuesType===dL.TAKEN_FROM_GRID_VALUES||!d.suppressClearModelOnRefreshValues)&&c===o.size;if(l||!r.filterType||h){let p=h?null:{filterType:this.filterType,values:a};e.onModelChange(p,t)}})}isValuesTakenFromGrid(){return this.valueModel.valuesType===dL.TAKEN_FROM_GRID_VALUES}doesFilterPassForTreeData(e){if(e.childrenAfterGroup?.length)return!1;let{gos:t,appliedModel:n}=this;return n.has(this.createKey(kL(e.getRoute()??[e.key??e.id],!0,t.get("groupAllowUnbalanced"))))}doesFilterPassForGrouping(e){let{appliedModel:t,params:n,gos:i,beans:{rowGroupColsSvc:r,valueSvc:o}}=this,s=(r?.columns??[]).map(a=>o.getKeyForNode(a,e));return s.push(n.getValue(e)),t.has(this.createKey(kL(s,!1,i.get("groupAllowUnbalanced"))))}generateCreateKey(e,t){return t&&!e?(mt(250),()=>null):e?(n,i=null)=>{let r=this.getKeyCreatorParams(n,i);return hi(e(r))}:n=>hi(Xr(n))}getKeyCreatorParams(e,t=null){let{colDef:n,column:i}=this.params;return Oe(this.gos,{value:e,colDef:n,column:i,node:t,data:t?.data})}setValueFormatter(e,t,n,i){let r=e;if(!r){if(t&&!n){mt(249);return}this.noValueFormatterSupplied=!0,i||(r=o=>Xr(o.value))}this.valueFormatter=r}getCrossFilterModel(e){let{createKey:t,valueModel:n,params:i}=this;return e(t,n.availableKeys,i.model?.values)}destroy(){this.appliedModel.destroy(),super.destroy(),this.valueModel=void 0}},d3e={tag:"div",cls:"ag-floating-filter-input ag-set-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},u3e=class extends pe{constructor(){super(d3e,[Jr]),this.eFloatingFilterText=q,this.listenerAdded=!1}init(e){this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(e)}setParams(e){let t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0),n=this.getLocaleTextFunc();if(this.eFloatingFilterText.setInputAriaLabel(`${t} ${n("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){let i=e;this.updateFloatingFilterText(i.model)}}refresh(e){this.params=e,this.setParams(e)}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance(t=>{if(!(t instanceof bZ)){mt(248);return}e(t)})}addAvailableValuesListener(){let e=t=>{if(!t?.isAlive())return;let n=t.valueModel;this.destroyListeners=n.addManagedListeners(n,{availableValuesChanged:()=>this.updateFloatingFilterText(t.params.model),destroyed:()=>{this.listenerAdded=!1,this.destroyListeners=void 0}})};this.gos.get("enableFilterHandlers")?e(this.params.getHandler()):this.parentSetFilterInstance(t=>{e(t.handler)}),this.listenerAdded=!0}updateFloatingFilterText(e){e==null?this.eFloatingFilterText.setValue(""):(this.listenerAdded||this.addAvailableValuesListener(),this.gos.get("enableFilterHandlers")?this.eFloatingFilterText.setValue(this.params.getHandler().getModelAsString?.(e)??""):this.parentSetFilterInstance(t=>{this.eFloatingFilterText.setValue(t.getModelAsString(e))}))}destroy(){let e=this.destroyListeners;if(e){for(let t of e)t();e.length=0}super.destroy()}},h3e={moduleName:"SetFilter",version:Lt,userComponents:{agSetColumnFilter:{classImp:bZ,params:{useForm:!0},processParams:e=>(t3e(e),e)},agSetColumnFloatingFilter:u3e},dynamicBeans:{agSetColumnFilterHandler:c3e},icons:{setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",setFilterLoading:"loading"},dependsOn:[ti,Wa]},p3e=".ag-status-bar{border-top:var(--ag-footer-row-border);display:flex;justify-content:space-between;line-height:1.5;overflow:hidden;padding-left:calc(var(--ag-spacing)*4);padding-right:calc(var(--ag-spacing)*4)}.ag-status-panel,:where(.ag-status-panel.ag-status-panel-aggregations .ag-status-name-value){display:inline-flex}.ag-status-name-value{color:var(--ag-status-bar-label-color);font-weight:var(--ag-status-bar-label-font-weight);margin-left:var(--ag-spacing);margin-right:var(--ag-spacing);padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding);white-space:nowrap}.ag-status-name-value-value{color:var(--ag-status-bar-value-color);font-weight:var(--ag-status-bar-value-font-weight)}.ag-status-bar-left{display:inline-flex}.ag-status-bar-center{display:inline-flex;text-align:center}.ag-status-bar-right{display:inline-flex}";function f3e(e,t,n){return e.getCompDetails(t,g3e,void 0,n,!0)}var g3e={name:"statusPanel",optionalMethods:["refresh"]},m3e={agAggregationComponent:{rowModels:["clientSide","serverSide"],warnArgs:[221]},agFilteredRowCountComponent:{rowModels:["clientSide"],warnArgs:[222]},agSelectedRowCountComponent:{rowModels:["clientSide","serverSide"],warnArgs:[223]},agTotalAndFilteredRowCountComponent:{rowModels:["clientSide"],warnArgs:[224]},agTotalRowCountComponent:{rowModels:["clientSide"],warnArgs:[225]}},v3e={tag:"div",cls:"ag-status-bar",children:[{tag:"div",ref:"eStatusBarLeft",cls:"ag-status-bar-left",role:"status"},{tag:"div",ref:"eStatusBarCenter",cls:"ag-status-bar-center",role:"status"},{tag:"div",ref:"eStatusBarRight",cls:"ag-status-bar-right",role:"status"}]},C3e=class extends pe{constructor(){super(v3e),this.updateQueued=!1,this.panelsPromise=tt.resolve(),this.eStatusBarLeft=q,this.eStatusBarCenter=q,this.eStatusBarRight=q,this.compDestroyFunctions={},this.registerCSS(p3e)}wireBeans(e){this.userCompFactory=e.userCompFactory,this.statusBarSvc=e.statusBarSvc}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}getValidPanels(){let e=this.gos,t=e.get("statusBar")?.statusPanels;return t&&t.filter(n=>{let{rowModels:i,warnArgs:r}=m3e[n.statusPanel]??{};return!i||i.includes(e.get("rowModelType"))?!0:(X(...r),!1)})}processStatusPanels(e){let t=this.getValidPanels();if(t){let n=t.filter(o=>o.align==="left"),i=t.filter(o=>o.align==="center"),r=t.filter(o=>!o.align||o.align==="right");this.panelsPromise=tt.all([this.createAndRenderComponents(n,this.eStatusBarLeft,e),this.createAndRenderComponents(i,this.eStatusBarCenter,e),this.createAndRenderComponents(r,this.eStatusBarRight,e)])}else this.setDisplayed(!1)}handleStatusBarChanged(){this.updateQueued||(this.updateQueued=!0,this.panelsPromise.then(()=>{this.updateStatusBar(),this.updateQueued=!1}))}updateStatusBar(){let e=this.getValidPanels(),t=Array.isArray(e)&&e.length>0;this.setDisplayed(t);let n=new Map;if(t)for(let i of e){let r=i.key??i.statusPanel,o=this.statusBarSvc.getStatusPanel(r);if(o?.refresh){let s=Oe(this.gos,ce(T({},i.statusPanelParams??{}),{key:r}));o.refresh(s)&&(n.set(r,o),delete this.compDestroyFunctions[r],Bt(o.getGui()))}}this.resetStatusBar(),t&&this.processStatusPanels(n)}resetStatusBar(){at(this.eStatusBarLeft),at(this.eStatusBarCenter),at(this.eStatusBarRight),this.destroyComponents(),this.statusBarSvc.unregisterAllComponents()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){for(let e of Object.values(this.compDestroyFunctions))e();this.compDestroyFunctions={}}createAndRenderComponents(e,t,n){let i=[];for(let r of e){let o=r.key||r.statusPanel,s=n.get(o),a;if(s)a=tt.resolve(s);else{let l=f3e(this.userCompFactory,r,Oe(this.gos,{key:o}));if(l==null)continue;a=l.newAgStackInstance()}i.push({key:o,promise:a})}return tt.all(i.map(r=>r.promise)).then(()=>{for(let r of i)r.promise.then(o=>{let s=()=>{this.destroyBean(o)};this.isAlive()?(this.statusBarSvc.registerStatusPanel(r.key,o),t.appendChild(o.getGui()),this.compDestroyFunctions[r.key]=s):s()})})}},b3e={selector:"AG-STATUS-BAR",component:C3e},w3e={tag:"div",cls:"ag-status-name-value",children:[{tag:"span",ref:"eLabel"},":\xA0",{tag:"span",ref:"eValue",cls:"ag-status-name-value-value"}]},Jy=class extends pe{constructor(){super(w3e),this.eLabel=q,this.eValue=q}setLabel(e,t){this.setDisplayed(!1),this.eLabel.textContent=this.getLocaleTextFunc()(e,t)}setValue(e,t){this.eValue.textContent=this.valueFormatter(Oe(this.gos,{value:e,totalRows:t,key:this.key}))}},y3e={selector:"AG-NAME-VALUE",component:Jy},yZ=e=>{let t=0;return e.forEachNodeAfterFilter(n=>{n.data&&t++}),t},e1=e=>{let t=0;return e.forEachNode(n=>{n.data&&t++}),t};function S3e(e,t){return typeof e!="number"?"":Bl(Math.round(e*100)/100,t)}var x3e={tag:"div",cls:"ag-status-panel ag-status-panel-aggregations",children:[{tag:"ag-name-value",ref:"avgAggregationComp"},{tag:"ag-name-value",ref:"countAggregationComp"},{tag:"ag-name-value",ref:"minAggregationComp"},{tag:"ag-name-value",ref:"maxAggregationComp"},{tag:"ag-name-value",ref:"sumAggregationComp"}]},E3e=class extends pe{constructor(){super(x3e,[y3e]),this.sumAggregationComp=q,this.countAggregationComp=q,this.minAggregationComp=q,this.maxAggregationComp=q,this.avgAggregationComp=q}postConstruct(){this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedEventListeners({cellSelectionChanged:this.onCellSelectionChanged.bind(this),modelUpdated:this.onCellSelectionChanged.bind(this)})}init(e){this.refresh(e)}refresh(e){this.params=e;let t=e.valueFormatter??(({value:i})=>S3e(i,this.getLocaleTextFunc.bind(this))),n=["avg","count","min","max","sum"];for(let i of n){let r=this.getAllowedAggregationValueComponent(i);r&&(r.key=i,r.valueFormatter=t.bind(this))}return this.onCellSelectionChanged(),!0}setAggregationComponentValue(e,t,n){let i=this.getAllowedAggregationValueComponent(e),r=e1(this.beans.rowModel);_e(i)&&i?(i.setValue(t,r),i.setDisplayed(n)):this.getAggregationValueComponent(e)?.setDisplayed(!1)}getAllowedAggregationValueComponent(e){let{aggFuncs:t}=this.params;return!t||t.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){let t=`${e}AggregationComp`;return this[t]}onCellSelectionChanged(){let e=this.beans,{rangeSvc:t,valueSvc:n}=e,i=t?.getCellRanges(),r=0,o=0,s=0,a=null,l=null,c={};if(i?.length&&t)for(let h=0;h<i.length;h++){let p=i[h],f=t.getRangeStartRow(p),g=t.getRangeEndRow(p);for(;!(jt(f)||!f||lr(g,f)||!f||!p.columns);)p.columns.forEach(m=>{if(f===null)return;let w=Bd({rowPinned:f.rowPinned,column:m,rowIndex:f.rowIndex});if(c[w])return;c[w]=!0;let x=Mi(e,f);if(jt(x))return;let D=n.getValue(m,x);jt(D)||D===""||(o++,!(typeof D=="object"&&"value"in D&&(D=D.value,D===""))&&(typeof D=="string"&&(D=Number(D)),typeof D=="number"&&!isNaN(D)&&(r+=D,(l===null||D>l)&&(l=D),(a===null||D<a)&&(a=D),s++)))}),f=Vr(e,f)}let d=o>1,u=s>1;this.setAggregationComponentValue("count",o,d),this.setAggregationComponentValue("sum",r,u),this.setAggregationComponentValue("min",a,u),this.setAggregationComponentValue("max",l,u),this.setAggregationComponentValue("avg",r/s,u)}},D3e=class extends Jy{postConstruct(){this.setLabel("filteredRows","Filtered"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);let e=this.onDataChanged.bind(this);this.addManagedEventListeners({modelUpdated:e})}onDataChanged(){let{rowModel:e}=this.beans,t=e1(e),n=yZ(e);this.setValue(n,t),this.setDisplayed(t!==n)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=e??(({value:t})=>Bl(t,this.getLocaleTextFunc.bind(this)))}refresh(e){let{key:t,valueFormatter:n}=e;return this.key=t,this.updateValueFormatter(n),!0}},_3e=class extends Jy{postConstruct(){this.setLabel("selectedRows","Selected"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-selected-row-count");let e=this.onRowSelectionChanged.bind(this);this.addManagedEventListeners({modelUpdated:e,selectionChanged:e})}onRowSelectionChanged(){let{selectionSvc:e,rowModel:t}=this.beans,n=e?.getSelectionCount()??0,i=e1(t);if(this.setValue(n,i),n<0){this.setDisplayed(!0);return}this.setDisplayed(n>0)}init(e){this.refresh(e),this.onRowSelectionChanged()}updateValueFormatter(e){this.valueFormatter=e??(({value:t})=>t==null||t>=0?Bl(t,this.getLocaleTextFunc.bind(this)):this.getLocaleTextFunc()("statusBarLastRowUnknown","?"))}refresh(e){let{key:t,valueFormatter:n}=e;return this.key=t,this.updateValueFormatter(n),!0}},A3e=class extends Jy{postConstruct(){this.setLabel("totalAndFilteredRows","Rows"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)})}onDataChanged(){let{rowModel:e}=this.beans,t=yZ(e),n=e1(e);this.setValue(t,n)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=e??(({value:t,totalRows:n})=>{let i=this.getLocaleTextFunc.bind(this),r=Bl(t,i),o=Bl(n??t,i);if(t===n)return r;let s=i();return`${r} ${s("of","of")} ${o}`})}refresh(e){let{key:t,valueFormatter:n}=e;return this.key=t,this.updateValueFormatter(n),!0}},R3e=class extends Jy{postConstruct(){this.setLabel("totalRows","Total Rows"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)})}onDataChanged(){let e=e1(this.beans.rowModel);this.setValue(e,e)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=e??(({value:t})=>Bl(t,this.getLocaleTextFunc.bind(this)))}refresh(e){let{key:t,valueFormatter:n}=e;return this.key=t,this.updateValueFormatter(n),!0}};function F3e(e,t){let n=e.statusBarSvc?.getStatusPanel(t);return Lu(n)}var M3e=class extends K{constructor(){super(),this.beanName="statusBarSvc",this.comps=new Map}registerStatusPanel(e,t){this.comps.set(e,t)}unregisterStatusPanel(e){this.comps.delete(e)}unregisterAllComponents(){this.comps.clear()}getStatusPanel(e){return this.comps.get(e)}destroy(){this.unregisterAllComponents(),super.destroy()}},I3e={moduleName:"StatusBar",version:Lt,beans:[M3e],userComponents:{agAggregationComponent:E3e,agTotalRowCountComponent:R3e,agFilteredRowCountComponent:D3e,agTotalAndFilteredRowCountComponent:A3e,agSelectedRowCountComponent:_3e},selectors:[b3e],apiFunctions:{getStatusPanel:F3e},dependsOn:[ti,Ag]};function SZ(e){return e.excelCreator?.getFactoryMode()==="MULTI_SHEET"?(X(161),!1):!0}function T3e(e,t){if(SZ(e))return e.excelCreator?.getDataAsExcel(t)}function P3e(e,t){SZ(e)&&e.excelCreator?.exportDataAsExcel(t)}function k3e(e,t){return e.excelCreator?.setFactoryMode("MULTI_SHEET"),e.excelCreator?.getSheetDataForExcel(t)}function L3e(e,t){return e.excelCreator?.getMultipleSheetsAsExcel(t)}function O3e(e,t){e.excelCreator?.exportMultipleSheetsAsExcel(t)}var N3e={moduleName:"ExcelExport",version:Lt,beans:[rMe],apiFunctions:{getDataAsExcel:T3e,exportDataAsExcel:P3e,getSheetDataForExcel:k3e,getMultipleSheetsAsExcel:L3e,exportMultipleSheetsAsExcel:O3e},dependsOn:[Y5,ti]};function RA(e){let{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}function fA(e,t){if(e!=null)for(let n=e.length-1;n>=0;n--)t(e[n],n)}function B3e(e,t){return t.title!=null?t.title:e instanceof xg?e.getFilterTitle():"Filter"}function gA(e,t,n,i){let r=[],o=e?.filterModels;for(let s=0;s<t;s++)r[s]=(s===i?n:o?.[s])??null;return r.every(s=>s==null)?null:{filterType:"multi",filterModels:r}}function zu(e,t){return e?.filterModels?.[t]??null}function mA(e,t,n,i){let r=n.filterValueGetter;return r?e.colFilter.createGetValue(t,r):i}var xZ=class extends Vd{constructor(){super({tag:"div",cls:"ag-multi-filter ag-menu-list-compact"}),this.filterDefs=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.lastActivatedMenuItem=null}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}refreshGui(e){return e===this.lastOpenedInContainer?tt.resolve():(this.tabGuardFeature.removeAllChildrenExceptTabGuards(),this.destroyChildren(),tt.all(this.getFilterWrappers().map((t,n)=>{if(!t)return tt.resolve(null);let i=this.getFilterFromWrapper(t),r=this.getCompFromWrapper(t),o=this.filterDefs[n],s=B3e(i,o),a;if(o.display==="subMenu"&&e!=="toolPanel")a=this.insertFilterMenu(r,i,s).then(l=>l.getGui());else if(o.display==="subMenu"||o.display==="accordion"){let l=this.insertFilterGroup(i,r,s);a=tt.resolve(l.getGui())}else a=tt.resolve(r.getGui());return a})).then(t=>{t.forEach((n,i)=>{n&&(i>0&&this.appendChild(bt({tag:"div",cls:"ag-filter-separator"})),this.appendChild(n))}),this.filterGuis=t,this.lastOpenedInContainer=e}))}destroyChildren(){for(let e of this.guiDestroyFuncs)e();this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t,n){let i=e.getGui();Jn(i,"dialog");let r=this.createBean(new oPe),o={getGui:()=>e.getGui(),afterGuiAttached:s=>{e.afterGuiAttached?.(s),e!==t&&t.afterGuiAttached?.(s)}};return r.init({menuItemDef:{name:n,subMenu:[],subMenuRole:"dialog",cssClasses:["ag-multi-filter-menu-item"],menuItem:tZ,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:o,contextParams:{column:null,node:null,value:null}}).then(()=>{r.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(r)),this.addManagedListeners(r,{menuItemActivated:a=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==a.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=a.menuItem}});let s=r.getGui();return r.addManagedElementListeners(s,{keydown:a=>{let{key:l}=a;switch(l){case $.UP:case $.RIGHT:case $.DOWN:case $.LEFT:a.preventDefault(),l===$.RIGHT&&r.openSubMenu(!0);break}},focusin:()=>r.activate(),focusout:()=>{!r.isSubMenuOpen()&&!r.isSubMenuOpening()&&r.deactivate()}}),r})}insertFilterGroup(e,t,n){let i=this.createBean(new qu({title:n,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(i)),i.addItem(t.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListeners(i,{expanded:()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})}),i}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=tt.resolve());let n=e?.suppressFocus;t.then(()=>{let{filterDefs:i,filterGuis:r,beans:o}=this,s=this.getFilterWrappers(),a=!!n;i&&fA(i,(c,d)=>{let u=d===0,h=c.display&&c.display!=="inline",p=n||!u||h,f=ce(T({},e??{}),{suppressFocus:p}),g=s[d],C=g?this.getFilterFromWrapper(g):void 0;if(g){let m=this.getCompFromWrapper(g);m!==C&&m.afterGuiAttached(f)}if(C&&(this.executeFunctionIfExistsOnFilter(C,"afterGuiAttached",f),u&&!p&&(a=!0)),!n&&u&&h){let m=r[d];m&&(qn(m)||m.focus({preventScroll:!0}),a=!0)}});let l=wt(o);!a&&(Ts(o)||this.getGui().contains(l))&&this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged",e=>this.executeOnWrapper(e,"onAnyFilterChanged"))}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded",e=>this.executeOnWrapper(e,"onNewRowsLoaded"))}destroy(){this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeOnWrapper(e,t){}executeFunctionIfExists(e,t){fA(this.getFilterWrappers(),n=>{n&&(t?.(n),this.executeFunctionIfExistsOnFilter(this.getFilterFromWrapper(n),e))})}executeFunctionIfExistsOnFilter(e,t,...n){let i=e[t];typeof i=="function"&&i.apply(e,n)}onFocusIn(e){let t=this.lastActivatedMenuItem;t!=null&&!t.getGui().contains(e.target)&&(t.deactivate(),this.lastActivatedMenuItem=null)}},EZ=class extends xZ{constructor(){super(...arguments),this.filterType="multi",this.wrappers=[],this.activeFilterIndices=[],this.afterFiltersReadyFuncs=[]}init(e){this.params=e,this.filterDefs=RA(e);let t=Kr(this.beans.colFilter.model,e.column.getColId()),{filterChangedCallback:n}=e;this.filterChangedCallback=n;let i=this.filterDefs.map((r,o)=>this.createFilter(r,o,t));return new tt(r=>{tt.all(i).then(o=>{this.wrappers=o,this.refreshGui("columnMenu").then(()=>{r()})})}).then(()=>{for(let r of this.afterFiltersReadyFuncs)r();this.afterFiltersReadyFuncs.length=0})}refresh(e){return this.params=e,!0}isFilterActive(){return this.wrappers.some(e=>{if(!e)return!1;let{filter:t,handler:n,model:i}=e;return n?i!=null:t.isFilterActive()})}getLastActiveFilterIndex(){let e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}doesFilterPass(e,t){return this.wrappers.every((n,i)=>{if(!n||t!=null&&i===t)return!0;let{handler:r,filter:o,model:s}=n;return r?s==null||r.doesFilterPass(ce(T({},e),{model:s,handlerParams:n.handlerParams})):!o.isFilterActive()||o.doesFilterPass(e)})}getModelFromUi(){return{filterType:this.filterType,filterModels:this.wrappers.map(t=>{if(!t)return null;let n=t.filter;return typeof n.getModelFromUi=="function"?n.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.filterType,filterModels:this.wrappers.map(t=>{if(!t)return null;let{filter:n,handler:i,model:r}=t;return i?r:n.isFilterActive()?n.getModel():null})}:null}setModel(e){let t=(i,r)=>new tt(o=>{let s=i.setModel(r);s?s.then(()=>o()):o()}),n=[];return this.wrappers.forEach((i,r)=>{if(!i)return;let o=zu(e,r),{filter:s,filterParams:a,handler:l,handlerParams:c,state:d}=i;if(l){let u={model:o,state:d?.state};i.state=u,i.model=o,n.push(F_(()=>tt.resolve({filter:s,filterParams:a}),l,c,o,u,"api").then(()=>{this.updateActiveListForHandler(r,i.model)}))}else n.push(t(s,o).then(()=>{this.updateActiveListForFilter(r,s)}))}),tt.all(n).then(()=>{})}applyModel(e="api"){let t=!1;for(let n of this.wrappers)if(n){let i=n.filter;i instanceof xg&&(t=i.applyModel(e)||t)}return t}getChildFilterInstance(e){return this.wrappers[e]?.filter}getNumChildFilters(){return this.wrappers.length}destroy(){for(let e of this.wrappers)this.destroyBean(e?.filter),this.destroyBean(e?.handler);this.wrappers.length=0,super.destroy()}getFilterWrappers(){return this.wrappers}getFilterFromWrapper(e){return e.filter}getCompFromWrapper(e){return e.comp}executeOnWrapper(e,t){e.handler?.[t]?.()}createFilter(e,t,n){let i=this.params.column,r=null,o,s=this.beans,a=(p,f)=>{let g=this.wrappers[t];if(!g)return;let C={model:p,state:g.state?.state};g.state=C,g.model=p,F_(()=>tt.resolve({filter:g.filter,filterParams:g.filterParams}),g.handler,g.handlerParams,p,C,"ui").then(()=>{this.onHandlerModelChanged(t,g.model,f)})},{compDetails:l,handler:c,handlerParams:d,createFilterUi:u}=s.colFilter.createFilterInstance(i,e,"agTextColumnFilter",(p,f)=>{let g=ce(T({},p),{filterChangedCallback:f?()=>{}:C=>{this.executeWhenAllFiltersReady(()=>this.onFilterModelChanged(t,C))},doesRowPassOtherFilter:C=>p.doesRowPassOtherFilter(C)&&this.doesFilterPass({node:C,data:C.data},t),getValue:mA(s,i,e,p.getValue)});return f&&(r=zu(n,t),o=this.updateDisplayParams(g,t,r,()=>l,()=>c,a)),g});if(!u)return tt.resolve(null);let h;if(c){let{doesRowPassOtherFilter:p,getValue:f}=d;h=ce(T({},d),{onModelChange:a,doesRowPassOtherFilter:g=>p(g)&&this.doesFilterPass({node:g,data:g.data},t),getValue:mA(s,i,e,f)}),c.init?.(ce(T({},h),{model:r,source:"init"}))}return u().then(p=>{if(!c)return{filter:p,comp:p};let f=l?.params,g=o(p);return{filter:p,comp:g,filterParams:f,handler:c,handlerParams:h,model:r}})}updateDisplayParams(e,t,n,i,r,o){let s=this.params.column,a=new Rc;e.model=n,e.state={model:n},e.onModelChange=o,e.getHandler=r;let l=(d,u)=>{d.state=u,a.dispatchEvent({type:"filterStateChanged",column:s,state:u})};e.onStateChange=d=>{let u=this.wrappers[t];u&&(l(u,d),E0(u.filter,u.filterParams,u.model??null,d,"ui"))};let c=(d,u,h)=>{let p=this.wrappers[t];if(!p)return;let f=()=>p?.model??null;ZD({action:u,filterParams:p.filterParams,getFilterUi:()=>{let g=tt.resolve(p.filter);return{created:!0,filterParams:p.filterParams,compDetails:i(),create:()=>g,promise:g}},getModel:f,getState:()=>p?.state??{model:f()},updateState:g=>l(p,g),updateModel:g=>p.filterParams?.onModelChange(g,h),processModelToApply:p.handler?.processModelToApply?.bind(p.handler)})};return e.onAction=(d,u,h)=>{c(s,d,u),a.dispatchEvent({type:"filterAction",column:s,action:d,event:h})},d=>{let u=i()?.params;return this.createManagedBean(new a5(s,{comp:d,params:u,isHandler:!0},a,c,!1))}}executeWhenAllFiltersReady(e){(this.wrappers?.length??0)>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveListForFilter(e,t){this.updateActiveList(e,()=>t?.isFilterActive())}updateActiveListForHandler(e,t){this.updateActiveList(e,()=>t!=null)}updateActiveList(e,t){let n=this.activeFilterIndices;Ci(this.activeFilterIndices,e),t()&&n.push(e)}onFilterModelChanged(e,t){this.updateActiveListForFilter(e,this.wrappers[e]?.filter),this.filterChanged(e,t)}onHandlerModelChanged(e,t,n){this.updateActiveListForHandler(e,t),this.filterChanged(e,n)}filterChanged(e,t){this.filterChangedCallback(t),this.wrappers.forEach((n,i)=>{if(e===i||!n)return;let{filter:r,handler:o}=n;o?.onAnyFilterChanged?.(),typeof r.onAnyFilterChanged=="function"&&r.onAnyFilterChanged()})}getModelAsString(e){if(!e?.filterModels?.length)return"";let t=this.getLastActiveFilterIndex()??0;return this.wrappers[t]?.filter?.getModelAsString?.(e.filterModels[t])??""}},V3e=class extends K{constructor(){super(...arguments),this.filterType="multi",this.handlerWrappers=[],this.activeFilterIndices=[],this.filterDefs=[]}init(e){this.params=e;let t=RA(e.filterParams);this.filterDefs=t,t.forEach((n,i)=>{let r=this.beans.colFilter.createHandler(e.column,n,"agTextColumnFilter");if(this.handlerWrappers.push(r),!r){X(278,{colId:e.column.getColId()});return}let{handler:o,handlerParams:s}=r;o.init?.(ce(T({},this.updateHandlerParams(s,i,!0)),{model:zu(e.model,i),source:"init"}))}),this.resetActiveList(e.model)}refresh(e){this.params=e;let{model:t,source:n,filterParams:i}=e,r=i?.filters;this.handlerWrappers.forEach((o,s)=>{if(o){let a=this.updateHandlerParams(e,s,!1),l=a.filterParams,c=r?.[s].filterParams,d=c?T(T({},l),c):l,u=ce(T({},a),{filterParams:d});o.handlerParams=u,o.handler.refresh?.(ce(T({},u),{model:zu(t,s),source:n}))}}),e.source!=="floating"&&e.source!=="ui"&&this.resetActiveList(e.model),e.additionalEventAttributes?.fromButtons&&this.onAnyFilterChanged()}updateHandlerParams(e,t,n){let{onModelChange:i,doesRowPassOtherFilter:r,getValue:o}=e,s=ce(T({},e),{onModelChange:(a,l)=>i(gA(this.params.model,this.handlerWrappers.length,a,t),l),doesRowPassOtherFilter:a=>r(a)&&this.doesFilterPass({node:a,data:a.data,model:this.params.model,handlerParams:s},t),getValue:mA(this.beans,e.column,this.filterDefs[t],o)});return s.filterParams.buttons&&(n&&X(292,{colId:e.column.getColId()}),delete s.filterParams.buttons),s}doesFilterPass(e,t){let n=e.model?.filterModels;return n==null?!0:this.handlerWrappers.every((i,r)=>{let o=n[r];if(o==null||t!=null&&r===t)return!0;let s=i?.handler;return!s||s.doesFilterPass(ce(T({},e),{model:o,handlerParams:i.handlerParams}))})}resetActiveList(e){this.activeFilterIndices=[];let t=e?.filterModels;if(t!=null)for(let n=0;n<this.handlerWrappers.length;n++)t[n]!=null&&this.activeFilterIndices.push(n)}updateActiveList(e,t){let n=this.activeFilterIndices;Ci(n,e),t!=null&&n.push(e)}getLastActiveFilterIndex(){let e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}getModelAsString(e,t){let n=t==="filterToolPanel",i=()=>n?this.getLocaleTextFunc()("filterSummaryInactive","is (All)"):"";if(!e?.filterModels?.length)return i();let r=this.getLastActiveFilterIndex()??0;return this.handlerWrappers[r]?.handler.getModelAsString?.(e.filterModels[r],t)??i()}getHandler(e){return this.handlerWrappers[e]?.handler}onAnyFilterChanged(){fA(this.handlerWrappers,e=>e?.handler?.onAnyFilterChanged?.())}onNewRowsLoaded(){fA(this.handlerWrappers,e=>e?.handler?.onNewRowsLoaded?.())}destroy(){for(let e of this.handlerWrappers)this.destroyBean(e?.handler);this.handlerWrappers.length=0,super.destroy()}},G3e=class extends K{constructor(){super(...arguments),this.beanName="multiFilter"}getParamsForDataType(e,t,n,i){let r=e?.filters,o=this.beans;r||(r=[{filter:Dy(n.baseDataType)},{filter:"agSetColumnFilter"}]);let s=this.getLocaleTextFunc();return r=r.map(a=>{let{filter:l,filterParams:c,filterValueGetter:d}=a;if(typeof l!="string")return a;let{filterParams:u,filterValueGetter:h}=Ey(l,c,d??t,n,i,o,s);return ce(T({},a),{filterParams:u,filterValueGetter:h})}),{filterParams:ce(T({},e),{filters:r})}}},DZ=class extends xZ{constructor(){super(...arguments),this.filterType="multi",this.filters=[],this.filterParams=[],this.validity=[]}init(e){this.params=e;let t=RA(e).map(i=>{if(i.filterParams?.buttons){X(292,{colId:e.column.getColId()});let r=T({},i.filterParams);return delete r.buttons,ce(T({},i),{filterParams:r})}return i});this.filterDefs=t,this.allState=e.state;let n=this.filterDefs.map((i,r)=>this.createFilter(i,r));return new tt(i=>{tt.all(n).then(r=>{this.filters=r,this.refreshGui("columnMenu").then(()=>{i()})})})}refresh(e){let{model:t,state:n,source:i}=e;if(i==="colDef")return!1;this.params=e;let r=this.filterParams;if(n===this.allState)return!0;this.allState=n;let o=n.state;return this.filters.forEach((s,a)=>{let l=zu(t,a),c={state:o?.[a],model:zu(n.model,a)};E0(s,r[a],l,c,i)}),!0}getLastActiveFilterIndex(){return this.getHandler().getLastActiveFilterIndex?.()??null}getChildFilterInstance(e){return this.filters[e]??void 0}getNumChildFilters(){return this.filters.length}destroy(){for(let e of this.filters)this.destroyBean(e);this.filters.length=0,super.destroy()}getFilterWrappers(){return this.filters}getFilterFromWrapper(e){return e}getCompFromWrapper(e){return e}createFilter(e,t){let n=this.beans.userCompFactory,i=this.updateParams(e,this.params,t),r=qk(n,e,i,"agTextColumnFilter");return r?(this.filterParams[t]=r.params,r.newAgStackInstance()):tt.resolve(null)}updateParams(e,t,n){let{doesRowPassOtherFilter:i,model:r,onModelChange:o,state:s,onStateChange:a,column:l,source:c,onAction:d,onUiChange:u,getValue:h}=t,p=zu(r,n),f=s?{model:zu(s.model,n),state:s.state?.[n]}:{model:p},g=()=>{let m=this.getHandler();this.filters.forEach((w,x)=>{n!==x&&(m.getHandler(x)?.onAnyFilterChanged?.(),w?.onAnyFilterChanged?.())})},C=this.beans.colFilter;return ce(T(T({},C.createBaseFilterParams(l)),e),{doesRowPassOtherFilter:m=>i(m)&&this.getHandler().doesFilterPass({node:m,data:m.data,model:this.params.model,handlerParams:C.getHandlerParams(l)},n),model:p,state:f,onModelChange:(m,w)=>{let{filters:x,params:D}=this,F=gA(D.model,x.length,m,n);this.updateActiveList(n,m),o(F,w),g()},onStateChange:m=>this.onStateChange(a,n,m),getHandler:()=>this.getHandler().getHandler(n),onAction:(m,w,x)=>{if(_0(t))return;let D=m==="apply"||m==="reset";D&&this.updateActiveList(n,zu(this.params.state.model,n)),d(m,w,x),D&&g()},onUiChange:u,source:c,getValue:mA(this.beans,l,e,h)})}updateActiveList(e,t){this.getHandler().updateActiveList?.(e,t)}getHandler(){return this.params.getHandler()}onStateChange(e,t,n){let{model:i,state:r,valid:o}=n,s=this.validity;s[t]=o;let a=this.allState,l=gA(a.model,this.filters.length,i,t),c=s.every(h=>h!==!1),d=[...a.state??[]];d[t]=r;let u={state:d,model:l,valid:c};this.allState=u,e(u)}getModelAsString(e){return this.getHandler().getModelAsString?.(e)??""}},H3e={tag:"div",cls:"ag-multi-floating-filter ag-floating-filter-input"},z3e=class extends pe{constructor(){super(H3e),this.floatingFilters=[],this.compDetailsList=[]}init(e){this.params=e;let{compDetailsList:t}=this.getCompDetailsList(e);return this.setParams(t)}setParams(e){let t=[];return e.forEach(n=>{let i=n?.newAgStackInstance();i!=null&&(this.compDetailsList.push(n),t.push(i))}),tt.all(t).then(n=>{n.forEach((i,r)=>{this.floatingFilters.push(i);let o=i.getGui();this.appendChild(o),r>0&&Ie(o,!1)})})}refresh(e){this.params=e;let{compDetailsList:t,floatingFilterParamsList:n}=this.getCompDetailsList(e);if(t.length===this.compDetailsList.length&&t.every((r,o)=>!this.beans.colFilter?.areFilterCompsDifferent(this.compDetailsList[o],r))){if(n.forEach((r,o)=>{this.floatingFilters[o].refresh?.(r)}),this.gos.get("enableFilterHandlers")){let r=e;if(r.model==null)this.floatingFilters.forEach((o,s)=>{Ie(o.getGui(),s===0)});else{let o=r.getHandler()?.getLastActiveFilterIndex?.();this.floatingFilters.forEach((s,a)=>{let l=o==null?a===0:a===o;Ie(s.getGui(),l)})}}}else at(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(t)}getCompDetailsList(e){let t=[],n=[],i=e.filterParams,r=e.currentParentModel,o=RA(i);return o.forEach((s,a)=>{let l=ce(T({},e),{parentFilterInstance:d=>{this.parentMultiFilterInstance(u=>{let h=u.getChildFilterInstance(a);h!=null&&d(h)})},currentParentModel:()=>r()?.filterModels?.[a]??null});if(this.gos.get("enableFilterHandlers")){let d=l;d.model=d.model?.filterModels?.[a]??null;let{onModelChange:u,getHandler:h}=d;d.onModelChange=(p,f)=>u(gA(this.params.model,o.length,p,a),f),d.getHandler=()=>h().getHandler(a)}ji(l.filterParams,s.filterParams);let c=this.getCompDetails(s,l);c&&(t.push(c),n.push(l))}),{compDetailsList:t,floatingFilterParamsList:n}}onParentModelChanged(e,t){t?.afterFloatingFilter||this.parentMultiFilterInstance(n=>{if(e==null)this.floatingFilters.forEach((i,r)=>{i.onParentModelChanged(null,t),Ie(i.getGui(),r===0)});else{let i=n.getLastActiveFilterIndex();this.floatingFilters.forEach((r,o)=>{let s=e.filterModels.length>o?e.filterModels[o]:null;r.onParentModelChanged(s,t);let a=i==null?o===0:o===i;Ie(r.getGui(),a)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(e,t){let{colFilter:n,frameworkOverrides:i,userCompFactory:r}=this.beans,o=l5(i,e,()=>n.getDefaultFloatingFilter(this.params.column))??"agReadOnlyFloatingFilter";return Kk(r,e,t,o)}parentMultiFilterInstance(e){this.params.parentFilterInstance(t=>{t instanceof EZ||t instanceof DZ||mt(120),e(t)})}},j3e={moduleName:"MultiFilter",version:Lt,userComponents:{agMultiColumnFilter:{getComp:e=>e.gos.get("enableFilterHandlers")?{classImp:DZ,params:{useForm:!0}}:EZ},agMultiColumnFloatingFilter:z3e},beans:[G3e],dynamicBeans:{agMultiColumnFilterHandler:V3e},dependsOn:[ti,Wa,AA]},U3e=class extends K{constructor(){super(...arguments),this.beanName="aggColNameSvc"}getHeaderName(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let{valueColsSvc:n,colModel:i,rowGroupColsSvc:r}=this.beans,o=e.getColDef().pivotValueColumn,s=_e(o),a=null,l;if(s){let c=n?.columns??[],d=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&c.length===1,u=e.getColDef().pivotTotalColumnIds!==void 0;if(d&&!u)return t;a=o?o.getAggFunc():null,l=!0}else{let c=e.isValueActive(),d=r?.columns.length!==0,u=i.isPivotMode()||d||this.gos.get("treeData");c&&u?(a=e.getAggFunc(),l=!0):l=!1}if(l){let c=typeof a=="string"?a:"func";return`${this.getLocaleTextFunc()(c,c)}(${t})`}return t}},W3e={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},$3e=class extends K{constructor(){super(...arguments),this.beanName="aggFuncSvc",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){let e=this.aggFuncsMap;e.sum=q3e,e.first=K3e,e.last=Y3e,e.min=Z3e,e.max=X3e,e.count=J3e,e.avg=tke,this.initialised=!0}isAggFuncPossible(e,t){let i=this.getFuncNames(e).includes(t),r=_e(this.aggFuncsMap[t]);return i&&r}getDefaultFuncLabel(e){return W3e[e]??e}getDefaultAggFunc(e){let t=e.getColDef().defaultAggFunc;if(_e(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,"sum"))return"sum";let n=this.getFuncNames(e);return n?.length?n[0]:null}addAggFuncs(e){if(this.init(),!!e)for(let t of Object.keys(e))e[t]&&(this.aggFuncsMap[t]=e[t])}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){let t=e.getColDef().allowedAggFuncs;return t??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};function q3e(e){let{values:t}=e,n=null;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n===null?n=r:n+=typeof n=="number"?r:BigInt(r):typeof r=="bigint"&&(n===null?n=r:n=(typeof n=="bigint"?n:BigInt(n))+r)}return n}function K3e(e){return e.values.length>0?e.values[0]:null}function Y3e(e){return e.values.length>0?Qe(e.values):null}function Z3e(e){let{values:t}=e,n=null;for(let i=0;i<t.length;i++){let r=t[i];(typeof r=="number"||typeof r=="bigint")&&(n===null||n>r)&&(n=r)}return n}function X3e(e){let{values:t}=e,n=null;for(let i=0;i<t.length;i++){let r=t[i];(typeof r=="number"||typeof r=="bigint")&&(n===null||n<r)&&(n=r)}return n}var Q3e=Object.freeze({toString:function(){return this.value.toString()},toNumber:function(){return this.value}});function J3e(e){let{values:t}=e,n=0;for(let o=0;o<t.length;o++){let s=t[o];n+=s!=null&&typeof s.value=="number"?s.value:1}let i=e.rowNode?.aggData?.[e.column.getColId()];if(i&&i.value===n)return i;let r=Object.create(Q3e);return r.value=n,r}var eke=Object.freeze({toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}});function tke(e){let{values:t}=e,n=0,i=0;for(let a=0;a<t.length;a++){let l=t[a],c=null;typeof l=="number"||typeof l=="bigint"?(c=l,i++):l!=null&&(typeof l.value=="number"||typeof l.value=="bigint")&&typeof l.count=="number"&&(c=l.value*(typeof l.value=="number"?l.count:BigInt(l.count)),i+=l.count),typeof c=="number"?n+=typeof n=="number"?c:BigInt(c):typeof c=="bigint"&&(n=(typeof n=="bigint"?n:BigInt(n))+c)}let r=null;i>0&&(r=n/(typeof n=="number"?i:BigInt(i)));let o=e.rowNode?.aggData?.[e.column?.getColId()];if(o&&o.count===i&&o.value===r)return o;let s=Object.create(eke);return s.count=i,s.value=r,s}function nke(e,t){e.aggFuncSvc&&e.aggFuncSvc.addAggFuncs(t)}function ike(e){e.aggFuncSvc&&e.aggFuncSvc.clear()}function rke(e,t,n){e.valueColsSvc?.setColumnAggFunc?.(t,n,"api")}function P0(e,t,n,i,r,o){let s=typeof n=="string"?e.aggFuncSvc.getAggFunc(n):n;if(typeof s!="function")return X(109,{inputValue:n.toString(),allSuggestions:e.aggFuncSvc.getFuncNames(i)}),null;let a=Oe(e.gos,{values:t,column:i,colDef:i.colDef,pivotResultColumn:o,rowNode:r,data:r?.data});return s(a)}var oke=class extends K{constructor(){super(...arguments),this.beanName="aggStage",this.step="aggregate",this.refreshProps=["getGroupRowAgg","alwaysAggregateAtRootLevel","suppressAggFilteredOnly","grandTotalRow"]}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotResultCols=e.pivotResultCols,this.valueSvc=e.valueSvc}execute(e){let t=!this.valueColsSvc?.columns?.length,n=!this.gos.getCallback("getGroupRowAgg");if(t&&n&&e?.active)return;let i=this.createAggDetails(e);this.recursivelyCreateAggData(i)}createAggDetails(e){let t=this.colModel.isPivotActive(),n=this.valueColsSvc?.columns,i=t&&this.pivotColsSvc?this.pivotColsSvc.columns:[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!kl(this.gos),changedPath:e,valueColumns:n??[],pivotColumns:i,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return dg(this.gos)!==void 0||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){let t=n=>{if(!n.hasChildren()){n.aggData&&this.setAggData(n,null);return}if(n.level===-1&&!e.groupIncludeTotalFooter){let o=!this.colModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&o){this.setAggData(n,null);return}}this.aggregateRowNode(n,e)};e.changedPath.forEachChangedNodeDepthFirst(t,!0)}aggregateRowNode(e,t){let n=t.valueColumns.length===0,i=t.pivotColumns.length===0,r;t.userAggFunc?r=t.userAggFunc({nodes:e.childrenAfterFilter}):n?r=null:i?r=this.aggregateRowNodeUsingValuesOnly(e,t):r=this.aggregateRowNodeUsingValuesAndPivot(e),this.setAggData(e,r),e.sibling&&(this.setAggData(e.sibling,r),e.sibling.pinnedSibling&&this.setAggData(e.sibling.pinnedSibling,r))}aggregateRowNodeUsingValuesAndPivot(e){let t={},n=this.pivotResultCols?.getPivotResultCols()?.list??[],i=!0,r=this.beans;for(let o=0;o<n.length;o++){let s=n[o],a=s.getColDef();if(a.pivotTotalColumnIds!=null){i=!1;continue}let l=a.pivotKeys??[],c;e.leafGroup?c=this.getValuesFromMappedSet(e.childrenMapped,l,a.pivotValueColumn):c=this.getValuesPivotNonLeaf(e,a.colId),t[a.colId]=P0(r,c,a.pivotValueColumn.getAggFunc(),a.pivotValueColumn,e,s)}if(!i)for(let o=0;o<n.length;o++){let s=n[o],a=s.getColDef();if(!a.pivotTotalColumnIds?.length)continue;let l=a.pivotTotalColumnIds.map(c=>t[c]);t[a.colId]=P0(r,l,a.pivotValueColumn.getAggFunc(),a.pivotValueColumn,e,s)}return t}aggregateRowNodeUsingValuesOnly(e,t){let n={},{changedPath:i,valueColumns:r,filteredOnly:o}=t,s=i.active?i.getValueColumnsForNode(e,r):r,a=i.active?i.getNotValueColumnsForNode(e,r):null,l=this.getValuesNormal(e,s,o),c=e.aggData,d=this.beans;if(s.forEach((u,h)=>{n[u.getId()]=P0(d,l[h],u.getAggFunc(),u,e)}),a&&c)for(let u of a)n[u.getId()]=c[u.getId()];return n}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map(n=>n.aggData[t])}getValuesFromMappedSet(e,t,n){let i=e;for(let r=0;r<t.length;r++){let o=t[r];i=i?i[o]:null}return i?i.map(r=>this.valueSvc.getValue(n,r)):[]}getValuesNormal(e,t,n){let i=[];t.forEach(()=>i.push([]));let r=t.length,o=n?e.childrenAfterFilter:e.childrenAfterGroup,s=o.length;for(let a=0;a<s;a++){let l=o[a];for(let c=0;c<r;c++){let d=t[c],u=this.valueSvc.getValue(d,l);i[c].push(u)}}return i}setAggData(e,t){let n=e.aggData;if(e.aggData=t,e.__localEventService){let i=r=>{let o=e.aggData?e.aggData[r]:void 0,s=n?n[r]:void 0;if(o===s)return;let a=this.colModel.getColById(r);a&&e.dispatchCellChangedEvent(a,o,s)};if(n)for(let r of Object.keys(n))i(r);if(t)for(let r of Object.keys(t))(!n||!(r in n))&&i(r)}}},ske=class extends K{constructor(){super(...arguments),this.beanName="filterAggStage",this.step="filter_aggregates",this.refreshProps=[]}wireBeans(e){this.filterManager=e.filterManager}execute(e){let t=this.beans.colModel.isPivotMode(),n=this.filterManager?.isAggregateFilterPresent()||this.filterManager?.isAggregateQuickFilterPresent(),i=l=>!l.node.group,r=l=>l.node.leafGroup,o=dg(this.gos)||(t?r:i),s=(l,c=!1)=>{if(l.childrenAfterFilter){if(l.childrenAfterAggFilter=l.childrenAfterFilter,c)for(let d of l.childrenAfterAggFilter)s(d,c);this.setAllChildrenCount(l)}l.sibling&&(l.sibling.childrenAfterAggFilter=l.childrenAfterAggFilter)},a=l=>{l.childrenAfterAggFilter=l.childrenAfterFilter?.filter(c=>o({node:c})&&this.filterManager.doesRowPassAggregateFilters({rowNode:c})?(s(c,!0),!0):c.childrenAfterAggFilter?.length)||null,this.setAllChildrenCount(l),l.sibling&&(l.sibling.childrenAfterAggFilter=l.childrenAfterAggFilter)};e.forEachChangedNodeDepthFirst(n?a:s,!0)}setAllChildrenCountTreeData(e){let t=e.childrenAfterAggFilter,n=0;if(t){let i=t.length;n=i;for(let r=0;r<i;++r)n+=t[r].allChildrenCount??0}e.setAllChildrenCount(n===0&&e.level>=0?null:n)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(n=>{n.group?t+=n.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)}};function Uu(e,t){if(e.sibling)return;let n=o5(e,t);n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+e.id,n.sibling=e,e.sibling=n}function JL(e){let t=e.sibling;t&&(t._destroy(!1),e.sibling=void 0,t.sibling=void 0)}var ake=class extends K{constructor(){super(...arguments),this.beanName="footerSvc"}addTotalRows(e,t,n,i,r,o){let s=e;if(r){let c=i&&kl(this.gos);return lke(o,c)&&(Uu(t,this.beans),n(t.sibling,s++)),s}let a=kd(this.gos);return(i&&a({node:t}))===o&&(Uu(t,this.beans),n(t.sibling,s++)),s}getTopDisplayIndex(e,t,n,i){let r=t;if(e[0].footer){if(t===0)return 0;r-=1}let o=e[e.length-1],s=r>=n.length;return o.footer&&s?o.rowIndex:i(r)}doesCellShowTotalPrefix(e,t){return!e.footer||!t?.getColDef().showRowGroup?!1:this.gos.get("treeData")?!0:e.level===-1?this.beans.showRowGroupCols?.columns[0]===t:!!e.rowGroupColumn&&t?.isRowGroupDisplayed(e.rowGroupColumn.getId())}applyTotalPrefix(e,t,n,i){let r=i.getColDef().cellRendererParams?.totalValueGetter;if(r){let o=Oe(this.gos,{column:i,node:n,value:e,formattedValue:t});if(typeof r==="function")return r(o);if(typeof r=="string")return this.beans.expressionSvc?.evaluate(r,o);X(179)}return n.level===-1?this.getLocaleTextFunc()("footerTotal","Total")+" ":this.getTotalValue(t??e)??""}getTotalValue(e){return this.getLocaleTextFunc()("footerTotal","Total")+" "+(e??"")}};function lke(e,t){switch(t){case"top":case"pinnedTop":return e==="top";case"bottom":case"pinnedBottom":return e==="bottom";default:return!1}}var _Z=class extends y0{constructor(){super(...arguments),this.beanName="valueColsSvc",this.eventName="columnValueChanged",this.columnProcessors={set:(e,t,n)=>this.setValueActive(t,e,n),add:(e,t,n)=>this.setValueActive(!0,e,n),remove:(e,t,n)=>this.setValueActive(!1,e,n)},this.columnExtractors={setFlagFunc:(e,t,n)=>this.setColValueActive(e,t,n),getIndexFunc:()=>{},getInitialIndexFunc:()=>{},getValueFunc:e=>{let t=e.aggFunc;if(t===null||t==="")return null;if(t!==void 0)return!!t},getInitialValueFunc:e=>e.initialAggFunc!=null&&e.initialAggFunc!=""},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>Ci(this.columns,e)}}extractCols(e,t){this.columns=super.extractCols(e,t);for(let n of this.columns){let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?this.setColAggFunc(n,i.aggFunc):n.getAggFunc()||this.setColAggFunc(n,i.initialAggFunc)}return this.columns}setColumnAggFunc(e,t,n){if(!e)return;let i=this.colModel.getColDefCol(e);i&&(this.setColAggFunc(i,t),this.dispatchColumnChangedEvent(this.eventSvc,this.eventName,[i],n))}syncColumnWithState(e,t,n){let i=n("aggFunc").value1;i!==void 0&&(typeof i=="string"?(this.setColAggFunc(e,i),e.isValueActive()||(this.setColValueActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e))):(_e(i)&&X(33),e.isValueActive()&&(this.setColValueActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e))))}setValueActive(e,t,n){if(e!==t.isValueActive()&&(this.setColValueActive(t,e,n),e&&!t.getAggFunc()&&this.aggFuncSvc)){let i=this.aggFuncSvc.getDefaultAggFunc(t);this.setColAggFunc(t,i)}}setColAggFunc(e,t){e.aggFunc=t,e.dispatchStateUpdatedEvent("aggFunc")}setColValueActive(e,t,n){e.aggregationActive!==t&&(e.aggregationActive=t,e.dispatchColEvent("columnValueChanged",n))}},e4={moduleName:"SharedAggregation",version:Lt,beans:[$3e,U3e,ake,_Z],apiFunctions:{addAggFuncs:nke,clearAggFuncs:ike,setColumnAggFunc:rke},dependsOn:[ti]},AZ={moduleName:"Aggregation",version:Lt,beans:[oke,ske],rowModels:["clientSide"],dependsOn:[e4]},cke=({valueSvc:e,dataTypeSvc:t},n,i)=>{let r=e.getValue(n,i),o=null;return r instanceof Date?o=r:typeof r=="string"&&(o=(t?.getDateParserFunction(n)??Br)(r)??null),o},cp=(e,t,n,i)=>r=>{let o=cke(e,t,r.node),s=Yh(o);return s?i?.(s[n])??s[n]:null},dp=({colNames:e},t,n)=>i=>{let r=e.getDisplayNameForColumn(t,i.location);return r?`${r} (${n})`:""},dke=Object.fromEntries(ty.map(e=>[e,e.toLowerCase()])),uke=e=>{let t=ty[Number.parseInt(e,10)-1]??e,n=dke[t]??e;return{month:t,localeKey:n}};function MK(e){return e.groupHierarchy??e.rowGroupingHierarchy}var hke=class extends K{constructor(){super(...arguments),this.beanName="groupHierarchyColSvc",this.columns=null,this.sourceColumnMap=new WeakMap,this.inverseColumnMap=new WeakMap}addColumns(e){let t=this.columns;t!=null&&(e.list=t.list.filter(n=>!e.list.some(i=>i.getColId()===n.getColId())).concat(e.list),e.tree=t.tree.filter(n=>!e.tree.some(i=>i.getId()===n.getId())).concat(e.tree),yg(e))}createColumns(e){let t=new WeakMap,n=new WeakMap,i=this.createGroupHierarchyColumns(e,t,n);if(wg(i,this.columns?.list??[]))return;Is(this.beans,this.columns?.tree),this.columns=null;let{colGroupSvc:o}=this.beans,s=o?.findDepth(e.tree)??0,a=o?.balanceTreeForAutoCols(i,s)??[];this.columns={list:i,tree:a,treeDepth:s,map:{}},this.sourceColumnMap=t,this.inverseColumnMap=n}updateColumns(e){}getColumn(e){return this.columns?.list.find(t=>Ad(t,e))??null}getColumns(){return this.columns?.list??null}expandColumnInto(e,t){let n=this.getVirtualColumnsForColumn(t).concat(t);for(let i of n)e.some(r=>Ad(r,i)||r.getColId()===i.getColId())||e.push(i)}compareVirtualColumns(e,t){let n=this.inverseColumnMap.get(e),i=this.inverseColumnMap.get(t);if(n&&n===i){let r=this.sourceColumnMap.get(n)??[];return r?.indexOf(e)-r?.indexOf(t)}return this.sourceColumnMap.get(e)?.includes(t)?1:this.sourceColumnMap.get(t)?.includes(e)?-1:null}insertVirtualColumnsForCol(e,t){let n=this.getVirtualColumnsForColumn(t);if(!n)return[];let i=e.indexOf(t);return i<0&&(i=e.length-1),y_(e,n),e.splice(i,0,...n),n}getVirtualColumnsForColumn(e){return this.isGroupHierarchyColsEnabledForCol(e)?this.sourceColumnMap.get(e)??[]:[]}isGroupHierarchyColsEnabled(e){return e.list.some(t=>this.isGroupHierarchyColsEnabledForCol(t))}isGroupHierarchyColsEnabledForCol(e){let t=e.getColDef();return!!(MK(t)&&(t.rowGroup||t.enableRowGroup||t.rowGroupIndex!=null||t.pivot||t.enablePivot||t.pivotIndex!=null))}createGroupHierarchyColDefs(e){let t=[],n=e.getColDef(),i=MK(n);if(!i||!this.isGroupHierarchyColsEnabledForCol(e))return t;for(let r of i){let o=null;typeof r=="string"?o=this.createColDefForPart(r,e,n):o=r,o&&t.push(o)}return t}createGroupHierarchyColumns(e,t,n){if(!this.isGroupHierarchyColsEnabled(e))return[];let i=[];for(let r of e.list)for(let o of this.createGroupHierarchyColDefs(r)){let s=o.colId;this.gos.validateColDef(o,s,!0);let a=new da(o,null,s,!0);this.createBean(a),i.push(a),pke(t,r,a),n.set(a,r)}return i}createColDefForPart(e,t,n){let{beans:i,gos:r}=this,o=`${zW}-${t.getColId()}-${e}`,s={enableRowGroup:n.enableRowGroup,rowGroup:n.rowGroup,enablePivot:n.enablePivot,hide:!0,editable:!1},a=r.get("groupHierarchyConfig")??{};if(e in a){let u=T(T({},s),a[e]);return u.colId??(u.colId=o),ku(i,u,u.colId,!0)}let l=ku(i,T({colId:o},s),o,!0),c=this.getLocaleTextFunc(),d=(u,h)=>c?.(u,h)??h;switch(e){case"year":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Year")),valueGetter:cp(i,t,0)});case"quarter":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Quarter")),valueGetter:cp(i,t,1,u=>(Math.floor(Number(u)/4)+1).toString())});case"month":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Month")),valueGetter:cp(i,t,1)});case"formattedMonth":return ce(T({},l),{headerValueGetter:dp(i,t,d("month","Month")),valueGetter:cp(i,t,1,u=>{let h=uke(u);return d(h.localeKey,h.month)})});case"day":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Day")),valueGetter:cp(i,t,2)});case"hour":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Hour")),valueGetter:cp(i,t,3)});case"minute":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Minute")),valueGetter:cp(i,t,4)});case"second":return ce(T({},l),{headerValueGetter:dp(i,t,d(e,"Second")),valueGetter:cp(i,t,5)});default:return null}}};function pke(e,t,n){let i=e.get(t);e.set(t,(i??[]).concat(n))}var fke={moduleName:"GroupHierarchy",version:Lt,beans:[hke]},RZ=class extends y0{constructor(){super(...arguments),this.beanName="pivotColsSvc",this.eventName="columnPivotChanged",this.columnProcessors={set:(e,t,n)=>this.setColPivotActive(e,t,n),add:(e,t,n)=>this.setColPivotActive(e,!0,n),remove:(e,t,n)=>this.setColPivotActive(e,!1,n)},this.columnOrdering={enableProp:"pivot",initialEnableProp:"initialPivot",indexProp:"pivotIndex",initialIndexProp:"initialPivotIndex"},this.columnExtractors={setFlagFunc:(e,t,n)=>this.setColPivotActive(e,t,n),getIndexFunc:e=>e.pivotIndex,getInitialIndexFunc:e=>e.initialPivotIndex,getValueFunc:e=>e.pivot,getInitialValueFunc:e=>e.initialPivot},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>Ci(this.columns,e)}}syncColumnWithState(e,t,n,i){let{value1:r,value2:o}=n("pivot","pivotIndex");(r!==void 0||o!==void 0)&&(typeof o=="number"||r?(e.isPivotActive()||(this.setColPivotActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),i&&typeof o=="number"&&(i[e.getId()]=o)):e.isPivotActive()&&(this.setColPivotActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setColPivotActive(e,t,n){e.pivotActive!==t&&(e.pivotActive=t,t&&this.beans.groupHierarchyColSvc?.insertVirtualColumnsForCol(this.columns,e)?.forEach(r=>this.setColPivotActive(r,t,n)),e.dispatchColEvent("columnPivotChanged",n)),e.dispatchStateUpdatedEvent("pivot")}},gke=class extends y0{constructor(){super(...arguments),this.beanName="rowGroupColsSvc",this.eventName="columnRowGroupChanged",this.columnProcessors={set:(e,t,n)=>this.setActive(t,e,n),add:(e,t,n)=>this.setActive(!0,e,n),remove:(e,t,n)=>this.setActive(!1,e,n)},this.columnOrdering={enableProp:"rowGroup",initialEnableProp:"initialRowGroup",indexProp:"rowGroupIndex",initialIndexProp:"initialRowGroupIndex"},this.columnExtractors={setFlagFunc:(e,t,n)=>this.setColRowGroupActive(e,t,n),getIndexFunc:e=>e.rowGroupIndex,getInitialIndexFunc:e=>e.initialRowGroupIndex,getValueFunc:e=>e.rowGroup,getInitialValueFunc:e=>e.initialRowGroup},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>Ci(this.columns,e)}}moveColumn(e,t,n){if(this.columns.length===0)return;let i=this.columns[e],r=this.columns.slice(e,t);this.columns.splice(e,1),this.columns.splice(t,0,i),this.updateIndexMap(),this.eventSvc.dispatchEvent({type:this.eventName,columns:r,column:r.length===1?r[0]:null,source:n})}syncColumnWithState(e,t,n,i){let{value1:r,value2:o}=n("rowGroup","rowGroupIndex");(r!==void 0||o!==void 0)&&(typeof o=="number"||r?(e.isRowGroupActive()||(this.setColRowGroupActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),i&&typeof o=="number"&&(i[e.getId()]=o)):e.isRowGroupActive()&&(this.setColRowGroupActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setActive(e,t,n){if(e===t.isRowGroupActive())return;this.setColRowGroupActive(t,e,n);let i=this.beans.groupHierarchyColSvc?.getColumn(t);b_(this.gos,e)&&!i&&this.colModel.setColsVisible([t],!e,n)}setColRowGroupActive(e,t,n){e.rowGroupActive!==t&&(e.rowGroupActive=t,t&&this.beans.groupHierarchyColSvc?.insertVirtualColumnsForCol(this.columns,e)?.forEach(r=>this.setColRowGroupActive(r,t,n)),e.dispatchColEvent("columnRowGroupChanged",n)),e.dispatchStateUpdatedEvent("rowGroup")}},mke=class extends K{constructor(){super(...arguments),this.beanName="autoColSvc"}postConstruct(){this.addManagedPropertyListener("autoGroupColumnDef",this.updateColumns.bind(this))}addColumns(e){this.columns!=null&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),yg(e))}createColumns(e,t,n){let i=this.beans,{colModel:r,gos:o,rowGroupColsSvc:s,colGroupSvc:a}=i,l=r.isPivotMode(),c=v_(o,l),d=l?o.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),u=s?.columns,p=!(u&&u.length>0||o.get("treeData"))||d||c,f=()=>{this.columns&&(Is(i,this.columns.tree),this.columns=null)};if(p){f();return}let g=this.generateAutoCols(u),C=wg(g,this.columns?.list||null),m=e.treeDepth,x=(this.columns?this.columns.treeDepth:-1)==m;if(C&&x){let V=new Map(g.map(B=>[B.getId(),B]));for(let B of this.columns?.list??[]){let P=V.get(B.getId());P&&B.setColDef(P.getColDef(),null,n)}return}f();let D=a?.findDepth(e.tree)??0,F=a?.balanceTreeForAutoCols(g,D)??[];this.columns={list:g,tree:F,treeDepth:D,map:{}},t(V=>{if(!V)return null;let B=V.filter(P=>!bg(P));return[...g,...B]})}updateColumns(e){let t=Rl(e.source);this.columns?.list.forEach((n,i)=>this.updateOneAutoCol(n,i,t))}getColumn(e){return this.columns?.list.find(t=>Ad(t,e))??null}getColumns(){return this.columns?.list??null}generateAutoCols(e=[]){let t=[],{gos:n}=this,i=n.get("treeData"),r=C0(n);return i&&r&&(X(182),r=!1),r?e.forEach((o,s)=>{t.push(this.createOneAutoCol(o,s))}):t.push(this.createOneAutoCol()),t}isSuppressAutoCol(){let e=this.gos;return e.get("groupDisplayType")==="custom"?!0:e.get("treeDataDisplayType")==="custom"}createOneAutoCol(e,t){let n;e?n=`${Mc}-${e.getId()}`:n=Mc;let i=this.createAutoColDef(n,e,t);i.colId=n;let r=new da(i,null,n,!0);return this.createBean(r),r}updateOneAutoCol(e,t,n){let i=e.getColDef(),r=typeof i.showRowGroup=="string"?i.showRowGroup:void 0,o=this.beans,s=r!=null?o.colModel.getColDefCol(r):void 0,a=e.getId(),l=this.createAutoColDef(a,s??void 0,t);e.setColDef(l,null,n),go(o,{state:[my(l,a)]},n)}createAutoColDef(e,t,n){let i=this.createBaseColDef(t),r=this.gos.get("autoGroupColumnDef");ji(i,r),i=ku(this.beans,i,e,!0),this.gos.get("treeData")||jt(i.field)&&jt(i.valueGetter)&&jt(i.filterValueGetter)&&i.filter!=="agGroupColumnFilter"&&(i.filter=!1),n&&n>0&&(i.headerCheckboxSelection=!1);let o=xl(this.gos),s=i.valueGetter||i.field!=null;return o&&!s&&(i.sortIndex=void 0,i.initialSort=void 0),i}createBaseColDef(e){let t=this.gos.get("autoGroupColumnDef"),i={headerName:this.getLocaleTextFunc()("group","Group"),showRowGroup:e?.getColId()??!0};return t&&(t.cellRenderer||t.cellRendererSelector)||(i.cellRenderer="agGroupCellRenderer"),e&&(i.headerName=this.beans.colNames.getDisplayNameForColumn(e,"header")??void 0,i.headerValueGetter=e.colDef.headerValueGetter),i}destroy(){Is(this.beans,this.columns?.tree),super.destroy()}},FZ=class extends K{addExpandedCss(e,t){t.isExpandable()&&(e.push("ag-row-group"),e.push(t.expanded?"ag-row-group-expanded":"ag-row-group-contracted"))}getRowExpandedListeners(e){let{rowNode:t}=e,n=this.updateExpandedCss.bind(this,e,t);return{expandedChanged:n,hasChildrenChanged:n}}setExpanded(e,t,n,i){if(e.expanded===t)return;e.expanded=t,e.dispatchRowEvent("expandedChanged");let r=ce(T({},r5(e,this.gos,"rowGroupOpened")),{expanded:t,event:n||null});this.dispatchExpandedEvent(r,i)}isExpandable(e){return e.footer?!1:this.beans.colModel.isPivotMode()?e.hasChildren()&&!e.leafGroup:e.hasChildren()||e.master}updateExpandedCss(e,t){let n=t.isExpandable(),i=t.expanded==!0;e.forEachGui(void 0,r=>{let o=r.rowComp;o.toggleCss("ag-row-group",n),o.toggleCss("ag-row-group-expanded",n&&i),o.toggleCss("ag-row-group-contracted",n&&!i),Fi(r.element,n&&i)})}dispatchStateUpdatedEvent(){this.eventSvc.dispatchEvent({type:"rowExpansionStateChanged"})}},vke=class extends FZ{constructor(){super(...arguments),this.beanName="expansionSvc",this.events=null,this.dispatchExpandedDebounced=null}destroy(){super.destroy(),this.events=null,this.dispatchExpandedDebounced=null}setExpansionState(e){let t=new Set(e.expandedRowGroupIds);this.beans.rowModel.forEachNode(n=>{let i=n.id;i&&(n.expanded=t.has(i))}),this.onGroupExpandedOrCollapsed()}getExpansionState(){let e=[],t=[];return this.beans.rowModel.forEachNode(n=>{let i=n.id;i&&(n.expanded?e.push(i):t.push(i))}),{expandedRowGroupIds:e,collapsedRowGroupIds:t}}expandAll(e){let{gos:t,rowModel:n,colModel:i,eventSvc:r}=this.beans,o=t.get("treeData"),s=i.isPivotActive(),a=c=>{if(c)for(let d of c){let u=()=>{d.expanded=e,a(d.childrenAfterGroup)};if(d.master){u();continue}if(o){_e(d.childrenAfterGroup)&&u();continue}if(s){!d.leafGroup&&u();continue}d.group&&u()}},l=n.rootNode;l&&a(l.childrenAfterGroup),this.onGroupExpandedOrCollapsed(),r.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}onGroupExpandedOrCollapsed(){this.dispatchStateUpdatedEvent(),this.beans.rowModel.refreshModel({step:"map"})}setDetailsExpansionState(e){let t=this.getExpansionState(),n=t.collapsedRowGroupIds.length===0;if(t.expandedRowGroupIds.length===0!==n)return n?e.expandAll():e.collapseAll()}dispatchExpandedEvent(e,t){if((this.events??(this.events=[])).push(e),t){this.dispatchExpandedEvents();return}let n=this.dispatchExpandedDebounced;if(!n){if(!this.isAlive())return;n=this.debounce(()=>this.dispatchExpandedEvents()),this.dispatchExpandedDebounced=n}n()}dispatchExpandedEvents(){let{eventSvc:e,rowRenderer:t}=this.beans,n=this.events,i=n?.length;if(!i)return;this.events=null;let r=new Array(i);for(let o=0;o<i;++o)r[o]=n[o].node,e.dispatchEvent(n[o]);this.dispatchStateUpdatedEvent(),t.refreshCells({rowNodes:r})}debounce(e){let t=this.beans.animationFrameSvc;if(!t)return()=>window.setTimeout(e,0);let n=!1;return()=>{if(!t.active){window.setTimeout(e,0);return}n||(n=!0,t.addDestroyTask(()=>{n=!1,e()}))}}};function MZ(e){let t=e.get("groupHideParentOfSingleChild");return t||(t=e.get("groupRemoveSingleChildren"),!t&&e.get("groupRemoveLowestSingleChildren")&&(t="leafGroupsOnly")),{groupHideParentOfSingleChild:t,isGroupMultiAutoColumn:C0(e),hideOpenParents:e.get("groupHideOpenParents"),grandTotalRow:kl(e),groupTotalRow:kd(e)}}function IZ(e,t,n){return e.groupHideParentOfSingleChild===!0&&n&&t.childrenAfterGroup.length===1}function TZ(e,t,n){return e.groupHideParentOfSingleChild==="leafGroupsOnly"&&n&&t.leafGroup&&t.childrenAfterGroup.length===1}function PZ(e,t,n,i,r,o){let s=i&&!n,a=i&&t.leafGroup,l=e.hideOpenParents&&t.expanded&&!t.master&&!a;return!s&&!l&&!r&&!o}var Cke=class extends K{constructor(){super(...arguments),this.beanName="flattenStage",this.step="map",this.refreshProps=["groupHideParentOfSingleChild","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupTotalRow","masterDetail"]}execute(){let{beans:e,gos:t}=this,n=[],i=e.rowModel.rootNode;if(!i)return n;let r=e.colModel.isPivotMode(),o=r&&i.leafGroup&&i.aggData,s=o?[i]:i.childrenAfterSort,a=MZ(t);this.recursivelyAddToRowsToDisplay(a,s,n,r,0);let l=n.length>0,c=a.grandTotalRow;if(!o&&l&&c)if(Uu(i,e),c==="pinnedBottom"||c==="pinnedTop")this.beans.pinnedRowModel?.setGrandTotalPinned(c==="pinnedBottom"?"bottom":"top");else{let u=c==="top";this.addRowNodeToRowsToDisplay(a,i.sibling,n,0,u)}return n}recursivelyAddToRowsToDisplay(e,t,n,i,r){if(!t?.length)return;let o=this.beans.masterDetailSvc;for(let s=0;s<t.length;s++){let a=t[s],l=a.hasChildren(),c=IZ(e,a,l),d=TZ(e,a,l);if(PZ(e,a,l,i,c,d)&&this.addRowNodeToRowsToDisplay(e,a,n,r),!(i&&a.leafGroup))if(l){let h=c||d;if(a.expanded||h){let p=e.groupTotalRow({node:a});p||JL(a);let f=h?r:r+1;p==="top"&&(Uu(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,n,f));let g=o?.getDetail(a);g&&this.addRowNodeToRowsToDisplay(e,g,n,r),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,n,i,f),p==="bottom"&&(Uu(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,n,f))}}else{let h=o?.getDetail(a);h&&this.addRowNodeToRowsToDisplay(e,h,n,r)}}}addRowNodeToRowsToDisplay(e,t,n,i,r){r?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}},bke=class extends K{constructor(){super(...arguments),this.beanName="groupEditSvc",this.pendingEditRefresh=null,this.dropGroupTarget=null,this.dropGroupTimer=null,this.dropGroupThrottled=!1,this.draggingGroups=null}postConstruct(){nn(this.gos)&&this.addManagedListeners(this.eventSvc,{cellValueChanged:e=>this.onCsrmCellChange(e),batchEditingStopped:()=>this.flushGroupEdits()})}destroy(){this.stopDragging(!0),super.destroy()}isGroupingDrop(e){return!e.rowDragManaged||!e.sameGrid||!this.gos.get("refreshAfterGroupEdit")?!1:!!this.beans.rowGroupColsSvc?.columns?.length&&!this.beans.colModel.isPivotMode()}initDraggingGroups(e){let t=new Map,n=i=>{let r=i.childrenAfterGroup;if(r){if(t.has(i))return;let o=r.slice();t.set(i,o);for(let s of o)n(s)}};for(let i of e.rows)i.group&&n(i);this.draggingGroups=t}canSetParent(e){return e.sameGrid?this.beans.groupStage?.treeData?!0:e.rowDragManaged&&!this.gos.get("refreshAfterGroupEdit")?!1:!!this.beans.rowGroupColsSvc?.columns?.length:!1}canDropRow(e,t){if(this.beans.groupStage?.treeData)return!wke(e,t.newParent);let{position:n,target:i,newParent:r,rootNode:o}=t,s=e.parent;if(e.group&&(TK(e,i)||TK(e,r)))return!1;if(n==="inside")return!0;if(r&&r!==s)return r!==o||s===o;let a=r??i?.parent??o;if(a!==s)return!1;let l=e.group?e.level:s.level??-1,c=i?i.group?i.level:i.parent?.level??-1:a?.level??-1;return!(l>=0&&c>=0&&c!==l)}fixRowsDrop(e,t,n,i){let r=!!this.beans.groupStage?.treeData;if(e.treeData=r,!(!!this.beans.rowGroupColsSvc?.columns?.length||this.gos.get("pivotMode"))&&!r)return;!this.draggingGroups&&this.isGroupingDrop(e)&&!e.suppressMoveWhenRowDragging&&this.initDraggingGroups(e);let s=e.target,a=null,l=!1,c=e.rootNode,d=this.beans.rowModel,u=s?this.canDropStartGroup(s):!1;this.updateDropTarget(u?s:null,n,e);let h=this.beans.pageBounds?.getLastRow?.()??d.getRowCount()-1;if(t?(!s||i>=.5&&s.rowIndex===h?a=c:e.moved&&s&&this.dropGroupThrottled&&this.shouldDropTargetBeParent(e)&&(a=s),a||(a=s?.parent??c),!n&&s&&u&&(!a||!s.expanded&&s.childrenAfterSort?.length)&&this.startDropGroupDelay(s)):!n&&s&&u&&this.startDropGroupDelay(s),a){if(s&&a===s&&a!==c){let p=a.expanded?iy(d,1,s):null;p?.parent===a?(s=p,i=-.5):l=!0}if(s&&!l){let p=s;for(;p&&p!==c&&p!==a;)s=p,p=p.parent}}e.target=s,e.newParent=a,e.yDelta=i,e.inside=l}clearNewSameParent(e,t){let n=e.newParent;n&&(!t||yke(e.rows,n))&&(e.newParent=null)}updateDropTarget(e,t,n){this.dropGroupTarget&&this.dropGroupTarget!==e&&this.resetDragGroup(),e?.childrenAfterSort?.length&&(t&&this.dropGroupThrottled&&!e.expanded&&e.isExpandable?.()&&e.setExpanded(!0,void 0,!0),this.canDropInTarget(e,n)&&(this.dropGroupThrottled=!0,this.dropGroupTarget=e))}canDropInTarget(e,t){if(e.expanded)return!0;if(!e.group)return!1;if(t.pointerPos==="inside")return!0;if(t.treeData)return!1;let n=t.rows,i=e.level;for(let r=0,o=n.length;r<o;++r){let s=n[r];if(s!==e&&s.group&&s.level!==i)return!1}return!0}startDropGroupDelay(e){if(this.dropGroupTarget&&this.dropGroupTarget!==e&&this.resetDragGroup(),this.dropGroupTarget=e,this.dropGroupTimer!==null)return;let t=this.gos.get("rowDragInsertDelay");this.dropGroupTimer=window.setTimeout(()=>{this.dropGroupTimer=null,this.dropGroupThrottled=!0,this.beans.dragAndDrop?.nudge()},t)}resetDragGroup(){this.dropGroupTimer!==null&&(window.clearTimeout(this.dropGroupTimer),this.dropGroupTimer=null),this.dropGroupTarget=null,this.dropGroupThrottled=!1}stopDragging(e){e&&(this.draggingGroups=null),this.resetDragGroup()}shouldDropTargetBeParent({target:e,rows:t,pointerPos:n,treeData:i}){if(!e||n==="none")return!1;if(n==="inside"||!i&&e.group&&!e.expanded)return!0;if(n==="above")return!1;let r=this.beans.rowModel,s=e.rowIndex+1,a;do a=r.getRow(s++);while(a?.footer);let l=this.draggingGroups?.get(e)??e.childrenAfterGroup;if(a&&a.parent===e&&l?.length){let c=new Set(t);for(let d=0,u=l.length;d<u;++d){let h=l[d];if(h.rowIndex!==null&&!c.has(h))return!0}}return!1}dropGroupEdit(e){let{beans:t}=this,n=e.position,i=e.target??null,r=e.rootNode,o=e.newParent??i?.parent??r,s=t.focusSvc,a=s.getFocusedCell(),l=a&&Ha(t,a),c=new Set,d=new sg,u=d.updates,h,p=w=>{c.has(w)||(c.add(w),h??(h=this.newGroupValues(o)),this.setRowGroup(w,h)&&u.add(w))},f=w=>{let x=this.draggingGroups?.get(w)??w.childrenAfterGroup,D=x?.length;if(D)for(let F=0;F<D;++F){let L=x[F];L.sourceRowIndex>=0?p(L):f(L)}};for(let w of e.rows)if(w.group)f(w);else{let x=w.sourceRowIndex>=0&&!w.destroyed?w:this.csrmFirstLeaf(w);x&&p(x)}let g=n==="inside"?"above":n,C=n==="inside"?this.findFirstLeafForParent(o,c)??i:i,m=!1;if(c.size&&g!=="none"&&(m=x5(r._leafs,c,C,g==="above")),!u.size&&!m)return!1;d.reordered=m;for(let w of c)d.updates.add(w);return this.csrmRefresh(d),l?l.focusCell():s.clearFocusedCell(),!0}canDropStartGroup(e){return!!e&&e.level>=0&&!e.footer&&!e.detail&&(e.isExpandable?.()||!!e.childrenAfterSort?.length)}flushGroupEdits(){let e=this.pendingEditRefresh;e&&(this.pendingEditRefresh=null,this.csrmRefresh(e))}csrmRefresh(e){let t=this.beans.rowModel,n=t.rootNode;n&&t.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Nu(!1,n),changedRowNodes:e})}newGroupValues(e){let t=this.beans.rowGroupColsSvc?.columns??[],n=new Array(t.length),i=-1,r=e;for(;r&&r.level>=0;){let o=t[r.level];if(o){let s=o.getColId(),a=r.level;n[a]=r.groupData?.[s]??r.key??void 0,a>i&&(i=a)}r=r.parent}return{values:n,columns:t,maxLevel:i}}setRowGroup(e,{values:t,columns:n,maxLevel:i}){if(i<0)return!1;let{valueSvc:r,editSvc:o}=this.beans,s=!1;for(let a=0;a<n.length;++a){let l=n[a];if(!l||a>i)continue;let c=t[a],d=r.getValue(l,e,!1,"api");if(d===c||d==null&&c==null)continue;let u=c,h=r.parseValue(l,e,c,d);h!==void 0&&(u=h);let p=o?.setDataValue({rowNode:e,column:l},u,"rowDrag");(p!=null?!!p:e.setDataValue(l,u,"rowDrag"))&&(s=!0)}return s}onCsrmCellChange(e){let{column:t,node:n,source:i}=e;if(!this.gos.get("refreshAfterGroupEdit")||i==="rowDrag"||!t?.isRowGroupActive()||n.group||!n.data)return;if(this.beans.editSvc?.isBatchEditing()){let o=this.pendingEditRefresh;o||(o=IK(),this.pendingEditRefresh=o),o.updates.add(n)}else{let o=IK();o.updates.add(n),this.csrmRefresh(o)}}csrmFirstLeaf(e){if(!e)return null;let t=this.draggingGroups,n=t?.get(e)??e.childrenAfterGroup;for(;n?.length;){let i=n[0];if(i.sourceRowIndex>=0)return i.destroyed?this.firstAliveChildLeaf(i):i;n=t?.get(i)??i.childrenAfterGroup}return Ou(e)}firstAliveChildLeaf(e){let t=this.draggingGroups?.get(e)??e.childrenAfterGroup;if(t){for(let n of t)if(n.sourceRowIndex>=0&&!n.destroyed)return n}return null}findFirstLeafForParent(e,t){if(!e)return null;let n=this.draggingGroups?.get(e)??e?.childrenAfterGroup;if(!n)return null;for(let i=0,r=n.length;i<r;++i){let o=n[i];if(o.sourceRowIndex>=0&&!t.has(o))return o;let s=this.findFirstLeafForParent(o,t);if(s!==null)return s}return null}},IK=()=>{let e=new sg;return e.reordered=!0,e},TK=(e,t)=>{if(!e||!t)return!1;let n=t;for(;n;){if(n===e)return!0;n=n.parent}return!1},wke=(e,t)=>{if(!t||e.parent===t)return!1;let n=t,i=e.id;for(;n;){if(n===e||i!=null&&n.id===i)return!0;n=n.parent}return!1},yke=(e,t)=>{for(let n=0,i=e.length;n<i;++n)if(e[n].parent!==t)return!1;return!0},Ske=class extends K{constructor(){super(...arguments),this.beanName="groupStage",this.step="group",this.refreshProps=["groupAllowUnbalanced","groupDefaultExpanded","groupDisplayType","groupHideOpenParents","initialGroupOrderComparator","treeData","treeDataChildrenField","treeDataParentIdField"],this.treeData=!1,this.hasTreeData=!1,this.needReset=!1,this.nested=!1,this.strategy=void 0}postConstruct(){let e=this.gos;e.isModuleRegistered("TreeData")&&(this.hasTreeData=!0,this.treeData=e.get("treeData")),this.addManagedEventListeners({showRowGroupColsSetChanged:()=>this.strategy?.onShowRowGroupColsSetChanged()})}invalidateGroupCols(){this.strategy?.invalidateGroupCols?.()}destroy(){this.strategy=this.destroyBean(this.strategy),super.destroy()}getNonLeaf(e){return this.strategy?.nonLeafsById?.get(e)}getNestedDataGetter(){return this.getStrategy()?.nestedDataGetter}onPropChange(e){let t=this.gos,n=this.strategy?.nestedDataGetter;if(e.has("treeData")){let i=t.get("treeData")&&this.hasTreeData;this.treeData!==i&&(this.beans.rowDragSvc?.cancelRowDrag(),this.treeData=i,this.needReset=!0,this.strategy=this.destroyBean(this.strategy))}return this.strategy?.onPropChange?.(e),this.getNestedDataGetter()!==n}extractData(){let e=this.beans.rowModel.rootNode,t=this.nested?e?.childrenAfterGroup:e?._leafs;if(!t)return this.gos.get("rowData")??[];let n=t.length,i=new Array(n),r=0;for(let o=0;o<n;++o){let s=t[o].data;s!=null&&(i[r++]=s)}return i.length=r,i}execute(e){let t=this.beans,n=t.rowModel.rootNode;if(!n)return!1;let i=this.getStrategy(),r=!!i?.nestedDataGetter,o=this.needReset;return this.nested=r,o&&(this.needReset=!1,t.rowDragSvc?.cancelRowDrag(),e.animate=!1,Eke(n,!r)),i?i.execute(n,e)||o:void 0}loadLeafs(e){return e.footer?xke(e):vA(e)}loadGroupData(e){let t=this.getStrategy();return t?t.loadGroupData(e):(e._groupData=null,null)}clearNonLeafs(){this.strategy?.clearNonLeafs()}getStrategy(){let e=this.strategy;return e!==void 0&&this.isAlive()||(e=this.beans.registry.createDynamicBean(this.treeData?"treeGroupStrategy":"groupStrategy",!1)??null,this.strategy=e&&this.createBean(e)),e}},xke=e=>{let t=e.sibling;if(!t)return null;let n=t._leafs;return n!==void 0?n:vA(t)},vA=e=>{let t=e.childrenAfterGroup,n=t?.length;if(e._leafs=null,!n)return null;let i,r=n===1?t[0]:null;if(r?.group&&r.sourceRowIndex<0)i=r._leafs,i===void 0&&(i=vA(r));else if(e.leafGroup)i=t;else{i=[];for(let o=0;o<n;++o){let s=t[o];if(s.sourceRowIndex>=0&&i.push(s),!s.group)continue;let a=s._leafs;if(a===void 0&&(a=vA(s)),a)for(let l=0,c=a.length;l<c;++l)i.push(a[l])}}return e._leafs=i,i},Eke=(e,t)=>{let n=e._leafs,i=e.sibling;e.treeNodeFlags=0,e.childrenAfterGroup=n,e.childrenMapped=null,e._groupData=void 0,i&&(i.childrenAfterGroup=e.childrenAfterGroup,i.childrenAfterAggFilter=e.childrenAfterAggFilter,i.childrenAfterFilter=e.childrenAfterFilter,i.childrenAfterSort=e.childrenAfterSort,i.childrenMapped=null,i._groupData=void 0);for(let r=0,o=n.length??0;r<o;++r){let s=n[r],a=s.sibling;s._leafs=void 0,PK(s),a&&PK(a),s.parent=e,t&&(s.treeParent=null),s.group=!1,s.updateHasChildren()}e.updateHasChildren()},PK=e=>{e.key=null,e.treeNodeFlags=0,e.allChildrenCount=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.level=0,e._groupData=void 0};function kK(e,t,n){let i=e,r=i.level-t.level;if(r<=0||!n.get("groupHideOpenParents"))return!1;for(let s=0;s<r;s++){if(!(i.parent?.getFirstChild()===i))return!1;i=i.parent}return i===t}var t4=(e,t,n,i=t.group)=>{let r=e.gos,o=i&&r.get("isGroupOpenByDefault");if(!o){let a=r.get("groupDefaultExpanded");return a===-1||n<a}let s={api:e.gridApi,context:e.gridOptions.context,rowNode:t,field:t.field,key:t.key,level:n,rowGroupColumn:t.rowGroupColumn};return o(s)==!0},kZ=class extends K{constructor(){super(...arguments),this.indentClass=null}init(e,t,n,i,r,o,s){this.params=s,this.eGui=t,this.eCheckbox=n,this.eExpanded=i,this.eContracted=r,this.comp=e,this.compClass=o;let{node:a,column:l}=s;if(this.node=a,this.displayedNode=a,!this.isEmbeddedRowMismatch()){if(a.footer){this.initFooterCell();return}if(!l){this.initFullWidthCell();return}this.displayedNode=this.beans.showRowGroupColValueSvc?.getDisplayedNode(a,l)??this.node,this.setupExpand(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}}initFooterCell(){let{node:e}=this.params;this.addGroupValue(),this.setupIndent(),e.level===-1||this.comp.toggleCss("ag-row-group-leaf-indent",!0)}initFullWidthCell(){let e=()=>{let{rowDragSvc:t}=this.beans;if(!this.params.rowDrag||!t)return;let n=t.createRowDragComp(()=>this.params.value,this.params.node);this.createManagedBean(n),this.eGui.insertAdjacentElement("afterbegin",n.getGui())};this.setupExpand(),e(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}getCellAriaRole(){let e=this.params.colDef?.cellAriaRole,t=this.params.column?.getColDef().cellAriaRole;return e||t||"gridcell"}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;let{visibleCols:e}=this.beans,t=this.params.pinned==="left",n=this.params.pinned==="right",i=!t&&!n;return this.gos.get("enableRtl")?e.isPinningLeft()?!n:!i:e.isPinningLeft()?!t:!i}addGroupValue(){let{params:{value:e,valueFormatted:t}}=this,n=this.getInnerCompDetails();this.comp.setInnerRenderer(n,t??e??null)}setupExpand(){let{colModel:e}=this.beans,{eGridCell:t,column:n,suppressDoubleClickExpand:i}=this.params,r=(c,d)=>{let u=$e(c,this.beans,null);u&&(d.appendChild(u),this.addDestroyFunc(()=>u.remove()))};r("groupExpanded",this.eExpanded),r("groupContracted",this.eContracted);let o=this.comp,s=()=>{if(!this.isExpandable())return;let d=this.displayedNode.expanded;o.setExpandedDisplayed(d),o.setContractedDisplayed(!d),Fi(t,!!this.displayedNode.expanded)},a=()=>{let c=this.isExpandable();o.toggleCss("ag-cell-expandable",c),o.toggleCss("ag-row-group",c);let d=!c&&e.isPivotMode();o.toggleCss("ag-pivot-leaf-group",d);let u=!e.isPivotMode()&&(!this.displayedNode.footer||this.displayedNode.level!==-1);o.toggleCss("ag-row-group-leaf-indent",!c&&u);let h=this.getChildCount(),p=h>0?`(${h})`:"";o.setChildCount(p),c?s():(o.setExpandedDisplayed(!1),o.setContractedDisplayed(!1),a_(t))};(()=>{!(n?.isCellEditable(this.displayedNode)&&this.gos.get("enableGroupEdit"))&&!i&&this.addManagedListeners(t,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(this.displayedNode,{allChildrenCountChanged:a,masterChanged:a,groupChanged:a,hasChildrenChanged:a,expandedChanged:s})})(),a()}getInnerCompDetails(){let{userCompFactory:e,findSvc:t}=this.beans,n=this.params;if(n.fullWidth){let l=this.gos.get("groupRowRendererParams"),c=Cy(e,l,n);return c||(t?.isMatch(n.node,null)?Cy(e,ce(T({},l),{innerRenderer:"agFindCellRenderer"}),n):void 0)}let i=l=>l&&l.componentClass==this.compClass,r=Cy(e,n,n);if(r&&!i(r))return r;let{displayedNode:{rowGroupColumn:o}}=this,s=o?.colDef,a=o&&n.column?.isRowGroupDisplayed(o.getId());if(s&&a){let l=ip(e,s,n);if(l)if(i(l)){if(s?.cellRendererParams?.innerRenderer)return Cy(e,s.cellRendererParams,n)}else return l}if(t?.isMatch(n.node,n.column))return ip(e,ce(T({},s??n.colDef),{cellRenderer:"agFindCellRenderer"}),n)}getChildCount(){let{column:e,suppressCount:t}=this.params;if(t)return 0;let{allChildrenCount:n,rowGroupColumn:i}=this.displayedNode;return!((n??0)>0&&(!i||!e||e?.isRowGroupDisplayed(i.getId())))||this.gos.get("showOpenedGroup")&&this.displayedNode!==this.node&&!kK(this.node,this.displayedNode,this.gos)?0:n??0}isExpandable(){let{node:e,column:t,colDef:n}=this.params;if(!this.displayedNode.isExpandable()||e.rowPinned)return!1;if(!t)return!0;if(e.hasChildren()&&n){let{showRowGroup:o}=n;if(!o)return!1;if(o===!0)return!0}return e===this.displayedNode?e.rowGroupColumn&&t?.isRowGroupDisplayed(e.rowGroupColumn.getId())?!0:e.master?n?.showRowGroup===!0||n?.showRowGroup==null:!1:kK(this.node,this.displayedNode,this.gos)}setupIndent(){let{suppressPadding:e,node:t,colDef:n}=this.params;if(e)return;let i=()=>{let r=t.uiLevel;n&&n.showRowGroup!==!0&&(r=0);let o="ag-row-group-indent-"+r;o!==this.indentClass&&(this.indentClass&&this.comp.toggleCss(this.indentClass,!1),this.indentClass=o,this.comp.toggleCss(o,!0),this.eGui.style.setProperty("--ag-indentation-level",String(r)))};this.addManagedListeners(t,{uiLevelChanged:i.bind(this)}),i()}setupCheckbox(){let{node:e}=this.params;!e.footer&&!e.rowPinned&&!e.detail&&(this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:i})=>{let r=typeof n=="object"?n:void 0,o=typeof i=="object"?i:void 0;r?.checkboxLocation!==o?.checkboxLocation&&(this.destroyCheckbox(),this.addCheckbox())}),this.addCheckbox())}addCheckbox(){let{selectionSvc:e}=this.beans;if(!e||!ss(this.gos))return;let{node:t,column:n}=this.params,i=this.gos.get("rowSelection"),r=o0(i);if(r==="selectionColumn")return;if(r==="autoGroupColumn"){let c=n?.getColDef().showRowGroup!=null,d=!n&&t.group;if(!(c||d))return}let o=typeof i=="object"?Xh(i):this.params.checkbox;if(!(typeof o=="function"||o===!0))return;if(typeof n?.getColDef().showRowGroup=="string"&&!this.isExpandable()){this.comp.setCheckboxSpacing(!0);return}let l=e.createCheckboxSelectionComponent();this.cbComp=l,this.createBean(l),l.init({rowNode:t,column:n,overrides:{isVisible:o,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(l.getGui()),this.comp.setCheckboxVisible(!0)}destroyCheckbox(){this.comp.setCheckboxSpacing(!1),this.comp.setCheckboxVisible(!1),this.cbComp?.getGui().remove(),this.cbComp=this.destroyBean(this.cbComp)}onExpandClicked(e){Fs(e)||(ei(e),this.onExpandOrContract(e))}onKeyDown(e){!(e.key===$.ENTER)||this.params.suppressEnterExpand||this.params.column?.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(Fs(e))return;h_(this.eExpanded,e)||h_(this.eContracted,e)||this.onExpandOrContract(e)}onExpandOrContract(e){if(!this.isExpandable())return;let t=this.displayedNode,n=!t.expanded;!n&&t.sticky&&this.beans.ctrlsSvc.getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop),t.setExpanded(n,e)}destroy(){super.destroy(),this.destroyCheckbox()}},Dke={tag:"span",cls:"ag-cell-wrapper",children:[{tag:"span",ref:"eExpanded",cls:"ag-group-expanded ag-hidden"},{tag:"span",ref:"eContracted",cls:"ag-group-contracted ag-hidden"},{tag:"span",ref:"eCheckbox",cls:"ag-group-checkbox ag-invisible"},{tag:"span",ref:"eValue",cls:"ag-group-value"},{tag:"span",ref:"eChildCount",cls:"ag-group-child-count"}]},LK=class extends pe{constructor(){super(Dke),this.eExpanded=q,this.eContracted=q,this.eCheckbox=q,this.eValue=q,this.eChildCount=q}init(e){let t={setInnerRenderer:(o,s)=>this.setRenderDetails(o,s),setChildCount:o=>this.eChildCount.textContent=o,toggleCss:(o,s)=>this.toggleCss(o,s),setContractedDisplayed:o=>Ie(this.eContracted,o),setExpandedDisplayed:o=>Ie(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o),setCheckboxSpacing:o=>this.eCheckbox.classList.toggle("ag-group-checkbox-spacing",o)},n=this.createManagedBean(new kZ),i=!e.colDef,r=this.getGui();n.init(t,r,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),i&&Jn(r,n.getCellAriaRole())}setRenderDetails(e,t){e?e.newAgStackInstance().then(n=>{if(!n)return;let i=()=>this.destroyBean(n);this.isAlive()?(this.eValue.appendChild(n.getGui()),this.addDestroyFunc(i)):i()}):this.eValue.innerText=t}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}},_ke=".ag-group-checkbox-spacing{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-group-checkbox-spacing{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-checkbox-spacing{margin-left:var(--ag-cell-widget-spacing)}",Ake=class extends K{constructor(){super(...arguments),this.beanName="showRowGroupColValueSvc"}getGroupValue(e,t){if(!t)return e.group?{displayedNode:e,value:e.groupValue}:null;let n=this.beans.valueSvc,i=t.colDef.showRowGroup;if(!i)return null;if(e.level===-1&&e.footer)return{displayedNode:e,value:null};if(typeof i=="string"){if((this.beans.rowGroupColsSvc?.getColumnIndex(i)??-1)>e.level)return null;let s=this.getDisplayedNode(e,t,!0);if(s)return{displayedNode:s,value:n.getValue(t,s)}}let r=n.getValue(t,e);if(r==null){let o=this.getDisplayedNode(e,t);if(o)return{displayedNode:o,value:n.getValue(t,o)}}return{displayedNode:e,value:r}}formatAndPrefixGroupColValue(e,t,n=!1){let i=this.formatGroupColValue(e,t,n),{value:r,displayedNode:o}=e,s=this.beans.footerSvc;return s?.doesCellShowTotalPrefix(o,t)?s.applyTotalPrefix(r,i,o,t):o.footer&&o.level===-1?null:i}formatGroupColValue(e,t,n=!1){let i=this.beans.valueSvc,{displayedNode:r,value:o}=e,s=r.rowGroupColumn,a=r.group&&!t;if(s&&(a||t?.isRowGroupDisplayed(s.colId))){if(n&&s.colDef.useValueFormatterForExport===!1)return null;let c=i.formatValue(s,r,o);return c==null&&r.key===""?this.getLocaleTextFunc()("blanks","(Blanks)"):c}return!t||r.group||n&&t.colDef.useValueFormatterForExport===!1?null:i.formatValue(t,r,o)}getDisplayedNode(e,t,n=!1){let i=this.gos,r=i.get("groupHideOpenParents"),o=i.get("showOpenedGroup")&&!n;if(!r&&!o)return;let s=t.colDef.showRowGroup;if(s===!0)return e.group?void 0:e.parent??void 0;let a=e;for(;a&&a.rowGroupColumn?.getId()!=s;){let l=a===a.parent?.getFirstChild();if(!o&&!l)return;a=a.parent}if(a!==e)return a??void 0}},Rke=class extends K{constructor(){super(...arguments),this.beanName="showRowGroupCols",this.columns=[],this.colsSet=new Set,this.colsMap=new Map}destroy(){super.destroy(),this.columns.length=0,this.colsSet.clear(),this.colsMap.clear()}refresh(){let{colModel:e,rowGroupColsSvc:t}=this.beans,n=this.columns,i=this.colsSet,r=this.colsMap;r.clear();let o=n.length,s=0,a=!1,l=e.getCols();for(let c=0,d=l.length;c<d;++c){let u=l[c],p=u.getColDef().showRowGroup;if(typeof p=="string")r.set(p,u);else if(p===!0){let f=t?.columns;if(f)for(let g=0,C=f.length;g<C;++g)r.set(f[g].getId(),u)}else continue;a||(a=s>=o||!i.has(u)),n[s++]=u}if(a||(a=s!==o),a){n.length=s,i.clear();for(let c=0;c<s;++c)i.add(n[c]);this.eventSvc.dispatchEvent({type:"showRowGroupColsSetChanged"})}}getShowRowGroupCol(e){return this.colsMap.get(e)}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;let{rowGroupColsSvc:n,colModel:i}=this.beans;if(t===!0&&n)return n.columns;let r=i.getColDefCol(t);return r?[r]:null}isRowGroupDisplayed(e,t){let n=e.getColDef()?.showRowGroup;return n===!0||n!=null&&n===t}},Fke=class extends K{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}postConstruct(){this.isClientSide=nn(this.gos),this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventSvc.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getLastPixelOfGroup(e){return this.isClientSide?Ike(e):Mke(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}updateStickyRows(e){let t=e==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);let{rowModel:i,rowRenderer:r,pinnedRowModel:o}=this.beans,s=t?r.firstVisibleVPixel-this.extraTopHeight:r.lastVisibleVPixel-this.extraTopHeight,a=new Set,l=h=>{if(a.add(h),t){let p=this.getLastPixelOfGroup(h),f=s+n+h.rowHeight;p<f?h.stickyRowTop=n+(p-f):h.stickyRowTop=n}else{let p=this.getFirstPixelOfGroup(h),f=s-(n+h.rowHeight);p>f?h.stickyRowTop=n-(p-f):h.stickyRowTop=n}n=0,a.forEach(p=>{let f=p.stickyRowTop+p.rowHeight;n<f&&(n=f)})},c=this.areFooterRowsStickySuppressed(),d=this.gos.get("suppressGroupRowsSticky"),u=h=>{if(!h.displayed)return!1;if(h.footer){if(c===!0||c==="grand"&&h.level===-1||c==="group"&&h.level>-1)return!1;let p=h.sibling.rowIndex?h.sibling.rowIndex+1===h.rowIndex:!1;return e==="bottom"&&p||h.level===-1&&o?.getGrandTotalPinned()?!1:!a.has(h)}return h.isExpandable()?d===!0||e==="bottom"?!1:!a.has(h)&&h.expanded:!1};for(let h=0;h<100;h++){let p=s+n;t||(p=s-n);let f=i.getRowIndexAtPixel(p),g=i.getRow(f);if(g==null)break;let m=this.getStickyAncestors(g).find(x=>(t?x.rowIndex<f:x.rowIndex>f)&&u(x));if(m){l(m);continue}if((t?g.rowTop<p:g.rowTop+g.rowHeight>p)&&u(g)){l(g);continue}break}return t||a.forEach(h=>{h.stickyRowTop=n-(h.stickyRowTop+h.rowHeight)}),this.refreshNodesAndContainerHeight(e,a,n)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=e==="group",n=e==="grand";return t&&n?!0:n?"grand":t?"group":!1}canRowsBeSticky(){let e=v0(this.gos),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){let t=[],n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(n=>n.rowNode===e)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].rowNode;i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].rowNode;i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,n){let i=e==="top",r=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},s=[];for(let p=0;p<r.length;p++){let f=r[p].rowNode;if(!t.has(f)){o[f.id]=r[p],f.sticky=!1;continue}s.push(r[p])}let a=new Set;for(let p=0;p<s.length;p++)a.add(s[p].rowNode);let l=[];t.forEach(p=>{a.has(p)||(p.sticky=!0,l.push(this.createRowCon(p,!1,!1)))});let c=!!l.length||s.length!==r.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(o,!1);let d=[...s,...l];d.sort((p,f)=>f.rowNode.rowIndex-p.rowNode.rowIndex),i||d.reverse();for(let p of d)p.setRowTop(p.rowNode.stickyRowTop);let u=this.beans.pageBounds,h=0;if(i){for(let p of t)p.rowIndex<u.getFirstRow()&&(h+=p.rowHeight);h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)}else{for(let p of t)p.rowIndex>u.getLastRow()&&(h+=p.rowHeight);h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)}return c?(i?this.stickyTopRowCtrls=d:this.stickyBottomRowCtrls=d,!0):!1}ensureRowHeightsValid(){let e=!1,t=n=>{let i=n.rowNode;if(i.rowHeightEstimated){let r=Nr(this.beans,i);i.setRowHeight(r.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}};function Mke(e){if(e.isExpandable()||e.footer){if(e.master&&e.detailNode)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.childStore?.getStoreBounds();return e.footer&&(n=e.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}function Ike(e){if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master&&i.detailNode)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=Qe(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}var Tke=class extends K{constructor(){super(...arguments),this.beanName="stickyRowSvc"}createStickyRowFeature(e,t,n){let i=this.gos;if(v0(i)&&nn(i)||Ui(i))return e.createManagedBean(new Fke(t,n))}},LZ={moduleName:"GroupCellRenderer",version:Lt,userComponents:{agGroupRowRenderer:LK,agGroupCellRenderer:LK},dynamicBeans:{groupCellRendererCtrl:kZ},icons:{groupContracted:"tree-closed",groupExpanded:"tree-open"},css:[_ke],dependsOn:[ti]},OZ={moduleName:"GroupColumn",version:Lt,beans:[mke,Rke,Ake,gke,RZ,_Z],dependsOn:[ti,LZ]},t1={moduleName:"ClientSideRowModelHierarchy",version:Lt,rowModels:["clientSide"],beans:[Ske,Cke,vke],dependsOn:[ti]},n4={moduleName:"StickyRow",version:Lt,beans:[Tke]},NZ={moduleName:"GroupEdit",version:Lt,beans:[bke],dependsOn:[ti,t1]},Pke=class extends pe{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel());let e=this.onRowGroupChanged.bind(this);this.addManagedEventListeners({columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedPropertyListener("rowGroupPanelShow",e),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){let e=bt({tag:"div",cls:"ag-column-drop-wrapper",role:"presentation"}),t=new mZ(!0);this.rowGroupComp=this.createManagedBean(t);let n=new gZ(!0);this.pivotComp=this.createManagedBean(n),e.appendChild(t.getGui()),e.appendChild(n.getGui());let i=this.onDropPanelVisible.bind(this);return this.addManagedListeners(t,{displayChanged:i}),this.addManagedListeners(n,{displayChanged:i}),this.onDropPanelVisible(),e}onDropPanelVisible(){let{rowGroupComp:e,pivotComp:t}=this,n=e.isDisplayed()&&t.isDisplayed(),i="ag-column-drop-horizontal-half-width";e.toggleCss(i,n),t.toggleCss(i,n)}onRowGroupChanged(){let e=this.rowGroupComp;if(!e)return;let t=this.gos.get("rowGroupPanelShow");if(t==="always")e.setDisplayed(!0);else if(t==="onlyWhenGrouping"){let n=this.beans.rowGroupColsSvc?.columns?.length!==0;e.setDisplayed(n)}else e.setDisplayed(!1)}onPivotPanelShow(){let e=this.pivotComp;if(!e)return;let t=this.gos.get("pivotPanelShow");if(t==="always")e.setDisplayed(!0);else if(t==="onlyWhenPivoting"){let n=this.beans.colModel.isPivotActive();e.setDisplayed(n)}else e.setDisplayed(!1)}},kke={selector:"AG-GRID-HEADER-DROP-ZONES",component:Pke};function Lke(e){return e.buttons&&(e.buttons=[]),e}var Oke={tag:"div",cls:"ag-group-filter",children:[{tag:"div",ref:"eGroupField"},{tag:"div",ref:"eUnderlyingFilter"}]},Nke=class extends Vd{constructor(){super(Oke),this.filterType="group",this.eGroupField=q,this.eUnderlyingFilter=q}wireBeans(e){this.groupFilterSvc=e.groupFilter}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.updateParams().then(()=>{this.addHandlerListeners(this.updateGroups.bind(this))})}refresh(e){let t=e;return this.params=t,t.source==="colDef"&&this.updateParams(),!0}updateParams(){return this.validateParams(),this.updateGroups()}validateParams(){let{colDef:e}=this.params;e.field&&X(234),e.filterValueGetter&&X(235),e.filterParams&&X(236)}addHandlerListeners(e){let t=this.addManagedListeners(this.getHandler(),{sourceColumnsChanged:()=>{this.updateGroups()},destroyed:()=>{for(let n of t)n();this.addHandlerListeners(e)}})}updateGroups(){let{sourceColumns:e,selectedColumn:t}=this.updateGroupField();return this.dispatchLocalEvent({type:"columnsChanged"}),this.getUnderlyingFilters(e,t)}updateGroupField(){this.groupColumn=this.params.column;let e=this.getHandler();if(!e)return{sourceColumns:null};let{sourceColumns:t,hasMultipleColumns:n,selectedColumn:i}=e,r=this.eGroupField;return at(r),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect),n&&t&&(this.createGroupFieldSelectElement(t,i),r.appendChild(this.eGroupFieldSelect.getGui()),r.appendChild(bt({tag:"div",cls:"ag-filter-separator"}))),Ie(r,n),{sourceColumns:t,selectedColumn:i}}createGroupFieldSelectElement(e,t){let n=this.createManagedBean(new Ji);this.eGroupFieldSelect=n;let i=this.getLocaleTextFunc();n.setLabel(i("groupFilterSelect","Select field:")),n.setLabelAlignment("top"),n.addOptions(e.map(r=>({value:r.getColId(),text:this.beans.colNames.getDisplayNameForColumn(r,"groupFilter",!1)??void 0}))),n.setValue(t.getColId()),n.onValueChange(r=>this.updateSelectedColumn(r)),n.addCss("ag-group-filter-field-select-wrapper"),e.length===1&&n.setDisabled(!0)}getUnderlyingFilters(e,t){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,tt.resolve();let n=[],i=[],r=this.beans.colFilter;for(let o of e){let s=r.getOrCreateFilterUi(o);s&&n.push(s.then(a=>{a&&i.push({filter:a,column:o}),o.getColId()===t.getColId()&&(this.selectedFilter=a??void 0)}))}return tt.all(n).then(()=>{this.filterColumnPairs=i})}addUnderlyingFilterElement(e){if(at(this.eUnderlyingFilter),!e)return tt.resolve();let t=this.createManagedBean(new Vu(e,"COLUMN_MENU"));return this.filterComp=t,t.hasFilter()?(this.eUnderlyingFilter.appendChild(t.getGui()),t.getFilter()?.then(()=>{t.afterGuiAttached?.(this.afterGuiAttachedParams),!this.afterGuiAttachedParams?.suppressFocus&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()})??tt.resolve()):tt.resolve()}updateSelectedColumn(e){if(!e)return;this.filterComp?.afterGuiDetached(),this.destroyBean(this.filterComp);let t=this.getFilterColumnPair(e),n=t?.column;this.selectedFilter=t?.filter,this.getHandler().setSelectedColumn(n),this.dispatchLocalEvent({type:"columnsChanged"}),this.addUnderlyingFilterElement(n)}isFilterActive(){return this.groupFilterSvc.isFilterActive(this.groupColumn)}doesFilterPass(){return!0}getModel(){return null}setModel(){}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement(this.getHandler().selectedColumn)}afterGuiDetached(){at(this.eUnderlyingFilter),this.selectedFilter?.afterGuiDetached?.()}getSelectedColumn(){return this.getHandler().selectedColumn}getHandler(){return this.params.getHandler()}getFilterColumnPair(e){if(e)return this.filterColumnPairs?.find(({column:t})=>t.getColId()===e)}},Bke=class extends K{init(e){this.params=e,this.validateModel(e),this.updateColumns(),this.addManagedEventListeners({columnRowGroupChanged:this.updateColumns.bind(this),filterDestroyed:t=>this.onFilterDestroyed(t)})}refresh(e){this.params=e,this.validateModel(e),e.source==="colDef"&&this.updateColumns()}doesFilterPass(){return!0}setSelectedColumn(e){this.selectedColumn=e,this.dispatchLocalEvent({type:"selectedColumnChanged"})}validateModel(e){e.model!=null&&e.onModelChange(null)}getSourceColumns(){let e=this.params.column;if(this.gos.get("treeData"))return X(237),[];let t=this.beans.groupFilter.getSourceColumns(e);return t||(X(183),[])}updateColumns(){let e=this.getSourceColumns(),t=e.filter(r=>r.isFilterAllowed());this.sourceColumns=t;let n,i;t.length?e.length===1?(n=t[0],i=!1):(n=this.selectedColumn,(!n||!t.some(r=>r.getId()===n.getId()))&&(n=t[0]),i=!0):(n=void 0,i=!1),this.selectedColumn=n,this.hasMultipleColumns=i,this.dispatchLocalEvent({type:"sourceColumnsChanged"})}onFilterDestroyed({column:e,source:t}){if(t==="gridDestroyed")return;let n=e.getColId();this.sourceColumns?.some(i=>i.getColId()===n)&&setTimeout(()=>{this.isAlive()&&this.updateColumns()})}},Vke=class extends K{constructor(){super(...arguments),this.beanName="groupFilter"}postConstruct(){this.addManagedEventListeners({columnRowGroupChanged:()=>this.updateFilterFlags("columnRowGroupChanged")})}isGroupFilter(e){return e.getColDef().filter==="agGroupColumnFilter"}isFilterAllowed(e){let t=this.beans.colFilter;return!!this.getSourceColumns(e)?.some(n=>t?.isFilterAllowed(n))}isFilterActive(e){let t=this.beans.colFilter;return!!this.getSourceColumns(e)?.some(n=>t?.isFilterActive(n))}getSourceColumns(e){return this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e)}updateFilterFlags(e,t){let{autoColSvc:n,colFilter:i}=this.beans;n?.getColumns()?.forEach(r=>{this.isGroupFilter(r)&&i?.setColFilterActive(r,this.isFilterActive(r),e,t)})}},Gke={tag:"div",ref:"eFloatingFilter",cls:"ag-group-floating-filter ag-floating-filter-input",role:"presentation"},Hke=class extends pe{constructor(){super(Gke),this.eFloatingFilter=q,this.haveAddedColumnListeners=!1}init(e){this.params=e;let t=C0(this.gos),n=this.onColChange.bind(this),i=r=>{t?this.setupUnderlyingFloatingFilterElement().then(()=>r()):(this.setupReadOnlyFloatingFilterElement(),r())};return this.gos.get("enableFilterHandlers")?new tt(r=>i(r)).then(()=>{this.addHandlerListeners(e,n)}):new tt(r=>{this.params.parentFilterInstance(o=>{this.parentFilterInstance=o,i(r)})}).then(()=>{this.addManagedListeners(this.parentFilterInstance,{columnsChanged:n})})}refresh(e){if(this.params=e,this.setParams(),this.gos.get("enableFilterHandlers"))if(this.showingUnderlyingFloatingFilter){let t=this.getSelectedColumn(),n=this.beans.colFilter.getFloatingFilterCompDetails(t,this.params.showParentFilter);this.underlyingFloatingFilter?.refresh?.(n?.params)}else this.updateDisplayedValue()}setParams(){let e=this.beans.colNames.getDisplayNameForColumn(this.params.column,"header",!0),t=this.getLocaleTextFunc();this.eFloatingFilterText?.setInputAriaLabel(`${e} ${t("ariaFilterInput","Filter Input")}`)}addHandlerListeners(e,t){let n=this.addManagedListeners(e.getHandler(),{selectedColumnChanged:t,sourceColumnsChanged:t,destroyed:()=>{for(let i of n)i();this.addHandlerListeners(this.params,t)}})}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new Go),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,at(this.eFloatingFilter);let e=this.getSelectedColumn();if(e&&!e.isVisible()){let t=this.beans.colFilter,n=t.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(n)return this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListeners(e,{visibleChanged:this.onColumnVisibleChanged.bind(this),colDefChanged:this.onColDefChanged.bind(this)})),n.newAgStackInstance().then(i=>{this.underlyingFloatingFilter=i,this.underlyingFloatingFilter?.onParentModelChanged(t.getModelForColumn(e)),this.appendChild(i.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),tt.resolve()}getSelectedColumn(){return this.gos.get("enableFilterHandlers")?this.params.getHandler().selectedColumn:this.parentFilterInstance.getSelectedColumn()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){if(!e.column)return;let t=this.beans.colFilter.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);t&&this.underlyingFloatingFilter?.refresh?.(t.params)}onParentModelChanged(e,t){this.showingUnderlyingFloatingFilter?this.underlyingFloatingFilter?.onParentModelChanged(this.beans.colFilter.getModelForColumn(this.getSelectedColumn()),t):this.updateDisplayedValue()}updateDisplayedValue(){let e=this.eFloatingFilterText;if(!e)return;let t=this.beans.colFilter,n=this.getSelectedColumn(),i=r=>{if(!r)e.setValue(""),e.setDisplayed(!1);else{let o=n?t.getModelForColumn(n):null;e.setValue(o==null?"":r.getModelAsString?.(o)??""),e.setDisplayed(!0)}};this.gos.get("enableFilterHandlers")?i(t.getHandler(n)):t.getOrCreateFilterUi(n)?.then(r=>{i(r)})}onColChange(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}},zke=(e,t)=>{if(!e){t.length=0;return}let n=e.length;t.length=n;for(let i=0;i<n;i++){let r=e[i],o=r.getColDef();t[i]={col:r,field:o.field,type:o.type,keyCreator:o.keyCreator,valueGetter:o.valueGetter}}},jke=(e,t)=>{let n=e.length;if(n!==t?.length)return!0;for(let i=0;i<n;i++){let r=e[i],o=t[i];if(r.col!==o)return!0;let s=o.getColDef();if(r.field!==s.field||r.type!==s.type||r.valueGetter!==s.valueGetter||r.keyCreator!==s.keyCreator)return!0}return!1};function Uke(e){if(!e)return!1;let t=e.length;if(t<2)return!1;let n=!1;for(let i=1;i<t;i++)if(OK(e[i-1],e[i])>0){n=!0;break}return n?(e.sort(OK),!0):!1}function OK(e,t){let n=e.sourceRowIndex,i=t.sourceRowIndex,r=n>=0,o=i>=0,s=r&&o,a=!r&&!o;return s?n-i:a?e.__objectId-t.__objectId:r?1:-1}var Wke=class extends K{constructor(){super(...arguments),this.groupCols=[],this.nonLeafsById=new Map,this.checkGroupCols=!0,this.pivotMode=!1,this.groupEmpty=!1}invalidateGroupCols(){this.checkGroupCols=!0}destroy(){super.destroy(),this.groupCols.length=0,this.nonLeafsById.clear()}clearNonLeafs(){let e=this.nonLeafsById;for(let t of e.values())t._destroy(!1);e.clear()}loadGroupData(e){if(!e.group)return e._groupData=null,null;let t=e.rowGroupColumn,{valueSvc:n,showRowGroupCols:i}=this.beans,r={};if(e._groupData=r,!t)return r;let o=Ou(e),s=t.getId();if(!i)return r;let a=i.columns;for(let l=0,c=a.length;l<c;++l){let d=a[l];d.isRowGroupDisplayed(s)&&(r[d.getColId()]=n.getValue(t,o))}return r}execute(e,t){let n=t.changedPath;if(this.initRefresh(t)){let i=t.changedRowNodes;i?this.handleDeltaUpdate(e,n,i,!!t.animate):this.shotgunResetEverything(e)}this.positionLeafsAndGroups(n),this.orderGroups(e),this.beans.selectionSvc?.updateSelectableAfterGrouping(n)}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst(t=>{let n=t.childrenAfterGroup,i=n?.length;if(!i)return;let r=new Array(i),o=0,s=!1,a;for(let l=0;l<i;++l){let c=n[l];if(!c.childrenAfterGroup?.length)s||(s=o!==l),r[o++]=c;else if(!a&&c.key===""){a=c;let d=i-1;s||(s=l!==d),r[d]=c}}if(s){for(let c=0;c<i;++c){let d=n[c];d.childrenAfterGroup?.length&&d!==a&&(r[o++]=d)}t.childrenAfterGroup=r;let l=t.sibling;l&&(l.childrenAfterGroup=r)}},!1)}initRefresh(e){let{rowGroupColsSvc:t,colModel:n,gos:i}=this.beans,r=n.isPivotMode();this.pivotMode=r,this.groupEmpty=r||!i.get("groupAllowUnbalanced");let o=t?.columns,s=this.groupCols,a=e.afterColumnsChanged;if(a||!s||this.checkGroupCols)if(this.checkGroupCols=!1,s&&!jke(s,o)){if(a)return!1}else e.animate=!1,zke(o,this.groupCols);return!0}handleDeltaUpdate(e,t,{removals:n,updates:i,adds:r,reordered:o},s){let a=new Set,l=t;l.active||(l=null);for(let c=0,d=n.length;c<d;++c){let u=n[c],h=this.removeFromParent(u);a.has(h)||(a.add(h),l?.addParentNode(h))}for(let c of i){let d=c.parent;if(l?.addParentNode(d),this.moveNodeInWrongPath(e,c)){a.add(d);let u=c.parent;l?.addParentNode(u),o||(o=(u?.childrenAfterGroup?.length??0)>1)}}if(r.size)for(let c of r){this.insertOneNode(e,c);let d=c.parent;l?.addParentNode(d),o||(o=(d?.childrenAfterGroup?.length??0)>1)}a.size&&(NK(a),this.removeEmptyGroups(a,s)),o&&this.sortChildren(t)}sortChildren(e){e.forEachChangedNodeDepthFirst(t=>{Uke(t.childrenAfterGroup)&&e.active&&e.addParentNode(t)},!1,!0)}orderGroups(e){let t=this.gos.getCallback("initialGroupOrderComparator");if(!t)return;let n=this.beans,i=n.gridApi,r=n.gridOptions.context,o=(a,l)=>t({api:i,context:r,nodeA:a,nodeB:l}),s=a=>{let l=a.childrenAfterGroup,c=l?.length;if(!(!c||a.leafGroup)){c>1&&l.sort(o);for(let d=0,u=c;d<u;++d)s(l[d])}};s(e)}moveNodeInWrongPath(e,t){let{valueSvc:n}=this.beans,i=this.groupEmpty,r=t.parent,o=!1,s=this.groupCols;if(!s)return!1;for(let a=s.length-1;a>=0;--a){let{col:l}=s[a],c=n.getKeyForNode(l,t);if(c==null||c===""){if(!i)continue;c=""}if(!r?.parent||r.key!==c){o=!0;break}r=r.parent}return o||(o=!!r?.parent),o?(this.removeFromParent(t),this.insertOneNode(e,t),t.setData(t.data),!0):!1}groupShouldBeRemoved(e){let t=this.getChildrenMappedKey(e.key,e.rowGroupColumn),n=e.parent?.childrenMapped;return(n?!n[t]:!0)?!1:!!e.group&&(e.childrenAfterGroup?.length??0)===0}removeEmptyGroups(e,t){let n=this.beans.selectionSvc,i,r=Array.from(e),o=this.nonLeafsById;do{e.clear();for(let s=0;s<r.length;++s){let a=r[s];for(;a;){let l=a.parent;if(a.destroyed){r[s]=l,a=l;continue}if(!l)break;if(!this.groupShouldBeRemoved(a)){a=l;continue}e.add(l),this.removeFromParent(a),n&&a.isSelected()&&(i??(i=[]),i.push(a)),r[s]=l,o.delete(a.id),a._destroy(t),a=l}}NK(e)}while(e.size);i&&n.setNodesSelected({nodes:i,newValue:!1,source:"rowGroupChanged"})}removeFromParent(e){let t=e.parent;if(t){let n=this.getChildrenMappedKey(e.key,e.rowGroupColumn),i=t.childrenMapped;i&&delete i[n]}return e.setRowTop(null),e.setRowIndex(null),t}addToParent(e,t){let n=t.childrenMapped??(t.childrenMapped={}),i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(n[i]!==e){n[i]=e;let r=t.childrenAfterGroup;if(!r){t.childrenAfterGroup=r=[];let o=t.sibling;o&&(o.childrenAfterGroup=t.childrenAfterGroup)}r.push(e),cZ(t,this.beans,!0),LL(t)}}shotgunResetEverything(e){this.beans.selectionSvc?.filterFromSelection?.(i=>!i.group),this.nonLeafsById.clear(),e.leafGroup=!this.groupCols?.length,e.childrenAfterGroup=[],e.childrenMapped={},e.updateHasChildren();let t=e.sibling;t&&(t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped);let n=e._leafs;for(let i=0,r=n.length;i<r;++i)this.insertOneNode(e,n[i])}insertOneNode(e,t){let n=e,{beans:i,pivotMode:r,groupCols:o,groupEmpty:s}=this,a=i.valueSvc;if(!o)return;let l=o.length;for(let c=0;c<l;++c){let d=o[c],u=d.col,h=a.getKeyForNode(u,t);if(h==null||h===""){if(!s)continue;h=""}let p=n.childrenMapped?.[this.getChildrenMappedKey(h,u)];if(p){n=p;continue}let f=n.level+1,g=f>=l-1,C=this.createGroup(n,d,h,f,g,t);this.addToParent(C,n),this.setExpandedInitialValue(r,C),n=C}n.group||X(184,{parentGroupData:n.data,childNodeData:t.data}),t.parent=n,t.level=n.level+1,n.childrenAfterGroup.push(t),n.updateHasChildren(),LL(n)}createGroup(e,t,n,i,r,o){let s=t.col,a=(e.level>=0?e.id+"-":"row-group-")+(s.getColId()+"-"+n),l=this.nonLeafsById,c=l.get(a);return c!==void 0||(c=new ar(this.beans),c.group=!0,c.parent=e,c.field=t.field??null,c.rowGroupColumn=s,c.key=n,c.id=a,c.level=i,c.leafGroup=r,c.rowGroupIndex=i,c.childrenAfterGroup=[],c.childrenMapped={},l.set(a,c),c.groupValue=o&&this.beans.valueSvc.getValue(s,o),c.setAllChildrenCount(0),c.updateHasChildren()),c}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e&&t.leafGroup){t.expanded=!1;return}t.expanded=t4(this.beans,t,t.level)}onShowRowGroupColsSetChanged(){let{rowModel:e,valueSvc:t}=this.beans;for(let i of this.nonLeafsById.values()){i._groupData=void 0;let r=i.rowGroupColumn,o=r&&Ou(i);i.groupValue=o&&t.getValue(r,o)}let n=e.rootNode?._leafs;if(n)for(let i=0,r=n.length;i<r;++i){let o=n[i];o.parent._groupData=void 0}}},NK=e=>{for(let t of e){let n=t?.childrenAfterGroup;if(!n)continue;let i=n.length,r=0;for(let o=0;o<i;++o){let s=n[o];s.parent===t&&!s.destroyed&&(r!==o&&(n[r]=s),++r)}i!==r&&(n.length=r,t.updateHasChildren(),LL(t))}},LL=e=>{for(;e._leafs!==void 0;){let t=e.parent;if(!t)break;e._leafs=void 0,e=t}};function $ke(e,t){e.rowGroupColsSvc?.setColumns(t,"api")}function qke(e,t){e.rowGroupColsSvc?.removeColumns(t,"api")}function Kke(e,t){e.rowGroupColsSvc?.addColumns(t,"api")}function Yke(e,t,n){e.rowGroupColsSvc?.moveColumn?.(t,n,"api")}function Zke(e){return e.rowGroupColsSvc?.columns??[]}var BZ={moduleName:"SharedRowGrouping",version:Lt,apiFunctions:{setRowGroupColumns:$ke,removeRowGroupColumns:qke,addRowGroupColumns:Kke,getRowGroupColumns:Zke,moveRowGroupColumn:Yke},dependsOn:[ti,e4,OZ,n4,fke]},VZ={moduleName:"RowGrouping",version:Lt,dynamicBeans:{groupStrategy:Wke},rowModels:["clientSide"],dependsOn:[BZ,AZ,t1,NZ]},Xke={moduleName:"RowGroupingPanel",version:Lt,selectors:[kke],icons:{pivotPanel:"pivot",rowGroupPanel:"group",panelDelimiter:"small-right",panelDelimiterRtl:"small-left"},dependsOn:[ti,ua]},Qke={moduleName:"GroupFilter",version:Lt,userComponents:{agGroupColumnFilter:{classImp:Nke,processParams:Lke},agGroupColumnFloatingFilter:Hke},beans:[Vke],dynamicBeans:{agGroupColumnFilterHandler:Bke},dependsOn:[ti,Wa]},Jke=class extends K{constructor(){super(...arguments),this.beanName="rowModel",this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={},this.rootNode=null,this.viewportChangedContext=!1}ensureRowHeightsValid(e,t,n,i){return!1}postConstruct(){let e=this.beans,t=new ar(e);this.rootNode=t,t.level=-1,this.rowHeight=fo(e),this.addManagedEventListeners({viewportChanged:this.onViewportChanged.bind(this)}),this.addManagedPropertyListener("viewportDatasource",()=>this.updateDatasource()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=fo(e),this.updateRowHeights()})}start(){this.updateDatasource()}isLastRowIndexKnown(){return!0}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){let e=this.datasource;e&&(e.destroy?.(),this.beans.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}updateDatasource(){let e=this.gos.get("viewportDatasource");e&&this.setViewportDatasource(e)}getPageSize(){return this.gos.get("viewportRowModelPageSize")}getBufferSize(){return this.gos.get("viewportRowModelBufferSize")}calculateFirstRow(e){let t=this.getBufferSize(),n=this.getPageSize(),i=e-t;return i<0?0:Math.floor(i/n)*n}calculateLastRow(e){if(e===-1)return e;let t=this.getBufferSize(),n=this.getPageSize(),i=e+t,r=Math.ceil(i/n)*n,o=this.rowCount-1;return Math.min(r,o)}onViewportChanged(e){let t=this.calculateFirstRow(e.firstRow),n=this.calculateLastRow(e.lastRow);(this.firstRow!==t||this.lastRow!==n)&&(this.firstRow=t,this.lastRow=n,this.purgeRowsNotInViewport(),this.viewportChangedContext=!0,this.datasource?.setViewportRange(this.firstRow,this.lastRow),this.viewportChangedContext=!1)}purgeRowsNotInViewport(){let e=this.rowNodesByIndex;for(let t of Object.keys(e)){let n=parseInt(t,10);if(n<this.firstRow||n>this.lastRow){if(this.isRowFocused(n)||this.beans.editSvc?.isRowEditing(e[n]))continue;delete e[n]}}}isRowFocused(e){let t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();return!t||t.rowPinned!=null?!1:t.rowIndex===e}setViewportDatasource(e){this.destroyDatasource(),this.datasource=e,this.rowCount=-1,e.init?e.init(Oe(this.gos,{setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)})):X(226)}getType(){return"viewport"}getRow(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}getRowCount(){return this.rowCount===-1?0:this.rowCount}getRowIndexAtPixel(e){return this.rowHeight!==0?Math.floor(e/this.rowHeight):0}resetRowHeights(){}onRowHeightChanged(){}getRowBounds(e){let t=this.rowHeight;return{rowHeight:t,rowTop:t*e}}updateRowHeights(){let e=this.rowHeight;this.forEachNode(t=>{t.setRowHeight(e),t.setRowTop(e*t.rowIndex)}),this.eventSvc.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1})}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}isEmpty(){return this.rowCount>0}getOverlayType(){return null}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(e,t){let n=e.rowIndex,i=t.rowIndex,r=n<this.firstRow||n>this.lastRow,o=i<this.firstRow||i>this.lastRow;if(r||o)return[];let s=[],a=n<=i?n:i,l=n<=i?i:n;for(let c=a;c<=l;c++)s.push(this.rowNodesByIndex[c]);return s}forEachNode(e){let t=0;for(let n of Object.keys(this.rowNodesByIndex)){let i=parseInt(n,10),r=this.rowNodesByIndex[i];e(r,t),t++}}setRowData(e){let t=Fl(this.beans.gos),n=new Map;if(t)for(let i of Object.values(this.rowNodesByIndex))n.set(i.id,i);for(let i=this.firstRow;i<=this.lastRow;i++){let r=e[i];if(!r)continue;let o,s;t?(o=t({data:r,rowPinned:void 0,level:0,parentKeys:void 0}),s=n.get(o)):s=this.rowNodesByIndex[i],s?(s.updateData(r),s.setRowIndex(i),s.setRowTop(this.rowHeight*i)):(s=this.createBlankRowNode(i),s.setDataAndId(r,o??i.toString())),this.rowNodesByIndex[i]=s}this.viewportChangedContext||this.eventSvc.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1})}createBlankRowNode(e){let t=new ar(this.beans),n=this.rowHeight;return t.setRowHeight(n),t.setRowTop(n*e),t.setRowIndex(e),t}setRowCount(e,t=!1){if(e===this.rowCount)return;this.rowCount=e;let n=this.eventSvc;n.dispatchEventOnce({type:"rowCountReady"}),n.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:t,animate:!1})}isRowPresent(e){return!!this.getRowNode(e.id)}},e5e={moduleName:"ViewportRowModel",version:Lt,rowModels:["viewport"],beans:[Jke],dependsOn:[ti]};function t5e(e,t){e.clipboardSvc?.copyToClipboard(t)}function n5e(e,t){e.clipboardSvc?.cutToClipboard(t)}function i5e(e,t){e.clipboardSvc?.copySelectedRowsToClipboard(t)}function r5e(e,t){e.clipboardSvc?.copySelectedRangeToClipboard(t)}function o5e(e){e.clipboardSvc?.copyRangeDown()}function s5e(e){e.clipboardSvc?.pasteFromClipboard()}var X_="paste",uL="dragCopy",hL="clipboard";function a5e(e,t=","){let n=[],i=o=>o==="\r"||o===`
`,r=!1;if(e==="")return[[""]];for(let o=0,s=0,a=0;a<e.length;a++){let l=e[a-1],c=e[a],d=e[a+1],u=()=>{n[o]||(n[o]=[]),n[o][s]||(n[o][s]="")};if(u(),c==='"'&&(r?d==='"'?(n[o][s]+='"',a++):r=!1:(l===void 0||l===t||i(l))&&(r=!0)),!r&&c!=='"'){if(c===t){s++,u();continue}else if(i(c)){s=0,o++,u(),c==="\r"&&d===`
`&&a++;continue}}n[o][s]+=c}return n}var l5e=class extends K{constructor(){super(...arguments),this.beanName="clipboardSvc",this.clientSideRowModel=null,this.gridCtrl=null,this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}postConstruct(){let{gos:e,rowModel:t,ctrlsSvc:n}=this.beans;nn(e,t)&&(this.clientSideRowModel=t),n.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}destroy(){super.destroy(),this.clientSideRowModel=null,this.gridCtrl=null}pasteFromClipboard(){!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard?.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(t=>{X(40,{e:t,method:"readText"}),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1,t=n=>{let i=Date.now();i-this.lastPasteOperationTime<50&&(e=!0,n.preventDefault()),this.lastPasteOperationTime=i};this.executeOnTempElement(n=>{n.addEventListener("paste",t),n.focus({preventScroll:!0})},n=>{let i=n.value;e?this.refocusLastFocusedCell():this.processClipboardData(i),n.removeEventListener("paste",t)})}refocusLastFocusedCell(){let{focusSvc:e}=this.beans,t=e.getFocusedCell();t&&e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){let e=this.gos.get("clipboardDelimiter");return _e(e)?e:"	"}processClipboardData(e){if(e==null)return;let t=a5e(e,this.getClipboardDelimiter()),n=this.gos.getCallback("processDataFromClipboard");if(n&&(t=n({data:t})),t==null)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(t);let{rangeSvc:i,editSvc:r}=this.beans,o=(s,a,l,c)=>{i?.isMoreThanOneCell()&&!this.hasOnlyOneValueToPaste(t)?this.pasteIntoActiveRange(t,s,a,c):this.pasteStartingFromFocusedCell(t,s,a,l,c),r?.stopEditing(void 0,{source:X_})};this.doPasteOperation(o)}doPasteOperation(e){let t="clipboard",{eventSvc:n,focusSvc:i,rowRenderer:r,gos:o}=this.beans;n.dispatchEvent({type:"pasteStart",source:t});let{clientSideRowModel:s}=this,a=s?.rootNode,l=a&&new Nu(o.get("aggregateOnlyChangedColumns"),a),c={},d=[],u=i.getFocusedCell();e(c,d,u,l);let h=[...d];l&&(s.doAggregate(l),l.forEachChangedNodeDepthFirst(p=>{h.push(p)})),r.refreshCells({rowNodes:h}),this.dispatchFlashCells(c),this.fireRowChanged(d),this.refocusLastFocusedCell(),n.dispatchEvent({type:"pasteEnd",source:t})}getPreProcessRangeCallback(e){return t=>{let{rangeSvc:n}=this.beans;if(!n)return;let{rowDiff:i,colDiff:r}=this.getAdjustedRangeDimensionForPaste(t,e);i!==0&&n.extendRangeRowCountBy(t,i),r!==0&&n.extendRangeColumnCountBy(t,r)}}getAdjustedRangeDimensionForPaste(e,t){let n=this.beans.rangeSvc,i=t.length,r=n.getRangeRowCount(e),o=r>=i&&r%i===0,s=t[0].length,a=e.columns.length,l=a>=s&&a%s===0;return{rowDiff:o?0:i-r,colDiff:l?0:s-a}}pasteIntoActiveRange(e,t,n,i){let r=0,o=0,s=(a,l,c,d)=>{if(d-r>=e.length){if(d%e.length!==0)return;r+=o,o=0}let h=e[d-r];n.push(l);let p=this.gos.getCallback("processCellFromClipboard"),f=c.columns,g=f.findIndex(Ld);g!==-1&&f.splice(g,1);for(let C=0;C<f.length;C++){let m=f[C];if(!m.isCellEditable(l)||m.isSuppressPaste(l))continue;let w=C;C>=h.length&&(w=C%h.length);let x=this.processCell(l,m,h[w],uL,p,!0);l.setDataValue(m,x,X_),i?.addParentNode(l.parent,[m]);let{rowIndex:D,rowPinned:F}=a,L=Bd({rowIndex:D,column:m,rowPinned:F});t[L]=!0}o++};this.iterateActiveRanges(s,!1,this.getPreProcessRangeCallback(e))}getDisplayedColumnsStartingAt(e){let t=e,n=[],{visibleCols:i}=this.beans;for(;t&&gy(t);)t=i.getColAfter(t);for(;t!=null;)n.push(t),t=i.getColAfter(t);return n}pasteStartingFromFocusedCell(e,t,n,i,r){if(!i)return;let o={rowIndex:i.rowIndex,rowPinned:i.rowPinned},s=this.getDisplayedColumnsStartingAt(i.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,n,t,r):this.pasteMultipleValues(e,o,n,s,t,hL,r)}isPasteSingleValueIntoRange(e){let t=this.beans.rangeSvc;return this.hasOnlyOneValueToPaste(e)&&!!t&&!t.isEmpty()}pasteSingleValueIntoRange(e,t,n,i){let r=e[0][0],o=(s,a,l)=>{t.push(a),l.columns.forEach(c=>this.updateCellValue(a,c,r,n,hL,i))};this.iterateActiveRanges(o)}hasOnlyOneValueToPaste(e){return e.length===1&&e[0].length===1}copyRangeDown(){let{rangeSvc:e,gos:t,formula:n,valueSvc:i}=this.beans;if(!e||e.isEmpty())return;let r=[],o=(s,a,l,c)=>{let d=t.getCallback("processCellForClipboard"),u=t.getCallback("processCellFromClipboard"),h=(p,f,g)=>{let{columns:C}=g;r.length?(a.push(f),C.forEach((m,w)=>{if(!m.isCellEditable(f)||m.isSuppressPaste(f))return;m.isAllowFormula()&&n?.isFormula(r[w])&&(r[w]=n?.updateFormulaByOffset({value:r[w],rowDelta:1}));let D=this.processCell(f,m,r[w],uL,u,!0);f.setDataValue(m,D,X_),c&&c.addParentNode(f.parent,[m]);let{rowIndex:F,rowPinned:L}=p,V=Bd({rowIndex:F,column:m,rowPinned:L});s[V]=!0})):C.forEach(m=>{let w=this.processCell(f,m,i.getValue(m,f),uL,d,!1,!0);r.push(w)})};this.iterateActiveRanges(h,!0)};this.doPasteOperation(o)}removeLastLineIfBlank(e){let t=Qe(e);if(t&&t.length===1&&t[0]===""){if(e.length===1)return;Ci(e,t)}}fireRowChanged(e){if(this.gos.get("editType")==="fullRow")for(let t of e)this.eventSvc.dispatchEvent({type:"rowValueChanged",node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned})}pasteMultipleValues(e,t,n,i,r,o,s){let a=t,l=this.beans,{gos:c}=l,d=this.clientSideRowModel!=null&&!c.get("enableGroupEdit")&&!c.get("treeData"),u=()=>{for(;;){if(!a)return null;let h=Mi(l,a);if(a=Vr(l,{rowPinned:a.rowPinned,rowIndex:a.rowIndex}),h==null)return null;if(!(h.detail||h.footer||d&&h.group))return h}};for(let h of e){let p=u();p&&(h.forEach((f,g)=>this.updateCellValue(p,i[g],f,r,o,s)),n.push(p))}}updateCellValue(e,t,n,i,r,o){if(!e||!t?.isCellEditable(e)||t?.isSuppressPaste(e))return;let s=this.processCell(e,t,n,r,this.gos.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,s,X_);let{rowIndex:a,rowPinned:l}=e,c=Bd({rowIndex:a,column:t,rowPinned:l});i[c]=!0,o&&o.addParentNode(e.parent,[t])}copyToClipboard(e={}){this.copyOrCutToClipboard(e)}cutToClipboard(e={},t="api"){this.gos.get("suppressCutToClipboard")||(this.eventSvc.dispatchEvent({type:"cutStart",source:t}),this.copyOrCutToClipboard(e,!0),this.eventSvc.dispatchEvent({type:"cutEnd",source:t}))}copyOrCutToClipboard(e,t){let{includeHeaders:n,includeGroupHeaders:i}=e,{gos:r,focusSvc:o}=this.beans;n==null&&(n=r.get("copyHeadersToClipboard")),i==null&&(i=r.get("copyGroupHeadersToClipboard"));let s={includeHeaders:n,includeGroupHeaders:i},a=r.get("rowSelection"),l=r.get("cellSelection"),c=null;this.shouldCopyCells(l,a)?(this.copySelectedRangeToClipboard(s),c=0):this.shouldCopyRows(a)?(this.copySelectedRowsToClipboard(s),c=1):o.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(s),c=2),t&&c!==null&&this.clearCellsAfterCopy(c)}shouldCopyCells(e,t){let{rangeSvc:n,selectionSvc:i,gos:r}=this.beans;if(!n||n.isEmpty())return!1;if(e)return!(typeof t=="object"&&t.copySelectedRows&&!i?.isEmpty());{let o=r.get("suppressCopySingleCellRanges");return!(!n.isMoreThanOneCell()&&o)}}shouldCopyRows(e){let{selectionSvc:t,gos:n}=this.beans;return t?.isEmpty()??!0?!1:e&&typeof e!="string"?e.copySelectedRows??!1:!n.get("suppressCopyRowsToClipboard")}clearCellsAfterCopy(e){let t=this.beans,{rangeSvc:n,focusSvc:i,eventSvc:r}=t;if(r.dispatchEvent({type:"keyShortcutChangedCellStart"}),e===0)n.clearCellRangeCellValues({cellEventSource:"clipboardSvc"});else if(e===1)this.clearSelectedRows();else{let o=i.getFocusedCell();if(o==null)return;let s=Mi(t,o);s&&this.clearCellValue(s,o.column)}r.dispatchEvent({type:"keyShortcutChangedCellEnd"})}clearSelectedRows(){let{selectionSvc:e,visibleCols:t}=this.beans,n=e?.getSelectedNodes()??[],i=t.allCols;for(let r of n)for(let o of i)this.clearCellValue(r,o)}clearCellValue(e,t){if(!t.isCellEditable(e))return;let n=this.beans.valueSvc.getDeleteValue(t,e);e.setDataValue(t,n,"clipboardSvc")}iterateActiveRanges(e,t,n){let i=this.beans.rangeSvc;if(!i||i.isEmpty())return;let r=i.getCellRanges(),o=t?[r[0]]:r;for(let s of o)this.iterateActiveRange({cellRange:s,rowCallback:e,preProcessRange:n})}iterateActiveRange(e){let{cellRange:t,preProcessRange:n,rowCallback:i}=e,{beans:r}=this,{rangeSvc:o}=r;if(!o)return;n&&n(t);let s=o.getRangeStartRow(t),a=o.getRangeEndRow(t),l=0,c=!1;for(;!c&&s!=null;){let d=Mi(r,s);c=Hn(s,a),i(s,d,t,l++),s=Vr(r,s)}}copySelectedRangeToClipboard(e={}){let t=this.beans.rangeSvc;if(!t||t.isEmpty())return;let n=t.areAllRangesAbleToMerge(),{data:i,cellsToFlash:r}=n?this.buildDataFromMergedRanges(t,e):this.buildDataFromRanges(t,e);this.copyDataToClipboard(i),this.dispatchFlashCells(r)}buildDataFromMergedRanges(e,t){let n=new Set,i=e.getCellRanges(),r=new Map,o=[],s={},a=nn(this.gos,this.beans.rowModel),l=new Set;a||this.beans.rowModel.forEachNode(h=>{l.add(h.rowIndex)});for(let h of i){h.columns.forEach(g=>n.add(g));let{rowPositions:p,cellsToFlash:f}=this.getRangeRowPositionsAndCellsToFlash(e,h);for(let g of p){let C=l.has(g.rowIndex);if(!a&&!C)continue;let m=`${g.rowIndex}-${g.rowPinned||"null"}`;r.get(m)||(r.set(m,!0),o.push(g))}Object.assign(s,f)}let c=this.beans.visibleCols.allCols,d=Array.from(n);return d.sort((h,p)=>{let f=c.indexOf(h),g=c.indexOf(p);return f-g}),{data:this.buildExportParams({columns:d,rowPositions:o,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:s}}buildDataFromRanges(e,t){let n=e.getCellRanges(),i=[],r={};for(let o of n){let{rowPositions:s,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(e,o);Object.assign(r,a),i.push(this.buildExportParams({columns:o.columns,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))}return{data:i.join(`
`),cellsToFlash:r}}getRangeRowPositionsAndCellsToFlash(e,t){let n=[],i={},r=e.getRangeStartRow(t),o=e.getRangeEndRow(t),s=r;for(;s;){n.push(s);for(let a of t.columns){let{rowIndex:l,rowPinned:c}=s,d=Bd({rowIndex:l,column:a,rowPinned:c});i[d]=!0}if(Hn(s,o))break;s=Vr(this.beans,s)}return{rowPositions:n,cellsToFlash:i}}getCellsToFlashFromRowNodes(e){let t=this.beans.visibleCols.allCols,n={};for(let i=0;i<e.length;i++){let{level:r,rowIndex:o,rowPinned:s,sibling:a}=e[i],l=r===-1?a.rowIndex:o;if(l!=null)for(let c=0;c<t.length;c++){let d=t[c],u=Bd({rowIndex:l,column:d,rowPinned:s});n[u]=!0}}return n}copyFocusedCellToClipboard(e={}){let t=this.beans.focusSvc.getFocusedCell();if(t==null)return;t=this.beans.rowSpanSvc?.getCellStart(t)??t;let n=Bd(t),i={rowPinned:t.rowPinned,rowIndex:t.rowIndex},r=t.column,o=this.buildExportParams({columns:[r],rowPositions:[i],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(o),this.dispatchFlashCells({[n]:!0})}copySelectedRowsToClipboard(e={}){let{columnKeys:t,includeHeaders:n,includeGroupHeaders:i}=e,r=this.buildExportParams({columns:t,includeHeaders:n,includeGroupHeaders:i});this.copyDataToClipboard(r);let o=this.beans.selectionSvc?.getSelectedNodes()||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(o))}buildExportParams(e){let{columns:t,rowPositions:n,includeHeaders:i=!1,includeGroupHeaders:r=!1}=e,{gos:o,csvCreator:s}=this.beans,a=({node:c,column:d})=>{let{value:u,valueFormatted:h}=this.beans.valueSvc.getValueForDisplay({column:d,node:c,includeValueFormatted:!0}),p=h??u??"",f=o.getCallback("processCellForClipboard");return f?f({column:d,node:c,value:p,type:hL,formatValue:g=>this.beans.valueSvc.formatValue(d,c,g)??g,parseValue:g=>this.beans.valueSvc.parseValue(d,c,g,u)??g}):p},l={columnKeys:t,rowPositions:n,skipColumnHeaders:!i,skipColumnGroupHeaders:!r,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!n,processCellCallback:o.getCallback("processCellForClipboard"),processRowGroupCallback:a,processHeaderCallback:o.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:o.getCallback("processGroupHeaderForClipboard")};return s.getDataAsCsv(l,!0)}dispatchFlashCells(e){window.setTimeout(()=>{this.eventSvc.dispatchEvent({type:"flashCells",cells:e})},0)}processCell(e,t,n,i,r,o,s){let{valueSvc:a,formula:l}=this.beans;return r?r({column:t,node:e,value:n,type:i,formatValue:d=>a.formatValue(t,e??null,d)??d,parseValue:d=>a.parseValue(t,e??null,d,a.getValue(t,e))}):o&&t.getColDef().useValueParserForImport!==!1?a.parseValue(t,e??null,n,a.getValue(t,e)):s&&t.getColDef().useValueFormatterForExport!==!1?l?.isFormula(n)?n:a.formatValue(t,e??null,n)??n:n}copyDataToClipboard(e){let t=this.gos.getCallback("sendToClipboard");if(t){t({data:e});return}if(!this.gos.get("suppressClipboardApi")&&navigator.clipboard){navigator.clipboard.writeText(e).catch(i=>{X(40,{e:i,method:"writeText"}),this.copyDataToClipboardLegacy(e)});return}this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement(t=>{let n=vi(this.beans),i=wt(this.beans);t.value=e||" ",t.select(),t.focus({preventScroll:!0}),n.execCommand("copy")||X(41),i?.focus!=null&&i.focus({preventScroll:!0})})}executeOnTempElement(e,t){if(!this.gridCtrl)return;let n=vi(this.beans),i=n.createElement("textarea"),r=i.style;r.width="1px",r.height="1px";let o=n.documentElement;r.top=o.scrollTop+"px",r.left=o.scrollLeft+"px",r.position="absolute",r.opacity="0",this.gridCtrl.getGui().appendChild(i);try{e(i)}catch{X(42)}t?window.setTimeout(()=>{t(i),i.remove()},100):i.remove()}},c5e={moduleName:"Clipboard",version:Lt,beans:[l5e],apiFunctions:{copyToClipboard:t5e,cutToClipboard:n5e,copySelectedRowsToClipboard:i5e,copySelectedRangeToClipboard:r5e,copySelectedRangeDown:o5e,pasteFromClipboard:s5e},dependsOn:[ti,Z5,Ag,X5]},d5e='.ag-row-number-cell{background-color:var(--ag-header-background-color);border:none;color:var(--ag-header-text-color);font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap;width:100%}:where(.ag-ltr) .ag-row-number-cell{text-align:right}:where(.ag-rtl) .ag-row-number-cell{text-align:left}.ag-row-numbers-resizer{bottom:-2px;cursor:ns-resize;height:4px;position:absolute;width:100%}:where(.ag-ltr) .ag-row-numbers-resizer{left:0}:where(.ag-rtl) .ag-row-numbers-resizer{right:0}.ag-floating-bottom .ag-row-numbers-resizer{bottom:unset;top:-2px}:where(.ag-row-number-header.ag-row-number-selection-enabled){cursor:cell}.ag-row-number-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-row-number-range-selected{background-color:var(--ag-row-numbers-selected-color)}:where(.ag-ltr){.ag-row-number-header,:where(.ag-cell.ag-row-number-cell):not(.ag-cell-last-left-pinned){border-right:var(--ag-pinned-column-border)}:where(.ag-cell.ag-row-number-cell.ag-row-number-selection-enabled){cursor:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjUiPjxwYXRoIGQ9Ik0zLjQ0NSA4LjkxMVY3LjQwOUg5Ljc1VjYuMDE0bDIuNTM1IDIuMTQ2LTIuNTM1IDIuMTQ2VjguOTExeiIgc3R5bGU9InN0cm9rZTojZmZmO3N0cm9rZS13aWR0aDouNDFweCIgdHJhbnNmb3JtPSJtYXRyaXgoMS41Nzg0IDAgMCAxLjg2NDI5IC00LjQxMyAtNy4yMTIpIi8+PC9zdmc+"),auto}}:where(.ag-rtl){.ag-row-number-header,:where(.ag-cell.ag-row-number-cell):not(.ag-cell-first-right-pinned){border-left:var(--ag-pinned-column-border)}:where(.ag-cell.ag-row-number-cell.ag-row-number-selection-enabled){cursor:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjUiPjxwYXRoIGQ9Ik01Ljk3OSA4LjkxMXYxLjM5NUwzLjQ0NSA4LjE2bDIuNTM0LTIuMTQ2djEuMzk1aDYuMzA2djEuNTAyeiIgc3R5bGU9InN0cm9rZTojZmZmO3N0cm9rZS13aWR0aDouNDFweCIgdHJhbnNmb3JtPSJtYXRyaXgoMS41Nzg0IDAgMCAxLjg2NDI5IC00LjQxMyAtNy4yMTIpIi8+PC9zdmc+"),auto}}',u5e={tag:"div",cls:"ag-row-numbers-resizer"},h5e=class extends pe{constructor(e){super(u5e),this.cellCtrl=e,this.initialYPosition=-1,this.dragging=!1}postConstruct(){let{beans:e,cellCtrl:t}=this,{dragSvc:n,environment:i}=e;this.defaultRowHeight=i.getDefaultRowHeight(),n.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:this.onDragging.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:!0,stopPropagationForTouch:!0});let r=t.getRowPosition();this.node=Mi(this.beans,r)}onDragStart(e){if(!this.node)return;let{beans:{ctrlsSvc:t,eventSvc:n}}=this;t.get("gridCtrl").setResizeCursor(Qk.Vertical),this.dragging=!0,this.initialHeight=this.node.rowHeight,n.dispatchEvent({type:"rowResizeStarted",node:this.node,event:e,rowHeight:this.initialHeight})}onDragging(e){let{clientY:t}=e;if(this.cellCtrl.rowNode.rowPinned==="bottom"&&(t*=-1),this.initialYPosition===-1||!this.dragging){this.initialYPosition=t;return}let{beans:n,initialHeight:i,initialYPosition:r,defaultRowHeight:o,node:s}=this;if(i==null)return;let a=s?.rowHeight,l=Math.max(i-(r-t),o);if(a===l)return;s?.setRowHeight(l);let{rowRenderer:c,rowModel:d,pinnedRowModel:u}=n,h=!!s?.rowPinned;h&&c.redraw({afterScroll:!0}),(!h||u?.isManual())&&d.onRowHeightChanged({animate:!1})}onDragStop(e){this.beans.eventSvc.dispatchEvent({type:"rowResizeEnded",node:this.node,event:e,rowHeight:this.node?.rowHeight}),this.clearDragDetails(!0)}onDragCancel(){this.clearDragDetails(!0)}clearDragDetails(e){this.initialYPosition=-1,this.initialHeight=null,this.dragging=!1,e&&this.beans.ctrlsSvc.get("gridCtrl").setResizeCursor(!1)}destroy(){this.clearDragDetails(!1),this.node=void 0,super.destroy()}};function GZ(e){let t=Pd(e);return!(!t||typeof t!="object"||!t.enableRowResizer)}var p5e=class{constructor(e,t){this.beans=e,this.cellCtrl=t}refreshRowResizer(){!GZ(this.beans)||!this.isRowResizeSupported(this.cellCtrl.rowNode)?this.removeRowResizerFromCellComp():this.addResizerToCellComp()}isRowResizeSupported(e){let{pinnedRowModel:t,rowModel:n,visibleCols:i}=this.beans,r=!!n.onRowHeightChanged;return i.autoHeightCols.length?(X(276),!1):e.rowPinned!=null?t?.isManual()?r:!0:r}addResizerToCellComp(){let{beans:e,cellCtrl:t}=this,{eGui:n}=t,{rowResizer:i}=this;if(i){n.appendChild(i.getGui());return}i=e.registry.createDynamicBean("rowNumberRowResizer",!1,t),i&&(this.rowResizer=e.context.createBean(i),n.appendChild(i.getGui()))}removeRowResizerFromCellComp(){let{rowResizer:e,beans:{context:t}}=this;e&&(Bt(e.getGui()),this.rowResizer=t.destroyBean(e))}destroy(){this.removeRowResizerFromCellComp()}},f5e=class extends K{constructor(){super(...arguments),this.beanName="rowNumbersSvc",this.isIntegratedWithSelection=!1,this.lastColumnResized=0}postConstruct(){let e=$n(this,this.refreshCells.bind(this),10);this.addManagedEventListeners({columnResized:()=>{this.lastColumnResized=Date.now()},modelUpdated:t=>{e(!1,!t.keepRenderedRows)},rangeSelectionChanged:()=>this.refreshCells(!0),pinnedRowsChanged:()=>e(!1,!0)}),this.addManagedPropertyListeners(["rowNumbers","cellSelection"],t=>{this.updateColumns(t)}),this.refreshSelectionIntegration()}addColumns(e){this.columns!=null&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),yg(e))}createColumns(e,t){let n=()=>{Is(this.beans,this.columns?.tree),this.columns=null},{beans:i}=this;if(!Pd(i)){n();return}let r=e.treeDepth,s=(this.columns?.treeDepth??-1)==r,a=this.generateRowNumberCols();if(wg(a,this.columns?.list??[])&&s)return;n();let{colGroupSvc:c}=this.beans,d=c?.findDepth(e.tree)??0,u=c?.balanceTreeForAutoCols(a,d)??[];this.columns={list:a,tree:u,treeDepth:d,map:{}},t(p=>{if(!p)return null;let f=p.filter(g=>!Or(g));return[...a,...f]})}handleMouseDownOnCell(e,t){return!this.isIntegratedWithSelection||t.target.classList.contains("ag-row-numbers-resizer")?(this.beans.rangeSvc&&t.preventDefault(),t.stopImmediatePropagation(),!1):(!t.shiftKey&&!fy(this.beans,t)&&this.focusFirstRenderedCellAtRowPosition(e),!0)}updateColumns(e){let t=Rl(e.source);this.refreshSelectionIntegration();for(let n of this.columns?.list??[]){let i=this.createRowNumbersColDef();n.setColDef(i,null,t),go(this.beans,{state:[my(i,n.getColId())]},t)}}getColumn(){return this.columns?.list.find(Or)??null}getColumns(){return this.columns?.list??null}setupForHeader(e){let{column:t,eGridHeader:n}=e.params;Or(t)&&(Ut(n,"Row Number"),this.addManagedElementListeners(n,{click:this.onHeaderClick.bind(this),keydown:this.onHeaderKeyDown.bind(this),focus:this.onHeaderFocus.bind(this)}))}createRowNumbersRowResizerFeature(e){if(GZ(this.beans))return new p5e(this.beans,e)}refreshSelectionIntegration(){let{beans:e}=this,{gos:t,rangeSvc:n}=e,i=t.get("cellSelection");this.refreshRowNumberOverrides(),this.isIntegratedWithSelection=!!n&&!!i&&!this.isSuppressCellSelectionIntegration}refreshRowNumberOverrides(){let e=Pd(this.beans);if(this.rowNumberOverrides={},!e||typeof e!="object")return;e.suppressCellSelectionIntegration&&(this.isSuppressCellSelectionIntegration=!0);let t=["contextMenuItems","context","onCellClicked","onCellContextMenu","onCellDoubleClicked","headerTooltip","headerStyle","headerComponent","headerComponentParams","suppressHeaderKeyboardEvent","tooltipField","tooltipValueGetter","tooltipComponent","tooltipComponentParams","tooltipComponentSelector","valueGetter","valueFormatter","width","maxWidth","minWidth","resizable"];for(let n of t)e[n]!=null&&(this.rowNumberOverrides[n]=e[n])}onHeaderFocus(){this.beans.ariaAnnounce?.announceValue("Press Space to select all cells","ariaSelectAllCells")}onHeaderKeyDown(e){!this.isIntegratedWithSelection||e.key!==$.SPACE||this.handleFocusAllCellsFromHeader()}onHeaderClick(e){Date.now()-this.lastColumnResized<100||!this.isIntegratedWithSelection||this.getColumn()?.resizing||this.handleFocusAllCellsFromHeader()}handleFocusAllCellsFromHeader(){h5(this.beans),this.focusFirstRenderedCellAtRowPosition()}refreshCells(e,t){let n=this.getColumn();if(n){if(t){let i=this.beans.autoWidthCalc?.getPreferredWidthForElements([this.createDummyElement(n)],2);i!=null&&this.beans.colResize?.setColumnWidths([{key:n,newWidth:i}],!1,!0,"rowNumbersService")}this.beans.rowRenderer.refreshCells({columns:[n],force:e})}}createDummyElement(e){let t=bt({tag:"div",cls:"ag-cell-value ag-cell"}),n=String(this.beans.rowModel.getRowCount()+1);if(typeof this.rowNumberOverrides.valueFormatter=="function"){let i=Oe(this.beans.gos,{data:void 0,value:n,node:null,column:e,colDef:e.colDef});n=this.rowNumberOverrides.valueFormatter(i)}return t.textContent=n,t}createRowNumbersColDef(){let{gos:e,contextMenuSvc:t}=this.beans,n=e.get("enableRtl");return ce(T({minWidth:60,width:60,resizable:!1,valueGetter:this.valueGetter.bind(this),contextMenuItems:this.isIntegratedWithSelection||!t?void 0:()=>[]},this.rowNumberOverrides),{colId:x_,chartDataType:"excluded",suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPinned:!0,pinned:n?"right":"left",lockPosition:n?"right":"left",editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,suppressSizeToFit:!0,suppressHeaderContextMenu:!0,suppressNavigable:!0,headerClass:this.getHeaderClass(),cellClass:this.getCellClass.bind(this),cellAriaRole:"rowheader"})}valueGetter(e){let t=e.node,n=this.beans.formula?.active,i=t?.pinnedSibling;if(t?.rowPinned&&i){let r=n?i.formulaRowIndex:i.rowIndex;return`${r==null?"-":r+1}`}return String(((n?t?.formulaRowIndex:t?.rowIndex)||0)+1)}getHeaderClass(){let e=["ag-row-number-header"];return this.isIntegratedWithSelection&&e.push("ag-row-number-selection-enabled"),e}getCellClass(e){let{beans:t}=this,{rangeSvc:n,gos:i}=t,{node:r}=e,o=["ag-row-number-cell"],s=i.get("cellSelection");if(!n||!s)return o;this.isIntegratedWithSelection&&o.push("ag-row-number-selection-enabled");let a=n.getCellRanges();if(!a.length)return o;let l=this.beans.visibleCols.allCols.length-1,c=typeof s=="object"&&s.enableHeaderHighlight;for(let d of a)n.isRowInRange({rowIndex:r.rowIndex,rowPinned:r.rowPinned},d)&&(c&&o.push("ag-row-number-range-highlight"),d.columns.length===l&&o.push("ag-row-number-range-selected"));return o}generateRowNumberCols(){let{gos:e,beans:t}=this;if(!Pd(t))return[];let n=this.createRowNumbersColDef(),i=n.colId;e.validateColDef(n,i,!0);let r=new da(n,null,i,!1);return this.createBean(r),[r]}focusFirstRenderedCellAtRowPosition(e){if(!e&&(e=Dg(this.beans),!e))return;let{beans:t,gos:n}=this,{visibleCols:i,colViewport:r}=t,o=n.get("enableRtl")?i.rightCols:i.leftCols,s;if(o.length==1){let d=Mi(t,e);if(!d)return;s=r.getColsWithinViewport(d)}else s=o;let a=s.find(d=>!Or(d));if(!a)return;let{rowPinned:l,rowIndex:c}=e;setTimeout(()=>{t.focusSvc.setFocusedCell({rowIndex:c,rowPinned:l,column:a,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})})}destroy(){Is(this.beans,this.columns?.tree),this.rowNumberOverrides=null,super.destroy()}},HZ={moduleName:"RowNumbers",version:Lt,beans:[f5e],dynamicBeans:{rowNumberRowResizer:h5e},dependsOn:[ti,Q5,Nl],css:[d5e]},g5e={tag:"div",cls:"ag-filter-toolpanel-search",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-filter-toolpanel-expand"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-filter-toolpanel-search-input"}]},m5e=class extends pe{constructor(){super(...arguments),this.eExpand=q,this.eFilterTextField=q}postConstruct(){this.setTemplate(g5e,[Jr]);let e=this.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedElementListeners(this.eExpand,{click:this.onExpandClicked.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)})}init(e){this.params=e,this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){let{eExpand:e,beans:t}=this;e.appendChild(this.eExpandChecked=$e("accordionOpen",t)),e.appendChild(this.eExpandUnchecked=$e("accordionClosed",t)),e.appendChild(this.eExpandIndeterminate=$e("accordionIndeterminate",t))}showOrHideOptions(){let{params:e,eFilterTextField:t}=this,n=!e.suppressFilterSearch,i=!e.suppressExpandAll,r=this.getLocaleTextFunc();t.setInputPlaceholder(r("searchOoo","Search..."));let o=a=>a.getOriginalParent()&&a.isFilterAllowed(),s=this.beans.colModel.getCols().some(o);Ie(t.getGui(),n),Ie(this.eExpand,i&&s)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=$n(this,()=>this.dispatchLocalEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()}),300)),this.onSearchTextChangedDebounced()}onExpandClicked(){let e=this.currentExpandState===0?{type:"collapseAll"}:{type:"expandAll"};this.dispatchLocalEvent(e)}setExpandState(e){this.currentExpandState=e,Ie(this.eExpandChecked,e===0),Ie(this.eExpandUnchecked,e===1),Ie(this.eExpandIndeterminate,e===2)}},v5e={selector:"AG-FILTERS-TOOL-PANEL-HEADER",component:m5e},C5e={tag:"div",cls:"ag-filter-toolpanel-instance",children:[{tag:"div",ref:"eFilterToolPanelHeader",cls:"ag-filter-toolpanel-header ag-filter-toolpanel-instance-header",role:"button",attrs:{"aria-expanded":"false"},children:[{tag:"div",ref:"eExpand",cls:"ag-filter-toolpanel-expand"},{tag:"span",ref:"eFilterName",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilterIcon",cls:"ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon"}]},{tag:"div",ref:"agFilterToolPanelBody",cls:"ag-filter-toolpanel-instance-body ag-filter"}]},zZ=class extends pe{constructor(e,t){super(C5e),this.hideHeader=e,this.expandedCallback=t,this.eFilterToolPanelHeader=q,this.eFilterName=q,this.agFilterToolPanelBody=q,this.eFilterIcon=q,this.eExpand=q,this.expanded=!1}postConstruct(){let{beans:e,eExpand:t,eFilterIcon:n}=this,i=$e("accordionOpen",e);this.eExpandChecked=i;let r=$e("accordionClosed",e);this.eExpandUnchecked=r,t.appendChild(i),t.appendChild(r);let o=this.getLocaleTextFunc();Ut(n,o("ariaFilterActive","Filter Active")),Jn(n,"img")}setColumn(e){this.column=e;let{beans:t,eFilterToolPanelHeader:n,eFilterIcon:i,eExpandChecked:r,hideHeader:o}=this;this.eFilterName.innerText=t.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)||"",this.addManagedListeners(n,{click:this.toggleExpanded.bind(this),keydown:this.onKeyDown.bind(this)}),this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)}),this.addInIcon("filterActive",i,e),Ie(i,this.isFilterActive()),Ie(r,!1),o?(Ie(n,!1),n.removeAttribute("tabindex")):n.setAttribute("tabindex","0"),this.addManagedListeners(e,{filterChanged:this.onFilterChanged.bind(this)})}onKeyDown(e){let{key:t}=e,{ENTER:n,SPACE:i,LEFT:r,RIGHT:o}=$;t!==n&&t!==i&&t!==r&&t!==o||(e.preventDefault(),t===n||t===i?this.toggleExpanded():t===$.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,n){if(t==null)return;let i=$e(e,this.beans,n);t.appendChild(i)}isFilterActive(){return!!this.beans.colFilter?.isFilterActive(this.column)}onFilterChanged(){Ie(this.eFilterIcon,this.isFilterActive()),this.dispatchLocalEvent({type:"filterChanged"})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,Fi(this.eFilterToolPanelHeader,!0),Ie(this.eExpandChecked,!0),Ie(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){let t=bt({tag:"div",cls:"ag-filter-toolpanel-instance-filter"}),n=this.createManagedBean(new Vu(this.column,"TOOLBAR"));this.filterComp=n,n.hasFilter()&&n.getFilter()?.then(i=>{this.underlyingFilter=i,i&&(t.appendChild(n.getGui()),this.agFilterToolPanelBody.appendChild(t),n.afterGuiAttached({container:"toolPanel",suppressFocus:e}))})}collapse(){if(!this.expanded)return;this.expanded=!1,Fi(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),Ie(this.eExpandChecked,!1),Ie(this.eExpandUnchecked,!0);let e=this.filterComp;e?.afterGuiDetached(),this.destroyBean(e),this.expandedCallback()}removeFilterElement(){at(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}onPanelHidden(){if(!this.expanded)return;let e=this.underlyingFilter;e&&e.afterGuiDetached?.()}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()}},up=class extends pe{constructor(e,t,n,i,r){super(),this.columnGroup=e,this.childFilterComps=t,this.expandedCallback=n,this.depth=i,this.showingColumn=r,this.filterGroupComp=q}postConstruct(){let e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate({tag:"div",cls:"ag-filter-toolpanel-group-wrapper",children:[{tag:"ag-group-component",ref:"filterGroupComp"}]},[Ii],{filterGroupComp:e}),this.setGroupTitle();let{filterGroupComp:t,depth:n,childFilterComps:i,gos:r}=this;t.setAlignItems("stretch"),t.addCss(`ag-filter-toolpanel-group-level-${n}`),t.getGui().style.setProperty("--ag-indentation-level",String(n)),t.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${n}-header`);for(let s of i)t.addItem(s),s.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${n+1}-header`),s.getGui().style.setProperty("--ag-indentation-level",String(n+1));let o=this.showingColumn?this.columnGroup:void 0;this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"filterToolPanelColumnGroup",shouldDisplayTooltip:lp(r,()=>t.getGui().querySelector(".ag-group-title")),getAdditionalParams:()=>({colDef:o?.getColDef(),column:o})})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filterActive")}setupTooltip(){if(!this.showingColumn)return;let e=()=>{this.tooltipFeature?.setTooltipAndRefresh(this.columnGroup.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}onPanelHidden(){for(let e of this.childFilterComps)e.onPanelHidden()}isColumnGroup(){return Qn(this.columnGroup)}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName??""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){let t=$e(e,this.beans);if(t){t.classList.add("ag-filter-toolpanel-group-instance-header-icon");let n=this.getLocaleTextFunc();Ut(t,n("ariaFilterActive","Filter Active")),Jn(t,"img")}this.filterGroupComp.addTitleBarWidget(t)}forEachToolPanelFilterChild(e){for(let t of this.childFilterComps)t instanceof zZ&&e(t)}addExpandCollapseListeners(){let e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(n=>n.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(n=>n.collapse());this.addManagedListeners(this.filterGroupComp,{expanded:e,collapsed:t})}getColumns(){return Qn(this.columnGroup)?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){for(let e of this.getColumns())this.addManagedListeners(e,{filterChanged:()=>this.refreshFilterClass()});Qn(this.columnGroup)||this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)})}refreshFilterClass(){let e=this.getColumns(),t=()=>e.some(n=>n.isFilterActive());this.filterGroupComp.toggleCss("ag-has-filter",t())}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){let e=this.columnGroup,t=Qn(e)?this.getColumnGroupName(e):this.getColumnName(e);this.filterGroupName=t,this.filterGroupComp.setTitle(t||"")}getColumnGroupName(e){return this.beans.colNames.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.beans.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),at(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}},b5e=class extends pe{constructor(){super({tag:"div",cls:"ag-filter-list-panel"}),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}wireBeans(e){this.colModel=e.colModel}init(e){this.initialised=!0;let t=Oe(this.gos,{suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});ji(t,e),this.params=t,t.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:()=>this.onColumnsChanged()}),this.addManagedEventListeners({newColumnsLoaded:()=>this.onColumnsChanged(),toolPanelVisibleChanged:n=>{n.key==="filters"&&!n.visible&&this.onPanelHidden()},dragStarted:()=>{this.suppressOnColumnsChanged=!0},dragStopped:()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}}),this.colModel.ready&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged){this.onColumnsChangedPending=!0;return}let e=this.colModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){rZ(this.colModel,this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){let e=this.colModel.getColDefColTree();this.recreateFilters(e)}setFiltersLayout(e){let t=iZ(this.colModel,e);this.recreateFilters(t)}recreateFilters(e){let t=wt(this.beans);this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);let n=this.getExpansionState();this.destroyFilters();let i=this.recursivelyAddComps(e,0,n);this.filterGroupComps=i;let r=i.length;if(r){for(let s of i)this.appendChild(s);this.setFirstAndLastVisible(0,r-1)}let o=this.searchFilterText;_e(o)&&this.searchFilters(o),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,n){return e.map(i=>{if(Qn(i))return this.recursivelyAddFilterGroupComps(i,t,n)?.flatMap(l=>l)??[];let r=i;if(!this.shouldDisplayFilter(r))return[];let o=t===0,s=new zZ(o,()=>this.onFilterExpanded());if(this.createBean(s),s.setColumn(r),n.get(r.getId())&&s.expand(),t>0)return s;let a=this.createBean(new up(r,[s],this.onGroupExpanded.bind(this),t,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),n.get(a.getFilterGroupId())||a.collapse(),a}).flatMap(i=>i)}refreshAriaLabel(){let e=this.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),n=e("filters","Filters"),l=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;Ut(this.getAriaElement(),`${t} ${l} ${n}`)}recursivelyAddFilterGroupComps(e,t,n){if(!this.filtersExistInChildren(e.getChildren()))return;if(e.getColGroupDef()?.suppressFiltersToolPanel)return[];let r=e.isPadding()?t:t+1,o=this.recursivelyAddComps(e.getChildren(),r,n).flatMap(l=>l);if(e.isPadding())return o;let s=new up(e,o,this.onGroupExpanded.bind(this),t,!1);this.createBean(s),s.addCssClassToTitleBar("ag-filter-toolpanel-header");let a=n.get(s.getFilterGroupId());return(this.isInitialState&&!a||a===!1)&&s.collapse(),[s]}filtersExistInChildren(e){return e.some(t=>Qn(t)?this.filtersExistInChildren(t.getChildren()):this.shouldDisplayFilter(t))}shouldDisplayFilter(e){let t=e.getColDef()?.suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){let e=new Map;if(this.isInitialState){let{expandedColIds:n,expandedGroupIds:i}=this.params.initialState;for(let r of n)e.set(r,!0);for(let r of i)e.set(r,!0);return e}let t=n=>{e.set(n.getFilterGroupId(),n.isExpanded());for(let i of n.getChildren())i instanceof up?t(i):e.set(i.getColumn().getId(),i.isExpanded())};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){let n=[],i=r=>{let o=r.getFilterGroupId();(!t||t.includes(o))&&(e&&r.isColumnGroup()?r.expand():r.collapse(),n.push(o));for(let a of r.getChildren())a instanceof up&&i(a)};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){let r=t.filter(o=>n.indexOf(o)<0);r.length>0&&X(166,{unrecognisedGroupIds:r})}}expandFilters(e,t){let n=[],i=r=>{if(r instanceof up){let a=!1;for(let l of r.getChildren())i(l)&&(e?(r.expand(),a=!0):r.isColumnGroup()||r.collapse());return a}let o=r.getColumn().getColId(),s=!t||t.includes(o);return s&&(e?r.expand():r.collapse(),n.push(o)),s};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){let r=t.filter(o=>n.indexOf(o)<0);r.length>0&&X(167,{unrecognisedColIds:r})}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchLocalEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0,n=r=>{if(r.isColumnGroup()){r.isExpanded()?e++:t++;for(let o of r.getChildren())o instanceof up&&n(o)}};this.filterGroupComps.forEach(n);let i;e>0&&t>0?i=2:t>0?i=1:i=0,this.dispatchLocalEvent({type:"groupExpanded",state:i})}performFilterSearch(e){this.searchFilterText=_e(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){let t=o=>!_e(e)||o.toLowerCase().indexOf(e)!==-1,n=(o,s)=>{if(!(o instanceof up))return t(o.getColumnFilterName()||"");let a=o.getChildren(),l=t(o.getFilterGroupName()),c=s||l;if(c){o.hideGroup(!1);for(let u=0;u<a.length;u++)n(a[u],c),o.hideGroupItem(!1,u);return!0}let d=!1;return a.forEach((u,h)=>{let p=n(u,s);o.hideGroupItem(!p,h),p&&(d=!0)}),o.hideGroup(!d),d},i,r;this.filterGroupComps.forEach((o,s)=>{n(o,!1);let a=o.getGui()?.classList.contains("ag-hidden");i===void 0?a||(i=s,r=s):!a&&r!==s&&(r=s)}),this.setFirstAndLastVisible(i,r),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((n,i)=>{n.removeCss("ag-first-group-visible"),n.removeCss("ag-last-group-visible"),i===e&&n.addCss("ag-first-group-visible"),i===t&&n.addCss("ag-last-group-visible")})}onPanelHidden(){for(let e of this.filterGroupComps)e.onPanelHidden()}getExpandedFiltersAndGroups(){let e=[],t=new Set,n=i=>{if(i instanceof up){for(let o of i.getChildren())n(o);let r=i.getFilterGroupId();i.isExpanded()&&!t.has(r)&&e.push(r)}else i.isExpanded()&&t.add(i.getColumn().getColId())};return this.filterGroupComps.forEach(n),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),at(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}},w5e={selector:"AG-FILTERS-TOOL-PANEL-LIST",component:b5e},y5e=".ag-filter-toolpanel{flex:1 1 0px;min-width:0}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{align-items:center;color:var(--ag-header-text-color);display:flex;font-weight:var(--ag-header-font-weight);padding:0 var(--ag-spacing);>*{align-items:center;display:flex}}.ag-filter-toolpanel-header{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing);position:relative;&:focus-visible{border-radius:var(--ag-border-radius);box-shadow:inset var(--ag-focus-shadow)}}:where(.ag-ltr) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-ltr) .ag-filter-toolpanel-instance-header-icon{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-rtl) .ag-filter-toolpanel-instance-header-icon{margin-right:var(--ag-spacing)}.ag-filter-toolpanel-search{min-height:var(--ag-header-height);padding-bottom:var(--ag-spacing);padding-top:var(--ag-widget-container-vertical-padding)}:where(.ag-filter-toolpanel-group:not(.ag-has-filter)>.ag-group-title-bar) .ag-filter-toolpanel-group-instance-header-icon{display:none}.ag-filter-toolpanel-search-input{flex-grow:1;height:calc(var(--ag-spacing)*4)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar-icon{margin-left:var(--ag-spacing)}.ag-filter-toolpanel-expand{cursor:pointer}:where(.ag-ltr) .ag-filter-toolpanel-expand{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-expand{margin-left:var(--ag-spacing)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar,:where(.ag-ltr) .ag-filter-toolpanel-instance-header{padding-left:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar,:where(.ag-rtl) .ag-filter-toolpanel-instance-header{padding-right:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-ltr) .ag-filter-toolpanel-instance-body{margin-left:var(--ag-filter-tool-panel-group-indent)}:where(.ag-rtl) .ag-filter-toolpanel-instance-body{margin-right:var(--ag-filter-tool-panel-group-indent)}.ag-filter-toolpanel-instance-filter{background-color:var(--ag-chrome-background-color)}.ag-filter-toolpanel-group-level-0{border-top:none}",S5e={tag:"div",cls:"ag-filter-toolpanel",children:[{tag:"ag-filters-tool-panel-header",ref:"filtersToolPanelHeaderPanel"},{tag:"ag-filters-tool-panel-list",ref:"filtersToolPanelListPanel"}]},x5e=class extends pe{constructor(){super(S5e,[v5e,w5e]),this.filtersToolPanelHeaderPanel=q,this.filtersToolPanelListPanel=q,this.initialised=!1,this.listenerDestroyFuncs=[],this.registerCSS(y5e)}init(e){if(this.initialised){for(let a of this.listenerDestroyFuncs)a();this.listenerDestroyFuncs=[]}this.initialised=!0;let n=T(T({},{suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1}),e);this.params=n;let{filtersToolPanelHeaderPanel:i,filtersToolPanelListPanel:r}=this;i.init(n),r.init(n);let{suppressExpandAll:o,suppressFilterSearch:s}=n;o&&s&&i.setDisplayed(!1),this.listenerDestroyFuncs.push(...this.addManagedListeners(i,{expandAll:()=>r.expandFilterGroups(!0),collapseAll:()=>r.expandFilterGroups(!1),searchChanged:a=>r.performFilterSearch(a.searchText)}),...this.addManagedListeners(r,{filterExpanded:n.onStateUpdated,groupExpanded:a=>{i.setExpandState(a.state),n.onStateUpdated()}}))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}},E5e=class extends K{constructor(){super(...arguments),this.beanName="filterPanelSvc",this.states=new Map,this.orderedStates=[],this.initialStateApplied=!1,this.columnsLoaded=!1,this.isActive=!1}postConstruct(){if(!this.gos.get("enableFilterHandlers"))return;let e=this.updateFilterStates.bind(this),t=()=>this.dispatchStatesUpdates(void 0,!0),n=this.onFilterDestroyed.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>{this.columnsLoaded=!0,this.initialStateApplied||this.applyState(),e()},dataTypesInferred:e,filterChanged:e,filterDestroyed:n,filterHandlerDestroyed:n,filterOpened:t,filterClosed:t}),this.addManagedListeners(this.beans.colFilter,{filterStateChanged:({column:i})=>{this.states.get(i.getColId())?.refresh?.(),t()}})}updateParams(e,t){this.params=e;let n=!1;if(t&&(this.currState=t,this.columnsLoaded)){let i=new Set(t.filters?.map(r=>r.colId));for(let r of this.getIds())i.has(r)||this.remove(r);this.clear(),this.applyState(),this.updateFilterStates(),n=!0}n||this.dispatchStatesUpdates(),this.beans.colFilter?.setGlobalButtons(!!e.buttons?.length)}getIds(){return Array.from(this.states.keys())}getAvailable(){let e=this.beans,t=[];for(let n of e.colModel.getColDefCols()??[]){let i=n.getColId();n.isFilterAllowed()&&!n.colDef.suppressFiltersToolPanel&&!this.states.get(i)&&t.push({id:i,name:BK(e,n)})}return t}add(e){this.createFilter(e,!0),this.dispatchStatesUpdates(e)}remove(e){let{states:t,orderedStates:n,beans:{colFilter:i,selectableFilter:r}}=this,o=t.get(e);if(!o)return;o.destroy?.();let s=o.state.column;t.delete(e),r?.clearActive(e),i?.destroyFilter(s),this.eventSvc.dispatchEvent({type:"filterSwitched",column:s});let a=n.indexOf(e);n.splice(a,1);let l=n[a];this.dispatchStatesUpdates(l)}getState(e){return this.states.get(e)?.state}updateFilterState(e,t,n,i){let r=this.getState(e);r&&(r[t]=n,i||this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:r}))}expand(e,t){let n=this.states.get(e);if(!n)return;n.destroy?.();let{handler:i,state:{column:r}}=n,o=this.createFilterState(r,i,t);this.states.set(e,o),this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:o.state})}updateType(e,t){let n=this.states.get(e);if(!n)return;let i=n.state;if(i.expanded===!1)return;let r=i.filterDefs;if(!r)return;let{colFilter:o,selectableFilter:s}=this.beans;s?.setActive(e,r,t),o.filterParamsChanged(e,"columnFilter");let a=i.column;this.eventSvc.dispatchEvent({type:"filterSwitched",column:a});let l=this.states.get(e);if(!l)return;let c=l.state;this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:c})}getActions(){let e=this.params?.buttons;if(!e?.length)return;let t=!!this.beans.colFilter?.canApplyAll();return{actions:e,canApply:t}}doAction(e){this.beans.colFilter?.updateAllModels(e)}getGridState(){let e=[];return this.states.forEach((t,n)=>{e.push({colId:n,expanded:t.state.expanded})}),{filters:e}}createFilter(e,t){let n=this.createFilterStateWrapper(e,t);n&&(this.states.set(e,n),this.orderedStates.push(e))}createFilterStateWrapper(e,t){let{colModel:n,colFilter:i}=this.beans,r=n.getColDefCol(e);if(r&&!r.colDef.suppressFiltersToolPanel){let o=i.getHandler(r,!0);if(o)return this.createFilterState(r,o,t)}}updateFilterStates(){if(!this.params)return;let e=this.beans.colFilter.getModel(),t=new Set;for(let n of Object.keys(e)){let i=this.states.get(n);i?i.refresh?.():this.createFilter(n),t.add(n)}this.states.forEach((n,i)=>{t.has(i)||n.refresh?.()}),this.dispatchStatesUpdates()}createFilterState(e,t,n){let i=this.beans,{colFilter:r,selectableFilter:o}=i,s=BK(i,e),a=e.getColId(),l=()=>!!this.params?.buttons&&r.hasUnappliedModel(a),c=l();if(n){let d=e.colDef,{filterDefs:u,activeFilterDef:h}=o?.getDefs(e,d)??{},p=this.createBean(new Vu(e,"TOOLBAR",!0));return{state:{column:e,name:s,isEditing:c,expanded:n,detail:p.getGui(),activeFilterDef:h,filterDefs:u,afterGuiAttached:p.afterGuiAttached.bind(p),afterGuiDetached:p.afterGuiDetached.bind(p)},handler:t,refresh:()=>{this.updateFilterState(a,"isEditing",l())},destroy:()=>this.destroyBean(p)}}else{let d=e.getColId(),u=()=>t.getModelAsString?.(r.getStateForColumn(d).model,"filterToolPanel")??"";return{state:{column:e,name:s,isEditing:c,expanded:!1,summary:u()},handler:t,refresh:()=>{this.updateFilterState(d,"isEditing",l(),!0),this.updateFilterState(d,"summary",u())}}}}onFilterDestroyed({column:e,source:t}){let{colFilter:n,filterManager:i}=this.beans;if(!n?.isAlive()||!i?.isFilterAllowed(e))return;let r=this.states,o=e.getColId(),s=r.get(o);if(s){let a=this.createFilterStateWrapper(o,s.state.expanded);a?(s.destroy?.(),r.set(o,a)):this.remove(o),t==="api"&&this.dispatchStatesUpdates()}}dispatchStatesUpdates(e,t){this.dispatchLocalEvent({type:"filterPanelStatesChanged",activeId:e,action:t})}applyState(){if(this.params&&this.columnsLoaded){this.initialStateApplied=!0;for(let{colId:e,expanded:t}of this.currState?.filters??[])this.createFilter(e,t)}}destroy(){this.clear(),this.params=void 0,this.currState=void 0,super.destroy()}clear(){let{states:e,orderedStates:t}=this;e.forEach(n=>n.destroy?.()),e.clear(),t.length=0}};function BK(e,t){return e.colNames.getDisplayNameForColumn(t,"filterToolPanel")??t.getColId()}var D5e={addFilterCard:"Add Filter",ariaLabelAddFilterField:"Add Filter Field",ariaLabelFilterCardDelete:"Delete Filter",ariaLabelFilterCardHasEdits:"Has Edits",agTextColumnFilterDisplayName:"Simple Filter",agNumberColumnFilterDisplayName:"Simple Filter",agDateColumnFilterDisplayName:"Simple Filter",agSetColumnFilterDisplayName:"Selection Filter",agMultiColumnFilterDisplayName:"Combo Filter",addFilterPlaceholder:"Search columns..."};function k0(e,t){return uy(e,D5e,t)}function _5e(e,t,n){let i=0;for(let r=0;r<n.length;r++){let o=n[r];o===t[i]?i++:Bt(o)}for(;i<t.length;)e.appendChild(t[i++])}var A5e=class extends K{constructor(){super(...arguments),this.beanName="selectableFilter",this.selectedFilters=new Map,this.valueGetters=new Map}postConstruct(){let{gos:e,selectedFilters:t}=this,n=e.get("initialState")?.filter?.selectableFilters??{};for(let i of Object.keys(n))t.set(i,n[i])}getFilterValueGetter(e){return this.valueGetters.get(e)}isSelectable(e){return e.filter==="agSelectableColumnFilter"}getFilterDef(e,t){return this.getDefs(e,t).activeFilterDef}getDefs(e,t,n){if(!this.isSelectable(t))return;let i=this.beans,{gos:r,dataTypeSvc:o,colFilter:s}=i,a=t.filterParams,l=e.colDef;typeof a=="function"&&(a=a(Oe(r,{column:e,colDef:l})));let c=o?.getBaseDataType(e),d=o?.getDataTypeDefinition(e),u=o?.getFormatValue(c),{filters:h,defaultFilterParams:p,defaultFilterIndex:f}=a??{},g=x=>{let{filter:D,filterParams:F,name:L,filterValueGetter:V=l.filterValueGetter}=x,B=p?T(T({},p),F):F,P;d&&u&&(D==="agMultiColumnFilter"?P=i.multiFilter?.getParamsForDataType(B,V,d,u):P=Ey(D,B,V,d,u,i,this.getLocaleTextFunc()));let U;if(!L){let A=D;typeof D=="boolean"&&(A=s?.getDefaultFilterFromDataType(()=>c)),typeof A=="string"?U=k0(this,`${A}DisplayName`):(X(280,{colId:e.getColId()}),U="")}return p||P||U?T(ce(T({},x),{filterParams:B,name:U??L}),P):x},C=(h??this.getDefaultFilters(e)).map(g),m=n??this.selectedFilters.get(e.getColId())??f??(!h&&Hk(r)?1:0);m>=C.length&&(m=0);let w=C[m];return{filterDefs:C,activeFilterDef:w}}setActive(e,t,n,i){let r=t.indexOf(n);if(r<0)return;let{selectedFilters:o,valueGetters:s}=this;o.set(e,r);let a=n.filterValueGetter;a?s.set(e,a):s.delete(e),i||this.onChange()}clearActive(e){let{selectedFilters:t,valueGetters:n}=this;t.delete(e),n.delete(e),this.onChange()}getState(){return Object.fromEntries(this.selectedFilters)}setState(e){this.clearAll();let t=this.beans.colModel;for(let n of Object.keys(e)){let i=t.getColDefCol(n);if(i){let r=this.getDefs(i,i.colDef,e[n]);r&&this.setActive(n,r.filterDefs,r.activeFilterDef,!0)}}}destroy(){this.clearAll(),super.destroy()}clearAll(){let{selectedFilters:e,valueGetters:t}=this;e.clear(),t.clear()}onChange(){this.dispatchLocalEvent({type:"selectedFilterChanged"})}getDefaultFilters(e){let t=this.beans,{gos:n,dataTypeSvc:i}=t,r=n.isModuleRegistered("MultiFilter"),o=i?.getBaseDataType(e);return[{filter:Dy(o,!1)},{filter:"agSetColumnFilter"},...r?[{filter:"agMultiColumnFilter"}]:[]]}},R5e={tag:"div",cls:"ag-filter-card ag-filter-card-add"},F5e=class extends pe{constructor(e){super(R5e),this.options=new Map,this.setOptions(e)}postConstruct(){this.showButton()}refresh(e){this.setOptions(e);let{eSelect:t,options:n}=this;t&&t.setValueList({valueList:Array.from(n.keys()),refresh:!0})}showButton(){at(this.getGui()),this.destroySelect();let e=bt({tag:"button",cls:"ag-button ag-standard-button ag-filter-add-button",children:[{tag:"span",children:[()=>$e("filterAdd",this.beans)]},{tag:"span",cls:"ag-filter-add-button-label",children:k0(this,"addFilterCard")}]});this.activateTabIndex([e]);let t=this.showSelect.bind(this);e.addEventListener("click",t),this.removeButton=()=>{e.removeEventListener("click",t)},this.appendChild(e),e.focus()}showSelect(){at(this.getGui()),this.destroyButton();let e="ariaLabelAddFilterField",t={className:"ag-filter-add-select",pickerType:"virtual-list",pickerAriaLabelKey:e,pickerAriaLabelValue:k0(this,e),placeholder:k0(this,"addFilterPlaceholder"),value:"",valueList:Array.from(this.options.keys()),searchType:"matchAny",allowTyping:!0,filterList:!0,highlightMatch:!0,valueFormatter:i=>this.options.get(i)},n=this.createManagedBean(new DA(t));this.eSelect=n,this.appendChild(n.getGui()),n.showPicker(),n.getFocusableElement().focus(),n.addManagedListeners(n,{fieldPickerValueSelected:({value:i})=>this.dispatchLocalEvent({type:"filterSelected",id:i}),pickerHidden:()=>{this.showButton()}})}setOptions(e){let t=this.options;t.clear();for(let{id:n,name:i}of e)t.set(n,i)}destroySelect(){this.eSelect=this.destroyBean(this.eSelect)}destroyButton(){this.removeButton=this.removeButton?.()}destroy(){this.destroySelect(),this.destroyButton(),super.destroy()}},M5e={tag:"div",cls:"ag-filter-card-body",children:[{tag:"ag-select",cls:"ag-filter-type-select",ref:"eFilterType"}]},I5e=class extends pe{constructor(){super(...arguments),this.eFilterType=q}postConstruct(){let e={onValueChange:t=>this.dispatchLocalEvent({type:"filterTypeChanged",filterDef:t})};this.setTemplate(M5e,[Ua],{eFilterType:e}),this.eFilterType.setDisplayed(!1)}refresh(e){let t=this.state;this.state=e;let{activeFilterDef:n,filterDefs:i,detail:r,afterGuiAttached:o,afterGuiDetached:s}=e,{activeFilterDef:a,filterDefs:l,detail:c}=t??{},d=this.eFilterType;if(i!==l){d.clearOptions();let u=i?.map(h=>({value:h,text:h.name}));u&&d.clearOptions().addOptions(u).setValue(n,!0),d.setDisplayed(!!u)}else n!==a&&d.setValue(n,!0);r!==c&&(c&&(Bt(c),s()),this.appendChild(r),o({container:"newFiltersToolPanel",suppressFocus:!0}))}},T5e={tag:"div",cls:"ag-filter-card-summary",attrs:{"aria-hidden":"true"}},P5e=class extends pe{constructor(){super(T5e)}refresh(e){this.getGui().textContent=e.summary}},k5e={tag:"div",cls:"ag-filter-card",children:[{tag:"div",cls:"ag-filter-card-header",role:"presentation",children:[{tag:"div",cls:"ag-filter-card-heading",role:"heading",attrs:{"aria-level":"2"},children:[{tag:"button",ref:"eExpand",cls:"ag-button ag-filter-card-expand",children:[{tag:"span",ref:"eTitle",cls:"ag-filter-card-title"},{tag:"span",ref:"eEditing",cls:"ag-filter-card-editing-icon"},{tag:"span",ref:"eExpandIcon",cls:"ag-filter-card-expand-icon"}]}]},{tag:"button",ref:"eDelete",cls:"ag-button ag-filter-card-delete",children:[{tag:"span",ref:"eDeleteIcon",cls:"ag-filter-card-delete-icon"}]}]}]},L5e=class extends pe{constructor(e){super(k5e),this.id=e,this.eTitle=q,this.eExpand=q,this.eDelete=q,this.eExpandIcon=q,this.eDeleteIcon=q,this.eEditing=q}postConstruct(){let{beans:e,eDelete:t,eExpand:n,eDeleteIcon:i,eEditing:r,id:o}=this,s=e.filterPanelSvc;Ut(t,k0(this,"ariaLabelFilterCardDelete")),i.appendChild(Ll("close",e,null)),this.activateTabIndex([n,t]),this.addManagedElementListeners(n,{click:()=>s.expand(o,!this.state?.expanded)}),this.addManagedElementListeners(t,{click:()=>s.remove(o)}),this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)}),r.appendChild(Ll("filterCardEditing",e,null))}refresh(e){let{eExpand:t,eEditing:n,state:i,beans:r}=this;this.state=e;let{name:o,expanded:s,isEditing:a}=e;this.eTitle.textContent=o,Ie(n,a),(!i||s!==i.expanded)&&this.toggleExpand(e);let l=s?null:`${o} ${e.summary}`;a&&(l=`${l??o}. ${k0(this,"ariaLabelFilterCardHasEdits")}`),Ut(t,l);let c=u=>{if(u)return Bt(u.getGui()),this.destroyBean(u)},d=(u,h,p)=>(u||(u=this.createBean(new h),p?.(u),this.appendChild(u.getGui())),u.refresh(e),u);if(e.expanded){this.summaryComp=c(this.summaryComp);let u=d(this.detailComp,I5e,p=>p.addManagedListeners(p,{filterTypeChanged:({filterDef:f})=>r.filterPanelSvc.updateType(this.id,f)}));this.detailComp=u;let h=`ag-${this.getCompId()}-filter`;u.getGui().id=h,d_(t,h)}else this.detailComp=c(this.detailComp),this.summaryComp=d(this.summaryComp,P5e),d_(t,null)}toggleExpand(e){let t=!!e.expanded,{eExpandIcon:n,eExpand:i,beans:r}=this;at(n),n.appendChild(Ll(t?"filterCardCollapse":"filterCardExpand",r,null)),Fi(i,t)}onFilterOpened(e){let{state:t,beans:n,id:i}=this;e.source==="COLUMN_MENU"&&e.column===t?.column&&t?.expanded&&n.filterPanelSvc.expand(i,!1)}destroy(){this.detailComp=this.destroyBean(this.detailComp),this.summaryComp=this.destroyBean(this.summaryComp),this.state=void 0,super.destroy()}};function O5e(e){return!!e?.id}function N5e(e){return!!e?.action}var B5e={tag:"div",cls:"ag-filter-panel",children:[{tag:"div",cls:"ag-filter-panel-container",ref:"eContainer"}]},V5e=class extends pe{constructor(){super(B5e),this.eContainer=q,this.filters=new Map}refresh(e){if(N5e(e)){this.refreshActions();return}if(O5e(e)){this.filters.get(e.id)?.refresh(e.state);return}let{eContainer:t,filters:n,beans:i}=this,r=i.filterPanelSvc,o=r.getIds(),s=new Map,a=!Ts(i),l=a?wt(i):void 0,c=a&&t.contains(l),d=[],u=[];for(let m of o){let w=n.get(m)??this.createBean(new L5e(m));w.refresh(r.getState(m)),s.set(m,w),u.push(w.getGui())}this.filters=s;let h=[];n.forEach((m,w)=>{d.push(m.getGui()),s.has(w)||h.push(m)});let p=this.addFilterComp;p&&d.push(p.getGui());let f=r.getAvailable();f.length?(p||(p=this.createBean(new F5e(f)),p.addManagedListeners(p,{filterSelected:({id:m})=>r.add(m)})),p.refresh(f),u.push(p.getGui())):p=this.destroyBean(p),this.addFilterComp=p,_5e(t,u,d);for(let m of h)this.destroyBean(m);let g=e?.activeId,C=g&&s.get(g)?.getGui();C?qn(C):c&&Ts(i)&&qn(u[u.length-1]??t),this.refreshActions()}refreshActions(){let e=this.beans.filterPanelSvc,{actions:t,canApply:n}=e.getActions()??{},i=this.buttonComp;if(t?.length){let r=t.map(o=>({type:o,label:Dl(this,`${o}Filter`)}));if(!i){i=this.createBean(new D0({className:"ag-filter-panel-buttons"})),this.getGui().appendChild(i.getGui());let o={};for(let s of["apply","clear","reset","cancel"])o[s]=()=>e.doAction(s);i.addManagedListeners(i,o)}i.updateButtons(r),i.updateValidity(n!==!1)}else i&&(Bt(i.getGui()),i=this.destroyBean(i));this.buttonComp=i}destroy(){this.beans.filterPanelSvc?.clear?.(),this.addFilterComp=this.destroyBean(this.addFilterComp),this.buttonComp=this.destroyBean(this.buttonComp);let e=this.filters;e.forEach(t=>this.destroyBean(t)),e.clear(),super.destroy()}},G5e=".ag-filter-panel{display:flex;flex-direction:column;width:100%;:where(.ag-standard-button){transition:background-color .25s ease-in-out,color .25s ease-in-out}}.ag-filter-panel .ag-simple-filter-body-wrapper{padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel .ag-mini-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-vertical-spacing)}.ag-filter-panel-container{flex:1;overflow:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel-container>:where(:not(:last-child)){margin-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-card{background-color:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius)}.ag-filter-card-header{align-items:center;display:flex;flex-direction:row;padding-top:var(--ag-widget-vertical-spacing)}:where(.ag-ltr) .ag-filter-card-header{&>:where(:not(:last-child)){padding-right:var(--ag-spacing)}}:where(.ag-rtl) .ag-filter-card-header{&>:where(:not(:last-child)){padding-left:var(--ag-spacing)}}.ag-filter-card-heading{flex:1;overflow:hidden;padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));padding-top:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing))}:where(.ag-ltr) .ag-filter-card-heading{padding-left:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-filter-card-heading{padding-right:var(--ag-widget-horizontal-spacing)}.ag-filter-card-expand{align-items:center;display:flex;flex-direction:row;width:100%}.ag-filter-card-title{font-weight:var(--ag-header-font-weight);overflow:hidden;text-overflow:ellipsis}.ag-filter-card-expand-icon{display:flex;flex:1;justify-content:end}.ag-filter-card-editing-icon{margin:0 var(--ag-spacing)}.ag-filter-card-delete-icon,.ag-filter-card-editing-icon,.ag-filter-card-expand-icon,.ag-filter-card-summary{color:var(--ag-filter-panel-card-subtle-color)}.ag-filter-card-delete-icon,.ag-filter-card-expand-icon{transition:color .25s ease-in-out}.ag-filter-card-delete-icon:hover,.ag-filter-card-expand-icon:hover,.ag-filter-card-heading:hover .ag-filter-card-expand-icon{color:var(--ag-filter-panel-card-subtle-hover-color)}.ag-filter-add-button,.ag-filter-card-delete,.ag-filter-card-expand{border-radius:var(--ag-button-border-radius)}.ag-filter-card-summary,.ag-filter-type-select{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-filter-card-delete{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-filter-card-delete{margin-left:var(--ag-widget-horizontal-spacing)}.ag-filter-card-summary{margin-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-type-select{padding-top:var(--ag-widget-vertical-spacing)}.ag-filter-card-add{border:0;padding:0}.ag-filter-add-button{align-items:center;display:flex;flex-direction:row;line-height:1.5;width:100%}:where(.ag-ltr) .ag-filter-add-button-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-add-button-label{margin-right:var(--ag-spacing)}.ag-filter-add-select{border:0;.ag-rich-select-value{border:0;padding:calc(((1.5*var(--ag-font-size) + 2*var(--ag-button-vertical-padding)) - var(--ag-input-height))/2) var(--ag-spacing)}}:where(.ag-ltr) .ag-filter-add-select{.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)!important}}:where(.ag-rtl) .ag-filter-add-select{.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)!important}}.ag-filter-panel-buttons{display:flex;flex-wrap:wrap;gap:var(--ag-widget-vertical-spacing) var(--ag-widget-horizontal-spacing);justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel-buttons-button{line-height:1.5}.ag-filter-panel .ag-filter-panel-buttons-apply-button{background-color:var(--ag-filter-panel-apply-button-background-color);color:var(--ag-filter-panel-apply-button-color)}.ag-filter-panel>:where(:last-child){padding-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-panel .ag-set-filter-body-wrapper,.ag-filter-panel .ag-simple-filter-body-wrapper>:last-child{margin-bottom:var(--ag-widget-container-vertical-padding)}",H5e=class extends pe{constructor(){super(),this.registerCSS(G5e)}init(e){if(!this.gos.get("enableFilterHandlers")){X(282);return}let t=this.beans.filterPanelSvc;t.isActive=!0,this.addDestroyFunc(()=>{t.isActive=!1}),this.updateParams(e,e.initialState);let n=this.createManagedBean(new V5e);this.filterPanel=n;let i=r=>{n.refresh(r),e.onStateUpdated()};i(),this.addManagedListeners(t,{filterPanelStatesChanged:i,filterPanelStateChanged:i})}getGui(){return this.filterPanel?.getGui()}refresh(e){return this.updateParams(e,e.initialState),!0}updateParams(e,t){this.beans.filterPanelSvc?.updateParams(e,t)}getState(){return this.beans.filterPanelSvc?.getGridState()??{}}},z5e={moduleName:"FiltersToolPanel",version:Lt,userComponents:{agFiltersToolPanel:x5e},icons:{filtersToolPanel:"filter"},dependsOn:[_A,ti,Wa]},j5e={moduleName:"NewFiltersToolPanel",version:Lt,userComponents:{agNewFiltersToolPanel:H5e},beans:[E5e,A5e],icons:{filterAdd:"filter-add",filtersToolPanel:"filter",richSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading",filterCardExpand:"chevron-down",filterCardCollapse:"chevron-up",filterCardEditing:"edit"},dependsOn:[_A,ti,Wa]},jZ=class extends K{constructor(){super(...arguments),this.loadRowDataVersion=0}wireBeans(e){this.environment=e.environment}init(e,t){this.params=t,this.comp=e,t.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.createDetailGrid(),this.loadRowData(),this.addManagedEventListeners({fullWidthRowFocused:this.onFullWidthRowFocused.bind(this)}))}onFullWidthRowFocused(e){let t=this.params,n={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},i={rowIndex:e.rowIndex,rowPinned:e.rowPinned};Hn(n,i)&&qn(this.comp.getGui(),e.fromBelow)}setAutoHeightClasses(){let e=this.gos.get("detailRowAutoHeight"),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",n=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height",i=this.comp;i.toggleCss(t,!0),i.toggleDetailGridCss(n,!0)}setupRefreshStrategy(){let e=this.params.refreshStrategy;if(e=="everything"||e=="nothing"||e=="rows"){this.refreshStrategy=e;return}e!=null&&X(170,{providedStrategy:e}),this.refreshStrategy="rows"}createDetailGrid(){let{params:e,gos:t}=this;if(jt(e.detailGridOptions)){X(171);return}let n=t.get("theme"),i=e.detailGridOptions.theme;i&&i!==n&&X(267);let r=ce(T({themeStyleContainer:this.environment.eStyleContainer},e.detailGridOptions),{theme:n});t.get("detailRowAutoHeight")&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}registerDetailWithMaster(e){let{params:t,beans:{selectionSvc:n,findSvc:i,expansionSvc:r}}=this,o=t.node.id,s=t.api,a={id:o,api:e},l=t.node;if(s.isDestroyed())return;s.addDetailGridInfo(o,a),l.detailGridInfo=a;let c=l.parent;i?.registerDetailGrid(l,e);function d(){c&&n?.refreshMasterNodeState(c)}function u({source:p}){if(p==="expandAll")return e.expandAll();if(p==="collapseAll")return e.collapseAll()}function h({node:p,source:f}){p!==c||f==="masterDetail"||e.isDestroyed()||n?.setDetailSelectionState(c,t.detailGridOptions,e)}e.addEventListener("firstDataRendered",()=>{if(e.isDestroyed()||s.isDestroyed())return;n?.setDetailSelectionState(c,t.detailGridOptions,e),e.addEventListener("selectionChanged",d),s.addEventListener("rowSelected",h),e.isModuleRegistered("CsrmSsrmSharedApiModule")&&(s.addEventListener("expandOrCollapseAll",u),r?.setDetailsExpansionState(e))}),this.addManagedListeners(c,{masterChanged:p=>{p.node.master||this.onDestroy(a)}}),this.addDestroyFunc(()=>this.onDestroy(a))}onDestroy(e){let{params:t}=this,n=t.node,i=t.api;n.detailGridInfo===e&&(i.isDestroyed()||i.removeDetailGridInfo(n.id),n.detailGridInfo=null)}loadRowData(){this.loadRowDataVersion++;let e=this.loadRowDataVersion,t=this.params;if(t.detailGridOptions?.rowModelType==="serverSide"){t.node.detailGridInfo?.api?.refreshServerSide({purge:!0});return}let n=t.getDetailRowData;if(!n){X(172);return}let i=o=>{this.loadRowDataVersion===e&&this.comp.setRowData(o)},r={node:t.node,data:t.node.data,successCallback:i,context:Oe(this.gos,{}).context};n(r)}refresh(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0}},U5e=class{constructor(e){this.parentWrapper=e}wrap(e,t,n,i){return this.parentWrapper.wrap(e,t,n,i)}},W5e={tag:"div",cls:"ag-details-row"},$5e={tag:"div",cls:"ag-details-row",role:"gridcell",children:[{tag:"div",ref:"eDetailGrid",cls:"ag-details-grid",role:"presentation"}]},q5e=class extends pe{constructor(){super(...arguments),this.eDetailGrid=q}wireBeans(e){this.context=e.context}init(e){this.params=e,this.selectAndSetTemplate();let t={toggleCss:(n,i)=>this.toggleCss(n,i),toggleDetailGridCss:(n,i)=>this.eDetailGrid.classList.toggle(n,i),setDetailGrid:n=>this.setDetailGrid(n),setRowData:n=>this.setRowData(n),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new jZ),this.ctrl.init(t,e)}refresh(){return this.ctrl?.refresh()??!1}selectAndSetTemplate(){let e=this.params;if(e.pinned){this.setTemplate(W5e);return}let t=()=>{this.setTemplate($5e)};if(jt(e.template))t();else if(typeof e.template=="string")this.setTemplate(e.template,[]);else if(typeof e.template=="function"){let n=e.template,i=n(e);this.setTemplate(i,[])}else X(168),t();this.eDetailGrid==null&&X(169)}setDetailGrid(e){if(!this.eDetailGrid)return;let t=this.context.getBean("frameworkCompWrapper"),n=new U5e(t),{frameworkOverrides:i}=this.beans,r=B_(this.eDetailGrid,e,{frameworkOverrides:i,providedBeanInstances:{frameworkCompWrapper:n},modules:_W(this.params.api.getGridId(),e.rowModelType??"clientSide")});this.detailApi=r,this.ctrl?.registerDetailWithMaster(r),this.addDestroyFunc(()=>{r.destroy()})}setRowData(e){this.detailApi?.setGridOption("rowData",e)}};function FA(e,t){let n=e.masterDetailSvc?.store;return n?t(n):void 0}function K5e(e,t,n){FA(e,i=>{i[t]=n})}function Y5e(e,t){FA(e,n=>{delete n[t]})}function Z5e(e,t){return FA(e,n=>n[t])}function X5e(e,t){FA(e,n=>{let i=0;Object.values(n).forEach(r=>{r&&t(r,i++)})})}var Q5e=".ag-details-row{width:100%}.ag-details-row-fixed-height{height:100%}.ag-details-grid{width:100%}.ag-details-grid-fixed-height{height:100%}",J5e=class extends K{constructor(){super(...arguments),this.beanName="masterDetailSvc",this.store={}}isEnabled(){return this.gos.get("masterDetail")}postConstruct(){let e=this.gos;nn(e)&&(this.enabled=this.isEnabled()),Ui(e)&&this.addEventListeners()}addEventListeners(){let e=i=>{this.setMaster(i.node,!1,!0)},t,n=()=>{if(t){for(let i of t)i();t=void 0}this.isEnabled()&&(t=this.addManagedListeners(this.beans.eventSvc,{rowNodeDataChanged:e}))};n(),this.gos.addPropertyEventListener("masterDetail",n)}refreshModel(e){if(e.changedProps){let t=this.isEnabled();if(this.enabled!==t){this.setMasters(null);return}}e.rowDataUpdated&&this.setMasters(e.changedRowNodes)}setMaster(e,t,n){let i=e.master,r=this.isEnabled(),o=r,s=this.gos,a=s.get("isRowMaster"),l=s.get("treeData");if(r)if(t||n){if(a){let d=e.data;o=!!d&&!!a(d)}}else o=i;let c=this.beans;if(!l)if(o&&t){let d=c.rowGroupColsSvc?.columns.length??0;e.expanded=t4(c,e,d,!1)}else!o&&i&&(e.expanded=!1);o!==i&&(e.master=o,e.dispatchRowEvent("masterChanged"))}setMasters(e){if(this.enabled=this.isEnabled(),e){for(let t of e.updates)this.setMaster(t,!1,!0);for(let t of e.adds)this.setMaster(t,!0,!1)}else{let t=Ro(this.beans)?.rootNode?._leafs;if(t)for(let n=0,i=t.length;n<i;++n)this.setMaster(t[n],!0,!1)}}getDetail(e){if(!e.master||!e.expanded)return null;let t=e.detailNode;return t||(t=new ar(this.beans),t.detail=!0,t.selectable=!1,t.parent=e,_e(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t)}setupDetailRowAutoHeight(e,t){let{gos:n,beans:i}=this;if(!n.get("detailRowAutoHeight"))return;let r=()=>{let s=t.clientHeight;if(s!=null&&s>0){let a=()=>{let{rowModel:l}=this.beans,{rowNode:c}=e;c.setRowHeight(s),(nn(n,l)||Ui(n,l))&&l.onRowHeightChanged()};window.setTimeout(a,0)}},o=Pl(i,t,r);e.addDestroyFunc(o),r()}destroy(){this.store={},super.destroy()}},eLe={moduleName:"SharedMasterDetail",version:Lt,beans:[J5e],userComponents:{agDetailCellRenderer:q5e},dynamicBeans:{detailCellRendererCtrl:jZ},apiFunctions:{addDetailGridInfo:K5e,removeDetailGridInfo:Y5e,getDetailGridInfo:Z5e,forEachDetailGridInfo:X5e},dependsOn:[ti,LZ,n4],css:[Q5e]},tLe={moduleName:"MasterDetail",version:Lt,dependsOn:[eLe,t1,J5]},UZ=class extends pe{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}postConstruct(){this.beans.dragSvc.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragging:e=>{this.dragging||(this.dragging=!0,rp(this.beans).classList?.add(this.getDraggingCssClass())),this.updateValuesOnMove(e),this.beans.rangeSvc.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearDragProperties()},onDragCancel:()=>{this.dragging=!1,this.onDragCancel(),this.clearDragProperties()}}),this.addManagedElementListeners(this.getGui(),{pointerdown:VK,mousedown:VK})}getLastCellHovered(){return this.lastCellHovered}getDraggingCssClass(){return`ag-dragging-${this.type===0?"fill":"range"}-handle`}updateValuesOnMove(e){let t=p5(this.gos,e);!t||this.shouldSkipCell(t)||this.lastCellHovered&&Eg(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}clearDragProperties(){this.clearValues(),this.beans.rangeSvc.autoScrollService.ensureCleared(),rp(this.beans).classList?.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}getType(){return this.type}refresh(e){let t=this.cellCtrl,n=this.getGui(),i=Qe(this.beans.rangeSvc.getCellRanges()),r=i.startRow,o=i.endRow;if(r&&o&&(lr(o,r)?(this.rangeStartRow=o,this.rangeEndRow=r):(this.rangeStartRow=r,this.rangeEndRow=o)),t!==e||!Dr(n)){this.cellCtrl=e;let s=e.comp.getParentOfValue();s&&s.appendChild(n)}this.cellRange=i}clearValues(){this.lastCellHovered=void 0}destroy(){if(!this.shouldDestroyOnEndDragging&&this.dragging){Ie(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,super.destroy(),this.getGui()?.remove()}},VK=e=>{e.stopPropagation()};function nLe(e){let t=e.length,n=0;if(t<=1)return e;for(let u=0;u<e.length;u++){let h=e[u],p=h.toString().split("e-");if(p.length>1){n=Math.max(n,parseInt(p[1],10));continue}Math.floor(h)!==h&&(n=Math.max(n,h.toString().split(".")[1].length))}let i=0,r=0,o=0,s=0,a=0;for(let u=0;u<t;u++)a=e[u],i+=u,r+=a,s+=u*u,o+=u*a;let l=(t*o-i*r)/(t*s-i*i),c=r/t-l*i/t,d=[];for(let u=0;u<=t;u++)d.push(parseFloat((u*l+c).toFixed(n)));return d}var iLe={tag:"div",cls:"ag-fill-handle"},rLe=class extends UZ{constructor(){super(iLe),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=0}postConstruct(){super.postConstruct(),this.addManagedElementListeners(this.getGui(),{dblclick:this.onDblClick.bind(this)})}onDblClick(e){ei(e);let{cellRange:t,rangeStartRow:n,beans:i}=this,{rangeSvc:r,visibleCols:o}=i,s=_g(i);if(!s)return;let a=this.getFillHandleDirection();this.dragAxis=a==="xy"?"y":a;let l=r?.createCellRangeFromCellRangeParams({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,columnStart:t.columns[0],rowEndIndex:this.dragAxis==="x"?t.endRow?.rowIndex??null:s.rowIndex,rowEndPinned:this.dragAxis==="x"?t.endRow?.rowPinned:s.rowPinned,columnEnd:this.dragAxis==="x"?Qe(o.allCols):Qe(t.columns)});this.isUp=!1,this.isLeft=!1,l&&this.performFill({event:e,initialRange:t,finalRange:l}),this.dragAxis=void 0}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=ry(this.beans,e));let{x:t,y:n}=this.initialXY,{x:i,y:r}=ry(this.beans,e),o=Math.abs(t-i),s=Math.abs(n-r),a=this.getFillHandleDirection(),l;a==="xy"?l=o>s?"x":"y":l=a,l!==this.dragAxis&&(this.dragAxis=l,this.changedCalculatedValues=!0)}shouldSkipCell(e){return Or(e.column)}onDrag(e){if(!this.initialPosition){let n=this.cellCtrl;if(!n)return;this.initialPosition=n.cellPosition}let t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;let t=this.dragAxis==="x",{cellRange:n,rangeStartRow:i,rangeEndRow:r,beans:{rangeSvc:o}}=this,s=n.columns.length,a;if(!this.isUp&&!this.isLeft)a=o.createCellRangeFromCellRangeParams({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,columnStart:n.columns[0],rowEndIndex:t?r.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?r.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:n.columns[s-1]});else{let l=t?i:this.lastCellMarked;a=o.createCellRangeFromCellRangeParams({rowStartIndex:l.rowIndex,rowStartPinned:l.rowPinned,columnStart:t?this.lastCellMarked.column:n.columns[0],rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnEnd:n.columns[s-1]})}a&&this.performFill({event:e,initialRange:n,finalRange:a,shouldUpdateRange:!0})}onDragCancel(){this.initialXY=null,this.markedCells.length&&this.clearMarkedPath()}performFill({event:e,initialRange:t,finalRange:n,shouldUpdateRange:i}){let{eventSvc:r,rangeSvc:o}=this.beans;r.dispatchEvent({type:"fillStart"}),this.handleValueChanged(t,n,e),i&&o.setCellRanges([n]),r.dispatchEvent({type:"fillEnd",initialRange:t,finalRange:n})}getFillHandleDirection(){let e=w_(this.gos)?.direction;return e?e!=="x"&&e!=="y"&&e!=="xy"?(X(177),"xy"):e:"xy"}handleValueChanged(e,t,n){let{beans:i}=this,{rangeSvc:r,gos:o,valueSvc:s}=i,a=r.getRangeEndRow(e),l=r.getRangeStartRow(e),c=r.getRangeEndRow(t),d=r.getRangeStartRow(t),u=this.dragAxis==="y";if(this.isReduce&&!w_(o)?.suppressClearOnFillReduction){let F=u?e.columns:e.columns.filter(V=>t.columns.indexOf(V)<0),L=u?Vr(i,c):d;L&&this.clearCellsInRange(L,a,F);return}let h=[],p=[],f=[],g=[],C=!0,m=0,w=()=>{h.length=0,p.length=0,f.length=0,g.length=0,m=0},x=(F,L)=>{let V=this.isUp?a:l,B=!1;for(u&&(C=!0,w());!B&&V;){let P=Mi(i,V);if(!P)break;if(u&&F)D(h,F,P,()=>!Hn(V,this.isUp?l:a));else if(L){C=!0,w();for(let U of L)D(h,U,P,()=>U!==(this.isLeft?e.columns[0]:Qe(e.columns)))}B=Hn(V,this.isUp?d:c),V=this.isUp?la(this.beans,V):Vr(i,V)}},D=(F,L,V,B)=>{let P,U=!1;if(C)P=s.getValue(L,V),p.push(P),f.push(s.getValue(L,V,!0)),g.push(s.getValueForDisplay({column:L,node:V}).valueFormatted),C=B();else{let{value:A,fromUserFunction:I,sourceCol:j,sourceRowNode:G}=this.processValues({event:n,values:F,initialValues:p,initialNonAggregatedValues:f,initialFormattedValues:g,col:L,rowNode:V,idx:m++});if(P=A,L.isCellEditable(V)){let Q=s.getValue(L,V);if(!I){if(j){let le=j.getColDef();if(le.useValueFormatterForExport!==!1&&le.valueFormatter){let me=s.getValueForDisplay({column:j,node:G,includeValueFormatted:!0}).valueFormatted;me!=null&&(P=me)}}L.getColDef().useValueParserForImport!==!1&&(P=s.parseValue(L,V,j?P:Xr(P),Q))}!I||Q!==P?V.setDataValue(L,P,"rangeSvc"):U=!0}}U||F.push({value:P,column:L,rowNode:V})};if(u)e.columns.forEach(F=>{x(F)});else{let F=this.isLeft?[...t.columns].reverse():t.columns;x(void 0,F)}this.beans.editSvc?.stopEditing(void 0,{source:"fillHandle"})}clearCellsInRange(e,t,n){let i={startRow:e,endRow:t,columns:n,startColumn:n[0]};this.beans.rangeSvc.clearCellRangeCellValues({cellRanges:[i]})}processValues(e){let{formula:t,valueSvc:n}=this.beans,{event:i,values:r,initialValues:o,initialNonAggregatedValues:s,initialFormattedValues:a,col:l,rowNode:c,idx:d}=e,u=w_(this.gos)?.setFillValue,h=this.dragAxis==="y",p;if(h?p=this.isUp?"up":"down":p=this.isLeft?"left":"right",u){let C=Oe(this.gos,{event:i,values:r.map(({value:w})=>w),initialValues:o,initialNonAggregatedValues:s,initialFormattedValues:a,currentIndex:d,currentCellValue:n.getValue(l,c),direction:p,column:l,rowNode:c}),m=u(C);if(m!==!1)return{value:m,fromUserFunction:!0}}let f=C=>typeof C=="number"&&Number.isFinite(C)||typeof C=="string"&&/^[+-]?\d+(?:\.\d+)?$/.test(C.trim()),g=r.every(({value:C})=>f(C));if(i.altKey||!g){let C=String(Qe(r)?.value??"");if(g&&o.length===1){let F=this.isUp||this.isLeft?-1:1;return{value:parseFloat(C)+1*F,fromUserFunction:!1}}let{value:m,column:w,rowNode:x}=r[d%r.length],D;if(w.isAllowFormula()&&t?.isFormula(C)){let F=p==="up"?-1:p==="down"?1:0,L=p==="left"?-1:p==="right"?1:0;D=t.updateFormulaByOffset({value:C,rowDelta:F,columnDelta:L})}else D=m;return{value:D,fromUserFunction:!1,sourceCol:w,sourceRowNode:x}}return{value:Qe(nLe(r.map(({value:C})=>Number(C)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){for(let e of this.markedCells){if(!e.isAlive())continue;let{comp:t}=e;t.toggleCss("ag-selection-fill-top",!1),t.toggleCss("ag-selection-fill-right",!1),t.toggleCss("ag-selection-fill-bottom",!1),t.toggleCss("ag-selection-fill-left",!1)}this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(Hn(t,e))return;let n=lr(t,e),{rangeStartRow:i,rangeEndRow:r}=this;n&&(t.rowPinned==i.rowPinned&&t.rowIndex>=i.rowIndex||i.rowPinned!=r.rowPinned&&t.rowPinned==r.rowPinned&&t.rowIndex<=r.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,n),this.isReduce=!1)}else{let n=e.column,i=t.column;if(n===i)return;let r=this.beans.visibleCols.allCols,o=r.indexOf(n),s=r.indexOf(i);s<=o&&s>=r.indexOf(this.cellRange.columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,s<o),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,n){let i=this.beans,{rangeSvc:r}=i,o=e;do{let s=this.cellRange,a=s.columns.length;for(let l=0;l<a;l++){let c=s.columns[l],d={rowIndex:o.rowIndex,rowPinned:o.rowPinned},u=ce(T({},d),{column:c}),h=r.isCellInSpecificRange(u,s),p=Hn(o,e);if(n&&(this.isUp=!0),!p){let f=Ha(i,u);if(f){this.markedCells.push(f);let g=f.comp;h||(g.toggleCss("ag-selection-fill-left",l===0),g.toggleCss("ag-selection-fill-right",l===a-1)),g.toggleCss(n?"ag-selection-fill-top":"ag-selection-fill-bottom",Hn(o,t))}}}if(Hn(o,t))break}while(o=n?la(this.beans,o):Vr(i,o))}reduceVertical(e,t){let n=e,i=this.beans;do{let r=this.cellRange,o=r.columns.length,s=Hn(n,t);for(let a=0;a<o;a++){let l={rowIndex:n.rowIndex,rowPinned:n.rowPinned},c=ce(T({},l),{column:r.columns[a]}),d=Ha(i,c);d&&(this.markedCells.push(d),d.comp.toggleCss("ag-selection-fill-bottom",Hn(n,t)))}if(s)break}while(n=la(i,n))}extendHorizontal(e,t,n){let i=this.beans,{visibleCols:r}=i,o=r.allCols,s=o.indexOf(n?t.column:e.column),a=o.indexOf(n?this.cellRange.columns[0]:t.column),l=n?0:1,c=o.slice(s+l,a+l),{rangeStartRow:d,rangeEndRow:u}=this;for(let h of c){let p=d,f=!1;do{f=Hn(p,u);let g=Ha(i,{rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:h});if(g){this.markedCells.push(g);let C=g.comp;C.toggleCss("ag-selection-fill-top",Hn(p,d)),C.toggleCss("ag-selection-fill-bottom",Hn(p,u)),n?(this.isLeft=!0,C.toggleCss("ag-selection-fill-left",h===c[0])):C.toggleCss("ag-selection-fill-right",h===Qe(c))}p=Vr(i,p)}while(!f)}}reduceHorizontal(e,t){let n=this.beans,{visibleCols:i}=n,r=i.allCols,o=r.indexOf(t.column),s=r.indexOf(e.column),a=r.slice(o,s),{rangeStartRow:l,rangeEndRow:c}=this;for(let d of a){let u=l,h=!1;do{h=Hn(u,c);let p=Ha(this.beans,{rowIndex:u.rowIndex,rowPinned:u.rowPinned,column:d});p&&(this.markedCells.push(p),p.comp.toggleCss("ag-selection-fill-right",d===a[0])),u=Vr(n,u)}while(!h)}}refresh(e){let t=this.beans.rangeSvc.getCellRanges()[0];if(!t.startRow||!t.endRow){this.destroy();return}super.refresh(e)}},oLe=class extends UZ{constructor(){super({tag:"div",cls:"ag-range-handle"}),this.type=1,this.rangeFixed=!1}onDrag(e){let t=this.getLastCellHovered();if(!t)return;let n=this.beans.rangeSvc,i=n.getCellRanges(),r=Qe(i);this.rangeFixed||(this.fixRangeStartEnd(r),this.rangeFixed=!0),this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column},i.length===2&&i[0].type===Ls.DIMENSION&&r.type===Ls.VALUE&&!Hn(this.endPosition,n.getRangeEndRow(r))&&n.updateRangeRowBoundary({cellRange:i[0],boundary:"end",cellPosition:ce(T({},this.endPosition),{column:i[0].columns[0]}),silent:!0}),n.extendLatestRangeToCell(this.endPosition)}shouldSkipCell(e){return!1}onDragEnd(e){let t=Qe(this.beans.rangeSvc.getCellRanges());this.fixRangeStartEnd(t),this.rangeFixed=!1}onDragCancel(){this.rangeFixed=!1}fixRangeStartEnd(e){let t=this.beans.rangeSvc,n=t.getRangeStartRow(e),i=t.getRangeEndRow(e),r=e.columns[0];e.startRow=n,e.endRow=i,e.startColumn=r}},sLe=".ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing),.ag-cell-range-selected.ag-cell-range-chart,.ag-cell-range-selected:not(.ag-cell-focus){background-color:var(--ag-range-selection-background-color);&.ag-cell-range-chart{background-color:var(--ag-range-selection-chart-background-color)!important;&.ag-cell-range-chart-category{background-color:var(--ag-range-selection-chart-category-background-color)!important}}}.ag-cell-range-selected-1.ag-cell-range-chart,.ag-cell-range-selected-1:not(.ag-cell-focus),.ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing){background-color:var(--ag-range-selection-background-color)}.ag-cell-range-selected-2.ag-cell-range-chart,.ag-cell-range-selected-2:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-3.ag-cell-range-chart,.ag-cell-range-selected-3:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-4.ag-cell-range-chart,.ag-cell-range-selected-4:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell){&.ag-cell-range-top{border-top-color:var(--ag-range-selection-border-color);border-top-style:var(--ag-range-selection-border-style)}&.ag-cell-range-right{border-right-color:var(--ag-range-selection-border-color);border-right-style:var(--ag-range-selection-border-style)}&.ag-cell-range-bottom{border-bottom-color:var(--ag-range-selection-border-color);border-bottom-style:var(--ag-range-selection-border-style)}&.ag-cell-range-left{border-left-color:var(--ag-range-selection-border-color);border-left-style:var(--ag-range-selection-border-style)}}.ag-cell.ag-selection-fill-top,.ag-cell.ag-selection-fill-top.ag-cell-range-selected{border-top:1px dashed;border-top-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-right,:where(.ag-ltr) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-right,:where(.ag-rtl) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}.ag-cell.ag-selection-fill-bottom,.ag-cell.ag-selection-fill-bottom.ag-cell-range-selected{border-bottom:1px dashed;border-bottom-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-left,:where(.ag-ltr) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-left,:where(.ag-rtl) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}.ag-fill-handle,.ag-range-handle{background-color:var(--ag-range-selection-border-color);bottom:-1px;height:6px;position:absolute;width:6px}:where(.ag-ltr) .ag-fill-handle,:where(.ag-ltr) .ag-range-handle{right:-1px}:where(.ag-rtl) .ag-fill-handle,:where(.ag-rtl) .ag-range-handle{left:-1px}.ag-fill-handle{cursor:crosshair}:where(.ag-ltr) .ag-range-handle{cursor:nwse-resize}:where(.ag-rtl) .ag-range-handle{cursor:nesw-resize}";function aLe(e){return e.rangeSvc?.getCellRanges()??null}function lLe(e,t){e.rangeSvc?.addCellRange(t)}function GK(e){e.rangeSvc?.removeAllCellRanges()}var Oy="ag-cell-range-selected",cLe="ag-cell-range-chart",dLe="ag-cell-range-single-cell",uLe="ag-cell-range-chart-category",hLe="ag-cell-range-handle",pLe="ag-cell-range-top",fLe="ag-cell-range-right",gLe="ag-cell-range-bottom",mLe="ag-cell-range-left";function vLe(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function HK(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}var CLe=class{constructor(e,t){this.beans=e,this.cellCtrl=t,this.rangeSvc=e.rangeSvc}setComp(e){this.cellComp=e,this.eGui=this.cellCtrl.eGui,this.onCellSelectionChanged()}unsetComp(){this.beans.context.destroyBean(this.selectionHandle)}onCellSelectionChanged(){let e=this.cellComp;if(!e)return;let{rangeSvc:t,cellCtrl:n,eGui:i}=this,r=t.getCellRangeCount(n.cellPosition);this.rangeCount=r;let o=this.getHasChartRange();this.hasChartRange=o,e.toggleCss(Oy,r!==0),e.toggleCss(`${Oy}-1`,r===1),e.toggleCss(`${Oy}-2`,r===2),e.toggleCss(`${Oy}-3`,r===3),e.toggleCss(`${Oy}-4`,r>=4),e.toggleCss(cLe,o),p0(i,r>0?!0:void 0),e.toggleCss(dLe,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,r=!t&&e.bottom,o=!t&&e.left,s=this.cellComp;s.toggleCss(pLe,n),s.toggleCss(fLe,i),s.toggleCss(gLe,r),s.toggleCss(mLe,o)}isSingleCell(){let{rangeSvc:e}=this;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeSvc:e}=this;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(n=>[Ls.DIMENSION,Ls.VALUE].includes(n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,n=!1,i=!1,r=!1,{rangeSvc:o,beans:{visibleCols:s},cellCtrl:{cellPosition:a}}=this,l=a.column,c=o.getCellRanges().filter(h=>o.isCellInSpecificRange(a,h));if(!c.length)return{top:t,right:n,bottom:i,left:r};let d,u;e?(d=s.getColAfter(l),u=s.getColBefore(l)):(d=s.getColBefore(l),u=s.getColAfter(l)),d||(r=!0),u||(n=!0);for(let h=0;h<c.length&&!(t&&n&&i&&r);h++){let p=c[h],f=o.getRangeStartRow(p),g=o.getRangeEndRow(p);!t&&Hn(f,a)&&(t=!0),!i&&Hn(g,a)&&(i=!0),!r&&d&&p.columns.indexOf(d)<0&&(r=!0),!n&&u&&p.columns.indexOf(u)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:r}}refreshHandle(){let{context:e}=this.beans;if(e.isDestroyed())return;let t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=e.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.toggleCss(hLe,!!this.selectionHandle)}shouldHaveSelectionHandle(){let{gos:e,editSvc:t}=this.beans,n=this.rangeSvc,i=n.getCellRanges(),r=i.length;if(this.rangeCount<1||r<1)return!1;let o=Qe(i),{cellPosition:s,column:a}=this.cellCtrl,l=HK(e)&&!a.isSuppressFillHandle(),c=vLe(e),d=t?.isEditing(this.cellCtrl,{withOpenEditor:!0}),u=r===1&&!d&&(l||c);if(this.hasChartRange){let p=i[0].type===Ls.DIMENSION&&n.isCellInSpecificRange(s,i[0]);this.cellComp.toggleCss(uLe,p),u=o.type===Ls.VALUE}return u&&o.endRow!=null&&n.isContiguousRange(o)&&n.isBottomRightCell(o,s)}addSelectionHandle(){let{beans:e,rangeSvc:t}=this,n=Qe(t.getCellRanges()).type,r=HK(e.gos)&&jt(n)?0:1;if(this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=e.context.destroyBean(this.selectionHandle)),!this.selectionHandle){let o=e.registry.createDynamicBean(r===0?"fillHandle":"rangeHandle",!1);o&&(this.selectionHandle=e.context.createBean(o))}this.selectionHandle?.refresh(this.cellCtrl)}destroy(){this.unsetComp()}},bLe=class extends K{constructor(e){super(),this.eContainer=e}postConstruct(){let{beans:e,gos:t,eContainer:n}=this,i=e.rangeSvc,r={eElement:n,onDragStart:i.onDragStart.bind(i),onDragStop:i.onDragStop.bind(i),onDragging:i.onDragging.bind(i)},o=e.dragSvc,s=o.addDragSource.bind(o,r),a=o.removeDragSource.bind(o,r);this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Vo(t)?s():a()}),this.addDestroyFunc(a),Vo(t)&&s()}},wLe=class extends K{constructor(e,t){super(),this.column=e,this.eGui=t}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)})}onClick(e){this.beans.rangeSvc?.handleColumnSelection(this.column,e)}},yLe=class extends K{constructor(e,t){super(),this.column=e,this.comp=t,this.columnMap=new Map,this.isActive=!1,this.resetColumnMap()}postConstruct(){this.addManagedPropertyListener("cellSelection",()=>{this.refreshActive()}),this.refreshActive(),this.setupRangeHeaderHighlight()}resetColumnMap(){this.columnMap.clear();let e;this.column.isColumn?e=[this.column]:e=this.column.getDisplayedLeafColumns();for(let t of e)this.columnMap.set(t,!1)}refreshActive(){let{gos:e,rangeSvc:t}=this.beans,n=e.get("cellSelection");this.isActive=!!(n&&t&&typeof n=="object"&&n.enableHeaderHighlight)}setupRangeHeaderHighlight(){let e=this.onRangeSelectionChanged.bind(this);this.addManagedEventListeners({rangeSelectionChanged:e,columnPinned:e,columnMoved:e,columnGroupOpened:e}),e()}onRangeSelectionChanged(){if(!this.isActive)return;this.resetColumnMap();let e=this.beans.rangeSvc.getCellRanges(),t=!1,n=!0;for(let i of e){if(t)break;for(let r of i.columns)this.columnMap.has(r)&&(this.columnMap.set(r,!0),t||(t=!0))}for(let i of Array.from(this.columnMap.values()))if(i===!1){n=!1;break}this.comp.toggleCss("ag-header-range-highlight",t&&n)}destroy(){super.destroy(),this.comp=null,this.column=null}},SLe=class extends K{constructor(){super(...arguments),this.beanName="rangeSvc",this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1,this.columnRangeSelectionCtx={}}wireBeans(e){this.rowModel=e.rowModel,this.dragSvc=e.dragSvc,this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.cellNavigation=e.cellNavigation,this.ctrlsSvc=e.ctrlsSvc,this.valueSvc=e.valueSvc}postConstruct(){let e=this.onColumnsChanged.bind(this),t=()=>this.removeAllCellRanges(),n=this.refreshLastRangeStart.bind(this);this.addManagedEventListeners({newColumnsLoaded:e,columnVisible:e,columnValueChanged:e,columnPivotModeChanged:t,columnRowGroupChanged:t,columnPivotChanged:t,columnGroupOpened:n,columnMoved:n,columnPinned:n}),this.ctrlsSvc.whenReady(this,i=>{let r=i.gridBodyCtrl;this.autoScrollService=new wy({scrollContainer:r.eBodyViewport,scrollAxis:"xy",getVerticalPosition:()=>r.scrollFeature.getVScrollPosition().top,setVerticalPosition:o=>r.scrollFeature.setVerticalScrollPosition(o),getHorizontalPosition:()=>r.scrollFeature.getHScrollPosition().left,setHorizontalPosition:o=>r.scrollFeature.setHorizontalScrollPosition(o),shouldSkipVerticalScroll:()=>!po(this.gos,"normal"),shouldSkipHorizontalScroll:()=>!r.scrollFeature.isHorizontalScrollShowing()})})}onDragStart(e){let t=this.gos;if(!Vo(t)||u5(t,e.target)?.isSuppressMouseEvent(e))return;let{ctrlKey:n,metaKey:i,shiftKey:r}=e,o=n||i,a=!b0(t)?o:!1,l=r&&!!this.cellRanges?.length;!a&&(!l||_e(Qe(this.cellRanges).type))&&this.removeAllCellRanges(!0);let c=this.dragSvc.startTarget;if(c&&this.updateValuesOnMove(c),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=a&&this.getCellRangeCount(this.lastCellHovered)>1,l||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=Qe(this.cellRanges);else{let d={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned},u=this.getColumnsFromModel([this.lastCellHovered.column]);if(!u?.length)return;this.draggingRange={startRow:d,endRow:d,columns:u,startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.addEventListener("scroll",this.bodyScrollListener,{passive:!0}),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}onDragging(e){let{dragging:t,lastCellHovered:n,newestRangeStartCell:i,autoScrollService:r,cellHasChanged:o}=this;if(!t||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;let s=p=>n&&n.rowPinned===p&&i.rowPinned===p,a=s("top")||s("bottom");if(r.check(e,a),!o||!n)return;let l=i?.column,c=n?.column,d=this.calculateColumnsBetween(l,c);if(!d)return;let{rowIndex:u,rowPinned:h}=n;this.draggingRange.endRow={rowIndex:u,rowPinned:h},this.draggingRange.columns=d,this.dispatchChangedEvent(!1,!1,this.draggingRange.id)}onDragStop(){if(!this.dragging)return;let{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.removeEventListener("scroll",this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}onColumnsChanged(){this.refreshLastRangeStart();let e=this.visibleCols.allCols;for(let n of this.cellRanges){let i=n.columns;n.columns=n.columns.filter(o=>o.isVisible()&&e.indexOf(o)!==-1),!Hr(i,n.columns)&&this.dispatchChangedEvent(!1,!0,n.id)}let t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(n=>n.columns.length>0),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){let e=Qe(this.cellRanges);e&&this.refreshRangeStart(e)}isContiguousRange(e){let t=e.columns;if(!t.length)return!1;let n=this.visibleCols.allCols,i=t.map(r=>n.indexOf(r)).sort((r,o)=>r-o);return Qe(i)-i[0]+1===t.length}getRangeStartRow(e){return e.startRow&&e.endRow?lr(e.startRow,e.endRow)?e.startRow:e.endRow:{rowIndex:0,rowPinned:(this.beans.pinnedRowModel?.getPinnedTopRowCount()??0)>0?"top":null}}getRangeEndRow(e){if(e.startRow&&e.endRow)return lr(e.startRow,e.endRow)?e.endRow:e.startRow;let t=this.beans.pinnedRowModel?.getPinnedBottomRowCount()??0;return t>0?{rowIndex:t-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}getRangeRowCount(e){let t=this.beans,n=this.getRangeStartRow(e),i=this.getRangeEndRow(e),r=f5(t,n);return f5(t,i)-r+1}handleCellMouseDown(e,t){let{beans:n}=this,i=Or(t.column);if(i&&e.preventDefault(),e.shiftKey)return this.extendLatestRangeToCell(t);if(i&&fy(n,e))return;let r=e.ctrlKey||e.metaKey;this.setSelectionMode(i);let o=this.calculateColumnsBetween(t.column,t.column);if(!o)return;let s=this.findContainingRange({columns:o,startRow:t,endRow:t});i&&r&&s?this.removeRowFromRowNumberRange(t,s):this.setRangeToCell(t,r)}removeRowFromRowNumberRange(e,t){let{beans:n,cellRanges:i}=this,r=Dg(n),o=_g(n),s=this.getRangeStartRow(t),a=this.getRangeEndRow(t);if(!s&&Hn(r,e))Q_(t,Vr(n,r),"top");else if(!a&&Hn(o,e))Q_(t,la(n,o),"bottom");else if(Hn(s,a))Ci(i,t);else if(Hn(s,e))Q_(t,Vr(n,e),"top");else if(Hn(a,e))Q_(t,la(n,e),"bottom");else{let l=la(n,e),c=Vr(n,e);t.startRow=s,t.endRow=l??void 0,i.push(ce(T({},t),{startRow:c??void 0,endRow:a}))}this.dispatchChangedEvent(!0,!0)}setRangeToCell(e,t=!1){let{gos:n,beans:i}=this;if(!Vo(n))return;if(Pd(i)){let c=Or(e.column);this.setSelectionMode(c)}let o=this.calculateColumnsBetween(e.column,e.column);if(!o)return;(b0(n)||!t||jt(this.cellRanges))&&this.removeAllCellRanges(!0);let a={rowIndex:e.rowIndex,rowPinned:e.rowPinned},l={startRow:a,endRow:a,columns:o,startColumn:e.column};this.cellRanges.push(l),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}getRangeLastColumn(e){let t=e.columns[0],n=Qe(e.columns);return this.newestRangeStartCell?.column===t?n:t}extendRangeRowCountBy(e,t){let{beans:n}=this,{startRow:i,endRow:r}=e;if(!i||!r)return;let o=0,s,a=lr(r,i);a?s=i:s=r;let l=t>0?Vr:la,c=Math.abs(t);for(;o<c;){let u=l(n,s);if(!u)break;s=u,o++}if(o!==c)return;let d=ce(T({},s),{column:this.getRangeLastColumn(e)});this.updateRangeRowBoundary({cellRange:e,boundary:a?"start":"end",cellPosition:d})}extendRangeColumnCountBy(e,t){let{columns:n,startColumn:i}=e;if(t===0)return;let r=this.getColumnsFromModel();if(!r)return;let o=Qe(n),s=i===n[0]?o:n[0];if(!o||!s)return;let a=r.indexOf(i),l=r.indexOf(s),c=l<a;c&&(a=l);let u=n.length+t;if(u<=0)return;let h=[];for(let p=a;p<a+u;p++){let f=r[p];if(!f)break;h.push(f)}if(h.length===u){if(c){let p=Qe(h);e.startColumn=p,this.focusCellOnNewColumn(e,p)}e.columns=h,this.dispatchChangedEvent(!0,!0,e.id)}}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;let t=Qe(this.cellRanges);this.setSelectionMode(Or(e.column)),this.updateRangeRowBoundary({cellRange:t,boundary:"end",cellPosition:e})}updateRangeRowBoundary(e){let{cellRange:t,boundary:n,cellPosition:i,silent:r=!1}=e,o=i.column,s=this.calculateColumnsBetween(t.startColumn,o);!s||_Le(t,i)||(n==="start"&&this.focusCellOnNewRow(t,i),t.columns=s,t[n==="start"?"startRow":"endRow"]={rowIndex:i.rowIndex,rowPinned:i.rowPinned},r||this.dispatchChangedEvent(!0,!0,t.id))}getRangeEdgeColumns(e){let t=this.visibleCols.allCols,n=e.columns.map(i=>t.indexOf(i)).filter(i=>i>-1).sort((i,r)=>i-r);return{left:t[n[0]],right:t[Qe(n)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;let t=e.key,n=e.ctrlKey||e.metaKey,i=Qe(this.cellRanges),r=this.newestRangeStartCell,o=i.endRow.rowIndex,s=i.endRow.rowPinned,l={column:this.getRangeLastColumn(i),rowIndex:o,rowPinned:s},c=this.cellNavigation.getNextCellToFocus(t,l,n);if(c)return this.setCellRange({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:c.rowIndex,rowEndPinned:c.rowPinned,columnStart:r.column,columnEnd:c.column}),c}setCellRange(e){Vo(this.gos)&&(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){if(!Hr(this.cellRanges,e)&&this.verifyCellRanges(this.gos)){this.removeAllCellRanges(!0);for(let t of e){if(t.columns&&t.startRow){let n=this.getColumnsFromModel(t.columns);if(!n||n.length===0)continue;t.columns=n;let{startRow:i}=t;this.setNewestRangeStartCell({rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:t.columns[0]})}this.cellRanges.push(t)}this.dispatchChangedEvent(!1,!0)}}clearCellRangeCellValues(e){let{beans:t,valueSvc:n,eventSvc:i}=this,{cellEventSource:r="rangeSvc",dispatchWrapperEvents:o,wrapperEventSource:s="deleteKey"}=e,{cellRanges:a}=e;o&&(i.dispatchEvent({type:"cellSelectionDeleteStart",source:s}),i.dispatchEvent({type:"rangeDeleteStart",source:s})),a||(a=this.cellRanges);for(let l of a)this.forEachRowInRange(l,c=>{let d=Mi(t,c);if(d)for(let u=0;u<l.columns.length;u++){let h=this.getColumnFromModel(l.columns[u]);if(!h?.isCellEditable(d))continue;let p=n.getDeleteValue(h,d);d.setDataValue(h,p,r)}});o&&(i.dispatchEvent({type:"cellSelectionDeleteEnd",source:s}),i.dispatchEvent({type:"rangeDeleteEnd",source:s}))}createCellRangeFromCellRangeParams(e){return this.createPartialCellRangeFromRangeParams(e,!1)}createPartialCellRangeFromRangeParams(e,t){let{columns:n,columnStart:i,columnEnd:r,rowStartIndex:o,rowStartPinned:s,rowEndIndex:a,rowEndPinned:l}=e,c=this.getColumnsFromParams(n,i,r);if(!c||!t&&c.columns.length===0)return;let{columns:d,startsOnTheRight:u}=c,h=zK(o,s),p=zK(a,l);return{startRow:h,endRow:p,columns:d,startColumn:this.getColumnFromModel(i)??(u?Qe(d):d[0])}}addCellRange(e){let t=this.gos;if(!Vo(t)||!this.verifyCellRanges(t))return;this.setSelectionMode(!1);let n=this.createCellRangeFromCellRangeParams(e);if(n)return n.startRow&&this.setNewestRangeStartCell({rowIndex:n.startRow.rowIndex,rowPinned:n.startRow.rowPinned,column:n.startColumn}),this.cellRanges.push(n),this.dispatchChangedEvent(!1,!0,n.id),n}getCellRanges(){return this.cellRanges}isEmpty(){return this.cellRanges.length===0}isMoreThanOneCell(){let e=this.cellRanges.length;if(e===0)return!1;if(e>1)return!0;let t=this.cellRanges[0],n=this.getRangeStartRow(t),i=this.getRangeEndRow(t);return n.rowPinned!==i.rowPinned||n.rowIndex!==i.rowIndex||t.columns.length!==1}areAllRangesAbleToMerge(){let e=new Map;if(this.cellRanges.length<=1)return!0;for(let i of this.cellRanges)this.forEachRowInRange(i,r=>{let o=`${r.rowPinned||"normal"}_${r.rowIndex}`,s=e.get(o),a=i.columns.map(l=>l.getId());if(s){let l=a.filter(c=>s.indexOf(c)===-1);s.push(...l)}else e.set(o,a)});let n;for(let i of e.values()){let r=i.sort().join();if(n===void 0){n=r;continue}if(n!==r)return!1}return!0}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){let n=t.columns?.includes(e.column),i=this.isRowInRange(e,t);return n&&i}isColumnInAnyRange(e){let{beans:t}=this,n=Dg(t),i=_g(t);if(!n||!i)return!1;let r=e.isColumn?[e]:e.getDisplayedLeafColumns();return this.findContainingRange({columns:r,startRow:n,endRow:i},!0)!=null}findContainingRange({columns:e,startRow:t,endRow:n},i=!1){let r=this.cellRanges;for(let o=r.length-1;o>=0;o--){let s=r[o],a=e.every(c=>s.columns.includes(c)),l=!1;if(i)l=Hn(s.startRow,t)&&Hn(s.endRow,n);else{let c=t&&this.isRowInRange(t,s),d=n&&this.isRowInRange(n,s);l=!!c&&!!d}if(a&&l)return s}}isBottomRightCell(e,t){let n=this.visibleCols.allCols,i=e.columns.map(c=>n.indexOf(c)).sort((c,d)=>c-d),{startRow:r,endRow:o}=e,s=lr(r,o)?o:r,a=n.indexOf(t.column)===Qe(i),l=t.rowIndex===s.rowIndex&&hi(t.rowPinned)===hi(s.rowPinned);return a&&l}getCellRangeCount(e){return this.cellRanges.filter(t=>this.isCellInSpecificRange(e,t)).length}isRowInRange(e,t){let n=this.getRangeStartRow(t),i=this.getRangeEndRow(t),r=Hn(e,n),o=Hn(e,i);if(r||o)return!0;let s=!lr(e,n),a=lr(e,i);return s&&a}intersectLastRange(e){if(e&&this.dragging||b0(this.gos)||this.isEmpty())return;let t=Qe(this.cellRanges),n=this.getRangeStartRow(t),i=this.getRangeEndRow(t),r=[];for(let o of this.cellRanges.slice(0,-1)){let s=this.getRangeStartRow(o),a=this.getRangeEndRow(o),l=o.columns,c=l.filter(u=>t.columns.indexOf(u)===-1);if(c.length===l.length){r.push(o);continue}if(lr(i,s)||lr(a,n)){r.push(o);continue}let d=r.length;if(lr(s,n)){let u={columns:[...l],startColumn:t.startColumn,startRow:T({},s),endRow:la(this.beans,n)};r.push(u)}if(c.length>0){let u={columns:c,startColumn:c.includes(t.startColumn)?t.startColumn:c[0],startRow:xLe([T({},n),T({},s)]),endRow:ELe([T({},i),T({},a)])};r.push(u)}lr(i,a)&&r.push({columns:[...l],startColumn:t.startColumn,startRow:Vr(this.beans,i),endRow:T({},a)}),r.length-d===1&&(r[r.length-1].id=o.id)}this.cellRanges=r,e&&this.dispatchChangedEvent(!1,!0)}createRangeHighlightFeature(e,t,n){e.createManagedBean(new yLe(t,n))}setSelectionMode(e){this.selectionMode=e?1:0}refreshRangeStart(e){let{startColumn:t,columns:n}=e,i=(l,c)=>{let d=e.columns.filter(u=>u!==l);l?(e.startColumn=l,e.columns=c?[l,...d]:[...d,l]):e.columns=d},{left:r,right:o}=this.getRangeEdgeColumns(e);if(t===n[0]&&t!==r){i(r,!0);return}t===Qe(n)&&t===o&&i(o,!1)}setNewestRangeStartCell(e){this.newestRangeStartCell=e}getColumnsFromParams(e,t,n){let i=!e&&!t&&!n,r,o=!1;return i||e?r=this.getColumnsFromModel(i?void 0:e):t&&n&&(r=this.calculateColumnsBetween(t,n),r?.length&&(o=r[0]!==this.getColumnFromModel(t))),r?{columns:r,startsOnTheRight:o}:void 0}verifyCellRanges(e){let t=LW(e)&&b0(e)&&this.cellRanges.length>1;return t&&X(93),!t}forEachRowInRange(e,t){let n=this.getRangeStartRow(e),i=this.getRangeEndRow(e),r=n;for(;r&&(t(r),!Hn(r,i));)r=Vr(this.beans,r)}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}updateValuesOnMove(e){let t=Ay(this.gos,e),n=t?.cellPosition;if(this.cellHasChanged=!1,!n||this.lastCellHovered&&Eg(n,this.lastCellHovered))return;if(this.beans.editSvc?.isEditing(t,{withOpenEditor:!0})){this.dragSvc.cancelDrag(e);return}this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=n}dispatchChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"cellSelectionChanged",started:e,finished:t,id:n}),this.eventSvc.dispatchEvent({type:"rangeSelectionChanged",started:e,finished:t,id:n})}getColumnFromModel(e){return typeof e=="string"?this.colModel.getCol(e):e}getColumnsFromModel(e){let{visibleCols:t,beans:n,selectionMode:i}=this,r=Pd(n);(!e||i===1)&&(e=t.allCols);let o=[];for(let s of e){let a=this.getColumnFromModel(s);!a||r&&DLe(a)||o.push(a)}return o.length?o:void 0}calculateColumnsBetween(e,t){let n=this.visibleCols.allCols,i=this.getColumnFromModel(e),r=this.getColumnFromModel(t),o=i===r,s=n.indexOf(i);if(s<0){X(178,{colId:i.getId()});return}let a=o?s:n.indexOf(r);if(a<0){X(178,{colId:r.getId()});return}if(o||this.selectionMode===1)return this.getColumnsFromModel([i]);let l=Math.min(s,a),c=l===s?a:s;return this.getColumnsFromModel(n.slice(l,c+1))}focusCellOnNewColumn(e,t){let{focusSvc:n}=this.beans,i=n.getFocusedCell();i&&this.isCellInSpecificRange(i,e)&&n.setFocusedCell(ce(T({},i),{column:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0}))}focusCellOnNewRow(e,t){let{focusSvc:n}=this.beans,i=n.getFocusedCell();i&&this.isCellInSpecificRange(i,e)&&n.setFocusedCell(ce(T({},t),{column:i.column,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0}))}createDragListenerFeature(e){return new bLe(e)}createCellRangeFeature(e){return new CLe(this.beans,e)}createHeaderGroupCellMouseListenerFeature(e,t){return new wLe(e,t)}handleColumnSelection(e,t){let{gos:n,beans:i,columnRangeSelectionCtx:r,cellRanges:o}=this;if(!Qh(n))return;let a=b0(n),l=o.length>0,c=t.ctrlKey||t.metaKey,d=Dg(i),u=_g(i);if(!(!d||!u))if(t.shiftKey){let h=r.root;if(!h)return;let p=e.isColumn?e:Qe(e.getLeafColumns()),f=this.findContainingRange({columns:[h],startRow:d,endRow:u},!0);if(!f){Ci(o,r.lastCellRange),this.selectColumns(this.calculateColumnsBetween(h,p),d,u);return}this.updateRangeRowBoundary({cellRange:f,boundary:"end",cellPosition:T({column:p},u)})}else if(e.isColumn){l&&(a||!c)&&this.removeAllCellRanges(!0);let h=this.findContainingRange({columns:[e],startRow:d,endRow:u},!0),p=h?this.deselectColumnsFromRange(h,[e]):this.selectColumns([e],d,u);p&&(r.lastCellRange=p),r.root=e}else{l&&(a||!c)&&this.removeAllCellRanges(!0);let h=e.getDisplayedLeafColumns(),p=this.findContainingRange({columns:h,startRow:d,endRow:u},!0);if(p)this.deselectColumnsFromRange(p,h),r.root=h[0];else{let f=this.selectColumns(h,d,u);r.root=h[0],f&&(r.lastCellRange=f)}}}deselectColumnsFromRange(e,t){y_(e.columns,t),t.includes(e.startColumn)&&(e.startColumn=e.columns[0]),e.columns.length===0&&Ci(this.cellRanges,e),this.dispatchChangedEvent(!0,!0)}selectColumns(e,t,n){return this.addCellRange({columns:e,columnStart:e[0],columnEnd:Qe(e),rowStartIndex:t.rowIndex,rowStartPinned:t.rowPinned,rowEndIndex:n.rowIndex,rowEndPinned:n.rowPinned})}};function zK(e,t){return e!=null?{rowIndex:e,rowPinned:t}:void 0}function xLe(e){let t;for(let n of e)(t===void 0||lr(t,n))&&(t=n);return t}function ELe(e){let t;for(let n of e)(t===void 0||lr(n,t))&&(t=n);return t}function DLe(e){return Or(e)}function _Le(e,t){let{startRow:n,endRow:i}=e,r=lr(n,i)?i:n,o=t.rowIndex===r.rowIndex&&t.rowPinned===r.rowPinned,s=e.columns[0],a=Qe(e.columns),l=e.startColumn===s?a:s;return t.column===l&&o}function Q_(e,t,n){let i;n==="top"?i=!e.startRow||!e.endRow||lr(e.startRow,e.endRow)?"startRow":"endRow":i=!e.startRow||!e.endRow||lr(e.startRow,e.endRow)?"endRow":"startRow",e[i]=t??void 0}var WZ={moduleName:"CellSelection",version:Lt,beans:[SLe],dynamicBeans:{fillHandle:rLe,rangeHandle:oLe},apiFunctions:{getCellRanges:aLe,addCellRange:lLe,clearRangeSelection:GK,clearCellSelection:GK},dependsOn:[ti,Ag,L_],css:[sLe]};var ALe={tag:"div",cls:"ag-loading",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},RLe=class extends pe{constructor(){super(ALe),this.eLoadingIcon=q,this.eLoadingText=q}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){this.eLoadingText.textContent=this.getLocaleTextFunc()("loadingError","ERR")}setupLoading(){let e=$e("groupLoading",this.beans,null);e&&this.eLoadingIcon.appendChild(e),this.eLoadingText.textContent=this.getLocaleTextFunc()("loadingOoo","Loading...")}refresh(e){return!1}},FLe={moduleName:"LoadingCellRenderer",version:Lt,userComponents:{agLoadingCellRenderer:RLe},icons:{groupLoading:"loading"},dependsOn:[ti]};function MLe(e){return e.colModel.isPivotMode()}function ILe(e,t,n){return e.pivotResultCols?.lookupPivotResultCol(t,n)??null}function TLe(e,t){e.valueColsSvc?.setColumns(t,"api")}function PLe(e){return e.valueColsSvc?.columns??[]}function kLe(e,t){e.valueColsSvc?.removeColumns(t,"api")}function LLe(e,t){e.valueColsSvc?.addColumns(t,"api")}function OLe(e,t){e.pivotColsSvc?.setColumns(t,"api")}function NLe(e,t){e.pivotColsSvc?.removeColumns(t,"api")}function BLe(e,t){e.pivotColsSvc?.addColumns(t,"api")}function VLe(e){return e.pivotColsSvc?.columns??[]}function GLe(e,t){e.pivotResultCols?.setPivotResultCols(t,"api")}function HLe(e){let t=e.pivotResultCols?.getPivotResultCols();return t?t.list:null}var jK="PivotRowTotal_",zLe=({headerName:e},{headerName:t})=>e&&!t?1:!e&&t?-1:!e&&!t?0:e<t?-1:e>t?1:0,jLe=e=>(t,n)=>e(t.headerName,n.headerName),ULe=class extends K{constructor(){super(...arguments),this.beanName="pivotColDefSvc"}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.colNames=e.colNames}postConstruct(){let e=()=>this.gos.get("serverSidePivotResultFieldSeparator")??"_";this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=e()});let t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=t()})}createPivotColumnDefs(e){let t=this.createPivotColumnsFromUniqueValues(e);function n(r,o=[]){return r.forEach(s=>{s.children!==void 0?n(s.children,o):o.push(s)}),o}let i=n(t);return this.addRowGroupTotals(t,i),this.addExpandablePivotGroups(t,i),this.addPivotTotalsToGroups(t,i),t}createPivotColumnsFromUniqueValues(e){let t=this.pivotColsSvc?.columns??[],n=t.length;return this.recursivelyBuildGroup(0,e,[],n,t)}recursivelyBuildGroup(e,t,n,i,r){if(e>=i)return this.buildMeasureCols(n);let{pivotComparator:o}=r[e].getColDef(),s=o?jLe(o):zLe,a=this.valueColsSvc?.columns;if(a?.length===1&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===i-1){let c=[];for(let d of t.keys()){let u=[...n,d],h=this.createColDef(a[0],d,u);h.columnGroupShow="open",c.push(h)}return c.sort(s),c}let l=[];for(let c of t.keys()){let d=this.pivotDefaultExpanded===-1||e<this.pivotDefaultExpanded,u=[...n,c];l.push({children:this.recursivelyBuildGroup(e+1,t.get(c),u,i,r),headerName:c,pivotKeys:u,columnGroupShow:"open",openByDefault:d,groupId:this.generateColumnGroupId(u)})}return l.sort(s),l}buildMeasureCols(e){let t=this.valueColsSvc?.columns??[];return t.length===0?[this.createColDef(null,"-",e)]:t.map(n=>{let i=this.colNames.getDisplayNameForColumn(n,"header"),r=this.createColDef(n,i,e);return r.columnGroupShow="open",r})}addExpandablePivotGroups(e,t){let n=this.gos.get("suppressExpandablePivotGroups");if(n||this.gos.get("pivotColumnGroupTotals"))return;let i=(r,o,s)=>{if("children"in r){let{valueColsSvc:c}=this,{columns:d=[]}=c??{},u=new Map;r.children.forEach(f=>{i(f,o,u)});let h=!r.children.some(f=>f.children),p=h&&d.length===1&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn");for(let f of d){let g=this.colNames.getDisplayNameForColumn(f,"header"),C=this.createColDef(f,g,r.pivotKeys);C.pivotTotalColumnIds=u.get(f.getColId()),C.columnGroupShow=n?"open":"closed",C.aggFunc=f.getAggFunc(),(!h||p)&&(r.children.push(C),o.push(C))}this.merge(s,u);return}if(!r.pivotValueColumn)return;let a=r.pivotValueColumn.getColId();s.has(a)?s.get(a).push(r.colId):s.set(a,[r.colId])};e.forEach(r=>{i(r,t,new Map)})}addPivotTotalsToGroups(e,t){if(!this.gos.get("pivotColumnGroupTotals"))return;let n=this.gos.get("pivotColumnGroupTotals")==="after",i=this.valueColsSvc?.columns,r=i?.map(o=>o.getAggFunc());if(!(!r||r.length<1||!this.sameAggFuncs(r))&&i){let o=i[0];e.forEach(s=>{this.recursivelyAddPivotTotal(s,t,o,n)})}}recursivelyAddPivotTotal(e,t,n,i){let r=e;if(!r.children){let s=e;return s.colId?[s.colId]:null}let o=[];if(r.children.forEach(s=>{let a=this.recursivelyAddPivotTotal(s,t,n,i);a&&(o=o.concat(a))}),r.children.length>1){let a=this.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),l=this.createColDef(n,a,e.pivotKeys,!0);l.pivotTotalColumnIds=o,l.aggFunc=n.getAggFunc(),l.columnGroupShow=this.gos.get("suppressExpandablePivotGroups")?"open":void 0;let c=e.children;i?c.push(l):c.unshift(l),t.push(l)}return o}addRowGroupTotals(e,t){if(!this.gos.get("pivotRowTotals"))return;let n=this.gos.get("pivotRowTotals")==="after",r=(this.valueColsSvc?.columns??[]).slice();n||r.reverse();let o=r.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");for(let s=0;s<r.length;s++){let a=r[s],l=this.colNames.getDisplayNameForColumn(a,"header"),c=this.createColDef(a,l,[]),d=[];for(let h=0;h<t.length;h++){let p=t[h];p.pivotValueColumn===a&&d.push(p.colId)}c.pivotTotalColumnIds=d,c.colId=jK+c.colId;let u=o?{children:[c],pivotKeys:[],groupId:`${jK}_pivotGroup_${a.getColId()}`}:c;t.push(c),n?e.push(u):e.unshift(u)}}recreateColDef(e){let{pivotValueColumn:t,headerName:n,pivotKeys:i,pivotTotalColumnIds:r,columnGroupShow:o,colId:s,valueGetter:a,aggFunc:l}=e;if(!t)return e;let c=this.createColDef(t,n,i,!!r);return c.columnGroupShow=o,c.colId=s,c.valueGetter=a,c.aggFunc=l,c.pivotTotalColumnIds=r,this.gos.get("processPivotResultColDef")?.(c),c}createColDef(e,t,n,i=!1){let r={};if(e){let o=e.getColDef();Object.assign(r,o),r.hide=!1}return r.headerName=t,r.colId=this.generateColumnId(n||[],e&&!i?e.getColId():""),r.field=r.colId,r.valueGetter=o=>o.data?.[o.colDef.field],r.pivotKeys=n,r.pivotValueColumn=e,r.filter===!0&&(r.filter="agNumberColumnFilter"),r}sameAggFuncs(e){if(e.length==1)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}merge(e,t){t.forEach((n,i)=>{let o=[...e.has(i)?e.get(i):[],...n];e.set(i,o)})}generateColumnGroupId(e){return`pivotGroup_${(this.pivotColsSvc?.columns??[]).map(n=>n.getColId()).join("-")}_${e.join("-")}`}generateColumnId(e,t){return`pivot_${(this.pivotColsSvc?.columns??[]).map(i=>i.getColId()).join("-")}_${e.join("-")}_${t}`}createColDefsFromFields(e){let t=new Map;for(let r=0;r<e.length;r++){let s=e[r].split(this.fieldSeparator),a=t;for(let l=0;l<s.length;l++){let c=s[l],d=a.get(c);d||(d=new Map,a.set(c,d)),a=d}}let n=(r,o,s,a)=>{let l=[];for(let[u,h]of s){let p=n(`${r}${this.fieldSeparator}${u}`,u,h,a+1);l.push(p)}if(l.length===0){let u=this.colModel.getColDefCol(o);if(u){let p=this.colNames.getDisplayNameForColumn(u,"header")??o,f=this.createColDef(u,p,void 0,!1);return f.colId=r,f.aggFunc=u.getAggFunc(),f.valueGetter=g=>g.data?.[r],f}return{colId:r,headerName:o,valueGetter:p=>p.data?.[r]}}return this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&l.length===1&&"colId"in l[0]?(l[0].headerName=o,l[0]):{openByDefault:this.pivotDefaultExpanded===-1||a<this.pivotDefaultExpanded,groupId:r,headerName:o,children:l}},i=[];for(let[r,o]of t){let s=n(r,r,o,0);i.push(s)}return i}},WLe=class extends K{constructor(){super(...arguments),this.beanName="pivotResultCols"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols}destroy(){Is(this.beans,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let n=this.colModel.getColDefCol(t),i=null;for(let r of this.pivotResultCols.list){let o=r.getColDef().pivotKeys,s=r.getColDef().pivotValueColumn;Hr(o,e)&&s===n&&(i=r)}return i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.colModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.colModel.ready&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let i=(t==="api"?Uk:WW)(this.beans,e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);Is(this.beans,this.pivotResultCols?.tree,i.columnTree);let r=i.columnTree,o=i.treeDepth,s=E_(r),a={};this.pivotResultCols={tree:r,treeDepth:o,list:s,map:a};for(let c of this.pivotResultCols.list)this.pivotResultCols.map[c.getId()]=c;let l=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.colModel.refreshCols(!l,t)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.colModel.refreshCols(!1,t);this.visibleCols.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;let i=r=>{r.forEach(o=>{if(_e(o.children)){let a=o;n&&n(a),i(a.children)}else t&&t(o)})};e&&i(e)}},UK="Exceeded maximum allowed pivot column count.",aA=e=>{let t={};return e.forEach((n,i)=>t[i]=n instanceof Map?aA(n):n),t},$Le=class extends K{constructor(){super(...arguments),this.beanName="pivotStage",this.step="pivot",this.refreshProps=["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"],this.uniqueValues=new Map,this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.pivotColDefSvc=e.pivotColDefSvc}execute(e){this.colModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues=new Map,this.pivotResultCols.isPivotResultColsPresent()&&(this.pivotResultCols.setPivotResultCols(null,"rowModelUpdated"),e&&(e.active=!1))}executePivotOn(e){let t=this.valueColsSvc?.columns.length??1,n=this.gos.get("pivotMaxGeneratedColumns");this.maxUniqueValues=n===-1?-1:n/t;let i;try{i=this.bucketUpRowNodes(e)}catch(m){if(m.message===UK){this.pivotResultCols.setPivotResultCols([],"rowModelUpdated"),this.eventSvc.dispatchEvent({type:"pivotMaxColumnsExceeded",message:m.message}),this.lastTimeFailed=!0;return}throw m}let r=this.setUniqueValues(i),o=this.valueColsSvc?.columns??[],s=o.map(m=>`${m.getId()}-${m.getColDef().headerName}`).join("#"),a=o.map(m=>m.getAggFunc().toString()).join("#"),l=this.aggregationColumnsHashLastTime!==s,c=this.aggregationFuncsHashLastTime!==a;this.aggregationColumnsHashLastTime=s,this.aggregationFuncsHashLastTime=a;let d=(this.rowGroupColsSvc?.columns??[]).map(m=>m.getId()).join("#"),u=d!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=d;let h=this.gos.get("pivotRowTotals"),p=this.gos.get("pivotColumnGroupTotals"),f=this.gos.get("suppressExpandablePivotGroups"),g=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),C=h!==this.pivotRowTotalsLastTime||p!==this.pivotColumnGroupTotalsLastTime||f!==this.suppressExpandablePivotGroupsLastTime||g!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=h,this.pivotColumnGroupTotalsLastTime=p,this.suppressExpandablePivotGroupsLastTime=f,this.removePivotHeaderRowWhenSingleValueColumnLastTime=g,this.lastTimeFailed||r||l||u||c||C){let m=this.pivotColDefSvc.createPivotColumnDefs(this.uniqueValues);this.pivotResultCols.setPivotResultCols(m,"rowModelUpdated"),e&&(e.active=!1)}this.lastTimeFailed=!1}setUniqueValues(e){let t=JSON.stringify(aA(this.uniqueValues)),n=JSON.stringify(aA(e));return t!==n?(this.uniqueValues=e,!0):!1}bucketUpRowNodes(e){this.currentUniqueCount=0;let t=new Map;e.forEachChangedNodeDepthFirst(i=>{i.leafGroup&&(i.childrenMapped=null)});let n=i=>{i.leafGroup?this.bucketRowNode(i,t):i.childrenAfterFilter?.forEach(n)};return e.executeFromRootNode(n),t}bucketRowNode(e,t){let n=this.pivotColsSvc?.columns;n?.length===0?e.childrenMapped=null:e.childrenMapped=aA(this.bucketChildren(e.childrenAfterFilter,n,0,t)),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t=[],n,i){let r=new Map,o=t[n];if(e.forEach(a=>{let l=this.valueSvc.getKeyForNode(o,a);if(jt(l)&&(l=""),!i.get(l)){this.currentUniqueCount+=1,i.set(l,new Map);let c=this.maxUniqueValues!==-1,d=this.currentUniqueCount>this.maxUniqueValues;if(c&&d)throw Error(UK)}r.has(l)||r.set(l,[]),r.get(l).push(a)}),n===t.length-1)return r;let s=new Map;for(let a of r.keys())s.set(a,this.bucketChildren(r.get(a),t,n+1,i.get(a)));return s}},$Z={moduleName:"SharedPivot",version:Lt,beans:[WLe,ULe,RZ],apiFunctions:{isPivotMode:MLe,getPivotResultColumn:ILe,setValueColumns:TLe,getValueColumns:PLe,removeValueColumns:kLe,addValueColumns:LLe,setPivotColumns:OLe,removePivotColumns:NLe,addPivotColumns:BLe,getPivotColumns:VLe,setPivotResultColumns:GLe,getPivotResultColumns:HLe},dependsOn:[BZ,A5]},qLe={moduleName:"Pivot",version:Lt,rowModels:["clientSide"],beans:[$Le],dependsOn:[$Z,VZ,t1]},WK=e=>{let t=e.split(".");if(t.includes("__proto__"))return()=>{};let n=t.length;return n<2?i=>i?.[e]:i=>{let r=0;do if(i=i?.[t[r++]],r===n)return i;while(typeof i=="object")}},$a=2147483648,qa=1073741824,J_=536870912,gp=268435456,Ny=268435455,pL=String.fromCodePoint(31,41150,8291),fL=3,KLe=class extends K{constructor(){super(...arguments),this.nestedDataGetter=null,this.parentIdGetter=null,this.nonLeafsById=null,this.nodesToUnselect=null,this.fullReload=!1}postConstruct(){this.onPropChange(null)}onPropChange(e){let t=this.gos;if(!e||e.has("treeDataParentIdField")){let n=t.get("treeDataParentIdField"),i=n?WK(n):null;this.fullReload||(this.fullReload=this.parentIdGetter!==i),this.parentIdGetter=i,i&&(this.nestedDataGetter=null)}if(!e||e.has("treeDataChildrenField")){let n=this.parentIdGetter?"":t.get("treeDataChildrenField"),i=n?WK(n):null;this.fullReload||(this.fullReload=this.nestedDataGetter!==i),this.nestedDataGetter=i}}destroy(){this.nodesToUnselect=null,this.reset(),super.destroy()}reset(){this.clearNonLeafs(),this.deselectHiddenNodes(!1),this.fullReload=!0}clearNonLeafs(){let e=this.nonLeafsById;if(e){for(let t of e.values())t._destroy(!1);e.clear(),this.nonLeafsById=null}}getNonLeaf(e){return this.nonLeafsById?.get(e)}loadGroupData(e){let t=e.key;if(t==null)return e._groupData=null,null;let n={};e._groupData=n;let i=this.beans.showRowGroupCols?.columns;if(i)for(let r=0,o=i.length;r<o;++r)n[i[r].getColId()]=t;return n}execute(e,t){this.fullReload&&this.reset();let{changedRowNodes:n,changedPath:i}=t,r=i?.active?i:void 0,o=this.fullReload||!n&&!r,s=!!n&&this.flagUpdatedNodes(n);(o||s)&&(this.fullReload=!1,this.parentIdGetter?this.loadSelfRef(e,o):this.nestedDataGetter?this.loadNested(e,n,o):this.loadDataPath(e,o));let a=this.initRowsParents(e);this.destroyFillerRows(!!t.animate),this.initRowsChildrenSize(e);let l=this.preprocessRows(e),c=a||(l&$a)!==0;l&=~$a;let d=this.traverseRoot(e,r);return l>0&&l!==d&&(this.handleCycles(e),this.traverseRoot(e,r)),e.treeNodeFlags=0,this.deselectHiddenNodes(a||o),c}flagUpdatedNodes(e){let{adds:t,updates:n,removals:i}=e,r=i.length>0;if(t.size>0){r=!0;for(let o of t)o.treeNodeFlags|=qa}if(n.size>0){r=!0;for(let o of n)o.treeNodeFlags|=qa}return r}initRowsParents(e){let t=e._leafs,n=t.length,i=!1;for(let r=0;r<n;++r)this.initRowParent(t[r])&&(i=!0);return i}initRowParent(e){let t=!1;for(;;){let n=e.parent,i=e.treeParent;if(i===null){n&&(t=!0,this.hideRow(e));break}let r=i.treeNodeFlags+1,o=n!==i;if(o&&(t=!0,r|=qa,e.parent=i),o&&n&&(n.destroyed&&ZLe(i,n)&&(r|=gp),n.treeNodeFlags|=qa),i.sourceRowIndex>=0||i.treeNodeFlags&J_||i.treeParent===null){i.treeNodeFlags=r;break}i.treeNodeFlags=r|J_|e.treeNodeFlags&qa,e=i}return t}destroyFillerRows(e){let t=this.nonLeafsById;if(t){for(let n of t.values())(n.treeParent===null||(n.treeNodeFlags&Ny)===0)&&(t.delete(n.id),n._destroy(e),this.hideRow(n));t.size===0&&(this.nonLeafsById=null)}}initRowsChildrenSize(e){this.initRowChildrenSize(e);let t=e._leafs,n=t.length;for(let r=0;r<n;++r)this.initRowChildrenSize(t[r]);let i=this.nonLeafsById;if(i!==null)for(let r of i.values())this.initRowChildrenSize(r)}initRowChildrenSize(e){let{childrenAfterGroup:t,_leafs:n,treeNodeFlags:i}=e,r=t?.length,o=i&Ny;if(e.treeNodeFlags=i&~Ny|((r||0)===o?0:$a),o===0&&e.level>=0){if(t!==Cg){e.childrenAfterGroup=Cg;let s=e.sibling;s&&(s.childrenAfterGroup=Cg)}}else if(r!==o||t===n)if(!t||t===Cg||t===n){e.childrenAfterGroup=t=new Array(o);let s=e.sibling;s&&(s.childrenAfterGroup=t)}else t.length=o}preprocessRows(e){let t=e._leafs,n=t.length,i=0,r=!1;for(let o=0;o<n;++o){let s=t[o];for(;;){let a=s.treeParent;if(a===null)break;++i;let l=a.treeNodeFlags,c=a.childrenAfterGroup,d=l&Ny;if(l=l&~Ny|d+1,(l&$a||c[d]!==s)&&(l|=$a,c[d]=s,r=!0),a.treeNodeFlags=l,a.data||(a.treeNodeFlags&J_)===0||a.treeParent===null)break;a.treeNodeFlags=l&~J_|s.treeNodeFlags&qa,s=a}}return i|(r?$a:0)}traverseRoot(e,t){let n=0,i=e.childrenAfterGroup;for(let r=0,o=i.length;r<o;++r)n+=this.traverse(i[r],0,!1,t);return n&~$a}traverse(e,t,n,i){let r=e.childrenAfterGroup,o=r.length,s=e.treeNodeFlags;e.treeNodeFlags=s&gp,e.level=t,e.group!==!!o?(cZ(e,this.beans,!!o),s|=qa):e.hasChildren()!==!!o&&(e.updateHasChildren(),s|=qa),(s&(qa|$a))!==0&&i?.addParentNode(e),o!==0||e.master?(s&gp)===0&&(e.treeNodeFlags|=gp,e.expanded=t4(this.beans,e,t)):(e.expanded&&(e.expanded=!1),(s&gp)!==0&&(e.treeNodeFlags&=~gp)),n&&e.rowIndex!==null&&e.clearRowTopAndRowIndex(),n||(n=e.expanded===!1),++t,s&=$a;for(let l=0;l<o;++l){let c=r[l],d=this.traverse(c,t,n,i);s=s+(d&~$a)|d&$a}return s&$a&&(e._leafs=void 0),s+1}handleCycles(e){let t=new Set,n=o=>{if(t.has(o))return!1;t.add(o);for(let s of o.childrenAfterGroup)n(s);return!0};n(e);let i=e.childrenAfterGroup;i.length=0;let r=e._leafs;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=a.treeParent;l&&n(a)?(l.treeNodeFlags|=$a|qa,a.parent=e,Ci(l.childrenAfterGroup,a),i.push(a),X(270,{id:a.id,parentId:l?.id??""})):l===e&&i.push(a)}}loadNested(e,t,n){if(!n&&t){for(let r of t.adds)r.key=r.id;return}let i=e._leafs;for(let r=0,o=i.length;r<o;++r){let s=i[r],a=s.id;s.key!==a&&eA(s,a)}}loadSelfRef(e,t){let n=e._leafs,i=n.length;if(!this.gos.get("getRowId")){for(let a=0;a<i;a++)n[a].treeParent=null;return}let o=this.beans.rowModel,s=this.parentIdGetter;for(let a=0;a<i;a++){let l=n[a];if(t||l.treeNodeFlags&qa||l.treeParent?.destroyed){let c,d=s?.(l.data);d!=null&&(c=o.getRowNode(d),c||X(271,{id:l.id,parentId:d})),l.treeParent=c??e;let u=l.id;l.key!==u&&eA(l,u)}else l.treeParent??(l.treeParent=e)}}loadFlattened(e){let t=e._leafs;for(let n=0,i=t.length;n<i;++n){let r=t[n];r.treeParent=e;let o=r.id;r.key!==o&&eA(r,o)}}loadDataPath(e,t){let n=this.gos.get("getDataPath");if(!n){this.loadFlattened(e);return}let i=new Map,r=new Map,o;t||(o=this.loadExistingDataPath(e,i,r));let s=e._leafs;for(let a=0,l=s.length;a<l;++a){let c=s[a];if(!t&&c.treeParent!==null&&(c.treeNodeFlags&qa)===0)continue;let d=n(c.data),u=d?.length;if(!u){X(185,{data:c.data});continue}let h=d[u-1];c.key!==h&&eA(c,h);let p=d.join(pL);r.set(c,p);let f=i.get(p);f===void 0?i.set(p,c):f!==c&&(o=this.duplicatedPath(i,o,f,c,p))}o&&this.processDuplicatePaths(o,r),this.buildFromPaths(e,i,r)}loadExistingDataPath(e,t,n){let i,r=e._leafs;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=a.treeParent;if(l===null||(a.treeNodeFlags&qa)!==0)continue;let c=a.key,d=l;for(;d&&d!==e&&d!==a;){c=pL+c;let u=n.get(d);if(u!==void 0){c=u+c;break}c=d.key+c,d=d.treeParent}if(d!==a){n.set(a,c);let u=t.get(c);u===void 0?t.set(c,a):u!==a&&(i=this.duplicatedPath(t,i,u,a,c))}}return i}duplicatedPath(e,t,n,i,r){i.sourceRowIndex<n.sourceRowIndex&&e.set(r,i);let o=(t??(t=new Map)).get(r);return o===void 0?t.set(r,[n,i]):o.push(i),t}buildFromPaths(e,t,n){let i=new Array(48),r=e._leafs;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=n.get(a);if(l===void 0)continue;let c=this.splitPathKey(i,l),d=0,u=e;for(let h=c-1;h>=0;--h){let p=t.get(l.slice(0,i[h]));if(p){u=p,d=h+1;break}}d<c&&(u=this.buildMissingFillers(t,l,i,c,d,u)),a.treeParent=u}}splitPathKey(e,t){let n=0,i=0,r=t.length;for(;i<r;){let o=t.indexOf(pL,i);if(o===-1)break;e[n++]=o,i=o+fL}return n}buildMissingFillers(e,t,n,i,r,o){let s=0,a="row-group";o.sourceRowIndex<0&&o.treeParent&&(s=r,a=o.id);do{let l=r===0?0:n[r-1]+fL,c=n[r],d=t.slice(0,c),u=e.get(d);if(u===void 0){let h=l===0?d:t.slice(l,c);a=this.makeFillerIdBase(t,n,r,a,s)+h,u=this.getOrCreateFiller(h,a),e.set(d,u),s=r+1}else u.sourceRowIndex<0&&(a=u.id,s=r+1);u.treeParent=o,o=u,++r}while(r<i);return o}processDuplicatePaths(e,t){for(let n of e.values()){n.sort(YLe);let i=n.length,r=new Array(i-1);for(let s=1;s<i;++s){let a=n[s];t.delete(a),a.treeParent=null,r[s-1]=a.data}let o=n[0];X(186,{rowId:o.id,rowData:o.data,duplicateRowsData:r})}}getOrCreateFiller(e,t){let n=this.nonLeafsById??(this.nonLeafsById=new Map),i=n.get(t);return i===void 0&&(i=new ar(this.beans),i.id=t,i.key=e,i.group=!0,i.leafGroup=!1,i.rowGroupIndex=null,n.set(t,i)),i}makeFillerIdBase(e,t,n,i,r){for(;r<n;){let o=r>0?t[r-1]+fL:0,s=t[r];i+="-"+r+"-"+e.slice(o,s),++r}return i+"-"+n+"-"}deselectHiddenNodes(e){let t=this.beans.selectionSvc,n=this.nodesToUnselect,i="rowDataChanged";if(n&&(this.nodesToUnselect=null,t?.setNodesSelected({newValue:!1,nodes:n,suppressFinishActions:!0,source:i})),(n||e)&&t?.updateGroupsFromChildrenSelections?.(i),n){let r=t?.getSelectedNodes()??null;this.eventSvc.dispatchEvent({type:"selectionChanged",source:i,selectedNodes:r,serverSideState:null})}}hideRow(e){e.isSelected()&&(this.nodesToUnselect??(this.nodesToUnselect=[])).push(e),e.parent=null,e.group=!1,e.treeParent=null,e.treeNodeFlags=0,e.childrenAfterGroup=Cg,e._leafs=void 0,e._groupData=null;let t=e.sibling;t&&(t.childrenAfterGroup=Cg),e.updateHasChildren(),e.rowIndex!==null&&e.clearRowTopAndRowIndex()}onShowRowGroupColsSetChanged(){let e=this.beans.rowModel.rootNode._leafs;if(!e)return;for(let n=0,i=e.length;n<i;++n)e[n]._groupData=void 0;let t=this.nonLeafsById;if(t)for(let n of t.values())n._groupData=void 0}},YLe=(e,t)=>e.sourceRowIndex-t.sourceRowIndex,ZLe=(e,t)=>(t.treeNodeFlags&gp)!==0&&(e.treeNodeFlags&gp)===0&&e.treeParent!==null&&e.sourceRowIndex<0?(e.expanded=t.expanded,!0):!1,eA=(e,t)=>{let n=e._groupData!==void 0;e.key=t,e.groupValue=t;let i=e.sibling;i&&(i.key=t),n&&(e._groupData=void 0,e.setData(e.data))},qZ={moduleName:"SharedTreeData",version:Lt,dependsOn:[ti,e4,OZ,n4]},XLe={moduleName:"TreeData",version:Lt,dynamicBeans:{treeGroupStrategy:KLe},rowModels:["clientSide"],dependsOn:[qZ,AZ,t1,NZ]},QLe="ag-Grid-MissingKey",JLe=class extends K{constructor(){super(...arguments),this.beanName="ssrmBlockUtils"}wireBeans(e){this.valueSvc=e.valueSvc,this.showRowGroupCols=e.showRowGroupCols,this.nodeManager=e.ssrmNodeManager,this.expansionSvc=e.expansionSvc,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}createRowNode(e){let t=new ar(this.beans),n=e.rowHeight!=null?e.rowHeight:fo(this.beans);return t.setRowHeight(n),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn,t.rowGroupIndex=e.level),t}destroyRowNode(e,t=!1){e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null);let n=e.sibling;n&&!e.footer&&this.destroyRowNode(n,!1),e._destroy(!0),e.id!=null&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();let t=this.gos.get("getServerSideGroupKey"),n=e.hasChildren();n&&t!=null&&(e.key=t(e.data)),!n&&e.childStore!=null&&(this.destroyBean(e.childStore),e.childStore=null,e.master||(e.expanded=!1))}setRowGroupInfo(e){if(e.key=this.valueSvc.getValue(e.rowGroupColumn,e),(e.key===null||e.key===void 0)&&m0(()=>{X(190,{rowGroupId:e.rowGroupColumn?.getId(),data:e.data})},"SSBlock-BadKey"),this.gos.get("groupAllowUnbalanced")&&e.key===""){let r=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(r,e))}kd(this.beans.gos)({node:e})&&(Uu(e,this.beans),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){let t=this.gos.get("isRowMaster");t!=null?e.master=t(e.data):e.master=!0}updateDataIntoRowNode(e,t){e.updateData(t),this.gos.get("treeData")?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e),this.updateRowFooter(e)):e.group?(this.setChildCountIntoRowNode(e),this.updateRowFooter(e)):this.gos.get("masterDetail")}updateRowFooter(e){if(!e.footer){if(e.group&&kd(this.beans.gos)({node:e})&&!e.sibling){Uu(e,this.beans);return}e.sibling&&JL(e)}}setDataIntoRowNode(e,t,n,i){e.stub=!1;let r=this.gos.get("treeData");e.setDataAndId(t,n);let o=e.group;(r||!o)&&this.gos.get("masterDetail")&&this.setMasterDetailInfo(e),r?this.setTreeGroupInfo(e):o&&this.setRowGroupInfo(e),(r||o)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),_e(t)&&(e.setRowHeight(Nr(this.beans,e,!1,i).height),e.sibling?.setRowHeight(Nr(this.beans,e.sibling,!1,i).height))}setChildCountIntoRowNode(e){let t=this.gos.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){let t=e.key;e.groupValue=t,e.sibling&&(e.sibling.groupValue=t);let n=this.showRowGroupCols?.columns;if(!n)return;let i=this.gos.get("treeData");for(let r of n){let o=e._groupData;if(o||(o={},e._groupData=o),i)o[r.getColId()]=t;else if(r.isRowGroupDisplayed(e.rowGroupColumn.getId())){let s=this.valueSvc.getValue(e.rowGroupColumn,e);o[r.getColId()]=s}}}clearDisplayIndex(e){e.clearRowTopAndRowIndex(),e.hasChildren()&&!!e.childStore&&e.childStore?.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode?.clearRowTopAndRowIndex()}setDisplayIndex(e,t,n,i){let r=this.gos.get("groupAllowUnbalanced")&&e.group&&e.key==="";if(this.gos.get("groupHideOpenParents")&&e.group&&e.expanded||r?(e.setRowIndex(null),e.setRowTop(null)):(e.setRowIndex(t.value++),e.setRowTop(n.value),n.value+=e.rowHeight),e.setUiLevel(i),e.footer)return;if(e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.value++),e.detailNode.setRowTop(n.value),n.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.hasChildren()&&!!e.childStore){let l=e.childStore;e.expanded||r?l.setDisplayIndexes(t,n,r?i:i+1):l.clearDisplayIndexes()}}extractRowBounds(e,t){let n=i=>({rowHeight:i.rowHeight,rowTop:i.rowTop});if(e.rowIndex===t)return n(e);if(e.hasChildren()&&e.expanded&&e.childStore){let i=e.childStore;if(i.isDisplayIndexInStore(t))return i.getRowBounds(t)}else if(e.master&&e.expanded&&e.detailNode&&e.detailNode.rowIndex===t)return n(e.detailNode)}isPixelInNodeRange(e,t){return!_e(e.rowTop)||!_e(e.rowHeight)?!1:t>=e.rowTop&&t<e.rowTop+e.rowHeight}getIndexAtPixel(e,t){if(this.isPixelInNodeRange(e,t))return e.rowIndex;let n=e.master&&e.expanded,i=e.detailNode;if(n&&i&&this.isPixelInNodeRange(i,t))return i.rowIndex;if(e.hasChildren()&&e.expanded&&e.childStore){let r=e.childStore;if(r.isPixelInRange(t))return r.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){let t=[],n=e;for(;n&&n.level>=0;)n.key===""?t.push(QLe):t.push(n.key),n=n.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){let t=!!this.expansionSvc?.isNodeExpanded(e),n=e.expanded;!!n!==t?e.setExpanded(t):n===void 0&&(e.expanded=t)}},e4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmExpandListener"}postConstruct(){Ui(this.gos)&&this.addManagedEventListeners({rowExpansionStateChanged:this.onRowExpandStateChanged.bind(this)})}onRowExpandStateChanged(){let e=this.beans,t=e.expansionSvc;e.rowModel.forEachNode(n=>{t.updateExpandedState(n)}),this.eventSvc.dispatchEvent({type:"storeUpdated"})}},t4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmFilterListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.filterManager=e.filterManager,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){Ui(this.gos)&&this.addManagedEventListeners({advancedFilterEnabledChanged:()=>this.onFilterChanged(!0),filterChanged:()=>this.onFilterChanged()})}onFilterChanged(e){let t=this.serverSideRowModel.getParams();if(!t)return;let n=t.filterModel,i,r;if(this.filterManager?.isAdvFilterEnabled()){i=this.filterManager.getAdvFilterModel();let l=e?Object.keys(n??{}):this.getAdvancedFilterColumns(n),c=this.getAdvancedFilterColumns(i);for(let d of l)c.add(d);r=Array.from(c)}else if(i=this.filterManager?.getFilterModel()??{},e){let l=this.getAdvancedFilterColumns(n);for(let c of Object.keys(i))l.add(c);r=Array.from(l)}else r=this.findChangedColumns(n,i);let o=this.listenerUtils.isSortingWithValueColumn(r),s=this.listenerUtils.isSortingWithSecondaryColumn(r),a={valueColChanged:o,secondaryColChanged:s,changedColumns:r};this.serverSideRowModel.refreshAfterFilter(i,a)}findChangedColumns(e,t){let n={};for(let r of Object.keys(e))n[r]=!0;for(let r of Object.keys(t))n[r]=!0;let i=[];for(let r of Object.keys(n)){let o=JSON.stringify(e[r]),s=JSON.stringify(t[r]);o!=s&&i.push(r)}return i}getAdvancedFilterColumns(e){let t=new Set;if(!e)return t;let n=i=>{if(i.filterType==="join")for(let r of i.conditions)n(r);else t.add(i.colId)};return n(e),t}},n4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmListenerUtils"}wireBeans(e){this.pivotResultCols=e.pivotResultCols,this.valueColsSvc=e.valueColsSvc}isSortingWithValueColumn(e){let t=(this.valueColsSvc?.columns??[]).map(n=>n.getColId());for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){let t=this.pivotResultCols?.getPivotResultCols();if(!t)return!1;let n=t.list.map(i=>i.getColId());for(let i=0;i<e.length;i++)if(n.indexOf(e[i])>-1)return!0;return!1}},i4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmSortSvc"}wireBeans(e){this.sortSvc=e.sortSvc,this.serverSideRowModel=e.rowModel,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){Ui(this.gos)&&this.addManagedEventListeners({sortChanged:this.onSortChanged.bind(this)})}onSortChanged(){let e=this.serverSideRowModel.getParams();if(!e)return;let t=this.sortSvc.getSortModel(),n=e.sortModel,i=this.findChangedColumnsInSort(t,n),r=this.listenerUtils.isSortingWithValueColumn(i),o=this.listenerUtils.isSortingWithSecondaryColumn(i),s={valueColChanged:r,secondaryColChanged:o,changedColumns:i};this.serverSideRowModel.refreshAfterSort(t,s)}findChangedColumnsInSort(e,t){let n=[];for(let o of[e,t])if(o){let s=o.map(a=>a.colId);n=n.concat(s)}let i=(o,s)=>{let a=o?o.sort:null,l=s?s.sort:null;return a!==l},r=(o,s)=>{let a=o?t.indexOf(o):-1,l=s?e.indexOf(s):-1;return a!==l};return n.filter(o=>{let s=t.find(l=>l.colId===o),a=e.find(l=>l.colId===o);return i(s,a)||r(s,a)})}},r4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmNodeManager",this.rowNodes=new Map}addRowNode(e){let t=e.id;this.rowNodes.has(t)&&X(187,{rowId:t,firstData:this.rowNodes.get(t).data,secondData:e.data}),this.rowNodes.set(t,e)}removeNode(e){let t=e.id;this.rowNodes.delete(t)}destroy(){this.clear(),super.destroy()}clear(){this.rowNodes.clear(),super.destroy()}},o4e=class extends K{constructor(){super(...arguments),this.beanName="rowModel",this.started=!1,this.managingPivotResultColumns=!1,this.onRowHeightChanged_debounced=$n(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.filterManager=e.filterManager,this.sortSvc=e.sortSvc,this.rowRenderer=e.rowRenderer,this.nodeManager=e.ssrmNodeManager,this.storeFactory=e.ssrmStoreFactory,this.pivotColDefSvc=e.pivotColDefSvc}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}postConstruct(){let e=this.resetRootStore.bind(this);this.addManagedEventListeners({newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onStoreUpdated.bind(this),columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","cacheBlockSize"],e),this.addManagedPropertyListeners(["groupAllowUnbalanced","groupTotalRow"],()=>this.onStoreUpdated()),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights()),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",()=>this.updateDatasource())}updateDatasource(){let e=this.gos.get("serverSideDatasource");e&&this.setDatasource(e)}verifyProps(){ss(this.gos)&&!this.gos.exists("getRowId")&&X(188,{feature:"selection"})}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}applyRowData(e,t,n){let i=this.getRootStore();if(!i)return;let r=i.getChildStore(n);r&&r.applyRowData(e,t,e.rowData.length)}isLastRowIndexKnown(){let e=this.getRootStore();return e?e.isLastRowIndexKnown():!1}onColumnEverything(){if(!this.storeParams){this.resetRootStore();return}let e=this.columnsToValueObjects(this.rowGroupColsSvc?.columns),t=this.columnsToValueObjects(this.valueColsSvc?.columns),n=this.columnsToValueObjects(this.pivotColsSvc?.columns),i=c=>{let d={};for(let p of c.oldCols)d[p.id]=p;let u=c.newCols.every(p=>{let f=d[p.id];return f&&delete d[p.id],f&&f.field===p.field&&f.aggFunc===p.aggFunc}),h=!c.allowRemovedColumns&&!!Object.values(d).length;return u&&!h},r=!Pu(this.storeParams.sortModel,this.sortSvc?.getSortModel()??[]),o=!i({oldCols:this.storeParams.rowGroupCols,newCols:e}),s=!i({oldCols:this.storeParams.pivotCols,newCols:n}),a=!!e?.length&&!i({oldCols:this.storeParams.valueCols,newCols:t,allowRemovedColumns:!0});if(r||o||s||a)this.resetRootStore();else{let c=this.createStoreParams();this.storeParams.rowGroupCols=c.rowGroupCols,this.storeParams.pivotCols=c.pivotCols,this.storeParams.valueCols=c.valueCols}}destroyRootStore(){this.rootNode?.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);let n=this.getRootStore();n&&(n.refreshAfterSort(t),this.onStoreUpdated())}generateSecondaryColumns(e){if(!this.pivotColDefSvc){this.gos.assertModuleRegistered("SharedPivot",2);return}let t=this.pivotColDefSvc.createColDefsFromFields(e);this.managingPivotResultColumns=!0,this.pivotResultCols?.setPivotResultCols(t,"rowModelUpdated")}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes(),t=Nr(this.beans,this.rootNode);if(this.rootNode.setRowHeight(t.height,t.estimated),this.rootNode.sibling){let n=Nr(this.beans,this.rootNode.sibling);this.rootNode.sibling.setRowHeight(n.height,n.estimated)}e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{let n=Nr(this.beans,t);t.setRowHeight(n.height,n.estimated);let i=t.detailNode;if(i){let r=Nr(this.beans,i);i.setRowHeight(r.height,r.estimated)}if(t.sibling){let r=Nr(this.beans,t.sibling);i?.setRowHeight(r.height,r.estimated)}e=!0}),e}resetRootStore(){this.destroyRootStore(),this.rootNode=new ar(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.pivotResultCols?.setPivotResultCols(null,"api"),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)}columnsToValueObjects(e=[]){return e.map(t=>({id:t.getId(),aggFunc:t.getAggFunc(),displayName:this.colNames.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}))}createStoreParams(){let e=this.columnsToValueObjects(this.rowGroupColsSvc?.columns),t=this.columnsToValueObjects(this.valueColsSvc?.columns),n=this.columnsToValueObjects(this.pivotColsSvc?.columns),i=m_(this.gos);return{valueCols:t,rowGroupCols:e,pivotCols:n,pivotMode:this.colModel.isPivotMode(),filterModel:this.filterManager?.isAdvFilterEnabled()?this.filterManager?.getAdvFilterModel():this.filterManager?.getFilterModel()??{},sortModel:this.sortSvc?.getSortModel()??[],datasource:this.datasource,lastAccessedSequence:{value:0},dynamicRowHeight:i}}getParams(){return this.storeParams}dispatchModelUpdated(e=!1){this.eventSvc.dispatchEvent({type:"modelUpdated",animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})}onStoreUpdated(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){let e=this.getRootStore();e&&e.setDisplayIndexes({value:0},{value:0},0)}retryLoads(){let e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){let t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);let n=this.getRootStore();n&&(n.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){return this.rootNode?.childStore}getRowCount(){let e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){let e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){let t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){let t=this.getRootStore();return t?t.getRowBounds(e):{rowTop:0,rowHeight:fo(this.beans)}}getBlockStates(){let e=this.getRootStore();if(!e)return;let t={};return e.forEachStoreDeep(n=>{let i=n.getBlockStates();for(let r of Object.keys(i))t[r]=i[r]}),t}getRowIndexAtPixel(e){let t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}getOverlayType(){return this.getRootStore()?.getDisplayIndexEnd()===0?this.filterManager?.isAnyFilterPresent()?"noMatchingRows":"noRows":null}isRowsToRender(){return this.getRootStore()!=null&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){let t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachDisplayedNode(e){let t=(n,i)=>{n.stub||!n.displayed||e(n,i)};this.forEachNode(t)}forEachNodeAfterFilterAndSort(e,t=!1){let n=this.getRootStore();n&&n.forEachNodeDeepAfterFilterAndSort(e,void 0,t)}executeOnStore(e,t){if(!this.started)return!1;let n=this.getRootStore();if(!n)return!0;let i=n.getChildStore(e);return i&&t(i),!0}refreshStore(e={}){let t=e.route?e.route:[];this.executeOnStore(t,n=>n.refreshStore(e.purge==!0))}getStoreState(){let e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){let n=e.rowIndex,i=t.rowIndex;if(n===null&&i===null)return[];if(i===null)return e?[e]:[];if(n===null)return[t];let r=[],[o,s]=[n,i].sort((a,l)=>a-l);return this.forEachNode(a=>{let l=a.rowIndex;l==null||a.stub||l>=o&&l<=s&&r.push(a)}),r.length!==s-o+1?null:r}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n),n.detailNode&&n.detailNode.id===e&&(t=n.detailNode)}),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){let n=this.getRootStore();n&&n.setRowCount(e,t)}destroy(){this.destroyDatasource(),this.destroyRootStore(),super.destroy()}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function s4e(e){return e.selectionSvc?.getSelectionState()??null}function a4e(e,t){e.selectionSvc?.setSelectionState(t,"api")}function l4e(e,t){return e.ssrmTxnManager?.applyTransaction(t)}function c4e(e,t){let n=t.startRow??0,i=t.route??[];if(n<0){X(189,{startRow:n});return}R0(e)?.applyRowData(t.successParams,n,i)}function d4e(e,t,n){return e.ssrmTxnManager?.applyTransactionAsync(t,n)}function u4e(e){R0(e)?.retryLoads()}function h4e(e){return e.ssrmTxnManager?.flushAsyncTransactions()}function p4e(e,t){R0(e)?.refreshStore(t)}function f4e(e){return R0(e)?.getStoreState()??[]}var gL=class extends K{constructor(){super(...arguments),this.name="expand",this.expanded=new Set,this.collapsed=new Set,this.initialState=new Map}setExpandedState({expandedRowGroupIds:e,collapsedRowGroupIds:t}){this.expanded=new Set(e),this.collapsed=new Set(t);for(let n of this.expanded)this.initialState.set(n,!1);for(let n of this.collapsed)this.initialState.set(n,!0)}getExpandedState(){return{expandedRowGroupIds:Array.from(this.expanded),collapsedRowGroupIds:Array.from(this.collapsed)}}setRowExpanded(e,t){let n=e.id,i=this.initialState.get(n)===t;if(t){this.collapsed.delete(n),i||this.expanded.add(n);return}this.expanded.delete(n),i||this.collapsed.add(n)}isRowExpanded(e){let t=e.id;if(this.expanded.has(t))return!0;if(this.collapsed.has(t))return!1;let n=this.initialState.get(t);if(n!=null)return n;let i=this.getInitialRowState(e);return this.initialState.set(t,i),i}getInitialRowState(e){if(!e.isExpandable())return!1;let t=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!t)return!1;let n={data:e.data,rowNode:e};return t(n)}isRowInitialised(e){return this.initialState.has(e)}expandAll(e){this.beans.rowModel.forEachNode(t=>{this.setRowExpanded(t,e)})}},$K=class extends K{constructor(){super(...arguments),this.name="expandAll",this.allExpanded=void 0,this.flipped=new Set}setExpandedState(e){this.allExpanded=e.expandAll,this.flipped=new Set(e.invertedRowGroupIds)}getExpandedState(){return{expandAll:this.allExpanded,invertedRowGroupIds:Array.from(this.flipped)}}setRowExpanded(e,t){let n=e.id;if(t===this.allExpanded){this.flipped.delete(n);return}this.flipped.add(n)}isRowExpanded(e){let t=e.id;return this.allExpanded!==this.flipped.has(t)}isRowInitialised(){return!0}expandAll(e){this.allExpanded=e,this.flipped.clear()}},g4e=class extends FZ{constructor(){super(...arguments),this.beanName="expansionSvc"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}postConstruct(){let e=()=>{this.strategy=this.createManagedBean(new gL)};this.addManagedEventListeners({columnRowGroupChanged:e,columnPivotChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListener("ssrmExpandAllAffectsAllRows",t=>{t.currentValue||(this.strategy=this.createManagedBean(new gL),this.updateAllNodes(),this.dispatchStateUpdatedEvent())}),e()}setExpansionState(e){let t="expandAll"in e,n=this.isExpandAllStrategy(this.strategy);t!==n&&(this.strategy=t?this.createManagedBean(new $K):this.createManagedBean(new gL)),this.strategy.setExpandedState(e),this.dispatchStateUpdatedEvent(),this.updateAllNodes()}getExpansionState(){return this.strategy.getExpandedState()}updateAllNodes(){this.serverSideRowModel.forEachNode(e=>{super.setExpanded(e,this.isNodeExpanded(e))})}isNodeExpanded(e){return this.strategy.isRowExpanded(e)}setExpanded(e,t,n,i){this.strategy.setRowExpanded(e,t),super.setExpanded(e,t,n),this.dispatchStateUpdatedEvent(),this.updateExpandedState(e)}expandAll(e){let t=this.beans.gos.get("ssrmExpandAllAffectsAllRows"),n=!this.isExpandAllStrategy(this.strategy)&&t;this.strategy=n?new $K:this.strategy,this.strategy.expandAll(e),this.updateAllNodes(),this.dispatchStateUpdatedEvent(),this.beans.eventSvc.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}isExpandAllStrategy(e){return e.name==="expandAll"}onGroupExpandedOrCollapsed(){}setDetailsExpansionState(e){let{gos:t}=this.beans;if(!t.get("ssrmExpandAllAffectsAllRows"))return;let n=this.getExpansionState();if(n.expandAll===void 0)return;let r=n.expandAll&&n.invertedRowGroupIds.length===0;if((!n.expandAll&&n.invertedRowGroupIds.length===0)!==r)return r?e.expandAll():e.collapseAll()}dispatchExpandedEvent(e){this.eventSvc.dispatchEvent(e),this.beans.rowRenderer.refreshCells({rowNodes:[e.node]})}updateExpandedState(e){let t=e.childStore;if(e.expanded){if(e.master&&!e.detailNode&&(e.detailNode=this.createDetailNode(e)),!t&&e.hasChildren()){let n=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(n,e))}}else t&&this.gos.get("purgeClosedRowNodes")&&(e.childStore=this.destroyBean(t))}createDetailNode(e){let t=new ar(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,_e(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;let n=200,i=Nr(this.beans,t).height;return t.rowHeight=i||n,t}},mL=class extends K{constructor(e){super(),this.selectionCtx=e,this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectAllUsed=!1,this.selectedNodes={}}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){if(typeof e!="object"){mt(116);return}if(!("selectAll"in e)){mt(116);return}if(typeof e.selectAll!="boolean"){mt(117);return}if(!("toggledNodes"in e)||!Array.isArray(e.toggledNodes))return X(197);let t={selectAll:e.selectAll,toggledNodes:new Set};e.toggledNodes.forEach(i=>{typeof i=="string"?t.toggledNodes.add(i):X(196,{key:i})});let n=t.selectAll||t.toggledNodes.size>1;if(py(this.gos)&&!Ml(this.gos)&&n){X(130);return}this.selectedState=t}deleteSelectionStateFromParent(e,t){if(this.selectedState.toggledNodes.size===0)return!1;let n=!1;for(let i of t)this.selectedState.toggledNodes.delete(i)&&(n=!0);return n}setNodesSelected(e){let{nodes:t,clearSelection:n,newValue:i,source:r}=e;if(t.length===0)return 0;let o=n&&i;if(!Ml(this.gos)||o){if(t.length>1)return mt(130),0;let a=t[0],l=a.footer?a.sibling:a;return i&&l.selectable?(this.selectedNodes={[l.id]:l},this.selectedState={selectAll:!1,toggledNodes:new Set([l.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),1}let s=(a,l=i)=>{let c=a.footer?a.sibling:a;l&&c.selectable?this.selectedNodes[c.id]=c:delete this.selectedNodes[c.id],l===this.selectedState.selectAll||!c.selectable?this.selectedState.toggledNodes.delete(c.id):this.selectedState.toggledNodes.add(c.id)};for(let a of t)s(a);return t.length===1&&r==="api"&&this.selectionCtx.setRoot(t[0].footer?t[0].sibling:t[0]),1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){let t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(e=!1,t=!0){let{selectedState:{selectAll:n},selectedNodes:i,selectAllUsed:r}=this;return t&&r&&X(199),e&&n?null:Object.values(i)}getSelectedRows(){return(this.getSelectedNodes()??[]).map(e=>e.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}isEmpty(){return!this.selectedState.selectAll&&!this.selectedState.toggledNodes?.size}selectAllRowNodes(){this.reset(!0)}deselectAllRowNodes(){this.reset(!1)}reset(e){this.selectedState={selectAll:e,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed||(this.selectAllUsed=e)}getSelectAllState(){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}},tA=class extends K{constructor(e){super(),this.selectionCtx=e,this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}wireBeans(e){this.rowModel=e.rowModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.filterManager=e.filterManager,this.selectionSvc=e.selectionSvc}postConstruct(){this.addManagedEventListeners({modelUpdated:()=>this.removeRedundantState(),columnRowGroupChanged:()=>this.selectionSvc.reset("rowGroupChanged")})}getSelectedState(){let{gos:e,rowGroupColsSvc:t,selectedState:n}=this,i=e.get("treeData"),r=(o,s,a)=>{let l={nodeId:a};if((i||t&&s<=t.columns.length)&&(l.selectAllChildren=o.selectAllChildren),o.toggledNodes.size){let c=[];o.toggledNodes.forEach((d,u)=>{let h=r(d,s+1,u);c.push(h)}),l.toggledNodes=c}return l};return r(n,0)}setSelectedState(e){if("selectAll"in e){mt(111);return}let t=(n,i)=>{if(typeof n!="object")throw mt(243),new Error;if("selectAllChildren"in n&&typeof n.selectAllChildren!="boolean")throw mt(244),new Error;if("toggledNodes"in n){if(!Array.isArray(n.toggledNodes))throw mt(245),new Error;if(!n.toggledNodes.every(l=>typeof l=="object"&&"nodeId"in l&&typeof l.nodeId=="string"))throw mt(246),new Error}let r=n.selectAllChildren??!i,o=n.toggledNodes?.map(a=>[a.nodeId,t(a,r)]);if(o?.some(([,a])=>r===a.selectAllChildren&&a.toggledNodes.size===0))throw mt(247),new Error;return{selectAllChildren:r,toggledNodes:new Map(o)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch{}}deleteSelectionStateFromParent(e,t){let n=this.selectedState,i=[...e];for(;n&&i.length;)n=n.toggledNodes.get(i.pop());if(!n)return!1;let r=!1;for(let o of t)n?.toggledNodes.delete(o)&&(r=!0);return r&&this.removeRedundantState(),r}setNodesSelected({nodes:e,newValue:t,clearSelection:n,source:i}){if(e.length===0)return 0;let r=n&&t;if(!Ml(this.gos)||r){if(e.length>1)return mt(130),0;this.deselectAllRowNodes()}for(let o of e){let s=o.footer?o.sibling:o,a=this.getRouteToNode(s);this.recursivelySelectNode(a,this.selectedState,t)}return this.removeRedundantState(),e.length===1&&i==="api"&&this.selectionCtx.setRoot(e[0].footer?e[0].sibling:e[0]),1}isNodeSelected(e){let t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected([e,...t],n){if(t.length===0){let i=n.toggledNodes.has(e.id);return e.hasChildren()&&n.toggledNodes.get(e.id)?.toggledNodes.size?void 0:n.selectAllChildren?!i:i}if(n.toggledNodes.has(e.id)){let i=n.toggledNodes.get(e.id);if(i)return this.isNodePathSelected(t,i)}return n.selectAllChildren}getRouteToNode(e){let t=[],n=e;for(;n.parent;)t.push(n),n=n.parent;return t.reverse()}removeRedundantState(){if(this.filterManager?.isAnyFilterPresent())return;let e=(t=this.selectedState,n,i)=>{if(t.toggledNodes.forEach((s,a)=>{e(s,a,t)}),n){let a=this.rowModel.getRowNode(n)?.childStore;if(a?.isLastRowIndexKnown()&&t.toggledNodes.size>=a.getRowCount()){for(let d of t.toggledNodes.entries()){let[u,h]=d;if(h.toggledNodes.size>0||!this.rowModel.getRowNode(u))return}t.selectAllChildren=!t.selectAllChildren,t.toggledNodes.clear()}}let r=t.toggledNodes.size===0,o=i?.selectAllChildren===t.selectAllChildren;r&&o&&i?.toggledNodes.delete(n)};e()}recursivelySelectNode([e,...t],n,i){if(!e)return;if(!t.length){let a=e.selectable;if(n.selectAllChildren===i||!a){n.toggledNodes.delete(e.id);return}let c={selectAllChildren:i,toggledNodes:new Map};n.toggledNodes.set(e.id,c);return}let o=n.toggledNodes.has(e.id),s=n.toggledNodes.get(e.id)??{selectAllChildren:n.selectAllChildren,toggledNodes:new Map};o||n.toggledNodes.set(e.id,s),this.recursivelySelectNode(t,s,i),n.selectAllChildren===s.selectAllChildren&&s.toggledNodes.size===0&&n.toggledNodes.delete(e.id)}getSelectedNodes(e=!1){if(X(202),this.selectedState.selectAllChildren&&e)return null;let t=[];return this.rowModel.forEachNode(n=>{n.isSelected()&&t.push(n)}),t}processNewRow(){}getSelectedRows(){return this.getSelectedNodes()?.map(e=>e.data)??[]}getSelectionCount(){return-1}isEmpty(){return!this.selectedState.selectAllChildren&&!this.selectedState.toggledNodes?.size}selectAllRowNodes(){this.reset(!0)}deselectAllRowNodes(){this.reset(!1)}reset(e){this.selectedState={selectAllChildren:e,toggledNodes:new Map}}getSelectAllState(){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}},m4e=class extends E5{constructor(){super(...arguments),this.beanName="selectionSvc"}postConstruct(){super.postConstruct(),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{let n=np(this.gos),i=n&&this.selectionStrategy instanceof mL?tA:!n&&this.selectionStrategy instanceof tA?mL:void 0;i&&(this.destroyBean(this.selectionStrategy),this.selectionStrategy=this.createManagedBean(new i(this.selectionCtx)),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}),this.addManagedPropertyListeners(["rowSelection"],()=>{let n=ug(this.gos);n!==this.selectionMode&&(this.selectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.selectionMode=ug(this.gos);let t=np(this.gos)?tA:mL;this.selectionStrategy=this.createManagedBean(new t(this.selectionCtx))}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;let i=0,r=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);return r==null?0:(this.selectionCtx.selectAll=!1,"select"in r?(r.reset?this.selectionStrategy.deselectAllRowNodes({source:"api"}):this.selectionStrategy.setNodesSelected({nodes:r.deselect,newValue:!1,source:n}),i=this.selectionStrategy.setNodesSelected({nodes:r.select,newValue:!0,source:n})):i=this.selectionStrategy.setNodesSelected({nodes:[r.node],newValue:r.newValue,clearSelection:r.clearSelection,event:e,source:n}),this.shotgunResetNodeSelectionState(n),this.dispatchSelectionChanged(n),i)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(e,t){if(!ss(this.gos)){e&&X(132);return}Array.isArray(e)||(e?(this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged(t)):this.deselectAllRowNodes({source:t}))}setNodesSelected(e){if(!ss(this.gos)&&e.newValue)return X(132),0;let o=e,{nodes:t}=o,n=so(o,["nodes"]);if(t.length>1&&this.selectionMode!=="multiRow")return X(130),0;let i=T({nodes:t.filter(s=>s.selectable)},n);if(!i.nodes.length)return 0;let r=this.selectionStrategy.setNodesSelected(i);return this.shotgunResetNodeSelectionState(i.source),this.dispatchSelectionChanged(i.source),r}deleteSelectionStateFromParent(e,t){this.selectionStrategy.deleteSelectionStateFromParent(e,t)&&(this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}shotgunResetNodeSelectionState(e){this.beans.rowModel.forEachNode(t=>{if(t.stub)return;let n=this.selectionStrategy.isNodeSelected(t);n!==t.isSelected()&&this.selectRowNode(t,n,void 0,e)})}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()??[]}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e){this.selectionStrategy.processNewRow(e);let t=this.selectionStrategy.isNodeSelected(e);if(t!=!1&&!e.selectable){this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api");return}e.__selected=t}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"}),this.selectionCtx.reset()}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(){return!0}selectAllRowNodes(e){if(!ss(this.gos)){X(132);return}if(qK(e),py(this.gos)&&!Ml(this.gos))return X(130);this.selectionStrategy.selectAllRowNodes(e),this.selectionCtx.selectAll=!0,this.beans.rowModel.forEachNode(t=>{t.stub||this.selectRowNode(t,!0,void 0,e.source)}),this.dispatchSelectionChanged(e.source)}deselectAllRowNodes(e){qK(e),this.selectionStrategy.deselectAllRowNodes(e),this.selectionCtx.selectAll=!1,this.beans.rowModel.forEachNode(t=>{t.stub||this.selectRowNode(t,!1,void 0,e.source)}),this.dispatchSelectionChanged(e.source)}getSelectAllState(e){return this.selectionStrategy.getSelectAllState(e)}getBestCostNodeSelection(){return X(194,{method:"getBestCostNodeSelection"})}updateSelectable(){if(!ss(this.gos))return;let e=[];this.beans.rowModel.forEachNode(t=>{!this.updateRowSelectable(t,!0)&&t.isSelected()&&e.push(t)}),e.length&&this.setNodesSelected({nodes:e,newValue:!1,source:"selectableChanged"})}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.selectionStrategy instanceof tA?null:this.selectionStrategy.getSelectedNodes(!0,!1),serverSideState:this.getSelectionState()})}updateSelectableAfterGrouping(){return mt(194,{method:"updateSelectableAfterGrouping"})}refreshMasterNodeState(){}setDetailSelectionState(){}};function qK({selectAll:e}){(e==="filtered"||e==="currentPage")&&X(195,{justCurrentPage:e==="currentPage"})}var v4e=class extends K{constructor(){super(...arguments),this.beanName="rowChildrenSvc"}getHasChildrenValue(e){let t=this.gos.get("treeData"),n=this.gos.get("isServerSideGroup");return!e.stub&&!e.footer&&(t?!!n&&n(e.data):!!e.group)}},C4e=class extends K{constructor(){super(...arguments),this.beanName="lazyBlockLoadingSvc",this.outboundRequests=0,this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}wireBeans(e){this.rowRenderer=e.rowRenderer,this.rowModel=e.rowModel}postConstruct(){this.maxOutboundRequests=Gk(this.gos)}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,setTimeout(()=>{this.queueLoadAction(),this.isCheckQueued=!1}))}onLoadComplete(){this.outboundRequests-=1,this.queueLoadCheck()}hasAvailableLoadBandwidth(){return this.maxOutboundRequests===void 0?!0:this.outboundRequests<this.maxOutboundRequests}queueLoadAction(){let e=this.getBlockToLoad();if(!e)return;let t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);let n=Number(this.nextBlockToLoad.index),i=this.nextBlockToLoad.cache,r=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout(()=>{i.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(i,n,r),this.nextBlockToLoad=void 0)},this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,n){this.hasAvailableLoadBandwidth()&&(this.executeLoad(e,t,n),this.queueLoadCheck())}executeLoad(e,t,n){let i=e.getSsrmParams(),r={startRow:t,endRow:n,rowGroupCols:i.rowGroupCols,valueCols:i.valueCols,pivotCols:i.pivotCols,pivotMode:i.pivotMode,groupKeys:e.store.getParentNode().getRoute()??[],filterModel:i.filterModel,sortModel:i.sortModel},o=this.cacheLoadingNodesMap.get(e),s=()=>{for(let u=0;u<n-t;u++)o.delete(t+u)},a=()=>{for(let u=0;u<n-t;u++)o.add(t+u)},l=u=>{this.onLoadComplete(),e.onLoadSuccess(t,n-t,u),s()},c=()=>{this.onLoadComplete(),e.onLoadFailed(t,n-t),s()},d=Oe(this.gos,{request:r,success:l,fail:c,parentNode:e.store.getParentNode()});a(),this.outboundRequests+=1,e.getSsrmParams().datasource?.getRows(d)}getBlockToLoad(){let e=this.rowRenderer.firstRenderedRow,t=this.rowRenderer.lastRenderedRow;for(let a=e;a<=t;a++){let l=this.rowModel.getRow(a);if(!l)continue;let c=l.parent?.childStore;if(!c)continue;let d=c.getCache(),u=d.getNodes().getBy("node",l);if(!(!u||this.cacheLoadingNodesMap.get(d)?.has(u.index))&&(l.__needsRefreshWhenVisible||l.stub&&!l.failedLoad))return{cache:d,index:d.getBlockStartIndex(u.index)}}let n=null,i=null,r=Number.MAX_SAFE_INTEGER;for(let a of this.cacheLoadingNodesMap.keys())a.getNodesToRefresh().forEach(c=>{if(c.rowIndex==null){i=c,n=a;return}let d=a.getNodes().getBy("node",c);if(!d||this.cacheLoadingNodesMap.get(a)?.has(d.index))return;let h=Math.abs(e-c.rowIndex),p=Math.abs(c.rowIndex-t);h<r&&(i=c,r=h,n=a),p<r&&(i=c,r=p,n=a)});if(!n)return;let o=n,s=o.getNodes().getBy("node",i)?.index;return s==null?void 0:{cache:o,index:o.getBlockStartIndex(s)}}isRowLoading(e,t){return this.cacheLoadingNodesMap.get(e)?.has(t)??!1}},b4e=class{constructor(...e){this.indexes=e,this.maps=new Map(this.indexes.map(t=>[t,new Map]))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(e,t){return this.maps.get(e).get(t)}set(e){for(let t of this.indexes)this.maps.get(t).set(e[t],e)}delete(e){for(let t of this.indexes)this.maps.get(t).delete(e[t])}clear(){this.maps.forEach(e=>e.clear())}getIterator(e){return this.maps.get(e).values()}forEach(e){let t=this.getIterator(this.indexes[0]),n;for(;(n=t.next())&&!n.done;)e(n.value)}find(e){let t=this.getIterator(this.indexes[0]),n;for(;(n=t.next())&&!n.done;)if(e(n.value))return n.value}filter(e){let t=this.getIterator(this.indexes[0]),n,i=[];for(;(n=t.next())&&!n.done;)e(n.value)&&i.push(n.value);return i}},w4e=100,vL=class extends K{constructor(e,t,n,i){super(),this.live=!0,this.removedNodeCache=new Map,this.store=e,this.numberOfRows=t,this.isLastRowKnown=n,this.storeParams=i}wireBeans(e){this.rowRenderer=e.rowRenderer,this.blockUtils=e.ssrmBlockUtils,this.focusSvc=e.focusSvc,this.nodeManager=e.ssrmNodeManager,this.serverSideRowModel=e.rowModel,this.rowNodeSorter=e.rowNodeSorter,this.sortSvc=e.sortSvc,this.lazyBlockLoadingSvc=e.lazyBlockLoadingSvc,this.colModel=e.colModel}postConstruct(){this.lazyBlockLoadingSvc.subscribe(this),this.nodeMap=new b4e("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set;let{blockUtils:e,gos:t,store:n}=this;this.defaultNodeIdPrefix=e.createNodeIdPrefix(n.getParentNode()),this.getRowIdFunc=Fl(t),this.isMasterDetail=t.get("masterDetail")}destroy(){this.lazyBlockLoadingSvc.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach(e=>this.blockUtils.destroyRowNode(e.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1,super.destroy()}getRowByDisplayIndex(e){if(!this.store.isDisplayIndexInStore(e))return;let t=this.nodeDisplayIndexMap.get(e);if(t)return(t.stub||t.__needsRefreshWhenVisible)&&this.lazyBlockLoadingSvc.queueLoadCheck(),t;if(this.gos.get("groupHideOpenParents")||this.gos.get("groupAllowUnbalanced")){let l=this.nodeMap.find(c=>!!c.node.childStore?.isDisplayIndexInStore(e));if(l)return l.node.childStore?.getRowUsingDisplayIndex(e)}if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);let i=this.nodeDisplayIndexMap.get(e-1);if(i){if(this.isMasterDetail&&i.master&&i.expanded)return i.detailNode;if(i.expanded&&i.childStore?.isDisplayIndexInStore(e))return i.childStore?.getRowUsingDisplayIndex(e);let l=this.nodeMap.getBy("node",i);return this.createStubNode(l.index+1,e)}let r=this.getSurroundingNodesByDisplayIndex(e);if(r==null){let l=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(l,e)}let{previousNode:o,nextNode:s}=r;if(o?.node.expanded&&o.node.childStore?.isDisplayIndexInStore(e))return o.node.childStore?.getRowUsingDisplayIndex(e);if(s){let l=s.node.rowIndex-e,c=s.index-l;return this.createStubNode(c,e)}let a=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(a,e)}createStubNode(e,t){let n=this.store.getRowBounds(t),i=this.createRowAtIndex(e,null,r=>{r.setRowIndex(t),r.setRowTop(n.rowTop),this.nodeDisplayIndexMap.set(t,r)});if(e===0&&this.gos.get("groupHideOpenParents")){let r=this.store.getParentNode().groupData;if(r)for(let o of Object.keys(r))xK(i,this.colModel,o,r[o])}return this.lazyBlockLoadingSvc.queueLoadCheck(),i}getRowByStoreIndex(e){return this.nodeMap.getBy("index",e)?.node}skipDisplayIndexes(e,t,n){if(e===0)return;let i=fo(this.beans);t.value+=e,n.value+=e*i}setDisplayIndexes(e,t,n){this.nodeDisplayIndexMap.clear();let i={};this.nodeMap.forEach(s=>{i[s.index]=s.node});let r=-1;for(let s of Object.keys(i)){let a=i[s],l=Number(s),c=l-1-r;this.skipDisplayIndexes(c,e,t);let d=l===0;if(a.firstChild!==d&&(a.firstChild=d,a.dispatchRowEvent("firstChildChanged")),d&&this.gos.get("groupHideOpenParents")){let u=this.store.getParentNode().groupData;if(u)for(let h of Object.keys(u))xK(a,this.colModel,h,d?u[h]:void 0)}this.blockUtils.setDisplayIndex(a,e,t,n),a.rowIndex!=null&&this.nodeDisplayIndexMap.set(a.rowIndex,a),r=l}let o=this.numberOfRows-1-r;this.skipDisplayIndexes(o,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){this.numberOfRows=e,t!=null&&(this.isLastRowKnown=t,t===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){return this.nodeDisplayIndexMap.get(e)??null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,n;return this.nodeMap.forEach(i=>{if(e>i.node.rowIndex){(n==null||n.node.rowIndex<i.node.rowIndex)&&(n=i);return}(t==null||t.node.rowIndex>i.node.rowIndex)&&(t=i)}),!n&&!t?null:{previousNode:n,nextNode:t}}getDisplayIndexFromStoreIndex(e){let t=this.nodeMap.getBy("index",e);if(t)return t.node.rowIndex;let n,i;if(this.nodeMap.forEach(s=>{if(e>s.index){(i==null||i.index<s.index)&&(i=s);return}(n==null||n.index>s.index)&&(n=s)}),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!i)return this.store.getDisplayIndexStart()+e;let r=e-i.index;return(i.node.childStore?.getDisplayIndexEnd()??i.node.rowIndex)+r}createRowAtIndex(e,t,n){let i=this.nodeMap.getBy("index",e);if(i){let{node:o}=i;if(o.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,o))return this.blockUtils.updateDataIntoRowNode(o,t),this.nodesToRefresh.delete(o),o;if(this.getRowIdFunc==null&&o.hasChildren()&&o.expanded)return this.nodesToRefresh.delete(o),o;this.destroyRowAtIndex(e)}if(t&&this.getRowIdFunc!=null){let o=this.getRowId(t),s=o&&this.removedNodeCache?.get(o);if(s)return this.removedNodeCache?.delete(o),this.blockUtils.updateDataIntoRowNode(s,t),this.nodeMap.set({id:s.id,node:s,index:e}),this.nodesToRefresh.delete(s),s.__needsRefreshWhenVisible=!1,s;let a=this.nodeMap.getBy("id",o);if(a){this.nodeMap.delete(a);let{node:l,index:c}=a;return this.blockUtils.updateDataIntoRowNode(l,t),this.nodeMap.set({id:l.id,node:l,index:e}),this.nodesToRefresh.delete(l),l.__needsRefreshWhenVisible=!1,this.getBlockStartIndex(c)===this.getBlockStartIndex(e)||this.markBlockForVerify(c),l}}let r=this.blockUtils.createRowNode(this.store.getRowDetails());if(t!=null){let o=this.getPrefixedId(this.store.getIdSequence().value++);this.blockUtils.setDataIntoRowNode(r,t,o,void 0),this.blockUtils.checkOpenByDefault(r),this.nodeManager.addRowNode(r)}return this.nodeMap.set({id:r.id,node:r,index:e}),n&&n(r),r}getBlockStates(){let e={},t={};this.nodeMap.forEach(({node:o,index:s})=>{let a=this.getBlockStartIndex(s);!o.stub&&!o.failedLoad&&(e[a]=(e[a]??0)+1);let l="loaded";o.failedLoad?l="failed":this.lazyBlockLoadingSvc.isRowLoading(this,a)?l="loading":(this.nodesToRefresh.has(o)||o.stub)&&(l="needsLoading"),t[a]||(t[a]=new Set),t[a].add(l)});let n={loading:4,failed:3,needsLoading:2,loaded:1},i=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};for(let o of Object.keys(t)){let a=[...t[o]].sort((d,u)=>(n[d]??0)-(n[u]??0))[0],l=Number(o)/this.getBlockSize(),c=i?`${i}-${l}`:String(l);r[c]={blockNumber:l,startRow:Number(o),endRow:Number(o)+this.getBlockSize(),pageStatus:a,loadedRowCount:e[o]??0}}return r}destroyRowAtIndex(e){let t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(t.node.id,t.node):this.blockUtils.destroyRowNode(t.node),this.nodesToRefresh.delete(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){let[t,n]=this.getBlockBounds(e);this.nodeMap.filter(r=>r.index>=t&&r.index<n).forEach(({node:r})=>{r.__needsRefreshWhenVisible=!0})}doesNodeMatch(e,t){if(t.stub)return!1;let n=this.getRowId(e);return n===null?t.data===e:t.id===n}purgeStubsOutsideOfViewport(){let{firstRenderedRow:e,lastRenderedRow:t}=this.rowRenderer,n=this.getBlockStartIndex(e),[,i]=this.getBlockBounds(t);this.nodeMap.forEach(r=>{this.lazyBlockLoadingSvc.isRowLoading(this,r.index)||r.node.failedLoad||r.node.stub&&(r.index<n||r.index>i)&&this.destroyRowAtIndex(r.index)})}getBlocksDistanceFromRow(e,t){let n={};return e.forEach(({node:i,index:r})=>{let[o,s]=this.getBlockBounds(r);if(o in n)return;let a=Math.abs(i.rowIndex-t),l,c=this.nodeMap.getBy("index",[s-1]);c&&(l=Math.abs(c.node.rowIndex-t));let d=l==null||a<l?a:l;n[o]=d}),Object.entries(n)}purgeExcessRows(){if(this.purgeStubsOutsideOfViewport(),this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)return;let{firstRenderedRow:e,lastRenderedRow:t}=this.rowRenderer,n=new Set,i=new Set;this.nodeMap.forEach(({index:p,node:f})=>{let g=this.getBlockStartIndex(p);n.add(g),f.rowIndex>=e&&f.rowIndex<=t&&i.add(g)});let r=Math.max(i.size,this.storeParams.maxBlocksInCache??0),s=n.size-r;if(s<=0)return;let a=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;i.forEach(p=>{a>p&&(a=p),l<p&&(l=p)});let c=this.nodeMap.filter(({node:p,index:f})=>{let g=this.getBlockStartIndex(f);return!(g>=a&&g<=l)&&!this.isNodeCached(p)});if(c.length===0)return;let d=e+(t-e)/2,u=this.getBlocksDistanceFromRow(c,d),h=this.getBlockSize();u.sort((p,f)=>Math.sign(f[1]-p[1]));for(let p=0;p<Math.min(s,u.length);p++){let f=Number(u[p][0]);for(let g=f;g<f+h;g++){let C=this.nodeMap.getBy("index",g);!C||this.isNodeCached(C.node)||this.destroyRowAtIndex(g)}}}isNodeFocused(e){let t=this.focusSvc.getFocusCellToUseAfterRefresh();return!t||t.rowPinned!=null?!1:t.rowIndex===e.rowIndex}isNodeCached(e){let t=e.isExpandable()&&e.expanded,n=this.gos.get("groupAllowUnbalanced")&&e.key==="",i=!!this.beans.editSvc?.isRowEditing(e);return t||this.isNodeFocused(e)||n||i}extractDuplicateIds(e){if(this.getRowIdFunc==null)return[];let t=new Set,n=new Set;return e.forEach(i=>{let r=this.getRowId(i);if(t.has(r)){n.add(r);return}t.add(r)}),[...n]}onLoadSuccess(e,t,n){if(!this.live)return;let i=n.groupLevelInfo;if(this.store.setStoreInfo(i),this.getRowIdFunc!=null){let s=this.extractDuplicateIds(n.rowData);if(s.length>0){let a=s.join(", ");X(205,{duplicateIdText:a}),this.onLoadFailed(e,t);return}}n.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(n.pivotResultFields);let r=this.nodesToRefresh.size>0;if(n.rowData.forEach((s,a)=>{let l=e+a,c=this.nodeMap.getBy("index",l);if(c?.node?.stub){this.createRowAtIndex(l,s);return}if(c&&this.doesNodeMatch(s,c.node)){this.blockUtils.updateDataIntoRowNode(c.node,s),this.nodesToRefresh.delete(c.node),c.node.__needsRefreshWhenVisible=!1;return}this.createRowAtIndex(l,s)}),n.rowCount!=null&&n.rowCount!==-1)this.numberOfRows=n.rowCount,this.isLastRowKnown=!0;else if(t>n.rowData.length)this.numberOfRows=e+n.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){let s=e+n.rowData.length+1;s>this.numberOfRows&&(this.numberOfRows=s)}this.isLastRowKnown&&this.nodeMap.filter(a=>a.index>=this.numberOfRows).forEach(a=>this.destroyRowAtIndex(a.index)),this.fireStoreUpdatedEvent();let o=this.nodesToRefresh.size===0;r&&o&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){this.nodesToRefresh.size===0&&(this.removedNodeCache.forEach(t=>{this.blockUtils.destroyRowNode(t)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){let e=this.isLastRowKnown,t=this.nodeMap.getSize()===this.numberOfRows;if(!e||!t||this.nodesToRefresh.size>0)return;let n=-1;return this.nodeMap.find(r=>(n+=1,!!(r.index!==n||r.node.__needsRefreshWhenVisible||r.node.stub)))==null}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){if(!this.live)return;let n=this.nodesToRefresh.size>0;for(let r=e;r<e+t&&r<this.getRowCount();r++){let{node:o}=this.nodeMap.getBy("index",r)??{};o&&this.nodesToRefresh.delete(o),o?.stub||(o&&!o.stub&&this.destroyRowAtIndex(r),o=this.createRowAtIndex(r)),o.__needsRefreshWhenVisible=!1,o.failedLoad=!0}let i=this.nodesToRefresh.size===0;n&&i&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)}),this.lazyBlockLoadingSvc.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){if(this.getRowIdFunc==null)return null;let{level:t}=this.store.getRowDetails(),n=this.store.getParentNode().getRoute()??[];return this.getRowIdFunc({data:e,parentKeys:n.length>0?n:void 0,level:t})}getOrderedNodeMap(){let e={};return this.nodeMap.forEach(t=>e[t.index]=t),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){let e=this.sortSvc?.getSortOptions()??[];if(!e.some(r=>r.sort!=null)||!this.rowNodeSorter)return;let n=new Array(this.nodeMap.getSize());this.nodeMap.forEach(r=>n[r.index]=r.node),this.nodeMap.clear(),this.rowNodeSorter.doFullSort(n,e).forEach((r,o)=>{this.nodeMap.set({id:r.id,node:r,index:o})})}updateRowNodes(e){let t=[];return e.forEach(n=>{let i=this.getRowId(n),r=this.nodeMap.getBy("id",i);r&&(this.blockUtils.updateDataIntoRowNode(r.node,n),t.push(r.node))}),t}insertRowNodes(e,t){let n=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),i=t==null&&this.isLastRowKnown?n:t;if(i==null||n<i)return[];let r={};e.forEach(l=>{let c=this.getRowId(l);c&&this.isNodeInCache(c)||(r[c]=l)});let o=Object.values(r),s=o.length;if(s===0)return[];let a=this.nodeMap.filter(l=>l.index>=i);return a.forEach(l=>this.nodeMap.delete(l)),a.forEach(l=>{this.nodeMap.set({node:l.node,index:l.index+s,id:l.id})}),this.numberOfRows+=s,o.map((l,c)=>this.createRowAtIndex(i+c,l))}removeRowNodes(e){let t=[],n=[],i=0,r=[...e],o=this.getOrderedNodeMap(),s=-1;for(let a of Object.keys(o)){s+=1;let l=o[a],c=r.findIndex(u=>u===l.id);if(c!==-1){r.splice(c,1),this.destroyRowAtIndex(Number(a)),t.push(l.node),i+=1;continue}if(i===0)continue;let d=Number(a);s!==d&&n.push(l.node),this.nodeMap.delete(l),this.nodeMap.set({id:l.id,node:l.node,index:d-i})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:i,r.length>0&&n.length>0&&(n.forEach(a=>a.__needsRefreshWhenVisible=!0),this.lazyBlockLoadingSvc.queueLoadCheck()),t}getBlockSize(){return this.storeParams.cacheBlockSize||w4e}getBlockStartIndex(e){let t=this.getBlockSize();return e-e%t}getBlockBounds(e){let t=this.getBlockStartIndex(e),n=this.getBlockSize();return[t,t+n]}},y4e=class extends K{constructor(e,t,n){super(),this.idSequence={value:0},this.ssrmParams=e,this.parentRowNode=n,this.storeParams=t,this.level=n.level+1,this.group=e.rowGroupCols?this.level<e.rowGroupCols.length:!1,this.leafGroup=e.rowGroupCols?this.level===e.rowGroupCols.length-1:!1,this.info={}}wireBeans(e){this.blockUtils=e.ssrmBlockUtils,this.storeUtils=e.ssrmStoreUtils,this.selectionSvc=e.selectionSvc,this.rowGroupColsSvc=e.rowGroupColsSvc}postConstruct(){let e=1;if(this.level===0&&(e=this.storeUtils.getServerSideInitialRowCount()??1,this.eventSvc.dispatchEventOnce({type:"rowCountReady"})),this.cache=this.createManagedBean(new vL(this,e,!1,this.storeParams)),!this.gos.get("treeData")&&this.group&&this.rowGroupColsSvc){let n=this.ssrmParams.rowGroupCols[this.level];this.groupField=n.field,this.rowGroupColumn=this.rowGroupColsSvc.columns[this.level]}}destroy(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache),super.destroy()}applyRowData(e,t,n){this.cache.onLoadSuccess(t,n,e)}applyTransaction(e){let t=Fl(this.gos);if(!t)return X(206),{status:Ol.Cancelled};let n=this.gos.getCallback("isApplyServerSideTransaction");if(n){let d={transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!n(d))return{status:Ol.Cancelled}}let i=this.cache.isStoreFullyLoaded(),r;e.update?.length&&(r=this.cache.updateRowNodes(e.update));let o;if(e.add?.length){let d=e.addIndex;d!=null&&d<0&&(d=void 0),o=this.cache.insertRowNodes(e.add,d)}let s;if(e.remove?.length){let d=e.remove.map(h=>t({level:this.level,parentKeys:this.parentRowNode.getRoute()??[],data:h})),u=[...new Set(d)];s=this.cache.removeRowNodes(u)}let a=this.gos.get("serverSideEnableClientSideSort"),l=r?.length||o?.length;return i&&a&&l&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(r,s),{status:Ol.Applied,update:r,add:o,remove:s}}updateSelectionAfterTransaction(e,t){if(!this.selectionSvc)return;let n=[];for(let i of e??[])i.isSelected()&&!i.selectable&&n.push(i);for(let i of t??[])i.isSelected()&&n.push(i);n.length&&this.selectionSvc.setNodesSelected({newValue:!1,clearSelection:!1,nodes:n,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(e=>this.blockUtils.clearDisplayIndex(e.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()}setDisplayIndexes(e,t,n){this.displayIndexStart=e.value,this.topPx=t.value;let i=this.parentRowNode.level>-1&&kd(this.gos)({node:this.parentRowNode});i||JL(this.parentRowNode),i==="top"&&(Uu(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,n)),this.cache.setDisplayIndexes(e,t,n),i==="bottom"&&(Uu(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,n)),this.displayIndexEnd=e.value,this.heightPx=t.value-this.topPx}forEachStoreDeep(e,t={value:0}){e(this,t.value++),this.cache.getNodes().forEach(n=>{let i=n.node.childStore;i&&i.forEachStoreDeep(e,t)})}forEachNodeDeep(e,t={value:0}){this.cache.getNodes().forEach(n=>{e(n.node,t.value++);let i=n.node.childStore;i&&i.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e,t={value:0},n=!1){let i=this.parentRowNode.level>-1&&kd(this.gos)({node:this.parentRowNode});i==="top"&&e(this.parentRowNode.sibling,t.value++);let r=this.cache.getOrderedNodeMap();for(let o of Object.values(r)){e(o.node,t.value++);let s=o.node.childStore;s&&s.forEachNodeDeepAfterFilterAndSort(e,t,n)}i==="bottom"&&e(this.parentRowNode.sibling,t.value++)}retryLoads(){this.cache.getNodes().forEach(({node:e})=>{e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)}),this.forEachChildStoreShallow(e=>e.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){if(!this.isDisplayIndexInStore(e))return null;let t=this.cache.getNodeCachedByDisplayIndex(e);if(t){let a=this.blockUtils.extractRowBounds(t,e);if(a)return a}let{previousNode:n,nextNode:i}=this.cache.getSurroundingNodesByDisplayIndex(e)??{};if(n){let a=this.blockUtils.extractRowBounds(n.node,e);if(a!=null)return a}let r=fo(this.beans);if(i){let a=(i.node.rowIndex-e)*r;return{rowTop:i.node.rowTop-a,rowHeight:r}}let o=this.topPx+this.heightPx,s=(this.getDisplayIndexEnd()-e)*r;return{rowTop:o-s,rowHeight:r}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&e>this.parentRowNode.sibling.rowTop&&e<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let t=Number.MAX_SAFE_INTEGER,n=null,i=Number.MAX_SAFE_INTEGER,r=null;if(this.cache.getNodes().forEach(({node:l})=>{let c=Math.abs(e-l.rowTop);if(l.rowTop<e){c<t&&(t=c,n=l);return}c<i&&(i=c,r=l)}),n=n,r=r,n){let l=this.blockUtils.getIndexAtPixel(n,e);if(l!=null)return l}let o=fo(this.beans);if(r){let l=r.rowTop,c=Math.ceil((l-e)/o);return r.rowIndex-c}let s=this.topPx+this.heightPx,a=Math.floor((s-e)/o);return this.getDisplayIndexEnd()-a}getChildStore(e){return this.storeUtils.getChildStore(e,this,t=>{let n=this.cache.getNodes().find(i=>i.node.key==t);return n?n.node:null})}forEachChildStoreShallow(e){this.cache.getNodes().forEach(({node:t})=>{t.childStore&&e(t.childStore)})}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){let n=this.cache.isStoreFullyLoaded(),i=this.gos.get("serverSideEnableClientSideSort");if(!(n&&i)){let o=this.cache.getRowCount(),s=this.cache.isLastRowIndexKnown();this.destroyBean(this.cache),this.cache=this.createManagedBean(new vL(this,o,s,this.storeParams));return}this.cache.clientSideSortRows()}this.forEachChildStoreShallow(n=>n.refreshAfterSort(e))}refreshAfterFilter(e){if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.refreshStore(!0);return}this.forEachChildStoreShallow(n=>n.refreshAfterFilter(e))}refreshStore(e){if(e){this.destroyBean(this.cache),this.cache=this.createManagedBean(new vL(this,1,!1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){return this.cache.getDisplayIndexFromStoreIndex(e)??e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){return this.cache.getNodes().filter(({node:n})=>n.rowIndex>=e.rowIndex&&n.rowIndex<=t.rowIndex).map(({node:n})=>n)}addStoreStates(e){e.push({route:this.parentRowNode.getRoute()??[],rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){this.eventSvc.dispatchEvent({type:"storeUpdated"})}fireRefreshFinishedEvent(){this.eventSvc.dispatchEvent({type:"storeRefreshed",route:this.parentRowNode.getRoute()})}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}getFirstNode(){return this.cache.getNodes().getBy("index",0)?.node??null}},S4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmStoreFactory"}wireBeans(e){this.colModel=e.colModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.rowAutoHeight=e.rowAutoHeight}createStore(e,t){let n=this.getStoreParams(e,t);return new y4e(e,n,t)}getStoreParams(e,t){let n=this.getLevelSpecificParams(t),i=this.getBlockSize(n),r=this.getMaxBlocksInCache(e,n);return{cacheBlockSize:i,maxBlocksInCache:r}}getMaxBlocksInCache(e,t){let n=t?.maxBlocksInCache!=null?t.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(n!=null&&n>=0){if(e.dynamicRowHeight){X(203);return}if(this.rowAutoHeight?.active){X(204);return}return n}}getBlockSize(e){let t=e?.cacheBlockSize!=null?e.cacheBlockSize:this.gos.get("cacheBlockSize");return t!=null&&t>0?t:100}getLevelSpecificParams(e){let t=this.gos.getCallback("getServerSideGroupLevelParams");if(!t)return;let n={level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:this.rowGroupColsSvc?.columns??[],pivotColumns:this.pivotColsSvc?.columns??[],pivotMode:this.colModel.isPivotMode()};return t(n)}},x4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmStoreUtils"}wireBeans(e){this.colModel=e.colModel,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}getChildStore(e,t,n){if(!e?.length)return t;let i=e[0],r=n(i);if(r){if(e.length===1&&!r.childStore){let a=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(a,r))}let o=e.slice(1,e.length),s=r.childStore;return s?s.getChildStore(o):null}return null}isServerRefreshNeeded(e,t,n){if(n.valueColChanged||n.secondaryColChanged)return!0;let i=e.level+1;if(!(i<t.length))return!0;let s=t[i].id;return n.changedColumns.indexOf(s)>-1?!0:this.colModel.getCols().filter(d=>d.getColDef().showRowGroup&&n.changedColumns.includes(d.getId())).map(d=>d.getColDef().showRowGroup).some(d=>d===!0||d===s)}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&Ui(this.gos)}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&Ui(this.gos)}},E4e=class extends K{constructor(){super(...arguments),this.beanName="ssrmTxnManager",this.asyncTransactions=[]}wireBeans(e){this.valueCache=e.valueCache,this.serverSideRowModel=e.rowModel,this.selectionSvc=e.selectionSvc}postConstruct(){Ui(this.gos)}applyTransactionAsync(e,t){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){let e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;let e=[],t=[],n=[],i=!1;for(let r of this.asyncTransactions){let o;if(this.serverSideRowModel.executeOnStore(r.transaction.route,l=>{o=l.applyTransaction(r.transaction)})?o==null&&(o={status:Ol.StoreNotFound}):o={status:Ol.StoreNotStarted},t.push(o),o.status==Ol.StoreLoading){n.push(r);continue}r.callback&&e.push(()=>r.callback(o)),o.status===Ol.Applied&&(i=!0)}e.length>0&&window.setTimeout(()=>{for(let r of e)r()},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=n,i&&(this.valueCache?.onDataChanged(),this.eventSvc.dispatchEvent({type:"storeUpdated"})),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t})}flushAsyncTransactions(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,i=>{t=i.applyTransaction(e)}))if(t){if(this.valueCache?.onDataChanged(),t.remove&&this.selectionSvc){let i=t.remove.map(r=>r.id);this.selectionSvc.deleteSelectionStateFromParent(e.route||[],i)}return this.eventSvc.dispatchEvent({type:"storeUpdated"}),t}else return{status:Ol.StoreNotFound};else return{status:Ol.StoreNotStarted}}},D4e={moduleName:"ServerSideRowModel",version:Lt,rowModels:["serverSide"],beans:[o4e,e4e,x4e,JLe,r4e,E4e,t4e,S4e,n4e,m4e,C4e,v4e,g4e,i4e],dependsOn:[ti,N_,W5,$Z,qZ,FLe]},_4e={moduleName:"ServerSideRowModelApi",version:Lt,apiFunctions:{getServerSideSelectionState:s4e,setServerSideSelectionState:a4e,applyServerSideTransaction:l4e,applyServerSideTransactionAsync:d4e,applyServerSideRowData:c4e,retryServerSideLoads:u4e,flushServerSideAsyncTransactions:h4e,refreshServerSide:p4e,getServerSideGroupLevelState:f4e,resetRowHeights:W_,onRowHeightChanged:U_},dependsOn:[ti,q5,$5,K5]},A4e='.formula-error:after{background-color:var(--ag-invalid-color);content:"";height:12px;position:absolute;top:-6px;width:12px}:where(.ag-ltr) .formula-error:after{right:-6px;transform:rotate(45deg)}:where(.ag-rtl) .formula-error:after{left:-6px;transform:rotate(-45deg)}',R4e=class extends K{constructor(){super(...arguments),this.beanName="formulaDataSvc",this.hasSource=!1}postConstruct(){let e=this.gos.get("formulaDataSource");e&&this.setDataSource(e)}hasDataSource(){return this.hasSource}getFormula(e){let t=this.dataSource?.getFormula(e);return Fd(t)?t:void 0}setFormula(e){this.dataSource?.setFormula(e)}setDataSource(e){this.dataSource=e,this.hasSource=!0,e.init?.(this.createInitParams())}createInitParams(){return Oe(this.gos,{})}destroy(){this.dataSource?.destroy?.(),super.destroy()}},KZ=[{symbol:"%",fixity:"postfix",precedence:100},{symbol:"-",fixity:"prefix",precedence:90},{symbol:"+",fixity:"prefix",precedence:90},{symbol:"^",fixity:"infix",precedence:80,associativity:"right"},{symbol:"*",fixity:"infix",precedence:70,associativity:"left",isAssociative:!0},{symbol:"/",fixity:"infix",precedence:70,associativity:"left"},{symbol:"+",fixity:"infix",precedence:60,associativity:"left",isAssociative:!0},{symbol:"-",fixity:"infix",precedence:60,associativity:"left"},{symbol:"&",fixity:"infix",precedence:55,associativity:"left",isAssociative:!0},{symbol:"=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<>",fixity:"infix",precedence:50,associativity:"left"},{symbol:">=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<=",fixity:"infix",precedence:50,associativity:"left"},{symbol:">",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<",fixity:"infix",precedence:50,associativity:"left"}],CA=new Map;for(let e of KZ){let t=CA.get(e.symbol)??[];t.push(e),CA.set(e.symbol,t)}function L0(e,t){let n=CA.get(e)??[];return t?n.find(i=>i.fixity===t):n[0]}var F4e=[...new Set(KZ.map(e=>e.symbol))].sort((e,t)=>t.length-e.length),OL=CA,vn=class extends Error{constructor(e,t="#ERROR!"){super(e),this.type=t,this.name="FormulaError"}},jo=class extends vn{constructor(e,t,n){super(e,"#PARSE!"),this.errorStart=t,this.errorEnd=n}},M4e=(e,t,n)=>{let i=t.trim();if(i.startsWith('"')&&i.endsWith('"')&&i.length>2)return i.slice(1,-1);if(i.toLowerCase()==="true")return!0;if(i.toLowerCase()==="false")return!1;let r=Number(i);if(!isNaN(r))return r;let o=/^(\$?)([A-Z]+)(\$?)([0-9]+)(?::(\$?)([A-Z]+)(\$?)([0-9]+))?$/i,s=i.match(o);if(s){let[,a,l,c,d,u,h,p,f]=s,g=(m,w,x,D,F)=>{let L=m||F?w.toUpperCase():e.formula?.getColByRef(w)?.colId,V=x||F?D:Ro(e)?.getFormulaRow(Number(D)-1)?.id;if(L==null||V==null)throw new jo(`Invalid cell reference: ${i}`,0,0);return{column:{id:L,absolute:m},row:{id:V,absolute:x}}},C=g(a==="$",l,c==="$",d,n);if(h&&f){let m=g(u==="$",h,p==="$",f,n);C.endColumn=m.column,C.endRow=m.row}return C}return null};function I4e(e){let t=[],n=0,i=(r,o)=>{let s=o,a=()=>r[s]==="$"?(s++,!0):!1,l=()=>{let u=s;for(;s<r.length&&/[A-Za-z]/.test(r[s]);)s++;return s>u},c=()=>{let u=s;for(;s<r.length&&/[0-9]/.test(r[s]);)s++;return s>u},d=()=>{let u=s;return a(),!l()||(a(),!c())?(s=u,!1):!0};if(!d())return 0;if(r[s]===":"){let u=s;if(s++,!d())throw new jo("Invalid range end reference",u,s)}return s-o};for(;n<e.length;){let r=e[n];if(/\s/.test(r)){n++;continue}if(r==='"'){let s=n+1;for(;s<e.length&&e[s]!=='"';)s++;if(s>=e.length)throw new jo("Unterminated string",n,e.length);t.push(e.slice(n,s+1)),n=s+1;continue}if(/[0-9]/.test(r)||r==="."&&/[0-9]/.test(e[n+1])){let s=n+1;for(;s<e.length&&/[0-9.]/.test(e[s]);)s++;t.push(e.slice(n,s)),n=s;continue}if(r==="$"||/[A-Za-z]/.test(r)){let s=i(e,n);if(s>0){t.push(e.slice(n,n+s)),n+=s;continue}let a=n+1;for(;a<e.length&&/[A-Za-z0-9]/.test(e[a]);)a++;t.push(e.slice(n,a)),n=a;continue}if(r==="("||r===")"||r===","){t.push(r),n++;continue}let o=F4e.find(s=>e.startsWith(s,n));if(!o)throw new jo("Unexpected character: "+r,n,n+1);t.push(o),n+=o.length}return t}function T4e(e,t){return e.fixity!=="infix"||t.fixity!=="infix"?!0:e.associativity==="right"&&e.precedence===t.precedence?!1:e.precedence>=t.precedence}function P4e(e,t){let n=OL.get(e);if(!n)return null;let i=t!==void 0&&OL.has(t);return t!==void 0&&!i&&!(t==="("||t===",")&&t!=="("||t===")"?n.find(s=>s.fixity==="postfix")??n.find(s=>s.fixity==="infix")??null:n.find(s=>s.fixity==="prefix")??n.find(s=>s.fixity==="infix")??null}function k4e(e,t,n){let i=I4e(t),r=[],o=[],s=()=>{let l=o.pop();if(!l)throw new jo("Operator stack underflow",0,0);if(l.kind==="op"){let c=l.def;if(c.fixity!=="infix"){let h=r.pop();if(!h)throw new jo(`Missing operand for '${c.symbol}'`,0,0);if(c.symbol==="+"&&c.fixity==="prefix"){r.push(h);return}if(c.fixity==="postfix"&&c.symbol==="%"){r.push({type:"operation",operation:c.symbol,operands:[h]});return}c.symbol==="-"&&c.fixity==="prefix"?r.push({type:"operation",operation:"-",operands:[{type:"operand",value:0},h]}):r.push({type:"operation",operation:c.symbol,operands:[h]});return}let d=r.pop(),u=r.pop();if(!u||!d)throw new jo(`Missing operand for '${c.symbol}'`,0,0);r.push({type:"operation",operation:c.symbol,operands:[u,d]});return}throw new jo("Internal error: unexpected frame during reduction",0,0)},a=0;for(;a<i.length;){let l=i[a];if(/[A-Za-z]/.test(l[0]||"")&&i[a+1]==="("){let u=l;o.push({kind:"function",name:u,args:[]}),o.push({kind:"parenthesis",outLen:r.length}),a+=2;continue}if(l==="("){o.push({kind:"parenthesis",outLen:r.length}),a++;continue}if(l===","){for(;;){let p=o[o.length-1];if(!p||p.kind==="parenthesis")break;if(p.kind==="op")s();else throw new jo("Internal error: unexpected frame before '('",a,a+1)}let u=o[o.length-1];if(!u||u.kind!=="parenthesis")throw new jo("Misplaced comma",a,a+1);let h=o[o.length-2];if(!h||h.kind!=="function")throw new jo("Comma outside of a function call",a,a+1);r.length>u.outLen&&h.args.push(r.pop()),a++;continue}if(l===")"){for(;;){let p=o[o.length-1];if(!p||p.kind==="parenthesis")break;if(p.kind==="op")s();else throw new jo("Internal error: unexpected frame before ')'",a,a+1)}let u=o[o.length-1];if(!u||u.kind!=="parenthesis")throw new jo("Mismatched parentheses",a,a+1);let h=u.outLen;if(o.pop(),o[o.length-1]?.kind==="function"){let p=o.pop();r.length>h&&p.args.push(r.pop()),r.push({type:"operation",operation:p.name,operands:p.args})}a++;continue}let c=OL.has(l)?P4e(l,i[a-1]):null;if(c){for(;;){let u=o[o.length-1];if(!u||u.kind!=="op")break;if(T4e(u.def,c))s();else break}o.push({kind:"op",def:c}),a++;continue}let d=M4e(e,l,n);if(d==null)throw new jo("Unsupported operand: "+l,0,l.length);r.push({type:"operand",value:d}),a++}for(;o.length;)if(o[o.length-1].kind==="op")s();else throw new jo("Mismatched parentheses or unfinished function call",0,0);if(r.length!==1)throw new jo("Invalid expression",0,0);return r[0]}var NL=(e,t,n=!1)=>{if(!Fd(t))throw new jo("Formulas must begin with =",0,1);let i=t.slice(1).trim();return XZ(k4e(e,i,n))};function i4(e,t){return e.type==="operation"&&e.operation.toUpperCase()===t.toUpperCase()}function YZ(e,t=!1){return!e||e.type!=="operand"?t:!!e.value}function ZZ(e){if(!e||e.type!=="operand")return null;let t=e.value;return typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"?String(t):null}function KK(e){if(!i4(e,"COLUMN"))return null;let t=ZZ(e.operands[0]);if(t==null)return null;let n=YZ(e.operands[1],!1);return{id:t,absolute:n}}function YK(e){if(!i4(e,"ROW"))return null;let t=ZZ(e.operands[0]);if(t==null)return null;let n=YZ(e.operands[1],!1);return{id:t,absolute:n}}function L4e(e){if(!i4(e,"REF"))return null;let t=e.operands;if(t.length!==2&&t.length!==4)return null;let n=KK(t[0]),i=YK(t[1]);if(!n||!i)return null;let r={column:n,row:i};if(t.length===4){let o=KK(t[2]),s=YK(t[3]);if(!o||!s)return null;r.endColumn=o,r.endRow=s}return{type:"operand",value:r}}function XZ(e){if(e.type==="operation"){let t=e.operands.map(XZ),n={type:"operation",operation:e.operation,operands:t};return L4e(n)??n}return e}var MA=e=>e.type==="operation";function QZ(e,t){let n=e.colModel.getColById(t);return n?e.formula?.getColRef(n)??null:null}function O4e(e,t){return e.formula?.getColByRef?.(t)?.colId??null}function N4e(e,t,n){let i=e.getColById(n);if(!i)return null;let r=t.indexOf(i);return r>=0?r:null}function B4e(e,t){let n=e[t];return n?n.getId()??null:null}function r4(e,t){let n=e.rowModel?.getRowNode?.(t);return n?.formulaRowIndex!=null?n.formulaRowIndex+1:null}function JZ(e,t){return Ro(e)?.getFormulaRow?.(t-1)?.id??null}function BL(e){if(e.includes('"'))throw'String contains a quote (") which the tokenizer does not support.';return`"${e}"`}function V4e(e,t){let n=/^[A-Za-z]+$/.test(t.id);if(t.absolute){if(n)return t.id.toUpperCase();let i=QZ(e,t.id);if(i)return i.toUpperCase();throw`Cannot produce absolute COLUMN label from id '${t.id}'`}else{if(n){let i=O4e(e,t.id);if(i)return i}return t.id}}function G4e(e,t){let{id:n,absolute:i}=t;if(i){if(JZ(e,Number(n))==null)throw`Cannot produce absolute ROW index from id '${n}'`}else if(r4(e,n)==null)throw`Cannot produce ROW index from id '${n}'`;return n}function ZK(e,t){if(t.absolute)return t.id;let n=QZ(e,t.id);if(n)return n.toUpperCase();throw`Cannot map column id '${t.id}' to A1 label`}function XK(e,t){if(t.absolute){let i=Number(t.id);if(Number.isFinite(i)&&i>=1)return i;throw`Cannot parse absolute row index '${t.id}'`}let n=r4(e,t.id);if(n!=null)return n;throw`Cannot map row id '${t.id}' to A1 index`}function H4e(e,t,n){let i=(a,l)=>(a?"$":"")+String(l),r=n?t.column.id:ZK(e,t.column),o=n?t.row.id:XK(e,t.row),s=i(t.column.absolute,r)+i(t.row.absolute,o);if(t.endColumn&&t.endRow){let a=n?t.endColumn.id:ZK(e,t.endColumn),l=n?t.endRow.id:XK(e,t.endRow);return`${s}:${i(t.endColumn.absolute,a)}${i(t.endRow.absolute,l)}`}return s}function z4e(e,t){let n=o=>`COLUMN(${BL(V4e(e,o))}${o.absolute?",true":""})`,i=o=>`ROW(${BL(G4e(e,o))}${o.absolute?",true":""})`,r=`REF(${n(t.column)},${i(t.row)}`;return t.endColumn&&t.endRow?`${r},${n(t.endColumn)},${i(t.endRow)})`:`${r})`}function eX(e){if(!MA(e)||e.operation!=="-"||e.operands.length!==2)return null;let[t,n]=e.operands;return t.type==="operand"&&t.value===0?n:null}function j4e(e){return MA(e)?!!L0(e.operation,"infix"):!1}function QK(e,t,n){if(!MA(t)||eX(t))return!1;let i=L0(t.operation,"infix");if(!i||i.fixity!=="infix")return!1;let r=e.precedence,o=i.precedence;if(o<r)return!0;if(o>r)return!1;if(e.associativity==="right"){let a=i.symbol===e.symbol;return n==="left"&&a}return e.isAssociative===!0?!1:n==="right"}function U4e(e){if(!MA(e))return!1;let t=L0(e.operation,"infix");return t?!(t.symbol==="^"):!1}function JK(e,t,n,i){let r=s=>n?z4e(e,s):H4e(e,s,i);function o(s){if(s.type==="operand"){let c=s.value;return typeof c=="string"?BL(c):typeof c=="number"?String(c):typeof c=="boolean"?c?"TRUE":"FALSE":r(c)}let a=eX(s);if(a){let c=o(a);return U4e(a)?`-(${c})`:`-${c}`}let l=s.operation.toUpperCase();if(s.operands.length===1){let c=s.operands[0],d=L0(l,"postfix");if(d)return`${o(c)}${d.symbol}`;let u=L0(l,"prefix");if(u){let h=o(c);return j4e(c)?`${u.symbol}(${h})`:`${u.symbol}${h}`}return`${l}(${o(c)})`}if(s.operands.length===2){let c=L0(l,"infix");if(c){let[d,u]=s.operands,h=QK(c,d,"left")?`(${o(d)})`:o(d),p=QK(c,u,"right")?`(${o(u)})`:o(u);return`${h}${c.symbol}${p}`}}return`${l}(${s.operands.map(o).join(",")})`}return"="+o(t)}function tX(e){return!!(e.endColumn&&e.endRow)}function o4(e,t){let{row:n,column:i}=t,r=n.absolute?Ro(e)?.getFormulaRow(Number(n.id)-1):e.rowModel.getRowNode(n.id),o=i.absolute?e.formula.getColByRef(i.id):e.colModel.getColById(i.id);return!r||!o?null:{row:r,column:o}}function nX(e,t,n,i){if(t.type==="operand"){let a=t.value;if(typeof a!="object")return a;if(tX(a))throw new vn("Range is not allowed in scalar context");let l=o4(e,a);if(!l)throw new vn("Unknown reference to cell","#REF!");return n(l)}let r=e.formula?.getFunction(t.operation);if(!r)throw new vn(`Unsupported operation ${t.operation}`,"#NAME?");let{args:o,values:s}=q4e(e,t.operands,n,i);return r({row:i.row,column:i.column,args:o,values:s})}function iX(e,t,n,i){if(t.type==="operand"){let o=t.value;if(typeof o!="object")return{kind:"value",value:o};if(tX(o))return Y4e(e,o,n);let s=o4(e,o);if(!s)throw new vn("Unknown reference to cell","#REF!");return{kind:"value",value:n(s)}}return{kind:"value",value:nX(e,t,n,i)}}var W4e=class{constructor(e,t,n,i){this.beans=e,this.operandNodes=t,this.getCellValue=n,this.caller=i,this.i=0,this.res={done:!1,value:void 0}}next(){return this.i>=this.operandNodes.length?(this.res.done=!0,this.res.value=void 0,this.res):(this.res.done=!1,this.res.value=iX(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller),this.res)}[Symbol.iterator](){return this}},$4e=class{constructor(e,t,n,i){this.beans=e,this.operandNodes=t,this.getCellValue=n,this.caller=i,this.i=0,this.inner=null,this.res={done:!1,value:void 0}}next(){for(;;){if(this.inner){let t=this.inner.next();if(!t.done)return this.res.done=!1,this.res.value=t.value,this.res;this.inner=null;continue}if(this.i>=this.operandNodes.length)return this.res.done=!0,this.res.value=void 0,this.res;let e=iX(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller);if(e.kind==="value")return this.res.done=!1,this.res.value=e.value,this.res;this.inner=e[Symbol.iterator]()}}[Symbol.iterator](){return this}};function q4e(e,t,n,i){return{args:{[Symbol.iterator](){return new W4e(e,t,n,i)}},values:{[Symbol.iterator](){return new $4e(e,t,n,i)}}}}function bA(e,t){if(t.absolute){let i=Number(t.id)-1;if(!Number.isFinite(i)||i<0)throw new vn("Invalid absolute row","#REF!");return i}let n=e.rowModel?.getRowNode?.(t.id);if(n?.formulaRowIndex==null)throw new vn("Unrecognised row id","#REF!");return n.formulaRowIndex}function wA(e,t){if(t.absolute){let i=e.formula?.getColByRef(t.id);if(!i)throw new vn("Invalid absolute column","#REF!");return i}let n=e.colModel.getColById(t.id);if(!n)throw new vn("Unrecognised column id","#REF!");return n}var K4e=class{constructor(e,t,n,i,r,o){this.beans=e,this.rowStartIndex=t,this.rowEndIndex=n,this.colStart=i,this.colEnd=r,this.getCellValue=o,this.cols=null,this.currentRowIndex=this.rowStartIndex,this.currentColIdx=-1,this.colStartIdx=-1,this.colEndIdx=-1,this.res={done:!1,value:void 0}}initColsOnce(){if(this.cols)return;this.cols=this.beans.colModel.getCols()??[];let e=rX(this.beans,this.colStart,this.colEnd);if(!e){this.colStartIdx=-1,this.colEndIdx=-1;return}[this.colStartIdx,this.colEndIdx]=e,this.currentColIdx=this.colStartIdx}next(){if(!this.cols&&(this.initColsOnce(),this.colStartIdx<0))return this.res.done=!0,this.res;if(this.currentRowIndex<=this.rowEndIndex){let e=Ro(this.beans)?.getFormulaRow(this.currentRowIndex);if(!e)throw new vn("Unrecognised row in range","#REF!");let t=this.cols[this.currentColIdx];return this.currentColIdx<this.colEndIdx?this.currentColIdx++:(this.currentColIdx=this.colStartIdx,this.currentRowIndex++),this.res.value=this.getCellValue({row:e,column:t}),this.res}return this.res.done=!0,this.res.value=void 0,this.res}};function Y4e(e,t,n){let i=bA(e,t.row),r=t.endRow?bA(e,t.endRow):i,o=Math.min(i,r),s=Math.max(i,r),a=wA(e,t.column),l=t.endColumn?wA(e,t.endColumn):a;return{kind:"range",rowStart:o,rowEnd:s,colStart:a,colEnd:l,[Symbol.iterator](){return new K4e(e,o,s,a,l,n)}}}function rX(e,t,n){let i=e.colModel.getCols()??[],r=null,o=null;for(let l=0;l<i.length&&(r===null||o===null);l++){let c=i[l];if(c===n&&(o=l),c===t&&(r=l),o!==null&&r!==null)break}if(r===null||o===null)return null;let s=Math.min(r,o),a=Math.max(r,o);return[s,a]}function*Z4e(e,t,n,i,r){let o=e.colModel.getCols()??[],s=rX(e,i,r);if(s==null)return;let[a,l]=s;for(let c=t;c<=n;c++){let d=Ro(e)?.getFormulaRow(c);if(d)for(let u=a;u<=l;u++)yield{row:d,column:o[u]}}}function*X4e(e,t,n){let i=[t];for(;i.length;){let r=i.pop();if(r.type==="operand"){let o=r.value;if(typeof o!="object"||o==null)continue;if(!o.endColumn&&!o.endRow){let h=o4(e,o);if(!h)throw new vn("Unrecognised reference to cell","#REF!");let p=n(h.row,h.column);if(!p||p.isValueReady())continue;yield h;continue}if(!o.endColumn||!o.endRow)throw new vn("Incomplete range reference","#REF!");let s=bA(e,o.row),a=bA(e,o.endRow),l=Math.min(s,a),c=Math.max(s,a),d=wA(e,o.column),u=wA(e,o.endColumn);for(let h of Z4e(e,l,c,d,u)){let p=n(h.row,h.column);!p||p.isValueReady()||(yield h)}continue}for(let o=0;o<r.operands.length;o++)i.push(r.operands[o])}}function zl(e,t,n){let i=e[Symbol.iterator](),r=new Array(n);for(let o=0;o<n;o++){let s=i.next();if(s.done)throw new vn(`${t}: expected exactly ${n} arguments`);r[o]=s.value}if(!i.next().done)throw new vn(`${t}: expected exactly ${n} arguments`);return r}function G0(e){return{*[Symbol.iterator](){for(let t of e)t!=null&&t!==""&&(yield t)}}}function Q4e(e,t,n,i){let r=[];for(let o of e)if(r.push(o),r.length>i)throw new vn(`${t}: expected at most ${i} arguments`);if(r.length<n)throw new vn(`${t}: expected at least ${n} arguments`);return r}var VL=e=>e.kind==="range",oX=e=>e.kind==="value",J4e=["<=",">=","<>","<",">","="];function eOe(e){for(let t of J4e)if(e.startsWith(t))return t;return null}function GL(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(e instanceof Date)return+e;if(typeof e=="string"){let t=Number(e);if(!Number.isNaN(t))return t}return null}function sX(e){if(e==null)return"";switch(typeof e){case"string":return e;case"number":return String(e);case"boolean":return e?"TRUE":"FALSE"}return e instanceof Date?String(+e):String(e)}function tOe(e){let t="^";for(let n=0;n<e.length;n++){let i=e[n];if(i==="~"&&n+1<e.length&&(e[n+1]==="*"||e[n+1]==="?")){t+="\\"+e[++n];continue}if(i==="*"){t+=".*";continue}if(i==="?"){t+=".";continue}/[-/\\^$*+?.()|[\]{}]/.test(i)?t+="\\"+i:t+=i}return t+="$",new RegExp(t,"i")}var nOe=(e,t,n)=>{let i=GL(t),r=GL(n);switch((i==null||r==null)&&(i=t,r=sX(n).toUpperCase()),e){case"<":return r<i;case">":return r>i;case"<=":return r<=i;case">=":return r>=i;case"=":return r===i;case"<>":return r!==i}return!1},iOe=(e,t,n)=>{let i=sX(n),r=t.test(i);return e==="="?r:!r},rOe=e=>e==null||e==="";function aX(e){if(typeof e=="number")return s=>GL(s)===e;if(typeof e!="string")return s=>e===s;let t=e.trim();if(t==="")return rOe;let n=eOe(t),i=n?t.substring(n.length):t;if(!/[*?]/.test(i))return nOe.bind(null,n??"=",i.toUpperCase());if(n&&n!=="="&&n!=="<>")throw new vn("Invalid criteria: wildcards with comparator","#VALUE!");let o=tOe(i);return iOe.bind(null,n??"=",o)}var eY=(e,t,n)=>{if(!n||t===0||n.absolute)return;let{visibleCols:i,colModel:r}=e,o=i.allCols,s=N4e(r,o,n.id);if(s==null)return;let a=s+t;if(a<0)return;let l=B4e(o,a);l&&(n.id=l)},tY=(e,t,n,i)=>{if(!n||t===0||n.absolute)return;if(i){let a=Number(n.id);if(!Number.isFinite(a))return;n.id=String(a+t);return}let r=r4(e,n.id);if(r==null)return;let o=r+t;if(o<1)return;let s=JZ(e,o);s&&(n.id=s)},oOe=e=>!!e&&typeof e=="object"&&e!==null&&"row"in e&&"column"in e,lX=(e,t,n,i,r)=>{if(t.type==="operand"){let{value:o}=t;if(!oOe(o))return;let{row:s,column:a,endRow:l,endColumn:c}=o;tY(e,n,s,r),eY(e,i,a),tY(e,n,l,r),eY(e,i,c);return}if(t.type==="operation")for(let o of t.operands)lX(e,o,n,i,r)},sOe=({values:e})=>{let t=0;for(let n of e)n!=null&&n!==""&&!isNaN(n)&&t++;return t},aOe=({values:e})=>{let t=0;for(let n of e)n!=null&&n!==""&&t++;return t},lOe=({values:e})=>{let t=0;for(let n of e)(n==null||n==="")&&t++;return t},cOe=({args:e})=>{let[t,n]=zl(e,"COUNTIF",2);if(!VL(t))throw new vn("COUNTIF: first argument must be a range","#VALUE!");if(!oX(n))throw new vn("COUNTIF: second argument must be a value (criteria)","#VALUE!");let i=aX(n.value),r=0;for(let o of t)i(o)&&r++;return r},dOe=()=>new Date,uOe=()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},hOe=({values:e})=>{let[t,n]=zl(e,"EQUALS",2);return t===n},pOe=({values:e})=>{let[t,n]=zl(e,"NOT_EQUALS",2);return t!==n},fOe=({values:e})=>{let[t,n]=zl(e,"GT",2);return t>n},gOe=({values:e})=>{let[t,n]=zl(e,"GTE",2);return t>=n},mOe=({values:e})=>{let[t,n]=zl(e,"LT",2);return t<n},vOe=({values:e})=>{let[t,n]=zl(e,"LTE",2);return t<=n},COe=({values:e})=>{let[t,n,i]=zl(e,"IF",3);return t?n:i},bOe=({values:e})=>{let t=null;for(let n of e)n!=null&&(t===null||n<t)&&(t=n);if(t===null)throw new vn("MIN: requires at least one value");return t},wOe=({values:e})=>{let t=null;for(let n of e)n!=null&&(t===null||n>t)&&(t=n);if(t===null)throw new vn("MAX: requires at least one value");return t},yOe=e=>typeof e=="number"&&Number.isFinite(e),cX=1440*60*1e3;function SOe(e){return e.getTime()/cX}function IA(e){return new Date(e*cX)}function N0(e){return e instanceof Date}function Ya(e,t){if(yOe(t))return t;if(N0(t))return SOe(t);if(typeof t=="boolean")return t?1:0;if(typeof t=="string"){let n=Number(t.trim());if(Number.isFinite(n))return n}throw new vn(`${e}: values must be numeric`,"#VALUE!")}var nY=({values:e})=>{let t=1;for(let n of G0(e)){let i=Ya("PRODUCT",n);if(i!=null){if(i===0)return 0;t*=i}}return t},xOe=({values:e})=>{let[t,n]=zl(G0(e),"DIVIDE",2),i=Ya("DIV",t),r=Ya("DIV",n);if(i==null||r==null)throw new vn("DIV: non-numeric argument","#VALUE!");if(r===0)throw new vn("DIV: division by zero","#DIV/0!");return i/r},CL=({values:e})=>{let t=!1,n=0,i=!1;for(let r of G0(e)){t||(t=N0(r));let o=Ya("SUM",r);o!=null&&(n+=o,i=!0)}if(!i)throw new vn("SUM: requires at least one numeric value","#PARSE!");return t?IA(n):n},EOe=({values:e})=>{let[t,n]=zl(G0(e),"MINUS",2),i=Ya("MINUS",t),r=Ya("MINUS",n);if(i==null||r==null)throw new vn("MINUS: non-numeric argument","#VALUE!");let o=N0(t),s=N0(n);return o&&!s?IA(i-r):i-r},DOe=({values:e})=>{let[t]=zl(e,"PERCENT",1),n=Ya("PERCENT",t);if(n==null)throw new vn("PERCENT: non-numeric argument","#VALUE!");return n/100},iY=({values:e})=>{let[t,n]=zl(e,"POWER",2),i=Ya("POWER",t),r=Ya("POWER",n);if(i==null||r==null)throw new vn("POWER: non-numeric argument","#VALUE!");return Math.pow(i,r)},_Oe=({values:e})=>{let t=0,n=0,i=!0;for(let o of G0(e)){let s=Ya("AVG",o);s!=null&&(t+=s,n++,i&&(i=N0(o)))}if(n===0)throw new vn("AVG: requires at least one value");let r=t/n;return i?IA(r):r},AOe=({values:e})=>{let t=!0,n=[];for(let o of G0(e)){let s=Ya("MEDIAN",o);if(s==null)throw new vn("MEDIAN: all values must be numbers","#VALUE!");n.push(s),t&&(t=N0(o))}if(n.length===0)throw new vn("MEDIAN: requires at least one value");n.sort((o,s)=>o-s);let i=Math.floor(n.length/2),r=n.length%2===1?n[i]:(n[i-1]+n[i])/2;return t?IA(r):r},ROe=()=>Math.random(),FOe=({args:e})=>{let[t,n,i]=Q4e(e,"SUMIF",2,3);if(!VL(t))throw new vn("SUMIF: first argument must be a range","#VALUE!");if(!oX(n))throw new vn("SUMIF: second argument must be a value (criteria)","#VALUE!");if(i&&!VL(i))throw new vn("SUMIF: third argument must be a range (sum_range)","#VALUE!");let r=aX(n.value);if(!i){let d=0;for(let u of t)if(r(u)){let h=Ya("SUMIF",u);h!=null&&(d+=h)}return d}let o=t.rowEnd-t.rowStart,s=i.rowEnd-i.rowStart;if(o!==s)throw new vn("SUMIF: ranges have different sizes","#VALUE!");let a=t[Symbol.iterator](),l=i[Symbol.iterator](),c=0;for(;;){let d=a.next(),u=l.next();if(d.done||u.done){if(d.done!==u.done)throw new vn("SUMIF: ranges have different sizes","#VALUE!");break}if(r(d.value)){let h=Ya("SUMIF",u.value);h!=null&&(c+=h)}}return c},bL=({values:e})=>{let t="";for(let n of e)if(n!=null)switch(typeof n){case"string":{t+=n;break}case"number":{t+=String(n);break}case"boolean":{t+=n?"TRUE":"FALSE";break}case"object":{t+=n.toString();break}default:throw new vn("CONCAT: unsupported value type","#VALUE!")}return t},MOe={IF:COe,NOW:dOe,TODAY:uOe,PRODUCT:nY,SUM:CL,ADD:CL,SUMIF:FOe,POWER:iY,MIN:bOe,MAX:wOe,AVERAGE:_Oe,MEDIAN:AOe,COUNT:sOe,COUNTA:aOe,COUNTBLANK:lOe,COUNTIF:cOe,RAND:ROe,CONCAT:bL,CONCATENATE:bL,"+":CL,"-":EOe,"*":nY,"/":xOe,"^":iY,"%":DOe,"=":hOe,"&":bL,"<>":pOe,">":fOe,">=":gOe,"<":mOe,"<=":vOe},IOe=class{constructor(e,t,n,i){this.rowNode=e,this.column=t,this.formulaString=n,this.beans=i,this.error=null,this.ast=null,this.astStale=!0,this._value=void 0,this._valueStale=!0}setFormulaString(e){this.formulaString!==e&&(this.formulaString=e,this.astStale=!0,this._valueStale=!0)}setComputedValue(e){this._value=e,this._valueStale=!1,this.error=null}setError(e){this.error=e,this._valueStale=!1}isValueReady(){return!this._valueStale}getValue(){return this.error?.type??this._value}getError(){return this.error}getAst(){if(!this.astStale)return this.ast;let e=NL(this.beans,this.formulaString);return this.ast=e??null,this.astStale=!1,this.ast}},TOe=class extends K{constructor(){super(...arguments),this.beanName="formula",this.cachedResult=new WeakMap,this.colRefMap=new Map,this.active=!1}setFormulasActive(e){let n=e.list.some(i=>i.isAllowFormula())&&this.checkForIncompatibleServices(e);n!==this.active&&(this.active=n,this.refreshFormulas(!0))}checkForIncompatibleServices(e){return this.gos.get("masterDetail")?(X(295,{blockedService:"Master Detail"}),!1):this.gos.get("treeData")?(X(295,{blockedService:"Tree Data"}),!1):this.gos.get("enableCellExpressions")?(X(295,{blockedService:"Cell Expressions"}),!1):e.list.every(t=>t.isAllowPivot()||t.isPivotActive()?(X(295,{blockedService:"Column Pivoting"}),!1):t.isAllowRowGroup()||t.isRowGroupActive()?(X(295,{blockedService:"Row Groups"}),!1):t.isAllowValue()||t.isValueActive()||t.getAggFunc()?(X(295,{blockedService:"Value Aggregation"}),!1):!0)}postConstruct(){this.setupFunctions();let e=()=>{this.active&&this.refreshFormulas(!0)},t=()=>{this.active&&this.setupColRefMap()};this.addManagedPropertyListeners(["masterDetail","enableCellExpressions"],n=>{let{colModel:i}=this.beans;i.cols?.list.some(o=>o.isAllowFormula())&&this.beans.colModel.refreshAll(Rl(n.source))}),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:e,cellValueChanged:e,rowDataUpdated:e,newColumnsLoaded:t,columnMoved:t})}updateFormulaByOffset(e){let{value:t,rowDelta:n=0,columnDelta:i=0,useRefFormat:r=!0}=e;try{let o=!r,s=NL(this.beans,t,o);return lX(this.beans,s,n,i,o),JK(this.beans,s,r,o)}catch{return t}}setupFunctions(){this.supportedOperations=new Map(Object.entries(MOe));let e=this.gos.get("formulaFuncs");e&&Object.keys(e).forEach(t=>{this.supportedOperations.set(t.toUpperCase(),e[t].func)})}setupColRefMap(){if(!this.active){this.colRefMap=new Map;return}let e="abcdefghijklmnopqrstuvwxyz",t=e.length,n=this.beans.colModel.getCols(),i=new Map,r=0;n?.forEach(o=>{if(!o.isPrimary())return;let s="",a=r++;for(;s=e[a%t]+s,!(a<t);)a=Math.floor(a/t)-1;o.formulaRef!==s.toUpperCase()&&(o.formulaRef=s.toUpperCase(),o.dispatchColEvent("formulaRefChanged","api")),i.set(s.toUpperCase(),o)}),this.colRefMap=i,this.refreshFormulas(!0)}getColByRef(e){return this.colRefMap.get(e.toUpperCase())??null}getColRef(e){for(let[t,n]of this.colRefMap.entries())if(n===e)return t;return null}refreshFormulas(e){this.cachedResult=new WeakMap,e&&this.beans.rowRenderer.refreshCells({suppressFlash:!0,force:!0})}isFormula(e){return this.active&&Fd(e)}normaliseFormula(e,t=!1){try{let n=NL(this.beans,e);return JK(this.beans,n,!t,!1)}catch{return null}}getFormulaError(e,t){return this.cachedResult.get(t)?.get(e)?.error??null}getFunction(e){return this.supportedOperations.get(e.toUpperCase())}ensureCellFormula(e,t){let n=this.cachedResult.get(e),i=n?.get(t);if(i)return i;let r=this.getFormulaFromDataSource(e,t)??this.fetchRawValue(t,e);return typeof r!="string"||r[0]!=="="?null:(i=new IOe(e,t,r,this.beans),n||(n=new Map,this.cachedResult.set(e,n)),n.set(t,i),i)}getFormulaFromDataSource(e,t){let n=this.beans.formulaDataSvc;if(n?.hasDataSource())return n.getFormula({column:t,rowNode:e})}fetchRawValue(e,t){return this.beans.valueSvc.getValue(e,t,!1,"ui")}getVisitorContext(){if(this.activeCtx)return this.activeCtx;let e=new Map,t=(r,o)=>{let s=e.get(r);if(s?.has(o))throw new vn("Circular reference","#CIRCREF!");s||(s=new Set,e.set(r,s)),s.add(o)},n=(r,o)=>{let s=e.get(r);s&&(s.delete(o),s.size===0&&e.delete(r))},i=r=>{for(let[o,s]of e)for(let a of s)this.ensureCellFormula(o,a)?.setError(r)};return this.activeCtx={setVisited:n,setVisiting:t,errorAllVisitors:i}}makeFormulaFrame(e){let n=this.ensureCellFormula(e.row,e.column).getAst();if(!n)throw new vn("Expected parsable formula","#PARSE!");let i=X4e(this.beans,n,this.ensureCellFormula.bind(this));return{address:e,ast:n,unresolvedDepIterator:i}}resolveValue(e,t){let n=this.ensureCellFormula(t,e);if(!n)return this.fetchRawValue(e,t);if(n.isValueReady())return n.getValue();let i=!!this.activeCtx,{setVisited:r,setVisiting:o,errorAllVisitors:s}=this.getVisitorContext(),a=[];try{for(o(t,e),a.push(this.makeFormulaFrame({row:t,column:e}));a.length;){let{address:l,ast:c,unresolvedDepIterator:d}=a[a.length-1],{row:u,column:h}=l,p=this.ensureCellFormula(u,h);if(p.isValueReady()){if(a.pop(),r(u,h),p.error)throw p.error;continue}let f=d.next();if(!f.done){let m=f.value,w=this.ensureCellFormula(m.row,m.column);if(!w||w.isValueReady())continue;o(m.row,m.column),a.push(this.makeFormulaFrame(m));continue}let g=nX(this.beans,c,m=>{let w=this.ensureCellFormula(m.row,m.column);if(w){if(!w.isValueReady())throw new vn("Internal scheduling error");let x=w.getError();if(x)throw x;return w.getValue()}return this.fetchRawValue(m.column,m.row)},{row:u,column:h}),C=p.getError();if(C)throw r(u,h),C;p.setComputedValue(g),r(u,h),a.pop()}if(!n.isValueReady())throw new vn("Internal scheduling error");return n.getValue()}catch(l){let c=l instanceof vn?l:new vn(String(l?.message??l));return s(c),c.type}finally{i||(this.activeCtx=null)}}},POe={moduleName:"Formula",version:Lt,beans:[TOe,R4e],dependsOn:[HZ],css:[A4e]},kOe=".ag-sparkline-wrapper{height:100%;line-height:normal;position:absolute;top:0;width:100%}",wL=Symbol("WrappedFunctionMarker"),rY=(e,t)=>{if(e[wL])return e;let n=(...i)=>t(e,...i);return n[wL]=wL,n};function LOe(e){return{content:`${e.xValue} ${e.yValue}`}}function OOe(e){return{content:`${e.yValue}`}}var NOe=class extends pe{constructor(){super({tag:"div",cls:"ag-sparkline-wrapper",children:[{tag:"span",ref:"eSparkline"}]}),this.eSparkline=q,this.cachedWidth=0,this.cachedHeight=0,this.dataRef=[],this.processedData=[]}postConstruct(){this.env=this.beans.environment,this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes","styleNonce"],()=>this.refresh(this.params))}createListener(e=!0){return()=>this.updateSize(this.params?.column?.getActualWidth()??0,(this.params?.node.rowHeight??0)-2,e)}initGridObserver(){let e=this.createListener(),t=this.createListener(!1),n=this.params?.column,i=this.params?.node;n.__addEventListener("columnStateUpdated",e),i.__addEventListener("heightChanged",e),this.addDestroyFunc(()=>{n.__removeEventListener("columnStateUpdated",e),i.__removeEventListener("heightChanged",e)}),t()}updateSize(e,t,n=!0){if(e-=this.env.getCellPadding(),e!==this.cachedWidth||t!==this.cachedHeight){this.cachedWidth=e,this.cachedHeight=t;let i=this.refresh.bind(this);n?Jw(()=>this.isAlive()&&i()):i()}}init(e){this.params=e,this.initGridObserver()}refresh(e=this.params){var t;this.params=e;let n=this.cachedWidth,i=this.cachedHeight,r=this.gos.get("styleNonce");if(!this.sparklineInstance&&e&&n>0&&i>0){if(this.sparklineOptions=ce(T(T({container:this.eSparkline,width:n,height:i},e.sparklineOptions),r?{styleNonce:r}:{}),{data:this.processData(e.value)}),(t=this.sparklineOptions).type??(t.type="line"),this.sparklineOptions.tooltip?.renderer)this.wrapTooltipRenderer();else{let s=this.getDefaultTooltipRenderer();this.sparklineOptions.tooltip=ce(T({},this.sparklineOptions.tooltip),{renderer:s})}let o=this.sparklineOptions?.theme;return this.sparklineOptions.type==="bar"&&this.sparklineOptions.itemStyler?this.wrapItemStyler(this.sparklineOptions):o?.overrides?.bar?.series?.itemStyler&&this.wrapItemStyler(o.overrides.bar.series),this.sparklineInstance=e.createSparkline(this.sparklineOptions),!0}else if(this.sparklineInstance)return this.sparklineInstance.update(T(ce(T({},this.sparklineOptions),{data:this.processData(e?.value),width:n,height:i}),r?{styleNonce:r}:{})),!0;return!1}processData(e){return e?.length?(this.dataRef!==e&&(this.dataRef=e,this.processedData=Array.isArray(e[0])?e.filter(t=>t!=null):e),this.processedData):e??[]}createContext(){return{data:this.params?.data,cellData:this.params?.value}}getDefaultTooltipRenderer(e){let t=e?.title,n=this.sparklineOptions.xKey,i=Array.isArray(this.sparklineOptions.data?.[0]);return!t&&(n||i)?LOe:OOe}wrapItemStyler(e){e.itemStyler=rY(e.itemStyler,(t,n)=>t(ce(T({},n),{context:this.createContext()})))}wrapTooltipRenderer(){this.sparklineOptions.tooltip=ce(T({},this.sparklineOptions.tooltip),{renderer:rY(this.sparklineOptions.tooltip.renderer,(e,t)=>{let n=e(ce(T({},t),{context:this.createContext()}));return typeof n=="string"?n:T(T({},this.getDefaultTooltipRenderer(n)(t)),n)})})}destroy(){super.destroy(),this.sparklineInstance?.destroy()}},oY="Sparklines",BOe={moduleName:oY,version:Lt,dependsOn:[ti],validate:()=>({isValid:!1,message:g_(258)}),with:e=>(e.setup(),{moduleName:oY,version:Lt,dependsOn:[ti],css:[kOe],userComponents:{agSparklineCellRenderer:{classImp:NOe,params:{createSparkline:e.createSparkline}}},validate:()=>({isValid:!0})})},VOe=".ag-find-cell{display:block;overflow:hidden;text-overflow:ellipsis}.ag-find-match{background-color:var(--ag-find-match-background-color);color:var(--ag-find-match-color)}.ag-find-active-match{background-color:var(--ag-find-active-match-background-color);color:var(--ag-find-active-match-color)}";function GOe(e){e.findSvc?.next()}function HOe(e){e.findSvc?.previous()}function zOe(e){return e.findSvc?.totalMatches??0}function jOe(e,t,n){e.findSvc?.goTo(t,n)}function UOe(e){e.findSvc?.clearActive()}function WOe(e){return e.findSvc?.activeMatch}function $Oe(e,t){let{node:n,column:i}=t;return e.findSvc?.getNumMatches(n,i)??0}function qOe(e,t){return e.findSvc?.getParts(t)??[]}function KOe(e){return e.findSvc?.refresh(!0)}var YOe={tag:"span",cls:"ag-find-cell"},ZOe=class extends pe{constructor(){super(YOe)}init(e){this.refresh(e)}refresh(e){let{node:t,column:n}=e,{findSvc:i,valueSvc:r}=this.beans,{value:o,valueFormatted:s}=r.getValueForDisplay({column:n,node:t,includeValueFormatted:!0}),a=s??o??"",l=this.getGui();at(l);let c=i?.getParts({value:a,node:t,column:n??null});if(!c)l.textContent=ca(a)??"",l.classList.remove("ag-find-cell-active-match");else{let d=!1;for(let{value:u,match:h,activeMatch:p}of c){let f=ca(u)??"";if(h){let g=bt({tag:"mark",cls:"ag-find-match"});g.textContent=f,p&&(g.classList.add("ag-find-active-match"),d=!0),l.appendChild(g)}else l.appendChild(document.createTextNode(f))}l.classList.toggle("ag-find-cell-active-match",d)}return!0}};function sY(e){return e?.toLocaleLowerCase()}function By(e,t,n){let i=t(ca(n)),r=0;if(i?.length){let o=-1;for(;o=i.indexOf(e,o+1),o!=-1;)r++}return r}var XOe=class extends K{constructor(){super(...arguments),this.beanName="findSvc",this.active=!1,this.topMatches=new Map,this.topNodes=[],this.topNumMatches=0,this.centerMatches=new Map,this.centerNodes=[],this.centerNumMatches=0,this.bottomMatches=new Map,this.bottomNodes=[],this.caseFormat=sY,this.scrollOnRefresh=!1,this.totalMatches=0}postConstruct(){if(!nn(this.gos))return;let e=this.refresh.bind(this,!1),t=this.refresh.bind(this,!0),n=$n(this,()=>{this.isAlive()&&t()},0);this.refreshDebounced=n,this.addManagedPropertyListener("findSearchValue",e),this.addManagedPropertyListener("findOptions",({currentValue:r,previousValue:o})=>{Pu(r,o)||e()}),this.addManagedPropertyListeners(["groupSuppressBlankHeader","showOpenedGroup"],t),this.addManagedEventListeners({modelUpdated:t,displayedColumnsChanged:t,pinnedRowDataChanged:t,cellValueChanged:n,rowNodeDataChanged:n});let i=this.beans.rowSpanSvc;i&&this.addManagedListeners(i,{spannedCellsUpdated:n}),e()}next(){this.findAcrossContainers(!1,["top",null,"bottom"],1,1)}previous(){this.findAcrossContainers(!0,["bottom",null,"top"],this.totalMatches,-1)}goTo(e,t){if(!t&&e===this.activeMatch?.numOverall)return;let{topMatches:n,topNumMatches:i,centerMatches:r,centerNumMatches:o,bottomMatches:s}=this;if(e<=i){this.goToInContainer(n,e,0);return}if(e<=o){this.goToInContainer(r,e,i);return}this.goToInContainer(s,e,i+o)}clearActive(){this.activeMatch&&this.setActive(void 0)}isMatch(e,t){return this.active&&!!this.getMatches(e.rowPinned).get(e)?.some(([n])=>n===t)}getNumMatches(e,t){return this.getMatches(e.rowPinned).get(e)?.find(([n])=>n===t)?.[1]??0}getParts(e){let{value:t,node:n,column:i,precedingNumMatches:r}=e,o=this.findSearchValue,s=ca(t)??"";if(jt(o))return[{value:s}];let a=this.caseFormat(s)??"",l=this.getActiveMatchNum(n,i)-(r??0),c=0,d=0,u=o.length,h=[];for(;;){let p=a.indexOf(o,c);if(p!=-1){d++,p>c&&h.push({value:s.slice(c,p)});let f=p+u;h.push({value:s.slice(p,f),match:!0,activeMatch:d===l}),c=f}else return c<s.length&&h.push({value:s.slice(c)}),h}}registerDetailGrid(e,t){let n=this.gos;if(!nn(n))return;let i=()=>n.get("findOptions")?.searchDetail,r=o=>{let a=this.centerMatches.get(e)?.[0]?.[1]??0;o!==a&&this.refreshDebounced()};t.addEventListener("findChanged",o=>{t.isDestroyed()||!this.isAlive()||!this.active||!i()||r(o.totalMatches)}),t.addEventListener("gridPreDestroyed",()=>{if(!this.isAlive()||!this.active||!i())return;let o=e.parent,s=this.findSearchValue;if(!o||!s)return;let a=n.get("detailCellRendererParams")?.getFindMatches?.({node:o,data:o.data,findSearchValue:n.get("findSearchValue"),updateMatches:this.refreshDebounced,getMatchesForValue:l=>By(s,this.caseFormat,l)})??0;r(a)}),i()&&t.setGridOption("findSearchValue",n.get("findSearchValue"))}refresh(e){let t=new Set([...this.topNodes,...this.centerNodes,...this.bottomNodes]);this.topNodes=[],this.centerNodes=[],this.bottomNodes=[];let{topNodes:n,topMatches:i,centerMatches:r,centerNodes:o,bottomNodes:s,bottomMatches:a,beans:{gos:l,visibleCols:c,rowModel:d,valueSvc:u,pinnedRowModel:h,pagination:p,rowSpanSvc:f,masterDetailSvc:g,colModel:C},findSearchValue:m}=this,w=l.get("findOptions"),x=w?.caseSensitive?M=>M??void 0:sY;this.caseFormat=x;let D=l.get("findSearchValue"),F=x(D?.trim());this.findSearchValue=F,i.clear(),r.clear(),a.clear();let L=e?this.activeMatch:void 0;this.activeMatch=void 0;let V=l.get("masterDetail")&&w?.searchDetail&&g;if(jt(F)){if(this.active=!1,this.topNumMatches=0,this.centerNumMatches=0,this.totalMatches=0,this.refreshRows(t),V){let M=g.store;for(let ee of Object.keys(M))M[ee]?.api?.findClearActive()}jt(m)||this.dispatchFindChanged();return}let B=c.allCols,P=l.getCallback("isFullWidthRow"),U=l.get("detailCellRendererParams"),A=l.get("fullWidthCellRendererParams"),I=l.get("groupRowRendererParams"),j=MZ(l),G=C.isPivotMode(),Q=0,le,me,ge=!1,se=(M,ee,te,ue)=>{if(!te)return;let ae=le.get(M);ae||(ae=[],le.set(M,ae),me.push(M),ue||t.add(M)),ae.push([ee,te]),Q+=te},de=M=>{if(ge){let ae=M.rowIndex,Ce=M.parent;for(;ae==null&&Ce;)ae=Ce.rowIndex,Ce=Ce.parent;if(ae==null||!p.isRowInPage(ae))return}let ee=M.hasChildren();if(!PZ(j,M,ee,G,IZ(j,M,ee),TZ(j,M,ee)))return;let te=M.data;if(P?.({rowNode:M})){if(A){let ae=A.getFindMatches?.({node:M,data:te,findSearchValue:D,updateMatches:this.refreshDebounced,getMatchesForValue:Ce=>By(F,x,Ce)})??0;se(M,null,ae)}return}if(C_(l,M,G)){let ae,Ce=I?.getFindText;if(Ce){let Fe=u.getValueForDisplay({node:M}).value;ae=Ce(Oe(l,{value:Fe,node:M,data:te,column:null,colDef:null,getValueFormatted:()=>{let{valueFormatted:Me}=u.getValueForDisplay({node:M,includeValueFormatted:!0});return Me}}))}else{let{value:Fe,valueFormatted:Me}=u.getValueForDisplay({node:M,includeValueFormatted:!0});ae=Me??Fe}let Ae=By(F,x,ae);se(M,null,Ae);return}let ue=M.level>0&&l.get("groupHideOpenParents")&&M.parent?.getFirstChild()===M&&!M.parent?.expanded;for(let ae of B){if(gy(ae))continue;let Ce=f?.getCellSpan(ae,M);if(Ce&&Ce.firstNode!==M||ae.colDef.showRowGroup&&ue)continue;let Ae,Fe=ae.colDef,Me=Fe.getFindText;if(Me){let Ze=u.getValueForDisplay({column:ae,node:M}).value;Ae=Me(Oe(l,{value:Ze,node:M,data:te,column:ae,colDef:Fe,getValueFormatted:()=>{let{valueFormatted:et}=u.getValueForDisplay({column:ae,node:M,includeValueFormatted:!0});return et}}))}else{let{value:Ze,valueFormatted:et}=u.getValueForDisplay({column:ae,node:M,includeValueFormatted:!0});Ae=et??Ze}let Ve=By(F,x,Ae);se(M,ae,Ve)}if(M.master&&V){let ae=M.detailNode;if(ae){let Ce=ae.detailGridInfo?.api;if(Ce){Ce.setGridOption("findSearchValue",D);let Ae=Ce.findGetTotalMatches();se(ae,null,Ae);return}}if(U){let Ce=U.getFindMatches?.({node:M,data:te,findSearchValue:D,updateMatches:this.refreshDebounced,getMatchesForValue:Ae=>By(F,x,Ae)})??0;se(ae??{parent:M,dummy:!0},null,Ce,!ae)}}};le=i,me=n,h?.forEachPinnedRow("top",de),this.topNumMatches=Q;let he=Q;le=r,me=o,Q=0,ge=!!p&&!!w?.currentPageOnly,d.forEachNodeAfterFilterAndSort(de,!0),this.centerNumMatches=Q,he+=Q,le=a,me=s,Q=0,ge=!1,h?.forEachPinnedRow("bottom",de),he+=Q,this.totalMatches=he,this.active=!0,this.refreshRows(t),L&&this.resetActiveMatch(L),this.dispatchFindChanged()}resetActiveMatch(e){let{column:t,numInMatch:n}=e,i=e.node;if(i.dummy){let c=i.parent?.detailNode;if(!c)return;i=c}let r=i.rowPinned??null;if(!this.getMatches(r)?.get(i)?.some(([c,d])=>c===t&&d>=n))return;let s=0;r==null?s=this.topNumMatches:r==="bottom"&&(s=this.topNumMatches+this.centerNumMatches),(()=>{let c=this.getMatches(r);for(let d of c.keys()){let u=d===i,h=c.get(d);for(let[p,f]of h){if(u&&p===t){s+=n;return}s+=f}}})();let l=ce(T({},e),{node:i,numOverall:s});this.activeMatch=l,this.refreshRows(new Set([i]),t==null?void 0:new Set([t])),this.scrollOnRefresh&&(this.scrollOnRefresh=!1,this.scrollToActive(l)),this.setDetailActive(l)}refreshRows(e,t){e.size&&this.beans.rowRenderer.refreshCells({rowNodes:[...e],columns:t?[...t]:void 0,force:!0,suppressFlash:!0})}findAcrossContainers(e,t,n,i){if(!this.totalMatches){this.setActive();return}let r=this.activeMatch,o=t;if(r){let{column:s,node:a,numInMatch:l,numOverall:c}=r,d=a.rowPinned??null,u=c+i;if(this.findInContainer(d,e,u,a,s,l))return;let p=t.indexOf(d),f=t.length;if(t.slice(p+1,f).some(C=>this.findInContainer(C,e,u)))return;o=t.slice(0,p+1)}o.some(s=>this.findInContainer(s,e,n))}findInContainer(e,t,n,i,r,o){let s=this.getMatches(e),a=this.getRowNodes(e),l=t?-1:1;if(i!=null){let h=s.get(i),p=h?.findIndex(([g])=>g===r);if(p!=null&&p!=-1){let[g,C]=h[p];if(t?o>1:o<C)return this.setActive({column:g,node:i,numInMatch:o+l,numOverall:n}),!0}let f=p!=null&&p!=-1?h?.[p+l]:void 0;if(f){let[g,C]=f;return this.setActive({column:g,node:i,numInMatch:t?C:1,numOverall:n}),!0}}let c;if(i==null)c=a[t?a.length-1:0];else{let h=a.findIndex(p=>p===i);c=a[h+l]}if(c==null)return!1;let d=s.get(c),u=d?.[t?d.length-1:0];if(u){let[h,p]=u;return this.setActive({column:h,node:c,numInMatch:t?p:1,numOverall:n}),!0}return!1}dispatchFindChanged(){let{eventSvc:e,activeMatch:t,totalMatches:n,findSearchValue:i}=this;e.dispatchEvent({type:"findChanged",activeMatch:t,totalMatches:n,findSearchValue:i})}setActive(e){if(e&&e.node.rowIndex==null){let n=e.node,i=n.footer?n.sibling:n.parent;for(;i&&i.level!==-1;)i.expanded=!0,i=i.parent;this.activeMatch=e,this.scrollOnRefresh=!0,this.beans.expansionSvc?.onGroupExpandedOrCollapsed();return}let t=this.activeMatch;this.activeMatch=e,this.refreshAndScrollToActive(e,t),e&&this.setDetailActive(e),this.dispatchFindChanged()}setDetailActive({node:e,numInMatch:t}){e.detail&&e.detailGridInfo?.api?.findGoTo(t)}refreshAndScrollToActive(e,t){if(e||t){let n=new Set,i=new Set,r=!1,o=s=>{if(!s)return;let{node:a,column:l}=s;n.add(a),l==null?r=!0:i.add(l)};o(e),o(t),this.refreshRows(n,r?void 0:i)}e&&this.scrollToActive(e)}scrollToActive({node:{rowPinned:e,rowIndex:t},column:n}){let{ctrlsSvc:i,pagination:r,gos:o}=this.beans,s=i.getScrollFeature();e==null&&t!=null&&(r&&!o.get("findOptions")?.currentPageOnly&&!r.isRowInPage(t)&&r.goToPageWithIndex(t),s.ensureIndexVisible(t)),s.ensureColumnVisible(n)}goToInContainer(e,t,n){let i=n;for(let r of e.keys()){let o=e.get(r);for(let[s,a]of o){if(t<=i+a){this.setActive({column:s,node:r,numInMatch:t-i,numOverall:t});return}i+=a}}}getMatches(e){return e==="top"?this.topMatches:e==="bottom"?this.bottomMatches:this.centerMatches}getRowNodes(e){return e==="top"?this.topNodes:e==="bottom"?this.bottomNodes:this.centerNodes}getActiveMatchNum(e,t){let n=this.activeMatch;return n!=null&&n.node===e&&n.column===t?n.numInMatch:0}destroy(){this.topMatches.clear(),this.topNodes.length=0,this.centerMatches.clear(),this.centerNodes.length=0,this.bottomMatches.clear(),this.bottomNodes.length=0,this.activeMatch=void 0,super.destroy()}},QOe={moduleName:"FindCore",version:Lt,rowModels:["clientSide"],beans:[XOe],userComponents:{agFindCellRenderer:ZOe},css:[VOe]},JOe={moduleName:"Find",version:Lt,apiFunctions:{findGetTotalMatches:zOe,findGoTo:jOe,findNext:GOe,findPrevious:HOe,findGetActiveMatch:WOe,findGetNumMatches:$Oe,findGetParts:qOe,findClearActive:UOe,findRefresh:KOe},dependsOn:[QOe]};function eNe({editSvc:e,gos:t,rowModel:n}){if(!e?.isBatchEditing()){if(!nn(t,n)){X(289,{rowModelType:t.get("rowModelType")});return}e?.setBatchEditing(!0)}}function tNe({editSvc:e}){e?.isBatchEditing()&&(e?.stopEditing(void 0,{cancel:!0,source:"api",forceCancel:!0}),e?.setBatchEditing(!1))}function nNe({editSvc:e}){e?.isBatchEditing()&&(e?.stopEditing(void 0,{source:"api",forceStop:!0}),e?.setBatchEditing(!1))}function iNe(e){return e.editSvc?.isBatchEditing()??!1}var rNe={moduleName:"BatchEdit",version:Lt,beans:[],apiFunctions:{isBatchEditing:iNe,startBatchEdit:eNe,cancelBatchEdit:tNe,commitBatchEdit:nNe},dependsOn:[Vl,ti],css:[]},oNe=class extends K{constructor(e){super(),this.beanName="agChartsExports",this.isEnterprise=!1,this.create=e.create,this._Theme=e._Theme,this._Scene=e._Scene,this.isEnterprise=e.isEnterprise,this._Util=e._Util}};function aY(e){return e.chart!=null?e.chart:e}var sNe=new Set(["__proto__","constructor","prototype"]);function mp(e,t,n){if(e==null)return n;let i=t.split("."),r=e;for(;i.length>1;)if(r=r[i.shift()],r==null)return n;let o=r[i[0]];return o??n}function aNe(e,t,n){if(e==null)return;let i=t.split("."),r=e;i.filter(o=>!sNe.has(o)).forEach((o,s)=>{r[o]||(r[o]={}),s<i.length-1&&(r=r[o])}),r[i[i.length-1]]=n}var lNe={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall",funnel:"funnel",coneFunnel:"cone-funnel",pyramid:"pyramid"},cNe=new Set(["columnLineCombo","areaColumnCombo","customCombo"]),dNe=["grouped","stacked","normalized"],dX={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isStatistical:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isStatistical:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isStatistical:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},funnel:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"cone-funnel":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},pyramid:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function uNe(e){return!!dX[e]}function s4(e){return cNe.has(e)}function Ku(e,t){return!!dX[e]?.[t]}function hNe(e){return Ku(Ei(e),"isEnterprise")}var pNe=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function fNe(e){return pNe.has(e)}function Cp(e){return Ku(e,"isCartesian")}function HL(e){return e==="funnel"||e==="cone-funnel"||e==="pyramid"}function zL(e){return Ku(e,"isPolar")}function gNe(e){return Ku(e,"isRadial")}function Pg(e){return Ku(e,"isHierarchical")}function mNe(e){return Ku(e,"isStatistical")}function Zy(e){return e==="doughnut"?"donut":e}function uX(e){return lNe[e]}function Ei(e){return uX(e)??"line"}function hX(e){return Ku(e,"isPie")}function vNe(e){return e==="pie"||e==="waterfall"||e==="histogram"||e==="funnel"||e==="coneFunnel"||e==="pyramid"}function jL(e){return Pg(Ei(e))?void 0:1}function yA(e){return Pg(Ei(e))?2:vNe(e)?1:void 0}function pX(e){return!s4(e)&&Ku(Ei(e),"canInvert")}function CNe(e){return Ku(Ei(e),"canSwitchDirection")}function a4(e){switch(e){case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":case"stackedLine":case"normalizedLine":case"stackedArea":case"normalizedArea":return`${e}Full`;case"doughnut":return"donut";case"areaColumnCombo":return"AreaColumnCombo";default:return e}}var fX=["number","category","grouped-category","log","time"];function bNe(e){switch(e){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"stackedLine":case"normalizedLine":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function wNe(e,t,n,i,r){let{chartOptionsToRestore:o,chartPaletteToRestore:s,chartThemeToRestore:a,agChartsExports:l}=e,c=_Ne(e),d=l4(c,l._Theme),u=d?{baseTheme:c}:gX(e,c)??{},h=e.getGridOptionsChartThemeOverrides(),p=e.apiChartThemeOverrides,f=Ei(e.chartType),g=e.crossFiltering?SNe(t,e,f):void 0,w=[d?ENe(e,n,(()=>{let x=D=>D?Object.keys(D).some(F=>mp(D[F],"title.enabled",!1)):!1;return x(h)||x(p)})()):void 0,DNe(),i,g,h,p,T({},o??{}),r].filter(x=>!!x).reduce((x,D)=>({baseTheme:x,overrides:D}),u);if(s&&c===a){let x=e.agChartsExports._Theme.getChartTheme(u).palette;yNe(s,x)||(w.palette=s)}return w}function yNe(e,t){let n=(i,r)=>i===r?!0:i?.length!==r?.length?!1:i?.every((o,s)=>o===r?.[s])??!1;return n(e.fills,t.fills)&&n(e.strokes,t.strokes)}function l4(e,t){return Object.keys(t.themes).includes(e)}function SNe(e,t,n){let r={tooltip:{delay:500},legend:{listeners:{legendItemClick:s=>{let a=e.getChart(),l=[s.seriesId,`${s.seriesId}-filtered-out`];for(let c of a.series.filter(d=>l.includes(d.id)))c.toggleSeriesItem(void 0,"category",s.itemId,void 0)}}},listeners:{click:s=>t.crossFilterCallback(s,!0)}};if(n==="pie"||n==="donut")return{[n]:T({series:{fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$if:[{$eq:[{$value:"$parentIndex"},0]},{$mix:[{$value:"$1"},{$ref:"backgroundColor"},.7]},{$value:"$1"}]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"},{$if:[{$eq:[{$value:"$parentIndex"},0]},{$mix:[{$value:"$1"},{$ref:"backgroundColor"},.7]},{$value:"$1"}]}]}}},r)};let o={};return n!=="line"&&(o.fill={$if:[{$isEven:[{$value:"$index"}]},{$palette:"fill"},{$mix:[{$path:["../$prevIndex/fill",{$palette:"fill"}]},{$ref:"backgroundColor"},.7]}]}),{[n]:T({series:T({stroke:{$if:[{$isEven:[{$value:"$index"}]},{$palette:"stroke"},{$mix:[{$path:["../$prevIndex/fill",{$palette:"stroke"}]},{$ref:"backgroundColor"},.7]}]}},o)},r)}}var xNe=fX.reduce((e,t)=>ce(T({},e),{[t]:{title:{_enabledFromTheme:!0}}}),{});function ENe(e,t,n){let i=e.getExtraPaddingDirections();return{common:ce(T({},t?{animation:{duration:500}}:void 0),{axes:xNe,padding:{top:!n&&i.includes("top")?40:20,right:i.includes("right")?30:20,bottom:i.includes("bottom")?40:20,left:i.includes("left")?30:20}})}}function DNe(){return{pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function _Ne(e){let t=e.getChartThemeName(),n=e.getChartThemes();return n.includes(t)||(t=n[0]),t}function gX(e,t){let{customChartThemes:n}=e,i=n?.[t];return i||X(140,{name:t}),i}function c4(e){let t={unhighlightedSeries:{opacity:1},highlightedItem:{strokeWidth:2}};return e||(t.unhighlightedItem={opacity:1}),t}var H0=class{constructor(e){this.chartProxyParams=e,this.clearThemeOverrides=!1,this.agChartsExports=e.agChartsExports,this.chart=e.chartInstance,this.chartType=e.chartType,this.crossFiltering=e.crossFiltering,this.crossFilterCallback=e.crossFilterCallback,this.standaloneChartType=Ei(this.chartType),this.chart==null?this.chart=e.agChartsExports.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(e){this.getChartRef().update(this.getUpdateOptions(e,this.getCommonChartOptions(e.updatedOverrides)))}updateThemeOverrides(e){this.getChartRef().updateDelta({theme:{overrides:e}})}getChart(){return aY(this.chart)}getChartRef(){return this.chart}downloadChart(e,t,n){let{chart:i}=this,r=aY(i),o=t||r.title.node.getPlainText(),{width:s,height:a}=e||{};i.download({width:s,height:a,fileName:o,fileFormat:n})}getChartImageDataURL(e){return this.getChart().getCanvasDataURL(e)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){return this.getChartOptions().theme.overrides??{}}getChartPalette(){return this.agChartsExports._Theme.getChartTheme(this.getChartOptions().theme).palette}setPaired(e){let t=Ei(this.chartProxyParams.chartType);this.chart.updateDelta({theme:{overrides:{[t]:{paired:e}}}})}isPaired(){let e=Ei(this.chartProxyParams.chartType);return mp(this.getChartThemeOverrides(),`${e}.paired`,!0)}lookupCustomChartTheme(e){return gX(this.chartProxyParams,e)}getSeriesGroupType(){}transformCategoryData(e,t){return e.map((n,i)=>{let r=n[t],o=r?.toString?r.toString():"",s=T({},n);return s[t]={id:i,value:r,toString:()=>o},s})}getCommonChartOptions(e){let t=this.clearThemeOverrides?{}:this.chart?.getOptions()??{},n=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;let i=this.chartProxyParams.styleNonce,r=wNe(this.chartProxyParams,this,this.agChartsExports.isEnterprise,this.getChartThemeDefaults(),e??n);return ce(T(ce(T({},t),{mode:"integrated"}),i?{styleNonce:i}:{}),{suppressFieldDotNotation:!0,theme:r,container:this.chartProxyParams.parentElement})}getChartThemeDefaults(){let e={enabled:!0,snap:!0,label:{enabled:!1}},t=this.agChartsExports.isEnterprise?{zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:e},category:{crosshair:e},log:{crosshair:e},time:{crosshair:e}}}:{};t.minHeight=0,t.minWidth=0,t.navigator={enabled:!1,height:18},t.context=this.chartProxyParams.context;let n={common:t};return this.setSeriesChartThemeDefaults(n),n}setSeriesChartThemeDefaults(e){let t=this.getSeriesChartThemeDefaults();t&&(e[this.standaloneChartType]=t)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){return this.clearThemeOverrides?{}:this.chart?.getOptions().theme?.overrides??{}}destroy({keepChartInstance:e=!1}={}){if(e)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},Sp=class extends H0{constructor(){super(...arguments),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(e,t){let n=this.getAxes(e,t);return ce(T({},t),{data:this.getData(e,n),axes:n,series:this.getSeries(e)})}getData(e,t){let n=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&n?this.getCrossFilterData(e):this.getDataTransformedData(e,t)}getDataTransformedData(e,t){let n=t.x.type,{categories:i,data:r}=e,[o]=i;switch(n){case"category":return this.transformCategoryData(r,o.id);case"time":return this.transformTimeData(r,o.id,o.convertTime);default:return r}}getXAxisType(e){return e.grouping?"grouped-category":this.isXAxisOfType(e,"time",t=>t instanceof Date)?"time":this.isXAxisOfType(e,"number")?"number":"category"}isXAxisOfType(e,t,n){let[i]=e.categories;if(i?.chartDataType)return i.chartDataType===t;if(!n)return!1;let r=e.data[0];return r?n(r[i.id]):!1}transformTimeData(e,t,n){return e[0]?.[t]instanceof Date?e:e.map(r=>{let o=r[t];return typeof o=="string"?ce(T({},r),{[t]:n?n(o):Br(o)}):r})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){let[n]=t.categories,i=r=>this.standaloneChartType==="area"?t.getCrossFilteringContext().lastSelectedChartId===t.chartId?r+"-total":r:r+"-total";return e.map(r=>(r.yKey=i(r.yKey),r.listeners={seriesNodeClick:o=>{let s=o.datum[r.xKey],a=o.event.metaKey||o.event.ctrlKey;this.crossFilteringAddSelectedPoint(a,s),this.crossFilterCallback(o)}},r.marker={itemStyler:o=>{let s=o.datum[n.id],a=o.highlightState==="highlighted-item";return{fill:a?"yellow":o.fill,size:a?14:this.crossFilteringPointSelected(s)?8:0}}},this.standaloneChartType==="area"&&(r.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(r.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),r))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();let[t]=e.categories,n=e.fields[0].colId,i=`${n}-filtered-out`,r=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(o=>{let s=o[t.id];this.crossFilteringAllPoints.add(s);let a=this.crossFilteringPointSelected(s);return this.standaloneChartType==="area"&&r===e.chartId&&(o[`${n}-total`]=a?o[n]:o[n]+o[i]),this.standaloneChartType==="line"&&(o[`${n}-total`]=a?o[n]:o[n]+o[i]),o})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}isHorizontal(e){let t=this.standaloneChartType;if(t!=="waterfall"&&t!=="box-plot"&&t!=="range-bar")return!1;let n=e.theme,i=r=>{let o=r?.overrides?.[t]?.series?.direction;return o!=null?o==="horizontal":typeof r?.baseTheme=="object"?i(r.baseTheme):!1};return i(n)}getSeriesChartThemeDefaults(){return{series:{highlight:c4(this.crossFiltering)}}}},ANe=class extends Sp{getSeries(e){let t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(e){return{x:{type:"number",position:"bottom"},y:{type:"number",position:"left"}}}},RNe=class extends Sp{getAxes(e,t){let n=this.isHorizontal(t),i=n?"y":"x",r=n?"x":"y";return{[i]:{type:this.getXAxisType(e),position:n?"left":"bottom"},[r]:{type:"number",position:n?"bottom":"left"}}}getSeries(e){let[t]=e.categories,[n]=e.fields;return[{type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:n.colId,yName:n.displayName??void 0}]}},FNe=class extends H0{getUpdateOptions(e,t){return ce(T({},t),{data:this.transformFunnelCategories(e),series:this.getSeries(e)})}transformFunnelCategories(e){let{data:t}=e,[{id:n}]=e.categories;return t.map((i,r)=>ce(T({},i),{[n]:{name:i[n],id:r,toString:()=>String(i[n])}}))}getSeriesChartThemeDefaults(){let e={crosshair:{enabled:!1}};return T({zoom:{enabled:!1}},this.chartType!=="pyramid"&&{axes:{category:e,number:e}})}getSeries(e){let[{id:t}]=e.categories,[{colId:n}]=e.fields;return[{type:this.standaloneChartType,stageKey:t,valueKey:n}]}},lA="AG-GRID-DEFAULT-LABEL-KEY";function MNe(e,t){let n=mX(e,i,r);return d4(n);function i(s){return t.length}function r(s,a){let l=t[a],c=s[l];return o(c)}function o(s){return s==null?null:String(s)}}function INe(e,t){let n=mX(e,i,r);return d4(n);function i(o){return t(o)?.length??0}function r(o,s){let a=t(o);return a&&a[s]}}function d4(e,t=null,n){let{depth:i,rootValues:r,value:o,children:s}=e;if(r)return r.map(l=>T({[lA]:t},l));if(i===0)return[T({[lA]:t},o)];let a=[];for(let[l,c]of s.entries())a.push(...d4(c,l,!0));return n?[T({[lA]:t,children:a},o??{})]:a}function mX(e,t,n){let i={depth:0,children:new Map};for(let o of e){let s=t(o);r(o,s,n,0,i)}return i;function r(o,s,a,l,c){if(l===s)return l===0?(c.rootValues||(c.rootValues=[]),c.rootValues.push(o)):c.value=o,c;{let d=a(o,l),u=c.children.get(d),h=r(o,s,a,l+1,u||{depth:0,children:new Map});return c.children.set(d,h),c.depth=Math.max(1+h.depth,c.depth),c}}}var TNe=class extends H0{getUpdateOptions(e,t){let{fields:n}=e,[i,r]=n;return ce(T({},t),{series:this.getSeries(i,r),data:this.getData(e,i,r)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200},position:"right"}}}getSeries(e,t){return[{type:this.standaloneChartType,labelKey:lA,sizeKey:e?.colId,sizeName:e?.displayName??void 0,colorKey:t?.colId,colorName:t?.displayName??void 0}]}getData(e,t,n){let{categories:i,data:r,groupData:o,grouping:s}=e;if(s){let a=n?r.concat(o?.map(l=>{let c=T({},l);return delete c[t.colId],c})??[]):r;return INe(a,l=>l[Mc]?.value??null)}else{let a=i.map(({id:l})=>l);return MNe(r,a)}}},PNe=class extends H0{getAxes(e){let t=this.standaloneChartType==="radial-bar";return{angle:{type:t?"angle-number":"angle-category"},radius:{type:t?"radius-category":"radius-number"}}}getSeries(e){let{fields:t,categories:n,seriesGroupType:i}=e,[r]=n,o=this.standaloneChartType==="radial-bar",s=this.getSeriesGroupTypeOptions(i);return t.map(a=>T({type:this.standaloneChartType,angleKey:o?a.colId:r.id,angleName:o?a.displayName??void 0:r.name,radiusKey:o?r.id:a.colId,radiusName:o?r.name:a.displayName??void 0},s))}getSeriesGroupType(){let e=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(e))return;let t=this.getChart().series?.[0]?.properties.toJson(),n=()=>t.normalizedTo?"normalized":"stacked";return e==="nightingale"?t.grouped?"grouped":n():t.stacked?n():"grouped"}getUpdateOptions(e,t){let n=this.getAxes(e);return ce(T({},t),{data:this.getData(e,n),axes:n,series:this.getSeries(e)})}getData(e,t){if(t.angle.type==="angle-category"||t.radius.type==="radius-category"){let[i]=e.categories;return this.transformCategoryData(e.data,i.id)}else return e.data}getSeriesGroupTypeOptions(e){return e?{grouped:e==="grouped"||void 0,stacked:e!=="grouped"||void 0,normalizedTo:e==="normalized"?100:void 0}:{}}getSeriesChartThemeDefaults(){return{series:{highlight:c4(this.crossFiltering)}}}},kNe="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",LNe="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",ONe="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY";function NNe(e,t){return e.reduce((n,i,r,o)=>n.concat(t(i,r,o)),new Array)}var BNe=class extends H0{getUpdateOptions(e,t){let n=LNe,i=ONe,r=kNe;return ce(T({},t),{series:this.getSeries(e,n,i,r),data:this.getData(e,n,i,r)})}getSeries(e,t,n,i){let[r]=e.categories;return[{type:this.standaloneChartType,yKey:i,xKey:t,colorKey:n,yName:r.name,xName:void 0,colorName:void 0}]}getData(e,t,n,i){let[r]=e.categories;return NNe(e.data,(o,s)=>{let a=o[r.id],l=a==null?"":String(a),c={id:s,value:a,toString:()=>l};return e.fields.map(({colId:d,displayName:u})=>ce(T({},o),{[t]:u,[n]:o[d],[i]:c}))})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200},position:"right"},series:{tooltip:{renderer:VNe}}}}};function VNe(e){let{xKey:t,yKey:n,colorKey:i,yName:r,datum:o}=e;return{title:"",data:[{label:r,value:o[n]},{label:o[t],value:i&&o[i]}].map(({label:a,value:l})=>({label:String(a),value:String(l)}))}}var GNe=class extends K{wireBeans(e){this.sortSvc=e.sortSvc,this.gridRowModel=e.rowModel,this.colModel=e.colModel,this.valueSvc=e.valueSvc,this.pivotResultCols=e.pivotResultCols,this.rowNodeSorter=e.rowNodeSorter}getData(e){if(e.crossFiltering){if(e.grouping)return X(141),{chartData:[],colNames:{}};if(!nn(this.gos))return X(142),{chartData:[],colNames:{}}}Ui(this.gos)&&e.pivoting&&this.updatePivotKeysForSSRM();let n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n}extractRowsFromGridRowModel(e){let{crossFiltering:t,startRow:n,endRow:i,valueCols:r,dimensionCols:o,grouping:s,crossFilteringSort:a,combineGroupValues:l}=e,c=[],d={},u={},h={},p={},f=[],g;if(t)p=this.getFilteredRowNodes(),f=this.getAllRowNodes(a),g=f.length;else{let D=this.gridRowModel.getRowCount()-1;n===i&&n===0&&o.length===0&&r.length===0?g=0:g=(i>=0?Math.min(i,D):D)-n+1}if(g>0)for(let D of r){let F=[],L=D.getColDef().pivotKeys;L&&(F=L.slice());let V=D.getColDef().headerName;V&&F.push(V),F.length>0&&(d[D.getId()]=F)}let C=0,m=0,w={};for(let D=0;D<g;D++){let F=t?f[D]:this.gridRowModel.getRow(D+n);if(F.footer||F.detail){C++;continue}let L={node:F};for(let V of o){let B=V.colId,P=this.colModel.getCol(B);if(P){let U=this.valueSvc.getValue(P,F);if(s){let A=U?.toString?String(U.toString()):" ",I=this.getGroupLabels(F,A),j=I.slice().reverse(),G={value:j,id:m++,toString:()=>j.filter(Boolean).join(" - ")};if(l){let le=G.toString(),me=w[le];me?G=me:w[le]=G}L[B]=G,F.group&&(u[I.toString()]=D-C);let Q=I.slice(1,I.length).toString();Q&&(h[Q]=u[Q])}else L[B]=U}else L[zd]=D+1}for(let V of r){let B=V.getColId();if(t){let P=B+"-filtered-out",U=this.valueSvc.getValue(V,F),A=U;U!=null&&(typeof U.toNumber=="function"?A=U.toNumber():typeof U.value=="number"&&(A=U.value)),p[F.id]?(L[B]=A,L[P]=e.aggFunc||e.isScatter?void 0:0):(L[B]=e.aggFunc||e.isScatter?void 0:0,L[P]=A)}else{let P=this.valueSvc.getValue(V,F);P&&typeof P.value=="number"&&(P=P.value),P&&Object.prototype.hasOwnProperty.call(P,"toString")&&(P=parseFloat(P.toString())),L[B]=P!=null&&typeof P.toNumber=="function"?P.toNumber():P}}c.push(L)}let x;if(s){let D=Object.values(h),F=c;c=[],x=[];for(let L=0;L<F.length;L++)(D.includes(L)?x:c).push(F[L])}return{chartData:c,colNames:d,groupChartData:x}}aggregateRowsByDimension(e,t){let n=e.dimensionCols;if(!e.aggFunc||n.length===0)return t;let r=Qe(n)?.colId,o={},s=[];for(let a of t){let l=o;for(let c of n){let d=c.colId,u=a[d];if(d===r){let h=l[u];if(!h){h={__children:[]};for(let p of n){let f=p.colId;h[f]=a[f]}l[u]=h,s.push(h)}h.__children.push(a)}else l[u]||(l[u]={}),l=l[u]}}if(this.gos.assertModuleRegistered("SharedAggregation",1))for(let a of s)for(let l of e.valueCols){let c=l.getColId();if(e.crossFiltering){let d=a.__children.filter(g=>typeof g[c]<"u").map(g=>g[c]),u=P0(this.beans,d,e.aggFunc,l);a[c]=u&&typeof u.value<"u"?u.value:u;let h=`${c}-filtered-out`,p=a.__children.filter(g=>typeof g[h]<"u").map(g=>g[h]),f=P0(this.beans,p,e.aggFunc,l);a[h]=f&&typeof f.value<"u"?f.value:f}else{let d=a.__children.map(h=>h[c]),u=P0(this.beans,d,e.aggFunc,l);a[c]=u&&typeof u.value<"u"?u.value:u}}return s}updatePivotKeysForSSRM(){let e=this.pivotResultCols?.getPivotResultCols()?.list;if(!e)return;let t=this.extractPivotKeySeparator(e);for(let n of e)if(t==="")n.getColDef().pivotKeys=[];else{let i=n.getColId().split(t);n.getColDef().pivotKeys=i.slice(0,i.length-1)}}extractPivotKeySeparator(e){if(e.length===0)return"";let t=(i,r)=>{let o=i.getGroupId();return i.getParent()?t(i.getParent(),o):r.split(o)[1][0]},n=e[0];return n.getParent()==null?"":t(n.getParent(),n.getColId())}getGroupLabels(e,t){let n=[t];for(;e&&e.level!==0;)if(e=e.parent,e)if(e.group){let i=this.colModel.getCol(Mc);if(i){let r=this.valueSvc.getValue(i,e),o=r?.toString?String(r.toString()):" ";n.push(o)}}else n.push(e.key);return n}getFilteredRowNodes(){let e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(e){let t=[];return this.gridRowModel.forEachNode(n=>{t.push(n)}),this.sortRowNodes(t,e)}sortRowNodes(e,t){let n=t===!0?this.sortSvc?.getSortOptions():t;return!n||n.length==0||!this.rowNodeSorter?e:this.rowNodeSorter.doFullSort(e,n)}},HNe=class extends K{constructor(){super(...arguments),this.valueColsWithoutSeriesType=new Set}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.valueSvc=e.valueSvc}postConstruct(){let e=()=>this.valueColsWithoutSeriesType.clear();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e})}getColumn(e){return this.colModel.getColDefCol(e)}getAllDisplayedColumns(){return this.beans.visibleCols.allCols}getColDisplayName(e){return this.colNames.getDisplayNameForColumn(e,"chart")}getColGroupDisplayName(e){return this.colNames.getDisplayNameForColumnGroup(e,"chart")}getRowGroupColumns(){return this.beans.rowGroupColsSvc?.columns??[]}getGroupDisplayColumns(){return this.beans.showRowGroupCols?.columns??[]}isPivotMode(){return this.colModel.isPivotMode()}isPivotActive(){return this.colModel.isPivotActive()}getChartColumns(){let e=this.colModel.getCols(),t=new Set,n=new Set;for(let i of e){let r=i.getColDef(),o=r.chartDataType;if(o)switch(o){case"category":case"time":t.add(i);continue;case"series":n.add(i);continue;case"excluded":continue;default:X(153,{chartDataType:o});break}if(r.colId==="ag-Grid-AutoColumn"){t.add(i);continue}if(!i.isPrimary()){n.add(i);continue}(this.isInferredValueCol(i)?n:t).add(i)}return{dimensionCols:t,valueCols:n}}isInferredValueCol(e){let t=e.getColId();if(t==="ag-Grid-AutoColumn")return!1;let n=Mi(this.beans,{rowIndex:0,rowPinned:null});if(!n)return this.valueColsWithoutSeriesType.has(t);let i=this.valueSvc.getValue(e,n);i==null&&(i=this.extractLeafData(n,e)),i!=null&&(typeof i.toNumber=="function"?i=i.toNumber():typeof i.value=="number"&&(i=i.value));let r=typeof i=="number"||e.colDef.cellDataType==="number"||["series","time"].includes(e.colDef.chartDataType);return r?this.valueColsWithoutSeriesType.add(t):i==null&&e.colDef.cellDataType!=="number"&&X(265,{colId:t}),r}extractLeafData(e,t){let n=e.data&&this.valueSvc.getValue(t,e);if(n!=null)return n;let i=e.childrenAfterGroup;if(i)for(let r=0,o=i.length;r<o;++r){let s=i[r],a=this.extractLeafData(s,t);if(a!=null)return a}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}},zNe=new Set(["line","groupedColumn","stackedColumn","area","stackedArea"]),jNe=class extends K{constructor(e){super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=e.params.seriesChartTypes??[]}postConstruct(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){let e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{let t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=t?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&X(150),this.seriesChartTypes=this.seriesChartTypes.map(i=>(zNe.has(i.chartType)||(X(151,{chartType:i.chartType}),i.chartType="line"),i));let t=i=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);let r=this.savedCustomSeriesChartTypes.find(o=>o.colId===i.colId);return r||(i.selected&&!this.suppressComboChartWarnings&&X(152,{colId:i.colId}),{colId:i.colId,chartType:"line",secondaryAxis:!1})},n=this.chartDataModel.valueColState.map(t);this.seriesChartTypes=n,this.savedCustomSeriesChartTypes=n,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){let{chartType:e,valueColState:t}=this.chartDataModel,n=e==="columnLineCombo"?"groupedColumn":"stackedArea",i=e==="columnLineCombo"?"line":"groupedColumn",r=t.filter(s=>s.selected),o=Math.ceil(r.length/2);this.seriesChartTypes=r.map((s,a)=>{let l=a>=o?i:n;return{colId:s.colId,chartType:l,secondaryAxis:!1}})}},zd="AG-GRID-DEFAULT-CATEGORY",UNe=class extends K{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.colNames={},this.crossFiltering=!1,this.crossFilteringSort=!0,this.grouping=!1,this.useGroupColumnAsCategory=!1,this.params=e,this.chartId=e.chartId,this.setParams(e)}wireBeans(e){this.rangeSvc=e.rangeSvc,this.chartTranslation=e.chartTranslation}setParams(e){let{chartType:t,pivotChart:n,chartThemeName:i,switchCategorySeries:r,aggFunc:o,cellRange:s,suppressChartRanges:a,unlinkChart:l,crossFiltering:c,crossFilteringSort:d,seriesGroupType:u,useGroupColumnAsCategory:h}=e;this.chartType=t,this.pivotChart=n??!1,this.chartThemeName=i,this.switchCategorySeries=!!r,this.aggFunc=o,this.referenceCellRange=s,this.suppliedCellRange=s,this.suppressChartRanges=a??!1,this.unlinked=!!l,this.crossFiltering=!!c,this.crossFilteringSort=d??!0,this.seriesGroupType=u,this.useGroupColumnAsCategory=!!h}postConstruct(){this.datasource=this.createManagedBean(new GNe),this.chartColSvc=this.createManagedBean(new HNe),this.comboChartModel=this.createManagedBean(new jNe(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){let{cellRange:t,seriesChartTypes:n}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(e),this.updateSelectedDimensions(t?.columns),this.updateCellRanges({setColsFromRange:!0}),(this.isComboChart()||n)&&this.comboChartModel.update(n),this.unlinked||this.updateData()}updateCellRanges(e){let{updatedColState:t,resetOrder:n,maintainColState:i,setColsFromRange:r}=e??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);let{dimensionCols:o,valueCols:s}=this.chartColSvc.getChartColumns(),a=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,n),this.setDimensionCellRange(o,a,t),this.setValueCellRange(s,a,r),!t&&!i&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){let{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();let n={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,crossFilteringSort:this.getCrossFilteringSort(),valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:["scatter","bubble"].includes(this.chartType),combineGroupValues:mNe(Ei(this.chartType))},{chartData:i,colNames:r,groupChartData:o}=this.datasource.getData(n);this.chartData=i,this.groupChartData=o,this.colNames=r,this.categoryAxisType=void 0}isGrouping(){let e=this.gos.get("treeData"),t=e?null:this.chartColSvc.getRowGroupColumns(),n=e||t&&t.length>0,i=this.getSelectedDimensions().map(({colId:s})=>s),o=this.chartColSvc.getGroupDisplayColumns().map(s=>s.getColId()).some(s=>i.includes(s));return!!n&&o}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getValueColState(){return this.valueColState.map(this.displayNameMapper.bind(this))}displayNameMapper(e){let{column:t}=e;if(t){let n=this.getColDisplayName(t);e.displayName=this.isPivotMode()?this.getPivotDisplayName(t,n):n}else{let n=this.colNames[e.colId];e.displayName=n?n.join(" - "):this.getColDisplayName(t)}return e}getPivotDisplayName(e,t){let n=!1,i=[t],r=o=>{if(!o)return;let s=this.chartColSvc.getColGroupDisplayName(o);s?.length?(i.unshift(s),r(o.getParent())):n=!0};if(r(e.getParent()),n){let o=this.colNames[e.getColId()];o&&(i=o)}return i.join(" - ")}getColDisplayName(e){return this.chartColSvc.getColDisplayName(e)}isPivotMode(){return this.chartColSvc.isPivotMode()}getChartDataType(e){let t=this.chartColSvc.getColumn(e);return t?t.getColDef().chartDataType:void 0}getConvertTime(e){let t=this.chartColSvc.getColumn(e);if(t?.colDef.cellDataType==="dateString")return this.beans.dataTypeSvc?.getDateParserFunction(t)}isPivotActive(){return this.chartColSvc.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===Ls.DIMENSION||this.referenceCellRange.startColumn==null?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return new Set(this.chartColSvc.getAllDisplayedColumns());let e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),new Set(e)}getRowIndexes(){let e=0,t=0,{rangeSvc:n,valueCellRange:i,dimensionCellRange:r}=this,o=i||r;if(n&&o){e=n.getRangeStartRow(o).rowIndex;let s=n.getRangeEndRow(o);t=s.rowPinned==="bottom"?-1:s.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){let{dimensionCols:e,valueCols:t}=this.chartColSvc.getChartColumns(),n=this.getAllColumnsFromRanges(),i=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];let r=Pg(Ei(this.chartType)),o=!1,s=1,a=this.suppliedCellRange.columns[0],l=this.gos.get("treeData"),c=l?null:this.chartColSvc.getRowGroupColumns(),d=l||c&&c.length>0;e.forEach(p=>{let f=bg(p),g=this.crossFiltering&&this.aggFunc?a.getColId()===p.getColId():this.useGroupColumnAsCategory&&d&&f||(!o||r)&&n.has(p);this.dimensionColState.push({column:p,colId:p.getColId(),displayName:this.getColDisplayName(p),selected:g,order:s++}),g&&(o=!0)});let u={colId:zd,displayName:this.chartTranslation.translate("defaultCategory"),selected:!o,order:0};this.dimensionColState.unshift(u);let h=this.referenceCellRange.columns.filter(p=>t.has(p));t.forEach(p=>{i&&this.referenceCellRange.columns.includes(p)&&(p=h.shift()),this.valueColState.push({column:p,colId:p.getColId(),displayName:this.getColDisplayName(p),selected:n.has(p),order:s++})})}updateColumnState(e,t){let n=c=>c.colId===e.colId,{dimensionColState:i,valueColState:r}=this,o=i.find(n),s=r.find(n);if(o)if(Pg(Ei(this.chartType)))o.selected=e.selected;else{let d=e.selected?o:i.filter(u=>u!==o).find(({selected:u})=>u);i.forEach(u=>u.selected=u===d)}else s&&(s.selected=e.selected);let a=[...i,...r],l=[];t||(a.forEach((c,d)=>{d===e.order&&l.push(e.colId),c.colId!==e.colId&&l.push(c.colId)}),a.forEach(c=>{let d=l.indexOf(c.colId);c.order=d>=0?l.indexOf(c.colId):a.length-1})),this.reorderColState()}reorderColState(){let e=(t,n)=>t.order-n.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,n){this.dimensionCellRange=void 0;let i=Pg(Ei(this.chartType));if(!n&&!this.dimensionColState.length){let a=new Array;e.forEach(l=>{a.length>0&&!i||!t.has(l)||a.push(l)}),a.length>0&&(this.dimensionCellRange=this.createCellRange(Ls.DIMENSION,...a));return}let r=n?[n]:[];if(this.crossFiltering&&this.aggFunc){let a=this.suppliedCellRange.columns[0];r=this.dimensionColState.filter(l=>l.colId===a.getColId())}else(i||r.length===0||r.some(({column:a})=>!a||!e.has(a)))&&(r=this.dimensionColState.filter(a=>a.selected));let o=r.length===1?r[0].colId===zd:!1,s=r.map(({column:a})=>a).filter(a=>a!=null);s.length>0&&!o&&(this.dimensionCellRange=this.createCellRange(Ls.DIMENSION,...s))}setValueCellRange(e,t,n){this.valueCellRange=void 0;let i=[],r=yA(this.chartType),o=0;if(e.forEach(s=>{n?(r==null||o<r)&&t.has(s)&&(i.push(s),o++):this.valueColState.some(a=>a.selected&&a.colId===s.getColId())&&i.push(s)}),i.length>0){let s=[];this.valueColState.length>0?s=this.valueColState.map(a=>a.colId):t.forEach(a=>s.push(a.getColId())),i.sort((a,l)=>s.indexOf(a.getColId())-s.indexOf(l.getColId())),this.valueCellRange=this.createCellRange(Ls.VALUE,...i)}}resetCellRanges(e,t){if(!e&&!t)return;let{dimensionCols:n,valueCols:i}=this.chartColSvc.getChartColumns(),r=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(n,r),t&&this.setValueCellRange(i,r)}updateSelectedDimensions(e){let t=new Set(e.map(i=>i.getColId()));if(Pg(Ei(this.chartType))){let i=this.dimensionColState.filter(o=>t.has(o.colId)),r=new Set(i.map(o=>o.colId));this.dimensionColState=this.dimensionColState.map(o=>ce(T({},o),{selected:r.has(o.colId)}))}else{let r=(this.dimensionColState.find(o=>t.has(o.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(o=>ce(T({},o),{selected:o.colId===r}))}}syncDimensionCellRange(){let e=this.getSelectedDimensions();if(e.length===0)return;let t=e.map(({column:n})=>n).filter(n=>n!=null);t.length>0&&(this.dimensionCellRange=this.createCellRange(Ls.DIMENSION,...t))}isComboChart(e){return s4(e??this.chartType)}getCrossFilteringSort(){let e=this.crossFilteringSort;if(typeof e=="boolean")return e;let t=[];return e.forEach(({sort:n,colId:i})=>{let r=this.chartColSvc.getColumn(i);r&&t.push({sort:n,column:r,type:Ms(r.getSortDef()?.type)})}),t}},vX=class extends Sp{getAxes(e,t){return{x:{type:this.getXAxisType(e),position:this.isHorizontal(t)?"left":"bottom"},y:{type:"number",position:this.isHorizontal(t)?"bottom":"left"}}}computeSeriesStatistics(e,t){let{data:n,fields:i}=e,[r]=e.categories,o=r.id||zd,s=this.groupDataByCategory(o,n);return Array.from(s).map(([a,l])=>{let c={[r.id]:a};return i.forEach((d,u)=>{let h=l.map(f=>f[d.colId]).filter(f=>typeof f=="number"&&!isNaN(f)),p=t(h);for(let f of Object.keys(p)){let g=`${f}:${u}`;c[g]=h.length>0?p[f]:null}}),c})}groupDataByCategory(e,t){let n=i=>{if(e===zd)return 1;let r=i[e];return r==null?"":r instanceof Date?r.getTime():r};return t.reduce((i,r)=>{let o=n(r),s=i.get(o);return s?s.push(r):i.set(o,[r]),i},new Map)}},WNe=class extends vX{getSeries(e){let[t]=e.categories;return e.fields.map((n,i)=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:n.displayName??void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${i}`,q1Key:`q1:${i}`,medianKey:`median:${i}`,q3Key:`q3:${i}`,maxKey:`max:${i}`}))}getData(e){return this.computeSeriesStatistics(e,t=>{let n=t.sort((i,r)=>i-r);return{min:n[0],q1:this.quantile(n,.25),median:this.quantile(n,.5),q3:this.quantile(n,.75),max:n[n.length-1]}})}quantile(e,t){let n=(e.length-1)*t,i=Math.floor(n),r=n-i;return e[i+1]!==void 0?e[i]+r*(e[i+1]-e[i]):e[i]}},$Ne=class extends vX{getSeries(e){let[t]=e.categories;return e.fields.map((n,i)=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:n.displayName??void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${i}`,yHighKey:`max:${i}`}))}getData(e){return this.computeSeriesStatistics(e,t=>({min:Math.min(...t),max:Math.max(...t)}))}},qNe=class extends K{constructor(){super(...arguments),this.beanName="enterpriseChartProxyFactory"}createChartProxy(e){switch(e.chartType){case"histogram":return new ANe(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new PNe(e);case"rangeBar":case"rangeArea":return new $Ne(e);case"boxPlot":return new WNe(e);case"treemap":case"sunburst":return new TNe(e);case"heatmap":return new BNe(e);case"waterfall":return new RNe(e);case"funnel":case"coneFunnel":case"pyramid":return new FNe(e)}}},CX=class extends K{constructor(e,t,n,i){super(),this.chartController=e,this.eGui=t,this.cssClass=n,this.createPanels=i,this.panels=[]}postConstruct(){this.addManagedListeners(this.chartController,{chartUpdated:()=>this.refreshPanels(!0),chartApiUpdate:()=>this.refreshPanels(!1)})}addComponent(e){this.createBean(e),this.panels.push(e),e.addCss(this.cssClass),this.eGui.appendChild(e.getGui())}refreshPanels(e){let t=this.chartController.getChartType(),n=this.chartController.isGrouping(),i=Ei(t);e&&t===this.chartType&&n===this.isGrouping||(this.destroyPanels(),this.createPanels(t,i),this.chartType=t,this.isGrouping=n)}destroyPanels(){for(let e of this.panels)Bt(e.getGui()),this.destroyBean(e);this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}},KNe=class extends pe{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(`<div>
            <ag-group-component data-ref="animationGroup">
                <ag-input-number-field data-ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`,[Ii,Sg],{animationGroup:e,animationHeightInput:t})}},bX=class extends vMe{constructor(e){super(ce(T({},e),{dialogCallbacks:GY}))}},jd={selector:"AG-COLOR-PICKER",component:bX},YNe=class extends pe{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),n=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),i=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(`<div>
            <ag-group-component data-ref="crosshairGroup">
                <ag-checkbox data-ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox data-ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker data-ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`,[Ii,mo,jd],{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:n,crosshairStrokeColorPicker:i})}},ZNe=class extends pe{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;let n=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(`<div>
            <ag-group-component data-ref="navigatorGroup">
                <ag-slider data-ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox data-ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`,[Ii,fa,mo],{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:n})}},XNe=class extends pe{constructor(e){super(),this.chartMenuParamsFactory=e,this.zoomScrollingStepInput=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),n=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);n.step=.01,n.minValue=n.step;let i=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(r=>o=>{r&&(r(o),this.zoomScrollingStepInput.setDisabled(!o))})(t.onValueChange),this.setTemplate(`<div>
            <ag-group-component data-ref="zoomGroup">
                <ag-checkbox data-ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox data-ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider data-ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,mo,fa],{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:n,zoomSelectingCheckbox:i}),this.zoomScrollingStepInput.setDisabled(!t.value)}},QNe=["navigator","zoom","animation","crosshair"],JNe=class extends pe{constructor(e){super('<div class="ag-chart-advanced-settings-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new CX(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){for(let n of QNe){if(!this.isGroupPanelShownForSeries(n,t))continue;let i=this.createPanel(n);this.chartPanelFeature.addComponent(i)}}isGroupPanelShownForSeries(e,t){return e==="animation"||Cp(t)&&!HL(t)}createPanel(e){let{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:n}=this.chartMenuContext;switch(e){case"navigator":return new ZNe(t);case"zoom":return new XNe(t);case"animation":return new KNe(t);case"crosshair":return new YNe(n)}}},e6e=class extends K{constructor(){super(...arguments),this.beanName="advSettingsMenuFactory"}showMenu(e,t){this.hideMenu();let n=this.createBean(new t6e(e));this.activeDialog=this.createBean(new EA({title:this.beans.chartTranslation.translate("advancedSettings"),component:n,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{Rs(n.getGui())[0]?.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,t?.focus({preventScroll:!0})}})),this.activeMenu=n}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}},t6e=class extends Vd{constructor(e){super('<div class="ag-chart-advanced-settings"></div>'),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new JNe(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();let t=e.shiftKey,n=this.advancedSettingsPanel.getGui(),i=Wi(this.beans,n,!1,t);if(i)i.focus();else{let r=Rs(n);r.length&&r[t?r.length-1:0].focus()}}},n6e=class extends K{constructor(){super(...arguments),this.beanName="chartMenuListFactory"}wireBeans(e){this.popupSvc=e.popupSvc,this.chartMenuSvc=e.chartMenuSvc,this.chartTranslation=e.chartTranslation}showMenuList(e){let{eventSource:t,showMenu:n,chartMenuContext:i}=e,r=this.chartMenuSvc.doChartToolPanelsExist(i.chartController),o=this.mapWithStockItems(this.getMenuItems(i.chartController,r),i,n,t,r);if(!o.length)return;let s=this.createBean(new i6e(o));this.activeChartMenuList=s;let a=-1,l="left";this.gos.get("enableRtl")&&(a=1,l="right");let c=s.getGui();this.popupSvc.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(s),this.activeChartMenuList=void 0,Ts(this.beans)&&t.focus({preventScroll:!0})},afterGuiAttached:d=>s.afterGuiAttached(d),positionCallback:()=>{this.popupSvc.positionPopupByComponent({type:"chartMenu",eventSource:t,ePopup:c,alignSide:l,nudgeX:4*a,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(e,t){let n=[...t?["chartEdit"]:[],...e.isEnterprise()?["chartAdvancedSettings"]:[],e.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],i=this.gos.get("chartMenuItems");return i?Array.isArray(i)?i:i(Oe(this.gos,{defaultItems:n,chartId:e.getChartId()})):n}mapWithStockItems(e,t,n,i,r){if(!e)return[];let o=[];for(let s of e){let a;if(typeof s=="string"?a=this.getStockMenuItem(s,t,n,i,r):a=T({},s),!a)continue;let{subMenu:l}=a;Array.isArray(l)&&(a.subMenu=this.mapWithStockItems(l,t,n,i,r)),o.push(a)}return o}getStockMenuItem(e,t,n,i,r){switch(e){case"chartEdit":return r?this.createMenuItem(this.chartTranslation.translate("chartEdit"),"chartsMenuEdit",n):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslation.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuSvc.openAdvancedSettings(t,i));case"chartUnlink":return t.chartController.isChartLinked()?this.createMenuItem(this.chartTranslation.translate("chartUnlink"),"unlinked",()=>this.chartMenuSvc.toggleLinked(t)):null;case"chartLink":return t.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslation.translate("chartLink"),"linked",()=>this.chartMenuSvc.toggleLinked(t));case"chartDownload":return this.createMenuItem(this.chartTranslation.translate("chartDownload"),"chartsDownload",()=>this.chartMenuSvc.downloadChart(t))}return null}createMenuItem(e,t,n){return{name:e,icon:$e(t,this.beans,null),action:n}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}},i6e=class extends pe{constructor(e){super(`
            <div data-ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=e,this.eChartsMenu=q}postConstruct(){this.mainMenuList=this.createManagedBean(new XL(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){this.hidePopupFunc?.()}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),qn(this.mainMenuList.getGui())}},r6e=class extends K{constructor(){super(...arguments),this.beanName="chartCrossFilterSvc"}filter(e,t=!1){let n=this.beans.filterManager,i=n?.getFilterModel()??{};if(t){Object.keys(i).length>0&&n?.setFilterModel(null);return}let r=lY(e);r.indexOf("-filtered-out")&&(r=r.replace("-filtered-out","")),this.updateFilters(i,e,r)}updateFilters(e,t,n){let i=lY(t),r=this.convertRawValue(n,t.datum[i]);if(r===void 0)return;let o=this.beans.filterManager;o?.getColumnFilterInstance(n).then(s=>{let a=s?.filterType,l,c=f=>f;if(a==="multi"){let f=s6e(s);l=f.setFilter,c=f.processModel??c}else a==="set"&&(l=s);if(!l){X(154,{colId:n});return}let d=t.event.metaKey||t.event.ctrlKey,u=l.getFilterHandler().getCrossFilterModel((f,g,C)=>a6e(d,f(r),g,C)),h=c(u),p=d?T({},e):{};p[n]=h,o?.setFilterModel(p)})}convertRawValue(e,t){let{colModel:n,dataTypeSvc:i}=this.beans,r=n.getColById(e),o=r?.colDef;return o&&i&&o.chartDataType==="time"&&o.cellDataType==="dateString"?i.getDateFormatterFunction(r)(t):t}};function o6e(e,t,n){let i=new Array(n);for(let r=0;r<n;r++)i[r]=r===t?e:null;return{filterType:"multi",filterModels:i}}function s6e(e){let t=e.getNumChildFilters();for(let n=0;n<t;n++){let i=e.getChildFilterInstance(n);if(i?.filterType==="set")return{setFilter:i,processModel:r=>o6e(r,n,t)}}return{}}function lY(e){return e.xKey||e.calloutLabelKey}function a6e(e,t,n,i){let r;if(e)if(n.has(t)&&(i==null||i.includes(t)))if(r=[],i==null)for(let o of n)o!==t&&r.push(o);else for(let o of i)o!==t&&n.has(o)&&r.push(o);else{if(i==null)r=Array.from(n);else{r=[];for(let o of i)n.has(o)&&r.push(o)}r.push(t)}else r=[t];return{filterType:"set",values:r}}var l6e=["chartUnlink","chartLink","chartDownload","chartMenu"],cA={settings:"chartSettings",data:"chartData",format:"chartFormat"},c6e=class extends K{constructor(){super(...arguments),this.beanName="chartMenuSvc"}wireBeans(e){this.advSettingsMenuFactory=e.advSettingsMenuFactory}downloadChart(e,t,n,i){e.chartController.getChartProxy().downloadChart(t,n,i)}toggleLinked(e){e.chartController.detachChartRange()}openAdvancedSettings(e,t){this.advSettingsMenuFactory?.showMenu(e,t)}hideAdvancedSettings(){this.advSettingsMenuFactory?.hideMenu()}getChartToolbarOptions(){let e=["chartMenu"],t=this.gos.getCallback("getChartToolbarItems");return t?t({defaultItems:e}).filter(i=>l6e.includes(i)?!0:(X(155,{option:i}),!1)):e}getChartToolPanels(e){let t=this.gos.get("chartToolPanelsDef"),i=t?.panels?.map(s=>{let a=cA[s];return a||X(156,{panel:s}),a}).filter(s=>!!s)??Object.values(cA);e.isPivotChart()&&(i=i.filter(s=>s!=="chartData"));let r=t?.defaultToolPanel,o=r&&cA[r]||i[0];return{panels:i,defaultPanel:o}}doesChartToolbarExist(){return this.getChartToolbarOptions().length>0}doChartToolPanelsExist(e){let{panels:t}=this.getChartToolPanels(e);return t.length>0}},d6e={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Set Up",format:"Customize",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",polygon:"Polygon",square:"Square",cross:"Cross",diamond:"Diamond",plus:"Plus",triangle:"Triangle",heart:"Heart",orientation:"Orientation",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chartStyle:"Chart Style",title:"Title",chartTitles:"Titles",chartTitle:"Chart Title",chartSubtitle:"Subtitle",horizontalAxisTitle:"Horizontal Axis Title",verticalAxisTitle:"Vertical Axis Title",polarAxisTitle:"Polar Axis Title",titlePlaceholder:"Chart Title",background:"Background",font:"Font",weight:"Weight",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",stackedLineTooltip:"Stacked",normalizedLineTooltip:"100% Stacked",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",waterfallTooltip:"Waterfall",heatmapTooltip:"Heatmap",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",bar:"Bar",column:"Column",histogram:"Histogram",advancedSettings:"Advanced Settings",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked",legendEnabled:"Enabled",groupedColumnFull:"Grouped Column",stackedColumnFull:"Stacked Column",normalizedColumnFull:"100% Stacked Column",groupedBarFull:"Grouped Bar",stackedBarFull:"Stacked Bar",normalizedBarFull:"100% Stacked Bar",stackedAreaFull:"Stacked Area",normalizedAreaFull:"100% Stacked Area",stackedLineFull:"Stacked Line",normalizedLineFull:"100% Stacked Line",customCombo:"Custom Combination",funnel:"Funnel",coneFunnel:"Cone Funnel",pyramid:"Pyramid",funnelGroup:"Funnel",funnelTooltip:"Funnel",coneFunnelTooltip:"Cone Funnel",pyramidTooltip:"Pyramid",dropOff:"Drop-Off",stageLabels:"Stage Labels",reverse:"Reverse",tooltipMode:"Tooltip Mode",tooltipModeSingle:"Single",tooltipModeShared:"Multiple",tooltipModeCompact:"Compact",groupedColumn:"Grouped",stackedColumn:"Stacked",pie:"Pie",donut:"Donut",line:"Line",scatter:"Scatter",bubble:"Bubble",area:"Area",stackedArea:"Stacked",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",radialColumn:"Radial Column",radialBar:"Radial Bar",boxPlot:"Box Plot",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",heatmap:"Heatmap",columnLineCombo:"Column & Line",AreaColumnCombo:"Area & Column",ariaChartMenuClose:"Close Chart Edit Menu",ariaChartSelected:"Selected",group:"Group",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},u6e=class extends K{constructor(){super(...arguments),this.beanName="chartTranslation"}translate(e){let t=this.getLocaleTextFunc(),n=d6e[e];return t(e,n)}},z0=e=>t=>t==null?!0:e(t),cY=e=>typeof e=="string",u4=e=>typeof e=="boolean",h6e=e=>typeof e=="object",Gd=(e,t)=>n=>`AG Grid - unable to update chart as invalid params supplied:  \`${e}: ${n}\`, expected ${t}.`,wX=e=>`${e} is not supported in AG Charts Community ('ag-charts-enterprise' hasn't been loaded). See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`,p6e=["doughnut"],h4=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"];function f6e(e){return!!uX(e)||s4(e)}function g6e(e){return p6e.includes(e)}var m6e=z0(e=>{if(f6e(e))return!0;if(g6e(e)){let t=Zy(e);return Al(`The chart type '${e}' has been deprecated. Please use '${t}' instead.`),t}return!1}),v6e=z0(e=>typeof e=="object"),C6e=z0(e=>typeof e=="object"),b6e=z0(e=>typeof e=="string"||typeof e=="function"),yX=e=>({property:"chartType",validationFn:z0(t=>e||!t||!hNe(t)),warnMessage:t=>wX(`The '${t}' chart type`)}),SX=e=>({property:"switchCategorySeries",validationFn:z0(t=>{if(!t||e)return!0}),warnMessage:()=>wX("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0}),p4=()=>[{property:"chartId",validationFn:cY,warnMessage:Gd("chartId","string")},{property:"chartType",validationFn:m6e,warnMessage:Gd("chartType","ChartType")},{property:"chartThemeName",validationFn:cY,warnMessage:Gd("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:v6e,warnMessage:Gd("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:u4,warnMessage:Gd("unlinkChart","boolean")}],xX=e=>[{property:"cellRange",validationFn:C6e,warnMessage:Gd("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:u4,warnMessage:Gd("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:b6e,warnMessage:Gd("aggFunc","string or IAggFunc")},SX(e)];function w6e(e,t){switch(e.type){case"rangeChartUpdate":return S6e(e,t);case"pivotChartUpdate":return x6e(e);case"crossFilterChartUpdate":return E6e(e,t);default:return Al(`Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}function y6e(e,t){return TA(e,[yX(t),SX(t)])}function S6e(e,t){let n=[...p4(),yX(t),...xX(t),{property:"seriesChartTypes",validationFn:i=>i===void 0||Array.isArray(i)&&i.every(h6e),warnMessage:Gd("seriesChartTypes","Array of SeriesChartType")},{property:"useGroupColumnAsCategory",validationFn:u4,warnMessage:Gd("useGroupColumnAsCategory","boolean")}];return TA(e,n,[...h4,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType","useGroupColumnAsCategory"],"UpdateRangeChartParams")}function x6e(e){let t=[...p4()];return TA(e,t,[...h4],"UpdatePivotChartParams")}function E6e(e,t){let n=[...p4(),...xX(t)];return TA(e,n,[...h4,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}function TA(e,t,n,i){let r;for(let o of t){let{property:s,validationFn:a,warnMessage:l,warnIfFixed:c}=o;if(s in e){let d=e[s],u=a(d);if(u===!0)continue;if(u===!1)return Al(l(d)),!1;r=r||T({},e),r[s]=u,c&&Al(l(d))}}if(n){for(let o of Object.keys(e))if(!n.includes(o))return Al(`Unexpected property supplied. ${i} does not contain: \`${o}\`.`),!1}return r||!0}var EX=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],D6e=class extends K{constructor(e){super(),this.model=e,this.isEnterprise=()=>this.agChartsExports.isEnterprise}wireBeans(e){this.rangeSvc=e.rangeSvc,this.agChartsExports=e.agChartsExports}postConstruct(){this.setChartRange(),this.model.unlinked&&this.rangeSvc&&this.rangeSvc.setCellRanges([]);let e=this.updateForGridChange.bind(this,{});this.addManagedEventListeners({cellSelectionChanged:t=>{t.id&&t.id===this.model.chartId&&this.updateForRangeChange()},columnMoved:e,columnPinned:e,columnVisible:e,columnRowGroupChanged:e,modelUpdated:e,cellValueChanged:this.updateForDataChange.bind(this),cellEditValuesChanged:this.updateForDataChange.bind(this)})}update(e){if(!this.validUpdateType(e))return!1;let t=w6e(e,this.agChartsExports.isEnterprise);if(!t)return!1;let n=t===!0?e:t;return this.applyValidatedChartParams(n),!0}applyValidatedChartParams(e){let{chartId:t,chartType:n,chartThemeName:i,unlinkChart:r}=e,o={chartId:t,pivotChart:this.model.pivotChart,chartType:n??this.model.chartType,chartThemeName:i??this.model.chartThemeName,unlinkChart:r??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},s=T({},o);switch(e.type){case"rangeChartUpdate":s.cellRange=this.createCellRange(e)??this.model.suppliedCellRange,s.switchCategorySeries=e.switchCategorySeries??this.model.switchCategorySeries,s.aggFunc=e.aggFunc??this.model.aggFunc,s.seriesChartTypes=e.seriesChartTypes,s.suppressChartRanges=e.suppressChartRanges??this.model.suppressChartRanges,s.seriesGroupType=e.seriesGroupType??this.model.seriesGroupType,s.useGroupColumnAsCategory=e.useGroupColumnAsCategory??this.model.useGroupColumnAsCategory;break;case"crossFilterChartUpdate":s.cellRange=this.createCellRange(e)??this.model.suppliedCellRange,s.switchCategorySeries=!1,s.aggFunc=e.aggFunc??this.model.aggFunc,s.crossFiltering=!0,s.crossFilteringSort=this.model.crossFilteringSort,s.suppressChartRanges=e.suppressChartRanges??this.model.suppressChartRanges;break;case"pivotChartUpdate":s.switchCategorySeries=!1;break}this.model.updateModel(s),s.unlinkChart||s.suppressChartRanges?this.rangeSvc?.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;let{maintainColState:t,setColsFromRange:n}=e??{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:n}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),e.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){let n=this.getSelectedValueColState().map(a=>({colId:a.colId,displayName:a.displayName})),i=this.getChartData(),r=this.getSelectedDimensions(),o=this.model,s={data:i,groupData:o.groupChartData,grouping:this.isGrouping(),categories:r.map(({colId:a,displayName:l})=>{let c=o.categoryAxisType??o.getChartDataType(a);return{id:a,name:l,chartDataType:c,convertTime:c==="time"?o.getConvertTime(a):void 0}}),fields:n,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e,seriesGroupType:o.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(s):s}invertCategorySeriesParams(e){let[t]=e.categories,n=[{id:zd,name:""}],i=e.data.map((o,s)=>{let a=`${t.id}:${s}`,l=o[t.id],c=l==null?"":String(l);return{colId:a,displayName:c}}),r=e.fields.map(o=>{let s={[zd]:o.displayName};for(let[a,l]of e.data.entries()){let c=`${t.id}:${a}`,d=l[o.colId];s[c]=d}return s});return ce(T({},e),{categories:n,fields:i,data:r})}getChartModel(){let e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy?.getChartThemeOverrides(),chartPalette:this.chartProxy?.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t,seriesGroupType:this.model.seriesGroupType,useGroupColumnAsCategory:this.model.useGroupColumnAsCategory}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(e){pX(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,!t&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){let n=(a,l)=>{let c=0;for(let d of a)d.selected&&(c>=l?d.selected=!1:c++);c===0&&(a[0].selected=!0)},i=jL(t),r=yA(t),o=i!=null&&(jL(e)??100)>(i??100),s=r!=null&&(yA(e)??100)>(r??100);o&&n(this.model.dimensionColState,i),s&&n(this.model.valueColState,r),(o||s)&&(this.model.resetCellRanges(o,s),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||this.raiseChartModelUpdateEvent()}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||EX}getThemes(){return this.getThemeNames().map(t=>{let i=l4(t,this.agChartsExports._Theme)?t:this.chartProxy.lookupCustomChartTheme(t);return this.agChartsExports._Theme.getChartTheme(i)})}getPalettes(){return this.getThemes().map(t=>t.palette)}getSelectedValueColState(){return this.model.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.model.getValueColState()}}setChartRange(e=!1){this.rangeSvc&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeSvc.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeSvc&&this.rangeSvc.setCellRanges([]):this.updateForGridChange(),this.dispatchLocalEvent({type:"chartLinkedChanged"})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return["scatter","bubble"].includes(this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){let e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,n){let i=this.model.comboChartModel.seriesChartTypes.find(r=>r.colId===e);if(i){let r=this.model.chartType!=="customCombo";r&&(this.model.chartType="customCombo");let o=i.chartType;t!=null&&(i.chartType=t),n!=null&&(i.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),r&&this.dispatchLocalEvent({type:"chartTypeChanged"}),o!==t&&this.dispatchLocalEvent({type:"chartSeriesChartTypeChanged"}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){let e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(e){let t=e??this.getChartType();return this.isComboChart(t)?["line","bar","area"]:[Ei(t)]}getChartSeriesType(){let e=this.getSeriesChartTypes();if(e.length===0)return"bar";let t=e[0].chartType;return t==="columnLineCombo"?"bar":t==="areaColumnCombo"?"area":Ei(t)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){return e.cellRange&&this.rangeSvc?.createPartialCellRangeFromRangeParams(e.cellRange,!0)}validUpdateType(e){if(!e.type)return X(136),!1;let t={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},n=Object.keys(t).find(r=>t[r]())??"Range Chart",i=e.type===`${n[0].toLowerCase()}${n.slice(1).replace(/ /g,"")}Update`;return i||X(137,{currentChartType:n,type:e.type}),i}getCellRangeParams(){let e=this.getCellRanges(),t=e[0],n=t?.startRow||null,i=t?.endRow||null;return{rowStartIndex:n?.rowIndex??null,rowStartPinned:n?.rowPinned,rowEndIndex:i?.rowIndex??null,rowEndPinned:i?.rowPinned,columns:e.reduce((r,o)=>r.concat(o.columns.map(s=>s.getId())),[])}}setCategoryAxisType(e){this.model.categoryAxisType=e,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){return this.model.seriesGroupType??this.chartProxy.getSeriesGroupType()}setSeriesGroupType(e){this.model.seriesGroupType=e,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){this.dispatchLocalEvent({type:"chartModelUpdate"}),this.raiseChartOptionsChangedEvent()}raiseChartUpdatedEvent(){this.dispatchLocalEvent({type:"chartUpdated"})}raiseChartApiUpdateEvent(){this.dispatchLocalEvent({type:"chartApiUpdate"})}raiseChartOptionsChangedEvent(){let{chartId:e,chartType:t}=this.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy?.getChartThemeOverrides()})}raiseChartRangeSelectionChangedEvent(){this.eventSvc.dispatchEvent({type:"chartRangeSelectionChanged",id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()})}destroy(){super.destroy(),this.rangeSvc&&this.rangeSvc.setCellRanges([])}},_6e=class extends Sp{getAxes(e){let t={x:{type:this.getXAxisType(e),position:"bottom"},y:{type:"number",position:"left"}};return this.isNormalised()&&(t.y.label=ce(T({},t.y.label),{formatter:n=>Math.round(n.value)+"%"})),t}getSeries(e){let[t]=e.categories,n=e.fields.map(i=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:i.colId,yName:i.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},A6e=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),R6e=class extends Sp{getAxes(e){let t={x:{type:this.getXAxisType(e),position:this.isHorizontal()?"left":"bottom"},y:{type:"number",position:this.isHorizontal()?"bottom":"left"}};return this.isNormalised()&&(t.y.label=ce(T({},t.y.label),{formatter:n=>Math.round(n.value)+"%"})),t}getSeries(e){let[t]=e.categories,n=e.fields.map(i=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||fNe(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:t.id,xName:t.name,yKey:i.colId,yName:i.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(n):n}extractCrossFilterSeries(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],r=ce(T({},i),{listeners:{seriesNodeClick:this.crossFilterCallback}}),o=ce(T({},r),{yKey:`${r.yKey}-filtered-out`,showInLegend:!1});t.push(r),t.push(o)}return t}isNormalised(){let e=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&e.includes(this.chartType)}isHorizontal(){return A6e.has(this.chartType)}},F6e=class extends Sp{getAxes(e){let t={x:{type:this.getXAxisType(e),position:"bottom"},y:{type:"number",position:"left"}};return this.isNormalised()&&(t.y.label=ce(T({},t.y.label),{formatter:n=>Math.round(n.value)+"%"})),t}getSeries(e){let[t]=e.categories,n=["normalizedLine","stackedLine"].includes(this.chartType),i=e.fields.map(r=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:r.colId,yName:r.displayName,normalizedTo:n&&this.isNormalised()?100:void 0,stacked:n}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,e):i}isNormalised(){let e=["normalizedLine"];return!this.crossFiltering&&e.includes(this.chartType)}},M6e=class extends Sp{getAxes(e){return{x:{type:"number",position:"bottom"},y:{type:"number",position:"left"}}}getSeries(e){let[t]=e.categories,n=this.isPaired(),i=this.getSeriesDefinitions(e.fields,n),r=t.id===zd?void 0:t,o=i.map(s=>s?.sizeField?{type:"bubble",xKey:s.xField.colId,xName:s.xField.displayName??void 0,yKey:s.yField.colId,yName:s.yField.displayName??void 0,title:`${s.yField.displayName} vs ${s.xField.displayName}`,sizeKey:s.sizeField.colId,sizeName:s.sizeField.displayName??"",labelKey:r?r.id:s.yField.colId,labelName:r?r.name:void 0}:{type:"scatter",xKey:s.xField.colId,xName:s.xField.displayName??void 0,yKey:s.yField.colId,yName:s.yField.displayName??void 0,title:`${s.yField.displayName} vs ${s.xField.displayName}`,labelKey:r?r.id:s.yField.colId,labelName:r?r.name:void 0});return this.crossFiltering?this.extractCrossFilterSeries(o,e):o}extractCrossFilterSeries(e,t){let{data:n}=t,i=l=>`${l}-filtered-out`,r=(l,c)=>{let d=[1/0,-1/0];if(c!=null)for(let u of l){let h=u[c]??u[i(c)];h<d[0]&&(d[0]=h),h>d[1]&&(d[1]=h)}if(d[0]<=d[1])return d},o=l=>{let c;if(l.type==="bubble"){let{sizeKey:d}=l;c=r(n,d)}return ce(T({},l),{domain:c,highlight:{highlightedItem:{fill:"yellow"}},listeners:ce(T({},l.listeners),{seriesNodeClick:this.crossFilterCallback})})},s=l=>{let{yKey:c,xKey:d}=l,u={};return l.type==="bubble"&&(u={sizeKey:i(l.sizeKey)}),ce(T(T({},l),u),{yKey:i(c),xKey:i(d),showInLegend:!1,listeners:ce(T({},l.listeners),{seriesNodeClick:h=>{let p=h.datum[i(d)],f=ce(T({},h),{xKey:d,datum:ce(T({},h.datum),{[d]:p})});this.crossFilterCallback(f)}})})},a=e.map(o);return[...a,...a.map(s)]}getSeriesDefinitions(e,t){if(e.length<2)return[];let n=this.chartType==="bubble";if(t)return n?e.map((r,o)=>o%3===0?{xField:r,yField:e[o+1],sizeField:e[o+2]}:null).filter(r=>r?.yField&&r.sizeField):e.map((r,o)=>o%2===0?{xField:r,yField:e[o+1]}:null).filter(r=>r?.yField);let i=e[0];return n?e.map((r,o)=>o%2===1?{xField:i,yField:r,sizeField:e[o+1]}:null).filter(r=>r?.sizeField):e.filter((r,o)=>o>0).map(r=>({xField:i,yField:r}))}},I6e=class extends Sp{getAxes(e){let t=e?e.fields:[],n=new Map(t.map(s=>[s.colId,s])),{primaryYKeys:i,secondaryYKeys:r}=this.getYKeys(t,e.seriesChartTypes),o={x:{type:this.getXAxisType(e),position:"bottom"}};return i.length>0&&(o.y={type:"number",position:"left"}),r.length>0&&r.forEach(s=>{let a=n.get(s);if(!(a&&a.colId===s))return;let c={type:"number",position:"right"};o[`y_${s}`]=c}),o}getSeries(e){let{fields:t,seriesChartTypes:n}=e,[i]=e.categories;return t.map(r=>{let o=n.find(s=>s.colId===r.colId);if(o){let s=o.chartType,l=["groupedColumn","groupedBar"].includes(s)?{grouped:!0}:{},c=o.secondaryAxis?`y_${r.colId}`:"y";return T({type:Ei(s),xKey:i.id,yKey:r.colId,yName:r.displayName,yKeyAxis:c,stacked:["stackedArea","stackedColumn"].includes(s)},l)}})}getYKeys(e,t){let n=[],i=[];for(let r of e){let o=r.colId,s=t.find(a=>a.colId===o);s&&(s.secondaryAxis?i.push(o):n.push(o))}return{primaryYKeys:n,secondaryYKeys:i}}setSeriesChartThemeDefaults(e){let t=this.getSeriesChartThemeDefaults();if(!t)return;let n=new Set;for(let i of this.chartProxyParams.seriesChartTypes)n.add(i.chartType);for(let i of n)e[Ei(i)]=t}};function T6e(e){let t=e.currentOffset;e.currentOffset-=e.offsetAmount;let n=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:n}}var P6e=class extends H0{getUpdateOptions(e,t){return ce(T({},t),{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){let[t]=e.categories,n=e.fields.length,i={currentOffset:0,offsetAmount:n>1?20:40},r=this.getFields(e).map(o=>{let s={type:this.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){let{outerRadiusOffset:a,innerRadiusOffset:l}=T6e(i),c=o.displayName?{title:{text:o.displayName,showInLegend:n>1}}:void 0;return T(ce(T({},s),{type:"donut",outerRadiusOffset:a,innerRadiusOffset:l}),c)}return s});return this.crossFiltering?this.extractCrossFilterSeries(r):r}getCrossFilterData(e){let t=e.fields[0].colId,n=`${t}-filtered-out`;return e.data.map(i=>{let r=i[t]+i[n];return i[`${t}-total`]=r,i[n]=1,i[t]=i[t]/r,i})}extractCrossFilterSeries(e){let t=e[0],n=t.angleKey,i=ce(T({},t),{radiusMin:0,radiusMax:1,listeners:{seriesNodeClick:this.crossFilterCallback},legendItemKey:t.calloutLabelKey,angleKey:`${n}-total`}),r=ce(T({},i),{radiusKey:n,sectorLabelKey:`${n}-total`});return[ce(T({},i),{radiusKey:`${n}-filtered-out`,showInLegend:!1}),r]}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}getSeriesChartThemeDefaults(){return{series:{highlight:c4(this.crossFiltering)}}}},k6e=class extends pe{constructor(){super('<div class="ag-chart-menu" data-ref="eMenu"></div>'),this.eMenu=q,this.buttonListenersDestroyFuncs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}updateParams(e){let{buttons:t}=e;this.createButtons(t)}createButtons(e){for(let n of this.buttonListenersDestroyFuncs)n?.();this.buttonListenersDestroyFuncs=[];let t=this.eMenu;at(t);for(let n of e){let{buttonName:i,iconName:r,callback:o}=n,s=this.createButton(r),a=this.chartTranslation.translate(i+"ToolbarTooltip");a&&s instanceof HTMLElement&&(s.title=a),this.buttonListenersDestroyFuncs.push(...this.addManagedElementListeners(s,{click:l=>o(l.currentTarget)})),t.appendChild(s)}}createButton(e){let t=$e(e,this.beans);t.classList.add("ag-chart-menu-icon");let n=bt({tag:"button",attrs:{type:"button"},cls:"ag-chart-menu-toolbar-button"});return n.appendChild(t),n}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}},L6e=".ag-pill-select{display:flex;flex-direction:column}.ag-pill-select .ag-column-drop-list{padding:0}:where(.ag-pill-select){.ag-select{padding-top:var(--ag-spacing)}.ag-picker-field-wrapper{background-color:transparent;border:0}.ag-picker-field-display{cursor:pointer;font-weight:500}.ag-picker-field-display,.ag-picker-field-icon{color:var(--ag-chart-menu-label-color)}}",O6e=class extends pe{constructor(e){super('<div class="ag-pill-select" role="presentation"></div>'),this.config=e??{};let{selectedValueList:t,valueFormatter:n,valueList:i}=this.config;this.selectedValues=t??[],this.valueList=i??[],this.valueFormatter=n??(r=>Zr(r)),this.registerCSS(L6e)}postConstruct(){let{ariaLabel:e,onValuesChange:t,dragSourceId:n}=this.config;this.dropZonePanel=this.createManagedBean(new B6e({getValues:()=>this.selectedValues,setValues:r=>this.updateValues(r),isDraggable:()=>this.selectedValues.length>1},r=>this.valueFormatter(r),e,n)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),t!=null&&(this.onValuesChange=t)}setValues(e,t){let{added:n,removed:i,updated:r}=this.getChanges(this.valueList,e),o=!1;return(n.length||i.length||r.length)&&(o=!0),this.valueList=e,this.updateValues(t,o,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){let e=this.createSelectOptions();if(!e.length)return!1;let{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new Ji({options:e,placeholder:t,onValueChange:n=>this.addValue(n),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let e=[],{maxSelection:t}=this.config;if(t&&this.selectedValues.length>=t)return e;for(let n of this.valueList)this.selectedValues.includes(n)||e.push({value:n,text:this.valueFormatter(n)});return e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,n){let i=this.selectedValues;this.selectedValues=e;let r=this.getChanges(i,e),o=t||r.added.length||r.removed.length,s=wt(this.beans),a=this.eSelect?.getGui().contains(s),l=this.dropZonePanel?.getGui().contains(s);n||this.onValuesChange?.(r);let c=o?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),o&&a&&(c?this.dropZonePanel.focusList(!0):this.eSelect?.getFocusableElement().focus()),l&&!e.length&&this.eSelect?.getFocusableElement().focus()}getChanges(e,t){let n=t.filter(o=>!e.includes(o)),i=e.filter(o=>!t.includes(o)),r=t.filter((o,s)=>e[s]!==o);return{added:n,removed:i,updated:r,selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();let e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(Bt(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}},N6e=class extends fZ{constructor(e,t,n,i,r,o){super(t,n,!1),this.value=e,this.valueFormatter=i,this.draggable=r,this.sourceId=o}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return vo.ChartPanel}getDragSourceId(){return this.sourceId}isMovable(){return this.isDraggable()}isDraggable(){return this.draggable}},B6e=class extends pZ{constructor(e,t,n,i){super(!1),this.model=e,this.valueFormatter=t,this.ariaLabel=n,this.sourceId=i}postConstruct(){super.init()}isItemDroppable(e,t){return this.isSourceEventFromTarget(t)||this.sourceId!=null&&this.sourceId===t.dragSource.sourceId}updateItems(e){this.model.setValues(e)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?"move":"notAllowed"}getAriaLabel(){return this.ariaLabel}createPillComponent(e,t,n){return new N6e(e,t,n,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(e){return[e.value]}isInterestedIn(e){return e===vo.ChartPanel}},DX=class extends pe{constructor(e,t,n,i){super(i),this.chartController=e,this.allowMultipleSelection=t,this.maxSelection=n}wireBeans(e){this.chartTranslation=e.chartTranslation}addItem(e){this.groupComp.addItem(e)}createGroup(e,t,n,i,r){if(this.allowMultipleSelection){let o=e.filter(s=>s.selected);this.valuePillSelect=this.groupComp.createManagedBean(new O6e({valueList:e,selectedValueList:o,valueFormatter:t,selectPlaceholder:this.chartTranslation.translate(n),dragSourceId:i,onValuesChange:s=>this.onValueChange(s),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{let o=this.createValueSelectParams(e);o.onValueChange=s=>{for(let a of e)a.selected=!1;s.selected=!0,s.colId===zd&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:s,skipAnimation:r?.()})},this.valueSelect=this.groupComp.createManagedBean(new Ji(o)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(e){if(!this.valueSelect)return;let{options:t,value:n}=this.createValueSelectParams(e);this.valueSelect.clearOptions().addOptions(t).setValue(n,!0)}createValueSelectParams(e){let t;return{options:e.map(i=>{let r=i.displayName??"";return i.selected&&(t=i),{value:i,text:r}}),value:t}}onValueChange({added:e,updated:t,removed:n,selected:i}){let r,o,s=()=>{i.forEach((a,l)=>{a.order=l}),o=!0};e.length?(r=e[0],r.selected=!0,s()):n.length?(r=n[0],r.selected=!1):t.length&&(s(),r=t[0]),r&&this.chartController.updateForPanelChange({updatedColState:r,resetOrder:o})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}},V6e="sum",G6e=class extends DX{constructor(e,t,n,i,r){super(e,n,void 0,'<div id="categoriesGroup"></div>'),this.title=t,this.dimensionCols=i,this.isOpen=r}postConstruct(){this.groupComp=this.createBean(new qu({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.createGroup(this.dimensionCols,e=>e.displayName??"","categoryAdd","categorySelect",()=>!this.chartController.getAggFunc()),this.createAggFuncControls(this.dimensionCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){this.valuePillSelect?.setValues(e,e.filter(t=>t.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc())}createAggFuncControls(e){let t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new Ic({label:this.chartTranslation.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:t!=null,onValueChange:n=>{let i=n?V6e:void 0;this.chartController.setAggFunc(i),this.aggFuncSelect?.setValue(i,!0),this.aggFuncSelect?.setDisplayed(i!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new Ji({options:[{value:"sum",text:this.chartTranslation.translate("sum")},{value:"first",text:this.chartTranslation.translate("first")},{value:"last",text:this.chartTranslation.translate("last")},{value:"min",text:this.chartTranslation.translate("min")},{value:"max",text:this.chartTranslation.translate("max")},{value:"count",text:this.chartTranslation.translate("count")},{value:"avg",text:this.chartTranslation.translate("avg")}],value:typeof t=="string"?t:void 0,onValueChange:n=>{this.chartController.setAggFunc(n)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){let i=e.filter(r=>r.selected).some(r=>r.colId!==zd);this.aggFuncToggle?.setValue(t!=null),this.aggFuncSelect?.setValue(typeof t=="string"?t:void 0,!0),this.aggFuncToggle?.setDisplayed(i),this.aggFuncSelect?.setDisplayed(i&&t!=null)}clearAggFuncControls(){this.aggFuncToggle=this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},Ng=class extends K{constructor(e){super(),this.chartOptionsProxy=e}wireBeans(e){this.chartTranslation=e.chartTranslation}getDefaultColorPickerParams(e,t,n){return this.addValueParams(e,{label:this.chartTranslation.translate(t??"color"),labelWidth:"flex",inputWidth:"flex",labelAlignment:"top",pickerGap:6},n)}getDefaultNumberInputParams(e,t,n){return this.addValueParams(e,{label:this.chartTranslation.translate(t),labelAlignment:"top",labelWidth:"flex",inputWidth:"flex",precision:n?.precision,step:n?.step,min:n?.min,max:n?.max},{parseInputValue:i=>{let r=Number(i);return isNaN(r)?void 0:r},formatInputValue:i=>i==null?"":`${i}`})}getDefaultSliderParams(e,t,n,i){let r=this.chartOptionsProxy.getValue(e)??0;i&&Array.isArray(r)&&(r=r[0]);let o=this.getDefaultSliderParamsWithoutValueParams(r,t,n);return o.onValueChange=s=>this.chartOptionsProxy.setValue(e,i?[s]:s),o}getDefaultSliderParamsWithoutValueParams(e,t,n){return{label:this.chartTranslation.translate(t),minValue:0,maxValue:Math.max(e,n),textFieldWidth:45,value:`${e}`}}getDefaultCheckboxParams(e,t,n){let i=this.chartOptionsProxy.getValue(e),r={label:this.chartTranslation.translate(t),value:i,readOnly:n?.readOnly,passive:n?.passive};return r.onValueChange=o=>{this.chartOptionsProxy.setValue(e,typeof o=="boolean"?o:void 0)},r}getDefaultToggleParams(e,t,n){let i=this.chartOptionsProxy.getValue(e),r={label:this.chartTranslation.translate(t),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:i,readOnly:n?.readOnly,passive:n?.passive};return r.onValueChange=o=>{this.chartOptionsProxy.setValue(e,typeof o=="boolean"?o:void 0)},r}getDefaultSelectParams(e,t,n){return this.getDefaultSelectParamsWithoutValueParams(t,n,this.chartOptionsProxy.getValue(e),i=>{this.chartOptionsProxy.setValue(e,i)})}getDefaultSelectParamsWithoutValueParams(e,t,n,i){return{label:this.chartTranslation.translate(e),labelAlignment:"top",options:t,pickerGap:6,value:n,onValueChange:i}}getDefaultFontPanelParams(e,t){let n=i=>`${e}.${i}`;return this.addEnableParams(n("enabled"),{name:this.chartTranslation.translate(t),suppressEnabledCheckbox:!1,chartMenuParamsFactory:this,keyMapper:n})}addValueParams(e,t,n){let i=this.chartOptionsProxy.getValue(e);return t.value=n?.formatInputValue?n.formatInputValue(i):i,t.onValueChange=r=>{let o=n?.parseInputValue?n.parseInputValue(r):r;this.chartOptionsProxy.setValue(e,o)},t}addEnableParams(e,t){return t.enabled=this.chartOptionsProxy.getValue(e)??!1,t.onEnableChange=n=>this.chartOptionsProxy.setValue(e,n),t}getChartOptions(){return this.chartOptionsProxy}},H6e=class extends pe{constructor(e,t){super(),this.chartMenuContext=e,this.isOpen=t,this.chartSpecificGroup=q,this.hasContent=!1}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){let t={title:this.getTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen,items:[...this.createDirectionSelect(),this.createReverseSelect(),this.createGroupTypeSelect()]};this.setTemplate(`
            <div id="chartSpecificGroup">
                <ag-group-component data-ref="chartSpecificGroup"></ag-group-component>
            </div>`,[Ii],{chartSpecificGroup:t}),this.setDisplayed(this.hasContent)}refresh(){this.hasContent=!1,this.chartSpecificGroup.setTitle(this.getTitle()),this.updateDirectionSelect(),this.updateReverseSelect(),this.updateGroupTypeSelect(),this.setDisplayed(this.hasContent)}getTitle(){let e=this.chartMenuContext.chartController.getChartType();return this.chartTranslation.translate(a4(e))}createDirectionSelect(){if(!this.chartSvc.isEnterprise())return[];let{chartOptionsService:e,chartController:t}=this.chartMenuContext,n=e.getSeriesOptionsProxy(()=>Ei(t.getChartType())),i=this.createManagedBean(new Ng(n)),r=["horizontal","vertical"].map(a=>({value:a,text:this.chartTranslation.translate(a)})),o=i.getDefaultSelectParams("direction","direction",r),s=o.onValueChange;return o.onValueChange=a=>{s(a),t.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new Ji(o)),this.updateDirectionSelect(),[this.directionSelect]}createReverseSelect(){let{chartMenuParamsFactory:e}=this.chartMenuContext,t=e.getDefaultToggleParams("series.reverse","reverse");return this.reverseToggle=this.createManagedBean(new Ic(t)),this.updateReverseSelect(),this.reverseToggle}updateReverseSelect(){let e=this.chartMenuContext.chartController.getChartType()==="pyramid";this.updateDisplayed(this.reverseToggle,e)}updateDirectionSelect(){let e=CNe(this.chartMenuContext.chartController.getChartType());this.updateDisplayed(this.directionSelect,e)}createGroupTypeSelect(){let{chartController:e,chartMenuParamsFactory:t}=this.chartMenuContext;return this.groupTypeSelect=this.createManagedBean(new Ji(t.getDefaultSelectParamsWithoutValueParams("seriesGroupType",dNe.map(n=>({value:n,text:this.chartTranslation.translate(`${n}SeriesGroupType`)})),e.getSeriesGroupType(),n=>e.setSeriesGroupType(n)))),this.updateGroupTypeSelect(),this.groupTypeSelect}updateGroupTypeSelect(){let e=["radialColumn","radialBar","nightingale"].includes(this.chartMenuContext.chartController.getChartType());this.updateDisplayed(this.groupTypeSelect,e)}updateDisplayed(e,t){e?.setDisplayed(t),e&&(this.hasContent=this.hasContent||t)}},z6e=class extends pe{constructor(e,t,n){super('<div id="seriesChartTypeGroup"></div>'),this.chartController=e,this.columns=t,this.isOpen=n,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){Hr(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),at(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.postConstruct()}getValidColIds(e){let t=this.chartController.getSeriesChartTypes();return e.filter(n=>n.selected&&!!t.filter(i=>i.colId===n.colId)[0]).map(({colId:n})=>n)}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new qu({title:this.chartTranslation.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));let t=this.chartController.getSeriesChartTypes();for(let n of e){if(!n.selected)continue;let i=t.filter(c=>c.colId===n.colId)[0];if(!i)continue;this.selectedColIds.push(n.colId);let r=this.seriesChartTypeGroupComp.createManagedBean(new qu({title:n.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),o=c=>["groupedColumn","stackedColumn","stackedArea"].includes(c),s=this.seriesChartTypeGroupComp.createManagedBean(new Nd({label:this.chartTranslation.translate("secondaryAxis"),labelWidth:"flex",disabled:o(i.chartType),value:!!i.secondaryAxis,onValueChange:c=>this.chartController.updateSeriesChartType(n.colId,void 0,c)}));r.addItem(s);let a=["line","area","stackedArea","groupedColumn","stackedColumn"].map(c=>({value:c,text:this.chartTranslation.translate(a4(c))})),l=r.createManagedBean(new Ji({options:a,value:i.chartType,onValueChange:c=>this.chartController.updateSeriesChartType(n.colId,c)}));r.addItem(l),this.seriesChartTypeGroupComp.addItem(r),this.chartTypeComps.set(n.colId,l),this.secondaryAxisComps.set(n.colId,s)}this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){let e=this.chartController.getSeriesChartTypes();for(let t of this.selectedColIds){let n=e.find(o=>o.colId===t);if(!n)continue;let i=this.chartTypeComps.get(t),r=this.secondaryAxisComps.get(t);i?.setValue(n.chartType),r?.setValue(!!n.secondaryAxis),r?.setDisabled(this.isSecondaryAxisDisabled(n.chartType))}}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}},j6e=class extends DX{constructor(e,t,n,i,r,o,s){super(e,i,r,'<div id="seriesGroup"></div>'),this.chartOptionsService=t,this.title=n,this.valueCols=o,this.isOpen=s}postConstruct(){if(this.groupComp=this.createBean(new qu({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){let e=this.groupComp.createManagedBean(new Ic({label:this.chartTranslation.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:t=>{this.chartOptionsService.setPairedMode(!!t),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.createGroup(this.valueCols,this.generateGetSeriesLabel(this.valueCols),"seriesAdd","seriesSelect"),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){this.valuePillSelect?.setValueFormatter(this.generateGetSeriesLabel(e)),this.valuePillSelect?.setValues(e,e.filter(t=>t.selected)),this.refreshValueSelect(e)}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return o=>o.displayName??"";let t=e.filter(o=>o.selected),n=this.chartController.getChartType()==="bubble",i=this.chartOptionsService.getPairedMode(),r=new Map;return r.set(0,"X"),r.set(1,"Y"),r.set(2,"size"),o=>{let s=o.displayName??"";if(!o.selected)return s;let a=t.indexOf(o);if(a===-1)return s;let l;return i?l=r.get(a%(n?3:2)):a===0?l="X":l=n&&a%2===0?"size":"Y",`${s} (${l})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},U6e={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0},{type:"chartSpecific",isOpen:!0}]},W6e=class extends pe{constructor(e){super('<div class="ag-chart-data-wrapper ag-scrollable-container"></div>'),this.chartMenuContext=e,this.isSwitchCategorySeriesToggled=!1,this.restoreSwitchCategorySeriesToggleFocus=!1,this.panels=[],this.chartController=e.chartController}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){this.createSwitchCategorySeriesToggle(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.updatePanels();let e=this.updatePanels.bind(this);this.addManagedListeners(this.chartController,{chartModelUpdate:e,chartApiUpdate:e})}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){let e=this.chartType,t=this.isSwitchCategorySeriesToggled,{dimensionCols:n,valueCols:i}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();let r=this.isSwitchCategorySeriesToggled!==t;this.canRefresh(e,this.chartType)&&!r?(this.categoriesDataPanel?.refresh(n),this.seriesDataPanel?.refresh(i),this.seriesChartTypePanel?.refresh(i),this.chartSpecificPanel?.refresh()):this.recreatePanels(n,i);let o=pX(this.chartType)&&this.chartSvc.isEnterprise()&&!this.chartController.isGrouping();Ie(this.switchCategorySeriesToggle.getGui(),o),r&&this.switchCategorySeriesToggle?.setValue(this.chartController.isCategorySeriesSwitched()),this.restoreSwitchCategorySeriesToggleFocus&&(this.restoreSwitchCategorySeriesToggleFocus=!1,o&&this.switchCategorySeriesToggle.getFocusableElement().focus())}canRefresh(e,t){if(e===void 0)return!1;if(e===t)return!0;let n=i=>["columnLineCombo","areaColumnCombo","customCombo"].includes(i);return!!(n(e)&&n(t))}recreatePanels(e,t){this.clearPanelComponents();let{chartType:n}=this;if(!n)return;let i=this.chartController.isCategorySeriesSwitched();this.getDataPanelDef().groups?.forEach(({type:r,isOpen:o})=>{r===(i?"series":"categories")?(this.categoriesDataPanel=this.createBean(new G6e(this.chartController,this.getCategoryGroupTitle(i),this.getCategoryGroupMultipleSelect(n,i),e,o)),this.panels.push(this.categoriesDataPanel)):r===(i?"categories":"series")?(this.seriesDataPanel=this.createBean(new j6e(this.chartController,this.chartMenuContext.chartOptionsService,this.getSeriesGroupTitle(i),this.getSeriesGroupMultipleSelect(n,i),this.getSeriesGroupMaxSelection(n,i),t,o)),this.panels.push(this.seriesDataPanel)):r==="seriesChartType"?this.chartController.isComboChart()&&(this.seriesChartTypePanel=this.createBean(new z6e(this.chartController,t,o)),this.panels.push(this.seriesChartTypePanel)):r==="chartSpecific"?(this.chartSpecificPanel=this.createBean(new H6e(this.chartMenuContext,o)),this.panels.push(this.chartSpecificPanel)):X(144,{type:r})}),(i?this.categoriesDataPanel:this.seriesDataPanel)?.addItem(this.switchCategorySeriesToggle.getGui()),this.addPanelComponents()}addPanelComponents(){if(!this.panels.length)return;let t=vi(this.beans).createDocumentFragment();for(let n of this.panels)n.addCss("ag-chart-data-section"),t.appendChild(n.getGui());this.getGui().appendChild(t)}clearPanelComponents(){for(let e of this.panels)e.getGui().remove(),this.destroyBean(e);this.panels=[]}getDataPanelDef(){return this.gos.get("chartToolPanelsDef")?.dataPanel??U6e}getCategoryGroupTitle(e){return e?this.chartTranslation.translate("seriesLabels"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return t?!1:jL(e)!==1}getSeriesGroupTitle(e){return e?this.chartTranslation.translate("categoryValues"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return this.getSeriesGroupMaxSelection(e,t)!==1}getSeriesGroupMaxSelection(e,t){if(!t)return yA(e)}createSwitchCategorySeriesToggle(){this.switchCategorySeriesToggle=this.createManagedBean(new Ic({label:this.chartTranslation.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartController.isCategorySeriesSwitched(),onValueChange:e=>{this.restoreSwitchCategorySeriesToggleFocus=!0,this.chartController.switchCategorySeries(e)}}))}},$6e=class extends yy{constructor(e){super(e,`<div class="ag-angle-select">
            <div data-ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div class="ag-angle-select-field">
                    <div data-ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div data-ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field data-ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,[Sg]),this.eLabel=q,this.eParentCircle=q,this.eChildCircle=q,this.eAngleValue=q,this.radius=0,this.offsetX=0,this.offsetY=0}wireBeans(e){this.dragSvc=e.dragSvc}postConstruct(){super.postConstruct();let{value:e,onValueChange:t}=this.config;e!=null&&this.setValue(e,void 0,!0),t!=null&&this.onValueChange(t),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:()=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:n=>this.calculateAngleDrag(n),onDragStop:()=>{}},this.dragSvc?.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(n=>{(n==null||n==="")&&(n="0"),n=this.eAngleValue.normalizeValue(n);let i=parseFloat(n);i>180&&(i=i-360),this.setValue(i)}),this.updateNumberInput(),_e(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListeners(this,{fieldValueChanged:()=>{this.eAngleValue.getInputElement().contains(wt(this.beans))||this.updateNumberInput()}})}updateNumberInput(){let e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){let t=this.parentCircleRect||{width:24,height:24},n=this.eChildCircle,i=t.width/2,r=t.height/2;n.style.left=`${i+Math.cos(e)*8}px`,n.style.top=`${r+Math.sin(e)*8}px`}calculatePolar(){let e=this.offsetX,t=this.offsetY,n=Math.atan2(t,e);this.degrees=this.toDegrees(n),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(n)}calculateCartesian(){let e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){let t=this.parentCircleRect,n=t.width/2,i=t.height/2,r=e.clientX-t.left,o=e.clientY-t.top,s=r-n,a=o-i,l=Math.atan2(a,s);this.setValue(l,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>{e(this.degrees)}}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,n){let i;return t?i=e:i=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(i),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(i),n||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}setWidth(e){return _l(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragSvc?.removeDragSource(this.dragListener),super.destroy()}};function q6e(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}var wp=class extends pe{constructor(e){super(),this.params=e,this.fontGroup=q,this.activeComps=[],this.chartOptions=e.chartMenuParamsFactory.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{cssIdentifier:e="charts-format-sub-level",name:t,enabled:n,onEnableChange:i,suppressEnabledCheckbox:r,chartMenuParamsFactory:o,keyMapper:s}=this.params,a={cssIdentifier:e,direction:"vertical",suppressOpenCloseIcons:!0,title:t,enabled:n,suppressEnabledCheckbox:!0,onEnableChange:l=>{i&&i(l)},useToggle:!r};this.setTemplate(`<div class="ag-font-panel">
        <ag-group-component data-ref="fontGroup">
            <ag-select data-ref="familySelect"></ag-select>
            <ag-select data-ref="weightStyleSelect"></ag-select>
            <div class="ag-charts-font-size-color">
                <ag-select data-ref="sizeSelect"></ag-select>
                <ag-color-picker data-ref="colorPicker"></ag-color-picker>
            </div>
        </ag-group-component>
    </div>`,[Ii,Ua,jd],{fontGroup:a,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:o.getDefaultColorPickerParams(s("color"))}),this.toggleCss("ag-font-panel-no-header",!t)}addItem(e,t){t?this.fontGroup.prependItem(e):this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){let e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily"),n=e[0];if(t){let o=e.map(s=>s.toLowerCase()).indexOf(t.toLowerCase());if(o>=0)n=e[o];else{let s=q6e(t);e.push(s),n=s}}let i=e.sort().map(r=>({value:r,text:r}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("font",i,`${n}`,r=>this.setFont({fontFamily:r}))}getSizeSelectParams(){let e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");e.includes(t)||e.push(t);let n=e.sort((i,r)=>i-r).map(i=>({value:`${i}`,text:`${i}`}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("size",n,`${t}`,i=>this.setFont({fontSize:parseInt(i,10)}))}getWeightStyleSelectParams(){let e=this.getInitialFontValue("fontWeight")??"normal",t=this.getInitialFontValue("fontStyle")??"normal",n=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],i=n.find(o=>o.weight===e&&o.style===t);i||(i={name:"predefined",weight:e,style:t},n.unshift(i));let r=n.map(o=>({value:o.name,text:this.chartTranslation.translate(o.name)}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("weight",r,i.name,o=>{let s=n.find(a=>a.name===o);this.setFont({fontWeight:s.weight,fontStyle:s.style})})}destroyActiveComps(){for(let e of this.activeComps)Bt(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){let{keyMapper:t}=this.params;for(let n of Object.keys(e)){let i=e[n];i&&this.chartOptions.setValue(t(n),i)}}getInitialFontValue(e){let{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}},K6e=class extends pe{constructor(e){super(),this.chartMenuUtils=e,this.axisTicksSizeSlider=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{chartMenuUtils:e}=this,t=e.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("ticks"),suppressEnabledCheckbox:!0,useToggle:!0}),n=e.getDefaultColorPickerParams("tick.stroke"),i=e.getDefaultSliderParams("tick.width","width",10),r=e.getDefaultSliderParams("tick.size","length",30);this.setTemplate(`<div>
            <ag-group-component data-ref="axisTicksGroup">
                <ag-color-picker data-ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider data-ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider data-ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,jd,fa],{axisTicksGroup:t,axisTicksColorPicker:n,axisTicksWidthSlider:i,axisTicksSizeSlider:r})}setTickSizeSliderDisplayed(e){this.axisTicksSizeSlider.setDisplayed(e)}},Y6e=class extends pe{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("gridLines"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.getGridLineColorPickerParams("color"),n=this.getGridLineWidthSliderParams("thickness"),i=this.getGridLineDashSliderParams("lineDash");this.setTemplate(`<div>
            <ag-group-component data-ref="gridLineGroup">
                <ag-color-picker data-ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider data-ref="gridLineWidthSlider"></ag-slider>
                <ag-slider data-ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,jd,fa],{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:n,gridLineLineDashSlider:i})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:t=>t?.[0]?.stroke,parseInputValue:t=>{let n=this.chartOptions.getValue("gridLine.style")??[];return n.length===0?[{stroke:t,lineDash:[]}]:[ce(T({},n[0]),{stroke:t})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){let n=this.chartOptions.getValue("gridLine.style")?.[0]?.lineDash?.[0],i=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(n??0,e,30);return i.onValueChange=r=>{let o=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[r],stroke:o}])},i}},Z6e="%d %B %Y",nA=class extends pe{constructor(e,t){super(),this.axisType=e,this.options=t,this.axisGroup=q,this.axisTypeSelect=q,this.axisPositionSelect=q,this.axisTimeFormatSelect=q,this.activePanels=[],this.updateFuncs=[];let{chartOptionsService:n,seriesType:i,chartController:r}=t;this.chartOptionsService=n,this.chartController=r,this.chartOptionsSeriesProxy=n.getSeriesOptionsProxy(()=>i)}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{isExpandedOnInit:e,chartOptionsService:t,registerGroupComponent:n}=this.options,i=this.axisType,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(i),expanded:e,suppressEnabledCheckbox:!0},o=t.getCartesianAxisOptionsProxy(this.axisType),s=this.createManagedBean(new Ng(o)),a=this.createManagedBean(new Ng(t.getCartesianAxisThemeOverridesProxy(this.axisType))),l=this.getAxisTypeSelectParams(s,t.getCartesianAxisAppliedThemeOverridesProxy(this.axisType)),c=this.getAxisPositionSelectParams(s),d=this.getAxisTimeFormatSelectParams(s),u=this.getAxisColorInputParams(a),h=this.getAxisLineWidthSliderParams(a);this.setTemplate(`<div>
            <ag-group-component data-ref="axisGroup">
                <ag-select data-ref="axisTypeSelect"></ag-select>
                <ag-select data-ref="axisTimeFormatSelect"></ag-select>
                <ag-select data-ref="axisPositionSelect"></ag-select>
                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>
                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,Ua,jd,fa],{axisGroup:r,axisTypeSelect:l??void 0,axisPositionSelect:c??void 0,axisTimeFormatSelect:d??void 0,axisColorInput:u,axisLineWidthSlider:h}),n(this.axisGroup),this.axisTypeSelect.setDisplayed(!!l.options?.length),c||this.removeTemplateComponent(this.axisPositionSelect);let p=()=>{let g=o.getValue("type")==="time";Ie(this.axisTimeFormatSelect.getGui(),g)};d?(p(),this.addManagedEventListeners({chartOptionsChanged:()=>{p()}})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(a),this.initAxisTicks(a),this.initAxisLabels(a);let f=()=>{for(let g of this.updateFuncs)g()};this.addManagedListeners(this.chartController,{chartUpdated:f,chartModelUpdate:()=>setTimeout(()=>{this.isAlive()&&(this.refreshAxisTypeSelect(s),p())})})}getAxisTypeSelectParams(e,t){let n=e.getChartOptions(),i=this.getAxisTypeSelectOptions(),r=e.getDefaultSelectParams("type","axisType",i);return r.onValueChange=o=>{let s=n.getValue("type");if(o===s)return;let a=t.getValue("*"),l=s==="time",c=o==="time",d=l!==c?c?Z6e:void 0:null;d===void 0&&n.clearValue?.("label","format"),this.chartOptionsService.setCartesianCategoryAxisType(this.axisType,o),d!=null&&n.setValue("label.format",d),t.setValue("*",a)},r}refreshAxisTypeSelect(e){let t=this.getAxisTypeSelectOptions(),n=!!t.length;this.axisTypeSelect.setDisplayed(n),n&&this.axisTypeSelect.clearOptions().addOptions(t).setValue(e.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){let e=this.chartController,t=e.getChartType(),n=()=>{let i=e.getChartData()[0];return i?e.getSelectedDimensions().every(r=>!isNaN(parseFloat(i[r.colId]))):!1};return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(t)||e.isGrouping()||!this.isCategoryAxis()||e.isCategorySeriesSwitched()||!n()?[]:["category","number","time"].map(i=>({value:i,text:this.translate(i)}))}isCategoryAxis(){let e=this.chartOptionsSeriesProxy.getValue("direction")==="horizontal";return e&&this.axisType==="yAxis"||!e&&this.axisType==="xAxis"}getAxisPositionSelectParams(e){let t=((n,i)=>{if(n==="heatmap")return null;if(i==="xAxis")return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];if(i==="yAxis")return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){if(!this.isCategoryAxis())return null;let t=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return e.getDefaultSelectParams("label.format","timeFormat",t)}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.stroke")}getAxisLineWidthSliderParams(e){let t=e.getChartOptions(),n=()=>t.getValue("line.enabled")?t.getValue("line.width"):null,i=o=>{t.setValues([{expression:"line.enabled",value:o!=null},{expression:"line.width",value:o??0}])},r=e.getDefaultSliderParamsWithoutValueParams(n()??0,"thickness",10);return r.onValueChange=o=>{i(o===0?null:o)},r}initGridLines(e){if(this.chartController.getChartType()==="heatmap")return;let n=this.createBean(new Y6e(e));this.axisGroup.addItem(n),this.activePanels.push(n)}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;let t=this.createBean(new K6e(e));this.axisGroup.addItem(t),this.activePanels.push(t);let n=()=>t.setTickSizeSliderDisplayed(this.isGroupedCategoryAxis());this.updateFuncs.push(n),n()}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){let t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:i=>`label.${i}`},n=this.createBean(new wp(t));this.axisGroup.addItem(n),this.activePanels.push(n),this.addAdditionalLabelComps(n,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);let n=this.createRotationWidget("labelRotation",t),i=this.initLabelRotation(n,t);e.addItem(i),e.addItem(n)}initLabelRotation(e,t){let n=t.getChartOptions(),i=()=>n.getValue("label.rotation"),r=()=>n.getValue("label.autoRotate"),o=d=>{d&&(this.prevRotation=i()),n.setValues([{expression:"label.autoRotate",value:d},{expression:"label.rotation",value:d?void 0:this.prevRotation}]),e.setDisplayed(!d)},a=typeof i()=="number"?!1:r(),l=this.createBean(new Nd({label:this.translate("autoRotate"),value:a,onValueChange:o}));e.setDisplayed(!a);let c=()=>l.setDisplayed(this.isGroupedCategoryAxis());return this.updateFuncs.push(c),c(),l}createRotationWidget(e,t){let n=t.getChartOptions(),i=()=>n.getValue("label.rotation"),r=l=>n.setValue("label.rotation",l),s=`${this.chartTranslation.translate(e)} \xB0`,a=new $6e({label:s,labelWidth:"flex",value:i()??0,onValueChange:r});return this.updateFuncs.push(()=>{a.setValue(i()??0)}),this.createBean(a)}isGroupedCategoryAxis(){return this.chartOptionsService.getCartesianAxisOptionsProxy(this.axisType).getValue("type")==="grouped-category"?!this.isCategoryAxis():!0}addLabelPadding(e,t){let n=this.createBean(new Ka(t.getDefaultSliderParams("label.spacing","padding",30)));e.addItem(n)}translate(e){return this.chartTranslation.translate(e)}removeTemplateComponent(e){Bt(e.getGui()),this.destroyBean(e)}destroyActivePanels(){for(let e of this.activePanels)Bt(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},X6e=class extends pe{constructor(e){super(),this.options=e,this.axisGroup=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{isExpandedOnInit:e,chartAxisMenuParamsFactory:t,registerGroupComponent:n}=this.options,i={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:e,suppressEnabledCheckbox:!0},r=t.getDefaultColorPickerParams("line.stroke"),o=t.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(`<div>
            <ag-group-component data-ref="axisGroup">
                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>
                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,jd,fa],{axisGroup:i,axisColorInput:r,axisLineWidthSlider:o}),n(this.axisGroup),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){let e=this.options.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){let n=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:n,property:"shape"}))}e!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){let e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:this.options.chartAxisMenuParamsFactory,keyMapper:i=>`label.${i}`},t=this.createManagedBean(new wp(e)),n=this.createOrientationWidget();t.addItem(n),this.axisGroup.addItem(t)}createOrientationWidget(){let e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){let e=Ei(this.options.chartController.getChartType());if(!gNe(e))return;let t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],n=this.createManagedBean(new qu({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(n)}createSlider(e){let{labelKey:t,defaultMaxValue:n,step:i=.05,property:r}=e,o=this.options.chartAxisMenuParamsFactory.getDefaultSliderParams(r,t,n);return o.step=i,this.createManagedBean(new Ka(o))}createSelect(e){let{labelKey:t,options:n,property:i}=e;return this.createManagedBean(new Ji(this.options.chartAxisMenuParamsFactory.getDefaultSelectParams(i,t,n)))}translate(e){return this.chartTranslation.translate(e)}},Q6e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("background"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(`<div>
            <ag-group-component data-ref="chartBackgroundGroup">
                <ag-color-picker data-ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,[Ii,jd],{chartBackgroundGroup:e,colorPicker:t})}},J6e=class extends pe{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t,this.paddingTopSlider=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("padding"),suppressEnabledCheckbox:!0},t=n=>this.chartMenuUtils.getDefaultSliderParams("padding."+n,n,200);this.setTemplate(`<div>
            <ag-group-component data-ref="chartPaddingGroup">
                <ag-slider data-ref="paddingTopSlider"></ag-slider>
                <ag-slider data-ref="paddingRightSlider"></ag-slider>
                <ag-slider data-ref="paddingBottomSlider"></ag-slider>
                <ag-slider data-ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,[Ii,fa],{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedEventListeners({chartOptionsChanged:n=>{this.updateTopPadding(n.chartOptions)}})}updateTopPadding(e){let t=[...this.chartController.getChartSeriesTypes(),"common"].map(n=>e?.[n]?.padding?.top).find(n=>n!=null);t!=null&&this.paddingTopSlider.setValue(`${t}`)}},e8e=class extends pe{constructor(e){super(),this.options=e,this.chartGroup=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:n,registerGroupComponent:i}=this.options,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartStyle"),expanded:n,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new J6e(t,e)),this.createManagedBean(new Q6e(t))]};this.setTemplate(`<div>
            <ag-group-component data-ref="chartGroup"></ag-group-component>
        </div>`,[Ii],{chartGroup:r}),i(this.chartGroup)}},t8e=class extends K{constructor(e){super(),this.groupContainer=e,this.id=0,this.groupComponents=new Map}addGroupComponent(e){let t=this.id++;this.groupComponents.set(t,e),e.isExpanded()&&(this.expandedGroupComponent=t),e.onExpandedChange(n=>{if(n){let i=this.expandedGroupComponent;if(this.expandedGroupComponent=t,i!=null){let r=e.getGui(),o=r.offsetTop-this.groupContainer.parentElement.scrollTop;this.groupComponents.get(i)?.toggleGroupExpand(!1,!0);let s=r.offsetTop-o;s<0&&(s=0),s!==this.groupContainer.parentElement.scrollTop&&(this.groupContainer.parentElement.scrollTop=s)}}else this.expandedGroupComponent=void 0})}destroy(){this.groupComponents.clear(),super.destroy()}},n8e=class extends pe{constructor(e,t){super(),this.options=e,this.legendGroup=q,this.enabledGroup=q,this.isGradient=["treemap","sunburst","heatmap"].includes(e.seriesType),this.key=this.isGradient?"gradientLegend":"legend",this.chartController=t.chartController}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{chartMenuParamsFactory:e,isExpandedOnInit:t,registerGroupComponent:n}=this.options,i=this.createManagedBean(new Ji(e.getDefaultSelectParams(`${this.key}.position`,"position",["top","right","bottom","left"].map(s=>({value:s,text:this.chartTranslation.translate(s)})))));this.enabledGroup=this.createManagedBean(new qu(e.addEnableParams(`${this.key}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("legendEnabled"),suppressEnabledCheckbox:!0,useToggle:!0,items:[this.createLabelPanel(e),i,...this.getItems(e)]})));let r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("legend"),suppressEnabledCheckbox:!0,expanded:t,items:[this.enabledGroup]};this.setTemplate(`<div>
            <ag-group-component data-ref="legendGroup">
            </ag-group-component>
        </div>`,[Ii],{legendGroup:r}),n(this.legendGroup);let o=this.updateLegendEnabledState.bind(this);this.addManagedListeners(this.chartController,{chartModelUpdate:o,chartApiUpdate:o})}updateLegendEnabledState(){let{valueCols:e}=this.chartController.getColStateForMenu();this.enabledGroup.setEnabled(e.filter(t=>t.selected).length>1)}getItems(e){let t=(n,i,r)=>this.createManagedBean(new Ka(e.getDefaultSliderParams(`${this.key}.${n}`,i,r)));return this.isGradient?[this.createManagedBean(new Nd(e.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslation.translate("reverseDirection"),labelWidth:"flex"}))),t("gradient.thickness","thickness",40),t("gradient.preferredLength","preferredLength",300),t("spacing","spacing",200)]:[t("spacing","spacing",200),t("item.marker.size","markerSize",40),t("item.marker.strokeWidth","markerStroke",10),t("item.marker.padding","itemSpacing",20),t("item.paddingX","layoutHorizontalSpacing",50),t("item.paddingY","layoutVerticalSpacing",50)]}createLabelPanel(e){let t=this.isGradient?"gradientLegend.scale.label":"legend.item.label",n={enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:i=>`${t}.${i}`,cssIdentifier:"charts-format-sub-level-no-header"};return this.createManagedBean(new wp(n))}},i8e=class extends pe{constructor(e){super(),this.params=e,this.toggleableGroup=q,this.activeComps=[],this.chartOptions=e.chartMenuParamsFactory.getChartOptions()}postConstruct(){let{tag:e,cssIdentifier:t="charts-format-sub-level",title:n,suppressEnabledCheckbox:i}=this.params,r=this.params.chartMenuParamsFactory.addEnableParams(`${e}.enabled`,{cssIdentifier:t,direction:"vertical",suppressOpenCloseIcons:!0,title:n,suppressEnabledCheckbox:!0,useToggle:!i});this.setTemplate(`<div class="ag-toggleable-group-panel">
                <ag-group-component data-ref="toggleableGroup">
                </ag-group-component>
            </div>`,[Ii],{toggleableGroup:r}),this.toggleCss("ag-toggleable-group-panel-no-header",!n)}addItem(e,t){t?this.toggleableGroup.prependItem(e):this.toggleableGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.toggleableGroup.setEnabled(e)}destroyActiveComps(){for(let e of this.activeComps)Bt(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActiveComps(),super.destroy()}},r8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="calloutGroup">
                <ag-slider data-ref="calloutLengthSlider"></ag-slider>
                <ag-slider data-ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider data-ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,fa],{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}},o8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate(`<div>
            <ag-group-component data-ref="capsGroup">
                <ag-slider data-ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,fa],{capsGroup:e,capLengthRatioSlider:t})}},s8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="lineGroup">
                <ag-color-picker data-ref="lineColorPicker"></ag-color-picker>
                <ag-slider data-ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider data-ref="lineOpacitySlider"></ag-slider>
                <ag-slider data-ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`,[Ii,jd,fa],{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,n,i=1,r=!1){let o=this.chartMenuUtils.getDefaultSliderParams(n,e,t,r);return o.step=i,o}};function _X(e){return["square","circle","cross","diamond","plus","triangle","heart"].map(t=>({value:t,text:e.translate(t)}))}var a8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("markers"),suppressEnabledCheckbox:!0,useToggle:!0,suppressOpenCloseIcons:!0});this.setTemplate(`<div>
            <ag-group-component data-ref="seriesMarkersGroup">
                <ag-select data-ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider data-ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider data-ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,Ua,fa],{seriesMarkersGroup:e,seriesMarkerShapeSelect:this.chartMenuUtils.getDefaultSelectParams("marker.shape","shape",_X(this.chartTranslation)),seriesMarkerSizeSlider:this.chartMenuUtils.getDefaultSliderParams("marker.size","size",60),seriesMarkerStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("marker.strokeWidth","strokeWidth",10)})}},l8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e,this.seriesItemsGroup=q,this.activePanels=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="seriesItemsGroup">
                <ag-select data-ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`,[Ii,Ua],{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){let e=[{value:"positive",text:this.chartTranslation.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslation.translate("seriesItemNegative")}],t=n=>{this.destroyActivePanels(),this.initSeriesControls(n)};return this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesItemType",e,"positive",t)}initSeriesControls(e="positive"){this.initSlider("strokeWidth",10,`item.${e}.strokeWidth`),this.initSlider("lineDash",30,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,t,n,i=1,r=!1){let o=this.chartMenuUtils.getDefaultSliderParams(n,e,t,r);o.step=i;let s=this.seriesItemsGroup.createManagedBean(new Ka(o));this.seriesItemsGroup.addItem(s),this.activePanels.push(s)}initItemLabels(e){let t=this.chartMenuUtils.getDefaultFontPanelParams(`item.${e}.label`,"seriesItemLabels"),n=this.createBean(new wp(t));this.seriesItemsGroup.addItem(n),this.activePanels.push(n)}destroyActivePanels(){for(let e of this.activePanels)Bt(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},c8e=class extends pe{constructor(e,t="shadow"){super(),this.chartMenuUtils=e,this.propertyKey=t}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e=this.propertyKey,t=this.chartMenuUtils.addEnableParams(`${e}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("shadow"),suppressEnabledCheckbox:!0,useToggle:!0}),n=this.chartMenuUtils.getDefaultColorPickerParams(`${e}.color`);this.setTemplate(`<div>
            <ag-group-component data-ref="shadowGroup">
                <ag-color-picker data-ref="shadowColorPicker"></ag-color-picker>
                <ag-slider data-ref="shadowBlurSlider"></ag-slider>
                <ag-slider data-ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider data-ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,jd,fa],{shadowGroup:t,shadowColorPicker:n,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,n){let i=`${this.propertyKey}.${e}`,r=this.chartMenuUtils.getDefaultSliderParams(i,e,n);return r.minValue=t,r}},d8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="groupSpacing">
                <ag-slider data-ref="groupPaddingSlider"></ag-slider>
                <ag-slider data-ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component data-ref="tileSpacing">
                <ag-slider data-ref="tilePaddingSlider"></ag-slider>
                <ag-slider data-ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,fa],{groupSpacing:ce(T({},e),{title:this.chartTranslation.translate("group")}),tileSpacing:ce(T({},e),{title:this.chartTranslation.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}};function u8e(e){return e[0].toUpperCase()+e.substring(1)}var h8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e,this.tooltipMode=q}postConstruct(){let{chartMenuUtils:e,beans:t}=this,n="tooltip",i=t.chartTranslation,r=e.addEnableParams(`${n}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:i.translate("tooltips"),suppressEnabledCheckbox:!0,useToggle:!0}),o="tooltipMode",s=["single","shared","compact"].map(c=>({value:c,text:i.translate(`${o}${u8e(c)}`)})),a=`${n}.mode`,l=e.getDefaultSelectParams(a,o,s);this.setTemplate(`<div>
            <ag-group-component data-ref="tooltipGroup">
                <ag-select data-ref="tooltipMode"></ag-select>
            </ag-group-component>
        </div>`,[Ii,Ua],{tooltipGroup:r,tooltipMode:l}),this.addManagedEventListeners({chartOptionsChanged:()=>{let c=e.getChartOptions().getValue(a);this.tooltipMode.setValue(c,!0)}})}},p8e=class extends pe{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="whiskersGroup">
                <ag-color-picker data-ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider data-ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider data-ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider data-ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider data-ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,[Ii,jd,fa],{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}},er="tooltips",Ho="strokeWidth",Vy="lineWidth",ls="lineDash",Co="lineOpacity",cs="fillOpacity",eo="labels",Hu="shadow",iA="stageLabels",Gy="markers",f8e=class extends pe{constructor(e){super(),this.options=e,this.seriesGroup=q,this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth(Vy),[Ho]:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),[ls]:()=>this.initLineDash(),[Co]:()=>this.initOpacity("strokeOpacity"),[cs]:()=>this.initOpacity("fillOpacity"),markers:()=>new a8e(this.chartMenuUtils),[eo]:()=>this.initLabels(),sectorLabels:()=>this.initSectorLabels(),[Hu]:()=>new c8e(this.chartMenuUtils),[er]:()=>new h8e(this.options.chartMenuParamsFactory),bins:()=>this.initBins(),whiskers:()=>new p8e(this.chartMenuUtils),caps:()=>new o8e(this.chartMenuUtils),connectorLine:()=>new s8e(this.chartMenuUtils),seriesItems:()=>new l8e(this.chartMenuUtils),tileSpacing:()=>new d8e(this.chartMenuUtils),shape:()=>this.initShape(),size:()=>this.initSize("size","size"),minSize:()=>this.initSize("size","minSize"),maxSize:()=>this.initSize("maxSize","maxSize"),dropoff:()=>this.initDropOff(),stageLabels:()=>this.initStageLabels()},this.seriesWidgetMappings={bar:[er,Ho,ls,Co,cs,eo,Hu],pie:[er,Ho,Co,cs,eo,"sectorLabels",Hu],donut:[er,Ho,Co,cs,eo,"sectorLabels",Hu],line:[er,Vy,ls,Co,Gy,eo],scatter:[er,"shape","size",Ho,eo],bubble:[er,"shape","minSize","maxSize",Ho,eo],area:[er,Vy,ls,Co,cs,Gy,eo,Hu],histogram:[er,"bins",Ho,ls,Co,cs,eo,Hu],"radial-column":[er,Ho,ls,Co,cs,eo],"radial-bar":[er,Ho,ls,Co,cs,eo],"radar-line":[er,Ho,ls,Co,Gy,eo],"radar-area":[er,Ho,ls,Co,cs,Gy,eo],nightingale:[er,Ho,ls,Co,cs,eo],"box-plot":[er,Ho,ls,Co,cs,"whiskers","caps"],"range-bar":[er,Ho,ls,Co,cs,eo],"range-area":[er,Vy,ls,Co,cs,Gy,eo,Hu],treemap:[er,"tileSpacing"],sunburst:[er],heatmap:[er,eo,"lineColor",Vy,Co],waterfall:[er,"connectorLine","seriesItems"],funnel:[er,Ho,ls,Co,cs,eo,"dropoff",iA,Hu],"cone-funnel":[er,Ho,ls,Co,cs,eo,iA],pyramid:[er,Ho,ls,Co,cs,eo,iA,Hu]},this.seriesType=e.seriesType}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{isExpandedOnInit:e,chartOptionsService:t,chartController:n,registerGroupComponent:i}=this.options,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:e,suppressEnabledCheckbox:!0};this.setTemplate(`<div>
            <ag-group-component data-ref="seriesGroup">
            </ag-group-component>
        </div>`,[Ii],{seriesGroup:r}),i(this.seriesGroup),this.chartMenuUtils=this.createManagedBean(new Ng(t.getSeriesOptionsProxy(()=>this.seriesType))),this.addManagedListeners(n,{chartSeriesChartTypeChanged:this.refreshWidgets.bind(this)}),this.refreshWidgets()}refreshWidgets(){let{chartController:e}=this.options;this.destroyActivePanels(),e.getChartProxy().getChart().waitForUpdate().then(()=>{if(this.isAlive()){e.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect());for(let i of this.seriesWidgetMappings[this.seriesType]??[]){let r=this.widgetFuncs[i](),o;if(Array.isArray(r)){let s=this.createBean(r[0]);o=s,r[1](s)}else o=this.createBean(r);this.seriesGroup.addItem(o),this.activePanels.push(o)}}}).catch(n=>mt(105,{e:n}))}initSeriesSelect(){let e=this.createBean(new Ji(this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesType",this.getSeriesSelectOptions(),`${this.seriesType}`,t=>{this.seriesType=t,this.refreshWidgets()})));this.seriesGroup.addItem(e),this.activePanels.push(e)}initLineColor(){return new bX(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor"))}initStrokeWidth(e,t){return new Ka(this.chartMenuUtils.getDefaultSliderParams(t?`${t}.${e}`:"strokeWidth",e,10))}initLineDash(e){return new Ka(this.chartMenuUtils.getDefaultSliderParams(e?`${e}.lineDash`:"lineDash","lineDash",30,!0))}initOpacity(e,t){let n=this.chartMenuUtils.getDefaultSliderParams(t?`${t}.${e}`:e,e,1);return n.step=.05,new Ka(n)}initDropOff(){return[new i8e({tag:"dropOff",cssIdentifier:"charts-format-sub-level",title:this.translate("dropOff"),suppressEnabledCheckbox:!1,chartMenuParamsFactory:this.chartMenuUtils}),n=>{for(let i of[this.initStrokeWidth("strokeWidth","dropOff"),this.initLineDash("dropOff"),this.initOpacity("strokeOpacity","dropOff"),this.initOpacity("fillOpacity","dropOff")]){let r=n.createManagedBean(i);n.addItem(r),this.activePanels.push(r)}}]}initLabels(){let e=hX(this.seriesType),t=e?"calloutLabel":"label",n=e?"calloutLabels":"labels",i=this.chartMenuUtils.getDefaultFontPanelParams(t,n);return[new wp(i),s=>{if(e){let a=s.createManagedBean(new r8e(this.chartMenuUtils));s.addItem(a),this.activePanels.push(a)}if(this.seriesType==="range-bar"){let a=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],l=s.createManagedBean(new Ji(this.chartMenuUtils.getDefaultSelectParams("label.placement","labelPlacement",a)));s.addItem(l),this.activePanels.push(l);let c=s.createManagedBean(new Ka(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));s.addItem(c),this.activePanels.push(c)}}]}initSectorLabels(){let e=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels");return[new wp(e),i=>{let r=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);r.step=.05;let o=i.createManagedBean(new Ka(r));i.addItem(o)}]}initStageLabels(){return new wp(this.chartMenuUtils.getDefaultFontPanelParams("stageLabel",iA))}initBins(){let e=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),t=this.chartMenuUtils.getChartOptions(),n=(t.getValue("bins")??t.getValue("calculatedBins",!0)).length;return e.value=`${n}`,e.maxValue=Math.max(n,20),new Ka(e)}initShape(){return new Ji(this.chartMenuUtils.getDefaultSelectParams("shape","shape",_X(this.chartTranslation)))}initSize(e,t){return new Ka(this.chartMenuUtils.getDefaultSliderParams(e,t,60))}getSeriesSelectOptions(){let e=this.getActiveSeriesTypes();return["area","bar","line"].filter(t=>e.includes(t)).map(t=>({value:t,text:this.translate(t)}))}updateSeriesType(){let e=this.getActiveSeriesTypes();!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}getActiveSeriesTypes(){return this.options.chartController.getActiveSeriesChartTypes().map(e=>Ei(e.chartType))}translate(e){return this.chartTranslation.translate(e)}destroyActivePanels(){for(let e of this.activePanels)Bt(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},jy=class extends pe{constructor(e,t,n){super("<div></div>"),this.chartMenuUtils=e,this.name=t,this.key=n,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.initFontPanel()}hasTitle(){let e=this.chartOptions.getValue(this.key);return e?.enabled&&e.text&&e.text.length>0}initFontPanel(){let e=this.hasTitle(),t={name:this.chartTranslation.translate(this.name),enabled:e,suppressEnabledCheckbox:!1,chartMenuParamsFactory:this.chartMenuUtils,keyMapper:n=>`${this.key}.${n}`,onEnableChange:n=>this.onEnableChange(n)};this.fontPanel=this.createManagedBean(new wp(t)),this.fontPanel.addItem(this.createBean(new Go(this.getTextInputParams())),!0),this.fontPanel.addItem(this.createBean(new Ka(this.getSpacingSliderParams()))),this.getGui().appendChild(this.fontPanel.getGui())}getTextInputParams(){return this.chartMenuUtils.addValueParams(`${this.key}.text`,{label:this.chartTranslation.translate("title"),labelAlignment:"top"})}getSpacingSliderParams(){return this.chartMenuUtils.getDefaultSliderParams(`${this.key}.spacing`,"spacing",100)}onEnableChange(e){this.chartOptions.setValue(`${this.key}.enabled`,e)}},g8e=class extends jy{wireBeans(e){super.wireBeans(e),this.chartMenuSvc=e.chartMenuSvc}postConstruct(){this.titlePlaceholder=this.chartTranslation.translate("titlePlaceholder"),super.postConstruct(),this.addManagedEventListeners({chartTitleEdit:()=>{this.fontPanel.setEnabled(this.hasTitle())}})}getTextInputParams(){let e=super.getTextInputParams();return this.shouldOverrideTextWithPlaceholder(e.value)&&(e.value=this.titlePlaceholder),e}getSpacingSliderParams(){let e=super.getSpacingSliderParams();return e.value="10",e}onEnableChange(e){if(this.chartMenuSvc.doesChartToolbarExist()){let n=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",e?n-20:n+20)}this.chartOptions.setValue(`${this.key}.enabled`,e);let t=this.chartOptions.getValue(`${this.key}.text`);e&&this.shouldOverrideTextWithPlaceholder(t)&&this.chartOptions.setValue(`${this.key}.text`,this.titlePlaceholder)}shouldOverrideTextWithPlaceholder(e){return e==="Title"||e?.trim().length===0}},m8e=class extends pe{constructor(e){super(),this.options=e,this.titleGroup=q}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){let{chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t,chartOptionsService:n,seriesType:i,isExpandedOnInit:r=!1,registerGroupComponent:o}=this.options,s=[];if(Cp(i)&&i!=="pyramid"){let l=c=>this.createManagedBean(new Ng(n.getCartesianAxisThemeOverridesProxy(c)));s.push(this.createManagedBean(new jy(l("xAxis"),"horizontalAxisTitle","title"))),s.push(this.createManagedBean(new jy(l("yAxis"),"verticalAxisTitle","title")))}else zL(i)&&s.push(this.createManagedBean(new jy(t,"polarAxisTitle","title")));let a={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartTitles"),expanded:r,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new g8e(e,"chartTitle","title")),this.createManagedBean(new jy(e,"chartSubtitle","subtitle")),...s]};this.setTemplate(`<div>
            <ag-group-component data-ref="titleGroup"></ag-group-component>
        </div>`,[Ii],{titleGroup:a}),o(this.titleGroup)}},v8e={groups:[{type:"chart"},{type:"titles"},{type:"legend"},{type:"series"},{type:"axis"}]},dY=["axis","horizontalAxis","verticalAxis"],C8e=class extends pe{constructor(e){super('<div class="ag-chart-format-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.groupExpansionFeature=this.createManagedBean(new t8e(this.getGui())),this.chartPanelFeature=this.createManagedBean(new CX(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,t)=>this.createPanels(t))),this.chartPanelFeature.refreshPanels()}createPanels(e){let t=!1;this.getFormatPanelDef().groups?.forEach(({type:n,isOpen:i=!1})=>{if(!this.isGroupPanelShownInSeries(n,e))return;i&&(t&&X(145,{group:n}),t=!0);let r=s=>this.groupExpansionFeature.addGroupComponent(s),o=ce(T({},this.chartMenuContext),{isExpandedOnInit:i,seriesType:e,registerGroupComponent:r});switch(n){case"chart":this.chartPanelFeature.addComponent(new e8e(o));break;case"titles":this.chartPanelFeature.addComponent(new m8e(o));break;case"legend":this.chartPanelFeature.addComponent(new n8e(o,this.chartMenuContext));break;case"axis":zL(e)?this.chartPanelFeature.addComponent(new X6e(o)):Cp(e)&&(this.chartPanelFeature.addComponent(new nA("xAxis",o)),this.chartPanelFeature.addComponent(new nA("yAxis",o)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new nA("xAxis",o));break;case"verticalAxis":this.chartPanelFeature.addComponent(new nA("yAxis",o));break;case"series":this.chartPanelFeature.addComponent(new f8e(o));break;default:X(147,{group:n})}})}getFormatPanelDef(){let e=this.gos.get("chartToolPanelsDef")?.formatPanel;return e||v8e}isGroupPanelShownInSeries(e,t){let n=["chart","titles","legend","series"].includes(e)||Cp(t)&&dY.includes(e)||zL(t)&&e==="axis",i=HL(t)&&e==="legend"||HL(t)&&dY.includes(e);return n&&!i}},b8e="ag-chart-mini-thumbnail-canvas",Bg=class extends pe{constructor(e,t,n){super(),this.agChartsExports=t,this.tooltipName=n,this.size=58,this.padding=5;let{_Scene:i}=t;this.root=new i.Group;let r=new i.Scene({width:this.size,height:this.size});r.canvas.element.classList.add(b8e),r.setRoot(this.root),r.setContainer(e),this.scene=r}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.scene.canvas.element.title=this.chartTranslation.translate(this.tooltipName);try{this.scene.render()}catch(e){mt(108,{e})}}};function n1(e){let{stacked:t,size:n,padding:i,xScalePadding:r,xScaleDomain:o,yScaleDomain:s,agChartsExports:{_Scene:a}}=e,l=new a.CategoryScale;l.domain=o,l.range=[i,n-i],l.paddingInner=r,l.paddingOuter=r;let c=new a.LinearScale;c.domain=s,c.range=[n-i,i];let d=(u,h,p)=>u.map((f,g)=>{let C=p.convert(f),m=new a.Rect;return m.x=h.convert(g),m.y=C,m.width=h.bandwidth,m.height=p.convert(0)-C,m.strokeWidth=0,m.crisp=!0,m});return t?e.data.map(u=>d(u,l,c)):d(e.data,l,c)}function w8e(e,t,n,i){let r=[],o=[];for(let l of t)for(let[c,d]of l)r.push(c),o.push(d);let s=new e.LinearScale;s.domain=[Math.min(...r),Math.max(...r)],s.range=[i,n-i];let a=new e.LinearScale;return a.domain=[Math.min(...o),Math.max(...o)],a.range=[n-i,i],{xScale:s,yScale:a}}function AX(e,t,n,i){let r=[0,t[0].length-1],o=t.reduce((l,c)=>{for(let d of c)d<l[0]&&(l[0]=d),d>l[1]&&(l[1]=d);return l},[1/0,-1/0]);o[0]--,o[o.length-1]++;let s=new e.LinearScale;s.domain=r,s.range=[i,n-i];let a=new e.LinearScale;return a.domain=o,a.range=[n-i,i],{xScale:s,yScale:a}}function RX(e,t,n){return e.map(i=>i.map((r,o)=>[o>0?"lineTo":"moveTo",t.convert(o),n.convert(r)]))}function y8e(e,t,n){return e.map(([i,r],o)=>[o>0?"lineTo":"moveTo",t.convert(i),n.convert(r)])}function S8e(e){let t=e[0],n=e[1],i=Qe(e);return(n[1]!==i[1]||n[2]!==i[2])&&e.push([t[0],n[1],n[2]]),e}function FX(e,t){let n=new e.Path;return t.forEach(([i,r,o])=>n.path[i](r,o)),n}function x8e(e,t,n){return e.map((i,r,o)=>{let a=[...n?E8e(o,r,t):MX(i,t)].reverse().map(([d,u,h])=>["lineTo",u,h]),l=i[0],c=Qe(a);return(l[1]!==c[1]||l[2]!==c[2])&&a.push(["lineTo",l[1],l[2]]),[...i,...a]})}function E8e(e,t,n){return t===0?MX(e[t],n):[...e[t-1]]}function MX(e,t){return e.map(([n,i])=>[n,i,t.convert(0)])}function IX(e,t){let n=FX(e,t);return n.fill=void 0,n.lineCap="round",n.strokeWidth=3,n}function D8e({_Scene:e},t,n,i,r){let{xScale:o,yScale:s}=w8e(e,n,i,r),d=n.map(h=>y8e(h,o,s)).map(h=>S8e(h)).map(h=>IX(e,h)).reduce((h,p)=>h.concat(p),[]),u=new e.Group;return u.setClipRect(new e.BBox(r,r,i-r*2,i-r*2)),u.append(d),t.append(u),d}function f4({_Scene:e},t,n,i,r){let{xScale:o,yScale:s}=AX(e,n,i,r),l=RX(n,o,s).map(d=>IX(e,d)),c=new e.Group;return c.setClipRect(new e.BBox(r,r,i-r*2,i-r*2)),c.append(l),t.append(c),l}function _8e(e,t,n,i,r,o=!1){let{xScale:s,yScale:a}=AX(e,n,i,r),l=x8e(RX(n,s,a),a,o),c=new e.Group;c.setClipRect(new e.BBox(r,r,i-r*2,i-r*2));let d=l.map(u=>FX(e,u));return c.append(d),t.append(c),d}function TX(e){return e.map((t,n,i)=>t.map((r,o)=>i.slice(0,n+1).reduce((s,a)=>s+a[o],0)))}function PX(e){let t=e.map((n,i)=>e.reduce((r,o)=>Math.max(r,o[i]),0));return e.map(n=>n.map((i,r)=>i/t[r]*19))}function kX(e,t,n,i,r,o,s=0){let{_Scene:a}=e,l=new a.LinearScale;l.domain=[0,7],l.range=[-Math.PI,Math.PI].map(f=>f+Math.PI/2);let c=new a.LinearScale;c.domain=[0,10],c.range=[r,o];let d=[],u=i/2,h=n.map(f=>{let g=new a.Path;return g.strokeWidth=1,g.strokeOpacity=.5,g.lineCap="round",g.fill=void 0,g.fillOpacity=.8,f.forEach((C,m)=>{let w=l.convert(m),x=r+o-c.convert(C),D=x*Math.cos(w)+u,F=x*Math.sin(w)+u;if(g.path[m>0?"lineTo":"moveTo"](D,F),s>0){let L=new a.Marker({shape:"circle"});L.x=D,L.y=F,L.size=s,d.push(L)}}),g.path.closePath(),g}),p=new a.Group;return p.append([...h,...d]),t.append(p),{paths:h,markers:d}}function PA(e){let[t,n]=[1/0,-1/0];return{processedData:e.reduce((r,o,s)=>{let a=s>0?r[s-1]:void 0;r[s]??(r[s]=[]);let l=r[s];return o.forEach((c,d)=>{a&&(c+=a[d]),l[d]=c,l[d]<t&&(t=l[d]),l[d]>n&&(n=l[d])}),r},[]),min:t,max:n}}var A8e=[[[13,16],[13,12],[3,12],[3,16]],[[12,11],[12,7],[4,7],[4,11]],[[10.125,6],[10.125,1.5],[5.875,1.5],[5.875,6]]],g4=class extends Bg{constructor(e,t,n,i,r,o="funnelTooltip",s=A8e){super(e,t,o),this.shapes=D8e(t,this.root,s,this.size,this.padding),this.updateColors(n,i)}updateColors(e,t){for(let n of this.shapes)n.fill=e[0],n.stroke=t[0],n.strokeWidth=0}},R8e={chartType:"funnel",miniChart:g4},F8e=[[[13,16],[10.75,11.5],[5.25,11.5],[3,16]],[[10.75,11.5],[8.875,6],[7.125,6],[5.25,11.5]],[[8.875,6],[8.875,1.5],[7.125,1.5],[7.125,6]]],M8e=class extends g4{constructor(e,t,n,i,r,o="coneFunnelTooltip"){super(e,t,n,i,r,o,F8e)}updateColors(e,t){this.shapes.forEach((n,i)=>{n.fill=e[0],n.fillOpacity=1-i*.2,n.stroke=t[0],n.strokeWidth=0})}},I8e={chartType:"coneFunnel",miniChart:M8e},T8e=[[[8,16],[10,12],[6,12]],[[10.5,11],[12.5,7],[3.5,7],[5.5,11]],[[13,6],[15.5,1.5],[.5,1.5],[3,6]]],P8e=class extends g4{constructor(e,t,n,i,r,o="pyramidTooltip"){super(e,t,n,i,r,o,T8e)}updateColors(e,t){this.shapes.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i],n.strokeWidth=0})}},k8e={chartType:"pyramid",miniChart:P8e},Ns=class extends Bg{constructor(e,t,n){super(e,t,n),this.stroke="gray",this.axisOvershoot=3}postConstruct(){let{_Scene:e}=this.agChartsExports,t=this.size,n=this.padding,i=new e.Line;i.x1=n,i.y1=n,i.x2=n,i.y2=t-n+this.axisOvershoot,i.stroke=this.stroke;let r=new e.Line;r.x1=n-this.axisOvershoot+1,r.y1=t-n,r.x2=t-n+1,r.y2=t-n,r.stroke=this.stroke;let o=this.root;o.append(i),o.append(r),super.postConstruct()}},L8e=class extends Ns{constructor(e,t,n,i){super(e,t,"groupedColumnTooltip"),this.columnData=[2,3,4];let{root:r,columnData:o,size:s,padding:a}=this;this.columns=n1({stacked:!1,root:r,data:o,size:s,padding:a,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3,agChartsExports:t}),r.append(this.columns),this.updateColors(n,i)}updateColors(e,t){this.columns.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]})}},O8e={chartType:"groupedColumn",miniChart:L8e},N8e=[[8,12,16],[6,9,12],[2,3,4]],LX=class extends Ns{constructor(e,t,n,i,r,o=N8e,s=[0,16],a="stackedColumnTooltip"){super(e,t,a);let{root:l,size:c,padding:d}=this;this.stackedColumns=n1({stacked:!0,root:l,data:o,size:c,padding:d,xScaleDomain:[0,1,2],yScaleDomain:s,xScalePadding:.3,agChartsExports:t}),l.append(S_(this.stackedColumns)),this.updateColors(n,i)}updateColors(e,t){this.stackedColumns.forEach((n,i)=>{for(let r of n)r.fill=e[i],r.stroke=t[i]})}},B8e={chartType:"stackedColumn",miniChart:LX},V8e=[[10,10,10],[6,7,8],[2,4,6]],G8e=class extends LX{constructor(e,t,n,i,r){super(e,t,n,i,r,V8e,[0,10],"normalizedColumnTooltip")}},H8e={chartType:"normalizedColumn",miniChart:G8e},z8e=class extends Ns{constructor(e,t,n,i){super(e,t,"groupedBarTooltip");let{_Scene:r}=t,o=this.padding,s=this.size,a=[2,3,4],l=new r.CategoryScale;l.domain=[0,1,2],l.range=[o,s-o],l.paddingInner=.3,l.paddingOuter=.3;let c=new r.LinearScale;c.domain=[0,4],c.range=[s-o,o];let d=c.convert(0),u=l.bandwidth;this.bars=a.map((h,p)=>{let f=new r.Rect;return f.x=o,f.y=l.convert(p),f.width=d-c.convert(h),f.height=u,f.strokeWidth=0,f.crisp=!0,f}),this.updateColors(n,i),this.root.append(this.bars)}updateColors(e,t){this.bars.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]})}},j8e={chartType:"groupedBar",miniChart:z8e},U8e=[[8,12,16],[6,9,12],[2,3,4]],OX=class extends Ns{constructor(e,t,n,i,r,o=U8e,s=[0,16],a="stackedBarTooltip"){super(e,t,a);let{_Scene:l}=t,c=this.size,d=this.padding,u=new l.CategoryScale;u.domain=[0,1,2],u.range=[d,c-d],u.paddingInner=.3,u.paddingOuter=.3;let h=new l.LinearScale;h.domain=s,h.range=[c-d,d];let p=h.convert(0),f=u.bandwidth;this.bars=o.map(g=>g.map((C,m)=>{let w=new l.Rect;return w.x=d,w.y=u.convert(m),w.width=p-h.convert(C),w.height=f,w.strokeWidth=0,w.crisp=!0,w})),this.updateColors(n,i),this.root.append(S_(this.bars))}updateColors(e,t){this.bars.forEach((n,i)=>n.forEach(r=>{r.fill=e[i],r.stroke=t[i]}))}},W8e={chartType:"stackedBar",miniChart:OX},$8e=[[10,10,10],[6,7,8],[2,4,6]],q8e=class extends OX{constructor(e,t,n,i,r){super(e,t,n,i,r,$8e,[0,10],"normalizedBarTooltip")}},K8e={chartType:"normalizedBar",miniChart:q8e},NX=class extends Bg{constructor(e,t,n,i,r,o=.6,s="donutTooltip"){super(e,t,s);let{size:a,padding:l,agChartsExports:{_Scene:c}}=this,d=(a-l*2)/2,u=d+l,h=c.toRadians,p=[[h(-90),h(30)],[h(30),h(120)],[h(120),h(180)],[h(180),h(210)],[h(210),h(240)],[h(240),h(270)]];this.sectors=p.map(([f,g])=>{let C=new c.Sector;return C.centerX=u,C.centerY=u,C.innerRadius=d*o,C.outerRadius=d,C.startAngle=f,C.endAngle=g,C.stroke=void 0,C.strokeWidth=0,C.inset=.75,C}),this.updateColors(n,i),this.root.append(this.sectors)}updateColors(e,t){this.sectors.forEach((n,i)=>{n.fill=e[i%e.length],n.stroke=t[i%t.length]})}},uY={chartType:"donut",miniChart:NX},Y8e=class extends NX{constructor(e,t,n,i,r){super(e,t,n,i,r,0,"pieTooltip")}},Z8e={chartType:"pie",miniChart:Y8e},m4=[[1,3,5],[2,6,4],[5,3,1]],v4=class extends Ns{constructor(e,t,n,i,r,o=m4,s="lineTooltip"){super(e,t,s);let{size:a,padding:l,root:c}=this;this.lines=f4(t,c,o,a,l),this.updateColors(n,i)}updateColors(e,t){this.lines.forEach((n,i)=>{n.stroke=e[i]})}},X8e={chartType:"line",miniChart:v4},BX=TX(m4),Q8e=class extends v4{constructor(e,t,n,i,r,o=BX,s="stackedLineTooltip"){super(e,t,n,i,r,o,s)}},J8e={chartType:"stackedLine",miniChart:Q8e},eBe=PX(BX),tBe=class extends v4{constructor(e,t,n,i,r,o=eBe,s="normalizedLineTooltip"){super(e,t,n,i,r,o,s)}},nBe={chartType:"normalizedLine",miniChart:tBe},iBe=class extends Ns{constructor(e,t,n,i){super(e,t,"scatterTooltip");let{size:r,padding:o,agChartsExports:{_Scene:s}}=this,a=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],l=new s.LinearScale;l.domain=[-.5,4],l.range=[o*2,r-o];let c=new s.LinearScale;c.domain=[-.5,3.5],c.range=[r-o,o];let d=[];a.forEach(h=>{h.forEach(([p,f])=>{let g=new s.Arc;g.strokeWidth=0,g.centerX=l.convert(p),g.centerY=c.convert(f),g.radius=2.5,d.push(g)})}),this.points=d,this.updateColors(n,i);let u=new s.Group;u.setClipRect(new s.BBox(o,o,r-o*2,r-o*2)),u.append(this.points),this.root.append(u)}updateColors(e,t){this.points.forEach((n,i)=>{n.stroke=t[i%t.length],n.fill=e[i%e.length]})}},rBe={chartType:"scatter",miniChart:iBe},oBe=class extends Ns{constructor(e,t,n,i){super(e,t,"bubbleTooltip");let{size:r,padding:o,agChartsExports:{_Scene:s}}=this,a=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],l=new s.LinearScale;l.domain=[0,1],l.range=[o*2,r-o];let c=new s.LinearScale;c.domain=[0,1],c.range=[r-o,o];let d=[];a.forEach(h=>{h.forEach(([p,f,g])=>{let C=new s.Arc;C.strokeWidth=0,C.centerX=l.convert(p),C.centerY=c.convert(f),C.radius=g,C.fillOpacity=.7,d.push(C)})}),this.points=d,this.updateColors(n,i);let u=new s.Group;u.setClipRect(new s.BBox(o,o,r-o*2,r-o*2)),u.append(this.points),this.root.append(u)}updateColors(e,t){this.points.forEach((n,i)=>{n.stroke=t[i%t.length],n.fill=e[i%e.length]})}},sBe={chartType:"bubble",miniChart:oBe},VX=m4,GX=class extends Ns{constructor(e,t,n,i,r,o=VX,s="groupedAreaTooltip",a=!1){super(e,t,s),this.areas=_8e(t._Scene,this.root,o,this.size,this.padding,a),this.updateColors(n,i)}updateColors(e,t){this.areas.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i],n.strokeWidth=1,n.strokeOpacity=.75,n.fillOpacity=.7})}},aBe={chartType:"area",miniChart:GX},HX=TX(VX),zX=class extends GX{constructor(e,t,n,i,r,o=HX,s="stackedAreaTooltip"){super(e,t,n,i,r,o,s,!0)}updateColors(e,t){this.areas.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]})}},lBe={chartType:"stackedArea",miniChart:zX},cBe=PX(HX),dBe=class extends zX{constructor(e,t,n,i,r,o=cBe,s="normalizedAreaTooltip"){super(e,t,n,i,r,o,s)}},uBe={chartType:"normalizedArea",miniChart:dBe},hBe=class extends Ns{constructor(e,t,n,i){super(e,t,"histogramTooltip");let{padding:r,size:o,agChartsExports:{_Scene:s}}=this,a=[2,5,11,13,10,6,1],l=new s.LinearScale;l.domain=[0,a.length],l.range=[r,o-r];let c=new s.LinearScale;c.domain=[0,a.reduce((u,h)=>Math.max(u,h),0)],c.range=[o-r,r];let d=c.convert(0);this.bars=a.map((u,h)=>{let p=c.convert(u),f=l.convert(h),g=l.convert(h+1),C=new s.Rect;return C.x=f,C.y=p,C.width=g-f,C.height=d-p,C.strokeWidth=1,C.strokeOpacity=.75,C.crisp=!0,C}),this.updateColors(n,i),this.root.append(this.bars)}updateColors([e],[t]){for(let n of this.bars)n.fill=e,n.stroke=t}},pBe={chartType:"histogram",miniChart:hBe},j0=class extends Bg{constructor(e,t,n){super(e,t,n),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}postConstruct(){let{_Scene:e}=this.agChartsExports,t=this.size,n=this.padding,i=n*2,r=(t-i)/2,o=this.showAngleAxisLines?[r,r*.8,r*.6,r*.4]:[],s=new e.Line;s.x1=t/2,s.y1=n,s.x2=t/2,s.y2=t-n-r-o[o.length-1],s.stroke=this.stroke,s.strokeOpacity=.5,s.fill=void 0,s.visible=this.showRadiusAxisLine;let a=n+r;this.gridLines=o.map((c,d)=>{let u=new e.Path;return u.path.arc(a,a,c,0,2*Math.PI),u.strokeWidth=1,u.stroke=this.stroke,u.strokeOpacity=d===0?.5:.2,u.fill=void 0,u});let l=this.root;l.append(s),this.gridLines.length>0&&l.append(this.gridLines),super.postConstruct()}},fBe=class extends j0{constructor(e,t,n,i){super(e,t,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;let{padding:r,size:o,data:s,agChartsExports:{_Scene:a}}=this,l=(o-r*2)/2,d=l*.4,u=new a.CategoryScale;u.domain=s[0].map((m,w)=>w),u.range=[0,2*Math.PI],u.paddingInner=0,u.paddingOuter=0;let h=u.bandwidth*.7,{processedData:p,max:f}=PA(s),g=new a.LinearScale;g.domain=[0,f],g.range=[d,l];let C=this.size/2;this.series=p.map((m,w)=>{let D=w===0?void 0:p[w-1],F=new a.TranslatableGroup({zIndex:1e6}),L=m.map((V,B)=>{let P=D?.[B],U=g.convert(V),A=g.convert(P??0),I=u.convert(B),j=I+h,G=a.getRadialColumnWidth(I,j,l,.5,.5),Q=new a.RadialColumnShape;return Q.columnWidth=G,Q.innerRadius=A,Q.outerRadius=U,Q.startAngle=I,Q.endAngle=j,Q.isBeveled=!0,Q.axisInnerRadius=d,Q.axisOuterRadius=l,Q.stroke=void 0,Q.strokeWidth=0,Q});return F.append(L),F.translationX=C,F.translationY=C,F}),this.root.append(this.series),this.updateColors(n,i)}updateColors(e,t){this.series.forEach((n,i)=>{for(let r of n.children())r.fill=e[i%e.length],r.stroke=t[i%t.length]})}},gBe={chartType:"radialColumn",miniChart:fBe},mBe=class extends j0{constructor(e,t,n,i){super(e,t,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;let{size:r,padding:o,data:s,agChartsExports:{_Scene:a}}=this,l=(r-o)/2,d=l*.4,u=new a.CategoryScale;u.domain=s[0].map((x,D)=>D),u.range=[d,l],u.paddingInner=.5,u.paddingOuter=0;let h=u.bandwidth,{processedData:p,max:f}=PA(s),g=new a.LinearScale;g.domain=[0,Math.ceil(f*1.5)];let C=3/2*Math.PI,m=C+2*Math.PI;g.range=[C,m];let w=r/2;this.series=p.map((x,D)=>{let F=D<0?void 0:p[D-1],L=new a.Group({zIndex:1e6}),V=x.map((B,P)=>{let U=F?.[P]??0,A=u.convert(P),I=A-h,j=g.convert(U),G=g.convert(B),Q=new a.Sector;return Q.centerX=w,Q.centerY=w,Q.innerRadius=I,Q.outerRadius=A,Q.startAngle=j,Q.endAngle=G,Q.stroke=void 0,Q.strokeWidth=0,Q});return L.append(V),L}),this.root.append(this.series),this.updateColors(n,i)}updateColors(e,t){this.series.forEach((n,i)=>{for(let r of n.children())r.fill=e[i%e.length],r.stroke=t[i%t.length]})}},vBe={chartType:"radialBar",miniChart:mBe},CBe=class extends j0{constructor(e,t,n,i){super(e,t,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;let{size:r,padding:o,root:s,data:a}=this,l=(r-o*2)/2,c=0,{paths:d,markers:u}=kX(t,s,a,r,l,c,this.markerSize);this.lines=d,this.markers=u,this.updateColors(n,i)}updateColors(e,t){this.lines.forEach((n,i)=>{let r=this.data[i].length;n.stroke=e[i];let o=i*r,s=o+r,a=this.markers.slice(o,s);for(let l of a)l.stroke=t[i],l.fill=e[i]})}},bBe={chartType:"radarLine",miniChart:CBe},wBe=class extends j0{constructor(e,t,n,i){super(e,t,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]];let{size:r,padding:o,root:s,data:a}=this;this.showRadiusAxisLine=!1;let l=(r-o*2)/2,c=l-r*.3;this.areas=kX(t,s,a,r,l,c).paths,this.updateColors(n,i)}updateColors(e,t){this.areas.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]})}},yBe={chartType:"radarArea",miniChart:wBe},SBe=class extends j0{constructor(e,t,n,i){super(e,t,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;let{size:r,padding:o,data:s,agChartsExports:{_Scene:a}}=this,l=(r-o*2)/2,c=new a.CategoryScale;c.domain=s[0].map((g,C)=>C),c.range=[-Math.PI,Math.PI],c.paddingInner=0,c.paddingOuter=0;let d=c.bandwidth*.7,{processedData:u,max:h}=PA(s),p=new a.LinearScale;p.domain=[0,h],p.range=[0,l];let f=r/2;this.series=u.map((g,C)=>{let m=C<0?void 0:u[C-1],w=new a.Group({zIndex:1e6}),x=g.map((D,F)=>{let L=m?.[F],V=p.convert(D),B=p.convert(L??0),P=c.convert(F),U=P+d,A=new a.Sector;return A.centerX=f,A.centerY=f,A.innerRadius=B,A.outerRadius=V,A.startAngle=P,A.endAngle=U,A.stroke=void 0,A.strokeWidth=0,A});return w.append(x),w}),this.root.append(this.series),this.updateColors(n,i)}updateColors(e,t){this.series.forEach((n,i)=>{for(let r of n.children())r.fill=e[i%e.length],r.stroke=t[i%t.length]})}},xBe={chartType:"nightingale",miniChart:SBe},EBe=class extends Ns{constructor(e,t,n,i){super(e,t,"rangeBarTooltip");let r=[3,3.5,3];this.bars=this.createRangeBar(this.root,r,this.size,this.padding,"vertical"),this.updateColors(n,i)}updateColors(e,t){this.bars.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]})}createRangeBar(e,t,n,i,r){let o=r==="horizontal",s=2*i,{_Scene:a}=this.agChartsExports,l=new a.CategoryScale;l.domain=t.map((f,g)=>g),l.range=[i,n-i],l.paddingInner=.3,l.paddingOuter=.3;let c=.7,d=1.3,u=new a.LinearScale;u.domain=[t.reduce((f,g)=>Math.min(f,g),1/0)*c,t.reduce((f,g)=>Math.max(f,g),0)*d],u.range=[s,n-s];let h=l.bandwidth,p=t.map((f,g)=>{let[C,m]=[f*c,f*d],w=l.convert(g),x=u.convert(C),D=u.convert(m)-x,F=new a.Rect;return F.x=o?x:w,F.y=o?w:x,F.width=o?D:h,F.height=o?h:D,F.strokeWidth=0,F.crisp=!0,F});return e.append(p),p}},DBe={chartType:"rangeBar",miniChart:EBe},_Be=class extends Ns{constructor(e,t,n,i){super(e,t,"rangeAreaTooltip");let r=4,o=[yL({offset:.375*r,length:r,pattern:{low:3,high:5,period:r}}),yL({offset:.375*r,length:r,pattern:{low:2.25,high:4.25,period:r}}),yL({offset:.75*r,length:r,pattern:{low:2.5,high:4.5,period:r}})],s=1.75,a=o.map(d=>d.map(([u,h])=>({x:u,low:h-.5*s,high:h+.5*s}))),{lines:l,areas:c}=this.createRangeArea(this.root,a,this.size,this.padding);this.lines=l,this.areas=c,this.updateColors(n,i)}updateColors(e,t){e=pY(e,1,2),t=pY(t,1,2),this.lines.forEach(([n,i],r)=>{n.fill=void 0,n.stroke=t[r],i.fill=void 0,i.stroke=t[r]}),this.areas.forEach((n,i)=>{n.fill=e[i]})}createRangeArea(e,t,n,i){let r=t.reduce((g,C)=>C.reduce((m,{x:w})=>Math.min(m,w),g),1/0),o=t.reduce((g,C)=>C.reduce((m,{x:w})=>Math.max(m,w),g),-1/0),s=t.reduce((g,C)=>C.reduce((m,{low:w})=>Math.min(m,w),g),1/0),a=t.reduce((g,C)=>C.reduce((m,{high:w})=>Math.max(m,w),g),-1/0),{_Scene:l}=this.agChartsExports,c=new l.LinearScale;c.domain=[r,o],c.range=[i,n-i];let d=2*i,u=new l.LinearScale;u.domain=[s,a],u.range=[n-d,d];let h=[],p=[];return t.map(g=>{let C=new l.Path,m=new l.Path,w=new l.Path;return h.push([C,m]),p.push(w),C.strokeWidth=0,m.strokeWidth=0,w.strokeWidth=0,w.fillOpacity=.8,C.path.clear(),m.path.clear(),w.path.clear(),g.map((x,D)=>{let{x:F,low:L,high:V}=x,B=c.convert(F),P=u.convert(L),U=u.convert(V),A=D>0?"lineTo":"moveTo";return C.path[A](B,U),m.path[A](B,P),w.path[A](B,U),[B,P]})}).forEach((g,C)=>{let m=g.length-1,w=p[C];for(let x=m;x>=0;x--){let[D,F]=g[x];w.path.lineTo(D,F)}}),e.append(p.concat(...h)),{lines:h,areas:p}}};function yL(e){let{offset:t,length:n,pattern:i}=e,r=a(t,n,i),o=0,s=n;return(r.length===0||r[0][0]!==o)&&r.unshift(l(o,t,i)),r[r.length-1][0]!==s&&r.push(l(s,t,i)),r;function a(d,u,h){let{period:p}=h,f=d/p,C=[0,.5].map(w=>w-f).map(hY).sort((w,x)=>w-x);return Array.from({length:Math.floor(C.length*(p/u))},(w,x)=>C[x%C.length]+Math.floor(x/C.length)).map(w=>w*p).map(w=>l(w,d,h))}function l(d,u,h){return[d,c(u+d,h)]}function c(d,u){let{low:h,high:p,period:f}=u,g=hY(d/f),C=g>.5?1-2*(g-.5):2*g;return h+(p-h)*C}}function hY(e){let t=e%1;return t<0?t+1:t}function pY(e,t,n){let i=[...e],r=i[t];return i[t]=i[n],i[n]=r,i}var ABe={chartType:"rangeArea",miniChart:_Be},RBe=class extends Ns{constructor(e,t,n,i,r){super(e,t,"boxPlotTooltip");let{size:o,padding:s,agChartsExports:{_Scene:a}}=this,l=[11,11.5,10.5],c=1.2,d=1.1,u=.9,h=.8,p=new a.LinearScale;p.domain=[l.reduce((m,w)=>Math.min(m,w),1/0)*h,l.reduce((m,w)=>Math.max(m,w),0)*c],p.range=[o-1.5*s,s];let f=new a.CategoryScale;f.domain=l.map((m,w)=>w),f.range=[s,o-s],f.paddingInner=.4,f.paddingOuter=.2;let g=Math.round(f.bandwidth),C=Math.round(f.bandwidth/2);this.boxPlotGroups=l.map((m,w)=>{let[x,D,F,L]=[m*h,m*u,m*d,m*c],V=Math.round(p.convert(F)),B=Math.round(f.convert(w)),P=Math.round(B+g),U=Math.round(p.convert(D)),A=Math.round(p.convert(x)),I=Math.round(p.convert(m)),j=Math.round(p.convert(L)),G=B+C,Q=new a.Group,le=new a.Rect,me=new a.Line,ge=new a.Line,se=new a.Line,de=new a.Line,he=new a.Line;return le.x=B,le.y=V,le.width=g,le.height=U-V,le.strokeWidth=1,le.strokeOpacity=.75,le.crisp=!0,this.setLineProperties(me,B,P,I,I),this.setLineProperties(ge,G,G,j,V),this.setLineProperties(se,G,G,A,U),this.setLineProperties(de,B,P,j,j),this.setLineProperties(he,B,P,A,A),Q.append([le,me,ge,se,de,he]),Q}),this.updateColors(n,i,r),this.root.append(this.boxPlotGroups)}updateColors(e,t,n){let{_Theme:i}=this.agChartsExports;this.boxPlotGroups.forEach((r,o)=>{for(let s of r.children()){let a=e[o%e.length];s.fill=n?a:i.resolveOperation({$mix:[a,{$ref:"backgroundColor"},.7]}),s.stroke=t[o%t.length]}})}setLineProperties(e,t,n,i,r){e.x1=t,e.x2=n,e.y1=i,e.y2=r,e.strokeOpacity=.75}},FBe={chartType:"boxPlot",miniChart:RBe},MBe=class extends Bg{constructor(e,t,n,i,r){super(e,t,"treemapTooltip");let{size:o,padding:s,agChartsExports:{_Scene:a}}=this,l=[[1,1],[3,2,1]],d=l.length%2===0?.3:.2,u=[s,o-s],h=l.length,p=h*(h+1)/2,f=d/(h-1),g=u[1]-u[0],C=g-d,m=u[0];this.rects=l.reduce((x,D,F)=>{x??(x=[]);let L=(h-F)/p,V=C*L,B=D.length,P=D.reduce((G,Q)=>G+Q,0),U=d/(B-1||1),A=B>1?g-d:g,I=u[0],j=D.map(G=>{let Q=new a.Rect,le=A*G/P;return Q.x=m,Q.y=I,Q.width=V,Q.height=le,Q.strokeWidth=.75,Q.crisp=!0,I+=le+U,Q});return m+=V+f,x.push(...j),x},[]),this.updateColors(n,i,r);let w=new a.Group;w.setClipRect(new a.BBox(s,s,o-s,o-s)),w.append(this.rects),this.root.append(w)}updateColors(e,t,n){let{_Theme:i}=this.agChartsExports;this.rects.forEach((r,o)=>{r.fill=e[o%t.length],r.stroke=n?t[o%t.length]:i.resolveOperation({$ref:"backgroundColor"})})}},IBe={chartType:"treemap",miniChart:MBe},TBe=class extends j0{constructor(e,t,n,i){super(e,t,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;let{data:r,size:o,padding:s,angleOffset:a,innerRadiusRatio:l,agChartsExports:{_Scene:c}}=this,d=(o-s*2)/2,u=[a+0,a+2*Math.PI],h=Math.abs(u[1]-u[0]),p=[d*l,d],f=Math.abs(p[1]-p[0]),g=0,C=(F,L)=>{for(let V of F){let B=L+1;g=Math.max(g,B),C(V,B)}};C(r,0);let m=f/g,w=this.size/2,x=u[0];this.series=[];let D=(F,L,V,B,P)=>{if(!Array.isArray(F))return;let A=L+1,I=V;F.forEach((j,G,Q)=>{let le=P;le||(le=new c.Group,this.series.push(le));let me=p[0]+L*m,ge=p[0]+A*m,se=1/Q.length,de=I,he=de+B*se,M=new c.Sector;M.centerX=w,M.centerY=w,M.innerRadius=me,M.outerRadius=ge,M.startAngle=de,M.endAngle=he,M.stroke=void 0,M.strokeWidth=0,M.inset=.75,I=he,le.append(M),D(j,A,de,Math.abs(he-de),le)})};D(r,0,x,h),this.root.append(this.series),this.updateColors(n,i)}updateColors(e,t){this.series.forEach((n,i)=>{for(let r of n.children())r.fill=e[i%e.length],r.stroke=t[i%t.length]})}},PBe={chartType:"sunburst",miniChart:TBe},kBe=class extends Bg{constructor(e,t,n,i,r){super(e,t,"heatmapTooltip");let{size:o,padding:s,agChartsExports:{_Scene:a}}=this,l=3,c=Array.from({length:l},(C,m)=>Array.from({length:l},(w,x)=>x)),d=c.map((C,m)=>m),u=new a.CategoryScale;u.domain=d,u.range=[s,o-s],u.paddingInner=.01,u.paddingOuter=.1;let h=new a.CategoryScale;h.domain=d,h.range=[s,o-s],h.paddingInner=.01,h.paddingOuter=.1;let p=u.bandwidth??0,f=h.bandwidth??0;this.rects=c.reduce((C,m,w)=>{C??(C=[]);let x=m.map((D,F)=>{let L=new a.Rect;return L.x=u.convert(w),L.y=h.convert(F),L.width=p,L.height=f,L.strokeWidth=0,L.crisp=!0,L});return C.push(...x),C},[]),this.updateColors(n,i,r);let g=new a.Group;g.setClipRect(new a.BBox(s,s,o-s,o-s)),g.append(this.rects),this.root.append(g)}updateColors(e,t,n){let{_Theme:i,_Util:r}=this.agChartsExports,o=n?[e[0],e[1]]:i.resolveOperation({$palette:"divergingColors"}),s=n?t[0]:i.resolveOperation({$ref:"backgroundColor"}),a=r.interpolateColor(o[0],o[1]);this.rects.forEach((l,c)=>{l.fill=a(c*.2),l.stroke=s})}},LBe={chartType:"heatmap",miniChart:kBe},OBe=class extends Ns{constructor(e,t,n,i,r){super(e,t,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(n,i,r)}updateColors(e,t,n){let{data:i,agChartsExports:{_Theme:r}}=this,o={fill:n?e[0]:r.resolveOperation({$palette:"altUp.fill"}),stroke:n?t[0]:r.resolveOperation({$palette:"altUp.stroke"})},s={fill:n?e[1]:r.resolveOperation({$palette:"altDown.fill"}),stroke:n?t[1]:r.resolveOperation({$palette:"altDown.stroke"})};this.bars.forEach((a,l)=>{let c=i[l]>=0;a.fill=c?o.fill:s.fill,a.stroke=c?o.stroke:s.stroke})}createWaterfall(e,t,n,i,r){let o=2*i,{processedData:s,min:a,max:l}=PA(t.map(x=>[x])),c=s.reduce((x,D)=>x.concat(D),[]),{_Scene:d}=this.agChartsExports,u=new d.LinearScale;u.domain=[Math.min(a,0),l],u.range=[n-o,o];let h=new d.CategoryScale;h.domain=t.map((x,D)=>D),h.range=[i,n-i],h.paddingInner=.2,h.paddingOuter=.3;let p=h.bandwidth,f=new d.Path;f.stroke="#575757",f.strokeWidth=0;let g=Math.floor(f.strokeWidth)%2/2,C=f.path;C.clear();let m=r==="horizontal",w=c.map((x,D)=>{let F=D>0?c[D-1]:0,V=t[D]>0,B=Math.round(u.convert(x)),P=Math.round(u.convert(F)),U=(V?B:P)-g,A=(V?P:B)+g,I=Math.abs(A-U),j=h.convert(D),G=new d.Rect;G.x=m?U:j,G.y=m?j:U,G.width=m?I:p,G.height=m?p:I,G.strokeWidth=0,G.crisp=!0;let Q=B+g,le=P+g;if(D>0){let se=m?le:G.x,de=m?G.y:le;C.lineTo(se,de)}let me=m?Q:G.x,ge=m?G.y:Q;return C.moveTo(me,ge),G});return e.append([f,...w]),{bars:w}}},NBe={chartType:"waterfall",miniChart:OBe},BBe=class extends Ns{constructor(e,t,n,i){super(e,t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];let{root:r,columnData:o,lineData:s,size:a,padding:l}=this;this.columns=n1({stacked:!1,root:r,data:o,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),r.append(this.columns),this.lines=f4(t,r,s,a,l),this.updateColors(n,i)}updateColors(e,t){this.columns.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]}),this.lines.forEach((n,i)=>{n.stroke=e[i+2]})}},VBe={chartType:"columnLineCombo",miniChart:BBe},GBe=class extends Ns{constructor(e,t,n,i){super(e,t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];let{root:r,columnData:o,areaData:s,size:a,padding:l,agChartsExports:{_Scene:c}}=this;this.columns=n1({stacked:!1,root:r,data:o,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5,agChartsExports:t});let d=new c.CategoryScale;d.range=[l,a-l],d.domain=[0,1,2,3,4],d.paddingInner=1,d.paddingOuter=0;let u=new c.LinearScale;u.range=[a-l,l],u.domain=[0,6];let h=[],p=u.convert(0),f=d.convert(0);s.forEach((m,w)=>{let x=h[w]||(h[w]=[]);m.forEach((F,L)=>{let V=F,B=L,P=d.convert(B),U=u.convert(V);x[L]={x:P,y:U}});let D=d.convert(m.length-1);h[w].push({x:D,y:p},{x:f,y:p})}),this.areas=h.map(m=>{let w=new c.Path;w.strokeWidth=0,w.fillOpacity=.8;let x=w.path;return m.forEach((D,F)=>x[F>0?"lineTo":"moveTo"](D.x,D.y)),w});let g=new c.Group;g.setClipRect(new c.BBox(l,l,a-l*2,a-l*2));let C=new c.Group;C.setClipRect(new c.BBox(l,l,a-l*2,a-l*2)),g.append(this.areas),C.append(this.columns),r.append(g),r.append(C),this.updateColors(n,i)}updateColors(e,t){this.areas.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]}),this.columns.forEach((n,i)=>{n.fill=e[i+1],n.stroke=t[i+1]})}},HBe={chartType:"areaColumnCombo",miniChart:GBe},zBe=class extends Bg{constructor(e,t,n,i){super(e,t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];let{root:r,columnData:o,lineData:s,size:a,padding:l,agChartsExports:{_Scene:c}}=this;this.columns=n1({stacked:!1,root:r,data:o,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),r.append(this.columns),this.lines=f4(this.agChartsExports,r,s,a,l);let d="grey",u=3,h=new c.Line;h.x1=l,h.y1=l,h.x2=l,h.y2=a-l+u,h.stroke=d;let p=new c.Line;p.x1=l-u+1,p.y1=a-l,p.x2=a-l+1,p.y2=a-l,p.stroke=d;let f=new c.Path;this.buildPenIconPath(f),f.fill="whitesmoke",f.stroke="darkslategrey",f.strokeWidth=1,r.append([p,h,f]),this.updateColors(n,i)}updateColors(e,t){this.columns.forEach((n,i)=>{n.fill=e[i],n.stroke=t[i]}),this.lines.forEach((n,i)=>{n.stroke=e[i+2]})}buildPenIconPath(e){let{path:t}=e;t.moveTo(25.76,43.46),t.lineTo(31.27,48.53),t.moveTo(49.86,22),t.lineTo(49.86,22),t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),t.lineTo(46.86,21.41),t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),t.lineTo(25.51,43.8),t.lineTo(25.43,43.89),t.lineTo(23.01,51.89),t.lineTo(22.83,52.46),t.lineTo(31.02,48.86),t.lineTo(49.02,28.52),t.lineTo(49.02,28.52),t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),t.lineTo(50.75,24.93),t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),t.closePath(),t.moveTo(41.76,25.5),t.lineTo(47.34,30.5),t.moveTo(40.74,26.65),t.lineTo(46.25,31.71)}},jBe={chartType:"customCombo",miniChart:zBe},fY={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:O8e},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:B8e},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:H8e}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:j8e},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:W8e},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:K8e}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:Z8e},donut:{range:!0,pivot:!0,enterprise:!1,icon:uY},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:uY}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:X8e},stackedLine:{range:!0,pivot:!0,enterprise:!1,icon:J8e},normalizedLine:{range:!0,pivot:!0,enterprise:!1,icon:nBe}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:rBe},bubble:{range:!0,pivot:!0,enterprise:!1,icon:sBe}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:aBe},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:lBe},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:uBe}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:bBe},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:yBe},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:xBe},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:gBe},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:vBe}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:FBe},histogram:{range:!0,pivot:!1,enterprise:!1,icon:pBe},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:DBe},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:ABe}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:IBe},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:PBe}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:LBe},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:NBe}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:VBe},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:HBe},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:jBe}},funnelGroup:{funnel:{range:!0,pivot:!1,enterprise:!0,icon:R8e},coneFunnel:{range:!0,pivot:!1,enterprise:!0,icon:I8e},pyramid:{range:!0,pivot:!1,enterprise:!0,icon:k8e}}},UBe={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line","stackedLine","normalizedLine"],areaGroup:["area","stackedArea","normalizedArea"],scatterGroup:["scatter","bubble"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],funnelGroup:["funnel","coneFunnel","pyramid"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},WBe=class extends pe{constructor(e,t,n,i,r=UBe){super('<div class="ag-chart-settings-mini-wrapper"></div>'),this.wrappers=new Map,this.chartController=e,this.fills=t,this.strokes=n,this.isCustomTheme=i,this.chartGroups=T({},r)}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(o=>o!=="customCombo"));let e=this.getGui(),t=this.chartController.isEnterprise(),n=this.chartController.isPivotChart(),i=!n,r=Object.keys(this.chartGroups).map(o=>{let s=o in fY?fY[o]:void 0;if(!s)return X(148,{group:o}),null;let l=(this.chartGroups[o]??[]).map(c=>{let d=c in s?s[c]:void 0;return d?!t&&d.enterprise?null:i&&d.range||n&&d.pivot?d:null:(X(149,{group:o,chartType:c}),null)}).filter(c=>c!=null);return l.length===0?null:{label:this.chartTranslation.translate(o),items:l}}).filter(o=>o!=null);for(let{label:o,items:s}of r){let a=this.createBean(new qu({title:o,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal",suppressKeyboardNavigation:!0}));for(let l of s){let{miniChart:c,chartType:d}=l.icon,u=document.createElement("div");u.classList.add("ag-chart-mini-thumbnail"),u.setAttribute("tabindex","0"),u.setAttribute("role","button");let h=d,p=()=>{this.chartController.setChartType(h),this.updateSelectedMiniChart()};this.addManagedListeners(u,{click:p,keydown:f=>{(f.key==$.ENTER||f.key===$.SPACE)&&(f.preventDefault(),p())}}),this.wrappers.set(h,u),this.createBean(new c(u,this.beans.agChartsExports,this.fills,this.strokes,this.isCustomTheme)),a.addItem(u)}e.appendChild(a.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){let e=this.chartController.getChartType();this.wrappers.forEach((t,n)=>{let i=n===e;t.classList.toggle("ag-selected",i);let r=this.chartTranslation.translate(a4(n)),o=i?`${r}. ${this.chartTranslation.translate("ariaChartSelected")}`:r;Ut(t,o)})}destroy(){this.wrappers.clear(),super.destroy()}},$Be=class extends pe{constructor(e){super(`<div class="ag-chart-settings-wrapper">
            <div data-ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div data-ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div data-ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div data-ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div data-ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`),this.chartController=e,this.eMiniChartsContainer=q,this.eNavBar=q,this.eCardSelector=q,this.ePrevBtn=q,this.eNextBtn=q,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes();let e=this.gos.get("enableRtl");this.ePrevBtn.insertAdjacentElement("afterbegin",$e(e?"chartsThemeNext":"chartsThemePrevious",this.beans)),this.eNextBtn.insertAdjacentElement("afterbegin",$e(e?"chartsThemePrevious":"chartsThemeNext",this.beans)),this.addManagedElementListeners(this.ePrevBtn,{click:()=>this.setActivePalette(this.getPrev(),"left")}),this.addManagedElementListeners(this.eNextBtn,{click:()=>this.setActivePalette(this.getNext(),"right")});let t=()=>this.resetPalettes(!0);this.addManagedListeners(this.chartController,{chartTypeChanged:t,chartApiUpdate:t}),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{let e=i=>!i.getGui().classList.contains("ag-hidden"),n=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(n){let i=n.offsetParent;i&&this.eMiniChartsContainer.scrollTo(0,i.offsetTop)}},250)}resetPalettes(e){let t=this.chartController.getPalettes(),n=this.gos.get("chartToolPanelsDef")?.settingsPanel?.chartGroupsDef;if(Hr(t,this.palettes)&&!e||this.isAnimating)return;this.palettes=t,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(r=>r===this.chartController.getChartThemeName()),this.cardItems=[],at(this.eCardSelector),this.destroyMiniCharts();let{themes:i}=this;this.palettes.forEach((r,o)=>{let s=this.activePaletteIndex===o,{fills:a=[],strokes:l=[]}=r,c=i[o],d=!l4(c,this.beans.agChartsExports._Theme),u=this.createBean(new WBe(this.chartController,a,l,d,n));this.miniChartsContainers.push(u),this.eMiniChartsContainer.appendChild(u.getGui()),this.addCardLink(o),s?u.updateSelectedMiniChart():u.setDisplayed(!1)}),Ie(this.eNavBar,this.palettes.length>1),f0(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){let t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedElementListeners(t,{click:()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;f0(this.cardItems[e],"ag-selected","ag-not-selected");let n=this.miniChartsContainers[this.activePaletteIndex],i=n.getGui(),r=this.miniChartsContainers[e],o=r.getGui();n.updateSelectedMiniChart(),r.updateSelectedMiniChart();let s=t==="left"?-1:1,a=o.style.left=`${Md(this.getGui())*s}px`;this.activePaletteIndex=e,this.isAnimating=!0;let l="ag-animating";r.setDisplayed(!0),n.addCss(l),r.addCss(l),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{i.style.left=`${-parseFloat(a)}px`,o.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,n.removeCss(l),r.removeCss(l),n.setDisplayed(!1)},300)}destroyMiniCharts(){at(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}},qBe="data",KBe="format",YBe=class extends pe{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){for(let e of this.panels){let t=e.replace("chart","").toLowerCase(),n=this.createPanel(t),i=this.createTab(e,t,n);this.tabs.push(i),this.addDestroyFunc(()=>this.destroyBean(n))}this.tabbedLayout=new VY({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!0,closeButtonAriaLabel:this.chartTranslation.translate("ariaChartMenuClose"),onCloseClicked:()=>{this.eventSource?.focus({preventScroll:!0}),this.dispatchLocalEvent({type:"closed"})}}),this.createBean(this.tabbedLayout)}createTab(e,t,n){let i=bt({tag:"div",cls:`ag-chart-tab ag-chart-${t}`});this.createBean(n),i.appendChild(n.getGui());let r=this.chartTranslation.translate(t);return{title:bt({tag:"div",children:r}),titleLabel:r,bodyPromise:tt.resolve(i),getScrollableContainer:()=>i.querySelector(".ag-scrollable-container")||i,name:e}}showTab(e){let t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout?.getGui()}showMenu(e,t){this.eventSource=e,t||this.tabbedLayout?.focusHeader(!0)}destroy(){this.parentComponent?.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){switch(e){case qBe:return new W6e(this.chartMenuContext);case KBe:return new C8e(this.chartMenuContext);default:return new $Be(this.chartMenuContext.chartController)}}},ZBe=class extends pe{constructor(e,t,n){super('<div class="ag-chart-menu-wrapper"></div>'),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=n,this.buttons={chartLink:{iconName:"linked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"chartsDownload",callback:()=>this.chartMenuSvc.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"chartsMenu",callback:i=>this.showMenuList(i)}},this.panels=[],this.menuVisible=!1,this.chartController=n.chartController}wireBeans(e){this.chartMenuSvc=e.chartMenuSvc,this.chartMenuListFactory=e.chartMenuListFactory}postConstruct(){this.chartToolbar=this.createManagedBean(new k6e),this.getGui().appendChild(this.chartToolbar.getGui()),this.refreshToolbarAndPanels(),this.addManagedEventListeners({chartCreated:e=>{e.chartId===this.chartController.getChartId()&&this.gos.get("chartToolPanelsDef")?.defaultToolPanel&&this.showMenu({panel:this.defaultPanel,suppressFocus:!0})}}),this.addManagedListeners(this.chartController,{chartLinkedChanged:this.refreshToolbarAndPanels.bind(this)}),this.refreshMenuClasses(),this.addManagedListeners(this.chartController,{chartApiUpdate:this.refreshToolbarAndPanels.bind(this)})}isVisible(){return this.menuVisible}getExtraPaddingDirections(){return["chartMenu","chartLink","chartUnlink","chartDownload"].some(e=>this.chartToolbarOptions.includes(e))?["top"]:[]}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){let{panels:e,defaultPanel:t}=this.chartMenuSvc.getChartToolPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=this.chartMenuSvc.getChartToolbarOptions()}updateToolbar(){let e=this.chartToolbarOptions.map(t=>{let{iconName:n,callback:i}=this.buttons[t];return{buttonName:t,iconName:n,callback:i}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){let t=this.menuPanel=this.createBean(new OY({height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return t.setParentComponent(this),this.eMenuPanelContainer.appendChild(t.getGui()),this.tabbedMenu=this.createBean(new YBe(this.panels,this.chartMenuContext)),this.addManagedListeners(this.tabbedMenu,{closed:()=>{this.hideMenu()}}),this.addManagedListeners(t,{destroyed:()=>this.destroyBean(this.tabbedMenu)}),new tt(n=>{window.setTimeout(()=>{t.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),n(t)},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}showMenu(e){let{panel:t,eventSource:n,suppressFocus:i}=e??{};if(this.menuPanel&&!t)this.showContainer(n,i);else{let r=t||this.defaultPanel,o=this.panels.indexOf(r);o<0&&(X(143,{panel:t}),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(n,i)):this.createMenuPanel(o).then(()=>this.showContainer(n,i))}}hideMenu(){this.menuVisible=!1,this.refreshMenuClasses()}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible)}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel?.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu?.isAlive()&&this.destroyBean(this.tabbedMenu)}},jX=["number","category","time","grouped-category"],XBe=["angle-category","angle-number","radius-category","radius-number"],QBe=[...jX,...XBe],JBe=class extends K{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,n)=>this.setCartesianAxisOptions(e,[{expression:t,value:n}]),setValues:t=>this.setCartesianAxisOptions(e,t),clearValue:(t,n)=>this.clearCartesianAxisOptions(e,t,n)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,n)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:n}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,n)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:n}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,n)=>this.getSeriesOption(e(),t,n),setValue:(t,n)=>this.setSeriesOptions(e(),[{expression:t,value:n}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,n,i){let r=this.getRetainedChartThemeOverrideKeys(n,i),o=this.getRetainedChartAxisThemeOverrideKeys(null,n,i),s=this.createChartOptions();for(let a of r){let l=this.retrieveChartOptionsThemeOverride(e,n,a);l!==void 0&&this.assignChartOptionsThemeOverride(s,i,a,l)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:o,existingChartOptions:e,targetChartOptions:s,existingChartType:n,targetChartType:i}),s.theme.overrides}assignPersistedAxisOverrides(e){let{existingAxes:t,retainedChartAxisThemeOverrideKeys:n,existingChartOptions:i,targetChartOptions:r,existingChartType:o,targetChartType:s}=e;for(let{expression:a,targetAxisTypes:l}of n)for(let c of t.map(d=>d.type)){let d=this.retrieveChartOptionsThemeOverride(i,o,["axes",c,a].join("."));if(d!==void 0)for(let u of l)this.assignChartOptionsThemeOverride(r,s,["axes",u,a].join("."),d)}}getRetainedChartThemeOverrideKeys(e,t){let n=["animation"],i=["zoom","navigator"],r=((o,s)=>{let a=new Array;return Cp(Ei(o))&&Cp(Ei(s))&&a.push(...i),a})(e,t);return[...n,...r]}getRetainedChartAxisThemeOverrideKeys(e,t,n){return Cp(Ei(t))&&Cp(Ei(n))?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(r=>({expression:r,targetAxisTypes:jX})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){let t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],n=["crosshair"],i=new Array;for(let r of n)for(let o of t)i.push(`${r}${o}`);return i}getChartOption(e){return mp(this.getChart(),e,void 0)}setChartThemeOverrides(e){let t=this.getChartType(),n=this.createChartOptions();for(let{expression:i,value:r}of e)this.assignChartOptionsThemeOverride(n,t,i,r);this.applyChartOptions(n)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(n=>mt(108,{e:n}))}getAxisProperty(e){return mp(this.getChart().axes?.x,e,void 0)}setAxisThemeOverrides(e){let t=this.getChart(),n=this.getChartType(),i=this.createChartOptions();for(let{expression:r,value:o}of e){let s=Object.values(t.axes??{}).filter(a=>{let l=r.split("."),c=a;for(let d of l){if(!(d in c))return!1;c=c[d]}return!0});if(s)for(let a of s)this.isValidAxisType(a)&&this.assignChartAxisThemeOverride(i,n,a.type,null,r,o)}this.applyChartOptions(i)}getCartesianAxisProperty(e,t){let n=this.getChartAxes(),i=this.getCartesianAxis(n,e);return mp(i,t,void 0)}getCartesianAxisThemeOverride(e,t){let n=this.getChartAxes(),i=this.getCartesianAxis(n,e);if(!i||!this.isValidAxisType(i))return;let r=this.getChartType(),o=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(o,r,i.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){let n=this.getChartAxes(),i=this.getCartesianAxis(n,e);if(!i||!this.isValidAxisType(i))return;let r=this.getChartType(),o=this.createChartOptions();for(let{expression:s,value:a}of t)this.assignChartAxisThemeOverride(o,r,i.type,e==="yAxis"?["left","right"]:["bottom","top"],s,a);this.applyChartOptions(o)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,n=>{let i=e==="yAxis"?"y":"x";for(let{expression:r,value:o}of t)this.assignChartOption(n,`axes.${i}.${r}`,o)})}clearCartesianAxisOptions(e,t,n){this.updateCartesianAxisOptions(e,i=>{let r=e==="yAxis"?"y":"x";this.clearChartOption(i,`axes.${r}.${t}`,n)})}updateCartesianAxisOptions(e,t){let n=this.getChart().getOptions(),i="axes"in n?n.axes:void 0;if(!n||!i)return;let r=this.getChartAxes(),o=this.getCartesianAxis(r,e);if(!o)return;let s=this.createChartOptions();s.axes=i,t(s,o,n),this.applyChartOptions(s)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,(n,i,r)=>{let o=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[i],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,o,o),existingChartOptions:r,targetChartOptions:n,existingChartType:o,targetChartType:o}),this.assignChartOption(n,"axes.x.type",t),this.chartController.setCategoryAxisType(t)})}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,n){let i=this.getChart().series.find(r=>e7e(e,r));return mp(n?i:i?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let n=this.createChartOptions();for(let{expression:i,value:r}of t)this.assignChartOptionsSeriesThemeOverride(n,e,`series.${i}`,r);this.applyChartOptions(n)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){let e=this.getChart();return Object.values(e.axes??{})}retrieveChartAxisThemeOverride(e,t,n,i,r){if(i)for(let o of i){let s=this.retrieveChartOptionsThemeOverride(e,t,["axes",n,o,...r?[r]:[]].join("."));if(s!==void 0)return s}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",n,...r?[r]:[]].join("."))}assignChartAxisThemeOverride(e,t,n,i,r,o){if(i)for(let s of i)this.assignChartOptionsThemeOverride(e,t,["axes",n,s,...r?[r]:[]].join("."),o);else this.assignChartOptionsThemeOverride(e,t,["axes",n,...r?[r]:[]].join("."),o)}isValidAxisType(e){return QBe.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){let t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),t.updateDelta(e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,n){let i=this.getChartThemeOverridesSeriesTypeKeys(t);for(let r of i){let o=this.retrieveChartOptionsSeriesThemeOverride(e,r,n);if(o!==void 0)return o}}assignChartOptionsThemeOverride(e,t,n,i){let r=this.getChartThemeOverridesSeriesTypeKeys(t);for(let o of r)this.assignChartOptionsSeriesThemeOverride(e,o,n,i)}retrieveChartOptionsSeriesThemeOverride(e,t,n){return this.retrieveChartOption(e,["theme","overrides",t,...n?[n]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,n,i){this.assignChartOption(e,["theme","overrides",t,...n?[n]:[]].join("."),i)}getChartThemeOverridesSeriesTypeKeys(e){let t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return mp(e,t,void 0)}assignChartOption(e,t,n){aNe(e,t,n)}clearChartOption(e,t,n){let i=mp(e,t,void 0);i&&delete i[n]}raiseChartOptionsChangedEvent(){let e=this.chartController.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions})}};function e7e(e,t){return uNe(e)&&t.type===e}var t7e=class extends pe{constructor(e){super(`
            <div style="height: 100%; width: 100%;">
                <div class="ag-chart" data-ref="eWrapper">
                    <div data-ref="eChartContainer" class="ag-chart-components-wrapper ag-chart-menu-hidden">
                        <div data-ref="eChart" class="ag-chart-canvas-wrapper"></div>
                        <div data-ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
                    </div>
                    <div data-ref="eMenuContainer" class="ag-chart-docked-container"></div>
                </div>
            </div>
            `),this.eChart=q,this.eWrapper=q,this.eChartContainer=q,this.eMenuContainer=q,this.eEmpty=q,this.params=e}wireBeans(e){this.crossFilterService=e.chartCrossFilterSvc,this.chartTranslation=e.chartTranslation,this.chartMenuSvc=e.chartMenuSvc,this.focusSvc=e.focusSvc,this.popupSvc=e.popupSvc,this.enterpriseChartProxyFactory=e.enterpriseChartProxyFactory,this.environment=e.environment}postConstruct(){let e=ce(T({},this.params),{chartType:Zy(this.params.chartType),chartThemeName:this.getThemeName()}),t=this.gos.get("enableRtl");this.eWrapper.classList.add(t?"ag-rtl":"ag-ltr");let n=this.createBean(new UNe(e));this.chartController=this.createManagedBean(new D6e(n)),this.chartOptionsService=this.createManagedBean(new JBe(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog?this.addDialog():(this.addManagedEventListeners({stylesChanged:this.updateTheme.bind(this)}),this.updateTheme()),this.addMenu(),this.addManagedElementListeners(this.getGui(),{focusin:this.setActiveChartCellRange.bind(this)}),this.addManagedListeners(this.chartController,{chartModelUpdate:this.update.bind(this)}),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}updateTheme(){this.environment.applyThemeClasses(this.getGui())}createChart(){let e;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));let t=(r,o)=>{let s=this.params.crossFilteringContext;s.lastSelectedChartId=o?"":this.chartController.getChartId(),o&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(r,o)},n=this.chartController.getChartType(),i={agChartsExports:this.beans.agChartsExports,chartType:n,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),styleNonce:this.gos.get("styleNonce"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>this.chartMenu?.getExtraPaddingDirections()??[],apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering??!1,crossFilterCallback:t,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:r=>this.chartTranslation.translate(r),context:Oe(this.gos,{})};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartProxy=this.createChartProxy(i),!this.chartProxy){X(138,{chartType:i.chartType});return}this.chartController.setChartProxy(this.chartProxy),this.createMenuContext()}createMenuContext(){if(this.chartMenuContext)return;let e=this.createManagedBean(new Ng(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new Ng(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}createChartProxy(e){let{chartType:t}=e;switch(t){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new R6e(e);case"pie":case"donut":case"doughnut":return new P6e(e);case"area":case"stackedArea":case"normalizedArea":return new _6e(e);case"line":case"stackedLine":case"normalizedLine":return new F6e(e);case"scatter":case"bubble":return new M6e(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new I6e(e)}let n=this.enterpriseChartProxyFactory?.createChartProxy(e);if(!n)throw Bo(251,{chartType:t});return n}addDialog(){let e=this.chartTranslation.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:n}=this.getBestDialogSize(),i=this.params.focusDialogOnOpen?()=>setTimeout(()=>qn(this.getGui())):void 0;this.chartDialog=new EA({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:n,component:this,centered:!0,closable:!0,afterGuiAttached:i,postProcessPopupParams:{type:"chart"}}),this.createBean(this.chartDialog),this.chartDialog.addEventListener("destroyed",()=>{this.destroy(),this.chartMenuSvc.hideAdvancedSettings();let r=this.focusSvc.getFocusedCell();setTimeout(()=>{this.focusSvc.isAlive()&&(r?this.focusSvc.setFocusedCell(ce(T({},r),{forceBrowserFocus:!0})):m5(this.beans))})})}getBestDialogSize(){let e=this.popupSvc.getPopupParent(),t=Md(e)*.75,n=g0(e)*.75,i=.553,r=this.chartProxy.getChart(),o=this.params.insideDialog?850:r.width,s=this.params.insideDialog?470:r.height;return(o>t||s>n)&&(o=Math.min(o,t),s=Math.round(o*i),s>n&&(s=n,o=Math.min(o,Math.round(s/i)))),{width:o,height:s}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new ZBe(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}update(e){if(e?.chartId&&!this.chartController.update(e))return;let t=this.chartTypeChanged(e),n=t||this.chartEmpty?(r=>{let o=this.chartType,s=r,a=this.chartProxy.getChart(),l=a?.getOptions(),c=Object.values(a?.axes??{});return this.chartOptionsService.getPersistedChartThemeOverrides(l,c,o,s??o)})(t):void 0;t&&this.createChart(),n&&e?.chartThemeOverrides&&ji(n,e.chartThemeOverrides);let i=n??e?.chartThemeOverrides;this.updateChart(i),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){let{chartProxy:t}=this,n=this.chartController.getSelectedValueColState(),i=this.chartController.getChartData(),r=this.handleEmptyChart(i,n.length);if(this.chartEmpty=r,r){e&&this.chartController.updateThemeOverrides(e);return}let o=this.chartController.getChartUpdateParams(e);t.update(o),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()})}chartTypeChanged(e){let[t,n]=[this.chartController.getChartType(),e?.chartType],i=n?Zy(n):void 0;return this.chartType!==t?i??t:i&&t!==i?i:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){let n=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),i=this.chartController.getChartType(),r=1;this.chartController.isActiveXYChart()?r=i==="bubble"?3:2:Pg(Ei(i))&&(r=0);let o=t<r||e.length===0;if(this.eChart){let s=n||o;Ie(this.eChart,!s),Ie(this.eEmpty,s)}return n?(this.eEmpty.textContent=this.chartTranslation.translate("pivotChartRequiresPivotMode"),!0):o?(this.eEmpty.textContent=this.chartTranslation.translate("noDataToChart"),!0):!1}downloadChart(e,t,n){this.chartProxy.downloadChart(e,t,n)}openChartToolPanel(e){let t=e&&cA[e];this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setMaximized(e){this.chartDialog?.setMaximized(e)}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||this.chartController.setChartRange(!0)}getThemeName(){let e=this.gos.get("chartThemes")||EX;if(e.length===0)throw new Error(Bo(254));let{chartThemeName:t}=this.params;return e.includes(t)?t:e[0]}getAllKeysInObjects(e){let t={};for(let n of e.filter(i=>i!=null))for(let i of Object.keys(n))t[i]=null;return Object.keys(t)}validateCustomThemes(){let e=this.getChartThemes(),t=this.gos.get("customChartThemes");if(t)for(let n of this.getAllKeysInObjects([t]))e.includes(n)||X(139,{customThemeName:n})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);let e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,n=this.gos.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:n})}raiseChartCreatedEvent(){this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventSvc.dispatchEvent({type:"chartCreated",chartId:this.chartController.getChartId()})})}raiseChartDestroyedEvent(){this.eventSvc.dispatchEvent({type:"chartDestroyed",chartId:this.chartController.getChartId()})}destroy(){super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.chartDialog?.isAlive()&&this.destroyBean(this.chartDialog),this.onDestroyColorSchemeChangeListener?.();let e=this.getGui();at(e),Bt(e),this.raiseChartDestroyedEvent()}},Xy=!1;function n7e(e){let t=e.version;return e.version==null&&(e.version=C7e(e)),e=zo("23.0.0",e,i7e),e=zo("24.0.0",e,r7e),e=zo("25.1.0",e,o7e),e=zo("26.0.0",e,s7e),e=zo("26.1.0",e,a7e),e=zo("26.2.0",e,l7e),e=zo("28.0.0",e,c7e),e=zo("28.2.0",e,d7e),e=zo("29.0.0",e,u7e),e=zo("29.1.0",e,UX),e=zo("29.2.0",e,WX),e=zo("30.0.0",e,h7e),e=zo("31.0.0",e,p7e),e=zo("32.0.0",e,f7e),e=zo("33.0.0",e,g7e),e=zo("34.0.0",e,m7e),e=v7e(e),e=zo(Lt,e,n=>n),Xy&&t!==e.version&&console.log("AG Grid: ChartModel migration complete",{model:e}),e}function i7e(e){return e=Uo("chartOptions.legend.item.marker.type","shape",e),e=Uo("chartOptions.seriesDefaults.marker.type","shape",e),e=Uo("chartOptions.legend.padding","spacing",e),e}function r7e(e){e=xi("chartOptions.seriesDefaults.marker.minSize",e);let d=e,{chartType:t,chartPalette:n,chartOptions:u}=d,h=u,{xAxis:i,yAxis:r}=h,o=so(h,["xAxis","yAxis"]),s=so(d,["chartType","chartPalette","chartOptions"]),l=bNe(t)?.map((p,f)=>T({type:p},f===0?i:r));return T({chartType:t,chartThemeName:{borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[n]??"ag-default",chartOptions:ce(T({},o),{axes:l,xAxis:i,yAxis:r})},s)}function o7e(e){return e=Uo("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",e),e}function s7e(e){return e=ju("chartOptions.seriesDefaults.highlightStyle",e,r=>{var o=r,{dimOpacity:n}=o,i=so(o,["dimOpacity"]);return T(T({},i),n!=null?{series:{dimOpacity:n}}:{})}),e=xi("chart",e),e=xi("chartOptions.seriesDefaults.tooltipClass",e),e=xi("chartOptions.seriesDefaults.tooltipTracking",e),e=mY("chartOptions.axes[].label.rotation",0,e),e=mY("chartOptions.axes[].label.rotation",335,e),e}function a7e(e){let t=o=>{var s=o,{item:n,series:i}=s,r=so(s,["item","series"]);return T({item:T(T({},r),n)},i?{series:i}:{})};return e=ju("chartOptions.seriesDefaults.highlightStyle",e,t),e=ju("chartOptions.series[].highlightStyle",e,t),e}function l7e(e){e=dA("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",e),e=dA("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",e),e=dA("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",e),e=xi("chartOptions.seriesDefaults.fill",e),e=xi("chartOptions.seriesDefaults.stroke",e),e=xi("chartOptions.seriesDefaults.callout.colors",e),e=xi("chartOptions.xAxis",e),e=xi("chartOptions.yAxis",e);let h=e,{chartType:t,chartOptions:p}=h,f=p,{axes:n,series:i,seriesDefaults:r}=f,o=so(f,["axes","series","seriesDefaults"]),s=so(h,["chartType","chartOptions"]),a=Zy(t),l=Ei(a),c=[l],d={};if(!hX(l)){let g={top:{},bottom:{},left:{},right:{}},C=n.map(x=>{var D=x,{type:m}=D,w=so(D,["type"]);return{[m]:T(T({},g),w)}}).reduce(CY,{});for(let m of fX.filter(w=>C[w]==null))C[m]=T({},g);d.axes=C}let u=c.map(g=>({[g]:T(ce(T({},d),{series:r}),o)})).reduce(CY,{});return e=ce(T({},s),{chartType:a,chartOptions:u}),e}function c7e(e){return e=xi("chartOptions.*.title.padding",e),e=xi("chartOptions.*.subtitle.padding",e),e=xi("chartOptions.*.axes.*.title.padding",e),e=C4("chartOptions.*.axes.*.title.enabled",!1,e),e}function d7e(e){return e=Uo("chartOptions.pie.series.callout","calloutLine",e),e=Uo("chartOptions.pie.series.label","calloutLabel",e),e=Uo("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=Uo("chartOptions.pie.series.labelName","sectorLabelName",e),e=Uo("chartOptions.donut.series.callout","calloutLine",e),e=Uo("chartOptions.donut.series.label","calloutLabel",e),e=Uo("chartOptions.donut.series.labelKey","sectorLabelKey",e),e=Uo("chartOptions.donut.series.labelName","sectorLabelName",e),e}function u7e(e){return e=Hy("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",e),e=Hy("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",e),e=Hy("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",e),e=Hy("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",e),e=Hy("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",e),e=dA("chartOptions.scatter.series.paired","chartOptions.scatter.paired",e),e}function UX(e){return e=xi("chartOptions.axes[].tick.count",e),e}function WX(e){return e=ju("chartOptions.*.tooltip",e,r=>{var o=r,{tracking:n}=o,i=so(o,["tracking"]);let s=T({},i);return n===!1?(s.position??(s.position={type:"pointer"}),s.range??(s.range="nearest")):n===!0&&(s.position??(s.position={type:"node"}),s.range??(s.range="nearest")),s}),e}function h7e(e){return e=Uo("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=Uo("chartOptions.pie.series.labelName","sectorLabelName",e),e=UX(e),e=WX(e),e=xi("chartOptions.*.series.flipXY",e),e=$X("chartOptions.common.legend.enabled",!0,e),e=C4("chartOptions.common.legend.position","right",e),e}function p7e(e){let t={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},n=Uo("chartOptions.column","bar",e),i=t[n.chartThemeName]||n.chartThemeName;return ce(T({},n),{chartThemeName:i})}function f7e(e){return e=Hl("chartOptions.*.autoSize",!0,e,(t,n)=>{t[n]===!0||t[n]===!1&&(t.minHeight=600,t.minWidth=300),delete t[n]}),e}function g7e(e){return e=xi("chartOptions.*.axes.category.label.format",e),e=xi("chartOptions.*.axes.category.crosshair.label.format",e),e=xi("chartOptions.*.axes.angle-category.label.format",e),e=xi("chartOptions.*.axes.radius-category.label.format",e),e=Uo("chartOptions.*.axes.*.label.padding","spacing",e),e=Uo("chartOptions.*.navigator.miniChart.label.padding","spacing",e),e=xi("chartOptions.*.axes.*.crossLines.label.className",e),e=Hl("chartOptions.*.axes.*.crossLines.label.position",!0,e,(t,n)=>{typeof t[n]=="string"&&(t[n]=t[n].replace(/([A-Z])/,"-$1").toLowerCase())}),e=xi("chartOptions.bullet",e),e=vY("chartOptions.bar.series.label.placement",e,{inside:"inside-center",outside:"inside-end"}),e=vY("chartOptions.waterfall.series.item.*.label.placement",e,{inside:"inside-center",start:"outside-start",end:"outside-end"}),e=xi("chartOptions.*.navigator.min",e),e=xi("chartOptions.*.navigator.max",e),e=xi("chartOptions.*.zoom.ratioX",e),e=xi("chartOptions.*.zoom.ratioY",e),e=xi("chartOptions.*.zoom.rangeX",e),e=xi("chartOptions.*.zoom.rangeY",e),e}function m7e(e){return Hl("chartOptions.series[].highlightStyle",!0,e,(n,i)=>{let r=n[i];if(r==null)return;let o={};if(r.item&&(o.highlightedItem=r.item),r.series){let s=r.series,{dimOpacity:a}=s,l=so(s,["dimOpacity"]);a!=null&&(o.unhighlightedSeries={opacity:a}),Object.keys(l).length>0&&(o.highlightedSeries=l)}delete n[i],n.highlight=o}),e}function v7e(e){return e=xi("chartOptions.*.width",e),e=xi("chartOptions.*.height",e),e=C4("chartOptions.*.axes.category.label.autoRotate",!0,e),e}function C7e(e){let t=e;if(e.version!=null)return e.version;let n=(c,...d)=>Object.keys(c||{}).some(u=>d.includes(u)),i=t.chartOptions,r=n(i,"seriesDefaults")?i?.seriesDefaults:i?.[Object.keys(i)[0]],o={"27.0.0":n(t,"seriesChartTypes"),"26.2.0":!n(i,"seriesDefaults"),"26.1.0":n(r?.highlightStyle,"item"),"26.0.0":n(r?.highlightStyle,"series"),"25.1.0":n(r?.label,"minAngle"),"25.0.0":n(t,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(r,"lineDash","lineDashOffset"),"24.0.0":n(t,"chartThemeName","chart")||n(i,"series"),"23.2.0":n(i,"navigator"),"23.0.0":n(i?.legend?.item?.marker,"shape"),"22.1.0":n(t,"chartPalette","chartType")},s="27.1.0",a=Object.entries(o).filter(([c,d])=>d);Xy&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:a});let[l=s]=a[0];return Xy&&console.log("AG Grid: ChartModel migration",{heuristicVersion:l}),l}function zo(e,t,n){if(gY(e)>gY(t.version)){Xy&&console.log("AG Grid: ChartModel migration",{migratingTo:e});let i=n(t);return i.version=e,Xy&&console.log("AG Grid: ChartModel migration",{migratedTo:e,result:i}),i}return t}function b7e(e){let t=e.includes("-beta")?e.replace(/-beta.*/,""):e,n=typeof t=="string"?t.split(".").map(i=>Number(i)):[];if(n.length!==3||n.some(i=>isNaN(i)))throw new Error(Bo(253,{version:t}));return{major:n[0],minor:n[1],patch:n[2]}}function gY(e){let{major:t,minor:n,patch:i}=b7e(e);return t*1e4+n*100+i}function mY(e,t,n){return Hl(e,!0,n,(i,r)=>{i[r]===t&&delete i[r]})}function C4(e,t,n){return Hl(e,!1,n,(i,r)=>{i[r]==null&&(i[r]=t)})}function $X(e,t,n){typeof e=="string"&&(e=e.split("."));let i=e[0];return e.length>1&&(n[i]=$X(e.slice(1),t,n[i]??{})),Object.keys(n).includes(i)||(n[i]=t),n}function dA(e,t,n){let i,r=!1;return n=Hl(e,!0,n,(o,s)=>{r=!0,i=o[s],delete o[s]}),r?Hl(t,!1,n,(o,s)=>{o[s]=i}):n}function Hy(e,t,n){let i,r=!1;return n=Hl(e,!0,n,(o,s)=>{r=!0,i=o[s],delete o[s]}),r?Hl(t,!1,n,(o,s)=>{o[s]===void 0&&(o[s]=i)}):n}function Uo(e,t,n){return Hl(e,!0,n,(i,r)=>{i[t]=i[r],delete i[r]})}function xi(e,t){return Hl(e,!0,t,(n,i)=>delete n[i])}function Hl(e,t,n,i){let r=e instanceof Array?e:e.split("."),o=r.slice(0,r.length-1),s=r[r.length-1];return ju(o,n,a=>{let l=Object.keys(a).includes(s);if(t&&!l)return a;let c=T({},a);return i(c,s),c})}function ju(e,t,n){let i=e instanceof Array?e:e.split(".");if(t=T({},t),i.length===0)return n(t);if(i[0].startsWith("{")){let r=i[0].substring(1,i[0].lastIndexOf("}")).split(",");for(let o of r)t[o]!=null&&(t[o]=ju(i.slice(1),t[o],n))}else if(i[0].endsWith("[]")){let r=i[0].substring(0,e[0].indexOf("["));t[r]instanceof Array&&(t[r]=t[r].map(o=>ju(i.slice(1),o,n)))}else if(i[0]==="*")for(let r of Object.keys(t))t[r]=ju(i.slice(1),t[r],n);else t[i[0]]!=null&&(t[i[0]]=ju(i.slice(1),t[i[0]],n));return t}function vY(e,t,n){return Hl(e,!0,t,(i,r)=>{typeof i[r]=="string"&&(i[r]=n[r]??r)})}var CY=(e,t)=>T(T({},e),t),w7e=class extends K{constructor(){super(...arguments),this.beanName="chartSvc",this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>this.agChartsExports.isEnterprise}wireBeans(e){this.visibleCols=e.visibleCols,this.rangeSvc=e.rangeSvc,this.agChartsExports=e.agChartsExports}updateChart(e){if(this.activeChartComps.size===0){X(124);return}let t=[...this.activeChartComps].find(n=>n.getChartId()===e.chartId);if(!t){X(125,{chartId:e.chartId});return}t.update(e)}getChartModels(){let e=[],t=n=>ce(T({},n),{version:Lt});for(let n of this.activeChartComps)e.push(t(n.getChartModel()));return e}getChartRef(e){let t;for(let n of this.activeCharts)n.chartId===e&&(t=n);return t}getChartComp(e){let t;for(let n of this.activeChartComps)n.getChartId()===e&&(t=n);return t}getChartImageDataURL(e){let t;for(let n of this.activeChartComps)n.getChartId()===e.chartId&&(t=n.getChartImageDataURL(e.fileFormat));return t}downloadChart(e){Array.from(this.activeChartComps).find(n=>n.getChartId()===e.chartId)?.downloadChart(e.dimensions,e.fileName,e.fileFormat)}openChartToolPanel(e){Array.from(this.activeChartComps).find(n=>n.getChartId()===e.chartId)?.openChartToolPanel(e.panel)}closeChartToolPanel(e){Array.from(this.activeChartComps).find(n=>n.getChartId()===e)?.closeChartToolPanel()}createChartFromCurrentRange(e="groupedColumn",t){let n=this.getSelectedRange();return this.createChart({cellRange:n,chartType:e,focusDialogOnOpen:!t})}restoreChart(e,t){if(!e){X(126);return}e.version!==Lt&&(e=n7e(e));let n,i,r,o;if(e.modelType==="pivot"?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),n=this.createCellRange(void 0,!0),i=!0,r=!0):(n=this.createCellRange(e.cellRange),o=e.chartPalette,r=e.suppressChartRanges),!!n)return this.createChart(ce(T({},e),{cellRange:n,pivotChart:i,suppressChartRanges:r,chartContainer:t,chartOptionsToRestore:e.chartOptions,chartPaletteToRestore:o}))}createRangeChart(e,t){let n=this.createCellRange(e.cellRange);if(n)return this.createChart(ce(T({},e),{cellRange:n,focusDialogOnOpen:!t}))}createPivotChart(e,t){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});let n=this.createCellRange(void 0,!0);if(n)return this.createChart(ce(T({},e),{cellRange:n,pivotChart:!0,suppressChartRanges:!0,focusDialogOnOpen:!t}))}createCrossFilterChart(e,t){let n=this.createCellRange(e.cellRange);if(!n)return;let r=typeof e.suppressChartRanges<"u"&&e.suppressChartRanges!==null?e.suppressChartRanges:!0;return this.createChart(ce(T({},e),{cellRange:n,suppressChartRanges:r,crossFiltering:!0,crossFilteringSort:e.sort,focusDialogOnOpen:!t}))}createChart(e){let t=y6e(e,this.agChartsExports.isEnterprise);if(!t)return;e=t===!0?e:t;let{chartType:n,chartContainer:i}=e,r=this.gos.getCallback("createChartContainer"),o=ce(T({},e),{chartId:this.generateId(),chartType:Zy(n),insideDialog:!(i||r),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>{for(let l of this.activeChartComps)l.crossFilteringReset()}}),s=new t7e(o);this.createBean(s);let a=this.createChartRef(s);return i?i.appendChild(a.chartElement):r?r(a):s.addEventListener("destroyed",()=>{this.activeChartComps.delete(s),this.activeCharts.delete(a)}),a}createChartRef(e){let t={destroyChart:()=>{this.activeCharts.has(t)&&(this.destroyBean(e),this.activeChartComps.delete(e),this.activeCharts.delete(t))},focusChart:()=>{qn(e.getGui())},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId,setMaximized:e.setMaximized.bind(e)};return this.activeCharts.add(t),this.activeChartComps.add(e),t}getSelectedRange(){let e=this.rangeSvc?.getCellRanges();if(!e||e.length===0)return{columns:[]};let t=new Set,n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let{startRow:o,endRow:s,columns:a}of e){if(!(o&&s))continue;for(let h of a)t.add(h);let{rowIndex:l,rowPinned:c}=o,{rowIndex:d,rowPinned:u}=s;if(c==="top"){if(u==="top")continue;l=0}if(u==="bottom"){if(c==="bottom")continue;d=this.beans.pageBounds.getLastRow()}l!==void 0&&(n=Math.min(n,l)),d!==void 0&&(i=Math.max(i,d))}if(n===Number.MAX_VALUE||i===-Number.MAX_VALUE)return{columns:[]};let r=Array.from(t);return{columns:r,startColumn:r[0],startRow:{rowIndex:n,rowPinned:void 0},endRow:{rowIndex:i,rowPinned:void 0}}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}createCellRange(e,t){let n=t?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.visibleCols.allCols.map(r=>r.getColId())}:e,i=n&&this.rangeSvc?.createPartialCellRangeFromRangeParams(n,!0);return i||X(127,{allRange:t}),i}destroy(){for(let e of this.activeCharts)e.destroyChart();super.destroy()}};function y7e(e){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.getChartModels())}function S7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.getChartRef(t))}function x7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.getChartImageDataURL(t))}function E7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.downloadChart(t))}function D7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.openChartToolPanel(t))}function _7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.closeChartToolPanel(t.chartId))}function A7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.createRangeChart(t,!0))}function R7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.createPivotChart(t,!0))}function F7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.createCrossFilterChart(t,!0))}function M7e(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.updateChart(t))}function I7e(e,t,n){return e.frameworkOverrides.wrapIncoming(()=>e.chartSvc?.restoreChart(t,n))}var T7e=`.ag-chart{display:flex;height:100%;position:relative;width:100%}.ag-chart-components-wrapper{display:flex}.ag-chart-canvas-wrapper,.ag-chart-components-wrapper{flex:1 1 auto;position:relative}.ag-chart-menu{background:var(--ag-background-color);background-color:color-mix(in srgb,transparent,var(--ag-background-color) 30%);border-radius:var(--ag-border-radius);display:flex;flex-direction:row;gap:20px;padding:4px 2px;position:absolute;top:8px;width:auto;--ag-icon-size:20px}:where(.ag-ltr) .ag-chart-menu{justify-content:right;right:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}:where(.ag-rtl) .ag-chart-menu{justify-content:left;left:calc(var(--ag-cell-horizontal-padding) + var(--ag-spacing) - 4px)}.ag-chart-docked-container{min-width:var(--ag-chart-menu-panel-width);position:relative}:where(.ag-chart-menu-hidden)~.ag-chart-docked-container{display:none}.ag-chart-tabbed-menu{display:flex;flex-direction:column;height:100%;overflow:hidden;width:100%}.ag-chart-tabbed-menu-header{cursor:default;flex:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-tabbed-menu-body{align-items:stretch;display:flex;flex:1 1 auto;overflow:hidden;position:relative;&:after{background:linear-gradient(var(--ag-background-color),transparent);content:"";display:block;height:16px;left:0;position:absolute;right:0;top:0}}.ag-chart-tab{overflow:hidden;overflow-y:auto;width:100%}.ag-chart-settings{overflow-x:hidden}.ag-chart-settings-wrapper{display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}.ag-chart-settings-nav-bar{align-items:center;border-top:solid var(--ag-border-width) var(--ag-border-color);display:flex;height:30px;padding:0 10px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-chart-settings-card-selector{align-items:center;display:flex;flex:1 1 auto;height:100%;justify-content:space-around;padding:0 10px}.ag-chart-settings-card-item{background-color:var(--ag-foreground-color);border-radius:4px;cursor:pointer;height:8px;position:relative;width:8px;&.ag-not-selected{opacity:.2}&:before{background-color:transparent;content:" ";display:block;height:20px;left:50%;margin-left:-10px;margin-top:-10px;position:absolute;top:50%;width:20px}&.ag-selected{background-color:var(--ag-accent-color)}}.ag-chart-settings-next,.ag-chart-settings-prev{flex:none;position:relative;&:focus-within{border-radius:1px;box-shadow:var(--ag-focus-shadow)}}.ag-chart-settings-next-button,.ag-chart-settings-prev-button{cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.ag-chart-settings-mini-charts-container{flex:1 1 auto;overflow:hidden auto;position:relative}.ag-chart-settings-mini-wrapper{display:flex;flex-direction:column;left:0;min-height:100%;overflow:hidden;padding-bottom:var(--ag-widget-container-vertical-padding);position:absolute;top:0;width:100%;&.ag-animating{transition:left .3s;transition-timing-function:ease-in-out}}.ag-chart-mini-thumbnail{border:solid var(--ag-border-width) var(--ag-border-color);border-radius:5px;cursor:pointer;padding:1px;&.ag-selected{border-color:var(--ag-accent-color);border-width:calc(var(--ag-border-width) + 1px);padding:unset}&:focus-visible{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}}.ag-chart-mini-thumbnail-canvas{display:block}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper,.ag-chart-format-wrapper{display:flex;flex-direction:column;padding-bottom:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-chart-advanced-settings-wrapper,.ag-chart-data-wrapper{height:100%;overflow-y:auto}.ag-chart-advanced-settings{background-color:var(--ag-chrome-background-color)}.ag-chart-advanced-settings,.ag-chart-advanced-settings-wrapper{width:100%}.ag-chart-advanced-settings-wrapper{padding-bottom:0}.ag-chart-advanced-settings-section{border-bottom:solid var(--ag-border-width) var(--ag-border-color);display:flex;margin:0;padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding)}.ag-chart-empty-text{align-items:center;background-color:var(--ag-background-color);display:flex;height:100%;justify-content:center;top:0;width:100%}.ag-charts-font-size-color{align-self:stretch;display:flex;justify-content:space-between}.ag-chart-menu-icon{border-radius:var(--ag-border-radius);cursor:pointer;margin:2px 0;opacity:.8;&:hover{opacity:1}}.ag-chart-menu-toolbar-button{background-color:unset;border:0;border-radius:1px;padding:0 2px}.ag-chart-data-column-drag-handle{margin-left:var(--ag-spacing)}.ag-chart-data-section,.ag-chart-format-section{display:flex;margin:0;:where(.ag-label:not(.ag-group-title-bar)){color:var(--ag-chart-menu-label-color)}:where(.ag-label-align-top .ag-label){margin-bottom:var(--ag-widget-vertical-spacing);margin-top:calc(var(--ag-widget-vertical-spacing)*.5)}:where(.ag-slider.ag-label-align-top .ag-label){margin-bottom:0}:where(label){display:inline-block}}.ag-chart-menu-panel{--ag-panel-background-color:var(--ag-chrome-background-color)}:where(.ag-ltr) .ag-chart-menu-panel{border-left:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-chart-menu-panel{border-right:solid var(--ag-border-width) var(--ag-border-color)}.ag-chart-data-wrapper,.ag-chart-format-wrapper{margin:0;padding:0}.ag-group{.ag-charts-data-group-item{padding-bottom:var(--ag-widget-container-vertical-padding);position:relative}.ag-charts-data-group-item:where(:not(:last-child)){margin-bottom:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-title-bar{background-color:unset;position:relative}.ag-charts-data-group-item:where(:not(.ag-charts-format-sub-level-group,.ag-pill-select,.ag-select)){height:var(--ag-list-item-height)}.ag-charts-data-group-item:where(.ag-picker-field){margin-top:var(--ag-spacing)}.ag-charts-advanced-settings-top-level-group-item,.ag-charts-format-top-level-group-item{margin:var(--ag-spacing) 0}.ag-charts-format-sub-level-group-container{display:flex;flex-direction:column;padding:var(--ag-widget-vertical-spacing) 0}.ag-charts-settings-group-container{border-top:none;display:grid;font-weight:500;grid-template-columns:60px 1fr 60px 1fr 60px;row-gap:8px;:where(.ag-chart-mini-thumbnail:nth-child(3n+1)){grid-column:1}:where(.ag-chart-mini-thumbnail:nth-child(3n+2)){grid-column:3}:where(.ag-chart-mini-thumbnail:nth-child(3n+3)){grid-column:5}}.ag-charts-data-group-title-bar,.ag-charts-format-top-level-group-title-bar,.ag-charts-settings-group-title-bar{border-top:none;font-weight:500;margin:0;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:relative}.ag-charts-format-sub-level-group-title-bar{background:none;font-weight:500;padding:var(--ag-widget-vertical-spacing) 0}&.ag-charts-format-sub-level-group,&.ag-charts-format-top-level-group,.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-group-item:last-child,.ag-charts-format-top-level-group-item{margin:0;padding:0}&.ag-charts-data-group,&.ag-charts-format-top-level-group{border-top:solid var(--ag-border-width) var(--ag-border-color)}.ag-charts-data-group-container,.ag-charts-format-top-level-group-container,.ag-charts-settings-group-container{margin:0;padding:0 var(--ag-widget-container-horizontal-padding)}.ag-charts-format-sub-level-group-container>*,.ag-charts-format-sub-level-no-header-group-container>*,.ag-charts-format-top-level-group-container>*{margin-bottom:var(--ag-widget-vertical-spacing)}.ag-charts-advanced-settings-top-level-group-container{margin:0}.ag-charts-advanced-settings-top-level-group-container,.ag-charts-advanced-settings-top-level-group-title-bar{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-charts-advanced-settings-top-level-group-item{margin-bottom:0;margin-top:calc(var(--ag-widget-vertical-spacing)*2)}}.ag-chart-settings-card-item.ag-not-selected:hover{opacity:.35}.ag-angle-select{align-items:center;display:flex}.ag-angle-select-wrapper{display:flex}.ag-angle-select-parent-circle{background-color:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:12px;display:block;height:24px;position:relative;width:24px}.ag-angle-select-child-circle{background-color:var(--ag-foreground-color);border-radius:3px;height:6px;left:12px;margin-left:-3px;margin-top:-4px;position:absolute;top:4px;width:6px}.ag-slider-wrapper{display:flex;:where(.ag-input-field){flex:1 1 auto}}.ag-color-panel{display:flex;flex-direction:column;padding:var(--ag-spacing);text-align:center;width:100%}.ag-spectrum-color{cursor:default;flex:1 1 auto;overflow:visible;position:relative}.ag-spectrum-color,.ag-spectrum-fill{border-radius:var(--ag-border-radius)}.ag-spectrum-fill{inset:0;position:absolute}.ag-spectrum-val{background-image:linear-gradient(0deg,#000,hsla(20,42%,65%,0));cursor:pointer}.ag-spectrum-dragger{background:#000;border:var(--ag-color-picker-thumb-border-width) solid #fff;border-radius:var(--ag-color-picker-thumb-size);box-shadow:0 0 2px 0 rgba(0,0,0,.24);cursor:pointer;height:var(--ag-color-picker-thumb-size);pointer-events:none;position:absolute;width:var(--ag-color-picker-thumb-size)}.ag-spectrum-alpha,.ag-spectrum-hue{cursor:default}.ag-spectrum-hue-background{background:linear-gradient(270deg,red 3%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);height:100%;width:100%}.ag-spectrum-alpha-background{background:linear-gradient(to right,var(--ag-internal-spectrum-alpha-color-from),var(--ag-internal-spectrum-alpha-color-to)),url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>') 0 0 /4px 4px;height:100%;width:100%}.ag-spectrum-tool{cursor:pointer;height:var(--ag-color-picker-track-size);margin-bottom:10px;position:relative}.ag-spectrum-slider,.ag-spectrum-tool{border-radius:var(--ag-color-picker-thumb-size)}.ag-spectrum-slider{border:var(--ag-color-picker-thumb-border-width) solid #fff;box-shadow:0 1px 4px 0 rgba(0,0,0,.37);height:var(--ag-color-picker-thumb-size);margin-top:calc(var(--ag-color-picker-track-size)/2*-1 + var(--ag-color-picker-thumb-size)/2*-1);pointer-events:none;position:absolute;width:var(--ag-color-picker-thumb-size)}:where(.ag-spectrum-alpha) .ag-spectrum-slider{background:linear-gradient(to bottom,var(--ag-internal-spectrum-alpha-color),var(--ag-internal-spectrum-alpha-color)) var(--ag-background-color)}.ag-recent-colors{display:flex;gap:6px;margin:10px var(--ag-spacing) 2px}.ag-recent-color{border:solid var(--ag-border-width) var(--ag-border-color);cursor:pointer}.ag-angle-select[disabled]{opacity:.5;pointer-events:none}:where(.ag-ltr) .ag-angle-select-field,:where(.ag-ltr) .ag-slider-field{margin-right:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-angle-select-field,:where(.ag-rtl) .ag-slider-field{margin-left:calc(var(--ag-spacing)*2)}.ag-color-dialog{border-radius:5px}:where(.ag-color-picker){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:var(--ag-spacing)}.ag-picker-field-display{align-items:center;display:flex;flex-direction:row;min-height:var(--ag-list-item-height)}}:where(.ag-ltr) .ag-color-picker-color,:where(.ag-ltr) .ag-color-picker-value{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-color-picker-color,:where(.ag-rtl) .ag-color-picker-value{margin-left:var(--ag-spacing)}.ag-spectrum-tools{padding:10px 0 0}.ag-spectrum-alpha-background,.ag-spectrum-hue-background{border-radius:var(--ag-color-picker-track-border-radius)}.ag-color-input-color,.ag-color-picker-color,.ag-recent-color{border-radius:var(--ag-color-picker-color-border-radius)}.ag-spectrum-sat{background-image:linear-gradient(90deg,#fff,hsla(20,42%,65%,0))}.ag-recent-color,.ag-spectrum-color,.ag-spectrum-slider{&:where(:not(:disabled,[readonly])):focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-color-input-color,.ag-color-picker-color{border:solid var(--ag-border-width) var(--ag-border-color);height:var(--ag-icon-size);width:var(--ag-icon-size)}:where(.ag-ltr) .ag-color-input .ag-input-field-input{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}:where(.ag-rtl) .ag-color-input .ag-input-field-input{padding-right:calc(var(--ag-icon-size) + var(--ag-spacing)*2)}:where(.ag-color-input) .ag-color-input-color{position:absolute}:where(.ag-ltr) :where(.ag-color-input) .ag-color-input-color{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-color-input) .ag-color-input-color{margin-right:var(--ag-spacing)}.ag-range-field{align-items:center;display:flex;:where(.ag-input-wrapper){height:100%}}.ag-range-field-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;height:100%;overflow:visible;padding:0;width:100%;&:disabled{opacity:.5}}.ag-range-field-input{&::-webkit-slider-runnable-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&:focus::-webkit-slider-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}&:active::-webkit-slider-runnable-track{background-color:var(--ag-accent-color)}}.ag-range-field-input{&::-moz-range-track{background-color:var(--ag-border-color);border-radius:1.5px;height:3px;margin:0;padding:0;width:100%}&::-moz-ag-range-thumb{-moz-appearance:none;appearance:none;background-color:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:100%;height:var(--ag-icon-size);margin:0;padding:0;transform:translateY(calc(var(--ag-icon-size)*-.5 + 1.5px));width:var(--ag-icon-size)}&:focus::-moz-ag-range-thumb{border-color:var(--ag-accent-color);box-shadow:var(--ag-focus-shadow)}&:active::-moz-ag-range-track{background-color:var(--ag-accent-color)}}`,qX=28,KX=6;function UL(e){return e?.match(/\d+\.\d+\.\d+/)}function P7e({gridMajorVersion:e,chartsMajorVersion:t}){let n=parseInt(e,10),i=parseInt(t,10),r=n-qX,o=i-KX,s=r>=0;return r===o&&s}function k7e(e){if(!e||!UL(e))return;let[t,n]=e.split(".")||[],i=`${t}.${n}.x`,o=parseInt(t,10)-qX+KX;if(o<0)return;let a=`${o}.${n}.x`;return{gridMajorMinor:i,chartsMajorMinor:a}}function rA({type:e,gridVersion:t,chartsVersion:n}){let i="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!t)return i;let r=k7e(t);if(!r)return i;let{gridMajorMinor:o,chartsMajorMinor:s}=r;return e==="incompatible"?`AG Grid version ${t} and AG Charts version ${n} is not supported. AG Grid version ${o} should be used with AG Chart ${s}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:e==="invalidCharts"?`AG Grid version ${o} should be used with AG Chart ${s} not ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:i}function L7e({gridVersion:e,chartsVersion:t}){if(!UL(t))return{isValid:!1,message:rA({type:"invalidCharts",gridVersion:e,chartsVersion:t})};if(!UL(e))return{isValid:!1,message:rA({type:"invalidGrid",gridVersion:e,chartsVersion:t})};let[n,i]=e.split(".")||[],[r,o,s]=t.split(".")||[],a=P7e({gridMajorVersion:n,chartsMajorVersion:r});return a&&i===o||s.includes("beta")?{isValid:!0}:!a||i!==o?{isValid:!1,message:rA({type:"incompatible",gridVersion:e,chartsVersion:t})}:{isValid:!1,message:rA({type:"invalid",gridVersion:e,chartsVersion:t})}}var O7e={linked:"linked",unlinked:"unlinked",chartsMenu:"menu-alt",chartsDownload:"save",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",chartsColorPicker:"small-down",chartsThemePrevious:"previous",chartsThemeNext:"next"},N7e={getChartModels:y7e,getChartRef:S7e,getChartImageDataURL:x7e,downloadChart:E7e,openChartToolPanel:D7e,closeChartToolPanel:_7e,createRangeChart:A7e,createPivotChart:R7e,createCrossFilterChart:F7e,updateChart:M7e,restoreChart:I7e},bY=[WZ,ti,Nl,ua,AA],wY="IntegratedCharts";var B7e={moduleName:wY,version:Lt,dependsOn:bY,validate:()=>({isValid:!1,message:g_(257)}),with:e=>{if(e.setup(),e.setGridContext?.(!0),e.isEnterprise&&e.setLicenseKey){let t={setLicenseKey:e.setLicenseKey};zy.setChartsLicenseManager(t)}return{moduleName:wY,version:Lt,icons:O7e,apiFunctions:N7e,dependsOn:bY,css:[T7e],validate:()=>L7e({gridVersion:Lt,chartsVersion:e.VERSION}),beans:[oNe.bind(null,e),w7e,u6e,r6e,n6e,c6e,qNe,e6e]}}},yY=[F0,c5e,RPe,N3e,z5e,j5e,tLe,qPe,KPe,WZ,YPe,HZ,VZ,Xke,Qke,D4e,_4e,POe,h3e,j3e,IIe,_A,I3e,e5e,qLe,XLe,JOe,rNe,mTe],SY="AllEnterprise",YX={with:e=>({moduleName:SY,version:Lt,dependsOn:[...yY,B7e.with(e),BOe.with(e)]}),moduleName:SY,version:Lt,dependsOn:yY};var b4={columnDefs:[{field:"numero",headerName:"Num. Fattura",width:10,flex:1},{field:"data"},{field:"paziente",filter:"agSetColumnFilter",floatingFilter:!0},{field:"codiceFiscalePaziente",filter:"agTextColumnFilter",floatingFilter:!0},{field:"descrizioneCertificato",filter:"agTextColumnFilter",floatingFilter:!0},{field:"imponibile",cellStyle:{textAlign:"right"}},{field:"ivaPerc",headerName:"iva %",cellStyle:{textAlign:"right"}},{field:"iva",headerName:"importo iva",cellStyle:{textAlign:"right"}},{field:"importo",headerName:"Importo Fattura",cellStyle:{textAlign:"right"}},{headerName:"Azioni",cellRenderer:e=>{let t=document.createElement("div"),n=document.createElement("button");n.innerText="\u{1F4DD}",n.addEventListener("click",()=>e.context.componentParent.generaPdf(e.data));let i=document.createElement("button");return i.innerText="\u{1F5D1}\uFE0F",i.addEventListener("click",()=>e.context.componentParent.elimina(e.data)),t.appendChild(n),t.appendChild(i),t},width:120,cellStyle:{textAlign:"right"}}],defaultColDef:{flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0},enableFilterHandlers:!0,sideBar:{toolPanels:["columns","filters"],defaultToolPanel:"filters"}},ZX=R5.withParams({accentColor:"#087AD1",backgroundColor:"#ffffff",borderColor:"#D7E2E6",borderRadius:2,browserColorScheme:"light",cellHorizontalPaddingScale:.7,chromeBackgroundColor:{ref:"backgroundColor"},columnBorder:!1,fontFamily:{googleFont:"Inter"},fontSize:13,foregroundColor:"#555B62",headerBackgroundColor:"#F4EAEA",headerFontSize:13,headerFontWeight:400,headerTextColor:"#84868B",rowBorder:!0,rowVerticalPaddingScale:.8,sidePanelBorder:!0,spacing:6,wrapperBorder:!1,wrapperBorderRadius:2});function V7e(e,t){if(e&1){let n=Xs();ze(0,"div",1)(1,"button",2),an("click",function(){Fn(n);let r=Wn();return Mn(r.action())}),Gt(2),We()()}if(e&2){let n=Wn();Xe(2),es(" ",n.data.action," ")}}var G7e=["label"];function H7e(e,t){}var z7e=Math.pow(2,31)-1,i1=class{_overlayRef;instance;containerInstance;_afterDismissed=new At;_afterOpened=new At;_onAction=new At;_durationTimeoutId;_dismissedByAction=!1;constructor(t,n){this._overlayRef=n,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,z7e))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},XX=new Ke("MatSnackBarData"),U0=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},j7e=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return e})(),U7e=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return e})(),W7e=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=zt({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return e})(),$7e=(()=>{class e{snackBarRef=Z(i1);data=Z(XX);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(i,r){i&1&&(ze(0,"div",0),Gt(1),We(),wr(2,V7e,3,1,"div",1)),i&2&&(Xe(),es(" ",r.data.message,`
`),Xe(),yr(r.hasAction?2:-1))},dependencies:[ow,j7e,U7e,W7e],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return e})(),w4="_mat-snack-bar-enter",y4="_mat-snack-bar-exit",q7e=(()=>{class e extends pv{_ngZone=Z(It);_elementRef=Z(sn);_changeDetectorRef=Z(Oi);_platform=Z(ui);_animationsDisabled=ea();snackBarConfig=Z(U0);_document=Z($t);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=Z(_n);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new At;_onExit=new At;_onEnter=new At;_animationState="void";_live;_label;_role;_liveElementId=Z(Oa).getId("mat-snack-bar-container-live-");constructor(){super();let n=this.snackBarConfig;n.politeness==="assertive"&&!n.announcementMessage?this._live="assertive":n.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(n){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(n);return this._afterPortalAttached(),i}attachTemplatePortal(n){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(n);return this._afterPortalAttached(),i}attachDomPortal=n=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(n);return this._afterPortalAttached(),i};onAnimationEnd(n){n===y4?this._completeExit():n===w4&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?Eo(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(w4)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(w4)},200)))}exit(){return this._destroyed?Zt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?Eo(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(y4)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(y4),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let n=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(s=>n.classList.add(s)):n.classList.add(i)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let n=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(n)===-1&&o.setAttribute("aria-owns",s+" "+n):o.setAttribute("aria-owns",n)}}_clearFromModals(){this._trackedModals.forEach(n=>{let i=n.getAttribute("aria-owns");if(i){let r=i.replace(this._liveElementId,"").trim();r.length>0?n.setAttribute("aria-owns",r):n.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let n=this._elementRef.nativeElement,i=n.querySelector("[aria-hidden]"),r=n.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Kt({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(i&1&&(Li(fv,7),Li(G7e,7)),i&2){let o;Yn(o=Zn())&&(r._portalOutlet=o.first),Yn(o=Zn())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(i,r){i&1&&an("animationend",function(s){return r.onAnimationEnd(s.animationName)})("animationcancel",function(s){return r.onAnimationEnd(s.animationName)}),i&2&&Xn("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[br],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(ze(0,"div",1)(1,"div",2,0)(3,"div",3),Jo(4,H7e,0,0,"ng-template",4),We(),ri(5,"div"),We()()),i&2&&(Xe(5),Yi("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[fv],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return e})(),K7e=new Ke("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new U0}),QX=(()=>{class e{_live=Z(fT);_injector=Z(_n);_breakpointObserver=Z(Kb);_parentSnackBar=Z(e,{optional:!0,skipSelf:!0});_defaultConfig=Z(K7e);_animationsDisabled=ea();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=$7e;snackBarContainerComponent=q7e;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let n=this._parentSnackBar;return n?n._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(n){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=n:this._snackBarRefAtThisLevel=n}constructor(){}openFromComponent(n,i){return this._attach(n,i)}openFromTemplate(n,i){return this._attach(n,i)}open(n,i="",r){let o=T(T({},this._defaultConfig),r);return o.data={message:n,action:i},o.announcementMessage===n&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(n,i){let r=i&&i.viewContainerRef&&i.viewContainerRef.injector,o=_n.create({parent:r||this._injector,providers:[{provide:U0,useValue:i}]}),s=new hd(this.snackBarContainerComponent,i.viewContainerRef,o),a=n.attach(s);return a.instance.snackBarConfig=i,a.instance}_attach(n,i){let r=T(T(T({},new U0),this._defaultConfig),i),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new i1(s,o);if(n instanceof Ma){let l=new Nf(n,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(l)}else{let l=this._createInjector(r,a),c=new hd(n,void 0,l),d=s.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe(JV.HandsetPortrait).pipe(Ki(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(n,i){n.afterDismissed().subscribe(()=>{this._openedSnackBarRef==n&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),i.duration&&i.duration>0&&n.afterOpened().subscribe(()=>n._dismissAfter(i.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{n.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):n.containerInstance.enter()}_createOverlay(n){let i=new Vf;i.direction=n.direction;let r=iw(this._injector),o=n.direction==="rtl",s=n.horizontalPosition==="left"||n.horizontalPosition==="start"&&!o||n.horizontalPosition==="end"&&o,a=!s&&n.horizontalPosition!=="center";return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),n.verticalPosition==="top"?r.top("0"):r.bottom("0"),i.positionStrategy=r,i.disableAnimations=this._animationsDisabled,Gf(this._injector,i)}_createInjector(n,i){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector;return _n.create({parent:r||this._injector,providers:[{provide:i1,useValue:i},{provide:XX,useValue:n.data}]})}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();hy.registerModules([F0]);hy.registerModules([YX]);var kA=class e{constructor(t,n,i,r,o){this.cd=t;this.fattureService=n;this.route=i;this.router=r;this.snack=o}themeGrigliaPosizioniInEssere=ZX;rowDataFattura=[];rowData=[];colDefsFattura=b4.columnDefs;gridOptions=ce(T({},b4),{context:{componentParent:this}});ngOnInit(){var t=this.fattureService._getListaFatture().subscribe(i=>{console.log("Fatture decriptate:",i),this.rowDataFattura=i,this.cd.detectChanges()});let n=this.route.snapshot.params.id;console.log("Parametro iniziale:",n),this.route.params.subscribe(i=>{var r=this.fattureService._getListaFatture().subscribe(o=>{this.rowDataFattura=o})}),this.router.events.pipe(zi(i=>i instanceof wc)).subscribe(i=>{console.log("\u{1F504} Route cambiata:",i.url)})}modifica(t){console.log("Modifica fattura:",t)}elimina(t){S4.default.fire({title:"Sei sicuro?",text:`Vuoi eliminare la fattura ${t.numero}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xEC, elimina",cancelButtonText:"Annulla"}).then(n=>{n.isConfirmed&&this.fattureService.eliminaFattura(t).subscribe(()=>{S4.default.fire("Eliminata!",`Fattura ${t.numero} eliminata.`,"success"),this.fattureService._getListaFatture().subscribe(i=>{this.rowDataFattura=i,this.cd.detectChanges()})})})}gridApi;onGridReady(t){this.gridApi=t.api}defaultColDef={flex:1};exportExcel(){this.gridApi.exportDataAsExcel({fileName:"fatture.xlsx"})}exportSelectedCsv(){this.gridApi.exportDataAsCsv({onlySelected:!1,fileName:"fatture_selezionate.csv"})}generaPdf(t){let n=new _t;var i=this.fattureService.getFatturaByNumero(t.numero);i.subscribe(r=>{var o="Rosaci Carmela",s="RSCCML58A44F112E",a="Via Mar Nero 3/B Milano";n.setFontSize(16),n.text("Fattura",10,10),n.setFontSize(12),n.text(`Numero fattura: ${r?.numero} del  ${r?.data}`,10,20),n.text(`Dott.ssa : ${o}  ${s}`,10,30),n.text(`${a} `,10,40),n.text(`Paziente: ${r?.paziente}`,10,70),n.text(`Codice Fiscale: ${r?.codiceFiscalePaziente}`,10,80),n.text(`Indirizzo: ${r?.indirizzoPaziente}`,10,90),n.text(` ${r?.descrizioneCertificato}`,10,110),n.text(`Imponibile : \u20AC  ${r?.imponibile} `,10,130),n.text(`iva ${r?.ivaPerc} %`,80,130),n.text(`: ${r?.iva} \u20AC`,99,130),n.text(`Totale fattura:  ${r?.importo} \u20AC`,10,140),FE(n,{startY:60,body:[]}),n.save(`fattura_${r?.numero||"senza_numero"}.pdf`)})}static \u0275fac=function(n){return new(n||e)(Pt(Oi),Pt(Bv),Pt(ml),Pt(dd),Pt(QX))};static \u0275cmp=Kt({type:e,selectors:[["lista-fatture"]],decls:3,vars:5,consts:[["mat-button","","color","accent",3,"click"],[2,"width","100%","height","100%",3,"gridReady","rowData","columnDefs","defaultColDef","gridOptions","theme"]],template:function(n,i){n&1&&(ze(0,"button",0),an("click",function(){return i.exportSelectedCsv()}),Gt(1,` Esporta Csv
`),We(),ze(2,"ag-grid-angular",1),an("gridReady",function(o){return i.onGridReady(o)}),We()),n&2&&(Xe(2),mn("rowData",i.rowDataFattura)("columnDefs",i.colDefsFattura)("defaultColDef",i.defaultColDef)("gridOptions",i.gridOptions)("theme",i.themeGrigliaPosizioniInEssere))},dependencies:[ad,nK,av],styles:[".ag-theme-alpine[_ngcontent-%COMP%]{min-width:800px}"]})};var LA=class e{constructor(t){this.http=t}baseUrl=fD.baseUrl;downloadDb(){return this.http.get(`${this.baseUrl}/backup`,{responseType:"blob"})}updateDb(t){return this.http.post(`${this.baseUrl}/update`,t)}static \u0275fac=function(n){return new(n||e)(Tt(Rh))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})};var OA=class e{constructor(t){this.api=t;_m(()=>console.log("count changed:",this.count()))}test=12;count=gn(0);double=Pa(()=>this.count()*2);search=gn("");category=gn(null);maxPrice=gn(null);onlyAvailable=gn(!1);selectedFile=null;download(){this.api.downloadDb().subscribe(t=>{let n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="db.json",i.click(),window.URL.revokeObjectURL(n)})}onFileSelected(t){this.selectedFile=t.target.files[0]}upload(){if(!this.selectedFile)return;let t=new FileReader;t.onload=()=>{let n=JSON.parse(t.result);this.api.updateDb(n).subscribe(()=>{alert("Dati aggiornati in memoria")})},t.readAsText(this.selectedFile)}increment(){this.count.update(t=>t+1),this.test=this.test+1}filteredProducts=Pa(()=>{});static \u0275fac=function(n){return new(n||e)(Pt(LA))};static \u0275cmp=Kt({type:e,selectors:[["app-report"]],decls:9,vars:0,consts:[[3,"click"],["type","file","accept",".json",3,"change"]],template:function(n,i){n&1&&(Ks(0,"p"),Gt(1,"report works!"),Ys(),Ks(2,"button",0),Nm("click",function(){return i.download()}),Gt(3,"Scarica db.json"),Ys(),Zs(4,"br")(5,"br"),Ks(6,"input",1),Nm("change",function(o){return i.onFileSelected(o)}),Ys(),Ks(7,"button",0),Nm("click",function(){return i.upload()}),Gt(8,"Aggiorna servizio"),Ys())},encapsulation:2})};var JX=[{path:"login",component:y2},{path:"home",component:S2,children:[{path:"dashboard",component:mD},{path:"listaFatture",component:kA},{path:"report",component:OA},{path:"",redirectTo:"login",pathMatch:"full"}]},{path:"",redirectTo:"login",pathMatch:"full"}];var x4={providers:[OF(),YI(JX)]};var NA=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Kt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,i){n&1&&ri(0,"router-outlet")},dependencies:[kf],encapsulation:2})};function X7e(e){let t=e,n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1&&i===0?1:r===0&&n!==0&&n%1e6===0&&i===0||!(r>=0&&r<=5)?4:5}var eQ=["it",[["m.","p."],["AM","PM"]],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",X7e];hy.registerModules([F0]);yB(eQ);wI(NA,ce(T({},x4),{providers:[...x4.providers||[],DI(),{provide:Df,useValue:"it-IT"}]})).catch(e=>console.error(e));
